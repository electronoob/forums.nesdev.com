<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=4163" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2008-06-26T04:52:25-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=4163</id>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-06-26T04:52:25-07:00</updated>
<published>2008-06-26T04:52:25-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34455#p34455</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34455#p34455"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34455#p34455"><![CDATA[
<div class="quotetitle">Celius wrote:</div><div class="quotecontent"><br />Yeah, I'm pretty sure that SMB1 updates WAY off screen<br /></div><br />So do a <em>lot</em> of vertically mirrored games, such as Contra.<br /><br />I'm with Dwedit: just use BNROM. If you have a bunch of A*ROM boards, you can rewire them to BNROM by cutting the trace to CIRAM A10 and running a wire from CIRAM A10 to PPU A10 or PPU A11.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Thu Jun 26, 2008 4:52 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Celius]]></name></author>
<updated>2008-06-25T21:13:32-07:00</updated>
<published>2008-06-25T21:13:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34444#p34444</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34444#p34444"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34444#p34444"><![CDATA[
Yeah, I'm pretty sure that SMB1 updates WAY off screen, so any attempt to do that with one screen mirroring will result in it updating right on screen.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=138">Celius</a> — Wed Jun 25, 2008 9:13 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[BMF54123]]></name></author>
<updated>2008-06-25T16:23:41-07:00</updated>
<published>2008-06-25T16:23:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34438#p34438</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34438#p34438"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34438#p34438"><![CDATA[
<div class="quotetitle">Hamtaro126 wrote:</div><div class="quotecontent"><br />I attempted the above, But the code for the SMB1 renderer wasn't doing any of it right.<br /></div><br />Probably because it was never designed to work with one-screen mirroring.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=935">BMF54123</a> — Wed Jun 25, 2008 4:23 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2008-06-25T16:15:38-07:00</updated>
<published>2008-06-25T16:15:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34437#p34437</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34437#p34437"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34437#p34437"><![CDATA[
Or just abandon AOROM and use BxROM, GNROM or MMC1 instead.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Wed Jun 25, 2008 4:15 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Hamtaro126]]></name></author>
<updated>2008-06-25T15:18:54-07:00</updated>
<published>2008-06-25T15:18:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34436#p34436</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34436#p34436"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34436#p34436"><![CDATA[
I wish someone made a 1-screen mirroring version of SMB1, That would really help<br /><br />I attempted the above, But the code for the SMB1 renderer wasn't doing any of it right.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=287">Hamtaro126</a> — Wed Jun 25, 2008 3:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Sivak]]></name></author>
<updated>2008-06-24T13:56:44-07:00</updated>
<published>2008-06-24T13:56:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34413#p34413</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34413#p34413"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34413#p34413"><![CDATA[
Hey again.  I finally took some time to look into this and I'm using the following method:<br /><br />Basically, the code I copy to RAM are these instructions:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.bank 3<br />.org $F000<br />LDA selectedBank<br />TAX<br />STA bankID, X<br />JMP $FFE0          ;$FFE0 is a spot of empty space in both games where I simply put the instruction JMP RESET, which is where the standard game reset routine is.<br /></div><br /><br />I just store the above code all at the beginning of $0600 and then JSR $0600.  That works, but I just wanted to ask if that looked bug-free or if I might be missing something.<br /><br />My question was regarding:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.bank 3<br />.org $FFE0<br />;LDX #$00       ; you don't get a bus conflict if you<br />;STX RESET + 1  ; overwrite the immediate operand<br />JMP RESET      ;I guess I could also have done JMP $8000<br /></div><br /><br />When I have the LDX #0, and STX RESET + 1, that causes freezing and the games never load.  But with those two lines commented out, the game loads fine.  I also have both games' reset vectors point to a new routine (called RESET2) that simply forces bank 0 to be loaded and that works fine too.<br /><br />So my question is:  Are those two lines I've got commented out vital or is there no concern?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3374">Sivak</a> — Tue Jun 24, 2008 1:56 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-06-15T12:14:48-07:00</updated>
<published>2008-06-15T12:14:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34247#p34247</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34247#p34247"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34247#p34247"><![CDATA[
If you know that none of the NROM games use the last few bytes of PRG ROM for anything, you could just put identical entry point code in $FFF2-$FFFF of all banks:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">reset:<br />  ldx #$00       ; you don't get a bus conflict if you<br />  stx reset + 1  ; overwrite the immediate operand<br />  jmp $8000<br />  .addr nmi_entry<br />  .addr reset<br />  .addr irq_entry<br /></div><br />In this case, your menu starts at $8000 of bank 0:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">entry:<br />  sei<br />  ; X is already 0 from the code in all banks<br />  stx PPUCTRL  ; disable NMI<br />  stx PPUMASK  ; disable rendering<br />  dex<br />  txs  ; set stack pointer to $01FF<br /><br />  ; etc.<br /></div><br />But then you'd have to copy the <em>actual</em> start of your game to RAM and JMP through that instead of ($FFFC).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Jun 15, 2008 12:14 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Sivak]]></name></author>
<updated>2008-06-15T09:55:30-07:00</updated>
<published>2008-06-15T09:55:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34237#p34237</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34237#p34237"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34237#p34237"><![CDATA[
Well, the multicart is of the first two games I made, so I have the sources and all, but what exactly would I need to do?  Just some normal bank switch or is there more to it?  <br /><br />Also, one guy mentioned that it's possible for AOROM to start in a random bank and not always bank 0.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3374">Sivak</a> — Sun Jun 15, 2008 9:55 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-06-15T05:46:04-07:00</updated>
<published>2008-06-15T05:46:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34230#p34230</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34230#p34230"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34230#p34230"><![CDATA[
Three things: <ol style="list-style-type: lower-alpha"><li>A*ROM and B*ROM don't support SRAM without adding <a href="http://nesdevwiki.org/index.php/PRG_RAM_circuit" class="postlink">an extra 74HC10 chip</a> and a bit of analog circuitry to the board. </li><li>This extra SRAM, the support circuitry, and the revised PCB cost money to replicate. </li><li>Multicarts including one battery-backed game need to preserve the data in SRAM when switching games. </li></ol><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Jun 15, 2008 5:46 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2008-06-15T05:04:59-07:00</updated>
<published>2008-06-15T05:04:59-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34229#p34229</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34229#p34229"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34229#p34229"><![CDATA[
Who needs rom space when you can add an extra 8k of SRAM in there?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Sun Jun 15, 2008 5:04 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-06-15T04:31:47-07:00</updated>
<published>2008-06-15T04:31:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34228#p34228</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34228#p34228"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34228#p34228"><![CDATA[
You could hack each game's reset code to jump back to the multicart's menu. (This was done in SMB+Duck Hunt.) But then you wouldn't be able to use an automated tool to build multicarts because you'd have to find some space in the ROM to put the trampoline code.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Jun 15, 2008 4:31 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Sivak]]></name></author>
<updated>2008-06-14T21:18:40-07:00</updated>
<published>2008-06-14T21:18:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34220#p34220</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34220#p34220"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34220#p34220"><![CDATA[
Ok.  I got a menu and everything so you can pick a game and it switches to the appropriate bank and then performs the reset routine.<br /><br />My final question is this:  Whenever I use the emulator reset button, it doesn't reset back to the multicart's menu, but rather stays in the current bank as if you reset just that game.  The power button of course works.  Is there any good way around this or is it going to be power all the way?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3374">Sivak</a> — Sat Jun 14, 2008 9:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-06-14T10:32:58-07:00</updated>
<published>2008-06-14T10:32:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34182#p34182</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34182#p34182"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34182#p34182"><![CDATA[
<div class="quotetitle">Sivak wrote:</div><div class="quotecontent"><br />I guess I'm lost on the whole "copy to RAM and execute code" part of things.  Do I just put code similar to what I have above somewhere in, say, $0500 and JSR there<br /></div><br />Pretty much. Except you made one mistake: it's JMP ($FFFC), using indirect addressing, not JMP $FFFC.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Jun 14, 2008 10:32 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Sivak]]></name></author>
<updated>2008-06-14T10:19:24-07:00</updated>
<published>2008-06-14T10:19:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34179#p34179</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34179#p34179"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34179#p34179"><![CDATA[
Well, I've got the CHR RAM part of things.  The only problem I guess lies with doing the bank swap.<br /><br />I know that if I bank switch, I'm immediately in the new bank, so in theory I could be anywhere in the program.  <br /><br />The way I'm doing the switch is like this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">    LDA #1  ;Bank 1 is game 1.  Bank 2 is game 2.  Bank 0 is the menu.  Bank 3 is unused.<br />    TAX<br />    STA bankID, X<br />   ;I think JMP $FFFC would need to go here...<br /> <br />;----------This appears later in the program----------<br />;Things used for bank switching<br />bankID:<br />   .db $00, $01, $02, $03<br /></div><br /><br />The only thing is once I'm swapped, what do I do to JMP to $FFFC?  Obviously JMP'ing to there before swapping will just constantly reset the game...<br /><br />I guess I'm lost on the whole "copy to RAM and execute code" part of things.  Do I just put code similar to what I have above somewhere in, say, $0500 and JSR there or is there more to it?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3374">Sivak</a> — Sat Jun 14, 2008 10:19 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-06-14T09:31:12-07:00</updated>
<published>2008-06-14T09:31:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34174#p34174</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34174#p34174"/>
<title type="html"><![CDATA[Using AOROM to make a 2 in 1 multicart of NROM games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4163&amp;p=34174#p34174"><![CDATA[
The source code for my Forbidden Four multicart engine has an example of how to make a RAM-based <a href="http://en.wikipedia.org/wiki/Trampoline_%28computers%29" class="postlink">trampoline</a>. It involves copying a piece of code to RAM that does the following: <ol style="list-style-type: decimal"><li>Set up the mapper to copy CHR. </li><li>Copy or decompress CHR to CHR RAM. (Omit this step for CHR ROM boards such as GNROM or some MMC1 configurations.) </li><li>Set up the mapper to run PRG. </li><li>JMP ($FFFC) to start the game from its reset handler. </li></ol><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Jun 14, 2008 9:31 am</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - DMC channel</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">DMC channel</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=3706">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=3706</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>7</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>atari2600a</b> [ Sat Nov 17, 2007 11:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">Disch wrote:</div><div class="quotecontent">spaced evenly</div><br />This would be the hard part, if you are doing anything besides playing the samples. But I guess this would allow for some sort of audio compression, if the decompression engine was simple enough and everything was very well timed.</div><br />I believe that's called <em>Big Bird's Hide and Speak</em>. I tried tracing through its audio decompression code. It has about eight "flavors" of compressed sample blocks; they take different amounts of time to decode so each byte just JSRs into a big NOP slide to kill time. Eventually, I said screw it, I'm just writing my own ADPCM playback engine.</div>
<br />
<br />Wait, aren't you the member I was able to find a Wiki article on saying you where a fan of Sesame St.? <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>atari2600a</b> [ Sun Nov 18, 2007 3:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">atari2600a wrote:</div><div class="quotecontent">Curious, has anyone ever tried converting an entire song &amp; slapping it into a ROM?</div><br />I've done so. But <a href="http://pics.pineight.com/max-300.zip" class="postlink">512 KiB for a &lt;2 minute song</a> is impractical. Better is to <a href="http://pics.pineight.com/nt2/Butterfly.nsf" class="postlink">do it without DPCM</a>.</div>
<br />
<br />I *finally* figured out what was wrong w/ FCEU on my linux distro so I finally got this working.  Sounds decent, although it obvious why it sounds bad as it's trance/techno &amp; therefore virtually depends on stereo effects...
<br />
<br />Would you be willing to release the source to this?  I have some mono-tastic oldskool (1930-ish to 60's) MP3's I'd like to try this out on...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Nov 18, 2007 4:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I guess I will tell you my opinion about the DMC channel. You don't have to agreee, but I think this channel really, really suck. Any wav file converted to this format sounds absolutely terrible. Maybe the only game that made good use of it is Gradius II, wich has voices when you select "Speed Up", "Missile", "Laser", etc... Since those words are already written on the screen you know what the voice says, and since the music is playing quite loud you don't notice the terrible quality of the sound, so this sounds cool. Also the last boss says very slow "Speed Up Missile, etc.." when you reach it, and it looks like an weird scream.
<br />
<br />Anyways, maybe some Bass Drum can sound decent on the DMC channel if used with other music to cover the hiss noise, but any other drums sounds terrible, not to mention melodic instruments. I'd stick with the noise channel to do drums, listen to Mega Man 6, it has awesome drum patters without any DMC, and maybe it's possible to do even better than this. Batman : Return of the Joker and some other Sunsoft games were able to play bass with DMC, that sounds allright, but it also sounds monotonous and boring, and you can perorm no effects such as slide, vibrato, and the sound is often detuned. Finally, Sunsoft used triangle for drums instead, so this didn't even add one voice, they should have redirected their bass on triangle, and make all drums with noise, this would have sounded better and taken much less space on the ROM.
<br />So I really hate the DMC channel and I probably will never use it at all.
<br />
<br />About the manual DMC channel I have nothing against it, but the fact doing anything freezes the CPU pretty much sets the facts. Maybe it could be used for Tales-of-Phantasia like voices, which may sound cool, and good since there wouldn't be this horrible hiss noise present on the automatic DMC channel.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sun Nov 18, 2007 10:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Celius wrote:</div><div class="quotecontent">I'm just wondering how that would be possible, because can't you only stick DMC data in $C000-$FFFF? Is the ROM 1024k? I think I may have heard that before actually...</div><br />Play more than one DMC sample back-to-back, bank switching your samples out. Also, the DMC can actually play samples from $8000-$FFFF, just the start address is limited to $C000-$FFC0 (it wraps from $FFFF to $8000).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I have to admit, the DMC address byte is a really stupid concept. It would have caused way less problems if they just made it like $2005/$2006, where you can do two writes to it. It's actually kind of dissapointing to know that there isn't that much flexibility with it.</div>
<br />That'd require more bits in the counter. Having only 10 significant bits means they can just hard-wire the low bits of the address to 0, reducing the number of transistors.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Sun Nov 18, 2007 12:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I guess I wouldn't be able to have too many DMC samples in my games, because I usually just have the engine in $C000-$FFFF, and the game data in $8000-$BFFF. I obviously wouldn't want to bankswitch the engine out, that's like selling your car for gas money. Isn't there something where you can switch 8k at a time?
<br />
<br />EDIT: Oh, and Bregalad, while the sound quality of the DMC channel may be low, there are some sounds that the NES just can't make without it. If you absolutely need someone screaming on a game or something, the DMC is the way to go in my mind.
<br />
<br />And another question. Do you have to reset the start address every time you play a new sample? Because if you don't, that makes it a lot easier to play stuff from $8000-$BFFF.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Nov 18, 2007 12:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Anyways, maybe some Bass Drum can sound decent on the DMC channel if used with other music to cover the hiss noise, but any other drums sounds terrible, not to mention melodic instruments.</div><br />The drums in Super Mario Bros. 3 sounded OK.<br /><br /><div class="quotetitle">Celius wrote:</div><div class="quotecontent">I guess I wouldn't be able to have too many DMC samples in my games, because I usually just have the engine in $C000-$FFFF, and the game data in $8000-$BFFF. I obviously wouldn't want to bankswitch the engine out, that's like selling your car for gas money. Isn't there something where you can switch 8k at a time?</div><br />Yeah. It's called MMC3, and SMB3 uses it.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">And another question. Do you have to reset the start address every time you play a new sample? Because if you don't, that makes it a lot easier to play stuff from $8000-$BFFF.</div>
<br />But if you play $FFC0 through $8xx1, you also get garbage from the vectors.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Sun Nov 18, 2007 12:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think the drum in Mario 3 sounded great. I always use that as an example when trying to explain the DMC channel to people who don't know anything about the NES.
<br />
<br />I was also thinking about playing $FFC0-$FFFF. You would get garbage from the vectors, but it wouldn't be that noticable, would it? It's just 6 bytes... I tried to start a little later in my sample by making the start address higher by #$40, and you could barely even tell the difference. So I don't think 6 bytes would be that noticable. I could be wrong though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Nov 18, 2007 1:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'd prefer have a scream made with a square wave that sounds fun that a laughable recorded scream that is made with DMC that sounds 2000% fuzzy and that will make people think "Am I supposed to be impressed by them making such a sound out of the NES ?".
<br />
<br />And yes the drums in SMB 3 sounds almost decent, but they only play 2 notes that are detuned and that sounds horrible. I guess they chose a pitch that is a multiple of the frequency they converted to or something so that the conversion end up with better results. Anything I try to convert to DMC sounds just horrible. Exept for brown noise, wich is the only thing DMC can do. Kick drum is close enough to brown noise if it's a really short kick.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Sun Nov 18, 2007 1:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think your problem is you're expecting the DMC to sound like the original wav.  It's not going to.
<br />
<br />The DMC has a sound all its own.  The second you start comparing it to other (superior) mediums you're dooming your opinion of it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>strangenesfreak</b> [ Sun Nov 18, 2007 2:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Could a game specialized for a PowerPak pop some sample bytes (either Raw PCM or DPCM) off of extra files on the CF card and rewrite the PRG chip's space for samples every frame?  If such a game could pop off enough bytes at a decent speed - and the PowerPak's file loading routines and its mapper don't interfere with too much of the CPU space, I think it could be plausible.  But even then, it'd be tricky - but wouldn't be too impossible - to limit the programming structure of such a game to support the routines.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>NotTheCommonDose</b> [ Sun Nov 18, 2007 2:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A good example of the DMC/PCM channel.
<br /><!-- m --><a class="postlink" href="http://www.zophar.net/roms/files/nes/tmntdemo.zip">http://www.zophar.net/roms/files/nes/tmntdemo.zip</a><!-- m --> <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Mon Nov 19, 2007 11:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Disch wrote:</div><div class="quotecontent">The DMC has a sound all its own.  The second you start comparing it to other (superior) mediums you're dooming your opinion of it.</div>
<br />Yes, and what I say is that it's own unique sound sound crappy to me.
<br />
<br />So instead of considering the DMC channel as an ability to play sample, you consider it as a channel that can output a customiseable stream of fuzzy junk that is supposed to be usefull to the programmer (maximal sarcasm) ?
<br />
<br />Note that this remembers me an older debate about the sound of the Genesis, some said it sounded good in some case, and some said it sucked.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Mon Nov 19, 2007 11:10 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You must <em>really</em> hate the noise channel, then.   =P

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Mon Nov 19, 2007 11:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Actually, I have to say that I don't really care for the noise channel. It is what it is, and I guess I have to work with it, but I think it outputs really odd sounds, half of which I'll never use.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Nov 19, 2007 12:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">So instead of considering the DMC channel as an ability to play sample, you consider it as a channel that can output a customiseable stream of fuzzy junk that is supposed to be usefull to the programmer (maximal sarcasm) ?</div>
<br />That or just a timer that can replace the scanline timer on a mapper. A couple Codemasters games do this.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>7</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
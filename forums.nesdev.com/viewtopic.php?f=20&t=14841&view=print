<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Pokemon Red Fake</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Pokemon Red Fake</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=20&amp;t=14841">http://forums.nesdev.com/viewtopic.php?f=20&amp;t=14841</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>skaman</b> [ Sat Sep 17, 2016 2:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was going through my box of old broken GB carts and found this Chinese Pokemon Red clone.  I got it in a lot with several carts and never did anything with it since it was clearly a fake.  Since I had the cart out, I dumped the ROM to see what was in there.  If anyone is interested in the file, get it here:  <strong>[Removed: Pokemon_Red_Fake.zip]</strong><br /><br /><img src="http://i65.tinypic.com/4hblhy.jpg" alt="Image" /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">PCB<br />KT-187<br />1999.11.23<br /><br />CHIPS<br />28 PIN TSOP<br />TOSHIBA TC55257DFTL-85V<br />JAPAN 9626HAK<br /><br />40 PIN TSOP<br />FUJITSU MALAYSIA<br />29LV004T-12PTN<br />9723 F92<br /><br />40 PIN TSOP<br />MARKS SANDED OFF<br />SMALL STAMP &quot;Q D G F&quot;<br /><br />16 PIN DIP<br />CD74HCT139E<br />RCA H 615<br /><br />14 PIN SOIC<br />TI ALS00A<br />19KD<br /><br />20 PIN DIP<br />JAPAN 9535H<br />74HC574AP<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Sep 17, 2016 3:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Contents of that file are very similar to the contents of GoodGB &quot;Pokemon Red (UE) [S][!].sgb&quot;. Just 14 bytes were changed:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">off to from correspondingasm<br />0C1 F5 00 push af<br />0C2 3E 00 ld a,$00<br />0C4 EA 00 ld ($7000), a<br />0C6 70 00<br />0C7 3E 00 ld a,$a5<br />0C8 A5 00<br />0C9 EA 00 ld ($7000), a<br />0CB 70 00<br />0CC F1 00 pop af<br />0CD C3 00 jp $0150<br />0CE 50 00<br />0CF 01 00<br />103 C0 50 change reset vector<br />104 00 01<br /></div> ... so you should probably remove the link<br /><br />The second (sanded off) ROM appears to be a 256KiB 'PROM, because of the mirroring across the last two quarters. (The official games just had the entire last quarter contain all 0s instead)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>skaman</b> [ Sat Sep 17, 2016 4:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><img src="http://i63.tinypic.com/p93kp.jpg" alt="Image" /><br /><img src="http://i68.tinypic.com/o8ezq8.jpg" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>calima</b> [ Sun Sep 18, 2016 2:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So, what is the effect of that change? Skipping the intro animation?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Sep 18, 2016 11:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Doubtful.<br /><br />The board's so dense it's really hard to tell anything.<br /><br />Let's assume for the moment that the sanded-off ROM is actually a 1 MiB 'PROM instead of a 256 KiB one, and the pirates pre-expanded the fixed bank. (In the absence of two 74'08s or 74'00s, this seems likely). So there's actually 1.5 MiB of storage.<br /><br />There's a 74'574: that holds the bank. Plus a little; D6 and D7 are connected but clearly do something different. The 74'00 and 74'139 almost certainly decode some combination of address lines and the /WR strobe to make a single banking register...<br /><br />Pokémon Red used the <a href="http://gbdev.gg8.se/wiki/articles/MBC3" class="postlink">MBC3</a>. The pirates clearly didn't include an RTC here.<br /><br />Somehow they must have folded the 2 bits of RAM banking in with the 6 bits of ROM banking. But without any visible changes to the ROM as dumped, I have no idea how they did that. Maybe a re-dump that doesn't assume that $0000-$3FFF is fixed would cast light?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>skaman</b> [ Sun Sep 18, 2016 12:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I thought the cart was interesting because of the lack of the MBC.<br /><br />Anything specific that I should try?  I can modify my dumper code as needed.<br /><br /><img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Sep 18, 2016 1:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Try reading the entire $0000-$7FFF range for each bank?<br /><br />If you're up for it, check what pins the 74'139 and 74'00 connect to. Part of one or the other has to select between the two ROMs... The rest has to do something with the banking register.<br /><br />I &quot;like&quot; the DIP parts mounted SMD style on it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>skaman</b> [ Sun Sep 18, 2016 6:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I did some continuity tests on the 2 chips.  Hopefully it makes some sense.  If anything looks wrong, then I can recheck it.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">ALS00A<br />1&nbsp; PIN1/2(00), PIN3(574), PIN3/13/15(139)<br />2&nbsp; PIN1/2(00), PIN3(574), PIN3/13/15(139)<br />3&nbsp; PIN3/4/13(00)<br />4&nbsp; PIN3/4/13(00)<br />5&nbsp; PIN5/8(00)<br />6&nbsp; PIN22(29LV004)<br />7&nbsp; GND<br />8&nbsp; PIN5/8(00)<br />9&nbsp; PIN9/10/12(00), PIN12(574), PIN37(29LV004)<br />10 PIN9/10/12(00), PIN12(574), PIN37(29LV004)<br />11 PIN22(SANDED TSOP)<br />12 PIN9/10/12(00), PIN12(574), PIN37(29LV004)<br />13 PIN3/4/13(00)<br />14 VCC<br /><br />CD74HCT139E<br />1&nbsp; PIN2(574)<br />2&nbsp; PIN36(SANDED TSOP), PIN28(TC55257)<br />3&nbsp; PIN1/2(00), PIN3(574), PIN3/13/15(139)<br />4&nbsp; N/C<br />5&nbsp; CAP<br />6&nbsp; N/C<br />7&nbsp; N/C<br />8&nbsp; GND<br />9&nbsp; PIN7(TC55257)<br />10 N/C<br />11 PIN1(574)<br />12 N/C<br />13 PIN1/2(00), PIN3(574), PIN3/13/15(139)<br />14 PIN2(574)<br />15 PIN1/2(00), PIN3(574), PIN3/13/15(139)<br />16 VCC</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>skaman</b> [ Sun Sep 18, 2016 6:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think the Sanded TSOP is simply another 29LV004 chip.<br /><br />I looked at the two TSOPs more closely and they differ slightly.  Maybe chips out of different batches/revisions?  The dimensions are close but they don't appear to be exactly the same.  The legs are slightly different between the chips.  The circle that designates Pin 1 is also slightly larger and deeper on the Sanded TSOP.<br /><br />I corrected the stamp on the Sanded TSOP to &quot;Q D G F&quot;.<br /><br />The cart appears to be able to be configured in either 2M, 4M or 8M based on markings on the PCB.<br /><br />Unfortunately, my testing of the different chips appears to have corrupted the cart.  I no longer get good data when I dump it.  <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Sep 18, 2016 6:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hmmm..<br /><br />74ALS00<br />NAND#1: invert A15 (generate +ROMCE)<br />NAND#2: NAND2(/A15,/Q5)<br />NAND#3: invert Q5<br />NAND#4: NAND2(/A15,Q5)<br />→ Ok, the 74ALS00 is just the demultiplexer for the two ROM ICs. 29LV004 pin 37 is its /CE; the sanded ROM's pin 22 must be its.<br /><br />74HCT139<br />demux1: select when A14 is LOW (pin 1) and A15 is LOW (pin 3,5) and ??? is high (pin 2,5)<br />demux2: select when A15 is LOW (pin 15) and A14 is HIGH (pin 14,11,9) and ... do something depending on whether A15 is HIGH or  LOW ? that can't be right.<br /><br />In hindsight, the bit where A14 and A15 connect to the '574 make me Very Suspicious.<br /><br />I don't recognize its manufacturer logo, either, but that doesn't really mean much.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nitro2k01</b> [ Mon Sep 19, 2016 1:01 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Pokemon Red Fake</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I would have asked you to see if it responds to flash commands, like:<br />0x0555 &lt;- 0xAA<br />0x0AAA &lt;- 0x55<br />0x0555 &lt;- 0x90<br />And then reading address 0000 and 0001 and see if you get a manufacturer and device id code, as a confirmation that this cart might be reusable as a flash cart. At least the chip with the markings intact looks like a flash chip based on the marking.<br /><br />But after looking at the board, it seems that the /WR pin is pulled permanently high on the board, which means it can't see any writes. That's one of the pins in the fork like constellation next to the word 8M, and the corresponding traces on the next chip. It seems those traces are also extended below the chip to the other side to provide Vcc. If you really wanted to risk it, you could still lift the relevant pins and try it, but you would likely risk destroying at least those pins of the chip. Though I guess if you do, you still have a functioning pirate Pokémon cart.<br /><br />You can see the pinout in various datasheets of similar standard flash ROMs like Am29LV008B. The relevant pins to lift are WR# and RY/BY#. which you should connect to either /WR on the cart bus, or VIN on the cart. Second from the right. This is often used on flash carts to avoid letting the game access the flash chip for example for detection purposes. (When new games were still being released.) The other pin you're recommended to lift and just leave unconnected is RY/BY# which would go low during flash chip erase/write operations, which would short Vcc to ground, depending on the strength of the transistor used for that function. Not ideal.<br /><br />Note: The chip is what is listed as standard TSOP in the datasheet of Am29LV008B, not reverse TSOP and the chip is placed &quot;upside down&quot; when looking at the board as in the pictures.<br />Note 2: /WR and WR# mean the same thing. They just different notations for an active low signal.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
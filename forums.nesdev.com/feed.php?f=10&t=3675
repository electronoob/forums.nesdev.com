<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=3675" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2007-11-11T00:35:08-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=3675</id>
<entry>
<author><name><![CDATA[Zzap]]></name></author>
<updated>2007-11-11T00:35:08-07:00</updated>
<published>2007-11-11T00:35:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28127#p28127</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28127#p28127"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28127#p28127"><![CDATA[
Damn, thanks Bunny, looks like that was the problem. I thought I wasn't going crazy that my code seemed right, but couldn't pin point it. I guess NESASM lives up to its reputation again...<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3344">Zzap</a> — Sun Nov 11, 2007 12:35 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[bunnyboy]]></name></author>
<updated>2007-11-10T14:22:44-07:00</updated>
<published>2007-11-10T14:22:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28098#p28098</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28098#p28098"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28098#p28098"><![CDATA[
Its actually a line or db length problem with NESASM.  If you split each .db line into 2 then it will assemble correctly.  Alternatively put it into a binary file and use .incbin like palette and chr.  Will have to check the NESASM source to see what it is doing wrong...<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=228">bunnyboy</a> — Sat Nov 10, 2007 2:22 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2007-11-10T09:29:53-07:00</updated>
<published>2007-11-10T09:29:53-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28088#p28088</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28088#p28088"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28088#p28088"><![CDATA[
I didn't read the whole thread (I'm feelinga bit lazy right now), so I may be completelly wrong, but can't this be related to scrolling? Maybe the column that's zeroed out belongs to the other name table...<br /><br />UPDATE: I see now that you do reset $2005 properly before enabling rendering, so I really don't know what could be the problem.<br /><br />About initialization, you should initialize everything you use, and never rely on power-up values. Even relying on the fact that the name tables will contain all 0's on power-up is wrong.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Sat Nov 10, 2007 9:29 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2007-11-10T09:00:57-07:00</updated>
<published>2007-11-10T09:00:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28087#p28087</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28087#p28087"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28087#p28087"><![CDATA[
hrrm.... according to my tracer:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">C07F:B1   LDA  &#40;$10&#41;,Y    &#91;E142=02&#93;  02 01 1E &#91;..I.C&#93;  FF --  41, 11 -- &lt;2000,211E&gt;<br />C081:8D   STA  $2007      &#91;2007=00&#93;  02 01 1E &#91;..I.C&#93;  FF --  41, 26 -- &lt;2000,211E&gt;<br />C084:C8   INY                        02 01 1E &#91;..I.C&#93;  FF --  41, 38 -- &lt;2000,211F&gt;<br />C085:D0   BNE  $F8           &#91;C07F&#93;  02 01 1F &#91;..I.C&#93;  FF --  41, 44 -- &lt;2000,211F&gt;<br />C07F:B1   LDA  &#40;$10&#41;,Y    &#91;E143=00&#93;  02 01 1F &#91;..I.C&#93;  FF --  41, 53 -- &lt;2000,211F&gt;<br />C081:8D   STA  $2007      &#91;2007=00&#93;  00 01 1F &#91;..IZC&#93;  FF --  41, 68 -- &lt;2000,211F&gt;<br /></div><br /><br />apparently $E143 is $00 and not the expected $02.  This may be your funky column?  I noticed the same for $E123, $E0E3, $E0C3 and others.  Very first one I noticed was $E043<br /><br />Looking in the binary... sure enough.... at offset 0x2053 and every $20 bytes after that there's a stray 00 in the middle of those 02s.<br /><br />Since these 00s obviously aren't in your code -- the only thing I can think of that causes this is:<br /><br />1)  you have since fixed this bug but it didn't assemble because of some error -- and you didn't notice the error so the old (broken) binary remains.<br /><br />2)  assembler error (it is NESASM, after all)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Sat Nov 10, 2007 9:00 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zzap]]></name></author>
<updated>2007-11-10T04:34:55-07:00</updated>
<published>2007-11-10T04:34:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28080#p28080</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28080#p28080"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28080#p28080"><![CDATA[
Note that on the version I've posted I've shortened the background load to only 512 bytes instead of 1024, but it's still showing the right most column incorrectly. I have also changed tile 0 from a blank tile to one with a small square in the middle which shows that it is using tile 0 for the right most column. As shown in the data above, I've loaded tile 2 into the nametable for each tile in the background.<br /><br /><img src="http://img144.imageshack.us/img144/6797/missingcol2gj6.jpg" alt="Image" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3344">Zzap</a> — Sat Nov 10, 2007 4:34 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zzap]]></name></author>
<updated>2007-11-09T21:21:37-07:00</updated>
<published>2007-11-09T21:21:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28066#p28066</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28066#p28066"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28066#p28066"><![CDATA[
Thanks for the response guys <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />My sprites are set up at $0200, so I've also cleared out $0200 to $02FF,  no luck there. Is there another region I should be initialising?<br /><br />I've played around a bit more, and it's actually displaying tile 0 in the right column. I get the same results in FCE Ultra and Nintendulator.<br /><br />I've put my source code and a compiled .nes file here (compiler is NESASM).<br /><br /><a href="http://home.iprimus.com.au/jamestodd/chunkout.zip" class="postlink">http://home.iprimus.com.au/jamestodd/chunkout.zip</a><br /><br />This one's got me stumped since Al got it to work. Must be something I'm doing (or not doing) with the initialisation.<br /><br />Again, thanks for the help guys, this is a great forum!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3344">Zzap</a> — Fri Nov 09, 2007 9:21 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2007-11-09T15:52:41-07:00</updated>
<published>2007-11-09T15:52:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28053#p28053</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28053#p28053"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28053#p28053"><![CDATA[
Make sure to clear all your sprites (fior example set the whole OAM buffer to $f0 or something) if you don't use them.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Fri Nov 09, 2007 3:52 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[albailey]]></name></author>
<updated>2007-11-09T08:14:35-07:00</updated>
<published>2007-11-09T08:14:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28040#p28040</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28040#p28040"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28040#p28040"><![CDATA[
My compiler doesnt support this syntax:<br /><br />LDA [AddrLow],y <br /><br />so I had to change it to <br />LDA (AddrLow),y<br /><br />And then when I copied your code into my starting template  everything looked fine and all the columns were displayed.<br /><br /><br />Edit-  I should mention that<br />1) I am using FCE Ultra<br />2) The screen looks different in PAL mode than NTSC, but both still display all the columns<br /><br />Al<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=772">albailey</a> — Fri Nov 09, 2007 8:14 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zzap]]></name></author>
<updated>2007-11-09T00:24:31-07:00</updated>
<published>2007-11-09T00:24:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28034#p28034</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28034#p28034"/>
<title type="html"><![CDATA[Missing Background Column]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3675&amp;p=28034#p28034"><![CDATA[
Hi, I'm having a bit of trouble with my background code and was wondering if someone could help out. When I load all the tile data and attributes, everything seems to work ok, except the right most column is showing as blank instead of the specific tile. A sprite can be drawn in this region so it's not clipping, and looking at the nametable in FCEUXD the tiles just don't appear to be there. Since all the data is loaded sequentially, and the attributes appear to be setting the palette correctly, I don't understand how the column can be missing. Is it something with the way I'm declaring the tile data, or loading the data?<br /><br />The shape in the column halfway down is a sprite to show that something can be rendered there.<br /><br /><img src="http://img403.imageshack.us/img403/9909/missingcolfd5.jpg" alt="Image" /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; Load 1024 bytes into $2000 - 960 for tiles, 64 for attributes<br />LoadBackgrounds:<br />  LDA $2002<br />  LDA #$20<br />  STA $2006             ; write the high byte of $2000 address<br />  LDA #$00<br />  STA $2006             ; write the low byte of $2000 address<br /><br />  LDA #low&#40;backmap&#41;<br />  STA AddrLow<br />  LDA #high&#40;backmap&#41;<br />  STA AddrHigh<br /><br />  LDX #$04              ; Loop X 4 times<br />  LDY #$00              ; Loop Y 256 times<br />LoadBackgroundsLoop:<br />  LDA &#91;AddrLow&#93;,y<br />  STA $2007<br />  INY<br />  BNE LoadBackgroundsLoop<br />; Outer loop<br />  INC AddrHigh           ; increment high byte of address backg to next 256 byte chunk<br />  DEX                    ; one chunk done so X = X - 1.<br />  BNE LoadBackgroundsLoop   ; if X isn't zero, do again<br /><br /><br />  LDA $2002              ; Reset Scroll<br />  LDA #$00<br />  STA $2005<br />  STA $2005<br /><br />  LDA #%10000000   ; enable NMI, sprites from Pattern Table 1<br />  STA $2000<br /><br />  LDA #%00011110   ; enable sprites &amp; background<br />  STA $2001<br /></div><br /><br />In Bank 1 I define backmap as:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">backmap:<br />; Background 32x30 tiles<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />  .db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02<br />; Attributes<br />  .db %00000011,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000<br />  .db %00000001,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000<br />  .db %00000010,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000<br />  .db %00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000<br />  .db %00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000<br />  .db %00000001,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000<br />  .db %00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000<br />  .db %00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000,%00000000<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3344">Zzap</a> — Fri Nov 09, 2007 12:24 am</p><hr />
]]></content>
</entry>
</feed>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=8547" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2012-01-22T13:55:56-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=8547</id>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2012-01-22T13:55:56-07:00</updated>
<published>2012-01-22T13:55:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89144#p89144</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89144#p89144"/>
<title type="html"><![CDATA[MMC3 scanline scrolling (problem solved, ignore post)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89144#p89144"><![CDATA[
Thanks, but no that's not the problem.<br /><br />My problem is somewhere in the music code; interestingly it actually has nothing to do with use of the APU (I can comment out the APU interaction, and the problem is still there), so it's not anything to do with DMC or the frame counter, I don't think.<br /><br />Anyhow, long story short: my problem is my own stuff somewhere; I no longer have any questions. You can just ignore this thread.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Sun Jan 22, 2012 1:55 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2012-01-22T13:22:18-07:00</updated>
<published>2012-01-22T13:22:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89141#p89141</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89141#p89141"/>
<title type="html"><![CDATA[MMC3 scanline scrolling (problem solved, ignore post)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89141#p89141"><![CDATA[
Put a breakpoint on the scroll writes and make sure they fall within hblank (you can see the PPU cycle count in Nintendulator). Adjust the timing with NOPs as necessary.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Sun Jan 22, 2012 1:22 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[3gengames]]></name></author>
<updated>2012-01-22T13:19:15-07:00</updated>
<published>2012-01-22T13:19:15-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89139#p89139</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89139#p89139"/>
<title type="html"><![CDATA[MMC3 scanline scrolling (problem solved, ignore post)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89139#p89139"><![CDATA[
Could be DMC IRQ's.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4311">3gengames</a> — Sun Jan 22, 2012 1:19 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2012-01-22T13:14:15-07:00</updated>
<published>2012-01-22T13:14:15-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89138#p89138</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89138#p89138"/>
<title type="html"><![CDATA[MMC3 scanline scrolling (problem solved, ignore post)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89138#p89138"><![CDATA[
Hmm, nevermind. I think my music routine is conflicting in some way. If I disable it, the scrolling seems to work fine.<br /><br />Thanks for answering, though.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Sun Jan 22, 2012 1:14 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2012-01-22T13:08:44-07:00</updated>
<published>2012-01-22T13:08:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89137#p89137</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89137#p89137"/>
<title type="html"><![CDATA[MMC3 scanline scrolling (problem solved, ignore post)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89137#p89137"><![CDATA[
It doesn't seem to be an issue of horizontal timing; I mean, I do see little fuzz glitches near the left side on the scanline where I set the scroll, but that's something I expected. The flicker problem is that the scroll just isn't being set at all.<br /><br />I can post a ROM in a little bit.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Sun Jan 22, 2012 1:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[3gengames]]></name></author>
<updated>2012-01-22T13:00:38-07:00</updated>
<published>2012-01-22T13:00:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89136#p89136</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89136#p89136"/>
<title type="html"><![CDATA[MMC3 scanline scrolling (problem solved, ignore post)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89136#p89136"><![CDATA[
ROM or more surce at all? But does it fail, or just flicker? Flickering can probably be fixed via timing it differently, putting a delay in before the write to $2005 so when it is reloaded the next scan line there's no lines seen, like SMB3 has the line flicker and crystalis, but other MMC3 games don't. Only other thing IMO would be to make sure you also update $2000 to the right name table if it scrolls onto a different name table from a different primary.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4311">3gengames</a> — Sun Jan 22, 2012 1:00 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2012-01-22T13:15:17-07:00</updated>
<published>2012-01-22T12:23:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89135#p89135</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89135#p89135"/>
<title type="html"><![CDATA[MMC3 scanline scrolling (problem solved, ignore post)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8547&amp;p=89135#p89135"><![CDATA[
<strong>EDIT: The problem was elsewhere, ignore this post.</strong><br /><br />I'm trying to do horizontal scrolling with the MMC such that I can change the horizontal scroll at a couple of specific scanlines. My IRQ code seems to be executing on the correct scanlines, but I get a really annoying flicker effect where it looks like the horizontal scroll randomly fails to set (consistent across a couple of emulators).<br /><br />My IRQ code looks like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">irq:<br />    PHA<br />    STA $E000 ; acknowledge/stop interrupt<br />    LDA $2002<br />    LDA next_scroll_value<br />    STA $2005<br />    ...</div><br /><br />After the ... I push the rest of the registers, do some logic to keep track of which scanline I'm going for next, set the next_scroll_value, and then write to $C000, $C001, $E000, $E001 to prepare the next interrupt before popping the registers back to their initial state.<br /><br />Is there something else I need to do to make sure the scroll value takes effect properly? Is there a potential conflict when writing to $2005 that I need to take into account?<br /><br />(I tried searching for an example, but nothing I found seems to suggest I need to do anything else but write to $2005.)<br /><br />Also, just to eliminate a possible source of error, if I replace "LDA next_scroll_value" with "LDA #65" or other immediate value, I still get flickering, though I notice that in this case it only seems to occur after the first couple of IRQs, after that the screen seems to be stable with a scroll of 65. (So, the flickering is only happening if I change the scroll setting?)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Sun Jan 22, 2012 12:23 pm</p><hr />
]]></content>
</entry>
</feed>
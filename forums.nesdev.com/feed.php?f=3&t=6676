<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=6676" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2010-07-27T11:37:32-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=6676</id>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-07-27T11:37:32-07:00</updated>
<published>2010-07-27T11:37:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64972#p64972</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64972#p64972"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64972#p64972"><![CDATA[
I couldn't get some of them to work consistently on the NES, which is why they aren't in my CPU test. Yet another reverse-engineering time-sink, but I've learned to just let them be rather than get sucked in.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Jul 27, 2010 11:37 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2010-07-27T10:46:48-07:00</updated>
<published>2010-07-27T10:46:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64967#p64967</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64967#p64967"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64967#p64967"><![CDATA[
The only problem with the unofficial opcodes is that <a href="http://nocash.emubase.de/everynes.htm#cpuillegalopcodes" class="postlink">Martin Korth claims they don't always work</a> on certain 6502 based computers.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Tue Jul 27, 2010 10:46 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-07-27T00:52:28-07:00</updated>
<published>2010-07-27T00:52:28-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64957#p64957</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64957#p64957"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64957#p64957"><![CDATA[
And the processor itself doesn't prosecute a program for using "illegal" opcodes, hence the better name of "unofficial".<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Jul 27, 2010 12:52 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-07-26T22:09:31-07:00</updated>
<published>2010-07-26T22:09:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64951#p64951</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64951#p64951"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64951#p64951"><![CDATA[
At least <a href="http://nesdev.com/bbs/viewtopic.php?t=4999" class="postlink">Puzznic and Lolo 3</a> use multi-byte NOPs. These act like BIT, except they don't even set the flags. And I seem to remember some Chinese games use unofficial opcodes and disguised bankswitches to make the init code (which sets up jump tables in RAM) harder for mapper-hacking pirates to trace.<br /><br />(It's not actually a crime or tort to implement unofficial opcodes. "Illegal" is just a nickname for them, and "you know" is a quote from one of the Zelda games for CD-i.)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Jul 26, 2010 10:09 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2010-07-26T21:07:54-07:00</updated>
<published>2010-07-26T21:07:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64945#p64945</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64945#p64945"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64945#p64945"><![CDATA[
Most games do not make use of illegal opcodes, but the NES CPU behaves exactly like a common 6502 in this regard, meaning that all instructions are there and behave as described, so a few programs do use them.<br /><br />I remember that a real-time polygon rotation demo used some illegal instructions, but I can't think of any commercial games right now. Still, for NES developers this might be an interesting feature for an emulator to have, as that makes it more like the real console.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Mon Jul 26, 2010 9:07 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-07-26T21:02:58-07:00</updated>
<published>2010-07-26T21:02:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64943#p64943</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64943#p64943"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64943#p64943"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />So you're pondering support for unofficial 6502 opcodes, and you're planning to treat them all like $EA NOP.<br /></div><br />Isn't that how the 65C02 treats them?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Mon Jul 26, 2010 9:02 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tineras]]></name></author>
<updated>2010-07-26T20:59:19-07:00</updated>
<published>2010-07-26T20:59:19-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64942#p64942</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64942#p64942"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64942#p64942"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br /><div class="quotetitle">tineras wrote:</div><div class="quotecontent">However, I'm not sure how to go about accounting for invalid opcodes.<br /></div><br />So you're pondering support for unofficial 6502 opcodes, and you're planning to treat them all like $EA NOP.<br /><a href="http://members.chello.nl/taf.offenga/illopc31.txt" class="postlink">This</a> is illegal, <a href="http://www.youtube.com/watch?v=ez2mdz0hVbY" class="postlink">you know</a>.</div><br /><br />If it is not important for making a good emulator, then I am not that concerned about it.  I just don't want to run into problems in the future.  But I did read somewhere that no games (or almost no games) make use of them.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4449">tineras</a> — Mon Jul 26, 2010 8:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-07-26T20:54:35-07:00</updated>
<published>2010-07-26T20:54:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64940#p64940</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64940#p64940"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64940#p64940"><![CDATA[
<div class="quotetitle">tineras wrote:</div><div class="quotecontent"><br />However, I'm not sure how to go about accounting for invalid opcodes.<br /></div><br />So you're pondering support for unofficial 6502 opcodes, and you're planning to treat them all like $EA NOP.<br /><a href="http://members.chello.nl/taf.offenga/illopc31.txt" class="postlink">This</a> is illegal, <a href="http://www.youtube.com/watch?v=ez2mdz0hVbY" class="postlink">you know</a>.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Jul 26, 2010 8:54 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tineras]]></name></author>
<updated>2010-07-26T20:04:37-07:00</updated>
<published>2010-07-26T20:04:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64937#p64937</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64937#p64937"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64937#p64937"><![CDATA[
I am happy to report that I am now passing all of the Kevtris NesTest tests (say that three times fast  <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /> )<br /><br /><!-- m --><a class="postlink" href="http://www.flickr.com/photos/tineras/4832572513/">http://www.flickr.com/photos/tineras/4832572513/</a><!-- m --><br /><br />However, I'm not sure how to go about accounting for invalid opcodes.  Right now I just have a "default" line in my switch statement that just lets me know an invalid opcode has been called and then it just adds 1 to the program counter.<br /><br />If you guys could point me in the right direction, I'd really appreciate it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4449">tineras</a> — Mon Jul 26, 2010 8:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jwdonal]]></name></author>
<updated>2010-07-24T20:51:06-07:00</updated>
<published>2010-07-24T20:51:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64820#p64820</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64820#p64820"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64820#p64820"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />I think blargg's CPU test are enough to make sure the basic instructions operate correctly.<br /><br />I'd say the branch timing tests and CPU timing tests are good to do next.  Bad CPU timing makes Battletoads shaky.<br /></div><br />Cool, thanks Dwedit.  I'll work on nes_intr_timing next then.<br /><br /><div class="quotetitle">Zepper wrote:</div><div class="quotecontent"><br />- I suppose it's because the stack is at $00, then the CPU decrements 3 on reset. $00 - 3 = $FD.<br /></div><br />That is exactly correct, and it's how I have implemented my CPU in hardware.  In integrated circuits it is typical (and good practice) to clear all flops to '0' on power-up (except in very peculiar cases where you might absolutely have to have a bit set for proper operation).<br /><br />Pz!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3962">jwdonal</a> — Sat Jul 24, 2010 8:51 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tineras]]></name></author>
<updated>2010-07-24T16:34:27-07:00</updated>
<published>2010-07-24T16:34:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64802#p64802</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64802#p64802"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64802#p64802"><![CDATA[
<div class="quotetitle">Zepper wrote:</div><div class="quotecontent"><br /><div class="quotetitle">tineras wrote:</div><div class="quotecontent"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">As I understand it, the test does most of its testing in a subroutine at $C000. When run on an NES, it needs to be started like any other ROM with JMP ($FFFC), but if you don't have most of your I/O (PPU/APU) done, it can still be called as a separate subroutine. This is a log of that subroutine.<br /></div><br /><br />Do you know why the Stack Pointer starts out at FD instead of FF?</div><br /><br />- I suppose it's because the stack is at $00, then the CPU decrements 3 on reset. $00 - 3 = $FD.</div><br /><br />I did not know that.  I will add that piece to my code.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4449">tineras</a> — Sat Jul 24, 2010 4:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2010-07-24T16:33:27-07:00</updated>
<published>2010-07-24T16:33:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64800#p64800</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64800#p64800"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64800#p64800"><![CDATA[
<div class="quotetitle">tineras wrote:</div><div class="quotecontent"><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">As I understand it, the test does most of its testing in a subroutine at $C000. When run on an NES, it needs to be started like any other ROM with JMP ($FFFC), but if you don't have most of your I/O (PPU/APU) done, it can still be called as a separate subroutine. This is a log of that subroutine.<br /></div><br /><br />Do you know why the Stack Pointer starts out at FD instead of FF?</div><br /><br />- I suppose it's because the stack is at $00, then the CPU decrements 3 on reset. $00 - 3 = $FD.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Sat Jul 24, 2010 4:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tineras]]></name></author>
<updated>2010-07-24T16:24:32-07:00</updated>
<published>2010-07-24T16:24:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64799#p64799</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64799#p64799"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64799#p64799"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />As I understand it, the test does most of its testing in a subroutine at $C000. When run on an NES, it needs to be started like any other ROM with JMP ($FFFC), but if you don't have most of your I/O (PPU/APU) done, it can still be called as a separate subroutine. This is a log of that subroutine.<br /></div><br /><br />Do you know why the Stack Pointer starts out at FD instead of FF?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4449">tineras</a> — Sat Jul 24, 2010 4:24 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-07-24T15:55:15-07:00</updated>
<published>2010-07-24T15:55:15-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64797#p64797</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64797#p64797"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64797#p64797"><![CDATA[
As I understand it, the test does most of its testing in a subroutine at $C000. When run on an NES, it needs to be started like any other ROM with JMP ($FFFC), but if you don't have most of your I/O (PPU/APU) done, it can still be called as a separate subroutine. This is a log of that subroutine.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Jul 24, 2010 3:55 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tineras]]></name></author>
<updated>2010-07-24T15:51:36-07:00</updated>
<published>2010-07-24T15:51:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64796#p64796</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64796#p64796"/>
<title type="html"><![CDATA[Which CPU test ROM to get working next?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6676&amp;p=64796#p64796"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />There is a <a href="http://nickmass.com/images/nestest.log" class="postlink">known good log</a> of nestest. Make your emulator spit out a log of the executed instructions in the same format, and then find the first difference.<br /></div><br /><br />Whoops, I was doing something silly and thought that starting at C000 was wrong because the nestest rom would only run if I started at the address pointed to by the IVT.  And my log looked MUCH different than the gold version, so I wasn't sure what was going on.  Now I realise that I just have another problem to squish.<br /><br />That being said, I'm still curious to know if there is any relevent information in the error code that is displayed on the screen.?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4449">tineras</a> — Sat Jul 24, 2010 3:51 pm</p><hr />
]]></content>
</entry>
</feed>
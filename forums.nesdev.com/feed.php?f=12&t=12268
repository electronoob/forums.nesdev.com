<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=12&amp;t=12268" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2015-02-05T06:06:22-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=12&amp;t=12268</id>
<entry>
<author><name><![CDATA[Espozo]]></name></author>
<updated>2015-02-05T06:06:22-07:00</updated>
<published>2015-02-05T06:06:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140643#p140643</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140643#p140643"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140643#p140643"><![CDATA[
So it allocates different sized metasprites to different sized slots?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6683">Espozo</a> — Thu Feb 05, 2015 6:06 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2015-02-04T22:47:30-07:00</updated>
<published>2015-02-04T22:47:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140634#p140634</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140634#p140634"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140634#p140634"><![CDATA[
It doesn't assume every metasprite is the same size.  It just assumes that all metasprites are rectangular.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Feb 04, 2015 10:47 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Espozo]]></name></author>
<updated>2015-02-04T22:26:32-07:00</updated>
<published>2015-02-04T22:26:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140632#p140632</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140632#p140632"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140632#p140632"><![CDATA[
<div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent"><br />The rotating limbs take up half of wram.  The dynamic animation system is kind've like what you described in that other thread, but instead of looking for a box for every individual sprite, it looks for a box for every metasprite.<br /></div><br />Then in that case, it would be way easier, just like calculating x and y because you wouldn't need to have the &quot;second y&quot; that I made. You know psychopathic teen, have you worked on the Genesis before, because something about your art style and the fact that you are pretty much only using half of wram kind of reminds me of the Genesis. I guess the advantages to both my code that looks for tiles in vram and yours is that mine is a bit more flexible, meaning it doesn't assume every metasprite uses the same size, but I imagine is a bit more costly. (Only the sprites that are undergoing any kind of animation change are going to go through, so it shouldn't be that big of a deal.)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6683">Espozo</a> — Wed Feb 04, 2015 10:26 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2015-02-04T22:18:06-07:00</updated>
<published>2015-02-04T22:18:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140631#p140631</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140631#p140631"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140631#p140631"><![CDATA[
The rotating limbs take up half of wram.  The dynamic animation system is kind've like what you described in that other thread, but instead of looking for a box for every individual sprite, it looks for a box for every metasprite.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Feb 04, 2015 10:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Espozo]]></name></author>
<updated>2015-02-04T22:04:07-07:00</updated>
<published>2015-02-04T22:04:07-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140630#p140630</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140630#p140630"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140630#p140630"><![CDATA[
No wonder it takes a while to load... (I assumed it was graphics decompression or something) How do you store all the animation for it moving? WRAM?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6683">Espozo</a> — Wed Feb 04, 2015 10:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2015-02-04T21:58:12-07:00</updated>
<published>2015-02-04T21:58:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140628#p140628</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140628#p140628"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140628#p140628"><![CDATA[
It actually rotates everything during the &quot;LEVEL 1&quot; screen.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Feb 04, 2015 9:58 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Espozo]]></name></author>
<updated>2015-02-04T21:38:49-07:00</updated>
<published>2015-02-04T21:38:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140622#p140622</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140622#p140622"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140622#p140622"><![CDATA[
You seem to really like female characters, but I guess I'm not one to talk? I've already shown this on the SNES Pixel Art thread, but I fixed it up a bit more. (I'm <strong>way</strong> to nitpicky for my own good. <img src="http://forums.nesdev.com/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> )<br />player2.png<br />I think it's really funny how when you hold down the dash button against a wall how the dashing animation still plays even when you aren't moving. Also, about the plasma Grinch thing, does it use real-time sprite rotation for its limbs?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6683">Espozo</a> — Wed Feb 04, 2015 9:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2015-02-04T21:23:20-07:00</updated>
<published>2015-02-04T21:23:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140620#p140620</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140620#p140620"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140620#p140620"><![CDATA[
Besides from Bad Apple, I've been working on a game called Alisha's Adventure.  As to why I keep giving up on projects and starting new ones, it's because there is always that one little architectural problem that makes it difficult to program anything without rewriting a whole bunch of code.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Feb 04, 2015 9:23 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2015-02-03T23:26:18-07:00</updated>
<published>2015-02-03T23:26:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140560#p140560</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140560#p140560"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140560#p140560"><![CDATA[
@Espozo: assembler error in question is because you forgot to .exportzp the XPosition and YPosition variables within MetaspriteTest2.asm.  You have to have both .importzp (in the file where you want to use those variables) and an .exportzp (in the file where you declared them) for it to work.<br /><br />Procs (e.g. subroutines) work the same way (using .export/.import).<br /><br />Macros, however, don't work that way -- they're not procs, they're just raw code, hence why there's Macros.asm and why I put all macros in there.  And I should note that for Macros.asm, it only needs to be .include'd ONCE for the macros to be universally available, which is convenient.<br /><br />But back to variables: there is also a .globalzp ca65 directive which I didn't have time to explore or tinker with, but I wouldn't get too hung up on that right now.<br /><br />I'll use this opportunity to point out how annoying the ca65 &quot;zp&quot; stuff is, specifically because the ZEROPAGE segment is only 256 bytes long, while on the 65816 you have direct page which is up to 65536 bytes long (depending on where you place it using <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda/tcd</tt>).  And ca65 absolutely requires a ZEROPAGE segment (incl. in the config template).  For 6502/65c02 this works wonderfully, but for 65816 it's irritating.  Maybe tepples/thefox have some ideas on how to tweak the template to work better with it, but I simply don't.  So basically once you exhaust the ZEROPAGE segment (i.e. you exceed 256 bytes there), it's gonna start throwing errors during link-time, in which case your variables need to end up in the BSS segment (like where the SpriteBufs are).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Tue Feb 03, 2015 11:26 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2015-02-03T23:19:21-07:00</updated>
<published>2015-02-03T23:19:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140558#p140558</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140558#p140558"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140558#p140558"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">The official docs [...] just tell you what each register needs to be set to value-wise on reset.<br /></div><br />I figured as much. I imagine that these values are $00 for most writable registers, and double-$00 for any register that takes double-writes, with a few exceptions such as the first and last mode 7 matrix registers that need to be $0100. So is there a reliable list of what these values are other than the official docs? If there is a list, an emulator developer could add a feature to warn on writes of incorrect values before all registers have the correct starting values.</div><br />The init routine in my code (see .zip file, or my old sndoc230.zip archive (see test.lzh/test.zip within that zip)) has all the correct values per official docs.  I don't know of anywhere else that lists them off.  Many are zero, yes, but not all.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Tue Feb 03, 2015 11:19 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Espozo]]></name></author>
<updated>2015-02-03T19:33:39-07:00</updated>
<published>2015-02-03T19:33:39-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140538#p140538</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140538#p140538"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140538#p140538"><![CDATA[
<div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br />Your whole metasprite + sprite concept here seems very... I don't know.  I sort of get the impression you don't understand what SpriteBuf1/SpriteBuf2 do (meaning what they're for and how the SNES uses them), but there's a 50% chance I'm completely wrong and it's just that you haven't written the rest of the code but have designed it somewhere (in which case I apologise + ignore me).  But I now understand why you want to &quot;move to 16-bit&quot; -- because the MSB (9th bit) of the Y position of a sprite is separate from the remaining 8 bits.  I now actually understand what's needed to make all of that work, but I wish I had a better idea ultimately what your goal was.<br /></div><br />??? <img src="http://forums.nesdev.com/images/smilies/icon_neutral.gif" alt=":|" title="Neutral" />  SpriteBuf1 has 4bytes per sprite (X and Y positions, character data, and extra) for a total of 512 bytes and Spritebuf2 has each sprites most significant X bit and sprite size selection bit, and it is 32 bytes long. SpriteBuf1 and 2 then get DMAed to OAM during VBlank.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br />P.S. -- One of these days I wanna see what psychopathicteen has been working on for like the past 8 billion years.<br /></div><br />I don't know. He's probably making something insane. <img src="http://forums.nesdev.com/images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" /><br /><br />By the way, I made the metasprite routine use 16 bits (I haven't implemented the 9th x, not y <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /> bit yet, as it currently just gets erased when storing the number in spritebuf1) and it worked flawlessly, but I tried to make it where you add XPosition and YPosition to the number in the table that gets stored in SpriteBuf1, but the assembler didn't like it. <img src="http://forums.nesdev.com/images/smilies/icon_confused.gif" alt=":?" title="Confused" /><br /><br />Edit: I forgot to CLC before ADCing, but it didn't make a difference. (I'm really not sure why it would, but I tried.)<br /><br />Code.png<br /><br />Code Extended.png<br /><br />Assember Problem.png<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6683">Espozo</a> — Tue Feb 03, 2015 7:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2015-02-03T16:37:03-07:00</updated>
<published>2015-02-03T16:37:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140522#p140522</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140522#p140522"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140522#p140522"><![CDATA[
<div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br />The official docs [...] just tell you what each register needs to be set to value-wise on reset.<br /></div><br />I figured as much. I imagine that these values are $00 for most writable registers, and double-$00 for any register that takes double-writes, with a few exceptions such as the first and last mode 7 matrix registers that need to be $0100. So is there a reliable list of what these values are other than the official docs? If there is a list, an emulator developer could add a feature to warn on writes of incorrect values before all registers have the correct starting values.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Feb 03, 2015 4:37 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2015-02-03T14:58:47-07:00</updated>
<published>2015-02-03T14:58:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140516#p140516</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140516#p140516"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140516#p140516"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />I wonder if people screw with them in order to make it clear that they have intentionally avoided official docs.<br /></div><br />The official docs don't include any code -- they just tell you what each register needs to be set to value-wise on reset.  So no, it's simply people being ridiculous and for some reason thinking that this one-time-called routine deserves loops and other nonsense (like &quot;don't bother initialising some registers because we set them in the near future anyway&quot; -- WHO CARES, do the init exactly like Nintendo says, do it one time, and stop worrying about the rest!)<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I'll look at the zipfile sometime today.<br /></div><br />The latest version I posted is worse (formatting-wise) than the previous one, because I went back and started from scratch (thinking I had accidentally lost some code or changed something without fully testing each step of the way, thus causing the BG and sprite problems) and was doing a large amount of copy-pasting.  I also kept a lot of the original labels and variable names and filenames from Espozo's original code (while the better-formatted one I released with BG/sprite issues had some variables and labels and files renamed).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Tue Feb 03, 2015 2:58 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2015-02-03T08:01:14-07:00</updated>
<published>2015-02-03T08:01:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140492#p140492</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140492#p140492"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140492#p140492"><![CDATA[
<div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br /><strong>I WISH PEOPLE WOULD STOP SCREWING AROUND WITH THE INIT ROUTINES: THERE IS NOTHING TO FIX/OPTIMISE IN THEM.  THEY ARE RUN *ONCE* DURING RESET/POWER-ON.  JUST USE THE VALUES NINTENDO GIVES YOU IN THE OFFICIAL DOCS AND BE DONE WITH IT..</strong><br /></div><br />I wonder if people screw with them in order to make it clear that they have intentionally avoided official docs.<br /><br />I'll look at the zipfile sometime today.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Feb 03, 2015 8:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2015-02-03T05:04:00-07:00</updated>
<published>2015-02-03T05:04:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140484#p140484</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140484#p140484"/>
<title type="html"><![CDATA[Re: 16bit table indexing problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12268&amp;p=140484#p140484"><![CDATA[
Wonderful <a href="https://en.wikipedia.org/wiki/Irritable_bowel_syndrome" class="postlink">IBS</a> screwing up my sleep schedule.  Work is going to love me tomorrow.  *sigh*  But I figured while I was up dealing with dumb health problems, I might as well try to figure out the rest -- and I did, so sprites work now.<br /><br />I fixed/simplified your start_metasprite routine as well (I'm pretty sure it had bugs in it vs. what the comments claimed) + I clarified things in the comments.  The counting should make more sense to you now, but whether or not that's really how you want to implement it is up to you.  Honestly that routine would, I think, greatly benefit from indirect addressing (so you could have multiple metasprite tables, effectively, and change which one you're referring to by a single load/store pair -- yes really!).  I got rid of YTemp/XTemp too (once you see the changes you'll understand why).<br /><br />I also added a crappy something if you press/hold the Y button, just for sprite movement testing.<br /><br />There were other bugs/things I had to fix too but at this point I'm so tired and feeling so ugh that I can't remember.<br /><br />Your whole metasprite + sprite concept here seems very... I don't know.  I sort of get the impression you don't understand what SpriteBuf1/SpriteBuf2 do (meaning what they're for and how the SNES uses them), but there's a 50% chance I'm completely wrong and it's just that you haven't written the rest of the code but have designed it somewhere (in which case I apologise + ignore me).  But I now understand why you want to &quot;move to 16-bit&quot; -- because the MSB (9th bit) of the Y position of a sprite is separate from the remaining 8 bits.  I now actually understand what's needed to make all of that work, but I wish I had a better idea ultimately what your goal was.<br /><br />And 2input.asm is just... I don't even know what to do with that mess.  ;-)<br /><br />And this time I used .zip just to make Tepples happy (BTW the reason I used RAR: because Espozo did in his posts, so why you pickin' on me brah?  j/k).<br /><br />P.S. -- One of these days I wanna see what psychopathicteen has been working on for like the past 8 billion years.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Tue Feb 03, 2015 5:04 am</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Main principles of creating an &quot;object&quot;</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Main principles of creating an &quot;object&quot;" href="http://forums.nesdev.com/feed.php?f=12&amp;t=12356" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '5');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=12356';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sun May 10, 2015 10:00 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=12356&amp;start=60">Main principles of creating an &quot;object&quot;</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=12356"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>5</strong> of <strong>8</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 118 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=12&amp;t=12356&amp;start=45">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=12&amp;t=12356">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=45">4</a><span class="page-sep">, </span><strong>5</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=90">7</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=105">8</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=12356&amp;start=75">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=12356&amp;start=60&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=12356&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=12356&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p141191"></a>
				<b class="postauthor" style="color: #AA0000">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141191">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141191#p141191"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 3:29 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Site Admin</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 2391<br /><b>Location:</b> Mountain View, CA, USA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay yeah, here's the diff (for those who can read it).  I can clearly see what the problem here is -- it all stems from misunderstanding what it is you're doing with variables and addressing modes.  You can't just rename variables and expect things to magically work, i.e.:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">-&nbsp; lda MetaspriteTable+6,x<br />+&nbsp; lda MetaspriteTableOffset+6,x<br /></div><br />This will not do what you think it does.<br /><br />I'll give you a hint: remember the &quot;very old code&quot; in this routine, where it did things like <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $00,x</tt> and you had comments like &quot;I don't understand what this does, why $00,x?&quot; and so on?  I'm crossing my fingers that given your changes and that comment + old code makes your brain go &quot;OH!!! Oh oh oh, I get it now!&quot;<br /><br />The reason I changed your code (when moving from WLA DX to ca65) to get rid of that methodology is because it made absolutely no sense given that you only had one single table of data.  Now that you plan on introducing more than one thing, it starts to make more sense.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">D:\downloads&gt;diff -ruN MetaspriteDemoKoitsu.working MetaspriteDemoKoitsu.broken<br />diff -ruN MetaspriteDemoKoitsu.working/Metasprite2.asm MetaspriteDemoKoitsu.broken/Metasprite2.asm<br />--- MetaspriteDemoKoitsu.working/Metasprite2.asm&nbsp; &nbsp; &nbsp; &nbsp; 2015-02-14 14:12:31.642723000 -0800<br />+++ MetaspriteDemoKoitsu.broken/Metasprite2.asm 2015-02-14 12:57:21.042469000 -0800<br />@@ -5,10 +5,10 @@<br />&nbsp;.importzp MetaspriteXPosition<br />&nbsp;.importzp MetaspriteYPosition<br />&nbsp;.importzp MetaspriteCount<br />+.importzp MetaspriteTableOffset<br />&nbsp;.importzp SpriteCount<br />&nbsp;.import SpriteBuf1<br />&nbsp;.import SpriteBuf3<br />-.import MetaspriteTable<br /><br />&nbsp;; Used by MetaspriteTest2.asm<br />&nbsp;.export start_metasprite<br />@@ -29,27 +29,27 @@<br />&nbsp; &nbsp;php&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Save P (A/X/Y sizes)<br />&nbsp; &nbsp;rep #$30&nbsp; &nbsp; ; A=16, X/Y=16<br />&nbsp; &nbsp;ldy SpriteCount<br />-&nbsp; lda MetaspriteTable<br />+&nbsp; lda MetaspriteTableOffset<br /><br />&nbsp;: cpy #$0200&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; sees if all 128 sprites are used up<br />&nbsp; &nbsp;beq done<br />&nbsp; &nbsp;lda MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; If MetaspriteCount is zero, then we're done.&nbsp; Otherwise we have<br />&nbsp; &nbsp;beq done&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; metasprites to iterate over and populate for DMA (see VBlank)<br />-&nbsp; lda MetaspriteTable,x&nbsp; &nbsp; &nbsp;; 1st byte = sprite X position (value 0-255)<br />+&nbsp; lda MetaspriteTableOffset,x&nbsp; &nbsp; &nbsp;; 1st byte = sprite X position (value 0-255)<br />&nbsp; &nbsp;clc<br />&nbsp; &nbsp;adc MetaspriteXPosition<br />&nbsp; &nbsp;and #$01FF<br />&nbsp; &nbsp;sta SpriteBuf3,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite X position SpriteBuf1+y<br />&nbsp; &nbsp;and #$00FF<br />&nbsp; &nbsp;sta SpriteBuf1,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite X position SpriteBuf1+y<br />-&nbsp; lda MetaspriteTable+2,x&nbsp; &nbsp;; 2nd byte = sprite Y position (value 0-255)<br />+&nbsp; lda MetaspriteTableOffset+2,x&nbsp; &nbsp;; 2nd byte = sprite Y position (value 0-255)<br />&nbsp; &nbsp;clc<br />&nbsp; &nbsp;adc MetaspriteYPosition<br />&nbsp; &nbsp;and #$00FF<br />&nbsp; &nbsp;sta SpriteBuf1+1,y&nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite Y position in SpriteBuf1+1,y<br />-&nbsp; lda MetaspriteTable+4,x<br />+&nbsp; lda MetaspriteTableOffset+4,x<br />&nbsp; &nbsp;sta SpriteBuf3+2,y&nbsp; &nbsp; &nbsp; &nbsp; ; Sprite size<br />-&nbsp; lda MetaspriteTable+6,x<br />+&nbsp; lda MetaspriteTableOffset+6,x<br />&nbsp; &nbsp;sta SpriteBuf1+2,y&nbsp; &nbsp; &nbsp; &nbsp; ; Palette/Character word<br />&nbsp; &nbsp;txa<br />&nbsp; &nbsp;clc<br />diff -ruN MetaspriteDemoKoitsu.working/MetaspriteTest2.asm MetaspriteDemoKoitsu.broken/MetaspriteTest2.asm<br />--- MetaspriteDemoKoitsu.working/MetaspriteTest2.asm&nbsp; &nbsp; 2015-02-14 14:12:35.506366800 -0800<br />+++ MetaspriteDemoKoitsu.broken/MetaspriteTest2.asm&nbsp; &nbsp; &nbsp;2015-02-14 13:02:59.634231700 -0800<br />@@ -19,8 +19,9 @@<br />&nbsp;.exportzp MetaspriteXPosition<br />&nbsp;.exportzp MetaspriteYPosition<br />&nbsp;.exportzp MetaspriteCount<br />+.exportzp MetaspriteTableOffset<br />&nbsp;.exportzp SpriteCount<br />-.export SpriteBuf1, SpriteBuf2, SpriteBuf3, MetaspriteTable<br />+.export SpriteBuf1, SpriteBuf2, SpriteBuf3<br /><br />&nbsp;; Used by Header.asm<br />&nbsp;.export VBlank, Main<br />@@ -41,6 +42,7 @@<br />&nbsp;MetaspriteXPosition:&nbsp; &nbsp; &nbsp; &nbsp;.res 2<br />&nbsp;MetaspriteYPosition:&nbsp; &nbsp; &nbsp; &nbsp;.res 2<br />&nbsp;MetaspriteCount:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.res 2<br />+MetaspriteTableOffset:&nbsp; &nbsp; &nbsp;.res 2<br />&nbsp;SpriteCount:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.res 2<br />&nbsp;Joy1Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .res 2<br />&nbsp;Joy2Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .res 2<br />@@ -154,6 +156,10 @@<br /><br />&nbsp; &nbsp;wai&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Wait for interrupts to finish (NMI/VBlank)<br />&nbsp; &nbsp;rep #$30&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; A=16, X/Y=16<br />+<br />+&nbsp; lda #.LOWORD(MetaspriteTable)<br />+&nbsp; sta MetaspriteTableOffset<br />+<br />&nbsp; &nbsp;sep #$20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; A=8<br /><br />&nbsp; &nbsp;lda MetaspriteTableSize&nbsp; &nbsp;; Load number of Metasprites<br /></div><br />P.S. -- That first <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda</tt> in start_metasprite serves no purpose, or is a bug of some sort.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p141194"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141194">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141194#p141194"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 3:42 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 905<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Wait, is it because I need to write &quot;ldx #MetaspriteTable&quot; before I jump to the metasprite routine and offset an empty register like $00 by MetaspriteTable? I know I cannot currently write $00 because it is already used up. Maybe I can reserve a blank register. By the way, sorry if I seem really stupid, but what is wrong with SpriteBuf3?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p141200"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141200">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141200#p141200"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 4:16 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 905<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I finally solved the damned thing...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; wai&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Wait for interrupts to finish (NMI/VBlank)<br />&nbsp; rep #$30&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; A=16, X/Y=16<br /><br />&nbsp; lda MetaspriteTableSize&nbsp; &nbsp;; Load number of Metasprites<br />&nbsp; sta MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; ...and store it in MetaspriteCount<br /><br />&nbsp; ldy #0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Offset into SpriteBuf1 (buffer used by DMA every frame)<br />&nbsp; ldx #MetaspriteTable&nbsp; &nbsp; &nbsp; ; Offset into MetaspriteTable<br />&nbsp; stx TempX<br />&nbsp; jsr start_metasprite&nbsp; &nbsp; &nbsp; ; jump to start_metasprite to build metasprites<br /><br />&nbsp; sep #$20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; A=8</div><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.proc start_metasprite<br />&nbsp; pha<br />&nbsp; phx<br />&nbsp; phy<br />&nbsp; php&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Save P (A/X/Y sizes)<br />&nbsp; rep #$30&nbsp; &nbsp; ; A=16, X/Y=16<br />&nbsp; ldy SpriteCount<br />&nbsp; ldx TempX<br /><br />: cpy #$0200&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; sees if all 128 sprites are used up<br />&nbsp; beq done<br />&nbsp; lda MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; If MetaspriteCount is zero, then we're done.&nbsp; Otherwise we have<br />&nbsp; beq done&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; metasprites to iterate over and populate for DMA (see VBlank)<br />&nbsp; lda Empty,x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 1st byte = sprite X position (value 0-255)<br />&nbsp; clc<br />&nbsp; adc MetaspriteXPosition<br />&nbsp; and #$01FF<br />&nbsp; sta SpriteBuf3,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite X position SpriteBuf1+y<br />&nbsp; and #$00FF<br />&nbsp; sta SpriteBuf1,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite X position SpriteBuf1+y<br />&nbsp; lda Empty+2,x&nbsp; &nbsp;; 2nd byte = sprite Y position (value 0-255)<br />&nbsp; clc<br />&nbsp; adc MetaspriteYPosition<br />&nbsp; and #$00FF<br />&nbsp; sta SpriteBuf1+1,y&nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite Y position in SpriteBuf1+1,y<br />&nbsp; lda Empty+4,x<br />&nbsp; sta SpriteBuf3+2,y&nbsp; &nbsp; &nbsp; &nbsp; ; Sprite size<br />&nbsp; lda Empty+6,x<br />&nbsp; sta SpriteBuf1+2,y&nbsp; &nbsp; &nbsp; &nbsp; ; Palette/Character word<br />&nbsp; txa<br />&nbsp; clc<br />&nbsp; adc #$0008<br />&nbsp; tax<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; dec MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; Decrement MetaspriteCount by 1<br />&nbsp; bra :-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Back to the loop...<br /><br />done:<br />&nbsp; sty SpriteCount&nbsp; &nbsp;&nbsp; &nbsp; ; Says how many sprites have been made<br />&nbsp; plp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Restore P (A/X/Y sizes)<br />&nbsp; ply&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Restore Y<br />&nbsp; plx&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Restore X<br />&nbsp; pla&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Restore A<br />&nbsp; rts<br />.endproc</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p141201"></a>
				<b class="postauthor">Optiroc</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141201">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141201#p141201"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 4:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Feb 07, 2013 1:15 am<br /><b>Posts:</b> 16
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Optiroc wrote:</div><div class="quotecontent">I'm not sure any traditional data structure for keeping track of empty slots would be advantageous either, compared to say, an offset to the last &quot;released&quot; object. Possibly a circular FIFO stack could work though...</div><br />In this case, the linked list of free objects acts as a LIFO stack. There is one global offset to the most recently destroyed object, and this object points to the object destroyed before it. Thus you can allocate a new object in O(1), rather than taking O(n) time to scan all slots every time you allocate something.</div><br />Oh, yes, a LIFO stack obviously. I've already forgot why I had a FIFO queue on my mind when I wrote that, but it was probably just sleep depraved absent mindness talking... <br /><br />Btw, what game would be the most performant in the SNES library when it comes to amount of objects thrown around? Good old Space Megaforce?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5863"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p141202"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141202">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141202#p141202"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 4:22 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 905<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Optiroc wrote:</div><div class="quotecontent">Btw, what game would be the most performant in the SNES library when it comes to amount of objects thrown around? Good old Space Megaforce?</div><br />Either that or Rendering Ranger R2 (I'm leaning toward the ladder, even if it looks like there is more because of how fast bullets move). I personally think R-type 3 looks the best out of all of them due to the artwork, but it doesn't throw as much at you.<br /><br />A random nitpick, but I always found it bizarre how Contra 3 uses 8x8 and 16x16 sized sprites because it gets to be incredibly easy to run out of sprites because of the 32x32 explosions. Almost every boss is a BG layer when they really don't need to be. They also waste BG layer 3 on something the NES games just used sprites for, and the NES obviously had considerably worse sprite abilities.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p141203"></a>
				<b class="postauthor" style="color: #AA0000">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141203">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141203#p141203"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 5:02 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Site Admin</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 2391<br /><b>Location:</b> Mountain View, CA, USA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Espozo wrote:</div><div class="quotecontent">I finally solved the damned thing...</div><br />Nice job!  Consider me impressed, thumbs up!  By the way, you don't need the TempX variable (you really don't), you can stick with MetaspriteTableOffset if you just revamp your routine a little bit.  I.e.:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; lda #.LOWORD(MetaspriteTable)<br />&nbsp; sta MetaspriteTableOffset<br /><br />...<br /><br />&nbsp; ldy #0<br />&nbsp; jsr start_metasprite<br /><br />...<br /><br />.proc start_metasprite<br />&nbsp; pha<br />&nbsp; phx<br />&nbsp; phy<br />&nbsp; php&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Save P (A/X/Y sizes)<br />&nbsp; rep #$30&nbsp; &nbsp; ; A=16, X/Y=16<br /><br />&nbsp; ldx MetaspriteTableOffset<br />&nbsp; ldy SpriteCount<br /><br />: cpy #$0200&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; sees if all 128 sprites are used up<br />&nbsp; beq done<br />&nbsp; lda MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; If MetaspriteCount is zero, then we're done.&nbsp; Otherwise we have<br />&nbsp; beq done&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; metasprites to iterate over and populate for DMA (see VBlank)<br />&nbsp; lda $0000,x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 1st byte = sprite X position (value 0-255)<br />&nbsp; clc<br />&nbsp; adc MetaspriteXPosition<br />&nbsp; and #$01FF<br />&nbsp; sta SpriteBuf3,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite X position SpriteBuf1+y<br />&nbsp; and #$00FF<br />&nbsp; sta SpriteBuf1,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite X position SpriteBuf1+y<br />&nbsp; lda $0000+2,x&nbsp; &nbsp;; 2nd byte = sprite Y position (value 0-255)<br />&nbsp; clc<br />&nbsp; adc MetaspriteYPosition<br />&nbsp; and #$00FF<br />&nbsp; sta SpriteBuf1+1,y&nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite Y position in SpriteBuf1+1,y<br />&nbsp; lda $0000+4,x<br />&nbsp; sta SpriteBuf3+2,y&nbsp; &nbsp; &nbsp; &nbsp; ; Sprite size<br />&nbsp; lda $0000+6,x<br />&nbsp; sta SpriteBuf1+2,y&nbsp; &nbsp; &nbsp; &nbsp; ; Palette/Character word<br />&nbsp; txa<br />&nbsp; clc<br />&nbsp; adc #$0008<br />&nbsp; tax<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; dec MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; Decrement MetaspriteCount by 1<br />&nbsp; bra :-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Back to the loop...<br /><br />...<br /></div><br />The variable or equate you have called &quot;Empty&quot; is absolutely silly -- its name is awful and is misleading.  Just use $0000.  You can happily do things like $0000+6 (or $0006 or $6 if you want).  If you're worried about not knowing what it does: that's what comments are for!<br /><br />Now, about the sprite DMA bug.  There is 1 bug and one accident-waiting-to-happen.  First, look very closely at what SpriteBufSize (last line) is being calculated as:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.segment &quot;BSS&quot;<br />SpriteBuf1:&nbsp; &nbsp; .res $200&nbsp; &nbsp;; Sprite buffer for OAM DMA, 512 ($200) bytes<br />SpriteBuf1Size = *-SpriteBuf1<br />SpriteBuf2:&nbsp; &nbsp; .res $20&nbsp; &nbsp; ; Sprite buffer for OAM DMA, 32&nbsp; ($20) bytes<br />SpriteBuf2Size = *-SpriteBuf2<br />SpriteBuf3:&nbsp; &nbsp; .res $200&nbsp; &nbsp;; Sprite buffer for OAM DMA, 512&nbsp; ($200) bytes<br />SpriteBuf3Size = *-SpriteBuf3<br />SpriteBufSize&nbsp; = SpriteBuf1Size+SpriteBuf2Size<br /></div><br />This looks like an &quot;innocent typo&quot; until you actually look at the DMA routine inside VBlank:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; stz $4300&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; CPU -&gt; PPU, auto-increment, write once<br />&nbsp; lda #$04<br />&nbsp; sta $4301&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; DMA will write to register $2104 (OAM data write)<br />&nbsp; ldy #.LOWORD(SpriteBuf1)<br />&nbsp; sty $4302&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; source offset of SpriteBuf1<br />&nbsp; lda #.BANKBYTE(SpriteBuf1)<br />&nbsp; sta $4304&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; bank address of SpriteBuf1<br />&nbsp; ldy #SpriteBufSize<br />&nbsp; sty $4305&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; transfer SpriteBufSize bytes (pre-calculated number)<br />&nbsp; lda #$01<br />&nbsp; sta $420b&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; start DMA transfer<br /></div><br />One is a definite bug: your sprite DMA routine is only transferring $220 ($200+$20) bytes, not $420 ($200+$20+$200), thus is not DMA'ing the contents of SpriteBuf3 -- and the other is an accident waiting to happen: if you ever inserted a new sprite buffer in front of SpriteBuf1 in the BSS segment, the DMA routine would never use it.  So, to solve both of these issues:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.segment &quot;BSS&quot;<br />SpriteBufStart:<br />SpriteBuf1:&nbsp; &nbsp; .res $200&nbsp; &nbsp;; Sprite buffer for OAM DMA, 512 ($200) bytes<br />SpriteBuf2:&nbsp; &nbsp; .res $20&nbsp; &nbsp; ; Sprite buffer for OAM DMA, 32&nbsp; ($20) bytes<br />SpriteBuf3:&nbsp; &nbsp; .res $200&nbsp; &nbsp;; Sprite buffer for OAM DMA, 512&nbsp; ($200) bytes<br />SpriteBufSize = *-SpriteBufStart<br /></div><br />And then do this instead:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; stz $4300&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; CPU -&gt; PPU, auto-increment, write once<br />&nbsp; lda #$04<br />&nbsp; sta $4301&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; DMA will write to register $2104 (OAM data write)<br />&nbsp; ldy #.LOWORD(SpriteBufStart)<br />&nbsp; sty $4302&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; source offset of SpriteBufStart<br />&nbsp; lda #.BANKBYTE(SpriteBufStart)<br />&nbsp; sta $4304&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; bank address of SpriteBufStart<br />&nbsp; ldy #SpriteBufSize<br />&nbsp; sty $4305&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; transfer SpriteBufSize bytes (pre-calculated number)<br />&nbsp; lda #$01<br />&nbsp; sta $420b&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; start DMA transfer<br /></div><br />Finally: all your sprite stuff in the BSS segment might be a good place to try using ca65's <a href="http://cc65.github.io/doc/ca65.html#structs" class="postlink">.STRUCT</a> and <a href="http://cc65.github.io/doc/ca65.html#ss10.18" class="postlink">.SIZEOF()</a> directives.  If you'd like me to implement that (I think you might actually like the syntax), if you upload your current code I can implement it for you (it's not hard and should mostly make sense to you).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p141205"></a>
				<b class="postauthor">bazz</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141205">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141205#p141205"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 5:08 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4992_1376957212.gif" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Sep 02, 2011 8:34 pm<br /><b>Posts:</b> 413
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Espozo wrote:</div><div class="quotecontent"><div class="quotetitle">Optiroc wrote:</div><div class="quotecontent">Btw, what game would be the most performant in the SNES library when it comes to amount of objects thrown around? Good old Space Megaforce?</div><br />Either that or Rendering Ranger R2 (I'm leaning toward the ladder, even if it looks like there is more because of how fast bullets move). I personally think R-type 3 looks the best out of all of them due to the artwork, but it doesn't throw as much at you.<br /><br />A random nitpick, but I always found it bizarre how Contra 3 uses 8x8 and 16x16 sized sprites because it gets to be incredibly easy to run out of sprites because of the 32x32 explosions. Almost every boss is a BG layer when they really don't need to be. They also waste BG layer 3 on something the NES games just used sprites for, and the NES obviously had considerably worse sprite abilities.</div><br /><br />One reason that contra or any other game would use small sprites is that it although it doesn't conserve entries in the sprite table, it conserves precious VRAM in cases where your sprites don't use a full 16x16, 32x32, or 64x64 perimeter.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4992"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p141206"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141206">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141206#p141206"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 5:21 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 905<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">bazz wrote:</div><div class="quotecontent">One reason that contra or any other game would use small sprites is that it although it doesn't conserve entries in the sprite table, it conserves precious VRAM in cases where your sprites don't use a full 16x16, 32x32, or 64x64 perimeter.</div><br />Oh, 64x64 is completely out of the question. I swear, the hardware designers at Nintendo must have really been smoking something when they added that option... You really don't even have a fraction of the amount of vram or sprite overdraw that that sprite size would require. It would be okay for some things that actually do take up that much space, but with only 2 sprite sizes at a time, the option for 64x64 sized sprites is just ludicrous. I always wondered if maybe, just <em>maybe</em>, The SNES was originally designed to be more off an &quot;upper class, Neo Geo&quot; type system and this was one of the things that they didn't get rid of... Probably not. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p141209"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141209">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141209#p141209"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 5:31 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=9_1426464006.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 13842<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I too think the 64px sprites are silly, especially given that there's not enough room for one to move off the top or bottom of the screen. But there's a <em>lot</em> that could have been solved if Nintendo would have dedicated an entire byte of high OAM to each sprite.<br /><ul><li>Sprites using all 4 sizes </li><li>Rectangular sprites </li><li>More than 512 sprite tiles </li><li>Select individual sprites for participation in color math </li></ul>Nintendo eventually realized this by the GBA era, expanding OAM to 6 bytes per sprite.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p141212"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141212">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141212#p141212"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 14, 2015 6:07 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 905<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Oh, koitsu, I didn't even notice that you posted! Thank you for complementing me! I've gotten pretty far from I when first started with SNES dev. (which isn't very far, mind you! <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /> ) I like how you fixed my SpriteBuf3 routine too. <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /><br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">there's a <em>lot</em> that could have been solved if Nintendo would have dedicated an entire byte of high OAM to each sprite.<br /><ul><li>Sprites using all 4 sizes </li><li>Rectangular sprites </li><li>More than 512 sprite tiles </li><li>Select individual sprites for participation in color math </li></ul></div><br />I wonder, would increasing oam size affect anything aside from oam being bigger? Like if more processor time is taken or something? I think making oam 5bytes for sprites and getting rid of hioam would have worked wonders. I always wondered how far Nintendo would have gone if they even just threw an extra $50 at the SNES when they made it, but according to this, $200 was &quot;pushing it&quot;.<br /><br /><!-- m --><a class="postlink" href="https://www.youtube.com/watch?v=MTzyz2TgGls">https://www.youtube.com/watch?v=MTzyz2TgGls</a><!-- m --> (part 1:39 is just blasphemy, even compared to all the other sh*t they say in the video)<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">I too think the 64px sprites are silly, especially given that there's not enough room for one to move off the top or bottom of the screen.</div><br />The only &quot;work around&quot; to this I can think of is to check if the 64x64 sprite is out of bounds and to turn it into 2 32x32's but the fact that you would even have to do this is just ridiculous. (Not to mention it takes up time that could be spent on something else.)<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Nintendo eventually realized this by the GBA era, expanding OAM to 6 bytes per sprite.</div><br />There's <em>a lot</em> of screw ups Nintendo realized when they made the GBA (I honestly kind of drool over 4 8bpp BG's and 5x overdraw) but a lot of fixes would have driven the price to &quot;ludicrous levels&quot;. I don't think that increasing oam would have impacted the price much, but as koitsu always says, the past is the past.<br /><br />Edit: Oh, koitsu, I looked over what you said more and when you said that I had an error in that I wasn't DMAing the contents of SpriteBuf3 to oam, this was actually intentional, because I transfer the contents of SpriteBuf3 to SpriteBuf2 which then gets DMAed to oam. I realized that I wrote:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">SpriteBuf3:&nbsp; &nbsp; .res $200&nbsp; &nbsp;; Sprite buffer for OAM DMA, 512&nbsp; ($200) bytes</div><br />But this is because of copy and pasting. <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> It should say:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">SpriteBuf3:&nbsp; &nbsp; .res $200&nbsp; &nbsp;; Sprite buffer for SpriteBuf2, 512&nbsp; ($200) bytes</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p141262"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141262">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141262#p141262"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 15, 2015 1:46 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 905<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Just thinking, with the way I have my vram searching routine, I figure that in each object &quot;slot&quot;, I could have 32 bytes that give the character offset for each sprite in the object. This would allow you hold the tile number for 16 different sprites, and I doubt an object is going to consist of more than 16 sprites because I am using 16x16's and 32x32's. I already thought of having byte or word that says what the object is, but I am thinking about having an additional byte that says the number of what frame of animation the object is currently on. This would help because with objects like explosions that can potentially use a lot of vram, but often go off at the same time, with every explosion, you could check to see if there are any other explosions and if they are at the same frame. You would then dump the tile numbers from the pre existing explosion into the new one, so you don't have 2 of the exact same explosion in vram. I don't think that this would be very worthwhile for every object, but it could work here because there really isn't much going on with an explosion except animating it. (There isn't normally any collision detection or anything.)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p141265"></a>
				<b class="postauthor">psycopathicteen</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141265">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141265#p141265"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 15, 2015 2:32 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed May 19, 2010 6:12 pm<br /><b>Posts:</b> 1106
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Maybe instead of looking through all the objects for another explosion of the same frame, it will be faster if every object would use a register as a switch between animating it's own metasprite, and using a metasprite from another object.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4383"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p141266"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141266">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141266#p141266"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 15, 2015 2:52 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 905<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Wouldn't that mean that it is the <em>exact</em> same object, coordinates and all? as I currently have it, my metasprite routine loads a sprites position from a table and gets the object's coordinates, which are added to the value from the table to get the final position of the sprite and you store it in the sprite buffer. I guess you could find the positions for the sprites prior to creating the metasprite?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p141272"></a>
				<b class="postauthor">psycopathicteen</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141272">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141272#p141272"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 15, 2015 3:27 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed May 19, 2010 6:12 pm<br /><b>Posts:</b> 1106
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Don't copy the X and Y coordinates, just copy the metasprite data address.  You don't need to copy the entire CHR-offset table, because you can just index from the parent sprite's CHR-offset table.<br /><br />BTW, is every frame going to use a different metasprite, or just a different graphics address?  The former is more v-ram efficient, but the latter is easier to work with.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4383"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p141278"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p141278">Re: Main principles of creating an &quot;object&quot;</a></div><div style="float: right;"><a href="./viewtopic.php?p=141278#p141278"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 15, 2015 5:02 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 905<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">Don't copy the X and Y coordinates, just copy the metasprite data address.  You don't need to copy the entire CHR-offset table, because you can just index from the parent sprite's CHR-offset table.</div><br />Okay, I get you now. <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> I'll try to implement that sometime.<br /><br /><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">BTW, is every frame going to use a different metasprite, or just a different graphics address?  The former is more v-ram efficient, but the latter is easier to work with.</div><br />Definitely the former. If I make a 64x64 explosion, I want it to start out as 1 32x32 sized sprite, then 1 32x32 and 5 16x16 sized sprites to create a 48x48 sized metasprite, and finally 4 32x32 sized sprites. Similarly, the character I want is going to have the legs be 32 pixels across for when their legs are furthest apart in their running animation, but when the legs cross over, they will be 16 pixels across.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=12356&amp;start=60"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=12356"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>5</strong> of <strong>8</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 118 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=12&amp;t=12356&amp;start=45">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=12&amp;t=12356">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=45">4</a><span class="page-sep">, </span><strong>5</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=90">7</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12356&amp;start=105">8</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=12356&amp;start=75">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 9 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="12356" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;Reproduction</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>

<img src="./cron.php?cron_type=tidy_cache" width="1" height="1" alt="cron" />
</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
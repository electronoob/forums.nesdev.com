<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - 3DS reverse engineering</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Other Retro Dev" href="http://forums.nesdev.com/feed.php?f=23" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - 3DS reverse engineering" href="http://forums.nesdev.com/feed.php?f=23&amp;t=18490" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en&amp;sid=52628b659bed6744564556e7a69f83b2" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php?sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php?sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php?sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Mar 08, 2019 7:46 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered&amp;sid=52628b659bed6744564556e7a69f83b2">View unanswered posts</a> | <a href="./search.php?search_id=active_topics&amp;sid=52628b659bed6744564556e7a69f83b2">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=52628b659bed6744564556e7a69f83b2">Board index</a> &#187; <a href="./viewforum.php?f=25&amp;sid=52628b659bed6744564556e7a69f83b2">Other</a> &#187; <a href="./viewforum.php?f=23&amp;sid=52628b659bed6744564556e7a69f83b2">Other Retro Dev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=23&amp;t=18490&amp;sid=52628b659bed6744564556e7a69f83b2">3DS reverse engineering</a></h2>


</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=23&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=23&amp;t=18490&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 13 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=23&amp;t=18490&amp;sid=52628b659bed6744564556e7a69f83b2&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=23&amp;t=18490&amp;view=previous&amp;sid=52628b659bed6744564556e7a69f83b2">Previous topic</a> | <a href="./viewtopic.php?f=23&amp;t=18490&amp;view=next&amp;sid=52628b659bed6744564556e7a69f83b2">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p234407"></a>
				<b class="postauthor">nocash</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p234407">3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=234407&amp;sid=52628b659bed6744564556e7a69f83b2#p234407"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Feb 15, 2019 12:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Feb 24, 2012 12:09 pm<br /><b>Posts:</b> 835
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I've started adding ARM11 support to my disassembler some days ago, and I am now examining 3DS bootroms, and try to learn about the 3DS in general. I have a New3DS console laying around for some years, but I could never make any sense of it (and don't really know how to start a game, and least how to program homebrew code for it). But I've managed to view two game trailers - and the stereoscopic 3D does actually look neat! I might like that hardware - if I could ever figure out how to use it.<br /><br />For understanding the 3DS hardware I/O registers, my starting point is here: <!-- m --><a class="postlink" href="https://www.3dbrew.org/wiki/IO_Registers">https://www.3dbrew.org/wiki/IO_Registers</a><!-- m --><br />At first glance, that refers to things like &quot;ABC Registers for ABC Services used Process ABC for ABC module&quot; - without giving much of a hint what &quot;ABC&quot; stands for.<br />At second glance, it looks as names like &quot;ABC&quot; are just newly invented homebrew aliases for well-known NDS/DSi registers. Plus some new 3DS registers. At the moment I couldn't say if there are many new registers, or if it the 3DS is just a DSi with some extra gimmicks.<br /><br />Some general specs are here: <!-- m --><a class="postlink" href="https://www.3dbrew.org/wiki/Hardware">https://www.3dbrew.org/wiki/Hardware</a><!-- m --> the two main differences seem to be new GPU for stereoscopic 3D and the newer ARM11 CPU.<br /><br />The GPU seems to be some standard off-the-shelf hardware (DMP PICA), so I hope that specs are openly available. It might be difficult to emulate that thing though, and possibly slow when using raw software emulation (without trying to parse the stuff to opengl or direct3d). The bootrom seems to be capable of displaying an error message? Though I can't see any font data in the bootrom, or is there a built-in font in the GPU itself?<br /><br />The ARM11 seems to be DualCore? Or even QuadCore for New3DS? I had believed the 3DS would just have ARM9+ARM11. But now it looks as if it's actually ARM9+ARM11+ARM11 (+ARM11+ARM11 for New3DS. That - and the speed of 268MHz (or even 804MHz) per ARM11 core - that would be also difficult (and very slow) to emulate. Not to mention the Virtual Memory on ARM11 side, which might also slowdown emulation.<br /><br />Many I/O registers are said to be accessible by ARM9 and ARM11. I wonder what that means in practice, especially if there are two or more ARM11 cores. It isn't too clear if there are separate sets of I/O ports for each core, or if all cores access the same registers (with only one of them being supposed to do so at once).<br /><br />I have no idea where the homebrew register names came from. As far as I remember somebody mentioned that the official 3DS SDK is using names like SCFG_xxx (same/similar as on DSi) (EDIT: Or was it something different, like REG_OS_PAUSE_JTAG or HWi_WSYS09_JTAG on 3DS, instead of the DSi's SCFG_JTAG?). So the homebrew names might be just there for lack of official names. Though in case of &quot;MP&quot; it looks as if the homebrewers didn't even realize why they had used that name for it (I guess it stands for local MultiPlayer wifi, going by their description). Btw. are there any documents with official register names? Or official specs for the hardware? Or more homebrew specs other than 3dbrew wiki?<br /><br />Would be cool if somebody could answer such newbie questions!</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5211&amp;sid=52628b659bed6744564556e7a69f83b2">nocash</a> on Sat Feb 23, 2019 11:24 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5211&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p234411"></a>
				<b class="postauthor">Pokun</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p234411">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=234411&amp;sid=52628b659bed6744564556e7a69f83b2#p234411"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Feb 15, 2019 3:51 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue May 28, 2013 5:49 am<br /><b>Posts:</b> 1074<br /><b>Location:</b> Hokkaido, Japan
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Although I haven't tried it myself, I noticed that Nintendo has relaxed developer registration for individuals so it's easier than ever to legally get development tools and documents for Nintendo's systems. But now I also read that by registering you are swearing that you don't leak it or use it for homebrew or emulator development, and breaching the contract may jeopardize your emulator or the homebrew wiki you contribute to.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6013&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p234924"></a>
				<b class="postauthor">nocash</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p234924">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=234924&amp;sid=52628b659bed6744564556e7a69f83b2#p234924"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 23, 2019 7:41 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Feb 24, 2012 12:09 pm<br /><b>Posts:</b> 835
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I've plundered the 3dbrew hardware register pages, and collected and reformatted the info for viewing as 80 column text. The result is now included in a new &quot;3DS Reference&quot; section in gbatek: <!-- m --><a class="postlink" href="http://problemkaputt.de/gbatek.htm#3dsreference">http://problemkaputt.de/gbatek.htm#3dsreference</a><!-- m --><br />At the moment, it is just containing shamelessly copied info from of 3dbrew pages, I didn't write any of the descriptions myself (and, in most cases, I didn't even read them yet). Plans for future would be to read &amp; verify &amp; rewrite &amp; extend the text step by step, until, hopefully, I could honestly say that I've written &amp; contributed a good bit of information on my own someday.<br /><br />Anyways, for now, the text is just reflecting what I know about the console - if it's missing important parts that are already known and documented elsewhere - please let me know! There's also a todo-list at the end of the 3DS section with some specific issues &amp; questions (and plenty of &quot;unknown&quot; bits in the register descriptions).<br /><br /><div class="quotetitle">Pokun wrote:</div><div class="quotecontent">Although I haven't tried it myself, I noticed that Nintendo has relaxed developer registration for individuals so it's easier than ever to legally get development tools and documents for Nintendo's systems. But now I also read that by registering you are swearing that you don't leak it or use it for homebrew or emulator development...</div>Yeah, looks as if they are announcing something like that here: <!-- m --><a class="postlink" href="https://developer.nintendo.com/">https://developer.nintendo.com/</a><!-- m --> it does almost sound to good to be true - free devkits for everyone without any programming experience whatsoever? I guess it may turn out that the free devkit might require expensive devhardware, and programming manuals for 3D consoles are traditionally only covering OS functions and libraries instead of hardware specs. Either way, I am not so motivated to swear &amp; register for obtaining documentation.<br /><br />The code in the 3DS bootrooms is surprisingly easy to read. I was almost thinking that it were written in ASM, or that their compiler evolved to produce more meaningful code. On the other hand, wide parts of the bootrom consists of mini-functions that do things like &quot;[register]=value&quot; (which is inefficient by itself, but a compiler can't screw up too much on such basic commands). The part that isn't easy to read is the boot error text output - I think pixel drawing is yet a bit too complex for compiler code.<br />Alongsides, I have also found the font for the error message - the size and encoding are rather unexpected:<div class="codetitle"><b>Code:</b></div><div class="codecontent">;------------------<br />font_3x5_pix:&nbsp; &nbsp; &nbsp; SPC&nbsp; !&nbsp; &nbsp;&quot;&nbsp; &nbsp;#&nbsp; &nbsp;$&nbsp; &nbsp;%&nbsp; &nbsp;&amp;&nbsp; &nbsp;'&nbsp; &nbsp;(&nbsp; &nbsp;)<br />&nbsp;dd 02B5D48Ch&nbsp; ;00 000 010 101 101 011 101 010 010 001 100<br />&nbsp;dd 02BF1B12h&nbsp; ;00 000 010 101 111 110 001 101 100 010 010<br />&nbsp;dd 02152412h&nbsp; ;00 000 010 000 101 010 010 010 000 010 010<br />&nbsp;dd 001DCA12h&nbsp; ;00 000 000 000 111 011 100 101 000 010 010<br />&nbsp;dd 0217560Ch&nbsp; ;00 000 010 000 101 110 101 011 000 001 100<br />;---&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *&nbsp; &nbsp;+&nbsp; &nbsp;,&nbsp; &nbsp;-&nbsp; &nbsp;.&nbsp; &nbsp;/&nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2&nbsp; &nbsp;3<br />&nbsp;dd 00001FBFh&nbsp; ;00 000 000 000 000 000 001 111 110 111 111<br />&nbsp;dd 2A001A89h&nbsp; ;00 101 010 000 000 000 001 101 010 001 001<br />&nbsp;dd 171C2ABFh&nbsp; ;00 010 111 000 111 000 010 101 010 111 111<br />&nbsp;dd 2A404AA1h&nbsp; ;00 101 010 010 000 000 100 101 010 100 001<br />&nbsp;dd 00824FFFh&nbsp; ;00 000 000 100 000 100 100 111 111 111 111<br />;---&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp;5&nbsp; &nbsp;6&nbsp; &nbsp;7&nbsp; &nbsp;8&nbsp; &nbsp;9&nbsp; &nbsp;:&nbsp; &nbsp;;&nbsp; &nbsp;&lt;&nbsp; &nbsp;=<br />&nbsp;dd 2FFFF008h&nbsp; ;00 101 111 111 111 111 111 000 000 001 000<br />&nbsp;dd 2C96D497h&nbsp; ;00 101 100 100 101 101 101 010 010 010 111<br />&nbsp;dd 3FE7F020h&nbsp; ;00 111 111 111 001 111 111 000 000 100 000<br />&nbsp;dd 09A69497h&nbsp; ;00 001 001 101 001 101 001 010 010 010 111<br />&nbsp;dd 0FE7F108h&nbsp; ;00 001 111 111 001 111 111 000 100 001 000<br />;---&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;&nbsp; &nbsp;?&nbsp; &nbsp;@&nbsp; &nbsp;A&nbsp; &nbsp;B&nbsp; &nbsp;C&nbsp; &nbsp;D&nbsp; &nbsp;E&nbsp; &nbsp;F&nbsp; &nbsp;G<br />&nbsp;dd 264B2DFEh&nbsp; ;00 100 110 010 010 110 010 110 111 111 110<br />&nbsp;dd 11B6DB24h&nbsp; ;00 010 001 101 101 101 101 101 100 100 100<br />&nbsp;dd 0AF74BFFh&nbsp; ;00 001 010 111 101 110 100 101 111 111 111<br />&nbsp;dd 10BEDB25h&nbsp; ;00 010 000 101 111 101 101 101 100 100 101<br />&nbsp;dd 22772DE7h&nbsp; ;00 100 010 011 101 110 010 110 111 100 111<br />;---&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; H&nbsp; &nbsp;I&nbsp; &nbsp;J&nbsp; &nbsp;K&nbsp; &nbsp;L&nbsp; &nbsp;M&nbsp; &nbsp;N&nbsp; &nbsp;O&nbsp; &nbsp;P&nbsp; &nbsp;Q<br />&nbsp;dd 2A365AB2h&nbsp; ;00 101 010 001 101 100 101 101 010 110 010<br />&nbsp;dd 2A367B6Dh&nbsp; ;00 101 010 001 101 100 111 101 101 101 101<br />&nbsp;dd 3A3A5F75h&nbsp; ;00 111 010 001 110 100 101 111 101 110 101<br />&nbsp;dd 2AB65B62h&nbsp; ;00 101 010 101 101 100 101 101 101 100 010<br />&nbsp;dd 2A57DAA3h&nbsp; ;00 101 010 010 101 111 101 101 010 100 011<br />;---&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; R&nbsp; &nbsp;S&nbsp; &nbsp;T&nbsp; &nbsp;U&nbsp; &nbsp;V&nbsp; &nbsp;W&nbsp; &nbsp;X&nbsp; &nbsp;Y&nbsp; &nbsp;Z&nbsp; &nbsp;&#91;<br />&nbsp;dd 33F6DB7Bh&nbsp; ;00 110 011 111 101 101 101 101 101 111 011<br />&nbsp;dd 2C56DB4Ah&nbsp; ;00 101 100 010 101 101 101 101 101 001 010<br />&nbsp;dd 3256D492h&nbsp; ;00 110 010 010 101 101 101 010 010 010 010<br />&nbsp;dd 2956FAA2h&nbsp; ;00 101 001 010 101 101 111 101 010 100 010<br />&nbsp;dd 2E5D5ABBh&nbsp; ;00 101 110 010 111 010 101 101 010 111 011<br />;---<br />;well, that is a bit crazy, saving memory for the sake of<br />;keeping more unused ROM zerofilled.<br />;or perhaps it's done for not overloading the HLL-coded wrchr<br />;function with much too many amounts of data : /</div><br />Oh, and no$gba was also updated together with gbatek - <!-- m --><a class="postlink" href="http://problemkaputt.de/gba.htm">http://problemkaputt.de/gba.htm</a><!-- m --> - with some basic groundwork for possible future 3DS support - and a rather bewildering bugfix for a problem that I wasn't aware off at all (it seems that all builds in the past some years did have the profiler feature enabled by default - making no$gba debug version to run slow as glaciers).<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">23 Feb 2019 - no$gba version 2.9d<br />- debug/setup: disabled profiler by default (for fast emulation) (thanks Dwedit)<br />- debug/disass: disassembler support for UAL syntax (optional) and ARM11 opcodes<br />- dsi/help: added SD_EXT_IRQ_STAT/MASK (insert/eject state and irq for emmc)<br />- 3ds/help: added 3DS register specs (thanks 3dbrew.org/wiki/IO_Registers)</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5211&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p234951"></a>
				<b class="postauthor">iamrifki</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p234951">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=234951&amp;sid=52628b659bed6744564556e7a69f83b2#p234951"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 24, 2019 12:50 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 09, 2019 4:30 pm<br /><b>Posts:</b> 2
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Have you ever heard of the Citra Emulator, nocash? <!-- m --><a class="postlink" href="https://github.com/citra-emu/citra">https://github.com/citra-emu/citra</a><!-- m --></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=12706&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p234952"></a>
				<b class="postauthor">nocash</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p234952">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=234952&amp;sid=52628b659bed6744564556e7a69f83b2#p234952"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 24, 2019 2:36 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Feb 24, 2012 12:09 pm<br /><b>Posts:</b> 835
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Heard of it, yes. But I may be wrong about what it is doing... as far as I know it's emulating the ARM11 cpu, and the 3DS OS, without trying to emulate the 3DS hardware. I have had a brief look at the citra homepage and github page yesterday, and I didn't find source code files for hardware emulation (except perhaps for the yuv-to-rgb Y2R part), and for console specs they do only have a link to an ARM11 pdf, and to the 3dbrew wiki. I may have missed some important stuff though, maybe there's much more low level HW emulation in there...?<br /><br />What I know of: For citra related 3DS sound, there is a separate github page from wwylele with Teak DSP emulation, and with readme pages describing the Teak MMIO registers. That is looking like pretty cool low level stuff : )</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5211&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p234958"></a>
				<b class="postauthor">naseyuki</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p234958">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=234958&amp;sid=52628b659bed6744564556e7a69f83b2#p234958"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 24, 2019 8:08 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Feb 13, 2019 6:30 pm<br /><b>Posts:</b> 3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">nocash wrote:</div><div class="quotecontent">Yeah, looks as if they are announcing something like that here: <!-- m --><a class="postlink" href="https://developer.nintendo.com/">https://developer.nintendo.com/</a><!-- m --> it does almost sound to good to be true - free devkits for everyone without any programming experience whatsoever? I guess it may turn out that the free devkit might require expensive devhardware, and programming manuals for 3D consoles are traditionally only covering OS functions and libraries instead of hardware specs. Either way, I am not so motivated to swear &amp; register for obtaining documentation.<br /></div><br /><br />Exactly, everything in this website is pretty much useless without 3000 USD of development hardware. The information too, it's just API reference, programming &quot;best practices&quot;, dozens of manuals for every single software included and so on. The most useful and uncommon info would be the shader coding manual, but I think this info is somehow around the internet already.<br /><br /><br />~<br />People need to stop this wrong mindset of &quot;if someone already done something similar, I won't even touch the subject&quot;, knowledge is built upon multiple people taking different approaches researching something, be sure that, when humanity forget this completely, it'll be the END.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=12918&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p234975"></a>
				<b class="postauthor">nocash</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p234975">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=234975&amp;sid=52628b659bed6744564556e7a69f83b2#p234975"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 24, 2019 1:40 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Feb 24, 2012 12:09 pm<br /><b>Posts:</b> 835
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Oh, yeah, I hope it won't be the end of the world, but the next gen handheld scene community can be sometimes as helpful as saying &quot;Don't worry about that, I think that we already know how to do it!&quot; ; )<br /><br />3dbrew has this about shaders <!-- m --><a class="postlink" href="https://www.3dbrew.org/wiki/GPU/Shader_Instruction_Set">https://www.3dbrew.org/wiki/GPU/Shader_Instruction_Set</a><!-- m --> the opcode table is a bit hard to read, but I hope that it will make some more sense when analyzing it step by step. The page says that it was rev-engineered, I don't know if nintendo has better specs for it. Why are that shader instructions so special at all, I thought that the PICA200 gpu would be standard hardware? I haven't checked if there are official specs for it yet though.<br /><br />This page <!-- m --><a class="postlink" href="https://www.3dbrew.org/wiki/GPU/Internal_Registers">https://www.3dbrew.org/wiki/GPU/Internal_Registers</a><!-- m --> seems to cover the main part of the gpu. The page formatting appears to be a little bit very insane - but the actual info isn't so bad - the trick is to split the 9 sections to 9 separate pages/files/chapters, that's making it much easier to read.<br /><br />The one big thing that seems to be missing is information about matrices. Searching the 3dbrew wiki gives only three hits for matrix (mostly for pages that describe fileformats), but there isn't anything mentioning that the GPU could do matrix maths - is that still missing/undocumeted?<br />Or is it really unsupported by the GPU?<br />The ARM11 seems to have some SIMD extension, maybe that allows to do matrix maths on ARM11 side?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5211&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p235057"></a>
				<b class="postauthor">naseyuki</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p235057">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=235057&amp;sid=52628b659bed6744564556e7a69f83b2#p235057"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Feb 26, 2019 2:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Feb 13, 2019 6:30 pm<br /><b>Posts:</b> 3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">nocash wrote:</div><div class="quotecontent">3dbrew has this about shaders <!-- m --><a class="postlink" href="https://www.3dbrew.org/wiki/GPU/Shader_Instruction_Set">https://www.3dbrew.org/wiki/GPU/Shader_Instruction_Set</a><!-- m --> the opcode table is a bit hard to read, but I hope that it will make some more sense when analyzing it step by step. The page says that it was rev-engineered, I don't know if nintendo has better specs for it. Why are that shader instructions so special at all, I thought that the PICA200 gpu would be standard hardware? I haven't checked if there are official specs for it yet though.</div><br /><br />GPUs this day change architecture and internal assembly language all the time, so they don't even bother to release to public, it's closed to engineers or to console developers that don't rely on High Level APIs. Isn't that the hardware is special, is just unknown (and most people don't care about knowing it, even people which should), and being from DMP is even more unknown and strange. Exactly this, they aren't special, just strange!<br /><br /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">The one big thing that seems to be missing is information about matrices. Searching the 3dbrew wiki gives only three hits for matrix (mostly for pages that describe fileformats), but there isn't anything mentioning that the GPU could do matrix maths - is that still missing/undocumeted?<br />Or is it really unsupported by the GPU?<br />The ARM11 seems to have some SIMD extension, maybe that allows to do matrix maths on ARM11 side?</div><br /><br />The OpenGL &quot;modern&quot; standard is do heavy matrix calculations on CPU side and just upload them as uniforms to the shader side, and do final multiplications there, so your guess about the SIMD is pretty accurate. But as you can see here:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; Really simple &amp; stupid PICA200 shader<br />; Also serves as an example of picasso syntax<br /><br />; Uniforms<br />.fvec projMtx&#91;4&#93;, mdlvMtx&#91;4&#93;<br /><br />; Constants<br />.constf myconst(0.0, 1.0, -1.0, 0.0)<br />.alias zeros myconst.xxxx<br />.alias ones myconst.yyyy<br />.alias negones myconst.zzzz<br />.alias dummytcoord myconst.xxxy ; (0,0,0,1)<br /><br />; Outputs<br />.out outpos position<br />.out outtc0 texcoord0<br />.out outtc1 texcoord1<br />.out outtc2 texcoord2<br />.out outclr color<br /><br />; Inputs<br />.alias inpos v0<br />.alias intex v1<br />.alias inarg v2<br /><br />.proc main<br />&nbsp; &nbsp;; r0 = (inpos.x, inpos.y, inpos.z, 1.0)<br />&nbsp; &nbsp;mov r0.xyz, inpos<br />&nbsp; &nbsp;mov r0.w, ones<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;; r1 = mdlvMtx * r0<br />&nbsp; &nbsp;dp4 r1.x, mdlvMtx&#91;0&#93;, r0<br />&nbsp; &nbsp;dp4 r1.y, mdlvMtx&#91;1&#93;, r0<br />&nbsp; &nbsp;dp4 r1.z, mdlvMtx&#91;2&#93;, r0<br />&nbsp; &nbsp;dp4 r1.w, mdlvMtx&#91;3&#93;, r0<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;; outpos = projMtx * r1<br />&nbsp; &nbsp;dp4 outpos.x, projMtx&#91;0&#93;, r1<br />&nbsp; &nbsp;dp4 outpos.y, projMtx&#91;1&#93;, r1<br />&nbsp; &nbsp;dp4 outpos.z, projMtx&#91;2&#93;, r1<br />&nbsp; &nbsp;dp4 outpos.w, projMtx&#91;3&#93;, r1<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;; Set texcoords<br />&nbsp; &nbsp;mov outtc0, intex<br />&nbsp; &nbsp;mov outtc1, dummytcoord<br />&nbsp; &nbsp;mov outtc2, dummytcoord<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;; Set vertex color<br />&nbsp; &nbsp;mov outclr.xyz, inarg<br />&nbsp; &nbsp;mov outclr.w, ones<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;end<br />.end</div><br /><br />This is the example one common assembler to the 3DS GPU provides, as you can see there's some matrix*vector multiplications using DP4. But maybe there's some quick way to multiply matrix*matrix.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=12918&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p235127"></a>
				<b class="postauthor">nocash</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p235127">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=235127&amp;sid=52628b659bed6744564556e7a69f83b2#p235127"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Feb 28, 2019 7:04 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Feb 24, 2012 12:09 pm<br /><b>Posts:</b> 835
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks for the shader example. Okay, if they are doing it like that then there seems to be really no matrix hardware.<br />I guess one could also use the shader for matrix by matrix multiplication, best with pre-swapped rows/columns in one matrix, or otherwise use the ARM11 for that multiplication.<br /><br />If there's no matrix hardware, that does also solve another question that I had in mind: I was wondering if the GPU were automatically producing stereoscopic output (by setting Left and Right projection matrices before rendering the scene). But now it's looking as if one must render Left and Right scenes separately.<br /><br />Some 3D related terms are a bit confusing to me. I can't grasp what is meant by &quot;Uniform&quot;, or, I get some idea what it is, but not why it's called like that. Looking at <!-- m --><a class="postlink" href="https://en.wikipedia.org/wiki/Uniform_(disambiguation">https://en.wikipedia.org/wiki/Uniform_(disambiguation</a><!-- m -->) doesn't help either (I couldn't say if or which of that meanings does apply in this case). For now, I am just treating it as slang for saying &quot;constant&quot;, or &quot;immediate&quot;, or &quot;general purpose&quot;.<br /><br />---<br /><br />For booting code, I think I have now figured out how to do that... The bootrom does first load a &quot;NCSD&quot; sector (from first eMMC sector), which points to a &quot;FIRM&quot; sector, which contains entrypoints &amp; load addresses for bootcode. And storing the &quot;sighax&quot; values in the FIRM's RSA signature field should most probably allow to freely modify the entrypoints &amp; bootcode.<br /><br />So far, that sounds relative simple and comfortable. I'll only need to figure out which encryption keys are needed for modification (and if they are console-unique). But for now, I can just wire the console to a SD/MMC card reader - and then see where I can get from there (and with the wires attached I could also easily unbrick the console if something goes wrong).<br /><br />---<br /><br />Also good to know that there's no official documentation for the GPU, then I won't have to waste time on searching for it!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5211&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p235176"></a>
				<b class="postauthor">naseyuki</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p235176">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=235176&amp;sid=52628b659bed6744564556e7a69f83b2#p235176"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 01, 2019 2:43 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Feb 13, 2019 6:30 pm<br /><b>Posts:</b> 3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">About the stereoscopic output, yes! To my knowledge devs must read an float value from 1FF81080h (3D Slider), if its greater than 0.0 the 3D is active and the value also indicates the 3D level so you need to base your dual rendering in it, and keep on drawing left,right,left,right[...]. I don't know the maximum value although.<br /><br />I'm sorry! It's one of the cases you use a name for years a never argue about it's meaning wwww. Uniform is an read-only value you send from CPU to GPU. It can be vertex, texture coordinates, parameters. I think they didn't call it a const cause there's already a const to values hardcoded inside the shader itself, but the motive behind the use of &quot;Uniform&quot; is unknown to me too.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=12918&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p235200"></a>
				<b class="postauthor">calima</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p235200">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=235200&amp;sid=52628b659bed6744564556e7a69f83b2#p235200"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 01, 2019 11:48 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Oct 06, 2015 10:16 am<br /><b>Posts:</b> 900
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">3dlabs' logic was something like &quot;it is uniform to all executions of this shader in this drawcall&quot;, vs varying &quot;it varies between different executions&quot;. Varying being a variable passed between shader stages. In the above asm, varyings are called either inputs or outputs.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7237&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p235201"></a>
				<b class="postauthor">nocash</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p235201">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=235201&amp;sid=52628b659bed6744564556e7a69f83b2#p235201"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 01, 2019 12:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Feb 24, 2012 12:09 pm<br /><b>Posts:</b> 835
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks! I was wondering if one needed to study uniform maths for fully understanding this console.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5211&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p235607"></a>
				<b class="postauthor">nocash</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p235607">Re: 3DS reverse engineering</a></div><div style="float: right;"><a href="./viewtopic.php?p=235607&amp;sid=52628b659bed6744564556e7a69f83b2#p235607"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 05, 2019 10:21 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Feb 24, 2012 12:09 pm<br /><b>Posts:</b> 835
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hmmmm, the 3DS project seems to have died before I got started with it : /<br /><br />After disassemblid the New 3DS XL a bunch of times, one of the pins in one of the three top-screen-unit connectors got bent inside of the connector, making it impossible to fully insert the FFC cable. The connector has 31 pins, the total width of the socket is about 9.4mm. I think that it is this specific part: <!-- m --><a class="postlink" href="https://www.molex.com/molex/products/datasheet.jsp?part=active/5033003110_FFC_FPC_CONNECTORS.xml">https://www.molex.com/molex/products/da ... ECTORS.xml</a><!-- m --> that is, the black socket with white lid, on the far left edge of this photo: <!-- m --><a class="postlink" href="https://d3nevzfk7ii3be.cloudfront.net/igi/OMYYisieWXRA2dBL.full">https://d3nevzfk7ii3be.cloudfront.net/i ... A2dBL.full</a><!-- m --><br /><br />Does anybody know how to get a replacement part for that?<br /><br />Currently, the console switches off a few seconds after power up, with the bottom screen backlight flashing for a short moment. I assume the broken connector goes to top screen backlight (and probably speakers/sliders). It might be possible to bridge the backlight pins with a resistor (if I knew where those pins are on mainboard), maybe the console would boot up with that, so I could at least continue rev-engineering the console (just without top screen).<br /><br />---<br /><br />What I was doing was hooking the 3DS mainboard's eMMC chip to an SD/MMC card reader, which didn't work with neither of my card readers. I had no problems doing the same thing with the DSi. I think the difference is that DSi has resistors in the CLK and CMD lines (those should help in cases where the console pulls CLK low, while the card reader wants to pull it high). The 3DS board does have solder pads for that resistors too, but they are just bridged with wires. So I had cut that wires, and attached cables for later attaching resistors on the other PCB side. Well, and with that cables in place, I was optimistic that I won't ever have to remove the mainboard again - and then discovered that the FFC connector had died : /<br /><br />PS. <div class="quotetitle">molex webpage wrote:</div><div class="quotecontent">Durability (mating cycles max)	10</div>I can confirm that 10 cycles appear to be maximum, mine died after plugging/unplugging 5-7 times.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5211&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=23&amp;t=18490&amp;sid=52628b659bed6744564556e7a69f83b2"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=23&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=23&amp;t=18490&amp;sid=52628b659bed6744564556e7a69f83b2"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 13 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=52628b659bed6744564556e7a69f83b2">Board index</a> &#187; <a href="./viewforum.php?f=25&amp;sid=52628b659bed6744564556e7a69f83b2">Other</a> &#187; <a href="./viewforum.php?f=23&amp;sid=52628b659bed6744564556e7a69f83b2">Other Retro Dev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 11 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php?sid=52628b659bed6744564556e7a69f83b2"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="18490" />
<input type="hidden" name="sf" value="msgonly" />
<input type="hidden" name="sid" value="52628b659bed6744564556e7a69f83b2" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php?sid=52628b659bed6744564556e7a69f83b2" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23" selected="selected">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - How do you identify NTSC/PAL iNES roms?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">How do you identify NTSC/PAL iNES roms?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=242">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=242</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kinopio</b> [ Tue Mar 15, 2005 10:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>How do you identify NTSC/PAL iNES roms?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I have looked at the iNES header format and I can't find any
<br />way to check if a ROM is NTSC or PAL.
<br />I always thought this info was needed to correctly emulate a ROM.
<br />The UNIF format seems to have a data chunk for this.
<br />
<br /><img src="./images/smilies/icon_question.gif" alt=":?:" title="Question" />  <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" />
<br />
<br />Most emulators I have looked at seems to do this by using checksums
<br />and a database. Am I right?. If so, are there any databases you can
<br />use for free in an emulator out there?
<br />
<br />It feels like this is a really dumb question, but hey, thats why I put it in Newbie help center.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Any help is appreciated.
<br />
<br />Kinopio

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Tue Mar 15, 2005 1:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The iNES format was updated recently to include an NTSC/PAL bit.  After all these years, heh.
<br /><a href="http://fms.komkon.org/EMUL8/NES.html#LABM" class="postlink">http://fms.komkon.org/EMUL8/NES.html#LABM</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kinopio</b> [ Wed Mar 16, 2005 5:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I have not seen that iNES format before.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> 
<br />Thanks for the link.
<br />
<br />Do most ROMs now follow this updated format?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Quietust</b> [ Wed Mar 16, 2005 7:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That new flag was introduced very recently, so <strong>zero</strong> ROMs follow it. In Marat's usual style, it's too little <strong>too late</strong> and totally useless.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kinopio</b> [ Wed Mar 16, 2005 8:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was afraid of that.  <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> 
<br />
<br />So back to my original question.
<br />Is there any way to correctly identify NTSC/PAL iNES roms?  <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /> 
<br />
<br />Should I just assume that every ROM is NTSC and let the
<br />user choose otherwise?
<br />
<br />Or maybe only support the UNIF format, but I have not seen
<br />many ROMs using that.  <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Nessie</b> [ Wed Mar 16, 2005 1:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Nestopia comes with an internal database which among other things can identify PAL/NTSC roms. I use it in my emu and it's got info on about 6000 roms. Nestopia is GPLed, so I guess you're free to use the database as long as your emu is GPLed too <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Just check Nestopia's source for the database structure, it's pretty straightforward.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Wed Mar 16, 2005 1:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I do a simple method of scanning the filename for "(E)".  If I find it, I assume PAL, if not I assume NTSC.  It works pretty well for most games.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kinopio</b> [ Thu Mar 17, 2005 6:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for the tips guys.
<br />
<br />I think I will use Disch's way. It is simple and should work for most ROMS if you use a ROM-renamer, which you should.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Great Hierophant</b> [ Thu Mar 17, 2005 9:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Slightly off the subject, but for Atari 2600 roms, some of which were mislabeled in Good2600, what I would do is download the ROM to a cuttlecart and try it out on a real 2600 and a real NTSC TV.  If the screen rolled, it was PAL.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Thu Mar 17, 2005 12:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I actually got the (E) idea from Parasyte on IRC -- I think he added it to FCEUd or something back in the day.  It stuck with me because it's so simple, yet effective.
<br />
<br />A big database will be more complete -- although it seems like a ridiculous amount of work for simple PAL detection.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Mar 17, 2005 6:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Great Hierophant wrote:</div><div class="quotecontent">Slightly off the subject, but for Atari 2600 roms, some of which were mislabeled in Good2600, what I would do is download the ROM to a cuttlecart and try it out on a real 2600 and a real NTSC TV.  If the screen rolled, it was PAL.</div>
<br />Or see if it generates more or fewer than 292 scanlines after stabilizing. More, and it's 50 Hz (nominally 322 lines). Fewer, and it's 60 Hz (nominally 262 lines). However, color system and vertical scan rate are somewhat independent, as much of Brazil uses the so-called "PAL-M" system, a 262-line 60 Hz signal with PAL color.
<br />
<br /><strong>Tossing out some detection ideas for NES...</strong>
<br />It would be possible to categorize an iNES ROM image as NTSC or PAL by observing its behavior.
<br />
<br /><strong>It's NTSC if</strong> it uses a mapper that no commercial European game used. Apart from a few unlicensed games, Nintendo manufactured all 72-pin NES games, and Nintendo limited the selection of mappers available in Game Paks carrying the official Seal. Crazy mappers show up most commonly on carts for Famicom.
<br />
<br /><strong>It's NTSC if</strong> it writes to sound registers on the cart. To my knowledge, no official PAL console has the wiring for Famicom cart sound.
<br />
<br /><strong>It's PAL if</strong> video updates in the scrolling engine routinely overflow the 21-line limit and don't turn video back on before the end of the dummy scanline before the video starts. Asterix is a culprit here.
<br />
<br /><strong>It's NTSC if</strong> it uses timed code to write to the video registers every 113.667 cycles; <strong>it's PAL if</strong> it does so every 106.562 cycles.
<br />
<br />Another idea that I don't know how to exploit is to go by pitch. PAL ROMs will typically sound one semitone sharper than normal on an NTSC NES.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Mar 19, 2005 12:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><strong>It's NTSC if</strong> it uses a mapper that no commercial European game used. Apart from a few unlicensed games, Nintendo manufactured all 72-pin NES games, and Nintendo limited the selection of mappers available in Game Paks carrying the official Seal. Crazy mappers show up most commonly on carts for Famicom.</div>
<br />Just remember that Batman - Return of the Jocker has been released in Europe and is using Sunsfoft mapper, so don't include it in the "crazy mappers" section. I don't have a card, but I've heard it was released here. As far I know, it's the only one who don't use discrete logic or MMC mapper in europe.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Great Hierophant</b> [ Mon Mar 21, 2005 6:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Odd boards generally weren't the problem, just anything that used a battery (RPGs and strategy games) seemed to get a major snub.  Only nine games had a battery in Europe, a mix of SNROM, SKROM and TKROM boards:  The Legend of Zelda, Zelda II: The Adventure of Link, Kirby's Adventure, Wario's Woods, Shadowgate, Deja Vu, Maniac Mansion and Elite.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Mar 23, 2005 7:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This makes 8 games. Personally, the only game with a battery I have is Legend of Zelda. Like usual, good NES games (Final Fantasy, Crystalis, Dragon Warrior series, etc...) were only released in north America and VERY good NES games (Final Fantasy 2, Final Fantasy 3, Just Breed, Fire Emblem, etc...) were released only in Japan.
<br />Scince some battery-backed games and some odd boards games were relased in europe, I don't think this could be a criter to detect PAL games, I think the (E) think is simpler and should work fine. Just something like "retrocoders.net" don't have an (E) in it, but it shows an error message if this is on NTSC timing.
<br />Ah, yes, about sound pitch I noticed that sound effect on MegaMan 1 &amp; 2 in PAL version are very glichy, this is because they transposed the music (writing lower valules to the pitch registers) and sound effects that goes at very high freqs become to very low freqs, so when you shot a ball, it make and awfull noise begining high and eventually become low.
<br />Many games didn't change anything to their sound programm, so it sounds slower and a semitone lower.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Nessie</b> [ Wed Mar 23, 2005 12:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Aren't some Chinese games PAL too? Maybe I'm completely wrong, but I think China's got both NTSC and PAL TVs.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
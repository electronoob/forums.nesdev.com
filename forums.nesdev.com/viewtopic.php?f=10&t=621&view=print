<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - 8 by 16 sprites</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">8 by 16 sprites</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=621">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=621</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Sun Oct 02, 2005 2:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>8 by 16 sprites</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Okay, I have loaded an 8 by 16 sprite on my game, and instead of being like 8 pixels vertical, and 16 horizontal, it was the other way around! any explanation?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Sun Oct 02, 2005 2:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's because it's 8x16... not 16x8  (X always first)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Oct 02, 2005 2:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sprites on the NES are always 8 pixels across. The 8x16 bit tells whether sprites are 8 pixels down or 16 pixels down.
<br />
<br />Did any arcade games based on the NES chipset use a vertical monitor?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Sun Oct 02, 2005 3:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh, I always thought it was the other way. Like in Final Fantasy, I always thought the character's were made up of 2 16x8 sprites. Does that game use 8x16 sprites? if you open the game up in like yy-chr, you see there's the top half of the character, and right next to it, there's the bottom half. and I was wondering how they did that, do you know?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Sun Oct 02, 2005 3:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Final Fantasy uses 8x8 sprites.  How it's arranged on the pattern tables doesn't matter when it comes to how it's displayed on the screen.  With 8x8 sprites you can arrange them anyway you want on the screen.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Mon Oct 03, 2005 8:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Final Fantasy does 16x8 sprites in software, not in hardware.
<br />However, if you plan to use 8x16 sprites in your games, remember that the bottom tile should always go right after the upper tile, and that usually made the content of the pattern table unundertandible for an human unless you're using Tile Molester that can show directly 8x16 tiles.
<br />Also, the LSB of the sprite tile # is replaced by the pattern table selection when using 8x16 sprites, and the actual tile # is always an even number for the top tile and the odd number just after this one on the bottom tile. (this is pooprly doccumented)
<br />
<br />This has the advantage of be able to use both pattern tables for your sprite data. If you don't, use 8x8 sprites.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Tue Oct 04, 2005 6:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Okay, this is kind of newbie, but I have a very important question. How do you use CHR RAM? I couldn't ever find any info on it. I need to find out because Bregalad and I have a HUGE project, and I NEED to use CHR RAM, for graphics effects and stuff. Like, where would you put it? Where would you org it? or what would you do to make CHR RAM? I'm very confused...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Tue Oct 04, 2005 7:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Firstly... make sure you use a mapper/board which supports CHR-RAM.  AFAIK, mapper 0 does <strong>not</strong> (at least... Kevtris' NROM/RROM docs only mention CHR-ROM.. never CHR-RAM)
<br />
<br />Then, the CHR data can be stored anywhere in PRG -- you can .org it anywhere just like any other kind of data in your game (like level data, or object data, or whatever).  To load the graphics, you must write each tile to PPU memory via $2007 (ppu$0000-$0FFF is the left pattern table, ppu$1000-$1FFF is the right pattern table).  Each 8x8 tile is 16 bytes... so to set a single tile of CHR-RAM you will need to make 16 writes to $2007

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Tue Oct 04, 2005 8:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh man... That's going to be an annoying tedius ROM hog... Yeah, Bregalad and I are using MMC1, so I think it will be okay. Man, that sucks, though. You have to write $2007? that's strange. But thanks for the info, really helped.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Tue Oct 04, 2005 8:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Wait... you write each tile VIA $2007? How does that work?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Tue Oct 04, 2005 8:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />OH! yeah, I was forgetting to write to $2006! I wrote 0f and ff to 2006, and it ended up on pattern table $1000, any clue? Oh, oops, it should probably be at 00 00. Yeah, probably not a good idea to triple post, sorry.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Tue Oct 04, 2005 9:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Now for my fourth post... I was wondering if there was a quick way to do CHR RAM? Like could you do it db style? Because I tried to do it like this, just a rough idea:
<br />
<br />ldy #16 ; just one 8x8 tile for now
<br />ldx #0
<br />
<br />charload:
<br />lda chardata,x ;chardata being well... the character data.
<br />sta $2007
<br />inx
<br />dey
<br />bne charload
<br />
<br />I did it like that, but the data was all funky, and instead of diplaying an exclamation mark in the pattern table, it displayed a tile that was half white, half black. My pallete is greyscale from black to white. Any ideas about what to do? or do I have to do a ROM hog 3000k asm file with 4096 writes to 1 pattern table?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Tue Oct 04, 2005 10:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Each tile is 16 bytes... so when you set the address to $0FFF before... that wrote one byte of the tile to the left pattern table, and the other 15 to the right pattern table.  The actual offset in PPU space of each tile is the tile number * 16 (or tile number left shift 4).  Therefore, tile $53 starts at address $0530 for the left pattern table and $1530 for the right pattern table.  If you want to change the whole tile you must write all 16 bytes of the CHR data (each row = 2 bytes... one for each bitplane.  2 bitplanes * 8 rows = 16 bytes)
<br />
<br />
<br />You example code looks like it could have worked if the PPU address was set properly... or it could have not worked if you set the address wrong.  If you set the address to something weird like $xxx7, then it'll be off... which will cause graphics to get weird.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Tue Oct 04, 2005 10:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't know what I did wrong. I have exactly that code, and I set up the PPU like so:
<br />
<br />lda #%000001110
<br />sta $2001
<br />
<br />and there's nothing in $2000. Any suggestions?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Tue Oct 04, 2005 10:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are you doing this in NMI?  if you have BG enabled you must have all this drawing done before VBlank ends.  Otherwise... turn the PPU off and leave it off until your drawing is complete, then turn it back on next VBlank.
<br />
<br />What PPU address did you set?  You didn't put that part in your code above.  You <em>are</em> setting the PPU address with $2006 first... right?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=5428" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2009-07-23T14:07:07-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=5428</id>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2009-07-23T14:07:07-07:00</updated>
<published>2009-07-23T14:07:07-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49137#p49137</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49137#p49137"/>
<title type="html"><![CDATA[Have more than one RTS in a function = ok coding?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49137#p49137"><![CDATA[
There have been times where I've put the RTS before the function, mostly due to branch length.  Then it's easy to get tempted to use the RTS of the function before it (why have 2 RTS's in a row?), and saving a byte makes some uglier looking code.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Thu Jul 23, 2009 2:07 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2009-07-23T07:38:42-07:00</updated>
<published>2009-07-23T07:38:42-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49133#p49133</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49133#p49133"/>
<title type="html"><![CDATA[Have more than one RTS in a function = ok coding?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49133#p49133"><![CDATA[
I have used more than one RTS instruction in a function in the past because it was more convenient than jumping over the whole function.<br /><br />I also had problems because I was using the stack for temporary values and forgot about this, so the RTS would fail. Of course this error is not exclusive to functions with multiple RTSs, you always have to whatch out for this.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Thu Jul 23, 2009 7:38 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Banshaku]]></name></author>
<updated>2009-07-23T05:23:20-07:00</updated>
<published>2009-07-23T05:23:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49131#p49131</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49131#p49131"/>
<title type="html"><![CDATA[Have more than one RTS in a function = ok coding?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49131#p49131"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />Absolutely okay.<br />Just remember that every exit point must pop any pushed registers, since the same stack is used for pushed memory and return addresses.<br /></div><br /><br />That's what I thought. Just wanted to make sure that there is no other "gotcha" than forgetting to pop a register or if it was bad form or something. In some programming language, some people don't like if you exit anywhere in the function since it's can make it harder to understand.<br /><br />Good.  That will reduce the function by a few cycle without that jump instruction. Thanks everyone for the answer.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3559">Banshaku</a> — Thu Jul 23, 2009 5:23 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-07-23T05:04:38-07:00</updated>
<published>2009-07-23T05:04:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49130#p49130</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49130#p49130"/>
<title type="html"><![CDATA[Have more than one RTS in a function = ok coding?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49130#p49130"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />Occasionally, people will write code which programmatically creates a return address on the stack, then returns to that address, but why bother if there's already an indirect jump instruction?<br /></div><br />Indirect jump:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">  lda jumptable+1,x<br />  sta $01<br />  lda jumptable,x<br />  sta $00<br />  jmp &#40;$0000&#41;</div><br />RTS trick:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">  lda jumptable+1,x<br />  pha<br />  lda jumptable,x<br />  pha<br />  rts</div> <br />The RTS trick saves four/six bytes of ROM and uses only stack memory, not statically allocated main memory. Some programs have a lot of stack to spare, not so much zero page.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Thu Jul 23, 2009 5:04 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2009-07-23T04:38:55-07:00</updated>
<published>2009-07-23T04:38:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49129#p49129</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49129#p49129"/>
<title type="html"><![CDATA[Have more than one RTS in a function = ok coding?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49129#p49129"><![CDATA[
Absolutely okay.<br />Just remember that every exit point must pop any pushed registers, since the same stack is used for pushed memory and return addresses.  <br /><br />Occasionally, people will write code which programmatically creates a return address on the stack, then returns to that address, but why bother if there's already an indirect jump instruction?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Thu Jul 23, 2009 4:38 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Banshaku]]></name></author>
<updated>2009-07-22T23:34:55-07:00</updated>
<published>2009-07-22T23:34:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49127#p49127</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49127#p49127"/>
<title type="html"><![CDATA[Have more than one RTS in a function = ok coding?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5428&amp;p=49127#p49127"><![CDATA[
Since it such a basic question, I decided to post it in the newbie forum.<br /><br />I have a function that have more than one exit point. Instead of jumping at the end of the function on a specific label and do a RTS, is it good form to use RTS at all exit point instead?  This "could" reduce the readability put since the code is always between .proc /.endproc, I guess that you can figure out all of them if documented well.<br /><br />Thanks for any comments.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3559">Banshaku</a> — Wed Jul 22, 2009 11:34 pm</p><hr />
]]></content>
</entry>
</feed>
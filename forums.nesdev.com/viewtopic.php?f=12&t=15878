<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Some basic questions...</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Some basic questions..." href="http://forums.nesdev.com/feed.php?f=12&amp;t=15878" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=15878';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:30 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />

	<div class="forumrules">
		
			<h3>Forum rules</h3><br />
			Related:<br /><ul><li>For making cartridges of your Super NES games, see <a href="http://forums.nesdev.com/viewforum.php?f=28" class="postlink">Reproduction</a>.</li></ul>
		
	</div>

	<br clear="all" />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=15878">Some basic questions...</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=15878"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>4</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 56 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=15878&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=15878&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=15878&amp;start=45">4</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=15878&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=15878&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=15878&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=15878&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p194640"></a>
				<b class="postauthor">Señor Ventura</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194640">Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194640#p194640"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 4:41 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7770_1471728828.jpg" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Aug 20, 2016 3:58 am<br /><b>Posts:</b> 52
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hello.<br /><br />I always taken for granted some facts about the snes hardware, but, analyzing, i've found some errors in my perceptions... so, i have a handful of quick questions to solve it.<br /><br /><br /><span style="font-size: 150%; line-height: normal"><strong>1º)</strong></span> Why the 65818 delays 8 cycles to transfer 1 Byte?... i think that the logic is writting a lenght word of 8 bits in a single cycle, but i don't know if it is fault of the WRAM, SRAM, VRAM...<br /><br /><br /><span style="font-size: 150%; line-height: normal"><strong>2º)</strong></span> The next thing is correct?:<br />NTSC: 1364 cycles per scanline<br />PAL: 1455 cycles per scanline<br /><br />NTSC Bytes per scanline: 1364/8= 170.5 Bytes<br />PAL Bytes per scanline: 1455/8= 181.8 Bytes<br /><br />NTSC Bytes per frame: (1364*38)/8= 6479 Bytes or 6.32KB.<br />PAL(224 lines) Bytes per frame: (1455*88)/8= 16005 Bytes or 15.6KB.<br />PAL(239 lines) Bytes per frame: (1455*73)/8= 13276 Bytes or 12.9 KB.<br /><br /><br /><span style="font-size: 150%; line-height: normal"><strong>3º)</strong></span> During the drawing of an scanline, there could be breaks in the middle during... 4 cycles?... 40 cycles?... It is due to memory latencys?<br /><br /><br /><span style="font-size: 150%; line-height: normal"><strong>4º)</strong></span> The 65816 has exactly 325.996 cycles in an entire frame... Is that correct?.<br /><br /><br /><span style="font-size: 150%; line-height: normal"><strong>5º)</strong></span> Abut the sprites... There are sprites of 32x16, 16x32, 16x8, and 8x16 pixels?... if the answer is &quot;yes&quot;, Can i mix them if i choose the configuration of 32x32 and 16x16?.<br /><br /><br /><span style="font-size: 150%; line-height: normal"><strong>6º)</strong></span> In order to update tiles, There are some differences between &quot;tiles of sprites&quot; and &quot;tiles of layers&quot; in terms of agility of drawing? (all the things about the OAM table may can influence something, while the tile layers could write in VRAM directly).<br /><br /><br /><span style="font-size: 150%; line-height: normal"><strong>7º)</strong></span> Is theoretically possible update all the tiles you receive in a frame?. For example: I transfer 180 tiles during a frame, and at the end of that, when the frame buffer shall conform the image, all that tiles can be changed in the picture.<br /><br /><br /><span style="font-size: 150%; line-height: normal"><strong>8º)</strong></span> The 4 players mode of the Street Racer... Really that mode 7 working in four &quot;screens&quot; doesn't have any impact to the perfomance of the PPU's?, or it can work due to an surplus of power.<br />I mean... There is 4 rotating layers at 60fps processed separately four times every frame?, or it doesn't works like that.<br /><br /><br /><br />I think this is all... thanks in advance! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7770"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p194644"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194644">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194644#p194644"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 5:46 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">1. Some (3 clocks) is how long it takes for the 65816 to put an address on the address bus when requesting a read or write. The rest (3 or 5 clocks) accounts for the fact that ROM and DRAM take time for the signals to propagate through their control circuitry. The CPU has to wait for this to happen.<br /><br />2. Before I can answer, I'd like to know where you got the 1455 figure.<br /><br />3.The 40 clock delay compensates for the fact that WRAM (work RAM) is DRAM (dynamic RAM), which is made of capacitors. If a word of DRAM isn't read often, it's value will decay and eventually become unreadable. So the CPU pauses for some time out of each scanline to refresh (read and write back) words of WRAM.<br /><br />4. Do you mean during active picture or during the whole frame (active picture plus vertical blanking)?<br /><br />5. The S-PPU allows only square sprites: 8x8, 16x16, 32x32, or 64x64, and sprites of two such square sizes can be used at once.<br /><br />6. Sprites are always 4 bits per pixel, and a single scene can use only 16 KiB (512 distinct tiles) of video memory for sprite tiles. Backgrounds can be 2bpp, 4bpp, or 8bpp, depending on the mode.<br /><br />7. There's a limit on how much data your program can upload to VRAM during one vblank. For NTSC, this is about 5 KiB, or about 160 tiles at 4bpp. But yes, if you upload several tiles, the next frame's display will immediately reflect the upload.<br /><br /><br />Other users can add detail or answers to questions that I chose not to answer for the moment.<br /><br />Based on various things I saw while reading your post, I guess that your native language is something other than English. Am I correct? Which language is it? Based on your username and nothing else, I guessed Spanish. Am I right?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p194647"></a>
				<b class="postauthor">Señor Ventura</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194647">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194647#p194647"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 9:24 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7770_1471728828.jpg" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Aug 20, 2016 3:58 am<br /><b>Posts:</b> 52
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">2. Before I can answer, I'd like to know where you got the 1455 figure.</div><br /><br />Sorry, it were wrong.<br /><br />Assuming that you have 325996 cycles, you obtain 1455 cycles per line in PAL dividing 325996/224... but you have 312 lines, so it doesn't happens like that in this way, right?.<br /><br />If you divide all the cycles, obtaining 1455, in 224 lines of resolution then you really would get the extra 88 lines multiplying by 0... something would be wrong here ^^u<br /><br />And all of this without having in mind that the concept is wrong too.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">4. Do you mean during active picture or during the whole frame (active picture plus vertical blanking)?</div><br /><br />Could be almost the same thing?.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">7. There's a limit on how much data your program can upload to VRAM during one vblank. For NTSC, this is about 5 KiB, or about 160 tiles at 4bpp. But yes, if you upload several tiles, the next frame's display will immediately reflect the upload.</div><br /><br />Based in a bandwidth of 5,72KB, around 183 tiles at 4bpp, 366 tiles at 2bpp, and 91 tiles at 8bpp.<br /><br />The thing then is that all the tiles transferred are &quot;active&quot; inmediately, ok. It's logic, being a system inaccessible during the active display... in megadrive instead, it puts problems, and i've heard sometimes that transfer tiles don't guarantee to be able to update with security from a certain number of tiles (when you are close to the limit of the bandwidth).<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Based on various things I saw while reading your post, I guess that your native language is something other than English. Am I correct? Which language is it? Based on your username and nothing else, I guessed Spanish. Am I right?</div><br /><br />My grammar betryes me xD<br /><br />Yes, i'm spanish <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br />Thank you indeed!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7770"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p194651"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194651">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194651#p194651"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 10:12 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Señor Ventura wrote:</div><div class="quotecontent">Assuming that you have 325996 cycles, you obtain 1455 cycles per line in PAL dividing 325996/224... but you have 312 lines, so it doesn't happens like that in this way, right?.</div><br />Correct. There are 1364 master clocks per line in both TV systems. Multiply this by 262 or 312 to get master clocks per frame. (You lose two master clocks per frame on NTSC because of chroma realignment.)<br /><br /><div class="quotetitle">Señor Ventura wrote:</div><div class="quotecontent"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">4. Do you mean during active picture or during the whole frame (active picture plus vertical blanking)?</div><br />Could be almost the same thing?.</div><br />Not quite. Active picture is usually 224 out of 262 lines on NTSC or 240 out of 312 lines on PAL. There's a big difference.<br /><br /><div class="quotetitle">Señor Ventura wrote:</div><div class="quotecontent">The thing then is that all the tiles transferred are &quot;active&quot; inmediately, ok. It's logic, being a system inaccessible during the active display... in megadrive instead, it puts problems, and i've heard sometimes that transfer tiles don't guarantee to be able to update with security from a certain number of tiles (when you are close to the limit of the bandwidth).</div><br />DMA bandwidth during vertical blanking for both systems is similar. Their behavior differs during active picture: the Mega Drive VDP has a FIFO (first in, first out) queue that stores multiple writes and executes them during downtime in the scanline, whereas the Super NES S-PPU does not. Both can read 32 bytes of VRAM per 16 horizontal pixels, but what these reads correspond to differs because the S-PPU stores column scroll offsets in VRAM or has a third layer if they're not used, while the VDP stores half of the sprite display list in VRAM.<br /><br />For each 16 pixels of the active portion of each line, both read 4 bytes of layer 1 nametables, 8 bytes of two layer 1 tiles, 4 bytes of layer 2 nametables, and 8 bytes of two layer 2 tiles. This leaves eight bytes, which the systems split up differently:<br /><br /><ul><li>Mega Drive: Sprite tiles, VRAM refresh, and the write FIFO </li><li>Super NES mode 1 (no column scrolling): 4 bytes of layer 3 nametables, and 4 bytes of layer 3 tiles </li><li>Super NES mode 2 (column scrolling): 8 bytes of VSRAM offsets</li></ul></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p194670"></a>
				<b class="postauthor">Señor Ventura</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194670">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194670#p194670"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 12:40 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7770_1471728828.jpg" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Aug 20, 2016 3:58 am<br /><b>Posts:</b> 52
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Correct. There are 1364 master clocks per line in both TV systems. Multiply this by 262 or 312 to get master clocks per frame. (You lose two master clocks per frame on NTSC because of chroma realignment.)</div><br /><br />Then, you have 38 lines free, and 224 lines inside of the active resolution loosing 2 cycles each.<br /><br />So:<br />38*1364= 51832 cycles.<br />224*1362= 305088 cycles.<br />In total= <strong>356920 CPU cycles.</strong><br /><br />Is right?<br /><br />Then, from the 38 lines of non active resolution it can obtain 170.5 Bytes by each one, and from the 224 of the active resolution it can obtain 170.25 Bytes by each one (but only when those scanlines are removed). <br /><br />But still happens that there are 38 lines that multiplied by 170.5 Bytes gives 6,32KB (6479 Bytes), and it should be wrong, cause the total bandwidth is known that is 5,72KB... Why this occurs?.<br /><br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Not quite. Active picture is usually 224 out of 262 lines on NTSC or 240 out of 312 lines on PAL. There's a big difference.</div><br /><br />Right, sorry, i was thinking in other way xD<br /><br />I meaned the whole frame, the cycles that the cpu has to do things... but that question should be answered now ^^<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">DMA bandwidth during vertical blanking for both systems is similar. Their behavior differs during active picture: the Mega Drive VDP has a FIFO (first in, first out) queue that stores multiple writes and executes them during downtime in the scanline, whereas the Super NES S-PPU does not. Both can read 32 bytes of VRAM per 16 horizontal pixels, but what these reads correspond to differs because the S-PPU stores column scroll offsets in VRAM or has a third layer if they're not used, while the VDP stores half of the sprite display list in VRAM.<br /><br />For each 16 pixels of the active portion of each line, both read 4 bytes of layer 1 nametables, 8 bytes of two layer 1 tiles, 4 bytes of layer 2 nametables, and 8 bytes of two layer 2 tiles. This leaves eight bytes, which the systems split up differently:<br /><br /><ul><li>Mega Drive: Sprite tiles, VRAM refresh, and the write FIFO </li><li>Super NES mode 1 (no column scrolling): 4 bytes of layer 3 nametables, and 4 bytes of layer 3 tiles </li><li>Super NES mode 2 (column scrolling): 8 bytes of VSRAM offsets</li></ul></div><br /><br />I'm still processing... xD<br /><br />So, during the active display the two both read nametables and tiles in the same way, but with the surplus of memory both do different things:<br />-Megadrive check its VRAM for frame buffering, and the pertinent writtings.<br />-SNES read aditional data for modes 1 and 2.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7770"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p194672"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194672">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194672#p194672"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 12:53 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 7391<br /><b>Location:</b> Seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Señor Ventura wrote:</div><div class="quotecontent">38*1364= 51832 cycles.<br />224*1362= 305088 cycles.<br /></div>Not <em>per scanline</em>; per <em>frame</em>.<br /><br />Every second vertical retrace, one scanline (at the end of drawing) is missing one pixel, or 4 master clock cycles. On average, this means that NTSC has 262*1364-2 master cycles per frame</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p194676"></a>
				<b class="postauthor">Nicole</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194676">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194676#p194676"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 2:13 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 27, 2016 7:56 pm<br /><b>Posts:</b> 161
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">An important distinction here, which I'm not sure if you're aware of, is the difference between <strong>master cycles</strong> and <strong>CPU cycles</strong>.<br /><br />The numbers you've been talking about are master cycles, not CPU cycles. For NTSC, these cycles run on a ~21.477 MHz clock.<br /><br />However, CPU cycles are different. Depending on the area of memory accessed, one CPU cycle = 6 master cycles (~3.58 MHz), 8 master cycles (~2.68 MHz), or for joypad ports, 12 master cycles (~1.79 MHz). CPU cycles that don't involve memory are always 6 master cycles.<br /><br />So, when you ask why the 65816 takes 8 cycles to read or write a byte, this isn't quite accurate. The 65816 takes <em>one CPU cycle</em> to read or write a byte, and this is sometimes equivalent to 8 master cycles.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7476"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p194682"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194682">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194682#p194682"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 3:38 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Señor Ventura wrote:</div><div class="quotecontent">Abut the sprites... There are sprites of 32x16, 16x32, 16x8, and 8x16 pixels?... if the answer is &quot;yes&quot;, Can i mix them if i choose the configuration of 32x32 and 16x16?.</div><br />No, but tepples wasn't entirely correct either.  The SNES does have a couple of undocumented sprite size settings that allow for non-square sprites.  Setting the top three bits of OBSEL to 110 gets you 16x32 and 32x64 sprites.  Setting them to 111 gets you 16x32 and 32x32 sprites.<br /><br />Unfortunately, according to <a href="https://wiki.superfamicom.org/snes/show/Sprites" class="postlink">superfamicom.org</a>, vertical flipping doesn't work properly for non-square sprites, as each half flips separately.  So you have to be careful when using these settings.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">In order to update tiles, There are some differences between &quot;tiles of sprites&quot; and &quot;tiles of layers&quot; in terms of agility of drawing? (all the things about the OAM table may can influence something, while the tile layers could write in VRAM directly).</div><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Is theoretically possible update all the tiles you receive in a frame?. For example: I transfer 180 tiles during a frame, and at the end of that, when the frame buffer shall conform the image, all that tiles can be changed in the picture.</div><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The 4 players mode of the Street Racer... Really that mode 7 working in four &quot;screens&quot; doesn't have any impact to the perfomance of the PPU's?, or it can work due to an surplus of power.<br />I mean... There is 4 rotating layers at 60fps processed separately four times every frame?, or it doesn't works like that.</div><br />It sounds like you're under the impression that the SNES has a framebuffer that the PPU draws into.  That's wrong.  The PPU <em>reads</em> data from VRAM (based on register settings and OAM) and writes directly to the TV screen.  It never writes to VRAM.<br /><br />The closest thing to a framebuffer is the line buffer used for sprites, which are read from VRAM and composited during HBlank so they can be combined with the other layers during the active line in which they appear.  (OAM is read during active display, and the results are used during the subsequent HBlank and displayed on the next line down.  This is why the screen starts on line 1 - line 0 is used to read OAM for the first actual active display line.)  The 34-tile limit per scanline is simply due to the fact that the PPU can't load more than that during HBlank, which is why the relevant flag in STAT77 is called Time Over.<br /><br />When you send a tile to VRAM, you are altering the data the PPU sends to the TV when it reads that memory area.  So naturally it updates right away.<br /><br />Mode 7 is the same - the PPU just takes the current scroll position, origin and transform matrix (all of which are set by the CPU) and uses them to look up tiles and pixels in VRAM and output them to the TV.  Since the transform is affine, you can't do perspective this way, so developers used HDMA to automatically change the Mode 7 parameters after every scanline.  Four layers of Mode 7 in perspective might be a somewhat greater load on the CPU (though not necessarily all that much because the number of scanlines is the same or lower, and the bulk of the work is computing transform matrices for every line), but the PPU doesn't care because Mode 7, like any other BG mode, is a constant-load-per-pixel operation regardless of what the CPU is doing to the input parameters.<br /><br /><div class="quotetitle">Señor Ventura wrote:</div><div class="quotecontent">Then, from the 38 lines of non active resolution it can obtain 170.5 Bytes by each one</div><br />Nope.  The DMA unit pauses with the rest of the CPU-side system for DRAM refresh, which eats 40 master clocks every line without fail.  You only get 165.5 bytes per line (and it's the same in PAL).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">the total bandwidth is known that is 5,72KB...</div><br />No.  Who told you that?  Theoretically, you should be able to fit about 6289 bytes if you completely fill VBlank with a single massive DMA, carefully timed to start right at the beginning of VBlank.  The catch is that you usually can't do that, so the available bandwidth is generally a bit lower.<br /><br />If you fully update CGRAM and OAM every frame, then subtracting that from the total gets you around 5 KB per frame, or less if you have a bunch of maneuvering and a lot of little transfers to do.<br /><br />You can extend VBlank in one or both directions using forced blank if you need more time, but this will result in black bars at the top and/or bottom of the screen - you can see this in games like Star Fox (which also has black bars at the sides to reduce fillrate requirements) and Yoshi's Island (which doesn't), not to mention Super Mario Kart.  In fact, as far as I recall every Super FX game <em>and</em> every Capcom fighter or beat-em-up does this.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Active picture is usually 224 out of 262 lines on NTSC or 240 out of 312 lines on PAL. There's a big difference.</div><br />Technically it's 224 lines if the overscan bit in SETINI is clear, and 239 lines if it's set.  I note the use of the term &quot;usually&quot;, which presumably refers to the fact that 224 is preferable in NTSC (more DMA bandwidth and you can't see the extra lines anyway) and 239 is preferable in PAL (you <em>can</em> see the extra lines, and DMA bandwidth isn't as restrictive because of the longer VBlank).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p194696"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194696">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194696#p194696"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 30, 2017 5:44 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Nicole wrote:</div><div class="quotecontent">However, CPU cycles are different. Depending on the area of memory accessed, one CPU cycle = 6 master cycles (~3.58 MHz), 8 master cycles (~2.68 MHz), or for joypad ports, 12 master cycles (~1.79 MHz). CPU cycles that don't involve memory are always 6 master cycles.</div><br />Compare to the Mega Drive's 68000 CPU, which nominally runs at 315÷88×15÷7 = 7.67 million T-states per second, but in practice runs at one-fourth that because of how long it takes to read or write memory. The Z80 and LR35902 (Game Boy CPU) have a similar T-state structure.<br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">I note the use of the term &quot;usually&quot;, which presumably refers to the fact that 224 is preferable in NTSC</div><br />That's what I meant.<br /><br />If you want even more video memory bandwidth on a Super NES, you can use forced blank to letterbox the visible area down to 168 (NTSC) or 200 (PAL) lines and then claim that your game is &quot;optimized for widescreen TVs&quot;. This gives (262-168)*161.5 = 15181 bytes per frame, enough to overwrite OAM, CGRAM, and almost the entirety of sprite VRAM. Then you can regain apparent resolution by using interlaced backgrounds.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p194750"></a>
				<b class="postauthor">Señor Ventura</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194750">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194750#p194750"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon May 01, 2017 9:49 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7770_1471728828.jpg" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Aug 20, 2016 3:58 am<br /><b>Posts:</b> 52
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thank you all for the answers! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />I have one question more, and i can't find how to solve it using google...<br /><br />Can i divide the screen vertically in three sections, to get active scanlines with 144 pixels of width resolution? (the red one in the image):<br /><br /><img src="http://oi65.tinypic.com/23j0mq1.jpg" alt="Image" /><br /><br /><br />That is to say, to keep two portions of the screen totally deactivate, and so, It could be possible to gain some bandwidth if i proceed like that?.<br />I mean... if you deactivate horizontal scanlines you gain bandwidth, but, What if the scanline is shorter like in the image?.<br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Not <em>per scanline</em>; per <em>frame</em>.<br /><br />Every second vertical retrace, one scanline (at the end of drawing) is missing one pixel, or 4 master clock cycles. On average, this means that NTSC has 262*1364-2 master cycles per frame</div><br /><br />Thank you, it's good for me to know too.<br /><br />P.D: Yes, per frame <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">Nicole wrote:</div><div class="quotecontent">An important distinction here, which I'm not sure if you're aware of, is the difference between <strong>master cycles</strong> and <strong>CPU cycles</strong>.<br /><br />The numbers you've been talking about are master cycles, not CPU cycles. For NTSC, these cycles run on a ~21.477 MHz clock.<br /><br />However, CPU cycles are different. Depending on the area of memory accessed, one CPU cycle = 6 master cycles (~3.58 MHz), 8 master cycles (~2.68 MHz), or for joypad ports, 12 master cycles (~1.79 MHz). CPU cycles that don't involve memory are always 6 master cycles.<br /><br />So, when you ask why the 65816 takes 8 cycles to read or write a byte, this isn't quite accurate. The 65816 takes <em>one CPU cycle</em> to read or write a byte, and this is sometimes equivalent to 8 master cycles.</div><br /><br />This is so important, thank you... I was already saying to myself, something wasn't having all the sense.<br /><br />The thing is that effectively, with every master cycle of the cpu, the PPU's are doing their cycles meantinme. When the CPU take a cycle internally, the PPU's are doing 6 cycles of an scnaline drawing... when the CPU writes in the WRAM, the PPU's are doing 8 cycles of an scanline drawing... and when the CPU communicates with the joypad, the PPU's are doing 12 cycles of an scanline drawing.<br /><br />That is correct?.<br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">No, but tepples wasn't entirely correct either.  The SNES does have a couple of undocumented sprite size settings that allow for non-square sprites.  Setting the top three bits of OBSEL to 110 gets you 16x32 and 32x64 sprites.  Setting them to 111 gets you 16x32 and 32x32 sprites.<br /><br />Unfortunately, according to <a href="https://wiki.superfamicom.org/snes/show/Sprites" class="postlink">superfamicom.org</a>, vertical flipping doesn't work properly for non-square sprites, as each half flips separately.  So you have to be careful when using these settings.</div><br /><br />Sounds complicated. I keep it, but for later, better ^^<br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">It sounds like you're under the impression that the SNES has a framebuffer that the PPU draws into.  That's wrong.  The PPU <em>reads</em> data from VRAM (based on register settings and OAM) and writes directly to the TV screen.  It never writes to VRAM.<br /><br />The closest thing to a framebuffer is the line buffer used for sprites, which are read from VRAM and composited during HBlank so they can be combined with the other layers during the active line in which they appear.  (OAM is read during active display, and the results are used during the subsequent HBlank and displayed on the next line down.  This is why the screen starts on line 1 - line 0 is used to read OAM for the first actual active display line.)  The 34-tile limit per scanline is simply due to the fact that the PPU can't load more than that during HBlank, which is why the relevant flag in STAT77 is called Time Over.<br /><br />When you send a tile to VRAM, you are altering the data the PPU sends to the TV when it reads that memory area.  So naturally it updates right away.</div><br /><br />So, at the beginning of the active display the VRAM send the scanlines to the TV, but this is what an frame buffer does, but without areas to write, all the pool data you send to it, it will be behave like an frame buffer... may be by that the VRAM is closed to receive data during the active display.<br /><br />I mean, it is not a frame buffer, but is mistakable.<br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">Mode 7 is the same - the PPU just takes the current scroll position, origin and transform matrix (all of which are set by the CPU) and uses them to look up tiles and pixels in VRAM and output them to the TV.  Since the transform is affine, you can't do perspective this way, so developers used HDMA to automatically change the Mode 7 parameters after every scanline.  Four layers of Mode 7 in perspective might be a somewhat greater load on the CPU (though not necessarily all that much because the number of scanlines is the same or lower, and the bulk of the work is computing transform matrices for every line), but the PPU doesn't care because Mode 7, like any other BG mode, is a constant-load-per-pixel operation regardless of what the CPU is doing to the input parameters.</div><br /><br />Why the cpu has extra load if the HDMA is drive with its own bus?.<br /><br />Then, the key is that only the number of scanline layers influences in the data volume that the cpu has to send through the HDMA for the transformation, right?<br /><br />So, at 4 players, the number of scanlines corresponding to an &quot;mode 7&quot; layer is bigger than during a normal play...<br /><br /><img src="https://i.ytimg.com/vi/j18y3sc3fIQ/hqdefault.jpg" alt="Image" /><br /><br /><img src="http://images.nintendolife.com/screenshots/31313/large.jpg" alt="Image" /><br /><br /><br />But, what if i do this per software... At 4 players the only thing that matters is the traffic data?.<br /><!-- m --><a class="postlink" href="https://www.youtube.com/watch?v=Tl3gKAobaTE">https://www.youtube.com/watch?v=Tl3gKAobaTE</a><!-- m --><br /><br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">No.  Who told you that?  Theoretically, you should be able to fit about 6289 bytes if you completely fill VBlank with a single massive DMA, carefully timed to start right at the beginning of VBlank.  The catch is that you usually can't do that, so the available bandwidth is generally a bit lower.</div><br /><br />Got it... better will be don't to think in anything more. 165.5 per scanline.<br /><br />At least, was a total surprise to see that the bandwidth is finally bigger that the expected... 6,14 KB.<br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">If you fully update CGRAM and OAM every frame, then subtracting that from the total gets you around 5 KB per frame, or less if you have a bunch of maneuvering and a lot of little transfers to do.<br /><br />You can extend VBlank in one or both directions using forced blank if you need more time, but this will result in black bars at the top and/or bottom of the screen - you can see this in games like Star Fox (which also has black bars at the sides to reduce fillrate requirements) and Yoshi's Island (which doesn't), not to mention Super Mario Kart.  In fact, as far as I recall every Super FX game <em>and</em> every Capcom fighter or beat-em-up does this.</div><br /><br />Or do 30 frames per second... is a solution too...<br /><br />Films runs at 24, so... xD</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7770"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p194752"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194752">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194752#p194752"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon May 01, 2017 10:55 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">You can use a window to hide pixels outside a 144-pixel-wide strip. <em>Kirby Super Star</em> uses something similar to hide scrolling artifacts at the sides of the screen. But unlike hiding an entire scanline, hiding stretches of an individual scanline will not gain you any video memory bandwidth.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Why the cpu has extra load if the HDMA is drive with its own bus?.</div><br />DMA uses the CPU's address bus, the I/O address bus, and the data bus. HDMA pauses the CPU for a few cycles in order to borrow the use of the bus.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p194753"></a>
				<b class="postauthor">Señor Ventura</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194753">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194753#p194753"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon May 01, 2017 11:07 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7770_1471728828.jpg" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Aug 20, 2016 3:58 am<br /><b>Posts:</b> 52
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">You can use a window to hide pixels outside a 144-pixel-wide strip. <em>Kirby Super Star</em> uses something similar to hide scrolling artifacts at the sides of the screen. But unlike hiding an entire scanline, hiding stretches of an individual scanline will not gain you any video memory bandwidth.</div><br /><br />It was logicall. The only thing you gain is to fill more area every frame.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">DMA uses the CPU's address bus, the I/O address bus, and the data bus. HDMA pauses the CPU for a few cycles in order to borrow the use of the bus.</div><br /><br />I understood... is not due to cpu load but the more you use the HDMA, the more the cpu loses time to later work in another things remaining less time to the end of the frame.<br /><br />It must be something like that, i supose...<br /><br />Thank you!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7770"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p194784"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194784">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194784#p194784"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon May 01, 2017 4:22 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Señor Ventura wrote:</div><div class="quotecontent">So, at the beginning of the active display the VRAM send the scanlines to the TV</div><br />The sending happens continuously during active display, because it literally <em>is</em> active display.  The PPU is taking the raw data (register settings, OAM, tiles and maps in VRAM, and colours in CGRAM) and using it to generate a video signal.  That is, the PPU is in essence controlling the TV's electron beam in real time.  This is why the sprites and backgrounds work the way they do - the PPU has to generate each pixel just in time for the TV to illuminate the corresponding phosphors, so everything it does has to be constant-load.<br /><br />This is also why VRAM is locked during active display - the PPU has to read it continuously in order to generate pixels on time.  Any delays would show up as visual garbage or black areas on the screen.  You can in fact turn off rendering (force blank) so as to write to VRAM/OAM/CGRAM during what would normally be active display; this produces black output in the area of the screen that the electron beam is passing over during the forced blanking time, and it also prevents sprites from preloading and can thus glitch the OBJ layer for up to a scanline after rendering is turned back on.<br /><br />The SNES (along with the NES, Mega Drive, etc.) is very different from a framebuffer-based system.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I mean... if you deactivate horizontal scanlines you gain bandwidth, but, What if the scanline is shorter like in the image?</div><br />I would think you could use forced blank in an H-position-timed IRQ to do that, if forced blank frees VRAM quickly enough (I think it does, but I haven't tried it).  But since interrupts on the SNES can't happen with pixel-perfect positioning, mostly because individual CPU instructions take several pixels to execute and an IRQ won't start until the current instruction is finished, you'd probably want to also use windowing as tepples describes to straighten the edges, or else just map black tiles outside the desired display area.  And, obviously, you wouldn't be able to count on having the entire black area for DMA, because the timing inaccuracy of the interrupt would consume up to 16 pixels or so (depending on the code being interrupted and on whether mitigation measures were present in the IRQ code).<br /><br />And as I just mentioned, you would probably end up killing sprites entirely by doing this, since they don't load during forced blanking.<br /><br />Not to mention that H-IRQs eat CPU time for breakfast, especially if they contain any position stabilization code, because they happen 200+ times per frame...<br /><br />In short, it's probably possible, but it doesn't work nearly as well as trimming scanlines off the top and bottom.<br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">Why the cpu has extra load if the HDMA is drive with its own bus?.</div><br />Because unless the ROM contains ready-made coefficient lists for all possible viewing angles, the CPU has to calculate the transform matrix coefficients for every scanline in order to compile the HDMA tables for the next frame.<br /><br />Also, as tepples points out, the HDMA is <em>not</em> &quot;drive with its own bus&quot;; it's part of the CPU and hogs the main system bus entirely when operating.  It's much quicker than manual writes with the CPU, but just writing the transform matrix with HDMA still takes about 7% of a scanline, and if you need to write scroll or origin every line as well that goes up to about 10%.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Then, the key is that only the number of scanline layers influences in the data volume that the cpu has to send through the HDMA for the transformation, right?</div><br />If by &quot;scanline layers&quot; you mean scanlines during which the PPU is set to Mode 7 and displaying the perspective playfield, yes.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So, at 4 players, the number of scanlines corresponding to an &quot;mode 7&quot; layer is bigger than during a normal play...</div><br />Okay, perhaps I should have checked what single-player looked like in that game.  I was thinking of F-Zero, where the Mode 7 layer is most of the screen even in single-player mode...<br /><br />Yes, 4-player in Street Racer would take more CPU time to handle, even with pre-baked HDMA (which would have eaten quite a lot of ROM, so I doubt they did that).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But, what if i do this per software... At 4 players the only thing that matters is the traffic data?.<br /><!-- m --><a class="postlink" href="https://www.youtube.com/watch?v=Tl3gKAobaTE">https://www.youtube.com/watch?v=Tl3gKAobaTE</a><!-- m --></div><br />I have no idea what you mean by &quot;traffic data&quot;, but...<br /><br />The bulk of the CPU load in that case is rendering the playfield.  As you can see, it's only ~30 fps with big blocky pixels, and it doesn't cover nearly as much of the screen as F-Zero's playfield does.  I don't think a 4-player version of that would look good.<br /><br />Though ultimately it's pretty much the same situation as with real Mode 7, in that the number of players <em>as such</em> is largely irrelevant to the question of rendering load.  A flat, texture-mapped perspective layer is mathematically simple enough that the computational load is mostly proportional to the area of the screen that has to be rendered, rather than whether that area is divided into one, two, or four such layers - as long as there's only one layer per line, since computing the transform for a line is nontrivial and could be significant (I haven't done the math).  (Obviously running the rest of the game engine for four players is going to be more expensive than for just one.)<br /><br />Doing that in software on SNES seems like a dubious proposition.  The CPU is somewhat weaker than the Mega Drive (though not as much as the clock speed difference would seem to suggest), and the PPU can do it in hardware anyway.  The advantages, I suppose, would be the ability to do corner 4-player rather than pancake 4-player (you can't change Mode 7 parameters arbitrarily in the middle of a scanline without glitching, but if you're rendering to a framebuffer in software you can do whatever you want) and the ability to use maps larger than 1024x1024 (Mode 7 only allows one map, and you can't change where it is in VRAM; this is why Super Mario Kart was a go-kart game instead of a multiplayer F-Zero sequel).  I'm not sure it'd be worth it given the resolution and framerate you'd have to put up with; pancake 4-player doesn't look <em>that</em> horrible in comparison, and if you need a bigger map it might be better to try to pull off something like my <a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=12427#p142069" class="postlink">quarter-map scheme</a> (though for 4-player it needs 8 KB updates, which implies a reduced active display height)...  Plus, in accordance with what I said above, corner 4-player might take noticeably more CPU than pancake 4-player at the same resolution because it needs twice as many transform matrices...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Or do 30 frames per second... is a solution too...</div><br />I think Star Fox tops out at 20.  Mind you, a lot of the frame rate issues in that game were due to software rendering on the Super FX taking a long time, but the frame data was also too big to transfer in one VBlank, even though they extended VBlank with forced blank.  The catch here is that you need to double buffer some of the data in VRAM so you don't get tearing or glitching.<br /><br />...<br /><br />Please excuse my huge posts.  I like to be precise, but I'm not very good at explaining stuff, and I get drawn off onto tangents very easily.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p194834"></a>
				<b class="postauthor">Oziphantom</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194834">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194834#p194834"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue May 02, 2017 3:49 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Feb 07, 2017 2:03 am<br /><b>Posts:</b> 511
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">93143 wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I mean... if you deactivate horizontal scanlines you gain bandwidth, but, What if the scanline is shorter like in the image?</div><br />I would think you could use forced blank in an H-position-timed IRQ to do that, if forced blank frees VRAM quickly enough (I think it does, but I haven't tried it).  But since interrupts on the SNES can't happen with pixel-perfect positioning, mostly because individual CPU instructions take several pixels to execute and an IRQ won't start until the current instruction is finished, you'd probably want to also use windowing as tepples describes to straighten the edges, or else just map black tiles outside the desired display area.  And, obviously, you wouldn't be able to count on having the entire black area for DMA, because the timing inaccuracy of the interrupt would consume up to 16 pixels or so (depending on the code being interrupted and on whether mitigation measures were present in the IRQ code).<br /><br />And as I just mentioned, you would probably end up killing sprites entirely by doing this, since they don't load during forced blanking.<br /><br />Not to mention that H-IRQs eat CPU time for breakfast, especially if they contain any position stabilization code, because they happen 200+ times per frame...<br /><br />In short, it's probably possible, but it doesn't work nearly as well as trimming scanlines off the top and bottom.</div>Not quite true.. the 65816's super power is it can give you perfect IRQ/NMIs with a single clock delay. So if you are doing horizontal splits, you can pepper your normal code and as long as you hit a WAI before the interrupt is due to happen you will get it with 1 clock fixed slide.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8250"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p194844"></a>
				<b class="postauthor">Señor Ventura</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p194844">Re: Some basic questions...</a></div><div style="float: right;"><a href="./viewtopic.php?p=194844#p194844"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue May 02, 2017 6:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7770_1471728828.jpg" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Aug 20, 2016 3:58 am<br /><b>Posts:</b> 52
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Oziphantom wrote:</div><div class="quotecontent">Not quite true.. the 65816's super power is it can give you perfect IRQ/NMIs with a single clock delay. So if you are doing horizontal splits, you can pepper your normal code and as long as you hit a WAI before the interrupt is due to happen you will get it with 1 clock fixed slide.</div><br /><br />So, you can shorten the scanlines... but, Could it increase the bandwidth?.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7770"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=15878"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=15878"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>4</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 56 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=15878&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=15878&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=15878&amp;start=45">4</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=15878&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="15878" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
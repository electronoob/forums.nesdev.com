<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=12&amp;t=10098" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2013-05-20T11:43:34+00:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=12&amp;t=10098</id>
<entry>
<author><name><![CDATA[pichichi010]]></name></author>
<updated>2013-05-20T11:43:34+00:00</updated>
<published>2013-05-20T11:43:34+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112316#p112316</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112316#p112316"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112316#p112316"><![CDATA[
Everything is working now, With Ramsis edits, and Shiru helped me and replaced the &quot;Lib&quot; folder of the SNES SDK with another version he had.<br /><br />Solved everything.<br /><br />Thanks, problem resolved.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5138">pichichi010</a> — Mon May 20, 2013 11:43 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2013-05-16T06:54:18+00:00</updated>
<published>2013-05-16T06:54:18+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112184#p112184</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112184#p112184"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112184#p112184"><![CDATA[
My guess is the Python optimizing step is failing. Maybe it's not finding Python in the path, or .py files haven't been associated to run with Python.<br /><br />BTW the PATH setting is wrong in all the batch files. It is:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">path=path;tools\</div><br />It should be:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">path=%path%;tools\</div><br /><br />Also try changing:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">..\bin\816-opt.py game.ps1 &gt; game.s<br /></div><br />to:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">python ..\bin\816-opt.py game.ps1 &gt; game.s<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Thu May 16, 2013 6:54 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pichichi010]]></name></author>
<updated>2013-05-16T00:25:19+00:00</updated>
<published>2013-05-16T00:25:19+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112181#p112181</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112181#p112181"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112181#p112181"><![CDATA[
Yeah I went and deleted it and well it was nothing.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5138">pichichi010</a> — Thu May 16, 2013 12:25 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Shiru]]></name></author>
<updated>2013-05-15T23:19:20+00:00</updated>
<published>2013-05-15T23:19:20+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112179#p112179</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112179#p112179"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112179#p112179"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Discarding empty section &quot;.rodata1&quot;<br /></div><br />This one is an irrelevant message, it is just a warning that there is an empty section defined in the code. You can remove this message by deleting first three lines of the data.asm.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4205">Shiru</a> — Wed May 15, 2013 11:19 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pichichi010]]></name></author>
<updated>2013-05-15T19:10:06+00:00</updated>
<published>2013-05-15T19:10:06+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112172#p112172</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112172#p112172"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112172#p112172"><![CDATA[
Still get the Discarding empty section &quot;.rodata1&quot;.<br /><br />The log looks good for everything else.<br /><br /><br />Installed a clean copy and nothing.<br /><br /><br />C:\snessdk\christmas&gt;call compsnd.bat <br /><br />C:\snessdk\christmas&gt;path=path;tools\ <br /><br />C:\snessdk\christmas&gt;del spc700.bin <br /><br />C:\snessdk\christmas&gt;pre spc700.asm <br /><br />C:\snessdk\christmas&gt;bass -arch=table -o spc700.bin spc700.s <br /><br />C:\snessdk\christmas&gt;rem pause <br /><br />C:\snessdk\christmas&gt;del spc700.s <br /><br />C:\snessdk\christmas&gt;call makeres.bat <br /><br />C:\snessdk\christmas&gt;path=path;tools\ <br /><br />C:\snessdk\christmas&gt;del gfx\*.chr <br /><br />C:\snessdk\christmas&gt;del gfx\*.pal <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\intro.bmp -b -256 -s16 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\title.bmp -b -256 -s16 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\back1.bmp -b -256 -s16 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\back2.bmp -b -256 -s16 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\back3.bmp -b -256 -s16 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\back4.bmp -b -256 -s16 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\back5.bmp -b -256 -s16 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\backmenu.bmp -b -256 -s32 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\backdone.bmp -b -256 -s16 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\gameover.bmp -b -256 <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\tileset.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\flares.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\leds.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\spr16.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\hero_stand.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\hero_walk.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\hero_throw.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\hero_jump.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\hero_hit.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\hero_make.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\hero_lose.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\hero_alt.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\ufo1.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\ufo2.bmp -b <br /><br />C:\snessdk\christmas&gt;snesbmp gfx\ufo2_alt.bmp -b <br /><br />C:\snessdk\christmas&gt;call compile.bat<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5138">pichichi010</a> — Wed May 15, 2013 7:10 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2013-05-15T19:04:16+00:00</updated>
<published>2013-05-15T19:04:16+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112171#p112171</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112171#p112171"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112171#p112171"><![CDATA[
Some other step of the build probably failed.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Wed May 15, 2013 7:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pichichi010]]></name></author>
<updated>2013-05-15T18:53:47+00:00</updated>
<published>2013-05-15T18:53:47+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112170#p112170</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112170#p112170"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112170#p112170"><![CDATA[
Not in the bin folder,  I checked.<br /><br />I am running the search function but I remember having several game.smc files around lol<br /><br /><br />yeah no output.<br /><br /><br />This thing does't want to be compiled!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5138">pichichi010</a> — Wed May 15, 2013 6:53 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Ramsis]]></name></author>
<updated>2013-05-15T18:48:52+00:00</updated>
<published>2013-05-15T18:48:52+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112168#p112168</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112168#p112168"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112168#p112168"><![CDATA[
<div class="quotetitle">pichichi010 wrote:</div><div class="quotecontent"><br />That solved the problem, but now I dont see where it placed the game.smc!<br /><br />I thought it should be on the same directory?<br /></div><br />The compile script says <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">..\bin\wlalink.exe -dvSo game.obj game.smc</tt>. So, if you were running it from <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">C:\snessdk\christmas</tt>, then it might be worthwile to check the <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">C:\snessdk\bin</tt> folder. Or simply use your computer's search function. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5345">Ramsis</a> — Wed May 15, 2013 6:48 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pichichi010]]></name></author>
<updated>2013-05-15T18:28:37+00:00</updated>
<published>2013-05-15T18:28:37+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112164#p112164</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112164#p112164"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112164#p112164"><![CDATA[
<div class="quotetitle">Ramsis wrote:</div><div class="quotecontent"><br />Are you using bass v11 now? That's the version I used. No compiling error on line 518 for me. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />(Otherwise, just replace the <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">bra .done</tt> instruction on line 518 with <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">jmp .done</tt>.)<br /></div><br /><br />That solved the problem, but now I dont see where it placed the game.smc!<br /><br />I thought it should be on the same directory?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5138">pichichi010</a> — Wed May 15, 2013 6:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Ramsis]]></name></author>
<updated>2013-05-15T18:00:32+00:00</updated>
<published>2013-05-15T18:00:32+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112162#p112162</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112162#p112162"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112162#p112162"><![CDATA[
Are you using bass v11 now? That's the version I used. No compiling error on line 518 for me. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />(Otherwise, just replace the <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">bra .done</tt> instruction on line 518 with <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">jmp .done</tt>.)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5345">Ramsis</a> — Wed May 15, 2013 6:00 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pichichi010]]></name></author>
<updated>2013-05-15T17:43:28+00:00</updated>
<published>2013-05-15T17:43:28+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112161#p112161</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112161#p112161"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112161#p112161"><![CDATA[
Ok, here it is from the Spc700.asm<br /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">arch snes.smp<br /><br /><br />define musicData $e000   ;fixed location for music data<br /><br />;I/O registers<br /><br />define TEST $f0<br />define CTRL $f1<br />define ADDR $f2<br />define DATA $f3<br />define CPU0 $f4<br />define CPU1 $f5<br />define CPU2 $f6<br />define CPU3 $f7<br />define TMP0 $f8<br />define TMP1 $f9<br />define T0TG $fa<br />define T1TG $fb<br />define T2TG $fc<br />define T0OT $fd<br />define T1OT $fe<br />define T2OT $ff<br /><br />;DSP channel registers, x0..x9, x is channel number<br /><br />define DSP_VOLL  $00<br />define DSP_VOLR  $01<br />define DSP_PL    $02<br />define DSP_PH    $03<br />define DSP_SRCN  $04<br />define DSP_ADSR1 $05<br />define DSP_ADSR2 $06<br />define DSP_GAIN    $07<br />define DSP_ENVX    $08<br />define DSP_OUTX    $09<br /><br />;DSP registers for global settings<br /><br />define DSP_MVOLL $0c<br />define DSP_MVOLR $1c<br />define DSP_EVOLL $2c<br />define DSP_EVOLR $3c<br />define DSP_KON    $4c<br />define DSP_KOF    $5c<br />define DSP_FLG    $6c<br />define DSP_ENDX    $7c<br />define DSP_EFB    $0d<br />define DSP_PMON    $2d<br />define DSP_NON    $3d<br />define DSP_EON    $4d<br />define DSP_DIR    $5d<br />define DSP_ESA    $6d<br />define DSP_EDL    $7d<br />define DSP_C0    $0f<br />define DSP_C1    $1f<br />define DSP_C2    $2f<br />define DSP_C3    $3f<br />define DSP_C4    $4f<br />define DSP_C5    $5f<br />define DSP_C6    $6f<br />define DSP_C7    $7f<br /><br />;vars<br /><br />define D_TEMP    $00<br /><br />define D_SYNC    $08<br />define D_BUFPTR    $09<br />define D_KON    $0a<br />define D_KOF    $0b<br />define D_STEREO    $0c<br /><br />define M_ENABLE    $10   ;byte<br />define M_ROW    $11   ;byte<br />define M_ORDPTR_L $12   ;word<br />define M_ORDPTR_H $13<br />define M_ORDINC    $14   ;byte<br />define M_CHCUR0x $15   ;byte<br />define M_CHCURx0 $16   ;byte<br />define M_CHOFF    $17   ;byte<br />define M_UPDROW    $18   ;byte<br />define M_SPEED    $19   ;byte<br /><br />define M_ORDBEGIN_L   {musicData}<br />define M_ORDBEGIN_H   {musicData}+1<br />define M_ORDLOOP_L   {musicData}+2<br />define M_ORDLOOP_H   {musicData}+3<br />define M_CHANNELS   {musicData}+4<br />define M_INITSPEED   {musicData}+5<br />define M_PATTERNS_L   {musicData}+6<br />define M_PATTERNS_H   {musicData}+7<br /><br />define M_CHSIZE   $0b   ;11 bytes per channel<br /><br />define M_CH0   $20<br />define M_CH1   {M_CH0}+{M_CHSIZE}<br />define M_CH2   {M_CH1}+{M_CHSIZE}<br />define M_CH3   {M_CH2}+{M_CHSIZE}<br />define M_CH4   {M_CH3}+{M_CHSIZE}<br />define M_CH5   {M_CH4}+{M_CHSIZE}<br />define M_CH6   {M_CH5}+{M_CHSIZE}<br />define M_CH7   {M_CH6}+{M_CHSIZE}<br /><br />define D_BUFFER   $80<br /><br />;offsets for music channel vars<br /><br />define CH_FRAME    $00<br />define CH_SPEED    $01<br />define CH_PTR_L    $02   ;word<br />define CH_PTR_H    $03<br />define CH_WAIT    $04   ;byte<br />define CH_VOL    $05   ;byte<br />define CH_PAN    $06   ;byte<br />define CH_NOTE    $07   ;byte<br />define CH_VIBOFF $08   ;byte<br />define CH_VIBINC $09   ;byte<br />define CH_VIBMUL $0a   ;byte<br /><br /><br /><br />   origin 0x0000<br />   base $0200<br /><br /><br /><br />start:<br />   clp<br /><br />   ldx #0<br />   stx {D_KON}<br />   stx {D_KOF}<br />   stx {D_STEREO}<br />   stx {M_ENABLE}<br /><br />   dex<br />   txs<br /><br />   lda {CPU0}         ;read current value of cpu0, it is used as strobe<br />   sta {D_SYNC}<br /><br />   jsr bufClear<br /><br />setState:<br />   ldx #0            ;initialize registers<br />.1:<br />   lda initDataSeq,x<br />   beq .2<br />   sta {ADDR}<br />   inx<br />   lda initDataSeq,x<br />   sta {DATA}<br />   inx<br />   bra .1<br />.2:<br /><br />   lda #160         ;8000/160=50hz<br />   sta {T0TG}<br />   lda #$81         ;enable timer 0 and IPL<br />   sta {CTRL}<br /><br />mainLoop:<br /><br />waitForTimer:<br />   jsr checkCommand<br />   lda {T0OT}<br />   beq waitForTimer<br /><br />   jsr updatePlayer<br /><br />   bra mainLoop<br /><br /><br /><br />checkCommand:<br />   lda {CPU0}         ;wait until cpu0 is changed<br />   cmp {D_SYNC}<br />   bne .read<br />   rts<br />.read:<br />   sta {D_SYNC}      ;remember for next time<br />   sta {CPU0}         ;confirm strobe<br /><br />   lda {CPU1}         ;read command code<br />   pha<br />   and #$0f<br />   tay               ;channel for sound effect commands<br />   pla<br />   lsr<br />   lsr<br />   lsr<br />   and #$0e<br />   tax<br />   jmp (cmdList,x)<br /><br /><br /><br />cmdStereo:<br />   lda {CPU2}<br />   sta {D_STEREO}<br />   rts<br /><br /><br />cmdVolume:<br />   lda {CPU2}<br />   ldx #{DSP_MVOLL}<br />   stx {ADDR}<br />   sta {DATA}<br />   ldx #{DSP_MVOLR}<br />   stx {ADDR}<br />   sta {DATA}<br />   rts<br /><br /><br />cmdMusStop:<br />   jsr bufClear<br />   <br />   ldx #0<br />   stx {M_ENABLE}<br /><br />.mute:<br />   jsr keyOffBuf<br />   inx<br />   cpx {M_CHANNELS}<br />   bne .mute<br /><br />   lda {D_KOF}<br />   eor #$ff<br />   and {D_KON}<br />   sta {D_KON}<br /><br />   jmp keyOffApply<br /><br /><br />cmdMusPlay:<br />   lda #1<br />   sta {M_ENABLE}<br />   jmp musicInit<br /><br /><br />cmdSfxPlay:<br />   cpy {M_CHANNELS}   ;don't play effects on music channels<br />   bcs .play<br />   rts<br />.play:<br />   lda #{M_CHSIZE}      ;get channel offset<br />   mul<br />   clc<br />   adc #{M_CH0}<br />   tax<br /><br />   lda {CPU2}<br />   asl<br />   tay<br /><br />   lda soundData,y<br />   clc<br />   adc #soundData&amp;255<br />   sta {CH_PTR_L},x<br />   lda soundData+1,y<br />   adc #soundData/256<br />   sta {CH_PTR_H},x<br />   lda #0<br />   sta {CH_WAIT},x<br />   sta {CH_NOTE},x<br />   sta {CH_VIBMUL},x<br />   sta {CH_VIBINC},x<br />   sta {CH_FRAME},x<br />   lda #6<br />   sta {CH_SPEED},x<br />   lda {CPU3}<br />   sta {CH_PAN},x<br />   lda #$3f<br />   sta {CH_VOL},x<br /><br />   rts<br /><br /><br />cmdReload:<br />   jmp $ffc0<br /><br /><br /><br />;reads variables from music data (it is at fixed location)<br />;reset channels variables<br /><br />musicInit:<br />   ldy {M_CHANNELS}   ;get order pos width from music data, it is channels+1<br />   sty {M_ORDINC}<br />   inc {M_ORDINC}<br /><br />   lda {M_ORDBEGIN_L}   ;get initial order list pointer<br />   clc<br />   adc #{musicData}&amp;255<br />   sta {M_ORDPTR_L}<br />   lda {M_ORDBEGIN_H}<br />   adc #{musicData}/256<br />   sta {M_ORDPTR_H}<br /><br />   ldx #{M_CH0}      ;initialize channels vars<br />.set:<br />   lda #0<br />   sta {CH_WAIT},x<br />   sta {CH_NOTE},x<br />   sta {CH_VIBMUL},x<br />   sta {CH_VIBINC},x<br />   sta {CH_FRAME},x   ;reset frame counter<br />   sta {CH_SPEED},x   ;disable channel<br />   lda #$80<br />   sta {CH_PAN},x<br />   lda #$3f<br />   sta {CH_VOL},x<br /><br />   txa<br />   clc<br />   adc #{M_CHSIZE}<br />   tax<br /><br />   dey<br />   bne .set<br /><br />   lda #$ff         ;keyoff for all the channels<br />   sta {D_KOF}<br />   lda #0            ;reset frame counter<br />   sta {D_KON}<br />   lda {M_INITSPEED}   ;set initial speed<br />   sta {M_SPEED}<br /><br />   ;rts            ;no rts because jsr musicUpdateOrder is needed for init<br /><br /><br /><br />;move to the next order list position<br /><br />define T_CHCNT $00<br /><br />updateOrder:<br />   lda {M_CHANNELS}   ;read pattern pointers into channels vars<br />   sta {T_CHCNT}<br />   ldy #0<br />   lda #{M_CH0}<br />   sta {M_CHOFF}<br />.read:<br />   lda ({M_ORDPTR_L}),y<br />   iny<br /><br />   asl<br />   tax<br />   lda {M_PATTERNS_L},x<br />   clc<br />   adc #{musicData}&amp;255<br />   pha<br />   lda {M_PATTERNS_H},x<br />   adc #{musicData}/256<br />   ldx {M_CHOFF}<br />   sta {CH_PTR_H},x<br />   pla<br />   sta {CH_PTR_L},x<br /><br />   txa<br />   clc<br />   adc #{M_CHSIZE}<br />   sta {M_CHOFF}<br /><br />   dec {T_CHCNT}<br />   bne .read<br /><br />   lda ({M_ORDPTR_L}),y;read order position length<br />   sta {M_ROW}<br />   iny<br /><br />   lda ({M_ORDPTR_L}),y;check if next position is end of the order list<br />   cmp #$ff<br />   bne .next<br /><br />   lda {M_ORDLOOP_L}      ;load loop position<br />   clc<br />   adc #{musicData}&amp;255<br />   sta {M_ORDPTR_L}<br />   lda {M_ORDLOOP_H}<br />   adc #{musicData}/256<br />   sta {M_ORDPTR_H}<br />   rts<br /><br />.next:<br />   clc               ;move to the next position<br />   lda {M_ORDPTR_L}<br />   adc {M_ORDINC}<br />   sta {M_ORDPTR_L}<br />   lda {M_ORDPTR_H}<br />   adc #0<br />   sta {M_ORDPTR_H}<br /><br />   rts<br /><br /><br /><br />;run one frame of music player<br /><br />updatePlayer:<br />   jsr bufApply         ;apply register writes from previous frame<br />   jsr keyOnApply         ;apply keyon from previous frame<br /><br />   lda #0               ;process all the channels, some of them for music, some for sound<br />   sta {M_CHCUR0x}<br />   sta {M_CHCURx0}<br />   sta {M_UPDROW}<br />   lda #{M_CH0}<br />   sta {M_CHOFF}<br /><br />.loop:<br />   jsr updateChannel<br /><br />   lda {M_CHOFF}<br />   clc<br />   adc #{M_CHSIZE}<br />   sta {M_CHOFF}<br /><br />   lda {M_CHCURx0}<br />   clc<br />   adc #$10<br />   sta {M_CHCURx0}<br /><br />   inc {M_CHCUR0x}<br />   lda {M_CHCUR0x}<br />   cmp #8<br />   bne .loop<br /><br />   jsr keyOffApply         ;apply keyoff, it always one frame earlier<br /><br />   lda {M_UPDROW}<br />   beq .noRow<br />   dec {M_ROW}<br />   bne .noRow<br />   jsr updateOrder<br />.noRow:<br />   rts<br /><br /><br /><br />;update one channel<br /><br />define T_PTNPTR_L    $00   ;word<br />define T_PTNPTR_H    $01<br />define T_CHVOLL       $02<br />define T_CHVOLR       $03<br />define T_PITCH_OFF_L $04<br />define T_PITCH_OFF_H $05<br /><br />updateChannel:<br />   ldx {M_CHOFF}<br />   lda {M_CHCUR0x}<br />   cmp {M_CHANNELS}<br />   bcc .checkMus<br />   lda {CH_SPEED},x   ;if speed is 0, channel is inactive<br />   bne .active<br />   rts<br />.checkMus:<br />   lda {M_ENABLE}<br />   bne .active<br />   rts<br />.active:<br />   lda {CH_FRAME},x<br />   beq .row<br />   jmp .processVolume<br /><br />.row:<br />   lda {CH_WAIT},x<br />   beq .noWait<br />   dec {CH_WAIT},x<br />   jmp .processVolume<br /><br />.noWait:<br />   lda {CH_PTR_H},x<br />   sta {T_PTNPTR_H}<br />   lda {CH_PTR_L},x<br />   sta {T_PTNPTR_L}<br /><br />.read:<br />   jsr readPtnByte<br />   tay<br />   and #$c0<br /><br />   beq .empty<br />   cmp #$40<br />   beq .volume<br />   cmp #$80<br />   beq .ins<br />.note:<br />   tya<br />   cmp #$fc<br />   bcs .effect<br /><br />   and #$3f         ;it is a note, remember it<br />   asl<br />   ldx {M_CHOFF}<br />   sta {CH_NOTE},x<br />   lda #0<br />   sta {CH_VIBOFF},x<br /><br />   ldx {M_CHCUR0x}      ;keyoff and keyon<br />   jsr keyOffBuf<br />   jsr keyOnBuf<br /><br />   jmp .done<br /><br />.effect:<br />   cmp #$fc<br />   bne .noPitch<br /><br />   jsr readPtnByte      ;it is a pitch change without restarting note<br />   and #$3f<br />   asl<br />   ldx {M_CHOFF}<br />   sta {CH_NOTE},x<br /><br />   bra .done<br /><br />.noPitch:<br />   cmp #$fd<br />   bne .noStop<br />   ldx {M_CHCUR0x}      ;it is note cut<br />   jsr keyOffBuf<br />   bra .done<br /><br />.noStop:<br />   cmp #$fe<br />   bne .noPan<br />   jsr readPtnByte      ;it is pan, next byte is value<br />   ldx {M_CHOFF}<br />   sta {CH_PAN},x<br />   bra .read<br /><br />.noPan:<br />   jsr readPtnByte      ;it is speed, next byte is value<br />   ldx {M_CHCUR0x}<br />   cpx {M_CHANNELS}<br />   bcs .setSpeed<br />   sta {M_SPEED}<br />   bra .read<br /><br />.setSpeed:<br />   ldx {M_CHOFF}<br />   sta {CH_SPEED},x<br />   cmp #0<br />   bne .read<br />   lda {M_CHCUR0x}<br />   jmp keyOffBuf<br /><br />.empty:<br />   ldx {M_CHOFF}<br />   sty {CH_WAIT},x<br />   bra .done<br /><br />.volume:<br />   tya<br />   and #$3f<br />   asl<br />   ldx {M_CHOFF}<br />   sta {CH_VOL},x<br />   jmp .read<br /><br />.ins:<br />   tya<br />   and #$3f<br />   pha<br /><br />   lda {M_CHCURx0}<br />   ora #{DSP_SRCN}<br />   tax<br />   pla<br />   jsr bufWrite      ;write instrument number<br /><br />   asl               ;get offset for parameter tables<br />   tax<br /><br />   lda vibrato+1,x      ;get vibrato parameters<br />   pha<br />   lda vibrato,x<br />   pha<br />   lda adsr+1,x      ;get adsr parameters<br />   pha<br />   lda adsr,x<br />   pha<br /><br />   lda {M_CHCURx0}      ;write adsr parameters<br />   ora #{DSP_ADSR1}<br />   tax<br />   pla<br />   jsr bufWrite<br />   lda {M_CHCURx0}<br />   ora #{DSP_ADSR2}<br />   tax<br />   pla<br />   jsr bufWrite<br /><br />   ldx {M_CHOFF}      ;write vibrato parameters<br />   pla<br />   sta {CH_VIBINC},x<br />   pla<br />   sta {CH_VIBMUL},x<br /><br />   jmp .read<br /><br />.done:<br />   ldx {M_CHOFF}<br />   lda {T_PTNPTR_L}<br />   sta {CH_PTR_L},x<br />   lda {T_PTNPTR_H}<br />   sta {CH_PTR_H},x<br /><br />.processVolume:<br />   lda {D_STEREO}<br />   beq .mono<br />.stereo:<br />   lda {CH_PAN},x         ;calculate left volume<br />   eor #$ff<br />   tay<br />   lda {CH_VOL},x<br />   mul<br />   sty {T_CHVOLL}<br />   ldy {CH_PAN},x         ;calculate right volume<br />   lda {CH_VOL},x<br />   mul<br />   sty {T_CHVOLR}<br />   bra .setVol<br /><br />.mono:<br />   lda {CH_VOL},x<br />   sta {T_CHVOLL}<br />   sta {T_CHVOLR}<br /><br />.setVol:<br />   lda {M_CHCURx0}<br />   ora #{DSP_VOLL}<br />   tax<br />   lda {T_CHVOLL}<br />   jsr bufWrite<br />   lda {M_CHCURx0}<br />   ora #{DSP_VOLR}<br />   tax<br />   lda {T_CHVOLR}<br />   jsr bufWrite<br /><br />.processPitch:<br />   ldx {M_CHOFF}<br /><br />   lda {CH_VIBOFF},x<br />   ldy {CH_VIBMUL},x<br />   tax<br />   lda vibratoTable,x<br />   mul<br />   sty {T_PITCH_OFF_L}<br />   lda #0<br />   sta {T_PITCH_OFF_H}<br />   asl {T_PITCH_OFF_L}<br />   rol {T_PITCH_OFF_H}<br />   asl {T_PITCH_OFF_L}<br />   rol {T_PITCH_OFF_H}<br /><br />   ldx {M_CHOFF}<br />   lda {CH_NOTE},x<br />   tax<br />   lda divTable,x<br />   clc<br />   adc {T_PITCH_OFF_L}<br />   pha<br />   lda divTable+1,x<br />   adc {T_PITCH_OFF_H}<br />   pha<br />   lda {M_CHCURx0}<br />   ora #{DSP_PH}<br />   tax<br />   pla<br />   jsr bufWrite<br />   lda {M_CHCURx0}<br />   ora #{DSP_PL}<br />   tax<br />   pla<br />   jsr bufWrite<br /><br />   ldx {M_CHOFF}<br />   lda {CH_VIBOFF},x      ;advance vibrato table pointer<br />   clc<br />   adc {CH_VIBINC},x<br />   sta {CH_VIBOFF},x<br /><br />.processFrameRow:<br />   lda {CH_FRAME},x<br />   bne .noRow<br />   lda {M_CHCUR0x}<br />   cmp {M_CHANNELS}<br />   bcc .processMus<br />   lda {CH_SPEED},x<br />   sta {CH_FRAME},x<br />   bra .noRow<br /><br />.processMus:<br />   lda {M_SPEED}<br />   sta {CH_FRAME},x<br />   lda #1<br />   sta {M_UPDROW}<br /><br />.noRow:<br />   dec {CH_FRAME},x<br />   rts<br /><br /><br /><br />;read one byte from pattern data<br />;out: A=data, Y=0<br /><br />readPtnByte:<br />   ldy #0<br />   lda ({T_PTNPTR_L}),y<br />   inc {T_PTNPTR_L}<br />   bne .1<br />   inc {T_PTNPTR_H}<br />.1:<br />   rts<br /><br /><br /><br />;clear register writes buffer, just set ptr to 0<br /><br />bufClear:<br />   str {D_BUFPTR}=#0<br />   rts<br /><br /><br /><br />;add register write in buffer<br />;in X=reg, A=value<br /><br />bufWrite:<br />   pha<br />   txa<br />   ldx {D_BUFPTR}<br />   sta {D_BUFFER},x<br />   inx<br />   pla<br />   sta {D_BUFFER},x<br />   inx<br />   stx {D_BUFPTR}<br />   rts<br /><br /><br /><br />;send writes from buffer and clear it<br /><br />bufApply:<br />   lda {D_BUFPTR}<br />   beq .done<br />   ldx #0<br />.loop:<br />   lda {D_BUFFER},x<br />   sta {ADDR}<br />   inx<br />   lda {D_BUFFER},x<br />   sta {DATA}<br />   inx<br />   cpx {D_BUFPTR}<br />   bne .loop<br />   str {D_BUFPTR}=#0<br />.done:<br />   rts<br /><br /><br /><br />;set keyon for needed channel in temp variable<br />;in: X=channel<br /><br />keyOnBuf:<br />   lda channelMask,x<br />   ora {D_KON}<br />   sta {D_KON}<br />   rts<br /><br /><br /><br />;send keyon from temp variable<br /><br />keyOnApply:<br />   lda {D_KON}<br />   eor #$ff<br />   and {D_KOF}<br />   ldx #{DSP_KOF}<br />   stx {ADDR}<br />   sta {DATA}<br />   sta {D_KOF}<br /><br />   lda #{DSP_KON}<br />   sta {ADDR}<br />   lda {D_KON}<br />   str {D_KON}=#0<br />   sta {DATA}<br /><br />   rts<br /><br /><br /><br />;set keyoff for needed channel in temp variable<br />;in: X=channel<br /><br />keyOffBuf:<br />   lda channelMask,x<br />   ora {D_KOF}<br />   sta {D_KOF}<br />   rts<br /><br /><br /><br />;send keyoff from temp variable<br /><br />keyOffApply:<br />   lda #{DSP_KOF}<br />   sta {ADDR}<br />   lda {D_KOF}<br />   sta {DATA}<br />   rts<br /><br /><br /><br />cmdList:<br />   dw cmdStereo   ;0 set stereo mode, 0 or 1<br />   dw cmdVolume   ;1 set global volume, 0..127<br />   dw cmdMusStop   ;2 stops music<br />   dw cmdMusPlay   ;3 restarts music<br />   dw cmdSfxPlay   ;4 play sound effect, number 0..127 and pan 0..255<br />   dw cmdReload   ;5 call IPL<br /><br /><br />divTable:<br />   dw $0217,$0237,$0259,$027d,$02a3,$02cb,$02f5,$0322<br />   dw $0352,$0385,$03ba,$03f3,$042f,$046f,$04b2,$04fa<br />   dw $0546,$0596,$05eb,$0645,$06a5,$070a,$0775,$07e6<br />   dw $085f,$08de,$0965,$09f4,$0a8c,$0b2c,$0bd6,$0c8b<br />   dw $0d4a,$0e14,$0eea,$0fcd,$10be,$11bd,$12cb,$13e9<br />   dw $1518,$1659,$17ad,$1916,$1a94,$1c28,$1dd5,$1f9b<br />   dw $217c,$237a,$2596,$27d2,$2a31,$2cb3,$2f5b,$322c<br />   dw $3528,$3851,$3bab,$3f37,$0000,$0000,$0000,$0000<br /><br /><br />vibratoTable:<br />   db $00,$01,$03,$04,$06,$07,$09,$0a,$0c,$0d,$0f,$11,$12,$14,$15,$17<br />   db $18,$1a,$1b,$1d,$1e,$20,$21,$23,$24,$26,$27,$29,$2a,$2c,$2d,$2f<br />   db $30,$32,$33,$34,$36,$37,$39,$3a,$3b,$3d,$3e,$3f,$41,$42,$43,$45<br />   db $46,$47,$49,$4a,$4b,$4c,$4e,$4f,$50,$51,$52,$54,$55,$56,$57,$58<br />   db $59,$5a,$5b,$5d,$5e,$5f,$60,$61,$62,$63,$64,$65,$66,$66,$67,$68<br />   db $69,$6a,$6b,$6c,$6c,$6d,$6e,$6f,$70,$70,$71,$72,$72,$73,$74,$74<br />   db $75,$75,$76,$77,$77,$78,$78,$79,$79,$79,$7a,$7a,$7b,$7b,$7b,$7c<br />   db $7c,$7c,$7d,$7d,$7d,$7d,$7e,$7e,$7e,$7e,$7e,$7e,$7e,$7e,$7e,$7e<br />   db $7f,$7e,$7e,$7e,$7e,$7e,$7e,$7e,$7e,$7e,$7e,$7d,$7d,$7d,$7d,$7c<br />   db $7c,$7c,$7b,$7b,$7b,$7a,$7a,$79,$79,$79,$78,$78,$77,$77,$76,$75<br />   db $75,$74,$74,$73,$72,$72,$71,$70,$70,$6f,$6e,$6d,$6c,$6c,$6b,$6a<br />   db $69,$68,$67,$66,$66,$65,$64,$63,$62,$61,$60,$5f,$5e,$5d,$5b,$5a<br />   db $59,$58,$57,$56,$55,$54,$52,$51,$50,$4f,$4e,$4c,$4b,$4a,$49,$47<br />   db $46,$45,$43,$42,$41,$3f,$3e,$3d,$3b,$3a,$39,$37,$36,$34,$33,$32<br />   db $30,$2f,$2d,$2c,$2a,$29,$27,$26,$24,$23,$21,$20,$1e,$1d,$1b,$1a<br />   db $18,$17,$15,$14,$12,$11,$0f,$0d,$0c,$0a,$09,$07,$06,$04,$03,$01<br /><br /><br />channelMask:<br />   db $01,$02,$04,$08,$10,$20,$40,$80<br /><br /><br />initDataSeq:<br />   db {DSP_FLG}  ,%01100000;mute, no echo<br />   db {DSP_PMON} ,0      ;no pitch modulation<br />   db {DSP_NON}  ,0      ;no noise<br />   db {DSP_EON}  ,0      ;no echo<br />   db {DSP_ESA}  ,255      ;echo at highest page<br />   db {DSP_EDL}  ,0      ;minimal length<br />   db {DSP_DIR}  ,(dir&gt;&gt;8)   ;address of sample dir<br />   db {DSP_MVOLL},127      ;global volume to the max<br />   db {DSP_MVOLR},127<br />   db {DSP_EVOLL},0      ;echo volume to zero<br />   db {DSP_EVOLR},0<br />   db {DSP_FLG}  ,%00100000;no mute, no echo<br />   db {DSP_KOF}  ,255      ;all keys off<br />   db 0<br /><br /><br />;macro for samples<br /><br />macro sample ptr,loop<br />   dw {self::ptr}<br />   dw {self::ptr}+{self::loop}<br />endmacro<br /><br />macro adsr ar,dr,sl,sr<br />   db $80|{self::ar}|({self::dr}&lt;&lt;4)<br />   db {self::sr}|({self::sl}&lt;&lt;5)<br />endmacro<br /><br />macro vib speed,depth<br />   db {self::speed}<br />   db {self::depth}<br />endmacro<br /><br /><br />   origin 0x0600   ;$0800 in memory<br />   incsrc &quot;sound\samples.asm&quot;<br /><br />soundData:<br />   incbin &quot;sound\sounds.bin&quot;</div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5138">pichichi010</a> — Wed May 15, 2013 5:43 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2013-05-15T17:37:04+00:00</updated>
<published>2013-05-15T17:37:04+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112160#p112160</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112160#p112160"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112160#p112160"><![CDATA[
And that error would indicate use of a branching instruction which should be turned into a jumping instruction; branch instructions have limited range (to save bytes and/or cycles), hence the phrase &quot;out of bounds&quot;.  This is similar to what Ramsis proposed around line ~562.  However, if it's a conditional branch instruction (vs. just <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">bra</tt>) then some additional code will have to be written (i.e. you cannot turn a <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">bbc/bbs/bcc/bcs/beq/bmi/bne/bpl/bvc/bvs</tt> instruction into a <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">jmp</tt>).<br /><br />I should note that the instructions I'm talking about/listed here are SPC-700 instructions and not 65816 instructions (though many are named similarly); I cannot tell if this <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">spc700.s</tt> file contains 65816 assembly or SPC-700 assembly, so I'm assuming it's SPC-700.<br /><br />You're not posting source code/lines so it's difficult for me to tell what the assembler is bitching about; all I have is an arbitrary line number.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed May 15, 2013 5:37 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pichichi010]]></name></author>
<updated>2013-05-15T16:52:33+00:00</updated>
<published>2013-05-15T16:52:33+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112159#p112159</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112159#p112159"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112159#p112159"><![CDATA[
Ahh crap, missed that, let me try it.<br /><br /><br />ETA:<br /><br />C:\snessdk\christmas&gt;bass -arch=table -o spc700.bin spc700.s <br />[bass error] spc700.s:518:1:<br />&gt; branch out of bounds<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5138">pichichi010</a> — Wed May 15, 2013 4:52 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2013-05-15T16:51:05+00:00</updated>
<published>2013-05-15T16:51:05+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112158#p112158</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112158#p112158"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112158#p112158"><![CDATA[
Ramsis said to change <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">org 0</tt> to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">origin 0x0000</tt> (not <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">org 0x0000</tt>).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed May 15, 2013 4:51 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pichichi010]]></name></author>
<updated>2013-05-15T16:05:55+00:00</updated>
<published>2013-05-15T16:05:55+00:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112157#p112157</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112157#p112157"/>
<title type="html"><![CDATA[Re: Having trouble compiling snes source code]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10098&amp;p=112157#p112157"><![CDATA[
Haha had to change the spc700.asm to html so I could see the lines on dreamweaver I was using just wordpad to edit everything lol.<br /><br />Anyways it gave me a similar error on the bass &quot;org&quot;<br /><br /><br /><strong>C:\snessdk\christmas&gt;bass -arch=table -o spc700.bin spc700.s <br />[bass error] spc700.s:123:1:<br />&gt; unknown command: org 0x0000</strong><br /><br />I will check again if I missed any changes but I think everything was done correctly.<br /><br />Thanks for your help man!<br /><br /><br />ETA:<br /><br />I found this at the end of the compiling text<br /><br />DISCARD: data.asm: discarding an empty section &quot;.rodata1&quot;.<br /><br /><br />Now I get 3 files done, the game.ps1 game.s and game.obj and a spc700.bin file; all of them get deleted except the bin file.<br /><br />although these last 2 tries I didn't get the game.obj file, weird.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5138">pichichi010</a> — Wed May 15, 2013 4:05 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESemdev" href="http://forums.nesdev.com/feed.php?f=3" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)" href="http://forums.nesdev.com/feed.php?f=3&amp;t=14497" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 1:35 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=3&amp;t=14497">Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=14497"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 13 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=3&amp;t=14497&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=3&amp;t=14497&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=3&amp;t=14497&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174827"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174827">Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174827#p174827"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jul 06, 2016 9:06 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Does anyone have experience with Famicom Jump 2 (CRC: 3F15D20D? My ROM was actually mapped to mapper 16 but with some header overrides ala NEstopia), I set this ROM to run on mapper 153 (LZ93D50 with SRAM). I suspect the problem is the outer bank register in the range $8000-$8003, which allows the programmer to switch to the upper 256K of PRG rom.<br /><br />My logic is that if a byte value set in any of the four addresses $8000, $8001, $8002, $8003 has the lower bit set (value &amp; 0x01 != 0), then $40000 is added to the PRG banked address. Is this logic correct? The code seems to set different values across the 4 addresses so I'm thinking I got it all wrong.</div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174829"></a>
				<b class="postauthor">Joe</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174829">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174829#p174829"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jul 06, 2016 9:50 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Apr 01, 2013 11:17 pm<br /><b>Posts:</b> 437
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The outer bank register is selected by the PPU address (A11 and A10). If the four outer bank registers contain the same value, then you can ignore that inconvenient detail. However, if the four outer bank registers don't all contain the same value, you have to use the PPU address to figure out which register is currently selecting the outer bank.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5948"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174838"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174838">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174838#p174838"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jul 06, 2016 12:37 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Joe wrote:</div><div class="quotecontent">The outer bank register is selected by the PPU address (A11 and A10). If the four outer bank registers contain the same value, then you can ignore that inconvenient detail. However, if the four outer bank registers don't all contain the same value, you have to use the PPU address to figure out which register is currently selecting the outer bank.</div><br /><br />Does this mean I have to track the 4 values (0th bits) in $8000, $8001, $8002, $8003 individually and then decide which one applies depending on the bit 11 and 10 combination of the last PPU read or write?<br /><br />(forgive me for my general ignorance of hardware - one of the reasons of doing this project is to fill in a low-level hardware gap I've had for decades!)<br /><br />This is what I found in the spec:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Mapper 153 ($8000-$8003 only):<br />7&nbsp; bit&nbsp; 0<br />---- ----<br />xxxx xxxP<br />&nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; +-- Select 256KiB PRG ROM outer bank<br />As this mapper has no CHR ROM and only 8KiB fixed CHR RAM, the CHR ROM selection lines are repurposed similarly to SUROM. So CHR A10 OUT is connected to PRG A18 out on the mapper IC. The mapper's PPU A12 and PPU A13 inputs are tied to ground, but the PPU A11 and PPU A10 inputs are still connected, so the first 4 CHR bank 'P' bits should be set to the same value, or the game will flip between 256KiB PRG outer banks while rendering.</div></div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174840"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174840">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174840#p174840"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jul 06, 2016 1:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Tracing the writes to $8000-$8003 yielded the following:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Outer PRG Bank ($8000) = $01<br />Outer PRG Bank ($8001) = $01<br />Outer PRG Bank ($8002) = $01<br />Outer PRG Bank ($8003) = $01<br />:<br />Outer PRG Bank ($8000) = $01<br />Outer PRG Bank ($8001) = $01<br />Outer PRG Bank ($8002) = $01<br />Outer PRG Bank ($8003) = $01<br />:<br />Outer PRG Bank ($8000) = $01<br />Outer PRG Bank ($8001) = $01<br />Outer PRG Bank ($8002) = $01<br />Outer PRG Bank ($8003) = $01<br />:<br />Outer PRG Bank ($8000) = $00<br />Outer PRG Bank ($8001) = $00<br />Outer PRG Bank ($8002) = $00<br />Outer PRG Bank ($8003) = $00</div></div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174874"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174874">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174874#p174874"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 3:01 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Update: Tracing through the code reveals that writes to $8000-$8003 are written in immediate succession and with the same value. I think this is to ensure that the register value is correct, regardless of A10 and A11. The code actually also sets $8004-$8007 to the same value. The CPU goes through two instances of setting the outer PRG bank before it seemingly starts interpreting bogus code until it crashes to a read from absolute address $4B01 via the undocumented ALR opcode (a clear sign something has gone haywire). I'm beginning to think the problem is not the registers themselves (at least concerning this ROM), but how I am computing the address into the ROM file's PRG buffer.<br /><br />I have a related question concerning PRG bank $C000-$FFFF. I know that in the Bandai mapper variants this is mapped to the last bank. My question is, in the case of mapper 153 that uses the outer PRG bank, is the last bank the last one of the lower 256K, and hence, is it affected by the outer bank register? Alternatively, is it set to the last bank of the upper 256K, that is, treated as the last bank of a flat 512K PRG buffer?<br /><br />First instance of setting outer PRG Bank:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; ADDR&nbsp; CODE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ASSEMBLER<br />&nbsp; &nbsp; ============================<br />&nbsp; &nbsp; $C86C $A9 $01&nbsp; &nbsp; &nbsp; LDA #$01 <br />&nbsp; &nbsp; $C86E $8D $00 $80&nbsp; STA $8000 <br />&nbsp; &nbsp; $C871 $8D $01 $80&nbsp; STA $8001 <br />&nbsp; &nbsp; $C874 $8D $02 $80&nbsp; STA $8002 <br />&nbsp; &nbsp; $C877 $8D $03 $80&nbsp; STA $8003 <br />&nbsp; &nbsp; $C87A $8D $04 $80&nbsp; STA $8004 <br />&nbsp; &nbsp; $C87D $8D $05 $80&nbsp; STA $8005 <br />&nbsp; &nbsp; $C880 $8D $06 $80&nbsp; STA $8006 <br />&nbsp; &nbsp; $C883 $8D $07 $80&nbsp; STA $8007</div><br /><br />Second instance of setting outer PRG Bank:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; ADDR&nbsp; CODE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ASSEMBLER<br />&nbsp; &nbsp; ============================<br />&nbsp; &nbsp; $FFC0 $A9 $00&nbsp; &nbsp; &nbsp; LDA #$00 <br />&nbsp; &nbsp; $FFC2 $2A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ROL A <br />&nbsp; &nbsp; $FFC3 $8D $00 $80&nbsp; STA $8000 <br />&nbsp; &nbsp; $FFC6 $8D $01 $80&nbsp; STA $8001 <br />&nbsp; &nbsp; $FFC9 $8D $02 $80&nbsp; STA $8002 <br />&nbsp; &nbsp; $FFCC $8D $03 $80&nbsp; STA $8003 <br />&nbsp; &nbsp; $FFCF $8D $04 $80&nbsp; STA $8004 <br />&nbsp; &nbsp; $FFD2 $8D $05 $80&nbsp; STA $8005 <br />&nbsp; &nbsp; $FFD5 $8D $06 $80&nbsp; STA $8006 <br />&nbsp; &nbsp; $FFD8 $8D $07 $80&nbsp; STA $8007</div></div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174897"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174897">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174897#p174897"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 10:10 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 7391<br /><b>Location:</b> Seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Like the various MMC1 boards that support 512 KiB of PRG by repurposing the CHR banking bits, the &quot;fixed&quot; bank isn't. (It tracks the outer bank select)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174946"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174946">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174946#p174946"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jul 08, 2016 1:27 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Like the various MMC1 boards that support 512 KiB of PRG by repurposing the CHR banking bits, the &quot;fixed&quot; bank isn't. (It tracks the outer bank select)</div><br /><br />Thanks for clarifying this. Unfortunately I can't for the life of me figure out what's going wrong. I'm find it hard to follow what's happening with all the interleaved IRQ and JSR calls, but it's as if the stack is being corrupted somehow.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; $C0BF $20 $AC $FF&nbsp; JSR $FFAC&nbsp; &nbsp;; call subroutine at SubRtFFAC<br />SubRtFFAC:<br />&nbsp; &nbsp; $FFAC $8D $07 $05&nbsp; STA $0507&nbsp; <br />RelBrC0C2:<br />&nbsp; &nbsp; $C0C2 $EE $0C $05&nbsp; INC $050C&nbsp; <br />&nbsp; &nbsp; $C0C5 $BA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TSX&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C0C6 $BD $05 $01&nbsp; LDA $0105,X<br />&nbsp; &nbsp; $C0C9 $85 $20&nbsp; &nbsp; &nbsp; STA $20&nbsp; &nbsp; <br />&nbsp; &nbsp; $C0CB $BD $06 $01&nbsp; LDA $0106,X<br />&nbsp; &nbsp; $C0CE $85 $21&nbsp; &nbsp; &nbsp; STA $21&nbsp; &nbsp; <br />&nbsp; &nbsp; $C0D0 $A0 $00&nbsp; &nbsp; &nbsp; LDY #$00&nbsp; &nbsp;<br />&nbsp; &nbsp; $C0D2 $B1 $20&nbsp; &nbsp; &nbsp; LDA ($20), Y<br />&nbsp; &nbsp; $C0D4 $29 $0F&nbsp; &nbsp; &nbsp; AND #$0F&nbsp; &nbsp;<br />&nbsp; &nbsp; $C0D6 $C9 $07&nbsp; &nbsp; &nbsp; CMP #$07&nbsp; &nbsp;<br />&nbsp; &nbsp; $C0D8 $F0 $16&nbsp; &nbsp; &nbsp; BEQ $16&nbsp; &nbsp; &nbsp;; branch to RelBrC0F0<br />&nbsp; &nbsp; $C0DA $C9 $0F&nbsp; &nbsp; &nbsp; CMP #$0F&nbsp; &nbsp;<br />&nbsp; &nbsp; $C0DC $F0 $12&nbsp; &nbsp; &nbsp; BEQ $12&nbsp; &nbsp; &nbsp;; branch to RelBrC0F0<br />&nbsp; &nbsp; $C0DE $C9 $03&nbsp; &nbsp; &nbsp; CMP #$03&nbsp; &nbsp;<br />&nbsp; &nbsp; $C0E0 $F0 $0E&nbsp; &nbsp; &nbsp; BEQ $0E&nbsp; &nbsp; &nbsp;; branch to RelBrC0F0<br />&nbsp; &nbsp; $C0E2 $C9 $0B&nbsp; &nbsp; &nbsp; CMP #$0B&nbsp; &nbsp;<br />&nbsp; &nbsp; $C0E4 $F0 $0A&nbsp; &nbsp; &nbsp; BEQ $0A&nbsp; &nbsp; &nbsp;; branch to RelBrC0F0<br />&nbsp; &nbsp; $C0E6 $68&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PLA&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C0E7 $A8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TAY&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C0E8 $68&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PLA&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C0E9 $AA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TAX&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C0EA $68&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PLA&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C0EB $40&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTI&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $82A0 $54 $8C&nbsp; &nbsp; &nbsp; DOP $8C,X&nbsp; ; &lt;--- things seem to start to go wrong after RTI (DOP, SAX, SRE undocumented opcodes are a bad sign) <br />&nbsp; &nbsp; $82A2 $97 $4E&nbsp; &nbsp; &nbsp; SAX $4E,Y&nbsp; <br />&nbsp; &nbsp; $82A4 $5F $D4 $CB&nbsp; SRE $CBD4,X<br />&nbsp; &nbsp; $82AA $C0 $F0&nbsp; &nbsp; &nbsp; CPY #$F0&nbsp; &nbsp;<br />&nbsp; &nbsp; $82AC $98&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYA&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $82AD $1C $3C $7A&nbsp; TOP $7A3C,X<br />&nbsp; &nbsp; $82B0 $00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BRK&nbsp; &nbsp; &nbsp; &nbsp; <br />IrqHandler:<br />&nbsp; &nbsp; $C68F $08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PHP&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C690 $78&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SEI&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C691 $2C $15 $40&nbsp; BIT $4015&nbsp; <br />&nbsp; &nbsp; $C694 $85 $30&nbsp; &nbsp; &nbsp; STA $30&nbsp; &nbsp; <br />&nbsp; &nbsp; $C696 $86 $31&nbsp; &nbsp; &nbsp; STX $31&nbsp; &nbsp; <br />&nbsp; &nbsp; $C698 $84 $32&nbsp; &nbsp; &nbsp; STY $32&nbsp; &nbsp; <br />&nbsp; &nbsp; $C69A $BA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TSX&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C69B $BD $03 $01&nbsp; LDA $0103,X<br />&nbsp; &nbsp; $C69E $38&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SEC&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C69F $E9 $01&nbsp; &nbsp; &nbsp; SBC #$01&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6A1 $85 $36&nbsp; &nbsp; &nbsp; STA $36&nbsp; &nbsp; <br />&nbsp; &nbsp; $C6A3 $BD $04 $01&nbsp; LDA $0104,X<br />&nbsp; &nbsp; $C6A6 $E9 $00&nbsp; &nbsp; &nbsp; SBC #$00&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6A8 $85 $37&nbsp; &nbsp; &nbsp; STA $37&nbsp; &nbsp; <br />&nbsp; &nbsp; $C6AA $A0 $01&nbsp; &nbsp; &nbsp; LDY #$01&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6AC $B1 $36&nbsp; &nbsp; &nbsp; LDA ($36), Y<br />&nbsp; &nbsp; $C6AE $48&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PHA&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C6AF $29 $0F&nbsp; &nbsp; &nbsp; AND #$0F&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6B1 $29 $0F&nbsp; &nbsp; &nbsp; AND #$0F&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6B3 $C9 $07&nbsp; &nbsp; &nbsp; CMP #$07&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6B5 $F0 $3E&nbsp; &nbsp; &nbsp; BEQ $3E&nbsp; &nbsp; &nbsp;; branch to RelBrC6F5<br />&nbsp; &nbsp; $C6B7 $C9 $0F&nbsp; &nbsp; &nbsp; CMP #$0F&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6B9 $F0 $3A&nbsp; &nbsp; &nbsp; BEQ $3A&nbsp; &nbsp; &nbsp;; branch to RelBrC6F5<br />&nbsp; &nbsp; $C6BB $C9 $03&nbsp; &nbsp; &nbsp; CMP #$03&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6BD $F0 $33&nbsp; &nbsp; &nbsp; BEQ $33&nbsp; &nbsp; &nbsp;; branch to RelBrC6F2<br />&nbsp; &nbsp; $C6BF $C9 $0B&nbsp; &nbsp; &nbsp; CMP #$0B&nbsp; &nbsp;<br />&nbsp; &nbsp; $C6C1 $F0 $60&nbsp; &nbsp; &nbsp; BEQ $60&nbsp; &nbsp; &nbsp;; branch to RelBrC723<br />&nbsp; &nbsp; $C6C3 $68&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PLA&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C6C4 $28&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PLP&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $C6C5 $24 $A2&nbsp; &nbsp; &nbsp; BIT $A2&nbsp; &nbsp; <br />&nbsp; &nbsp; $C6C7 $10 $22&nbsp; &nbsp; &nbsp; BPL $22&nbsp; &nbsp; &nbsp;; branch to RelBrC6EB<br />RelBrC6EB:<br />&nbsp; &nbsp; $C6EB $A4 $32&nbsp; &nbsp; &nbsp; LDY $32&nbsp; &nbsp; <br />&nbsp; &nbsp; $C6ED $A6 $31&nbsp; &nbsp; &nbsp; LDX $31&nbsp; &nbsp; <br />&nbsp; &nbsp; $C6EF $A5 $30&nbsp; &nbsp; &nbsp; LDA $30&nbsp; &nbsp; <br />&nbsp; &nbsp; $C6F1 $40&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTI&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $82B1 $00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BRK&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $82B2 $00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BRK&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $82B3 $00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BRK&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; $82B4 $60&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; ----------------<br />&nbsp; &nbsp; $4101 $41 $41&nbsp; &nbsp; &nbsp; EOR ($41,X) ; &lt;---- something definitely wrong here, most likely before<br />&nbsp; &nbsp; $4103 $41 $41&nbsp; &nbsp; &nbsp; EOR ($41,X)<br />&nbsp; &nbsp; $4105 $41 $41&nbsp; &nbsp; &nbsp; EOR ($41,X)<br />&nbsp; &nbsp; $4107 $41 $41&nbsp; &nbsp; &nbsp; EOR ($41,X)<br />&nbsp; &nbsp; $4109 $41 $41&nbsp; &nbsp; &nbsp; EOR ($41,X)</div></div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174953"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174953">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174953#p174953"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jul 08, 2016 4:25 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">colinvella wrote:</div><div class="quotecontent"><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Like the various MMC1 boards that support 512 KiB of PRG by repurposing the CHR banking bits, the &quot;fixed&quot; bank isn't. (It tracks the outer bank select)</div><br /><br />Thanks for clarifying this. Unfortunately I can't for the life of me figure out what's going wrong. I'm find it hard to follow what's happening with all the interleaved IRQ and JSR calls, but it's as if the stack is being corrupted somehow.[/code]</div><br /><br />Can your emulator run Dragon Warrior 3 and 4, or the Final Fantasy 1+2 multicart? The Famicom Jump 2 board needs to work exactly the same way as the SUROM/SXROM boards. When the outer bank changes, $8000-BFFF must immediately remap to the appropriate inner bank (depending on the normal PRG register) of the new outer bank, and $C000-$FFFF must immediately remap to the last inner bank of the new outer bank. It looks like you aren't remapping $8000-BFFF correctly when the outer bank changes.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174955"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174955">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174955#p174955"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jul 08, 2016 4:49 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AWJ wrote:</div><div class="quotecontent">Can your emulator run Dragon Warrior 3 and 4, or the Final Fantasy 1+2 multicart? The Famicom Jump 2 board needs to work exactly the same way as the SUROM/SXROM boards.</div><br /><br />The games you suggested just generate a grey screen for now, but they are all MMC1 so that is a separate (albeit probably similar) issue in a different mapper implementation. I should say here that I do not reuse a lot of bank switching code, unlike what I have seen in some implementations of established emulators. Worth nothing is that the Final Fantasy 2 rom (CRC: 93A2EEFB) runs well on my MMC1 implementation but presumably, it does not use the MMC1 outer bank.<br /><br /><div class="quotetitle">AWJ wrote:</div><div class="quotecontent">When the outer bank changes, $8000-BFFF must immediately remap to the appropriate inner bank (depending on the normal PRG register) of the new outer bank, and $C000-$FFFF must immediately remap to the last inner bank of the new outer bank. It looks like you aren't remapping $8000-BFFF correctly when the outer bank changes.</div><br /><br />My Bandai Jump 2 mapper should be doing exactly that. When using the lower bank, $8000-$BFFF is determined by a $4000 byte bank within the lower 256K as determined by the PRG register (which should range from $00 to $0F). When the outer bank is set, the $8000-$BFFF address range maps to a $4000 byte bank in the upper 256K.<br /><br />The same goes for the $C000-$FFFF &quot;fixed&quot; bank that is mapped to $3C000-$3FFFF of the lower 256K rom, and likewise for the upper rom (that is, $7C000-$7FFFF when treating the ROM as a contiguous 512K array)</div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174959"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174959">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174959#p174959"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jul 08, 2016 6:35 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">On a related note, my MMC1 implementation didn't support outer bank registers. Because MMC1 has quite a few variants, the online documentation recommends working on heuristics based on the catridge PRG ROM and CHR ROM/RAM sizes. Based on this I did manage to get Final Fantasy 1 &amp; 2 multi cart to work. I had no success however with Dragon Warrior 3 and 4. Perhaps there are other unrelated issues.<br /><br />Also, no further progress on Famicom Jump 2 - mapper 153.</div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174962"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174962">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174962#p174962"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jul 08, 2016 7:46 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Update: Final Fantasy I &amp; II multicart is not crashing, but the initial game selection is not working - only FF I is loading. It seems quite obvious that the two games are stored in the individual banks and that somehow, the outer bank for FF II is not being selected. I will have to investigate further.<br /><br />Update 2: Solved for FF I &amp; II. Turned out I was not ignoring outer bank registers in CHR bank 1 when in 8k CHR mode, so the outer bank was being reset to the lower one, thus loading FF I instead of FF II.<br /><br />Still no luck with DW III (gray screen) and DW IV (KIL opcode encountered)</div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174965"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174965">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=174965#p174965"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jul 08, 2016 9:03 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Maybe the problem is with something other than the banking. Are you sure you implement the BRK instruction correctly? (IIRC DW4 uses it)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p175372"></a>
				<b class="postauthor">colinvella</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p175372">Re: Mapper 153 and Famicom Jump 2 (CRC: 3F15D20D)</a></div><div style="float: right;"><a href="./viewtopic.php?p=175372#p175372"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 14, 2016 3:48 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7591_1467146912.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jun 05, 2016 1:41 pm<br /><b>Posts:</b> 74
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Update: I managed to get Dragon Quest IV, Dragon Warrior III and IV working!<br /><br />It was all due to a bug in the BRK opcode instruction (I hadn't  tested any games that explicitly called BRK up to this point). I was basically pushing PC instead of PC + 1 on the stack.<br /><br />Solved thanks to the test ROM NEStress.nes. Kudos to whoever wrote it!<br /><br />Edit: Mainly thanks to AWJ for pointing it out.. you were right on the mark!</div>

					
						<div class="postbody"><br />_________________<br />Tile IDE and tile engine for XNA: <a href="http://tide.codeplex.com/" class="postlink">http://tide.codeplex.com/</a><br />Fancy Fish Mod - Minecraft Mod: <a href="http://fancyfishmod.weebly.com/" class="postlink">http://fancyfishmod.weebly.com/</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7591"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=3&amp;t=14497"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=14497"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 13 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <a href="./memberlist.php?mode=viewprofile&amp;u=9370">JonteP</a> and 6 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="14497" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3" selected="selected">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
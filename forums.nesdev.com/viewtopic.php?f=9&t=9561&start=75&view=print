<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - RGB output from composite PPU</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">RGB output from composite PPU</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9561">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9561</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>6</strong> of <strong>10</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yxkalle</b> [ Mon Jan 28, 2013 12:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><div class="quotetitle">yxkalle wrote:</div><div class="quotecontent">This is great! Why not cooperate with Jonathon (jwdonal) and add <a href="http://forums.nesdev.com/viewtopic.php?t=8040" class="postlink">HQ2X filtering</a> into your project? Not that I have anything against pixels, but I really like the results. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> Just a thought...</div><br />I'm personally not a big fan of those type of filters, but maybe some day.</div><br />You're sitting on a frickin' Altera DE2! Don't want to put some of those logic elements to use? <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /> Just kidding, keep up the good work.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Mar 15, 2013 11:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I posted a short demo video of a couple of games on YouTube: <!-- m --><a class="postlink" href="http://youtu.be/uctedoSaXcU">http://youtu.be/uctedoSaXcU</a><!-- m --><br /><br />The video quality is so bad though that you probably couldn't tell the difference even if I recorded the same footage using the normal composite output. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> Maybe some day I'll buy a real camera, or some VGA capture thing.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drakon</b> [ Sat Mar 16, 2013 7:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This's the most exciting thing ever.  I will happily throw hundreds of dollars to you to get a version that fits inside an av famicom and gives me ideally rgb / s-video so I can just wire it into the multi av port.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>incrediblehark</b> [ Tue Mar 19, 2013 8:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just watched the video, definitely excited about one day having this setup in my famicom or nes!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yxkalle</b> [ Wed Mar 20, 2013 5:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Me three! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tricky</b> [ Mon Apr 29, 2013 3:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I saw you'd commented on youtube that you have no plans or progress with this project, is there any chance you might eventually come back to it, for a self contained version you can sell?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Tue Apr 30, 2013 1:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Tricky wrote:</div><div class="quotecontent">I saw you'd commented on youtube that you have no plans or progress with this project, is there any chance you might eventually come back to it, for a self contained version you can sell?</div><br />Yes, definitely. I just don't have time or interest to work on this right now. As I've said before, getting it out there requires a lot of work, some on areas I'm not too familiar with (e.g. I've never done a custom PCB).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tricky</b> [ Tue Apr 30, 2013 2:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Understandable. I'm patient, just happy to see it's still on the to-do list <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> Thanks for all the work you've done!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>incrediblehark</b> [ Sun May 26, 2013 2:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just wanted to say I'm still interested in this project, not any attempt to rush you, I was just checking back in to see if there were any updates <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Muf</b> [ Mon Jun 03, 2013 6:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">Yes, definitely. I just don't have time or interest to work on this right now. As I've said before, getting it out there requires a lot of work, some on areas I'm not too familiar with (e.g. I've never done a custom PCB).</div><br /><br />Have you thought about teaming up with someone who does have experience, like <a href="http://krikzz.com/" class="postlink">Krikzz</a>, <a href="http://forums.nesdev.com/viewtopic.php?t=8781" class="postlink">HardWareMan</a>, <a href="http://godlikecontrols.com/" class="postlink">Toodles</a> or <a href="http://jvspac.kirurg.org/" class="postlink">invzim</a>? Seeing as this thread basically contains the full technical description of what you're doing, if you wait long enough someone else is just going to implement their own RGB hack based on your discovery, without cutting you in on the profits.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Jun 03, 2013 10:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Muf wrote:</div><div class="quotecontent"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">Yes, definitely. I just don't have time or interest to work on this right now. As I've said before, getting it out there requires a lot of work, some on areas I'm not too familiar with (e.g. I've never done a custom PCB).</div><br /><br />Have you thought about teaming up with someone who does have experience, like <a href="http://krikzz.com/" class="postlink">Krikzz</a>, <a href="http://forums.nesdev.com/viewtopic.php?t=8781" class="postlink">HardWareMan</a>, <a href="http://godlikecontrols.com/" class="postlink">Toodles</a> or <a href="http://jvspac.kirurg.org/" class="postlink">invzim</a>? Seeing as this thread basically contains the full technical description of what you're doing, if you wait long enough someone else is just going to implement their own RGB hack based on your discovery, without cutting you in on the profits.</div><br />Yeah I've thought about it briefly. If any of the fellas mentioned there want to partner up, feel free to PM me, although I won't have much time to work on this during the summer.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Jun 03, 2013 1:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This is sort of a tangent, but I figured I'd share:<br />On some level, the only hard part is intercepting the writes to the PPU; the rest is just a look-up-table. So I started coming up other ideas for what one might do with spare fuses in the FPGA. Since you're entirely wrapping the CPU side of the PPU anyway, if you considered adding some extended functionality, you'd want to make that availability detectable by the CPU.<br /><br />So, here's a list, with &quot;CPU side interceptions&quot; first:<br /><ul><li>Add read-only ID register to some currently write-only register to detect presence of extended functions</li><li>Allow steering of $4014 DMA to $2007 instead of only $2004</li><li>Writeable palette (not just for bikeshedding: allows 2C04 compatibility)</li><li>Swap reading 2000/2001 for 2C05 compatibility</li><li>Mask top 8/16 scanlines to conceal pop-on; mask right 8 columns to add symmetry to $2001.</li><li>Other upscaling ratios other than none and 2x. (3x is somewhere between the 1280x720p and 1366x768p timings; non-integer upscaling is also possible)</li><li>Control overscan color (color 0, black, arbitrary)</li><li>Intercept CLK to detect and disable missing pixel on start of visible odd fields (skip 4 oscillations to stretch scanline; detectable by watching PPU./RD and PPU.ALE)</li><li>Intercept CLK to stretch scanline by one extra oscillation of the 21MHz oscillator, to achieve exact NTSC timing; stretch 2C07 by 4 oscillations per scanline for exact PAL timing</li></ul>Here's a few more things you can get if you wrap the PPU address/data bus too:<br /><ul><li>NMI on PPU address match</li><li>Dual-ported access to PPU RAM during rendering (by hijacking ALE cycles; requires replacing the '373 also, but that's not difficult)</li><li>Irrelevantly(?) more robust palette write detection (detect palette writes by when PPU address is $3Fxx instead of intercepting writes to $2006)</li></ul><span style="font-size: 50%; line-height: normal">edit: fix minor brainos: 2C07 doesn't have missing pixel; &quot;right 8 <strong>scanlines</strong>&quot;, wat?</span>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Tue Jun 04, 2013 5:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you add any extras, it's no longer a NES.  Except for the masking ones and other view-only effects, those seem okay.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Jun 04, 2013 6:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />These are view-only: writeable palette; blank top, bottom, and right side without affecting sprite 0; upscaling; change blanking color.<br /><br />This can be done by postprocessing the crystal, and it won't be program-visible if fed to both the CPU and PPU clock inputs: Skip one period of the CLK input by one master clock at the start of each scanline and by four master clocks near the start of every second line 0. This would cause M2 to deviate slightly from 1.79 MHz, confusing some reset detection circuits, so space the skipped periods a bit apart throughout the first line.<br /><br />These can in theory be implemented on a Game Pak that intercepts the entire CPU and PPU bus: dual-ported VRAM (already present in MMC5 ExRAM); steering of $4014 DMA to VRAM.<br /><br />Only one is impossible on an NES and affects program-visible behavior: swap 2000/2001.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Tue Jun 04, 2013 8:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: RGB output from composite PPU</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">If you add any extras, it's no longer a NES.  Except for the masking ones and other view-only effects, those seem okay.</div>The point is, you're already adding new hardware. As long as the incompatibilities won't be accidentally triggered, who cares? That's the entire point behind adding the signature. Code can detect what's available and use it if it wants. I admit the second list is fairly pipedreamy, but the only one in the first list that's not largely invisible or usable for Vs. System compatibility is hijacking DMA. <br /><br />A nice addition—although I'm not altogether certain how to do it—would be a modification to the PAL NES to act more like a Dendy. (Fixing the 2A07's ÷16 is doable, but awkward, once you can inject a different clock frequency. Use an extra crystal or a PLL to make a CPU clock of ~28.4MHz. There's also the problem where vblank doesn't apparently last the whole 70 lines)<br /><br />Most other things are either view-only (clipping) or for 2C04 and 2C05 support (missing pixel, rewriteable palette). Having that means the PowerPak can now play Vs. System games without any modification (modulo some of the dip switches necessarily reading back as 0; fixing that would require hardware on the expansion port).<br /><br />Tepples has covered everything well, too.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>6</strong> of <strong>10</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
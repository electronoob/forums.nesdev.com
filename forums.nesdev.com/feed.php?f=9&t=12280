<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=9&amp;t=12280" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2015-01-23T20:20:48-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=9&amp;t=12280</id>
<entry>
<author><name><![CDATA[cubeboy]]></name></author>
<updated>2015-01-23T20:20:48-07:00</updated>
<published>2015-01-23T20:20:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139815#p139815</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139815#p139815"/>
<title type="html"><![CDATA[Re: Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139815#p139815"><![CDATA[
<div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><br />Shoulda figured I'd've made a braino when I did that. It's not 0=pressed, it's 1=pressed. Makes the code simpler, at least.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$ sha1sum *.nes<br />44faecce9db7391d886ae22289ef7d2545d25b6c  Family Trainer - Jogging Race (J).nes<br />ff3c93ebdd28003b8ab2da59ee331ebe11c906e7  FTJR.nes<br />$ md5sum *.nes<br />83971232ca97fe4d465b0af91a6888d6  Family Trainer - Jogging Race (J).nes<br />3f34b376601e0b90dc154699aa0af2f8  FTJR.nes<br />$ crc32 *.nes<br />179ea3d3   Family Trainer - Jogging Race (J).nes<br />6c8c4a98</div><br /></div><br />That worked. Thanks for the hack, it works perfectly.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6248">cubeboy</a> — Fri Jan 23, 2015 8:20 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2015-01-22T19:24:40-07:00</updated>
<published>2015-01-22T19:24:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139790#p139790</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139790#p139790"/>
<title type="html"><![CDATA[Re: Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139790#p139790"><![CDATA[
Shoulda figured I'd've made a braino when I did that. It's not 0=pressed, it's 1=pressed. Makes the code simpler, at least.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$ sha1sum *.nes<br />44faecce9db7391d886ae22289ef7d2545d25b6c  Family Trainer - Jogging Race (J).nes<br />ff3c93ebdd28003b8ab2da59ee331ebe11c906e7  FTJR.nes<br />$ md5sum *.nes<br />83971232ca97fe4d465b0af91a6888d6  Family Trainer - Jogging Race (J).nes<br />3f34b376601e0b90dc154699aa0af2f8  FTJR.nes<br />$ crc32 *.nes<br />179ea3d3   Family Trainer - Jogging Race (J).nes<br />6c8c4a98</div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Thu Jan 22, 2015 7:24 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cubeboy]]></name></author>
<updated>2015-01-22T18:40:30-07:00</updated>
<published>2015-01-22T18:40:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139789#p139789</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139789#p139789"/>
<title type="html"><![CDATA[Re: Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139789#p139789"><![CDATA[
I gave it a try and here's what I found. Just a quick summary of the game first, all running is on the middle row of buttons. Running on the middle two buttons runs in the middle lane in the game. The left two buttons run on the top lane, and the two right buttons is on the bottom lane. The top and bottom rows are for pushing opponents in the lanes next to you.<br /><br />Top Game Mode Selection: The top game recognizes the power pad, and it works, but if I try to run in the middle lane, the character shifts between the middle and top lanes. If I run on the left or right buttons, it runs in the middle lane.<br />Bottom Game Mode Selection: Once this game starts, the character does the push animation alternating between the two directions. None of the inputs seem to work. This does the same as the original version.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6248">cubeboy</a> — Thu Jan 22, 2015 6:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2015-01-22T19:32:38-07:00</updated>
<published>2015-01-21T16:14:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139735#p139735</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139735#p139735"/>
<title type="html"><![CDATA[Re: Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139735#p139735"><![CDATA[
Fortunately, this one needs an even simpler clever-disasm configuration:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">JumpTableRoutineWithAppendix $799E<br /></div><br /><br />The mat-reading code is at $FA2C - $FA42 and interleaved with code from $CE27-$CE36. It stores the mat's output in RAM $0418-$041A, in the 0x1E bits.<br /><br />Here's my mat-reading code (assembled with xa65, which I discovered assembles little patches more readily). There's a small 133 byte region unused at the end of PRG for Jogging Race, which I coopt:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   * = $FF75<br />   ;; 4017.D4, right-to-left:<br />d4ram:<br />        .db  0, 0, 0, 0, 1, 2, 0, 0 ; which memory location<br />d4bit:  <br />        .db  0, 0, 0, 0, 2, 2, 4, 2 ; which bit to set<br /><br />        ;; 4017.D3:<br />d3ram:  <br />        .db  1, 2, 2, 1, 2, 1, 0, 0<br />d3bit:<br />        .db  4, 4, 8, 8,16,16,16, 8<br /><br />ReadPowerPad:   <br />   ldx #1<br />   stx $4016<br />   dex<br />   stx $4016<br /><br />   stx $0418<br />   stx $0419<br />   stx $041A<br /><br />   ldy #7<br />LoopRead:   <br />   lda $4017<br />   pha<br />   and #$10<br />   beq NotD4<br />   ldx d4ram,y<br />   lda d4bit,y<br />   ora $0418,x<br />   sta $0418,x<br />NotD4:   <br />   pla<br />   and #8<br />   beq NotD3<br />   ldx d3ram,y<br />   lda d3bit,y<br />   ora $0418,x<br />   sta $0418,x<br />NotD3:   <br /><br />   dey<br />   bpl LoopRead<br /><br />   jmp $CE39<br /></div>Maybe someone better at 6502 golf might be able to fit this into less than 96 bytes? Or maybe just be more clever about it at all.<br /><br />Change four other bytes to use my new routine and skip the original one, and we have this:<br /><br />Edit: removed bad patch, see two later.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Wed Jan 21, 2015 4:14 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cubeboy]]></name></author>
<updated>2015-01-21T14:36:26-07:00</updated>
<published>2015-01-21T14:36:26-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139730#p139730</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139730#p139730"/>
<title type="html"><![CDATA[Re: Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139730#p139730"><![CDATA[
<div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><br />Hm. This may have been a poor choice; the original crashes for me in emulators. Anyway, if one of them catches your eye, name it and I'll try hacking it. It looks straight-forward.<br /></div><br />Jogging Race is the one I was mostly looking to play. I saw Arino play it on Game Center CX and thought it looked like it could be a lot of fun.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6248">cubeboy</a> — Wed Jan 21, 2015 2:36 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2015-01-20T19:34:55-07:00</updated>
<published>2015-01-20T19:34:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139705#p139705</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139705#p139705"/>
<title type="html"><![CDATA[Re: Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139705#p139705"><![CDATA[
Hm. This may have been a poor choice; the original crashes for me in emulators. Anyway, if one of them catches your eye, name it and I'll try hacking it. It looks straight-forward.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Tue Jan 20, 2015 7:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2015-01-20T14:44:40-07:00</updated>
<published>2015-01-20T14:44:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139692#p139692</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139692#p139692"/>
<title type="html"><![CDATA[Re: Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139692#p139692"><![CDATA[
This isn't too bad.<br /><br />Looking at &quot;Family Trainer - Fuuun! Takeshi Shiro 2 (J)&quot;, I used bisqwit's nescom clever-disasm to get out a nice disassembly with this configuration:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">JumpTable $01EE $01EF 2 14 JumpTable01EE 0<br /><br />CertainlyCode $4E56 Delay703Cy<br /><br />CertainlyCode $01CE DeadCode01CE<br />CertainlyCode $2FA4 DeadCode2FA4<br />CertainlyCode $5043 DeadCode5043<br />CertainlyCode $5057 DeadCode5057<br />CertainlyCode $5076 DeadCode5076<br />CertainlyCode $508B DeadCode508B<br /><br />CertainlyCode $36CC CopiedToRam36CC<br /><br />DataTable $3863 $3864 2 128 DataTable3863</div><br /><br />That indicates that the Family Trainer mat is read using the code from $CD98 through $CDC6 and $CE56 through $CE68, storing it ultimately in the lower nybble of RAM $25, $26, and $27. Replacing that with something that will read the Power Pad is straightforward, but I just want to post this information for now. I'll come back in a bit to finish the patch.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Tue Jan 20, 2015 2:44 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2015-01-19T19:45:54-07:00</updated>
<published>2015-01-19T19:45:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139660#p139660</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139660#p139660"/>
<title type="html"><![CDATA[Re: Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139660#p139660"><![CDATA[
The Family Trainer games use a different pad than the US Power Pad. (q.v. <!-- m --><a class="postlink" href="http://problemkaputt.de/everynes.htm#controllersmats">http://problemkaputt.de/everynes.htm#controllersmats</a><!-- m --> )<br /><br />i.e. ROM hacking is necessary.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Mon Jan 19, 2015 7:45 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cubeboy]]></name></author>
<updated>2015-01-19T19:41:19-07:00</updated>
<published>2015-01-19T19:41:19-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139659#p139659</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139659#p139659"/>
<title type="html"><![CDATA[Powerpak and Family Trainer Games]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12280&amp;p=139659#p139659"><![CDATA[
I'm trying to get the Family Trainer games to work on my power pak with my power pad, but I can't seem to get the power pad to respond for any of them. Would a person need to hack the rom to enable it, is it a mapper issue, or is something else completely?<br /><br />Call me crazy, but I love the power pad. Even my 10 and 11 year old love playing on it too when I bring it out every now and than. So I would love to expand my Power Pad library with some Family Trainer games, and am hoping it's an &quot;easy fix&quot;.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6248">cubeboy</a> — Mon Jan 19, 2015 7:41 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - MUSE (The Music Engine)</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">MUSE (The Music Engine)</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=8119">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=8119</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Wed Sep 14, 2011 4:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>MUSE (The Music Engine)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've released a new 6502 sound engine called MUSE. Here are some of the features:
<br />
<br />- Note slides
<br />- Volume slides
<br />- Glissando
<br />- Arpeggio
<br />- Vibrato
<br />- Tremolo
<br />- Vibrato depth and note slide speeds are independent of the note frequency
<br />- Note slides and arpeggio interact perfectly (you can have an instrument with an arpeggio envelope, and apply a note slide to it)
<br />- Sweep trick for setting the hibyte of pulse period without resetting phase
<br />- NTSC/PAL speed/frequency compensation
<br />- Global volume setting for volume fades, can be set to affect both music and sound effects, or just music
<br />- Sync events for synchronizing visuals to audio, among other things
<br />- Pausing of music and sound effects individually
<br />
<br />Download it from <!-- m --><a class="postlink" href="http://kkfos.aspekt.fi/projects/nes/muse/">http://kkfos.aspekt.fi/projects/nes/muse/</a><!-- m -->
<br />
<br />You'll also need v1.4 or later of <a href="http://kkfos.aspekt.fi/projects/nes/tools/pornotracker/" class="postlink">Pornotracker</a> if you actually want to use this library (the library package is also included in the Pornotracker release).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Sep 14, 2011 9:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks great to me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Sep 14, 2011 10:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks interesting, I guess I'll have to try this! The way you found to include this in a program is pretty interesting, because we get to choose where to place the code and the variables.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Wed Sep 14, 2011 11:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It is a good thing to have many ready-made sound solutions, although I suspect that most people will continue to reinvent the wheel and make their own players and tools anyway.
<br />
<br />Since Pornotracker has FamiTone-compatible export, it would be interesting to compare player+data size and CPU load for Muse and FamiTone using the same simple song (with FamiTone limitations, because it is inferior).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sivak</b> [ Wed Sep 14, 2011 2:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Might be something worth looking at for a future project.  The arpeggio is one thing that is missing from the engine I use.
<br />
<br />Sounds like a good thing though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Wed Sep 14, 2011 4:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I made a hacked version of Dragnsf2 with arpeggio support.  Want it?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Wed Sep 14, 2011 9:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Looks interesting, I guess I'll have to try this! The way you found to include this in a program is pretty interesting, because we get to choose where to place the code and the variables.</div><br />Yep, it was bit of a coincidence. I noticed that CC65 can generate "o65" type output files, and then convert those to a statically linkable library using a tool called "co65". I opted for this because the original source is very heavy on macro and CA65-specific feature usage, so it'd be very hard to port to different assemblers directly (especially maintenance would become hell).<br /><br /><div class="quotetitle">Shiru wrote:</div><div class="quotecontent">It is a good thing to have many ready-made sound solutions, although I suspect that most people will continue to reinvent the wheel and make their own players and tools anyway.</div><br />Yep, that's the way it goes. It's hard to satisfy everybody's needs. Some want more features and are fine with a bigger player size, some want the player size to be as small as possible and are fine with more CPU usage.<br /><br />Personally I'm looking to use this in a project where ROM size isn't a concern, so I set my goal to fit it in 8K (so it can be banked in). I haven't field tested it very much yet, so I don't know how well the song data size etc fair in comparison to other engines. I also plan to have WRAM so I may even add auto delay support some day...<br /><br />BTW FamiTone was a major inspiration in doing this engine, so thanks for that!<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Since Pornotracker has FamiTone-compatible export, it would be interesting to compare player+data size and CPU load for Muse and FamiTone using the same simple song (with FamiTone limitations, because it is inferior).</div>
<br />Yeah this could be interesting. Although if I remember correctly the FamiTone export from PT doesn't optimize instrument envelope references properly, for example (it just writes them all out for every used instrument), so this could affect the results.
<br />
<br />E: Forgot to answer to tokumaru.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Thu Sep 15, 2011 1:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Great job man and some clever coding there though at the same time I was disappointed to not be able to trawl through your player code.
<br />
<br /><img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />
<br />
<br />Edited to add: Auto-delay now too? <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Sep 15, 2011 10:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">Great job man and some clever coding there though at the same time I was disappointed to not be able to trawl through your player code.</div><br />Yep I'll probably release the original source some day...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Edited to add: Auto-delay now too? <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
<br />Yeah it's implemented in the tracker but not in MUSE at least yet. It's a very nice feature (especially now that I consider volume envelopes ending in 0 as note offs), so thanks for inventing it. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Fri Sep 16, 2011 4:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The more the merrier.  Good thing to see a new driver/editor combo.  
<br />
<br />nintendulor DX extensions, savetate for powerpak then this driver. Your on a roll these days <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Jul 16, 2012 1:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There's a new version (v03): <!-- m --><a class="postlink" href="http://kkfos.aspekt.fi/projects/nes/muse/">http://kkfos.aspekt.fi/projects/nes/muse/</a><!-- m -->
<br />
<br />Nothing too drastic, I changed the "speed compensation" so that envelope and arpeggio updates are also skipped whenever a frame is skipped. Previously I thought running them at the system rate would be better, but I've changed my opinion on that. Main problem is the volume envelopes, the difference in speed really can be heard there.
<br />
<br />I also added separate flags for speed compensation and note frequency compensation, so that it's possible to set just the note frequency compensation for Dendy.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jayminer</b> [ Sun Aug 26, 2012 11:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MUSE (The Music Engine)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It seems ca65 has a problem with one line being too long, and when I create asm-code with &quot;musetracker -s ....&quot; it creates one of those lines, so I have to manually edit the file each time I have made changes to a song or a sound effect. <br /><br />Nothing huge but a little annoyance, and if it could be fixed that would be awesome! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sun Aug 26, 2012 1:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MUSE (The Music Engine)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jayminer wrote:</div><div class="quotecontent">It seems ca65 has a problem with one line being too long, and when I create asm-code with &quot;musetracker -s ....&quot; it creates one of those lines, so I have to manually edit the file each time I have made changes to a song or a sound effect. <br /><br />Nothing huge but a little annoyance, and if it could be fixed that would be awesome! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br />I'll add that to the TODO list but I can't promise to fix it any time soon. Anyway, I'd recommend using the latest snapshot version of CA65 which shouldn't have that problem.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
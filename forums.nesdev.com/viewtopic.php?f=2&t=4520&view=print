<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - My first foray into making cinema displays</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">My first foray into making cinema displays</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4520">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4520</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Thu Oct 30, 2008 6:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>My first foray into making cinema displays</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, my newest game has an intro cinema, and I thought I'd show you guys a video of it. It's not that long. There's no text during the cinema because I don't really think it needs it too badly, as the story itself is simple. Anyway, here is a link to the vid:
<br />
<br /><!-- m --><a class="postlink" href="http://www.youtube.com/watch?v=M4o7Hskj-ck">http://www.youtube.com/watch?v=M4o7Hskj-ck</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Thu Oct 30, 2008 7:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Uh... Resident Evil style isn't my pretty thing.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>strat</b> [ Thu Oct 30, 2008 7:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Cool zombie at the end.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Thu Oct 30, 2008 7:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">strat wrote:</div><div class="quotecontent">Cool zombie at the end.</div>
<br />
<br />Thanks man, though it's not my work. Crap, I forgot to post in the original post that my buddy Dave did the art for the screens. He did the intro screen graphics, plus the title screen zombie. He also did the art for the boss, and has so far done one of the ending screens for the game. He's pretty damn pimpin' : )
<br />
<br />haha I love working with him, too. He's really laid back about it all, but whips out the graphics quick as hell. Great guy!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu Oct 30, 2008 8:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Don't like the glitches from turning the screen on at the wrong time.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Thu Oct 30, 2008 8:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, as far as I know, it only appears that one time, right?
<br />
<br />Also, how do I avoid that? What I'm doing at that point is changing the sprites from the 'guy on the phone' to the 'guy looking at the screen'. For some reason though, no matter what I do, I get this jumping thing happening, and don't know how to work around it. If you have some advice, don't hold back : )

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu Oct 30, 2008 8:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Don't turn the screen off during rendering if it's on, wait for an NMI before you turn it off.
<br />If you have the screen off, wait for an NMI before you turn it back on.
<br />
<br />I'll just assume you use that really simple NMI handler that just increments a byte in memory then immediately returns, and you are spinwaiting on that number to not be zero to wait for an NMI.  Then of course reset the number back to zero right before the wait.
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;'vblanked' is an equate which points to a byte somewhere in the zeropage<br />nmihandler:<br />&nbsp; &nbsp;inc vblanked<br />&nbsp; &nbsp;rti<br />;example of code to wait for NMI<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta vblanked<br />waitloop:<br />&nbsp; &nbsp;lda vblanked<br />&nbsp; &nbsp;beq waitloop<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Thu Oct 30, 2008 9:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, here is how I wait for a <em>frame</em> to happen:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">wait_for_nmi:&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; A routine that we can use<br />&nbsp; &nbsp;lda nmi_num&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; in the main loop to make <br />:&nbsp; &nbsp;cmp nmi_num&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; sure we are doing a frame<br />&nbsp; &nbsp;beq :-&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; through each loop.<br />&nbsp; &nbsp;rts<br /></div>
<br />
<br />See, this is something that I find confusing though. I've had a few people tell me 'wait for an NMI,' but I don't really understand how. See, this code above just says that an NMI happened already, not that things are ready to be changed and updated, etc. It's not like I'm <em>in</em> a blanking stage, if you know what I mean. Maybe I am and just don't understand the full gist of it, though. I don't know :/

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu Oct 30, 2008 9:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Roth wrote:</div><div class="quotecontent">See, this code above just says that an NMI happened already</div><br />Yes, the NMI routine is over, but whether VBlank is over depends on what was done in the NMI routine. If all you do is change that number, there certainly is a lot of VBlank time left.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It's not like I'm <em>in</em> a blanking stage, if you know what I mean.</div>
<br />You could be, depending on how much CPU time was used by the NMI routine. Many people don't do anything but change a flag or a counter, in which case the next 2200 or so cycles are still VBlank time.
<br />
<br />I'm assuming you are only using that loop to prevent the game logic from jumping to the next frame before the current one is rendered, right? Well, if you do a lot of things in your NMI routine and can't be sure you're still in VBlank when returning from it (as could be the case if you called your music engine from it, for example), you have to find some other way to safely disable and enable rendering.
<br />
<br />Maybe instead of directly manipulating the PPU register in the main code, you could use a flag to indicate if you want rendering on or off. Then, somewhere in your NMI routine you are sure is still during VBlank, read that flag and write to the PPU accordingly. That way, your program can issue orders to enable or disable rendering at any time, but they will only be executed at safe times.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Fri Oct 31, 2008 3:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This looks kind of Ninja-Gaiden style.
<br />It's pretty cool btw but the graphics could be better.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>albailey</b> [ Fri Oct 31, 2008 7:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think it looks good, and I like the style of graphics.
<br />How did you do that scroll part.  Are some of those sprites?
<br />
<br />Al

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Fri Oct 31, 2008 8:07 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This was heavily influenced by Ninja Gaiden, actually. Though of course it's not as stellar as that is, but once again, my baby steps hehe
<br />
<br />Thanks Al, and yeah, the main character is all sprites actually. The nametable at $2000 is all blue with the black top and bottom, and and the nametable at $2400 is all blue with the black top and bottom, but also with the zombie shadows in there. This way they can be offscreen, and I can push them onto the screen and also have the main character as sprites to move around. I didn't have any plans to try and insert words during it, so I didn't have to bother with figuring out how to do some zero hit stuff to scroll the cinema area; the entire screen scrolling worked fine for this case : )

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Fri Oct 31, 2008 8:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Nice intro for your first one.  I can't wait to make some too!  First I need to make the artwork thought (...).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Fri Oct 31, 2008 9:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">This was heavily influenced by Ninja Gaiden, actually.</div>
<br />Yeah, this is really obvious, but still looks cool. I think the main character doesn't look very good, it could be improved I guess, but it's just my guess. The zombie on title screen looks really impressive tough.
<br />
<br />I'd like to come with a method of making cinematics on the NES that would be a little different than what Ninja Gaiden does, but for now I can't do any in my current game (else I'd have to change the mapper it uses to get more CHRROM). I'd probably do it in further games.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>noattack</b> [ Fri Oct 31, 2008 2:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />tough crowd around here, roth.  i say great work!

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=8204" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2011-10-12T15:56:14-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=8204</id>
<entry>
<author><name><![CDATA[beannaich]]></name></author>
<updated>2011-10-12T15:56:14-07:00</updated>
<published>2011-10-12T15:56:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84995#p84995</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84995#p84995"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84995#p84995"><![CDATA[
Sherlock Holmes' skills of reasoning and deduction are second only to tepples.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4320">beannaich</a> — Wed Oct 12, 2011 3:56 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zelex]]></name></author>
<updated>2011-10-12T07:18:28-07:00</updated>
<published>2011-10-12T07:18:28-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84990#p84990</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84990#p84990"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84990#p84990"><![CDATA[
Never doubt tepples.... never<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4854">Zelex</a> — Wed Oct 12, 2011 7:18 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[beannaich]]></name></author>
<updated>2011-10-12T00:00:14-07:00</updated>
<published>2011-10-12T00:00:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84983#p84983</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84983#p84983"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84983#p84983"><![CDATA[
Figured it out, it was indeed the chrBank[].<br /><br />I had assumed that the buffer was being written to properly, and it wasn't. The buffer was filled with all 0's, causing every char to be read from the same 64 char page, as you alluded to earlier.<br /><br />D'oh!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4320">beannaich</a> — Wed Oct 12, 2011 12:00 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[beannaich]]></name></author>
<updated>2011-10-11T11:01:19-07:00</updated>
<published>2011-10-11T11:01:19-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84971#p84971</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84971#p84971"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84971#p84971"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />A. Print what's in chrBank[] each frame.<br /></div><br />SwitchChr is only called during initialization for this ROM. chrBank's contents are chrBank[n] = n<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />B. Step through your tile fetching in your IDE's debugger.<br /></div><br />I'll give this a shot.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4320">beannaich</a> — Tue Oct 11, 2011 11:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2011-10-11T10:30:31-07:00</updated>
<published>2011-10-11T10:30:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84969#p84969</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84969#p84969"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84969#p84969"><![CDATA[
Two things to try from here:<br /><br />A. Print what's in chrBank[] each frame.<br />B. Step through your tile fetching in your IDE's debugger.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Oct 11, 2011 10:30 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[beannaich]]></name></author>
<updated>2011-10-11T23:58:45-07:00</updated>
<published>2011-10-11T09:51:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84966#p84966</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84966#p84966"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84966#p84966"><![CDATA[
the test rom uses MMC1, below is my rom initialization code:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">base.SwitchChr&#40;Chr.Size08, Chr.Addr0000, 0x00&#41;;<br />base.SwitchPrg&#40;Prg.Size16, Prg.Addr8000, 0x00&#41;;<br />base.SwitchPrg&#40;Prg.Size16, Prg.AddrC000, 0x0F&#41;;</div><br /><br />SwitchChr is defined as:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">protected void SwitchChr&#40;int addr, int size, int page&#41;<br />&#123;<br />    page *= &#40;size&#41;;<br />    page &amp;= &#40;console.Rom.ChrRom.Length&#41; - 1;<br />    addr &amp;= &#40;size - 1&#41; ^ 0x07;<br /><br />    for &#40;int i = 0; i &lt; size; i++&#41;<br />    &#123;<br />        chrBank&#91;addr++&#93; = page++;<br />    &#125;<br />&#125;</div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4320">beannaich</a> — Tue Oct 11, 2011 9:51 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2011-10-11T09:43:40-07:00</updated>
<published>2011-10-11T09:43:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84965#p84965</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84965#p84965"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84965#p84965"><![CDATA[
This 64 tile difference is also the size of a CHR bank in MMC3 and plenty of other mappers. What mapper is the demo using, and how are you initializing its banks?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Oct 11, 2011 9:43 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[beannaich]]></name></author>
<updated>2011-10-11T09:25:10-07:00</updated>
<published>2011-10-11T09:25:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84963#p84963</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84963#p84963"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84963#p84963"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Can I see 1. the output of your pattern table viewer, 2. the output of your nametable viewer, and 3. a hex dump of the relevant page of nametable memory?<br /></div><br /><br />The ROM isn't bugged, if that's what you're getting at. I'll log all writes to $2007.<br /><br />edit: <a href="http://www.mediafire.com/?ff4om4lf57lorm6" class="postlink">log</a> suggests that the ppu is doing things wrong. which is odd since i can run other roms just fine<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4320">beannaich</a> — Tue Oct 11, 2011 9:25 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2011-10-11T09:20:44-07:00</updated>
<published>2011-10-11T09:20:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84962#p84962</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84962#p84962"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84962#p84962"><![CDATA[
<div class="quotetitle">beannaich wrote:</div><div class="quotecontent"><br />do you have any clue where "print_char_" is defined?<br /></div><br />Set up a debugger and trap all writes to $2007.<br /><br />Can I see 1. the output of your pattern table viewer, 2. the output of your nametable viewer, and 3. a hex dump of the relevant page of nametable memory?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Oct 11, 2011 9:20 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[beannaich]]></name></author>
<updated>2011-10-11T09:19:22-07:00</updated>
<published>2011-10-11T09:19:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84961#p84961</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84961#p84961"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84961#p84961"><![CDATA[
Beat me to it, tepples!<br /><br />I still have no idea why this is occurring, my cpu passes all test roms. do you have any clue where "print_char_" is defined? that might help me to solve this bug.<br /><br />I have a pattern table viewer, it looks garbled there as well. I know the problem is with the CPU, that's why I was digging around in the source. I just can't find where in the source the characters are actually printed.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4320">beannaich</a> — Tue Oct 11, 2011 9:19 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2011-10-11T09:16:36-07:00</updated>
<published>2011-10-11T09:16:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84959#p84959</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84959#p84959"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84959#p84959"><![CDATA[
Try replacing each such character with the character 64 characters later in the ascii table. For example, in Python:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">string_01 = &quot;&quot;&quot;&#41;-0,&#41;%$&quot;&quot;&quot;<br />print &quot;&quot;.join&#40;chr&#40;ord&#40;c&#41; + 64&#41; for c in string_01&#41;<br />string_02 = &quot;&quot;&quot;&#41;--%$&#41;!4%&quot;&quot;&quot;<br />print &quot;&quot;.join&#40;chr&#40;ord&#40;c&#41; + 64&#41; for c in string_02&#41;</div><br />produces<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">implied<br />immediate</div><br />Your homework:<br /><ol style="list-style-type: decimal"><li>Make a pattern table viewer. </li><li>Look at what's being written to the nametable memory. If it looks garbled, the problem is in your CPU. If it looks like ASCII, the problem is in your PPU, possibly in your CHR bankswitching. </li></ol><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Oct 11, 2011 9:16 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[beannaich]]></name></author>
<updated>2011-10-11T09:17:14-07:00</updated>
<published>2011-10-11T08:59:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84958#p84958</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84958#p84958"/>
<title type="html"><![CDATA[blargg's test rom's console output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8204&amp;p=84958#p84958"><![CDATA[
Ok, here's a weird one. I was running some of blargg's magnificent test roms on my emulator, when the output window of one of them <a href="http://i1132.photobucket.com/albums/m580/beannaich/Capture.png" class="postlink">caught my eye™</a><br /><br />At first, I thought the entire window was screwed to hell. But then I noticed that only strings are garbled, constants and numbers are just fine!<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01-/garbled crap here/<br />02-/garbled crap here/<br />...<br />11-/garbled crap here/</div><br /><br />So, I went digging through the source to see what was going on. I see a lot of calls to a sub-routine called "print_char_", yet I can't find it's definition anywhere. Anyways, if anyone knows more about this (read: blargg) and wants to help me out, that would be splendid!<br /><br />edit: all string character values seem to be -40h of what they should be..<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4320">beannaich</a> — Tue Oct 11, 2011 8:59 am</p><hr />
]]></content>
</entry>
</feed>
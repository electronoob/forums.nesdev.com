<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Please try my NES emulator HDNes</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Please try my NES emulator HDNes</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=9935">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=9935</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>12</strong> of <strong>19</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Aug 25, 2014 1:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You may as well just set aside all of Nintendo's AxROM, BNROM, and UxROM games right now, rather than bothering to test them—they all use CHR-RAM.<br />SGROM, SMROM, SNROM, SOROM, SUROM, SXROM, TGROM, and TNROM too.  ( <!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/SxROM">http://wiki.nesdev.com/w/index.php/SxROM</a><!-- m --> &amp; <!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/TxROM">http://wiki.nesdev.com/w/index.php/TxROM</a><!-- m --> )

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GGuy</b> [ Tue Aug 26, 2014 12:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Alrighty, thanks for the suggestion.<br />I'm pretty much finished with it now. Just a few more Japanese carts left to check. Hopefully this list will help anyone that wants to make a pack.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>LittleMike</b> [ Tue Aug 26, 2014 12:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=1911&amp;mode=view"><img src="./download/file.php?id=1911&amp;t=1" alt="QQ截图20140826153810.jpg" /></a><br />
			<span class="gensmall">QQ截图20140826153810.jpg [ 120.16 KiB | Viewed 1846 times ]</span>
		

		<br />
	</div><br />hi, author!<br />the tiles which color are red correspond to the same one,<br />how can i make the tiles correspond to the different?<br />sorry i dont know much about the technic.<br />my problem may be naive...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mkwong98</b> [ Tue Aug 26, 2014 2:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">GGuy wrote:</div><div class="quotecontent">Alrighty, thanks for the suggestion.<br />I'm pretty much finished with it now. Just a few more Japanese carts left to check. Hopefully this list will help anyone that wants to make a pack.</div><br /><br />Thank you! It will be useful for me too.<br /><br /><div class="quotetitle">LittleMike wrote:</div><div class="quotecontent">hi, author!<br />the tiles which color are red correspond to the same one,<br />how can i make the tiles correspond to the different?<br />sorry i dont know much about the technic.<br />my problem may be naive...</div><br /><br />Sorry, the emulator can't do that yet. BTW do you speak Chinese? You can ask questions in Chinese if you want. If you ask in Chinese here, I'll translate it to English for other readers. Or you can ask in the Chinese board and notify me about it, then I'll answer it there.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tygerbug</b> [ Tue Aug 26, 2014 2:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It would be interesting to see Yie Ar Kung Fu in an HD Street Fighter style.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shonumi</b> [ Tue Aug 26, 2014 6:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hey, I am the author of GB Enhanced, a Game Boy emulator that has the same ability as HDNES more or less (just without a GUI at the moment...)<br /><br />I have been watching your work and just wanted to stop and say hello. I am really excited to see the source code online on GitHub. I would like to see your approach to handling certain situations, so I will examine the code some time soon.<br /><br />I am also working on a white-paper detailing a general &quot;theory&quot; about &quot;HD Graphics&quot; in 2D systems like the NES, Genesis, Game Boy, etc, by replacing the game's graphics (the tiles). I am still working on it, but I would like to have the input from another person developing a similar emulator. I see LittleMike asked about replacing tiles that are technically the same on a given screen. I can assure you, this too is an issue I have encountered, and I believe it is an inherent issue that emulators like ours must deal with. How would you solve the problem LittleMike described? Do you have any ideas (even untested ones) that might work? I do not know much about the NES (I know a lot about the GB/GBC/GBA systems though) so I would like to hear what you would do. I have my own preliminary idea on how to solve LittleMike's problem, but it still needs to be refined.<br /><br />Keep up the good work <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tygerbug</b> [ Tue Aug 26, 2014 6:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You're doing great work, Shonumi.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mkwong98</b> [ Tue Aug 26, 2014 8:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Shonumi wrote:</div><div class="quotecontent">Hey, I am the author of GB Enhanced, a Game Boy emulator that has the same ability as HDNES more or less (just without a GUI at the moment...)<br /><br />I have been watching your work and just wanted to stop and say hello. I am really excited to see the source code online on GitHub. I would like to see your approach to handling certain situations, so I will examine the code some time soon.<br /><br />I am also working on a white-paper detailing a general &quot;theory&quot; about &quot;HD Graphics&quot; in 2D systems like the NES, Genesis, Game Boy, etc, by replacing the game's graphics (the tiles). I am still working on it, but I would like to have the input from another person developing a similar emulator. I see LittleMike asked about replacing tiles that are technically the same on a given screen. I can assure you, this too is an issue I have encountered, and I believe it is an inherent issue that emulators like ours must deal with. How would you solve the problem LittleMike described? Do you have any ideas (even untested ones) that might work? I do not know much about the NES (I know a lot about the GB/GBC/GBA systems though) so I would like to hear what you would do. I have my own preliminary idea on how to solve LittleMike's problem, but it still needs to be refined.<br /><br />Keep up the good work <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br /><br />If the tiles are stationary then I can use the tile location as well as the tile pattern and color to identify the tile, or I can let the user add a HD background image based on some value in the RAM. Otherwise it may be possible to use tile location and the scroll offset values from RAM to identify every single background tile on the screen, but that will be much more complicated and may require a script engine.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Aug 26, 2014 8:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think a hash table based on tile pattern would probably be the most productive way to start handling CHR RAM based systems like Master System, Game Boy family, and 25% of the FC/NES library. (I just checked NesCartDB, and 356 out of the 1397 known distinct games contain CHR RAM.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shonumi</b> [ Tue Aug 26, 2014 9:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@tepples - This is the conclusion I have come to, and it pretty much forms the basis for my general theory on being able to replace 2D graphics for any tile-based console or handheld. Adequate hashing (in theory anyway) should provide every single tile for a system. So long as you can generate a unique hash for every tile that the emulator wants to draw, it should be possible to replace that. Obviously there are unique difficulties to adapt to (like when colors &quot;fade in&quot; or &quot;fade out&quot; which requires some careful hashing of tile and palette data) but that is the gist of it.<br /><br />One of the bigger problems I have faced using this method is that some tiles are usually reserved for the background but appear in multiple places and serve multiple functions. The all-white tiles that make up the sky in Super Mario Land are a great example. These can be hashed, dumped, and edited, but this has the effect of replacing <strong>every</strong> all-white tile in the game, unfortunately, because the hash is the same. Not only is the &quot;sky&quot; replaced, but everywhere that has a white background (which is most of the game). To this end, I have disabled dumping tiles that are solid colors by default. Obviously this issue is reduced when moving to the GBC and the GBA, since the tiles become more unique and varied.<br /><br />@mkwong98 - Someone mentioned to me that using the location of a tile to be included as part of a hash (or an ID if you will) would be a nice solution for something like LittleMike's problem. I have no idea about how viable that is on the NES, but I have expressed my doubts, at least as it concerns the Game Boy. I guess what you NES folks call the Nametable is most comparable to the GB family's Background Maps. I believe you are correct when it comes to replacing stationary images, since this is very simple. The Background Map is essentially static data at that point. When the screen moves in scrolling games, however, the BG Map is rewritten (not all at once, usually) because new areas need to be shown. Is this how NES games with CHR RAM work as well? <br /><br />If that is the case, it makes replacing tiles like LittleMike pointed out troublesome because the tile's location in the Nametable/Background Map continually changes. It is definitely possible to do it for non-stationary backgrounds, I just can't imagine it being very fun to code <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />Sorry if you consider this off-topic talk, I just find this to be a fascinating area of emulation, one we have yet to perfect, and one that we have yet to fully exploit.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mkwong98</b> [ Tue Aug 26, 2014 10:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />For CHR RAM games, besides the tile pattern, HDNes also remembers the address of the last PRG ROM read when writing the tile to CHR RAM. The emulator assumes the game does not read from other PRG ROM addresses when transfering tiles from PRG ROM to CHR RAM. Then this address can be used as part of the tile identification as well. I'm not sure how well this will work, I haven't make a HD pack for a CHR RAM game yet.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GGuy</b> [ Tue Aug 26, 2014 11:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hey Shonumi. I believe it was me that suggested the ID thing. I posted it on google code. Anyways I have an idea about the all solid colors thing. It's not ideal but what I've been doing is editing the CHR data in the rom and making the solid tiles unique. Of course having people patch a rom is kind of a pain so perhaps the way to resolve this temporarily is to implement ips patching. Then whoever makes an HD pack can simple add a IPS file to the directory and resolve any duplicate hash problems because they would have edited the solid colors in the CHR.<br /><br /><s>Mkwong, I&#39;ve experimented with Metroid a CHR-RAM game and the only issues I was running into was unsupported mappers. It&#39;s been awhile since I did anything with that though so I will need to retest that.</s><br />edit: Well that's strange. Starting a CHR-RAM game with graphic pack data now crashes the emulator.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shonumi</b> [ Wed Aug 27, 2014 12:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@GGuy - Oh, so that was you <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> Actually what you suggested just now is very similar to the WIP idea I have. Essentially I guess you would call it a &quot;Virtual Tile Map&quot; (&quot;Virtual Nametable&quot; in NES-speak?) in that the emulator reads the Map data as usual, but the user can forcibly override certain entries with data of their own. It's basically in-game patching, but without touching the ROM itself. I am trying to figure out a reliable implementation; the emulator needs to determine when it is time to override the Map provided by the ROM, and when to leave it alone.<br /><br />mkwong98's comments about detecting transfer addresses into CHR-RAM (or really just VRAM in GB-speak) is something I will consider in solving the so-called &quot;solid-color&quot; problem. There's something there, I know it. I'm too busy getting my GBA emulator off the ground to mess with anything GB/GBC related though.<br /><br />I will give HDNES a try later this weekend. It is Windows only, correct? I should be able to run it in WINE though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Aug 27, 2014 6:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Shonumi wrote:</div><div class="quotecontent">I guess what you NES folks call the Nametable is most comparable to the GB family's Background Maps. I believe you are correct when it comes to replacing stationary images, since this is very simple. The Background Map is essentially static data at that point. When the screen moves in scrolling games, however, the BG Map is rewritten (not all at once, usually) because new areas need to be shown. Is this how NES games with CHR RAM work as well? </div><br />Yes. Both games with CHR ROM and games with CHR RAM work this way. Load Contra into an emulator with a nametable viewer and see updates at the scroll seam not unlike <a href="http://wiki.nesdev.com/w/index.php/File:SMB1_scrolling_seam.gif" class="postlink">those of Super Mario Bros.</a> Heck, SMB1 itself runs on at least one board with CHR RAM, namely the Nintendo World Championships (NES-EVENT) board.<br /><br /><div class="quotetitle">GGuy wrote:</div><div class="quotecontent">Anyways I have an idea about the all solid colors thing. It's not ideal but what I've been doing is editing the CHR data in the rom and making the solid tiles unique.</div><br />That might work for CHR ROM, not so much for CHR RAM because a solid tile often compresses to one or two bytes. And for a couple compression methods I've been meaning to implement, not even &quot;last data fetch from ROM&quot; would help because they'd end up seeing a constant table used by the decompression code. Your real-time IPS would end up having to rewrite all the CHR loading code to write a unique ID instead of tile data.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mkwong98</b> [ Wed Aug 27, 2014 8:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Please try my NES emulator HDNes</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">GGuy wrote:</div><div class="quotecontent">edit: Well that's strange. Starting a CHR-RAM game with graphic pack data now crashes the emulator.</div><br /><br />Ok I fixed the bug when reading HD pack of CHR-RAM games. Thanks for telling me.<br /><br /><div class="quotetitle">Shonumi wrote:</div><div class="quotecontent">I will give HDNES a try later this weekend. It is Windows only, correct? I should be able to run it in WINE though.</div><br /><br />Yes, it is windows only. The platform specific code is for file and directory handling and I can't figure out how to do it cross platform. <br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">That might work for CHR ROM, not so much for CHR RAM because a solid tile often compresses to one or two bytes. And for a couple compression methods I've been meaning to implement, not even &quot;last data fetch from ROM&quot; would help because they'd end up seeing a constant table used by the decompression code. Your real-time IPS would end up having to rewrite all the CHR loading code to write a unique ID instead of tile data.</div><br /><br />If I can define a list of address ranges to be included/excluded when monitoring the last data fetch then it might work. Script engine will be the most robust approach. I have problems keeping it running at 60 fps as it is so I'm not too keen on adding more to it yet. <br /><br />Shonumi, which library do you use for graphics? I'm using GLSL, but the uploading the tiles as a texture onto the graphics card is not a fast process and doing it every frame makes the emulator very slow on older machines. <br /><br />GGuy, what program did you use to record the youtube clips? I can't a recording with good frame rate and no slow down.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>12</strong> of <strong>19</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
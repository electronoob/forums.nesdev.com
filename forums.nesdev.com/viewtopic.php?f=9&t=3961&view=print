<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Idea for &quot;perfect&quot; nes rgb.</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Idea for &quot;perfect&quot; nes rgb.</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3961">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3961</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jeroen</b> [ Sat Mar 08, 2008 2:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Idea for &quot;perfect&quot; nes rgb.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ok we've seen the people that put a playchoice ppu into their nes right? (for rgb) Only problem with that is that the pallet is not a 100% the same. 
<br />I have divised a solution to this:
<br />step 1.) take a playchoice ppu and solder it in place of nes ppu
<br />step 2.) make a sort of game genie like device that takes all pallet writes checks the data if it's one of the "offending" colors.
<br />step 3.) if one of these colors "translate" them
<br />step 4.) play in pixel perfect rgb.
<br />
<br />What do you guys think?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Mar 08, 2008 2:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />While we're wishing for things, why not wish for someone to develop/reverse engineer the NES PPU chip and just add RGB out pins to it? Surely the PPU can be cloned as the NES pirate machines emulate it fairly well. Just make a replacement PPU chip to solder in. 
<br />
<br />But I wouldn't count on anyone doing anything. Honestly the best solution is to use a good old standard CRT with Composite input. For NES it doesn't make THAT big of a difference.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jeroen</b> [ Sat Mar 08, 2008 2:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ya know my idea is kinda feasible dude. Your idea requires a fpga (expensive) extensive time and knowledge of the entire ppu. Altough my idea might not be super easy, I think it can be pulled off. Btw Kevtris actually made an entire nes in an fpga so ya you can put ppu's on "different' things. Making asics is too expensive as wel as it requires mass production.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Mar 08, 2008 3:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I wasn't saying your idea isn't doable. I have no idea if it is or not. I know that a PPU replacement is possible, and yes I imagine it wouldn't be cheap.
<br />
<br />That's why in the end I believe the best solution is a good quality CRT display with Composite Video input. I use an RGB monitor that also features composite video and I really think the NES isn't in any need of a better signal quality unless you are playing on a HDTV, Digital TV, or LCD, or something else other than your regular analog tube. Then I could understand wanting RGB or something.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jeroen</b> [ Sat Mar 08, 2008 3:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />take a guess sherlock <img src="./images/smilies/icon_wink.gif" alt=";-)" title="Wink" /> . Also rgb just looks nicer overall.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Sat Mar 08, 2008 5:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Your idea is not feasible because you can't disable the CPU's data output (in order for your device to replace the CPU's value with one from a LUT) without modifying the console. Even if you could, it'd be pointless since the RGB PPUs don't just have a mixed up palette, even the correct colors are off.
<br />
<br />A PPU clone is the only reasonable way to get NTSC color RGB output. BTW it doesn't need to be an expensive mask ASIC, it can be a couple large CPLD or even in an antifuse FPGA.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jeroen</b> [ Sat Mar 08, 2008 5:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well the whole idea was to modify it. But if even the correct colors are of. Well ya then this project has no reason to even begin.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Mar 08, 2008 11:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />As tepples has posted elsewhere, the standard NES composite video signal has enough information to fully recover the palette indicies of every pixel, which is enough to create an RGB signal or even capture every frame as perfectly as an emulator could generate. The PPU outputs pixels at a 5.37 MHz rate, which is less than double the color carrier rate, so every pixel has sufficient information to deteremine the phase and low and high levels of the particular color. The carrier is generated from the 21.48 MHz master clock multiplied by 2 (clocked on both transitions) to get 42.96 MHz, then divided by 12. This gives 12 color phases, each a square wave with 6 clocks high and 6 clocks low. 5.37 MHz is 1/8 this 42.96 MHz rate. This gives 8 clocks of the color carrier wave in each pixel, so it will always capture the transition and thus the phase. Decoding this wouldn't require anything expensive like an FPGA, just a small programmable logic chip.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Mar 08, 2008 11:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So you could attach/wire to a small logic chip to take the Composite output and convert it back into RGB+Composite Sync? It's be interesting, though I still think the benifit would mainly be for HDTVs/Digital TVs. For my Analog RGB monitor, the difference between the NES in Composite and in RGB would probably not be significant enough to bother. Certainly though if I wanted to hook up to a LCD or something it would rock to connect it via Component or RGB if I had it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Mar 08, 2008 11:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So you could attach/wire to a small logic chip to take the Composite output and convert it back into RGB+Composite Sync?</div><br />Yes, exactly. It'd be <em>perfect</em> RGB.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">For my Analog RGB monitor, the difference between the NES in Composite and in RGB would probably not be significant enough to bother.</div>
<br />It'd be very noticeable even on a component video TV. I imagine the Wii's Virtual Console looks the same as this would.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Sun Mar 09, 2008 12:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />But that method still requires an extremely fast 42 Msample ADC, a PLL to multiply the 21 MHz clock for the ADC and single edge counters, a CPLD (you'd be lucky if you could get two 4-bit counters into any simple PLD) and an external ROM providing the RGB LUT, or am I missing something?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sun Mar 09, 2008 9:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />No PLL, just clock on each edge of the 21 MHz clock. No ADC, just use a few analog comparators to decode to 6 or so video levels. For decoding, I figure a shift register or perhaps a microcontroller could do it. I'm not a hardware wizard so maybe it would be somewhat costly. Perhaps I'll write some C code that shows at least what would have to be accomplished (encodes pixels into a waveform, then decodes them).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Sun Mar 09, 2008 11:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Under normal circumstances you can only get something to react on either edge of the clock, for both you need extra finesse. The simplest way I can think of to double pump a flipflop is to phase shift the clock 90 degrees and XOR it against itself. Maybe an RC filter could give the phase shift and a XOR with Schmitt trigger inputs could provide the 42 MHz output, I'm not positive though since I'm not a wizard in anything ;)
<br />
<br />6 video levels means either 6 video grade comparators (in 3 chip packages) or just the cheapest fast ADC you can find.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sun Mar 09, 2008 12:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Under normal circumstances you can only get something to react on either edge of the clock, for both you need extra finesse. The simplest way I can think of to double pump a flipflop is to phase shift the clock 90 degrees and XOR it against itself.</div><br />I figured you could just clock one thing at 21 MHz, and another with the inverted 21 MHz, and combine the things clocked, no analog components. Maybe that's how the PPU's phase generator works: two identical units, each giving six phases, with one clocked with an inverted input. Then the hue selects which of these twelve phases to use.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">6 video levels means either 6 video grade comparators (in 3 chip packages)</div>
<br />Oh, so regular components aren't fast enough. Figures, since 42 MHz is pretty high. Oh well, maybe it would be somewhat expensive then.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rbudrick</b> [ Fri Mar 14, 2008 6:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">kyuusaku wrote:</div><div class="quotecontent">Your idea is not feasible because you can't disable the CPU's data output (in order for your device to replace the CPU's value with one from a LUT) without modifying the console. Even if you could, it'd be pointless since the RGB PPUs don't just have a mixed up palette, even the correct colors are off.<br /><br />A PPU clone is the only reasonable way to get NTSC color RGB output. BTW it doesn't need to be an expensive mask ASIC, it can be a couple large CPLD or even in an antifuse FPGA.</div>
<br />
<br />I've heard the blacks are off on Vs. PPUs, but the colors too?  This is news to me.  All of them?  Just how off are they?  
<br />
<br />-Rob

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - How to designs NES ON FPAG</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">How to designs NES ON FPAG</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=4316">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=4316</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>xyzgto</b> [ Tue Aug 19, 2008 12:06 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>How to designs NES ON FPAG</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I uses develop version: XILINX SPARTAN- 3E STARTER KIT  
<br />
<br />How does want NES puts up go? 
<br />
<br />There is at want before me, Seek NES IC, Its IP at goes use procedure DUMP out, 
<br />
<br />Does not know he IC is what, Too has no DUMP procedure, Can someone help I?
<br />
<br />Sorry, My English not very good, This is use translate software turn over become English

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>sleepy9090</b> [ Fri Aug 29, 2008 3:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />i just bought one of these, lets figure it out?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Fri Aug 29, 2008 5:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There's no way to "dump" the IP from the NES CPU and PPU, you're on your own to reimplement all the logic either from reverse engineering or by gaining access to Nintendo secret files. I'm also developing a FC clone using a Spartan 3E in mixed schematic entry and Verilog based off Nesdev documentation. Maybe I can help with some FPGA pointers but I'm not interested in working in a team project with this, the IP is too valuable.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri Aug 29, 2008 5:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Gonna make your own Famiclone and make millions? <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Fri Aug 29, 2008 6:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />One can dream ;) But there is still a lot of $$$ to be made from Famiclones, I'm guessing especially ones with 720p/1080p output or other trendy features.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Aug 30, 2008 1:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Gonna make your own Famiclone and make millions? Wink</div>
<br />When I'll have finished my studies in electronics engineering I could definitely do something like that. Now that the pattent have expired for the NES I guess this is legal (even if the official patents are inacurade, which is cheat from Nintendo).
<br />
<br />Anyway Kevin Horton was the first to sucessfully did something like that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Aug 30, 2008 6:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">kyuusaku wrote:</div><div class="quotecontent">One can dream <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /> But there is still a lot of $$$ to be made from Famiclones, I'm guessing especially ones with 720p/1080p output or other trendy features.</div>
<br />The NES architecture assumes 240p output. I can see a few advantages of 480p or bigger output: <ol style="list-style-type: lower-alpha"><li>emulating <a href="http://www.youtube.com/results?q=super+mario+bros+race" class="postlink">more than one NES at once</a>, </li><li>a hint screen displayed above the game window like in PlayChoice, </li><li>less lag from typical entry-level flat TVs' upscalers, and </li><li>the possibility of Scale#x or hq#x output. </li></ol>
<br />But I'm not sure that those features can easily fit onto an affordable FPGA.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sun Aug 31, 2008 11:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Any Famiclone that actually does sound and video and many other things right that all the Famiclones FAIL at would be nice. It's a shame the market is stuffed full of shitty NES clones as many average users will think there is nothing wrong when there is so much wrong.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Fri Sep 12, 2008 5:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Little bump..
<br />
<br /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">Any Famiclone that actually does sound and video and many other things right that all the Famiclones FAIL at would be nice. It's a shame the market is stuffed full of shitty NES clones as many average users will think there is nothing wrong when there is so much wrong.</div>
<br />It will be VERY hard for me to get that accurate, at least for a long time. The clones actually are clones afterall, they just have a few sloppy parts probably from mistakes viewing the mask.
<br />
<br />Right now my clone doesn't really even have a CPU yet, just someone else's HDL core I haven't tested as a placeholder. Currently I'm working on the PPU so I can hit the ground running. I've got a prototype for all the components designed except for sprite evaluation, I just need to put it all together and design a basic upscanner to see some results..
<br />
<br />I think also if things work out I can use my design to write a visual tech document, like a more accurate update to Brad Taylor's and integrate newer info from the forum.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>CartCollector</b> [ Sat Sep 13, 2008 12:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You almost have the PPU done? You should make a board that can be put in to an NES to replace the normal PPU and output multiple video formats. Like have one board with RGB and Component and another with S-Video and  composite. The S-Video/composite board should have the color carrier rotate 180 degrees every scanline and switch off every frame, for example:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;Scanline:&nbsp; &nbsp; &nbsp; Odd&nbsp; &nbsp; Even&nbsp; &nbsp; <br />&nbsp;Odd Frames:&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 180<br />Even Frames:&nbsp; &nbsp; &nbsp; 180&nbsp; &nbsp; &nbsp; 0<br /></div>
<br />
<br />I don't think the NES already does this (someone correct me if I'm wrong).
<br />
<br />Also, it should have the luminance and chrominance signals filtered before they are combined to form the composite output.
<br />
<br />If you don't understand what I'm getting at, let me know.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Sat Sep 13, 2008 1:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think plopping the FPGA into a NES would be far too difficult/time consuming/expensive, I'm going to keep it all on my development board. I have also thought of composite and S-video, but that's quite a long way ahead... First I'll have to look into the possibility of generating S-video with the original method.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Sep 14, 2008 10:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">CartCollector wrote:</div><div class="quotecontent">The S-Video/composite board should have the color carrier rotate 180 degrees every scanline and switch off every frame</div>
<br />That's actually the point of 20th scanline being short by one pixel. (I'd point you at the wiki but it's down for me).
<br />
<br />It doesn't always look good, though -- especially with scrolling content. (The last time I played with a modern ATI card's composite/s-video out, it included a bunch of different color modulation options because different pictures look better with different characteristics).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Stief21774</b> [ Sun Sep 14, 2008 3:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A few months ago, I tried to make a NES in VHDL/Verilog, and run it on a Virtex-II PRO development system from Digilent.  I was sucessful in playing donkey kong on it (without audio).
<br />
<br />I recently started working on it again.  I'm trying to pipeline the PPU, and implement audio.
<br />
<br />kyuusaku:  I am also using someone else's CPU.  I got mine from <!-- w --><a class="postlink" href="http://www.birdcomputer.ca">www.birdcomputer.ca</a><!-- w -->. After through testing, I only found one small bug involving the RTI instruction.  I've been meaning to e-mail them to get it fixed and just haven't gotten around to it yet.
<br />
<br />I like your idea about creating a new tech document.  All of the documents I've found have been incomplete and a few even contradict each other.
<br />
<br />-Kenny

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>CartCollector</b> [ Sun Sep 14, 2008 4:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The S-Video/composite board should have the color carrier rotate 180 degrees every scanline and switch off every frame</div>That's actually the point of 20th scanline being short by one pixel. (I'd point you at the wiki but it's down for me).</div>
<br />
<br />Actually, being short by one pixel only rotates the phase by 240 degrees, not 180, since the CPU and the color carrier oscillate at a ratio of 2 color carrier cycles to 3 PPU cycles. 3.58/5.37 = 2/3. (2/3)*360 = 240. Visually:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Original color carrier:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;---&nbsp; &nbsp;---&nbsp; &nbsp;---&nbsp; &nbsp;---<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;___&nbsp; &nbsp;___&nbsp; &nbsp;___&nbsp; &nbsp;___<br />CPU clock:<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;--&nbsp; --&nbsp; --&nbsp; --&nbsp; --&nbsp; --<br />&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;__&nbsp; __&nbsp; __&nbsp; __&nbsp; __&nbsp; __<br />Color carrier -1 CPU cycle:&nbsp; <br />&#40;4 dashes&#41;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;-&nbsp; &nbsp;---&nbsp; &nbsp;---&nbsp; &nbsp;---&nbsp; &nbsp;--<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ___&nbsp; &nbsp;___&nbsp; &nbsp;___&nbsp; &nbsp;___&nbsp; <br /><br />Original color carrier:<br />&#40;again&#41;&nbsp; &nbsp;&nbsp; ---&nbsp; &nbsp;---&nbsp; &nbsp;---&nbsp; &nbsp;---<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;___&nbsp; &nbsp;___&nbsp; &nbsp;___&nbsp; &nbsp;___</div>
<br />
<br />Notice how the original and phase-shifted color carriers' clock edges do not exactly match up. 
<br />
<br />Look at Nestopia with the NTSC filter on and you'll notice that color and luminance decoding errors are still noticeable on still images, which they wouldn't be if the phase rotated by 180 degrees. For instance, if one white pixel surrounded by black pixels created interference in the chroma bandwidth that caused it to be yellow tinted, it would be blue tinted in the next frame if the color carrier shifted 180 degrees. Since yellow and blue are exactly opposite each other, when averaged out by flickering, the pixel looks colorless (white). However, if the color carrier shifts 240 degrees, the pixel would be cyan tinted in the next frame, and would look light green tinted when averaged out.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Sun Sep 14, 2008 5:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Stief21774 wrote:</div><div class="quotecontent">I got mine from <!-- w --><a class="postlink" href="http://www.birdcomputer.ca">www.birdcomputer.ca</a><!-- w -->. After through testing, I only found one small bug involving the RTI instruction.  I've been meaning to e-mail them to get it fixed and just haven't gotten around to it yet.</div>
<br />Good to hear because that's the one I'm going to test my PPU with! ;)
<br />
<br />BTW, I'm using a Digilent Nexys 2 + breadboard for I/O.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
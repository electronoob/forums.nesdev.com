<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=8017" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2011-08-01T08:46:21-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=8017</id>
<entry>
<author><name><![CDATA[cpow]]></name></author>
<updated>2011-08-01T08:46:21-07:00</updated>
<published>2011-08-01T08:46:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82330#p82330</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82330#p82330"/>
<title type="html"><![CDATA[Step into, Step out, Step over, Step OFF...]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82330#p82330"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />"Step to opcode $40 or $60" (that is, RTI or RTS) and "step to net SP increase" are both worth trying. The former would even <a href="http://nesdev.com/bbs/viewtopic.php?p=64768#64768" class="postlink">generalize into a breakpoint</a>: say I want to step to the next CMP instruction indexed by X.<br /></div><br /><br />That breakpoint [step until execution of specific opcode] is already implemented and is infact the mechanism I would piggyback the "step out" functionality onto if I decide to do the RTI/RTS execution approach.<br /><br /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent"><br />If you implement "step to next RTS" you won't get true step-over functionality. You have to pair that with a depth counter.<br /></div><br /><br />I wish you could see the big "dur" face I just made.  Thanks!  That's why I asked this question...I knew there was *something* I was forgetting.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3705">cpow</a> — Mon Aug 01, 2011 8:46 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2011-08-01T08:42:10-07:00</updated>
<published>2011-08-01T08:42:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82329#p82329</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82329#p82329"/>
<title type="html"><![CDATA[Step into, Step out, Step over, Step OFF...]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82329#p82329"><![CDATA[
<div class="quotetitle">qbradq wrote:</div><div class="quotecontent"><br />If you implement "step to next RTS" you won't get true step-over functionality. You have to pair that with a depth counter.<br /></div><br />Which fits nicely with "AND" logic in the breakpoint condition: Step to next RTS or RTI while current SP value &gt;= SP at the time the button was clicked.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Aug 01, 2011 8:42 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qbradq]]></name></author>
<updated>2011-08-01T08:39:50-07:00</updated>
<published>2011-08-01T08:39:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82328#p82328</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82328#p82328"/>
<title type="html"><![CDATA[Step into, Step out, Step over, Step OFF...]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82328#p82328"><![CDATA[
If you implement "step to next RTS" you won't get true step-over functionality. You have to pair that with a depth counter.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3706">qbradq</a> — Mon Aug 01, 2011 8:39 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2011-08-01T08:29:47-07:00</updated>
<published>2011-08-01T08:29:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82324#p82324</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82324#p82324"/>
<title type="html"><![CDATA[Step into, Step out, Step over, Step OFF...]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82324#p82324"><![CDATA[
"Step to opcode $40 or $60" (that is, RTI or RTS) and "step to net SP increase" are both worth trying. The former would even <a href="http://nesdev.com/bbs/viewtopic.php?p=64768#64768" class="postlink">generalize into a breakpoint</a>: say I want to step to the next CMP instruction indexed by X.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Aug 01, 2011 8:29 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cpow]]></name></author>
<updated>2011-08-01T07:49:56-07:00</updated>
<published>2011-08-01T07:49:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82323#p82323</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82323#p82323"/>
<title type="html"><![CDATA[Step into, Step out, Step over, Step OFF...]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8017&amp;p=82323#p82323"><![CDATA[
Ok so I've been majorly successful implementing "step over" functionality in NESICIDE that works at the C and assembly level.  It works by using the debug information available from CC65.  It works well enough that it is able to step correctly through Shiru's AlterEgo game programmed in C and assembly.  Stepping over things like:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   ppu_waitnmi&#40;&#41;;</div><br /><br />or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">      if&#40;!&#40;i&amp;3&#41;&#41; pal_fade&#40;&#41;;</div><br /><br />or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   jsr   initlib</div><br /><br />with a single click.<br /><br />So I think my technique for "step over" is solid.  The only thing it has a "problem" with is for loops.  And I don't think it's really a problem because I've seen this behavior in other IDEs.  Depending [probably] on optimizations, CC65 turns the start, termination, and incrementor portions of a for statement into separate "lines" of assembly statements all referring to the C source line of the for loop.  So, in stepping through a for loop when you hit the bottom of it the cursor will go back up to the for statement and stay there until you click two more times.  This is because the first time it's there it's indicating evaluation of the "incrementor" portion.  The second time it's indicating evaluation of the "termination" portion.  I'm not smart enough yet to highlight only the portion of the for statement being evaluated [a behavior I've seen in other debuggers]...but that might not be too far off.  CC65 does not give "column" information in its debug output...so I'd have to figure that out on my own.<br /><br />ANYWAY...now I'm thinking about "step out".  "Step into" is stupidly easy...and is nothing more than "step".  So, that one's done.  I recall there being some discussion here [even related to NESICIDE itself--but as usual finding the thread is a pain!] regarding the best technique to use to evaluate when to terminate a "step out".  I'm thinking it'd be as simple as terminating on the next executed RTS.  I know this won't satisfy those that use stack trickery...but I'm interested now in the most useful implementation.  Is "execute until you execute an RTS then stop" the most useful implementation?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3705">cpow</a> — Mon Aug 01, 2011 7:49 am</p><hr />
]]></content>
</entry>
</feed>
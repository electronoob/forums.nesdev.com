<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NSF playback with Power Pak Lite on CopyNES?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NSF playback with Power Pak Lite on CopyNES?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=10077">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=10077</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>8bitmatt</b> [ Mon May 06, 2013 2:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />****** UPDATE ******<br /><br />It is possible to play NSFs with a Power Pak Lite and CopyNES thanks to rainwarrior!<br /><br /><a href="http://forums.nesdev.com/viewtopic.php?p=112000#p112000" class="postlink">See his post below</a>.<br /><br />*********************<br /><br /><br />Is it possible to get NSFs playing with a Power Pak Lite on CopyNES? I'm a little confused. The documentation makes it sound like it's possible.<br /><br />According to the readme files:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp;COPYNES.TXT<br />&nbsp;d)&nbsp; NSF music playing.&nbsp; With a special NSF cart, USB CopyNES can play NSF's on<br />&nbsp; &nbsp; &nbsp;the real hardware.&nbsp; 128K of RAM is supported on my NSF cart allowing<br />&nbsp; &nbsp; &nbsp;up to 128K of space for a single song.&nbsp; Songs are loaded through a<br />&nbsp; &nbsp; &nbsp;simple UI.&nbsp; The RAM cart (see below) will work for SOME NSF's.&nbsp; If <br />&nbsp; &nbsp; &nbsp;they are not bankswitched, they will work on the RAM cart.<br /><br />&nbsp;e)&nbsp; RAM cart.&nbsp; This allows very fast cycle time development.&nbsp; With a cart like<br />&nbsp; &nbsp; &nbsp;the PowerPak Lite, many mappers and up to 256KB PRG, 128KB CHR, and 8KB <br />&nbsp; &nbsp; &nbsp;WRAM can be loaded quickly.<br /><br />COPYUSE.TXT<br />16.&nbsp; Play NSF<br />-------------<br />If you have NON-banked NSFs, and a RAM cart, you can play NSFs using<br />this function.</div><br /><br />I found an old thread from 2006 that was similar to what I'm trying to accomplish.... <br /><!-- l --><a class="postlink-local" href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=1893&amp;hilit=nsf+copynes">viewtopic.php?f=9&amp;t=1893&amp;hilit=nsf+copynes</a><!-- l --><br />But I thought I'd still ask since that's pretty old information. flipside's CopyNes was version 2. Mine is version 4 (just got it recently).<br /><br />If the Power Pak Lite isn't going to work... what are my options?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon May 06, 2013 2:55 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's at least possible in theory, but only for <strong>non-banked</strong> NSFs (max. 32 KB).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Mon May 06, 2013 10:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, CopyNES has a &quot;play NSF&quot; option but it doesn't work with PowerPak Lite.<br /><br />I haven't investigated it yet, but probably the PowerPak Lite requires an NROM program to be sent to its CPLD, and might have its own specific way of enabling/disabling its RAM writes. It shouldn't take too much to add to the client (I will try it later this month, if nobody else does in the meanwhile).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>8bitmatt</b> [ Tue May 07, 2013 7:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">Yeah, CopyNES has a &quot;play NSF&quot; option but it doesn't work with PowerPak Lite.</div><br /><br />That's what I was thinking, thanks for confirming it wasn't just mine.<br /><br /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"> It shouldn't take too much to add to the client (I will try it later this month, if nobody else does in the meanwhile).</div><br /><br />Man, that would be amazing.<br /><br /><br />If anyone else is trying to get NSFs playing right now... I found Vegaplay by NO CARRIER and I've had good success. It's just like loading an NROM game onto the Power Pak Lite after you compile. It's pretty simple to get up and running. A tiny amount of asm needs to be changed and you'll need a hex editor to remove the header from the NSF.<br /><br /><!-- m --><a class="postlink" href="http://no-carrier.com/index.php?/vegaplay/">http://no-carrier.com/index.php?/vegaplay/</a><!-- m --><br /><br /><br />All that said, I think Vegaplay has the same limitation of using non-bankswitched NSFs (and of course no expansion chips). One of my NSFs that used bankswitching fails to play all the songs. <br /><br />So, my new question is how can I play bankswitched NSFs and use atleast the Namco163 (namco106) expansion chip? The NSFs I'm trying to get playing are songs that I've made with ppmck (using mml). I've had to use bankswitching on some of them to get it to compile.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Tue May 07, 2013 1:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Famitracker has a feature export NES ROMs instead of NSFs. It can also export the song in assembly format that you can manually compile.<br /><br />As far as getting an NSF with N163 to play... on what? Emulators already do it fine. PowerPak does it fine. PowerPak Lite doesn't have an N163 inside... so... I'm not sure I understand your question.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>8bitmatt</b> [ Tue May 07, 2013 2:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">Famitracker has a feature export NES ROMs instead of NSFs. It can also export the song in assembly format that you can manually compile.</div><br /><br />That's good to know for the future. I currently do not use Famitracker (or any tracker). I code everything in MML by hand and compile with ppmck. I'm trying to figure out how I can take one of my longer songs that required bankswitching and get that to run on real NES hardware (my modified NES with CopyNES).<br /><br /><br /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">As far as getting an NSF with N163 to play... on what? Emulators already do it fine. PowerPak does it fine. PowerPak Lite doesn't have an N163 inside... so... I'm not sure I understand your question.</div><br /><br />Trying to get an NSF I made that uses N163 to run on my NES (w/ CopyNES). I only have the Power Pak Lite right now. And it looks like the full featured Power Pak won't be available for at least a month.<br />From my limited understanding, the Power Pak emulates Mapper 19 for the N163. Can the Power Pak Lite not do the same?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Tue May 07, 2013 2:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If I recall, PPMCK comes with an assembler and builds from the source every time you make an NSF, right? So... if you need to modify the code/build to proce an NES, you can, I think.<br /><br />Unfortunately, NSF bankswitching may or may not easily translate to other bankswitching methods. Probably the easiest thing to do is build an AxROM that stitches several non-bankswitching NSFs together, each one in its own 32k page. (This is what I did for my Dark Side of the Moon ROM.)<br /><br />As far as mappers the PowerPak Lite supports, it's a <a href="http://www.retrousb.com/product_info.php?products_id=35" class="postlink">very short list</a>. Its CPLD and other hardware are nowhere near the power of the PowerPak. It probably doesn't have the juice to handle an N163 mapper. It's also not connected to the expansion pin that the PowerPak puts its expansion audio on, so it would need to be modded (but again, probably doesn't have enough power anyway).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>8bitmatt</b> [ Tue May 07, 2013 2:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well you can probably ignore the last part of my last post. I just looked at the Power Pak Lite product page and saw it only supports 8 mappers (and does not include Mapper 19)<br /><br /><br /><!-- m --><a class="postlink" href="http://www.retrousb.com/product_info.php?products_id=35">http://www.retrousb.com/product_info.php?products_id=35</a><!-- m --><br /><br /><br />So for N163 playback on my NES I'll need a Power Pak or hack together a cart, right? Those are the only two options?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Tue May 07, 2013 2:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, another option that might be interesting is playing logged register streams through the CopyNES.<br /><br />The VRC7 register test mode operates like this, where you plug a Lagrange Point into your NES (with an appropriate adapter, modded so you can use the audio), and the CopyNES program sends a data stream to the NES that will immediately play on the cart.<br /><br />You could do an NSF player in the same way, though you'd need to convert the NSF into a log first. You wouldn't even need a cartridge in the NES if it was just 2A03.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Tue May 07, 2013 2:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You could also get something similar to the PowerPak, e.g. an Everdrive N8 or maybe an InviteNES

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>8bitmatt</b> [ Tue May 07, 2013 2:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">If I recall, PPMCK comes with an assembler and builds from the source every time you make an NSF, right? So... if you need to modify the code/build to proce an NES, you can, I think.</div><br /><br />Yes that is true, it builds from the source every time using NESASM. I'll be looking at the code tonight and see if I can modify it. I know currently it uses 8k banks because I see the bank overflow error pretty often. ppmck is not very efficient with its data and I can easily use more than 8k for a single song.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>8bitmatt</b> [ Tue May 07, 2013 2:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">You could also get something similar to the PowerPak, e.g. an Everdrive N8 or maybe an InviteNES</div><br /><br />That's cool. I didn't know those existed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>8bitmatt</b> [ Tue May 07, 2013 4:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm currently trying to make one of my longer songs non bank-switched (So maybe I can figure out how to combine multiple NSFs like rainwarrior suggested). It doesn't seem possible so far because of ppmck and NESASM.<br /><br />I was just thinking... the 8k bank limit is because of NESASM. <br /><br />Even if I modify the asm that ppmck spits out it still has to compile with NESASM. I can't really get around the 8k limit and thus my NSF is going to be bank-switched.<br /><br />Is that right? All of my longer songs that were made with ppmck MUST be bank-switched?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Tue May 07, 2013 6:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The 8KiB constraint of NESASM should be something you can work around, as long as you set up the banks to be loaded in linear order for an unbanked NSF.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri May 10, 2013 1:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NSF playback with Power Pak Lite on CopyNES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Okay, I felt like figuring this out today: <a href="http://code.google.com/p/usbcopynesblue/downloads/detail?name=usbcopynesblue501.zip" class="postlink">http://code.google.com/p/usbcopynesblue/downloads/detail?name=usbcopynesblue501.zip</a><br /><br />Give this a spin! This should make Play NSF work with the PowerPak Lite, and probably the other ram cart types that CopyNES USB seems it might support. (I can only test PowerPak Lite)<br /><br />It should work for NSFs that are not bankswitched, and NSFs &lt;32k that only use a startup bank set (and don't need to switch during/after INIT). Basically the NSF gets rebuilt into an NROM, and then uploaded to the RAM cart as an NROM.<br /><br />The existing NSF cart support still exists, so if you've got one of those, just hit cancel when the ram cart plugin selector comes up.<br /><br /><br />One thing I noticed about the BIOS' NSF player is that it copies the song number into all three registers A/X/Y, so for NSFs that are dual NTSC/PAL you will probably end up getting the wrong speed on some tracks besides the first one. Maybe someday I will rewrite the NSF player as a plugin, but for now this is an issue that exists. (I don't feel qualified to update the BIOS.)

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
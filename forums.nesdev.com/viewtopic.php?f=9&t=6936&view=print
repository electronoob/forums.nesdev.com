<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Munchausen Flash Cartridge progress</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Munchausen Flash Cartridge progress</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=6936">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=6936</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Fri Sep 03, 2010 7:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Munchausen Flash Cartridge progress</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />We're making excellent progress on the Munchausen Flash Cartridge. arfink posted a video demonstrating the menu and loading from the PC:
<br />
<br /><a href="http://www.youtube.com/watch?v=g1rB2BZTg3o" class="postlink">Munchausen NES Menu Demo</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sat Sep 04, 2010 3:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><img src="http://www.mapmodnews.com/images/library/image/thumbs-up.png" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Sat Sep 04, 2010 3:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I wonder how this compares to the PowerPak?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Sep 04, 2010 4:04 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />* Goal is to be able to run a good portion of homebrew stuff for low cost (current target: $40). Not for advanced homebrew using other mappers.
<br />
<br />* Runs NROM (32K PRG, 8K CHR ROM/RAM) and MMC1 (256K PRG, 8K CHR RAM). Current prototype can hold two NROMs and one MMC1 at once. Future software upgrades will probably also allow 6 NROMs, without any MMC1s. With more juggling, it would be possible to fit 4 NROMs + 1 MMC1 or 10 NROMs.
<br />
<br />* Programs can be loaded without removing cart from NES. NROM takes about 10 seconds to load, MMC1 about 55 seconds. Future software upgrades might improve this.
<br />
<br />* Software upgrades allow other interesting features that I'm exploring.
<br />
<br />* Included USB-NES cable can be used for interesting things besides just loading things on the cart.
<br />
<br />* Made from SNROM board with fairly minor modifications, and plans will be posted for people to make one themselves. The minimal modification version on a board with a NEC MMC1 takes only 5 jumpers I believe, and of course replacing the ROM with an Am29F040B Flash chip.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Sat Sep 04, 2010 4:38 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So there's 8K of WRAM (battery backed) and 8K of CHR-RAM.  Any way to expand the CHR-RAM?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sat Sep 04, 2010 4:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">* Made from SNROM board with fairly minor modifications, and plans will be posted for people to make one themselves. The minimal modification version on a board with a NEC MMC1 takes only 5 jumpers I believe, and of course replacing the ROM with an Am29F040B Flash chip.</div>
<br />What features does the Flash chip need to have to work with this thing? I have some spare W29C020C chips so wondering if I can use them. Of course they're only 256KB but that's not really a problem for me. Here's the data sheet: <!-- m --><a class="postlink" href="http://www.gaw.ru/pdf/Winbond/w29c020c.pdf">http://www.gaw.ru/pdf/Winbond/w29c020c.pdf</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Sep 04, 2010 5:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Other Flash chips could be accommodated, though it'd require some changes to the driver code. Once I rewrite the driver to be more modular, it shouldn't be too difficult (right now it runs at 5.76 KB/sec using some crazy code that receives a byte as it calculates the CRC-16 of the previous and programs and verifies a byte into Flash). As long as you can get the bootloader programmed into Flash, it's relatively easy to get programming code working. The development setup allows running small programs in low memory or WRAM, so you don't have to be reprogramming the Flash chip in a programmer when getting the basic driver working. The chip you mentioned uses a different sector layout, so I wouldn't be able to write the driver myself unless I had one of the chips. I was thinking that we could just provide the preprogrammed Flash chip, that way they're all the same part.
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So there's 8K of WRAM (battery backed) and 8K of CHR-RAM. Any way to expand the CHR-RAM?</div>
<br />It shouldn't be too hard to put a 32K CHR RAM in, as it's also a 28-pin chip.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat Sep 04, 2010 12:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Compared to PowerPak, this is far more useful for developers.  Can't say I'm particularly a fan of the MMC1, but whatever floats your boat, as they say.
<br />
<br />This is pretty much how the loading was to work on the original Squeedo design.  But this is a simpler mapper, and is cheaper with less firmware to work on. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Whenever I make that CPLD cart board I was talking about (in the battery-backed SRAM alternatives thread), the serial adapter for this would work well with it.  It will have 32kB of CHR and WRAM, and a less annoying register setup (IMHO) than MMC1.  I think it would be cool for example to release a game on it, and still allow the user to load their own program onto it if they wanted (either using unused part of the ROM, or backing up the full game and reloading it whenever they want).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Sat Sep 04, 2010 3:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />For now it's only MMC1 and you can build it yourself out of an existing cartridge.  What I would like to know is if it would be possible to put it on other type of cartridge like an MMC3?  What would be required to be updated to be able to use this setup?
<br />
<br />I wouldn't mind to have an MMC1 too for other type of testing but an MMC3 would be more useful for my current project . Or I could even go as far to say that I would built up to one per mapper that I want to play with.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat Sep 04, 2010 5:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Banshaku wrote:</div><div class="quotecontent">For now it's only MMC1 and you can build it yourself out of an existing cartridge.  What I would like to know is if it would be possible to put it on other type of cartridge like an MMC3?  What would be required to be updated to be able to use this setup?<br /></div>
<br />
<br />With the MMC3 (if you want CHR-RAM) the main concern is what happens you try to program the bytes behind the PRG bank select register.
<br />
<br />You need some logic to select whether $8000+ writes go to mapper, or to ROM.  You need a decoded address for the register, a latched data bit to hold the state selection.  Or you can relocate the mapper registers, if you don't want to run commercial games without hacking them.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Sep 04, 2010 5:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />MMC1 is multicart friendly: it has a mode that kinda-sorta emulates NROM-128 ("Crazy Climber mode") and a 32 KiB mode that emulates NROM-256. It also has a well-defined way to switch between two independent MMC1 binaries (the SUROM trick).
<br />
<br />MMC3, on the other hand, isn't very multicart friendly. It needs additional hardware to switch between games, as seen in <a href="http://kevtris.org/mappers/nes_custom/NES_QJ.html" class="postlink">NES-QJ</a> or <a href="http://kevtris.org/files/Mari7in1.txt" class="postlink">Mario 7 in 1</a> or <a href="http://kevtris.org/files/1min1.txt" class="postlink">1,000,000 in 1</a>. They could have done like TLSROM and abused the CHR bank lines to select a game as in SUROM, but 1. that doesn't allow selecting individual NROMs within a bank, and 2. all MMC3 NES games but <a href="http://bootgod.dyndns.org:7777/search.php?region_op=%21%3D%60%40%60&amp;region=Japan&amp;ines_op=%3D%60%40%60&amp;ines=4&amp;vram_op=%3D%60%40%60&amp;vram=8&amp;group=groupid&amp;field=2&amp;order=asc" class="postlink">three</a> use CHR ROM anyway.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Sep 04, 2010 7:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">With the MMC3 (if you want CHR-RAM) the main concern is what happens you try to program the bytes behind the PRG bank select register. You need some logic to select whether $8000+ writes go to mapper, or to ROM.</div>
<br />It doesn't seem you would. Map the 8KB Flash bank you're currently programming to $C000, then do the $C555, $C2AA, $C555 program sequence and the only MMC3 registers you'll disturb are the IRQ reload and acknowledge, which you won't be using during programming anyway.
<br />
<br />The possible problem is that the last bank is fixed. You need a bootloader to run when you power on. Maybe you could use one of the CHR bank bits as on the MMC1, assuming they power up with predictable values and that value is different than what an MMC3 CHR RAM program would normally write to them.
<br />
<br />So yeah, an MMC3 version should work fine. Besides the bank select rewiring to the Flash chip, you'd just hook /CS to /CART on the NES bus, /OE to the /ROM CS output of the MMC3, and /WR to /WR on the NES bus, just as on the MMC1 version.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Sat Sep 04, 2010 8:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The cart's menu looks and sounds well designed.  I also like the use of the controller port.  Would it be possible to network two NES systems together?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Sep 04, 2010 9:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, you could connect to NES units together and do asynchronous serial, though it wouldn't have any relation to the Munchausen, which simply includes a NES-to-USB cable (which is internally just a USB-to-RS232 adaptor connected to a controller cable). For NES-to-NES links, you'd connect two controller cables together, with Strobe and D0 cross-connected).
<br />
<br />The USB-serial cable that will be included will of course allow some interesting things in NES programs. One thing I plan on releasing is an NSF player that runs on the PC but plays audio on the 2A03 (DMC wouldn't be supported, as that needs RAM at $C000-$FFFF). Could also do a silly audio player that streams sound at 22 kHz uLaw...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat Sep 04, 2010 11:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ah, yeah that sounds right, I'm used to thinking of how CopyNES handled it (using the expansion pin).  That made it simple to program Flash with every type of board.  For MMC3 if you had to live with a permanent fixed boot bank, that's not too bad either (just point NMI and IRQ vectors into RAM and take the 3-cycle JMP penalty).
<br />
<br />Jagasian: Networking would be much better done over USB.  If one did it with the controller port, it would be easy for them to get out of sync (if doing other processing).  Maybe a better setup would be to take a cue from the VS Dualsystem and use a USB host app to emulate/arbitrate a shared RAM area.  Then would use an address/data port type setup to read/write a small number of bytes every frame (auto-incremented, or using address lists if needed).
<br />
<br />Later on I want to get networking stuff going on the Squeedo revision, and I'll definitely try to make the NES code compatible with whatever hardware the Munchausen uses.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
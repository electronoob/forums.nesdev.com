<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=7113" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2010-10-31T18:08:36-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=7113</id>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-31T18:08:36-07:00</updated>
<published>2010-10-31T18:08:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69348#p69348</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69348#p69348"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69348#p69348"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Usually the worst case is the beginning of a pattern. And the second worst case is a row when all channels are starting new notes.<br /></div><br /><br />Yeah, I think that is why my short song might seem a little big, for something larger it will be more efficient.<br /><br />EDIT: Ah you were probably referring to how much CPU time is used. That also holds true <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sun Oct 31, 2010 6:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-10-31T17:53:00-07:00</updated>
<published>2010-10-31T17:53:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69347#p69347</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69347#p69347"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69347#p69347"><![CDATA[
Usually the worst case is the beginning of a pattern. And the second worst case is a row when all channels are starting new notes.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Oct 31, 2010 5:53 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-31T15:41:14-07:00</updated>
<published>2010-10-31T15:41:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69343#p69343</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69343#p69343"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69343#p69343"><![CDATA[
<div class="quotetitle">Memblers wrote:</div><div class="quotecontent"><br />For a game too, performance is somewhat of an issue, just be careful with the 'worst case' path the execution can follow.<br /></div><br />Very good point, I'll have to make sure all is well with that.<br /><br /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent"><br />Demo looks pretty cool!<br /></div><br />Thanks, so far so good <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sun Oct 31, 2010 3:41 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2010-10-31T15:00:01-07:00</updated>
<published>2010-10-31T15:00:01-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69341#p69341</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69341#p69341"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69341#p69341"><![CDATA[
You can store most note changes with 4-bits (or even 3-bit) as a relative value from the previous/current note.  Since not a lot of melodies jump all over different octaves.<br /><br />For a game too, performance is somewhat of an issue, just be careful with the 'worst case' path the execution can follow.  In NT2 for example the CPU usage would jump higher on frames that it changed to a new pattern.  There's always been enough CPU time when I've used it though.<br /><br />Demo looks pretty cool!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Sun Oct 31, 2010 3:00 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-31T14:58:49-07:00</updated>
<published>2010-10-31T14:58:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69340#p69340</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69340#p69340"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69340#p69340"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />Mmh, this song is REALLY simple and short, so yeah 69 bytes for it seems like quite big, IDK but maybe it'd be like ~25-30 bytes on my engine. (I just put in random numbers).<br /><br />But yeah 300 bytes for a sound engine sounds like nothing. You should have done something either really efficient or really limited.<br /></div><br /><br />Cool, thanks for the feedback <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sun Oct 31, 2010 2:58 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2010-10-31T14:48:32-07:00</updated>
<published>2010-10-31T14:48:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69338#p69338</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69338#p69338"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69338#p69338"><![CDATA[
Mmh, this song is REALLY simple and short, so yeah 69 bytes for it seems like quite big, IDK but maybe it'd be like ~25-30 bytes on my engine. (I just put in random numbers).<br /><br />But yeah 300 bytes for a sound engine sounds like nothing. You should have done something either really efficient or really limited.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Oct 31, 2010 2:48 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-31T14:40:52-07:00</updated>
<published>2010-10-31T14:40:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69337#p69337</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69337#p69337"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69337#p69337"><![CDATA[
Just to check with you guys, here is a working example of the sound engine. This short song uses 69 bytes, does that seem like too much?<br /><br /><a href="http://www.yibbleware.com/nes/setest.nes" class="postlink">http://www.yibbleware.com/nes/setest.nes</a><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sun Oct 31, 2010 2:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-31T14:32:13-07:00</updated>
<published>2010-10-31T14:32:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69336#p69336</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69336#p69336"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69336#p69336"><![CDATA[
<div class="quotetitle">blargg wrote:</div><div class="quotecontent"><br />I take the point here to be that unless you're only having one short song, song data dominates, so you should spend some extra code on allowing a more compact song format, because each extra byte of code will result in the reduction of many bytes of music data.<br /></div><br /><br />Definitely! I'm trying to make the song data as compact as possible as well. Also, I will be implementing functionality to allow certain loops to play under the main melody, so I can write the redundant parts of the music only once. That should save on memory quite a bit.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sun Oct 31, 2010 2:32 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[UncleSporky]]></name></author>
<updated>2010-10-31T14:30:29-07:00</updated>
<published>2010-10-31T14:30:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69335#p69335</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69335#p69335"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69335#p69335"><![CDATA[
Ah, well good luck, I'm still completely mystified by sound engines.  <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" />  Granted I haven't put a lot of research into it yet.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3438">UncleSporky</a> — Sun Oct 31, 2010 2:30 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-31T14:29:35-07:00</updated>
<published>2010-10-31T14:29:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69334#p69334</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69334#p69334"/>
<title type="html"><![CDATA[Re: Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69334#p69334"><![CDATA[
<div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent"><br />Perhaps you're referring to RAM usage and not the actual engine's size?  As I recall, the Famitracker driver uses more than a whole page of memory.  That seems closer to what you might be talking about.<br /><br />And in that case, it does sound like quite a lot.<br /></div><br /><br />No, that is the engine's size. I did forget that it uses about 30 bytes of ram for the various variables. So it's at about 350 bytes.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sun Oct 31, 2010 2:29 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-31T14:26:22-07:00</updated>
<published>2010-10-31T14:26:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69333#p69333</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69333#p69333"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69333#p69333"><![CDATA[
Cool, I forgot to mention it does not do sound effects yet. But I was just making sure I wasn't going to run into trouble down the road. The data format I'm using uses 1 byte for most instructions. <br /><br />So far it supports envelopes, octave set, looping, duty cycle, and DMC. I'm pretty happy with the results so far <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sun Oct 31, 2010 2:26 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-10-31T13:59:02-07:00</updated>
<published>2010-10-31T13:59:02-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69332#p69332</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69332#p69332"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69332#p69332"><![CDATA[
I take the point here to be that unless you're only having one short song, song data dominates, so you should spend some extra code on allowing a more compact song format, because each extra byte of code will result in the reduction of many bytes of music data.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Sun Oct 31, 2010 1:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[UncleSporky]]></name></author>
<updated>2010-10-31T13:59:19-07:00</updated>
<published>2010-10-31T13:58:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69331#p69331</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69331#p69331"/>
<title type="html"><![CDATA[Re: Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69331#p69331"><![CDATA[
<div class="quotetitle">cartlemmy wrote:</div><div class="quotecontent"><br />Is 320 bytes (including note table) unreasonably large for a sound engine? I know that is a relatively vague question, but I'm curious as to how small everyone else has managed to make their engines. I want to be sure it is not too bloated.<br /></div><br />Perhaps you're referring to RAM usage and not the actual engine's size?  As I recall, the Famitracker driver uses more than a whole page of memory.  That seems closer to what you might be talking about.<br /><br />And in that case, it does sound like quite a lot.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3438">UncleSporky</a> — Sun Oct 31, 2010 1:58 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2010-10-31T14:02:37-07:00</updated>
<published>2010-10-31T13:23:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69330#p69330</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69330#p69330"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69330#p69330"><![CDATA[
Wow. My engine for my project, which supports music and sound effects but is very compact as I don't use PRG bankswitching, is exactly $358 bytes, 856 bytes in decimal. I wonder how you got one who is so small. I was under the impression that my was one of the smallest you could do.<br /><br />However, if yours is smaller but takes larger songs data for an equivalent song, then you won't gain anything.  <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />I have one byte per note (plus one byte if crossing an octave boundary). I also have "subroutine calls" that takes two bytes, and a repeat command which takes 3 bytes, which removes the need to repeat data in a song in most cases. That way I can keep most songs in something like 200 bytes (although it's very arbitrary).<br /><br />EDIT : I just investigated more about the ROM usage of varying things in my project. WLA-DX is supposed to tell it to me with the .block bug it's bugged and doesn't print the correct numbers <img src="http://forums.nesdev.com/images/smilies/icon_sad.gif" alt=":(" title="Sad" /><br /><br />What takes the palm of the most ROM eating stuff is sprite definitions ! I have barly done half of the sprites I'd like to see in the game, and this eats up about 7200 bytes !! This is about 12% of the total ROM space I want to use, with the sprites not already done it will take at least 20%. I might have compress those somehow if I want to use those 32k efficiently.<br />In comparison, I have a good half of songs and many sound effects done, which takes "only" 2800 bytes (about 3500 with the engine).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Oct 31, 2010 1:23 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2010-10-31T13:20:08-07:00</updated>
<published>2010-10-31T13:20:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69328#p69328</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69328#p69328"/>
<title type="html"><![CDATA[Quick Sound Engine Question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7113&amp;p=69328#p69328"><![CDATA[
Opinions will vary, but I believe that's way too small!  That's less than 1% of even a 32kB ROM.  I'm sure it could still sound decent, but it depends on the type of music you want, I guess.<br /><br />In my experience, data is always the memory hog, I consider ROM usage by code to be basically free (unless you're writing a game to cram a lot into a small amount of memory, there's no reason to do that except 'for the hell of it', and minigame competitions though).<br /><br />Nerdtracker 2 is quite a bit larger, around 3,000 bytes.  If you look at NESnake 2 by MatrixZ, he used NT2 in there but also came up with his own compression for the music data, which works amazingly well.  It's only 32kB of PRG for that entire game.<br /><br />So my suggestion is if you're worried about memory usage, aim to make the data as compact as you need it to be, the code is practically nothing.  Unless you only have one short song, or a couple jingles or something, the data will far outweigh the code.<br /><br />But ROMs are cheap, and just continue getting cheaper.  I guess maybe 512kB FlashROM costs about what a 64kB EPROM cost 10 years ago.  Under a couple bucks.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Sun Oct 31, 2010 1:20 pm</p><hr />
]]></content>
</entry>
</feed>
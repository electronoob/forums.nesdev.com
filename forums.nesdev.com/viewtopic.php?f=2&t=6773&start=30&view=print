<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Nintendulator Debug Extensions (NintendulatorDX)</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Nintendulator Debug Extensions (NintendulatorDX)</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=6773">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=6773</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>7</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Fri Jan 14, 2011 8:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent"> (...) Nintendulator now supports NES2.0 and <strong>32KB .sav files</strong>.</div>
<br />
<br />- How is that possible? 32k at $6000-$7FFF is certainly bank switched. Could someone explain me, plz?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Fri Jan 14, 2011 9:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yep, bank switched.
<br />
<br /><!-- m --><a class="postlink" href="http://blog.ntrq.net/?p=428">http://blog.ntrq.net/?p=428</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Jan 14, 2011 12:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>A very SXy ROM</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">32k at $6000-$7FFF is certainly bank switched. Could someone explain me, plz?</div>
<br />Have a <a href="http://wiki.nesdev.com/w/index.php/SxROM#Higher_CHR_lines" class="postlink">wiki page</a>  or <a href="http://wiki.nesdev.com/w/index.php/MMC1#SOROM.2C_SUROM_and_SXROM" class="postlink">two</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Fri Jan 14, 2011 8:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">Although, embedding ASM6 into an emulator seems like it would be easy as well.</div>
<br />
<br />NESICIDE has source-level debug capability.  The assembler within NESICIDE is an ASM6 remake, and NESICIDE has a built-in emulator.   <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> 
<br />
<br />I'm going to try to put together a video of it's source-level debugging capabilities, but I'm more into working on the tool (adding symbol watching, etc.) and am a total n00b at making videos...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ManicGenius</b> [ Sat Jan 15, 2011 6:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Did notice a peculiarity with this, it doesn't descend into macros.  Issue for me mostly cause I use a lot of macros.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Sat Jan 15, 2011 11:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">ManicGenius wrote:</div><div class="quotecontent">Did notice a peculiarity with this, it doesn't descend into macros.  Issue for me mostly cause I use a lot of macros.</div>
<br />
<br /><img src="http://img194.imageshack.us/img194/961/breakmacro.png" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sun Jan 16, 2011 12:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">ManicGenius wrote:</div><div class="quotecontent">Did notice a peculiarity with this, it doesn't descend into macros.  Issue for me mostly cause I use a lot of macros.</div>
<br />I have mentioned this in previous posts. It's a CA65/LD65 problem. Nothing I can do about it, unfortunately, short of adding that functionality to CC65 myself, which is not an easy task at all.
<br />
<br />.repeat/.endrepeat blocks have the same problem.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Jan 21, 2011 3:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><div class="quotetitle">ManicGenius wrote:</div><div class="quotecontent">Did notice a peculiarity with this, it doesn't descend into macros.  Issue for me mostly cause I use a lot of macros.</div><br />I have mentioned this in previous posts. It's a CA65/LD65 problem. Nothing I can do about it, unfortunately, short of adding that functionality to CC65 myself, which is not an easy task at all.<br /><br />.repeat/.endrepeat blocks have the same problem.</div>
<br />I'm happy to let you know that Uz has fixed this now, download the latest snapshot of CC65 to get the fixed version. It needs some additional work to be perfect (would be helpful to be able to display the macro invocation line also), but I think it makes a better default than the old "only use the invocation line" behaviour.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Fri Jan 21, 2011 4:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Does this latest snapshot work with your debugging extensions?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Jan 21, 2011 4:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">Does this latest snapshot work with your debugging extensions?</div><br />Yup.<br /><br />EDIT:<br /><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">Woohoo! Just found out that the latest development build of Nintendulator now supports NES2.0 and 32KB .sav files.<br /><br />Many thanks to Quietust, if he's reading <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />Now, all I need is the fox to add these debugging features to the latest unstable build of Nintendulator and maybe I can finally fix these bugs and get PR8 released.</div>
<br />Yeah, I'll do this once I get around to forking it from the SVN.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Sat Jan 22, 2011 1:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">Does this latest snapshot work with your debugging extensions?</div><br />Yup.<br /><br />EDIT:<br /><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">Woohoo! Just found out that the latest development build of Nintendulator now supports NES2.0 and 32KB .sav files.<br /><br />Many thanks to Quietust, if he's reading <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />Now, all I need is the fox to add these debugging features to the latest unstable build of Nintendulator and maybe I can finally fix these bugs and get PR8 released.</div><br />Yeah, I'll do this once I get around to forking it from the SVN.</div>
<br />
<br />Please, please, please do <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Feb 04, 2011 7:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just to let any new users (and those who keep updating their CC65) know:
<br />
<br />As of 2011-02-04 the latest snapshot doesn't work with current release (v0.20) because the debug file version was bumped up to 1.1 with new features and the old parser doesn't know how to parse it (and only checks the major part of the version number, so it'll TRY to parse it, and fail). I'll release a new version soon.
<br />
<br />The update allows me to display both the macro invocation line and the macro body, so I guess I'll try to add that functionality next. I'm not yet sure what would be the best way to display nested macros. Kinda would like to get rid of the Win32 dialogs and use something more flexible.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sat Feb 26, 2011 8:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Download link updated in the first post to <a href="http://kkfos.aspekt.fi/downloads/nintendulator-0.975-dx0.25.zip" class="postlink">v0.25</a>. I applied all changes from Nintendulator SourceForge SVN repo, so that should include all that NES2.0 stuff and so on. I set up my stuff so that it should be more straightforward to keep this thing updated with SF SVN from now on. I really didn't test this at all and can't remember if I left some bad bugs in there so report any crashes/strange stuff.
<br />
<br />This release also supports the cycle counting timers I was talking about before. Here's how it works: Write to $402x to start the timer and $403x to stop it. $401E/$401F are aliases for $4020/$4030 (for VirtuaNES compatibility). Timer title can be specified with a symbol named "__timerX_title" which points to byte sequence "__timerX__" followed by zero padded timer title.
<br />
<br />Now, one important thing about the timers. If you do STA $4020 followed by STA $4030 it'll report 0 cycles, so the STA cycles don't count. But it also subtracts 4 cycles from all running counters when nested timers are used. For example:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; this code will report 0 cycles for both timers!<br />sta $4020<br />sta $4021<br />sta $4030<br />sta $4031</div><br />Oh another important thing, the timers are never reseted to 0 so you must restart Nintendulator for that. Of course I'll make them reset on power off/reset later but not interested in working on this now.<br /><br />Here are couple of macros for CA65:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.macro start_timer timer<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $4020+timer<br />.endmacro<br /><br />.macro stop_timer timer<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $4030+timer<br />.endmacro<br /><br />.macro timer_title timer, title<br />&nbsp; &nbsp; .ident&#40;.sprintf&#40;&quot;__timer%d_title&quot;, timer&#41;&#41;:<br />&nbsp; &nbsp; &nbsp; &nbsp; .byte title, 0<br />.endmacro</div>
<br />
<br />EDIT: Removed identifier string from timer_title macro.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sat Feb 26, 2011 8:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">What I'd love to see is a way to open listing files (.LST) in a debugger, and get source level debugging from those.  Just suggesting listing files because they don't need any reassembly, just identification of addresses to line numbers, and those are already in the file.</div>
<br />Forgot to reply to this. What benefit would this offer over displaying the actual source code?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Feb 26, 2011 9:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Do .lst files expand .repeat and macros differently from source files?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>7</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - ZapFC Headerless Format</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">ZapFC Headerless Format</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=7494">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=7494</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>24</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Sat Feb 19, 2011 5:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So we're putting them in a container with both ROM's? That brings us back to iNES. This is a good idea, it's just the iNES is the best idea, sorry. Prove me wrong and I'll be more then happy to switch, but until 51% of emulators support this as their main extension, I won't change.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Sat Feb 19, 2011 6:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A proper container format with popular access tools is light-years ahead of iNES for ease of access. It's extremely unfair to equate it to an obsure, special-purpose binary blob. I don't even know of any tools that split and merge PRG/CHR from iNES files, although I'm sure there are some somewhere.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Sat Feb 19, 2011 6:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I only made a splitter and there's alot more on the web &gt;.&gt;....needs fixed up though. And what will the files spaced out have that iNES can't? This offers no advantage as far as I'm concerned.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Feb 19, 2011 7:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">But yeah for the most part, bsnes targets desktops and laptops. Not cell phones and netbooks (cell phones with a keyboard that can't make calls.)</div><br />That'd be fine if I could find a 10" laptop. But all the stores appear to have in that size are netbooks.<br /><br />But back to topic:<br /><br /><div class="quotetitle">FitzRoy wrote:</div><div class="quotecontent">And then, if they succeeded, how would anyone know they were getting it since iNES 2.0 shares the same extension as iNES 1.0?</div><br />Text in UTF-8 encoding shares the same extension as text in CP1252 (extended ISO Latin-1) or CP437 (MS-DOS character set). HTML5 shares the same MIME type as HTML 4.01. <a href="http://filext.com/file-extension/nsf" class="postlink">NES ripped music has the same extension as a Lotus Notes database</a>. <a href="http://filext.com/file-extension/spc" class="postlink">Super NES ripped music has the same extension as Authenticode certificates and a bunch of others</a>.<br /><br /><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">And what will the files spaced out have that iNES can't?</div>
<br />For one thing, patches would be applied to the PRG and CHR separately. So if you expand PRG in a patch, your patch wouldn't include the whole CHR.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FitzRoy</b> [ Sun Feb 20, 2011 2:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">I only made a splitter and there's alot more on the web &gt;.&gt;....needs fixed up though. And what will the files spaced out have that iNES can't? This offers no advantage as far as I'm concerned.</div><br /><br />Instant access to the chr and prg files, sizes, and checksums without needing to find some assfuck specialty tool. Think about the principle. If we had 10 systems like this, some people would be driven insane by now with all the tools needed to find simple information. Your argument if basically "I've already wasted my time finding or writing the tools necessary to dick with these blobs, so fuck everyone else who's yet to do so, what's in it for me anymore?" You can't see how making it easier for other people causes them to be more efficient at enhancing things you value.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Text in UTF-8 encoding shares the same extension as text in CP1252 (extended ISO Latin-1) or CP437 (MS-DOS character set). HTML5 shares the same MIME type as HTML 4.01. NES ripped music has the same extension as a Lotus Notes database. Super NES ripped music has the same extension as Authenticode certificates and a bunch of others.</div>
<br />
<br />It wasn't an important point I was trying to make because you'll still have frankenfiles, but you're missing it. No one will go on an NES page and think the files they're downloading might be lotus notes databases. iNES revisions are not likely to be visible on the surface, either in pages or in filenames, especially if GoodNES sticks with iNES 1.0. It won't be as easy to find a romset with proper headers if one is ever constructed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Feb 20, 2011 7:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">FitzRoy wrote:</div><div class="quotecontent"><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">And what will the files spaced out have that iNES can't?</div><br />Instant access to the chr and prg files, sizes, and checksums without needing to find some assfuck specialty tool.</div><br />IMHO you're looking for "<a href="http://www.catb.org/jargon/html/N/noddy.html" class="postlink">noddy</a>", not "<a href="http://www.youtube.com/watch?v=RuIy3dgtdS0" class="postlink">assfuck</a>". In that case, someone (possibly myself?) should write a 30-line split-and-SHA program for iNES and NES 2.0 in Python and throw it on the wiki.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">No one will go on an NES page and think the files they're downloading might be lotus notes databases.</div><br />But Windows might. If you double click a downloaded SPC sound file, you get "This is not a PKCS #7 certificate" or the like. Unlike Linux file managers, Windows Explorer is incapable of distinguishing files other than by their extension.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">iNES revisions are not likely to be visible on the surface, either in pages or in filenames, especially if GoodNES sticks with iNES 1.0. It won't be as easy to find a romset with proper headers if one is ever constructed.</div>
<br />An auditing tool could use a database like yours to split, hash, and rewrite the header on each ROM in a collection.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>clueless</b> [ Sun Feb 20, 2011 8:55 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">iNES revisions are not likely to be visible on the surface, either in pages or in filenames, especially if GoodNES sticks with iNES 1.0. It won't be as easy to find a romset with proper headers if one is ever constructed.</div><br />An auditing tool could use a database like yours to split, hash, and rewrite the header on each ROM in a collection.</div>
<br />
<br />This is my vote.  I know that such a tool is not what the OP wanted; he probably considers is a bastardization of his idea.
<br />
<br />If I had some spare time, I would write a command-line tool that uses a database (probably a pipe-delimited text file) and "fixes" ROMs to the proper iNES 2.0 header and changes the filename to something canonical.  I'd write it in ANSI C, since it would compile and execute fine on Windows and Unix (and unix like OSes) without needing any additional runtime support.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Feb 20, 2011 3:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">clueless wrote:</div><div class="quotecontent">I know that [a database-driven header fixer] is not what the OP wanted; he probably considers is a bastardization of his idea.</div>
<br />But then I can't help bastardizing his ideas, being a bastard myself. <img src="./images/smilies/icon_wink.gif" alt=";-)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Sun Feb 20, 2011 11:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />As a bastard I'm also for fixing iNES files. I wrote a NES ROM sorter for my private NES/FC CSV table/"database", but that has been vastly superceded by bootgod's. Maybe someone good with XML/XSLT can write a program to sort a dump of his database, sort the ROMs and fix them in one operation. This would make the tool "future-proof" as a new database dump could update the entire ROM set.
<br />
<br />Something brought up I don't get is the necessity for split PRG and CHR segments, and why it is more "correct". Do ROM hackers really have such a hard time splitting iNES "blobs"? If someone can learn to ROM "hack" or make reproductions (ARGH!) can't they learn to use/write a processing tool? Most users will never know what a container is. I'm not the biggest fan of iNES, but I don't get why it's SOOO BAD to use binary headers and containers, computers appreciate things in binary after all. Is the idea interweb-age ROM solidarity?
<br />
<br />Oh yeah, I'm a bystander but I don't really appreciate people popping out of the woodwork to say the iNES defenders here (it's really more like tolerators) are idiotic and close-minded, it's really uncalled for and frankly says more about a poster's maturity and possibly aptitude. I think the same goes for other disrespect of people and devices mentioned too <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FitzRoy</b> [ Sun Feb 20, 2011 11:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">An auditing tool could use a database like yours to split, hash, and rewrite the header on each ROM in a collection.</div>
<br />
<br />It's still a frankenfile and it's still part of a failed mapping delivery concept. 100% of users and 95% of emulators use only 1.0 files even after a better revision was issued years ago. Supporting 2.0 is still supporting a concept that puts mapping in the hands of users and expects them to do all this updating as info comes in for games few if any of them play. Why support a concept that failed where emulator-side mapping wouldn't have in making 100% correct mapping commonplace?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Mon Feb 21, 2011 12:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Because 1.0 takes care of 99.99% of games.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ibeenew2</b> [ Mon Feb 21, 2011 12:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I must be missing the whole point.  This idea is for a better format than iNES, but only for licensed games.  How many licensed games fail with correct iNES headers anyways?  3 or 4?
<br />
<br />Game info is looked up with a checksum.  That can already be done on an iNES file and the header ignored (or FIXED by the emulator).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ibeenew2</b> [ Mon Feb 21, 2011 12:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">FitzRoy wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"># What about games that I hack myself? I guess that these are no different than uncatalogued 'homebrew' from the point of view of the emulator.</div><br /><br />Any modification generates a new checksum, so you'd have to use iNES until it's finished and then create a patch. Patches don't interfere with checksum lookup.</div>
<br />
<br />So one of the big benefits of using separate PRG/CHR in a ZIP container is ease of modification to either part without affecting the other.  Except you can't actually do modification, or the checksum fails and nothing works at all.
<br />
<br />To get around this, you just use iNES while you are developing.  This must mean you already have an iNES splitter tool.  Also means iNES works fine, so why would you stop using it?  Now that development is done you need to make a patch, another frankenfile.  Making the patch also requires a tool so the new format doesn't help there.
<br />
<br />This all seems to be so narrowly focused to be much less usable than it could be.  Nothing extra is preserved in the file (its all in the database), working with the file isn't any easier (checksums fail), and it ignores the majority of the game library (unlicensed + Famicom + VS system + homebrew) which is the place iNES actually has problems with.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>D</b> [ Mon Feb 21, 2011 3:04 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><!-- m --><a class="postlink" href="http://www.jwz.org/doc/worse-is-better.html">http://www.jwz.org/doc/worse-is-better.html</a><!-- m -->
<br />
<br />Just to clarify my positions, while I think the iNES 1.0 and iNES 2.0 formats are fucking terrible, I don't consider FitzRoy's proposition to be any better. I really do not like the idea of this large database because it is a serious waste of information for emulator authors to ship. Plus he is not including unlicensed games, which are these days the only things keeping NES emulation interesting.
<br />
<br />And then there is the forking argument ...
<br />
<br />This is similar to MAME's retarded approach of storing information about every game inside the MAME binary rather than store that information in the ROM sets themselves. The result is something we're already familiar with: 47MB binaries (unless the UPX compress them down to 15MB, which never happens except on Windows) and each revision breaking compatibility with several hundred game sets.
<br />
<br />I told FitzRoy on byuu's board that I think it would be far more useful to create a format similar to the one byuu is using for SNES. You have a basic archive with three files: INFO.XML, PRG.BIN, CHR.BIN. The XML contains all the information about how to map these files into memory, what regions are mirrored and so on.
<br />
<br />Why is this a good idea?
<br />
<br />First off, it shaves 300KB of code out of most emulators. Every emulator has hundreds of files containing source code that specifically hacks the machine state to various mapper numbers. This is pointless. An XML file can tell all this information to the emulator and ensure it is completely correct for the given ROM.
<br />
<br />Hackers who wish to change memory map information could simply edit the XML file accordingly and resize the PRG and CHR ROM files as needed.
<br />
<br />Patches would be applies against the PRG and CHR separately, removing the problem of diff algorithms including the entire CHR ROM when someone decides to remap and expand a NES ROM.
<br />
<br />Moreover, as new cart formats come out in the future (such as NANJING carts), these can be supported through the XML alone. Even abandoned emulators, by supporting such a format, could continue to be relevant and support new dumps and boards even if the author is no longer maintaining his project. We would not longer have to rely on Windows-only hacked emulators distributed by Chinese pirates to run most of these.
<br />
<br />For a container, something common like ZIP or TAR would work fine. You could tag the XML with a version number so that if some radically new carts come along that need new fields current emulators don't understand, you just bump the version number and add them without risking backwards compatibility or another dramatic format shift.
<br />
<br />As for compatibility with quasi–flash-carts like the PowerPak, I would hope it is extremely trivial for an author to simply write a tool that will convert the XML file into something that can quickly be parsed by the NES: perhaps a plain-text file delimited by new lines where the software already knows that to look for and use from each line. That should be pretty damn snappy.
<br />
<br />I cannot see many negatives to doing things this way. It's just better for the emulator authors, for the hackers and for the end users.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Mon Feb 21, 2011 4:02 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Apologies for the OT-nes....
<br />
<br /><div class="quotetitle">D wrote:</div><div class="quotecontent">http://www.jwz.org/doc/worse-is-better.html</div>This opened my eyes <img src="./images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> I wonder when UC Berkeley moved back from New Jersey.<br /><br /><div class="quotetitle">D wrote:</div><div class="quotecontent">Of course, the whole concept of "mappers" is bullshit to begin with, but that's another problem ... </div>Philosophically right? Because the silicon albeit by other names is pretty real.<br /><br /><div class="quotetitle">D wrote:</div><div class="quotecontent">Every emulator has hundreds of files containing source code that specifically hacks the machine state to various mapper numbers. This is pointless. An XML file can tell all this information to the emulator and ensure it is completely correct for the given ROM.<br /><br />Hackers who wish to change memory map information could simply edit the XML file accordingly and resize the PRG and CHR ROM files as needed.</div>Just checking but so you're a proponent of the netlist method, with XML elements representing nets, functions and registers?<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">But then someone gets the bright idea to try playing 20-year-old video games on the PC that happens to be already connected to the TV, and its Atom CPU becomes a liability, as <a href="http://nesdev.com/bbs/viewtopic.php?p=60693#60693" class="postlink">kyuusaku discovered</a>.</div>And these:
<br /><!-- m --><a class="postlink" href="http://nesdev.com/bbs/viewtopic.php?t=4896">http://nesdev.com/bbs/viewtopic.php?t=4896</a><!-- m -->
<br /><!-- m --><a class="postlink" href="http://nesdev.com/bbs/viewtopic.php?t=6581">http://nesdev.com/bbs/viewtopic.php?t=6581</a><!-- m -->
<br />
<br />bsnes has become much more usable since then though, unfortunately I can't say the same for Nintendulator.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>24</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=12&amp;t=17644" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2018-08-13T09:19:13-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=12&amp;t=17644</id>
<entry>
<author><name><![CDATA[byuu]]></name></author>
<updated>2018-08-13T09:19:13-07:00</updated>
<published>2018-08-13T09:19:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223426#p223426</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223426#p223426"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223426#p223426"><![CDATA[
<div class="quotetitle">93143 wrote:</div><div class="quotecontent"><br />What actually was the issue?  Was the hack fixed, or was there a bug in bsnes causing the problem, or does the hack no longer work?<br /></div><br /><br />I stopped caring. No idea if it works or not, sorry ^^;<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=375">byuu</a> — Mon Aug 13, 2018 9:19 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2018-08-12T09:52:42-07:00</updated>
<published>2018-08-12T09:52:42-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223368#p223368</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223368#p223368"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223368#p223368"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />If you choose to use a 7-year old release, it's on you.<br /></div><br /><br />I got the information from 7-year old forum threads.<br /><br />Edit:<br />Wait, that forum thread said 2016?  I'm confused.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Sun Aug 12, 2018 9:52 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[93143]]></name></author>
<updated>2018-08-11T20:57:24-07:00</updated>
<published>2018-08-11T20:57:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223333#p223333</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223333#p223333"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223333#p223333"><![CDATA[
<div class="quotetitle">byuu wrote:</div><div class="quotecontent"><br />It's 32040hz now, and has been for a long time.<br /></div><br />What actually was the issue?  Was the hack fixed, or was there a bug in bsnes causing the problem, or does the hack no longer work?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6595">93143</a> — Sat Aug 11, 2018 8:57 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[byuu]]></name></author>
<updated>2018-08-11T19:04:36-07:00</updated>
<published>2018-08-11T19:04:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223328#p223328</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223328#p223328"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223328#p223328"><![CDATA[
It's 32040hz now, and has been for a long time. If you choose to use a 7-year old release, it's on you.<br /><br />Regardless, it really doesn't matter what value is chosen, so long as it's within the accepted tolerance of the ceramic capacitor.<br /><br />I would bet large sums of money d4s' streamer will break on some real hardware units, but certainly not most ... he's really thorough about testing his stuff.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=375">byuu</a> — Sat Aug 11, 2018 7:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2018-08-08T18:55:18-07:00</updated>
<published>2018-08-08T18:55:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223072#p223072</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223072#p223072"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223072#p223072"><![CDATA[
It must be off by less than a cycle.  I'm not sure if it's the NTSC or PAL version that didn't work at 32040 though.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Aug 08, 2018 6:55 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[93143]]></name></author>
<updated>2018-08-08T14:38:31-07:00</updated>
<published>2018-08-08T14:38:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223050#p223050</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223050#p223050"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223050#p223050"><![CDATA[
<div class="quotetitle">creaothceann wrote:</div><div class="quotecontent"><br />if the ROM hack works on <span style="color: #FF0000">every</span> real SNES, it's better to change the emulator.<br /></div><br />FTFY<br /><br />It seems to me that if it doesn't work with exactly 32040 Hz, odds are it will fail sooner or later on somebody's console.<br /><br />I imagine the BoFII streaming code is similar to the N-Warp Daisakusen method, which if I recall correctly uses a constant 66-cycle pickup loop.  This is a bit long even for PAL, but it works okay if you keep the data bursts short.*  For NTSC it's a full cycle too long and will quickly get out of sync.  In any case, if 32040.5 works but 32040 doesn't, it suggests that he was pushing the timing a little hard, and I wouldn't trust it on a real SNES.<br /><br />But I haven't actually examined the issue, so take the above with a grain of salt.  For all I know there could have been a bug in bsnes...<br /><br /><br />* <span style="font-size: 85%; line-height: normal">It helps that he just dumps the data to the stack and relocates it later, rather than writing it directly to the desired location like my proposed method, because the stack method is faster and leaves more room for timing slop.  This is why I need a hot-swappable sub-cycle delay block and he doesn't.</span><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6595">93143</a> — Wed Aug 08, 2018 2:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[creaothceann]]></name></author>
<updated>2018-08-08T13:12:39-07:00</updated>
<published>2018-08-08T13:12:39-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223048#p223048</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223048#p223048"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223048#p223048"><![CDATA[
Note that this was &quot;in an older release of bsnes&quot;, so there's a possibility that the timing was slightly off.<br /><br />Anyway, if the ROM hack works on a real SNES, it's better to change the emulator.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=290">creaothceann</a> — Wed Aug 08, 2018 1:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2018-08-08T12:30:34-07:00</updated>
<published>2018-08-08T12:30:34-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223043#p223043</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223043#p223043"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223043#p223043"><![CDATA[
&quot;d4s' Breath of Fire II HDMA audio streamer due to a race condition&quot;<br /><br />Wait, so this is to get it to work on somebody's ROM hack?  You'd think Byuu could've got d4s to fix his ROM hack instead?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Aug 08, 2018 12:30 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[creaothceann]]></name></author>
<updated>2018-08-08T11:37:44-07:00</updated>
<published>2018-08-08T11:37:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223037#p223037</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223037#p223037"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223037#p223037"><![CDATA[
relevant thread: <!-- m --><a class="postlink" href="https://board.byuu.org/viewtopic.php?f=8&amp;t=1455">https://board.byuu.org/viewtopic.php?f=8&amp;t=1455</a><!-- m --><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=290">creaothceann</a> — Wed Aug 08, 2018 11:37 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2018-08-08T10:51:41-07:00</updated>
<published>2018-08-08T10:51:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223031#p223031</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223031#p223031"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223031#p223031"><![CDATA[
If you're going to make an HDMA streaming code work on every SNES (except for broken ones) you probably want it to tolerate any rate between 64.5 cycles per scanline to 65.5 cycles per scanline.  I think having 9 lines of data plus 2 scanlines for timing would be a good idea, because 9 lines would be enough for 4 BRR blocks, and 11*20 = 220 which is close to 224 lines.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Aug 08, 2018 10:51 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2018-08-08T09:26:50-07:00</updated>
<published>2018-08-08T09:26:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223020#p223020</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223020#p223020"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223020#p223020"><![CDATA[
<div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent"><br />as a way to estimate the randomness of the real chip?<br /></div>I believe this is correct.<br /><br />The S-APU uses a ceramic resonator, which are a comparatively low-precision clock source (≈0.1% to 0.5% error). For whatever reason, the one in the SNES seems to tend fast.<br /><br />And using a large prime number makes it harder for people to make timed code that will fail on actual hardware when the clock rates don't match, without needing to dynamically change the clock rate every time the emulation starts.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Wed Aug 08, 2018 9:26 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2018-08-08T09:10:50-07:00</updated>
<published>2018-08-08T09:10:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223014#p223014</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223014#p223014"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223014#p223014"><![CDATA[
It takes 22 seconds for both the master clock and the sampling rate to hit a whole number at the same time.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Aug 08, 2018 9:10 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2018-08-08T08:53:53-07:00</updated>
<published>2018-08-08T08:53:53-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223009#p223009</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223009#p223009"/>
<title type="html"><![CDATA[Re: Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223009#p223009"><![CDATA[
The APU runs at &quot;roughly&quot; 3.07 MHz, with 64 S-DSP cycles and 32 S-SMP cycles per sample. The 32040.5 Hz sample rate implies a 3075888 Hz overall APU rate. I don't see where the 22 enters into anything.<br /><br />If I were designing a &quot;performance&quot; profile, I'd produce one APU cycle for every 7 master clock cycles. That'd give 945/44*1000000/7/96 = 31960.22 Hz.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Aug 08, 2018 8:53 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[psycopathicteen]]></name></author>
<updated>2018-08-08T09:00:32-07:00</updated>
<published>2018-08-08T08:43:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223006#p223006</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223006#p223006"/>
<title type="html"><![CDATA[Why does BSNES have a 32040.5 Hz sampling rate?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=17644&amp;p=223006#p223006"><![CDATA[
It's half of a prime number.  Is this number chosen so that it only syncs up with the master cycle every 22 seconds, as a way to estimate the randomness of the real chip?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4383">psycopathicteen</a> — Wed Aug 08, 2018 8:43 am</p><hr />
]]></content>
</entry>
</feed>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=117" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2004-12-25T15:10:16-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=117</id>
<entry>
<author><name><![CDATA[Mesofex]]></name></author>
<updated>2004-12-25T15:10:16-07:00</updated>
<published>2004-12-25T15:10:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=722#p722</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=722#p722"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=722#p722"><![CDATA[
Ahh, thank you soo much, that has been bothering me, now Its all coming together. Thanks again, and btw merry christmas to everyone<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=74">Mesofex</a> — Sat Dec 25, 2004 3:10 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2004-12-24T22:16:04-07:00</updated>
<published>2004-12-24T22:16:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=712#p712</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=712#p712"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=712#p712"><![CDATA[
A tile is divided into two 8-byte bitplanes, each of which is divided into eight 1-byte rows. Each row has 8 pixels; the most significant bit of each row is drawn on the left (except in horizontally flipped sprites). Thus, each pixel corresponds to a bit in the first plane and a bit in the second plane, and the color index value for each pixel is computed as follows:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Second  First  Pixel color<br /> plane  plane  &#40;low 2 bits&#41;<br />  bit    bit<br />---------------------------<br />   0      0    Transparent<br />   0      1         1<br />   1      0         2<br />   1      1         3</div><br />A slightly easier to read example of a tile shaped like the fraction 1/2 is in the "Pattern tables" section of <a href="http://nesdev.com/wiki/?page=NES+PPU" class="postlink">this NES Wiki page about the PPU</a>.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Dec 24, 2004 10:16 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Mesofex]]></name></author>
<updated>2004-12-24T21:03:28-07:00</updated>
<published>2004-12-24T21:03:28-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=711#p711</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=711#p711"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=711#p711"><![CDATA[
Alright, i looked at a demo nes game and hededited the .chr file for the graphics, i found 8 bytes that draw a sprite of a ball, it is in binary format and thats easy enough to find and display, but what i have wanted to know (sorry, havnt been so clear up to now) is how the ppu decides what color to use for each pixel<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=74">Mesofex</a> — Fri Dec 24, 2004 9:03 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Mesofex]]></name></author>
<updated>2004-12-24T20:12:46-07:00</updated>
<published>2004-12-24T20:12:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=710#p710</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=710#p710"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=710#p710"><![CDATA[
Sorry, dont mean to sound like "just gimme the code!" but I really dont understand how the heck it works<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=74">Mesofex</a> — Fri Dec 24, 2004 8:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2004-12-24T18:22:37-07:00</updated>
<published>2004-12-24T18:22:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=709#p709</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=709#p709"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=709#p709"><![CDATA[
You're joking... I can't believe the "tell-me-how-'n-next" thing! &gt;_&lt;;;.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Fri Dec 24, 2004 6:22 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Mesofex]]></name></author>
<updated>2004-12-24T14:28:29-07:00</updated>
<published>2004-12-24T14:28:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=708#p708</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=708#p708"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=708#p708"><![CDATA[
Taken from nestech.txt (cant remember author) based on Fayzullin's nes.txt<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br /><span style="color: green"><br /> C. Name Tables<br />  --------------<br />    The NES displays graphics using a matrix of "tiles"; this grid is called<br />    a Name Table. Tiles themselves are 8x8 pixels. The entire Name Table<br />    itself is 32x30 tiles (256x240 pixels). Keep in mind that the displayed<br />    resolution differs between NTSC and PAL units.<br /><br />    The Name Tables holds the tile number of the data kept in the Pattern<br />    Table (continue on).<br /><br /><br />  D. Pattern Tables<br />  -----------------<br />    The Pattern Table contains the actual 8x8 tiles which the Name Table<br />    refers to. It also holds the lower two (2) bits of the 4-bit colour<br />    matrix needed to access all 16 colours of the NES palette. Example:<br /><br />       VRAM    Contents of                     Colour <br />       Addr   Pattern Table                    Result<br />      ------ ---------------                  --------<br />      $0000: %00010000 = $10 --+              ...1.... Periods are used to<br />        ..       %00000000 = $00   |              ..2.2... represent colour 0.<br />        ..       %01000100 = $44   |              .3...3.. Numbers represent<br />        ..       %00000000 = $00   +-- Bit 0      2.....2. the actual palette<br />        ..       %11111110 = $FE   |              1111111. colour #.<br />        ..       %00000000 = $00   |              2.....2.<br />        ..       %10000010 = $82   |              3.....3.<br />      $0007: %00000000 = $00 --+              ........<br /><br />      $0008: %00000000 = $00 --+<br />        ..       %00101000 = $28   |<br />        ..       %01000100 = $44   |<br />        ..       %10000010 = $82   +-- Bit 1<br />        ..       %00000000 = $00   |<br />        ..       %10000010 = $82   |<br />        ..       %10000010 = $82   |<br />      $000F: %00000000 = $00 --+<br /><br />    The result of the above Pattern Table is the character 'A', as shown<br />    in the "Colour Result" section in the upper right.<br /></span><br /></div><br /><br />I cannot understand the above, it does not really add up and Why would the 8x8 tile be split into two pieces?<br /><br />[/quote]<br /><span style="color: green"><br />  E. Attribute Tables<br />  -------------------<br />    Each byte in an Attribute Table represents a 4x4 group of tiles on the<br />    screen. There's multiple ways to describe what the function of one (1)<br />    byte in the Attribute Table is:<br /><br />      * Holds the upper two (2) bits of a 32x32 pixel grid, per 16x16 pixels.<br />      * Holds the upper two (2) bits of sixteen (16) 8x8 tiles.<br />      * Holds the upper two (2) bits of four (4) 4x4 tile grids.<br /><br />    It's quite confusing; two graphical diagrams may help:<br /><br />      +------------+------------+<br />      |  Square 0 |  Square 1 |  #0-F represents an 8x8 tile<br />      |   #0  #1   |   #4  #5    |<br />      |   #2  #3   |   #6  #7    |  Square [x] represents four (4) 8x8 tiles<br />      +------------+------------+   (i.e. a 16x16 pixel grid)<br />      |  Square 2  |  Square 3 |<br />      |   #8  #9    |   #C  #D  |<br />      |   #A  #B   |   #E  #F    |<br />      +------------+------------+<br /><br />    The actual format of the attribute byte is the following (and corris-<br />    ponds to the above example):<br /><br />       Attribute Byte<br />         (Square #)<br />      ----------------<br />          33221100<br />          ||||||+--- Upper two (2) colour bits for Square 0 (Tiles #0,1,2,3)<br />          ||||+----- Upper two (2) colour bits for Square 1 (Tiles #4,5,6,7)<br />          ||+------- Upper two (2) colour bits for Square 2 (Tiles #8,9,A,B)<br />          +--------- Upper two (2) colour bits for Square 3 (Tiles #C,D,E,F)<br /><br /></span><br />[/quote]<br /><br />The above sort of makes sense, but I still dont quite get it and dont know how to use this in my Emu.<br /><br />I was just wondering if you could help explain some of this, thanks in advance and thanks for being patient with me<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=74">Mesofex</a> — Fri Dec 24, 2004 2:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Mesofex]]></name></author>
<updated>2004-12-24T13:31:32-07:00</updated>
<published>2004-12-24T13:31:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=707#p707</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=707#p707"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=707#p707"><![CDATA[
thanks a lot, it is starting to make sense now, ill see if I can make my emu draw graphics now, other than strange grey boxes.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=74">Mesofex</a> — Fri Dec 24, 2004 1:31 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Hyde]]></name></author>
<updated>2004-12-24T11:03:26-07:00</updated>
<published>2004-12-24T11:03:26-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=705#p705</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=705#p705"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=705#p705"><![CDATA[
VRAM Area $0000-$1fff is where you'd find the pattern tables, which contain graphical information about tiles referenced by the nametables, i.e. the stuff that actually gets drawn to the screen. <br /><br />VRAM Area $2000-$3000 is where you will find the nametables. Note that there are actually only two physical tables, whereas the others are just mirrors. <br /><br />VRAM Area $3f00-$3f20 is where the palette data can be found. <br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">      +---------+-------+-------+--------------------+<br />      | Address | Size  | Flags | Description        |<br />      +---------+-------+-------+--------------------+<br />      | $0000   | $1000 | C     | Pattern Table #0   |<br />      | $1000   | $1000 | C     | Pattern Table #1   |<br />      | $2000   | $3C0  |       | Name Table #0      |<br />      | $23C0   | $40   |  N    | Attribute Table #0 |<br />      | $2400   | $3C0  |  N    | Name Table #1      |<br />      | $27C0   | $40   |  N    | Attribute Table #1 |<br />      | $2800   | $3C0  |  N    | Name Table #2      |<br />      | $2BC0   | $40   |  N    | Attribute Table #2 |<br />      | $2C00   | $3C0  |  N    | Name Table #3      |<br />      | $2FC0   | $40   |  N    | Attribute Table #3 |<br />      | $3000   | $F00  |   R   |                    |<br />      | $3F00   | $10   |       | Image Palette #1   |<br />      | $3F10   | $10   |       | Sprite Palette #1  |<br />      | $3F20   | $E0   |    P  |                    |<br />      | $4000   | $C000 |     F |                    |<br />      +---------+-------+-------+--------------------+<br />                          C = Possibly CHR-ROM<br />                          N = Mirrored &#40;see Subsection G&#41;<br />                          P = Mirrored &#40;see Subsection H&#41;<br />                          R = Mirror of $2000-2EFF &#40;VRAM&#41;<br />                          F = Mirror of $0000-3FFF &#40;VRAM&#41;<br /></div><br /><br />(Note: Extracted directly from NESTech.)<br /><br />How do you access all these VRAM areas? Well, first you set $2006 to the VRAM address you want to write to (i.e. $2000 if you wanna start writing data to the first nametable), then you write the data to $2007. <br /><br />One thing that may be confusing you is that VRAM is not part of the main memory area. Here is a map of the main memory:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">    +---------+-------+-------+-----------------------+<br />    | Address | Size  | Flags | Description           |<br />    +---------+-------+-------+-----------------------+<br />    | $0000   | $800  |       | RAM                   |<br />    | $0800   | $800  | M     | RAM                   |<br />    | $1000   | $800  | M     | RAM                   |<br />    | $1800   | $800  | M     | RAM                   |<br />    | $2000   | 8     |       | Registers             |<br />    | $2008   | $1FF8 |  R    | Registers             |<br />    | $4000   | $20   |       | Registers             |<br />    | $4020   | $1FDF |       | Expansion ROM         |<br />    | $6000   | $2000 |       | SRAM                  |<br />    | $8000   | $4000 |       | PRG-ROM               |<br />    | $C000   | $4000 |       | PRG-ROM               |<br />    +---------+-------+-------+-----------------------+<br /></div><br /><br />I think NESTech covers this process pretty well, but I doubt you still have not read it. Let me know if you have more questions (you probably will).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=22">Hyde</a> — Fri Dec 24, 2004 11:03 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Mesofex]]></name></author>
<updated>2004-12-23T21:31:57-07:00</updated>
<published>2004-12-23T21:31:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=697#p697</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=697#p697"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=697#p697"><![CDATA[
Thanks for the info, but I also need to know where to look in the ppu memory to find the graphics and how to draw them really because i cant figure out the docs that are out there.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=74">Mesofex</a> — Thu Dec 23, 2004 9:31 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Mesofex]]></name></author>
<updated>2004-12-23T19:55:41-07:00</updated>
<published>2004-12-23T19:55:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=696#p696</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=696#p696"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=696#p696"><![CDATA[
thanks a lot, ill get right on reading it and hopefully ill see graphics tonight or early tomorrow<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=74">Mesofex</a> — Thu Dec 23, 2004 7:55 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Hyde]]></name></author>
<updated>2004-12-23T17:24:35-07:00</updated>
<published>2004-12-23T17:24:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=693#p693</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=693#p693"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=693#p693"><![CDATA[
Here are some threads you may want to read:<br /><br /><a href="http://nesdev.com/cgi-bin/wwwthreads/showpost.pl?Board=NESemdev&amp;Number=1931&amp;page=0&amp;view=collapsed&amp;sb=5" class="postlink">http://nesdev.com/cgi-bin/wwwthreads/showpost.pl?Board=NESemdev&amp;Number=1931&amp;page=0&amp;view=collapsed&amp;sb=5</a><br /><br /><a href="http://nesdev.com/cgi-bin/wwwthreads/showpost.pl?Board=NESemdev&amp;Number=1905&amp;page=1&amp;view=collapsed&amp;sb=5" class="postlink">http://nesdev.com/cgi-bin/wwwthreads/showpost.pl?Board=NESemdev&amp;Number=1905&amp;page=1&amp;view=collapsed&amp;sb=5</a><br /><br /><a href="http://nesdev.com/cgi-bin/wwwthreads/showpost.pl?Board=newbie&amp;Number=1392&amp;page=0&amp;view=collapsed&amp;mode=threaded&amp;sb=5#Post1392" class="postlink">http://nesdev.com/cgi-bin/wwwthreads/showpost.pl?Board=newbie&amp;Number=1392&amp;page=0&amp;view=collapsed&amp;mode=threaded&amp;sb=5#Post1392</a><br /><br />You may also want to read Brad Taylor's document on PPU addressing logic.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=22">Hyde</a> — Thu Dec 23, 2004 5:24 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Mesofex]]></name></author>
<updated>2004-12-23T15:31:19-07:00</updated>
<published>2004-12-23T15:31:19-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=117&amp;p=690#p690</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=690#p690"/>
<title type="html"><![CDATA[PPU emulation]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=117&amp;p=690#p690"><![CDATA[
Hello everyone, I have written the 6502 core already for my emulator (in java), I just need to know how one should go about writing the code to handle the ppu? I have read many documents and bits of source code on the subject but am still lost as how to go about it. Thanks in advance<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=74">Mesofex</a> — Thu Dec 23, 2004 3:31 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - One nes controller, two consoles.</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">One nes controller, two consoles.</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=11348">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=11348</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dashv</b> [ Wed Jun 18, 2014 1:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Folks I want to drive two consoles simultaneously with one controller.<br /><br />The reason being I want to test various clones against the real nes with the same games to test for lag.<br /><br />I have spliced 2 nes extension cables into a y adapter and quickly learned it's not as easy as that.<br /><br />Has a one done this before? Tips?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Wed Jun 18, 2014 1:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />NES controller transfers data serially. There's a shift register inside the controller that is used to latch the 8 button states and shift them out one by one when the shift register is clocked (clock is generated by the program reading $4016).<br /><br />So, because the controller reading from both consoles may be out of sync with each other, you will need two shift registers. I'm not sure what would be the easiest way to achieve this, possibly you could just take two controllers, and connect the 8 button traces from one to the other.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jun 18, 2014 6:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You'd probably need three 8-bit shift registers and an oscillator: one SIPO (serial in, parallel out) connected to the controller, and a PISO (parallel in, serial out) connected to each console. The oscillator would have the SIPO poll each controller every 10 milliseconds or so, resulting in a set of eight signals on the PCB. The PISOs are the same chips found in the controller itself (the &quot;controller IC&quot; at the bottom of <a href="http://infiniteneslives.com/products.php" class="postlink">this page</a>) and turn these signals back into a serial stream for each console. In practice, unless you can precisely control the timing of the power supply to the consoles, they're gonna desync.<br /><br />I have better ideas to test for lag. A year ago, I made a ROM that continuously reads the A button and turns the screen white while it is held. Even with an authentic NES console, <a href="http://forums.nesdev.com/viewtopic.php?p=113453#p113453" class="postlink">HDTVs have far more lag than SDTVs</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Wed Jun 18, 2014 7:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">I have better ideas to test for lag. A year ago, I made a ROM that continuously reads the A button and turns the screen white while it is held. Even with an authentic NES console, <a href="http://forums.nesdev.com/viewtopic.php?p=113453#p113453" class="postlink">HDTVs have far more lag than SDTVs</a>.</div><br />Doesn't he mean differences in the performance of the NES console not the differences in performance of the display media?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Wed Jun 18, 2014 8:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Put two shift registers in the same controller. Connect the output pins to different consoles, and the clock/reset pins to the different consoles, too. I believe there's enough space for it in the controller, adding the 2nd wire shouldn't be too bad either.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Jun 18, 2014 9:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's some basic explanation of how the controller works so that you can understand better what all these suggestions mean:<br /><br />Inside the NES controller there's a chip, which receives the state of all 8 buttons. In order to read the controller, the NES commands this chip to &quot;freeze&quot; the current state of all buttons, and then reads it bit by bit (button by button).<br /><br />Simply splitting the cable and connecting the controller as is to 2 consoles won't work, because you can't have the controller receive commands from 2 consoles. The simplest solution would indeed be borrowing the chip and cable from another controller and feed the button states to both chips. Each console would be free to &quot;freeze&quot; the controller state and read the bits at its own pace.<br /><br />Tepples's suggestion is more complex, because it doesn't involve modifying the controller. His idea was to convert the serial data back into 8 individual signals and feed that to the chips that are connected to the 2 consoles, like in the basic solution.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Wed Jun 18, 2014 11:01 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Could you just stack the second chip on top of the second one, and solder it right on with the latch/clock/data pins going to the second plug?<br /><br />What about the two 5V and ground lines from both consoles? Is it safe to just tie them together?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jun 18, 2014 12:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">cpow wrote:</div><div class="quotecontent">Doesn't he mean differences in the performance of the NES console not the differences in performance of the display media?</div><br />Yes, that's what he means. However, the same ROM can be used to test both, and this test procedure is simpler than rigging up one controller to go to two consoles. Besides, if both consoles aren't on CRT SDTVs, differences in performance of the display media may mask differences in performance of the consoles being tested.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Jun 18, 2014 1:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">Could you just stack the second chip on top of the second one, and solder it right on with the latch/clock/data pins going to the second plug?</div><br />That's exactly what I imagined.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What about the two 5V and ground lines from both consoles? Is it safe to just tie them together?</div><br />I also had doubts concerning this. Tying them together wouldn't be my first guess... I'd first try using only one of the 5V signals and ignoring the other.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Thu Jun 19, 2014 10:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">dashv wrote:</div><div class="quotecontent">Folks I want to drive two consoles simultaneously with one controller.<br /><br />The reason being I want to test various clones against the real nes with the same games to test for lag.<br /><br />I have spliced 2 nes extension cables into a y adapter and quickly learned it's not as easy as that.<br /><br />Has a one done this before? Tips?</div><br /><br />Hardware clones using the &quot;NOAC&quot; or actual CPU and PPU clones will not have &quot;lag&quot;. There is no need to test. These are exact (almost) clones of the circuitry in the original system. No emulation is being performed. Any &quot;lag&quot; one might experience would be related to their display.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Jun 20, 2014 12:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Indeed, you will most certainly not see any differences in performance if you're comparing an NES to a NOAC. The audio or the colors might differ sometimes, but the gameplay will be identical if the game runs. Some might not run because of how some signals are wired in the cartridge connector, but that doesn't mean that the CPU or PPU are inaccurate.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Jun 20, 2014 6:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A wireless controller as seen in the &quot;Generation NEX&quot; NOAC famiclone might contribute to lag, but that won't affect use of a wired controller.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dashv</b> [ Sat Jun 21, 2014 12:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent"><div class="quotetitle">dashv wrote:</div><div class="quotecontent">Folks I want to drive two consoles simultaneously with one controller.<br /><br />The reason being I want to test various clones against the real nes with the same games to test for lag.<br /><br />I have spliced 2 nes extension cables into a y adapter and quickly learned it's not as easy as that.<br /><br />Has a one done this before? Tips?</div><br /><br />Hardware clones using the &quot;NOAC&quot; or actual CPU and PPU clones will not have &quot;lag&quot;. There is no need to test. These are exact (almost) clones of the circuitry in the original system. No emulation is being performed. Any &quot;lag&quot; one might experience would be related to their display.</div><br /><br />Folks, thanks for all the input and suggestions. with all your help and insights I now understand why my simple splitter made from 2 extension cords (didn't want to ruin 2 controllers) will not work without additional hardware. And here I though I was clever because I was smart enough to clip the extra 5volt feed. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />For additional context.<br /><br />I'm comparing an original NES first to itself (another nes). Then to a Retron 5. It's emulation based not NOAC. with extra features like HDMI upscaling, graphics filters, Etc.<br /><br />Input lag, display lag, and emulation performance are all possible factors.<br /><br />I have 2 nes systems, 2 identical SMB 1 and Punch Out! cartridges, a CRT and a 55inch LED. I have a series of side-by-side control and variable tests planned to detect input, display, and emulation speed issues separately.<br /><br />What I need to remove however is the ham handed &quot;one guy trying to mash two buttons on two controllers simultaneously&quot;.<br /><br />I'll be recording the feeds from both devices using separate DVRs with lagless passthrough and also two 5D MKIIs camera's aimed at the displays running at 30fps at high shutter to eliminate motion blur (at least from the camera). So I can do frame by frame comparisons.<br /><br />Yeah it's ambitious. Probably even overkill. But everybody's gotta have a hobby, right? <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />Thanks again for all of the advice. It honestly sounds like the controller project may be a bit more than I can handle right now. I'd rather not take an iron to my controllers and while I'm good with replacing worn caps and dead batteries, building custom circuits is beyond my abilities at present.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drag</b> [ Sat Jun 21, 2014 10:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The main problem I can think of would be the fact that you'd need both machines to run in a perfectly synchronized way, unless you're just looking for whether both Marios move at exactly the same time. It'd be difficult to play the first couple of SMB stages, for example, without both games getting out of sync at some point.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sun Jun 22, 2014 4:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: One nes controller, two consoles.</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Drag wrote:</div><div class="quotecontent">The main problem I can think of would be the fact that you'd need both machines to run in a perfectly synchronized way, unless you're just looking for whether both Marios move at exactly the same time. It'd be difficult to play the first couple of SMB stages, for example, without both games getting out of sync at some point.</div><br /><br />Yeah, one could wire a button to the reset both machines, but even then they'll go out of sync eventually, because the clocks will be slightly different.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - FDS-homebrewers/hackers</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">FDS-homebrewers/hackers</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=7350">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=7350</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Mon Jan 03, 2011 4:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>FDS-homebrewers/hackers</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Along time ago I wrote "FDS Explorer" to extract/modify the contents of an FDS-diskimage.
<br />It was a fun project and I'm pretty proud of it. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />Just curious if there's anyone here that has been using it, or have any ideas for improvement?
<br />If you've missed it, it's available for download here:
<br /><a href="http://www.anes.se/NESTools/" class="postlink">http://www.anes.se/NESTools/</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Mon Jan 03, 2011 7:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I did a FDS to NES (Mapper 1) conversion of Ai Senshi Nicol with the help of that tool.
<br />It just needs some basic features added that every Windows program is supposed to have, such as ARGV support to open an initial .FDS image, and .FDS file drag-drop on to the main window to open a file.
<br />
<br />I also just tested the newest version, looks like it throws an exception when you try to view CHR when nothing is loaded.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gilbert</b> [ Mon Jan 03, 2011 9:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I tried to use it, but there're some quirks in it that prevented me from doing so.
<br />1. If the filenames of a disk have some non-ASCII characters it failed to extract them (and it even crashed for me occasionally). Since the filenames aren't relevant to anything I think the tool should just let the user enter the names of the exported files, instead of using the internal filenames in the disk (if this was what it was trying to do).
<br />2. Sometimes, for unknown reasons, the HEX dump and/or the disassembly of a file on the right would be chopped off abruptly after a few lines. Maybe it was trying to display some certain characters causing this.
<br />
<br />I ended up using <a href="http://web.archive.org/web/20080216142403/http://fdsstudy.hp.infoseek.co.jp/index.html" class="postlink">FDS Study</a> (as infoseek took off its free web hosting service recently the site is now dead; this is an archived link) instead, which isn't very convenient (but it has enough features for it to be quite useful) as I have to use Applocale to avoid guessing on gibberish text.
<br />
<br />BTW, if your tool is to be updated, a feature suggestion is the ability to extract a <em>side</em> and to add a <em>side</em> to an image. This would make say, using those FDS graphics editor disks easy, as you can put the editor on side A and the game to hack on side B (using separate images isn't very good atm as most emulators by default resets the system when you change the image). I know there're other tools to do this (and this isn't hard with hex editing) but it would be handy to have such feature.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Mon Jan 03, 2011 11:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@Gilbert: Can you mention a few fds-images that are causing these issues?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gilbert</b> [ Tue Jan 04, 2011 12:10 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I once tried the NROM conversion of "Tennis" (no link here for obvious reasons) as my base for building stuff. The image I acquired had no header but FDSExplorer could open it with correct file info. listing. Both HEX listing and disassembled codes of the files seemed to have truncated after one or few lines, and the files' names are not ASCII so exporting files would crash the tool. The odd (good) thing is, after I saved the image as another file it added the header for me, and when I loaded the new image the HEX listings and disassembled codes were shown without any problems, though the filename are still gibberish.  (I'm not sure whether it's a bad image, but at least it works in emulators after adding the header.)
<br />
<br />One such disk image to check is my <a href="http://www.mediafire.com/?823q4gqk4r5cqe4" class="postlink">small demo</a> (Sorry, but I've forgotten to add the built FDS image into the ZIP; just put ASM6.exe in the same folder and run the batch file to build it). It would show some of the problems:
<br />
<br />1. The license name table file has non-ASCII name (just because I "borrowed" it from Tennis and was lazy to hack it to the more common "KODAKU" name) and so this file cannot be extracted by the tool.
<br />
<br />2. HEX listing for any file in it is incomplete (check the screenshot below), but disassembled codes seem fine.
<br /><img src="http://i488.photobucket.com/albums/rr249/gilbot/Clipboard01-1.png" alt="Image" />
<br />
<br />I'm not quite sure whether it's because of the encoding of my system or not (I'm using Chinese Windows XP), so these problems may not appear under other people's systems.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>LocalH</b> [ Wed Jan 05, 2011 1:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi,
<br />
<br />I was going to mess around looking through some FDS files and I found that the CHR display was corrupted. I'm running on Win7 x64 and it looks like each successive line of each tile row is offset further to the right, which resets for the next tile row. Screenshot:
<br />
<br /><img src="http://img600.imageshack.us/img600/5240/fdsxchr.png" alt="Image" />
<br />
<br />I've tried all compatibility options without any change.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Jan 05, 2011 1:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's very likely because CHR is compressed ?
<br />Some FDS games such as Castlevania II store compressed CHR, load it in PRG RAM, uncompress it into VRAM, and then load other data back into PRG RAM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jan 05, 2011 2:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There's another problem. Look at the L-shaped gray pixels on a black background in the sixth row.
<br />[][]
<br />[][]
<br />[][][]

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>LocalH</b> [ Wed Jan 05, 2011 3:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">It's very likely because CHR is compressed ?<br />Some FDS games such as Castlevania II store compressed CHR, load it in PRG RAM, uncompress it into VRAM, and then load other data back into PRG RAM.</div>
<br />I was looking at the Zelda prototype, so I'm pretty sure that CHR is uncompressed.
<br />
<br />tepples: I noticed that, and saw that it occurs over a majority of the graphics.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gilbert</b> [ Thu Jan 06, 2011 6:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />And if he's loading a file marked with the "CHR" type it's reasonable to assume that it's never compressed, as it's supposed to be loaded directly to CHR-RAM by the BIOS. Though it may be possible that some of the hackish programmers treat CHR-RAM as some generic space for storage I think it's rare (if not non-existent) considering how useful this could be.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Thu Jan 06, 2011 6:38 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">LocalH wrote:</div><div class="quotecontent">Hi,<br /><br />I was going to mess around looking through some FDS files and I found that the CHR display was corrupted. I'm running on Win7 x64 and it looks like each successive line of each tile row is offset further to the right, which resets for the next tile row. Screenshot:<br /><br /><img src="http://img600.imageshack.us/img600/5240/fdsxchr.png" alt="Image" /><br /><br />I've tried all compatibility options without any change.</div>
<br />
<br />I'm using the same setup as yours, does these CHR-bugs appear on all FDS-titles you try?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu Jan 06, 2011 6:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks like an incorrect process of filling a memory buffer when using LockBits.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>LocalH</b> [ Thu Jan 06, 2011 12:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">oRBIT2002 wrote:</div><div class="quotecontent">I'm using the same setup as yours, does these CHR-bugs appear on all FDS-titles you try?</div>
<br />Yes. It also happens if I click on a PRG file (which I know will not usually display anything other than garbage but it should still be aligned rather than skewed to the right). I also have the default text size and DPI set in the Display control panel. The only real difference (other than OS) that I can discern between my screenshot and the others posted, is that mine shows ClearType, but I wouldn't guess that by itself would cause this, and I'd rather not turn it off just for one application.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Thu Jan 06, 2011 2:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Strange. The CHR-dump shouldn't be affected by ClearType. There has to be something else messing up the bitmap I'm drawing on.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Jan 06, 2011 4:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Can you show the source code of the loop to draw a tile onto the bitmap?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
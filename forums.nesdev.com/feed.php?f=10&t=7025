<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=7025" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2010-10-11T18:37:28-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=7025</id>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2010-10-11T18:37:28-07:00</updated>
<published>2010-10-11T18:37:28-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68507#p68507</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68507#p68507"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68507#p68507"><![CDATA[
I like when we discuss code... I mean, not those "here's my wall of code - find my error for me" situations, but more when we talk about a good way to do this or that...<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Mon Oct 11, 2010 6:37 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-10-11T15:25:16-07:00</updated>
<published>2010-10-11T15:25:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68504#p68504</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68504#p68504"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68504#p68504"><![CDATA[
IMO, this has been one of the more interesting discussions, even though it's about something so basic. The basics never get boring.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Mon Oct 11, 2010 3:25 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-11T13:33:24-07:00</updated>
<published>2010-10-11T13:33:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68502#p68502</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68502#p68502"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68502#p68502"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br /><div class="quotetitle">cartlemmy wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">clrmem:<br />   LDA #$00<br />   STA $0000, x<br />   STA $0100, x<br />   STA $0200, x ;Isn't this sort of redundant, since we are setting it to #$FE later? Or am I missing something?<br />   STA $0400, x<br />; &#91;...&#93;<br />   LDA #$FE<br />   STA $0200, x<br />   INX<br />   BNE clrmem</div><br /></div><br />I'm pretty sure the first instance of $0200,x is a typo for $0300,x. Where did you find this code? I just checked the wiki and the error isn't there.</div><br /><br />I though I found it on that Nerdy Nights tutorial... But upon review, I couldn't find this error. Perhaps I screwed something up somehow, and in that case I apologize for the trouble.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Mon Oct 11, 2010 1:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-10-10T17:32:14-07:00</updated>
<published>2010-10-10T17:32:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68455#p68455</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68455#p68455"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68455#p68455"><![CDATA[
<div class="quotetitle">cartlemmy wrote:</div><div class="quotecontent"><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">clrmem:<br />   LDA #$00<br />   STA $0000, x<br />   STA $0100, x<br />   STA $0200, x ;Isn't this sort of redundant, since we are setting it to #$FE later? Or am I missing something?<br />   STA $0400, x<br />; &#91;...&#93;<br />   LDA #$FE<br />   STA $0200, x<br />   INX<br />   BNE clrmem</div><br /></div><br />I'm pretty sure the first instance of $0200,x is a typo for $0300,x. Where did you find this code? I just checked the wiki and the error isn't there.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Oct 10, 2010 5:32 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-09T18:36:23-07:00</updated>
<published>2010-10-09T18:36:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68415#p68415</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68415#p68415"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68415#p68415"><![CDATA[
Thanks Blarrg, that's what I was looking for.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sat Oct 09, 2010 6:36 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-10-09T13:54:23-07:00</updated>
<published>2010-10-09T13:54:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68404#p68404</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68404#p68404"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68404#p68404"><![CDATA[
Yeah, it's redundant. Sometimes you start with code that's known to work, then make changes that you are sure won't break it, and don't mind leaving some inefficiency if it means the program is easier to prove correct. Though here, it reduces clarity, because you wonder why it's doing a clear followed by a fill, whether there is something you aren't seeing.<br /><br />If I were doing that, I'd have no problem with using a standard memory clear and avoiding modifying it, and then doing the fill separately later in the code. It's a combination of a well-tested memory clear that you use in EVERY program, and some extra code that's easy to prove correct.<br /><br />So the coding style I use emphasizes correctness first, even if that sometimes results in inefficiencies. As long as they aren't in critical sections of code, it might not even have any noticeable impact on the program speed, and thus show that it was the right choice: trade some unimportant speed for always-important correctness and clarity.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Sat Oct 09, 2010 1:54 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-09T13:11:49-07:00</updated>
<published>2010-10-09T13:11:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68402#p68402</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68402#p68402"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68402#p68402"><![CDATA[
One more question (in comments).<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">clrmem:<br />   LDA #$00<br />   STA $0000, x<br />   STA $0100, x<br />   STA $0200, x ;Isn't this sort of redundant, since we are setting it to #$FE later? Or am I missing something?<br />   STA $0400, x<br />   STA $0500, x<br />   STA $0600, x<br />   STA $0700, x<br />   LDA #$FE<br />   STA $0200, x<br />   INX<br />   BNE clrmem</div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sat Oct 09, 2010 1:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-09T12:55:25-07:00</updated>
<published>2010-10-09T12:55:25-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68400#p68400</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68400#p68400"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68400#p68400"><![CDATA[
Yeah, I don't have a problem with optimizations in tutorials, as long as there is an explanation. Thanks for the info Blargg.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sat Oct 09, 2010 12:55 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-10-09T11:20:01-07:00</updated>
<published>2010-10-09T11:20:01-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68396#p68396</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68396#p68396"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68396#p68396"><![CDATA[
Yes, unfortunately many code aimed at new programmers needlessly optimizes it, making the task of learning more difficult. Assembly is difficult enough as it is; save the optimizations until after you've learned how to initialize the NES.<br /><br />Another reason is to allow easy access to the stack via indexed addressing. Sometimes you push some things on the stack, and then want to access one of the earlier things without pulling everything back off. You do this by transferring S to X, and then using $100+offset,x to access earlier things. If the stack pointer might have wrapped since pushing those, this will fail.<br /><br />A final reason to initialize the stack pointer is consistency of behavior, in case your code ever depends ons value. Having it random makes debugging harder, since it's something that might differ without your knowledge.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Sat Oct 09, 2010 11:20 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-09T09:35:10-07:00</updated>
<published>2010-10-09T09:35:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68390#p68390</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68390#p68390"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68390#p68390"><![CDATA[
Thanks guys, you're awesome!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sat Oct 09, 2010 9:35 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2010-10-09T09:33:55-07:00</updated>
<published>2010-10-09T09:33:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68389#p68389</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68389#p68389"/>
<title type="html"><![CDATA[Re: Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68389#p68389"><![CDATA[
<div class="quotetitle">cartlemmy wrote:</div><div class="quotecontent"><br />; I'm not sure why this is done, are we manually resetting the stack? can someone give me a hint?<br /></div><br />Yeah, it's good practice to initialize the stack pointer. Your program might still work if you don't though, since the stack pointer wraps around, as long as you don't use page 1 ($0100-$01FF) for anything else. But if you plan on using page 1 for other purposes besides the stack, or if you plan on accessing the stack using using index registers (LDA $0101, X; LDA $0102, X; etc.) you have to initialize it.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />; Increments X, which rolls X over its max value back to 0. I'm assuming we do this because it uses less memory than writing LDX #$00. Is that correct?<br /></div><br />Yes, this is correct.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Sat Oct 09, 2010 9:33 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-10-09T09:33:03-07:00</updated>
<published>2010-10-09T09:33:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68388#p68388</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68388#p68388"/>
<title type="html"><![CDATA[Re: Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68388#p68388"><![CDATA[
<div class="quotetitle">cartlemmy wrote:</div><div class="quotecontent"><br />There were a few instructions of the init code that I wasn't sure about, and I was hoping someone could give me some insight.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   LDX #$FF   <br />   TXS         ; I'm not sure why this is done, are we manually resetting the stack? can someone give me a hint?</div><br /></div><br />The power-on value of the stack pointer might vary from one CPU revision to another. It'll certainly vary when the user presses the NES's reset button in the middle of a subroutine.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   INX         ; Increments X, which rolls X over its max value back to 0. I'm assuming we do this because it uses less memory than writing LDX #$00. Is that correct?</div><br /></div><br />Yes. It saves 1 byte and 0 cycles over LDX #$00.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Oct 09, 2010 9:33 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cartlemmy]]></name></author>
<updated>2010-10-09T09:17:18-07:00</updated>
<published>2010-10-09T09:17:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68387#p68387</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68387#p68387"/>
<title type="html"><![CDATA[Init Code Questions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7025&amp;p=68387#p68387"><![CDATA[
There were a few instructions of the init code that I wasn't sure about, and I was hoping someone could give me some insight.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Reset:<br />   SEI   <br />   CLD<br />   LDX #$40<br />   STX $4017<br />   LDX #$FF   <br />   TXS         ; I'm not sure why this is done, are we manually resetting the stack? can someone give me a hint?<br />   INX         ; Increments X, which rolls X over its max value back to 0. I'm assuming we do this because it uses less memory than writing LDX #$00. Is that correct?<br />   STX $2000<br />   STX $2001<br />   STX $4010 </div><br /><br />Sorry that it's not good enough for me to 'just know that it works, and don't worry about why'. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4574">cartlemmy</a> — Sat Oct 09, 2010 9:17 am</p><hr />
]]></content>
</entry>
</feed>
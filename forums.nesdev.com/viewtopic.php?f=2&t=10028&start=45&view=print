<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - .ASM into .NES assistance</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">.ASM into .NES assistance</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=10028">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=10028</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>7</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Wed May 08, 2013 3:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You'll need to run <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&quot;c:\users\whoever\documents\nes maker files\asm6.exe&quot; &quot;c:\users\whoever\documents\nes maker files\input.asm&quot; &quot;c:\users\whoever\documents\nes maker files\output.nes&quot;</tt><br /><br />Which is to say you'll need to make a file &quot;input.asm&quot; using something like notepad or any other plain text editor.<br /><br />In that file you put the commands, like &quot;.incbin&quot;

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>caramelpuffpuff</b> [ Wed May 08, 2013 3:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">You'll need to run <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&quot;c:\users\whoever\documents\nes maker files\asm6.exe&quot; &quot;c:\users\whoever\documents\nes maker files\input.asm&quot; &quot;c:\users\whoever\documents\nes maker files\output.nes&quot;</tt><br /><br />Which is to say you'll need to make a file &quot;input.asm&quot; using something like notepad or any other plain text editor.<br /><br />In that file you put the commands, like &quot;.incbin&quot;</div><br /><br />By making file, &quot;input.asm&quot; does it also work on ConTEXT? And then what?<br /><br />By command, like <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&quot;c:\users\whoever\documents\nes maker files\asm6.exe&quot;&quot;.incbin&quot;</tt>? Do I have to put &quot; &quot; everytime I want to command the ASM?<br /><br />The output.nes means any NES that is blank?<br /><br />(Gosh, I'm terrible at vocabulary...)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed May 08, 2013 3:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The .incbin command goes <em>inside</em> a source code file.<br /><br />Have you ever written a program in any other programming language?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>caramelpuffpuff</b> [ Wed May 08, 2013 4:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The .incbin command goes <em>inside</em> a source code file.<br /><br />Have you ever written a program in any other programming language?</div><br /><br />I don't think so... I read a lot of tutorials about ASM and CMD, and I still can't understand some of those...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed May 08, 2013 5:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />OK, here are the steps for creating a valid NES ROM with ASM6:<br /><br />1. Go to <a href="http://forums.nesdev.com/viewtopic.php?p=58138#p58138" class="postlink">this post</a> and copy the NROM template;<br />2. Open Notepad and paste the code you copied;<br />3. In the last line, change &quot;tiles.chr&quot; to the name of your CHR file;<br />4. Save the file as &quot;game.asm&quot; to the same folder where ASM6 and the CHR file are;<br />5. Open another Notepad window ans write the following in it:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">asm6 game.asm game.nes<br />pause</div><br />6. Save this as &quot;compile.bat&quot;, in the same folder as the other files;<br />7. double click &quot;compile.bat&quot;;<br /><br />OBS: When saving files from Notepad, make sure to select (*.*) in the type field, otherwise it may end up putting &quot;.txt&quot; after the file names, and then it won't work.<br /><br />This should open a command prompt window, but you don't have to type anything in it, because it will automatically execyte the command that are written inside the .bat file. The &quot;pause&quot; command is there to prevent the window from closing before you can see any messages the assembler outputs.<br /><br />Anyway, after this you will get a valid NES file, but it won't do anything because there's no code to do anything, since the template was blank. You will need to write 6502 code to initialize the system and display something (tip: this code will go right after the &quot;Reset&quot; label, which is where the program begins - don't bother with NMI and IRQ for now). At least you have a place to start now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>caramelpuffpuff</b> [ Wed May 08, 2013 6:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">OK, here are the steps for creating a valid NES ROM with ASM6:<br /><br />1. Go to <a href="http://forums.nesdev.com/viewtopic.php?p=58138#p58138" class="postlink">this post</a> and copy the NROM template;<br />2. Open Notepad and paste the code you copied;<br />3. In the last line, change &quot;tiles.chr&quot; to the name of your CHR file;<br />4. Save the file as &quot;game.asm&quot; to the same folder where ASM6 and the CHR file are;<br />5. Open another Notepad window ans write the following in it:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">asm6 game.asm game.nes<br />pause</div><br />6. Save this as &quot;compile.bat&quot;, in the same folder as the other files;<br />7. double click &quot;compile.bat&quot;;<br /><br />OBS: When saving files from Notepad, make sure to select (*.*) in the type field, otherwise it may end up putting &quot;.txt&quot; after the file names, and then it won't work.<br /><br />This should open a command prompt window, but you don't have to type anything in it, because it will automatically execyte the command that are written inside the .bat file. The &quot;pause&quot; command is there to prevent the window from closing before you can see any messages the assembler outputs.<br /><br />Anyway, after this you will get a valid NES file, but it won't do anything because there's no code to do anything, since the template was blank. You will need to write 6502 code to initialize the system and display something (tip: this code will go right after the &quot;Reset&quot; label, which is where the program begins - don't bother with NMI and IRQ for now). At least you have a place to start now.</div><br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=601&amp;mode=view"><img src="./download/file.php?id=601&amp;t=1" alt="aww.PNG" /></a><br />
			<span class="gensmall">aww.PNG [ 48.06 KiB | Viewed 506 times ]</span>
		

		<br />
	</div><br /><br />Do I have to replace &quot;game.asm&quot; with the file?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Wed May 08, 2013 6:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">caramelpuffpuff wrote:</div><div class="quotecontent">Do I have to replace &quot;game.asm&quot; with the file?</div> Precisely. You should either rename &quot;gametest.asm&quot; to &quot;game.asm&quot;, or edit compile.bat to use &quot;gametest&quot; instead of &quot;game&quot;

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>caramelpuffpuff</b> [ Wed May 08, 2013 6:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><div class="quotetitle">caramelpuffpuff wrote:</div><div class="quotecontent">Do I have to replace &quot;game.asm&quot; with the file?</div> Precisely. You should either rename &quot;gametest.asm&quot; to &quot;game.asm&quot;, or edit compile.bat to use &quot;gametest&quot; instead of &quot;game&quot;</div><br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="gensmall"><b>File comment:</b> ...Muffins?!</span><br />
		
			<a href="./download/file.php?id=602&amp;mode=view"><img src="./download/file.php?id=602&amp;t=1" alt="WHAT THE....PNG" /></a><br />
			<span class="gensmall">WHAT THE....PNG [ 13.9 KiB | Viewed 499 times ]</span>
		

		<br />
	</div><br /><br />O3O...!?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>caramelpuffpuff</b> [ Wed May 08, 2013 6:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />...&quot;Anyway, after this you will get a valid NES file, but it won't do anything because there's no code to do anything, since the template was blank. You will need to write 6502 code to initialize the system and display something (tip: this code will go right after the &quot;Reset&quot; label, which is where the program begins - don't bother with NMI and IRQ for now). At least you have a place to start now.&quot;<br /><br />... <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> Uhh...So this is where I start now...

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=603&amp;mode=view"><img src="./download/file.php?id=603&amp;t=1" alt="uhhh..PNG" /></a><br />
			<span class="gensmall">uhhh..PNG [ 52.95 KiB | Viewed 498 times ]</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Wed May 08, 2013 7:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yep, that's what it shows when you don't do anything to the system. You have to wait for the PPU to be ready, set it up, display graphics, and then make a game. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed May 08, 2013 8:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />But at least you have some structure to work on now (a valid NES ROM with a 16 byte header, 16KB PRG-ROM and 8KB CHR-ROM = 24592 bytes), which you couldn't figure out before. Your tiles are there, ready to be used by the program. You should now look into how to <a href="http://wiki.nesdev.com/w/index.php/Init_code" class="postlink">initialize the system</a> (tip: don't just copy and paste it - it might not even work because of assembler differences! - try to understand what's going on), setting palettes and showing some tiles.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>caramelpuffpuff</b> [ Thu May 09, 2013 1:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">But at least you have some structure to work on now (a valid NES ROM with a 16 byte header, 16KB PRG-ROM and 8KB CHR-ROM = 24592 bytes), which you couldn't figure out before. Your tiles are there, ready to be used by the program. You should now look into how to <a href="http://wiki.nesdev.com/w/index.php/Init_code" class="postlink">initialize the system</a> (tip: don't just copy and paste it - it might not even work because of assembler differences! - try to understand what's going on), setting palettes and showing some tiles.</div><br /><br />...... <img src="./images/smilies/icon_question.gif" alt=":?:" title="Question" /> Uhhh....can you write the steps like you did on the ASM?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu May 09, 2013 1:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">caramelpuffpuff wrote:</div><div class="quotecontent">...... <img src="./images/smilies/icon_question.gif" alt=":?:" title="Question" /> Uhhh....can you write the steps like you did on the ASM?</div><br />Not without doing all the work for you... you won't learn anything this way.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>caramelpuffpuff</b> [ Thu May 09, 2013 2:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">caramelpuffpuff wrote:</div><div class="quotecontent">...... <img src="./images/smilies/icon_question.gif" alt=":?:" title="Question" /> Uhhh....can you write the steps like you did on the ASM?</div><br />Not without doing all the work for you... you won't learn anything this way.</div><br /><br />true...what is @vblankwait1 and 2? Do I put this in a notepad and convert it into ASM.? or bat.?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu May 09, 2013 2:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: .ASM into .NES assistance</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />In asm6 and ca65, a label whose name starts with with @ is a &quot;cheap local label&quot; that can't be seen across regular labels. This allows reuse of label names such as &quot;loop&quot; in different parts of a single program.<br /><br /><div class="quotetitle">In the asm6 manual, loopy wrote:</div><div class="quotecontent">Labels are case sensitive.  The special '$' label holds the current program address.  Labels beginning with '@' are local labels. They have limited scope, visible only between non-local labels.  Names of local labels may be reused.</div><br />Likewise, the <a href="http://www.cc65.org/doc/ca65-6.html#ss6.4" class="postlink">ca65 manual has a section on cheap local labels</a>.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">label1:<br />&nbsp; ; stuff<br />@loop:<br />&nbsp; ; stuff<br />&nbsp; dey<br />&nbsp; bne loop&nbsp; ; goes to the @loop below label1; can't see @loop below label2<br />label2:<br />&nbsp; ; ...<br />@loop:<br />&nbsp; ; stuff<br />&nbsp; dey<br />&nbsp; bne loop&nbsp; ; goes to the @loop below label2; can't see @loop below label1<br /></div><br /><br />Yes, you do put the init code in Notepad.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>7</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
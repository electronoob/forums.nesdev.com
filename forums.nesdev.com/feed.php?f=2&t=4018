<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=4018" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2008-04-06T15:18:11-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=4018</id>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2008-04-06T15:18:11-07:00</updated>
<published>2008-04-06T15:18:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32350#p32350</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32350#p32350"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32350#p32350"><![CDATA[
I don't know, looks vague. We have "emulators emulating empirical things", and so on. What about the BIOS? Is required for such thing?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Sun Apr 06, 2008 3:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[MottZilla]]></name></author>
<updated>2008-04-06T11:33:51-07:00</updated>
<published>2008-04-06T11:33:51-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32347#p32347</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32347#p32347"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32347#p32347"><![CDATA[
Until I started working on my emulator I always assumed it had its own file system and the games just somehow loaded files when they wanted. After seeing how (most) games behave, I think it makes sense and is simple enough to use. Now if only it weren't so terribly slow. <br /><br />Bankswitching is when you "switch" a bank with another bank. But with FDS, you only have one "bank". So instead you load new data into your bank. Now it would have been cool if FDS had more PRG-RAM and/or more CHR-RAM to actually have bankswitching capabilities. If they had made provisions to upgrade RAM or something like that it would probably have helped it stay alive with falling costs of bigger ROM chips. That and a newer faster disk drive.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1726">MottZilla</a> — Sun Apr 06, 2008 11:33 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[NotTheCommonDose]]></name></author>
<updated>2008-04-05T16:59:12-07:00</updated>
<published>2008-04-05T16:59:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32314#p32314</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32314#p32314"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32314#p32314"><![CDATA[
I only thought it was one file. Wow.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=748">NotTheCommonDose</a> — Sat Apr 05, 2008 4:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-04-05T04:59:37-07:00</updated>
<published>2008-04-05T04:59:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32269#p32269</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32269#p32269"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32269#p32269"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br />It should also be noted that loading files takes a significantly long time (as opposed to bankswapping which occurs virtually instantly).  Loading a single file can take several seconds... which is why whenever an FDS game wants to load a new file, you're stuck with that "Now Loading" screen.<br /></div><br />Experience with this is why Nintendo stayed with cartridges for a generation longer than everyone else did.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Apr 05, 2008 4:59 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2008-04-04T12:59:56-07:00</updated>
<published>2008-04-04T12:59:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32247#p32247</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32247#p32247"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32247#p32247"><![CDATA[
<div class="quotetitle">Hamtaro126 wrote:</div><div class="quotecontent"><br />If you ever looked at DDP in a hex editor: What puts the PRG and CHR stuff in the PRG-RAM and/or CHR-RAM?<br /></div><br /><br />The game tells the BIOS which files it wants loaded and when by JSRing to a specific routine, and the BIOS copies those files to PRG/CHR when told to do so.  I'm unsure exactly which routine(s) in the BIOS perform this task, as I haven't looked into it in all that much detail.<br /><br />BT's doc (the one you mentioned before) has a partially commented disassembly of the BIOS.  Maybe skim it for things that look like / are described as file loading routines.<br /><br /><br />It should also be noted that loading files takes a significantly long time (as opposed to bankswapping which occurs virtually instantly).  Loading a single file can take several seconds... which is why whenever an FDS game wants to load a new file, you're stuck with that "Now Loading" screen.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Fri Apr 04, 2008 12:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Hamtaro126]]></name></author>
<updated>2008-04-04T11:18:27-07:00</updated>
<published>2008-04-04T11:18:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32245#p32245</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32245#p32245"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32245#p32245"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br />Everything you need to know is included in the .fds file.  The registers used and whatnot aren't as important.<br /><br />FDS images are a collection of "files".  Each file has a header which tells where it gets loaded to and how big it is.<br /><br />For Side A, files start at offset 0x0004A, and for Side B they start at offset 0x10026.<br /><br />Files are layed out like so:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">--------------------<br />03 &lt;-- value to identify section as file header<br />xx &lt;-- file number &#40;largely unimportant&#41;<br />xx &lt;-- I forget, but again, unimportant<br />8-character ASCII string &lt;-- name of file<br />xx xx  &lt;--  2 byte address that file gets placed<br />xx xx  &lt;--  2 byte size of file<br />xx &lt;-- value to indicate whether file is PRG/CHR/NT data &#40;unimportant, since that can be inferred from the target address&#41;<br />04 &lt;-- value to identify start of file data<br />...  &lt;--  file data<br />-------------------<br /></div><br /><br />If you have DDP handy... you can look at its Side A for an example.  It has these files:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">0-00.bin:  dst: 2800   siz: 00E0   name: KYODAKU-<br />0-01.bin:  dst: 6000   siz: 0600   name: EN-SND-D<br />0-02.bin:  dst: 6000   siz: 8000   name: MAIN-PRO<br />0-03.bin:  dst: B800   siz: 1900   name: ENDING-2<br />0-04.bin:  dst: 0000   siz: 1FF0   name: TITLE-C<br />0-05.bin:  dst: 0E00   siz: 0C00   name: ENDING-C<br />0-06.bin:  dst: 6600   siz: 0006   name: SAVE-DAT<br /></div><br /><br /><br />I just happened to have this info handy since I'm currently working on something DDP related  ^^<br /></div><br /><br />What about loading and putting specific disk binaries with the certain places described above in RAM. I looked in the RAM viewer and it puts certain PRG from the loaded disk in the places to the PRG-RAM in the above destination.<br /><br />Looks like bankswitching to me. But as you said: It has no bankswitching<br /><br />If you ever looked at DDP in a hex editor: What puts the PRG and CHR stuff in the PRG-RAM and/or CHR-RAM?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=287">Hamtaro126</a> — Fri Apr 04, 2008 11:18 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2008-04-04T06:57:08-07:00</updated>
<published>2008-04-04T06:57:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32240#p32240</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32240#p32240"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32240#p32240"><![CDATA[
Everything you need to know is included in the .fds file.  The registers used and whatnot aren't as important.<br /><br />FDS images are a collection of "files".  Each file has a header which tells where it gets loaded to and how big it is.<br /><br />For Side A, files start at offset 0x0004A, and for Side B they start at offset 0x10026.<br /><br />Files are layed out like so:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">--------------------<br />03 &lt;-- value to identify section as file header<br />xx &lt;-- file number &#40;largely unimportant&#41;<br />xx &lt;-- I forget, but again, unimportant<br />8-character ASCII string &lt;-- name of file<br />xx xx  &lt;--  2 byte address that file gets placed<br />xx xx  &lt;--  2 byte size of file<br />xx &lt;-- value to indicate whether file is PRG/CHR/NT data &#40;unimportant, since that can be inferred from the target address&#41;<br />04 &lt;-- value to identify start of file data<br />...  &lt;--  file data<br />-------------------<br /></div><br /><br />If you have DDP handy... you can look at its Side A for an example.  It has these files:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">0-00.bin:  dst: 2800   siz: 00E0   name: KYODAKU-<br />0-01.bin:  dst: 6000   siz: 0600   name: EN-SND-D<br />0-02.bin:  dst: 6000   siz: 8000   name: MAIN-PRO<br />0-03.bin:  dst: B800   siz: 1900   name: ENDING-2<br />0-04.bin:  dst: 0000   siz: 1FF0   name: TITLE-C<br />0-05.bin:  dst: 0E00   siz: 0C00   name: ENDING-C<br />0-06.bin:  dst: 6600   siz: 0006   name: SAVE-DAT<br /></div><br /><br /><br />I just happened to have this info handy since I'm currently working on something DDP related  ^^<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Fri Apr 04, 2008 6:57 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Hamtaro126]]></name></author>
<updated>2008-04-03T19:53:32-07:00</updated>
<published>2008-04-03T19:53:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32233#p32233</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32233#p32233"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32233#p32233"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />FDS doesn't use bankswitching. Instead, it copies data from the disk to the PRG RAM ($6000-$DFFF) and CHR RAM ($0000-$1FFF).<br /></div><br /><br />How does Doki Doki Panic or any other game do the copying then?<br /><br />EDIT: Found a resource for the registers used for copying/writing and reading. I found it in the main page. (It is by Brad Taylor)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=287">Hamtaro126</a> — Thu Apr 03, 2008 7:53 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-04-03T19:49:20-07:00</updated>
<published>2008-04-03T19:49:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32232#p32232</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32232#p32232"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32232#p32232"><![CDATA[
FDS doesn't use bankswitching. Instead, it copies data from the disk to the PRG RAM ($6000-$DFFF) and CHR RAM ($0000-$1FFF).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Thu Apr 03, 2008 7:49 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Hamtaro126]]></name></author>
<updated>2008-04-03T19:43:56-07:00</updated>
<published>2008-04-03T19:43:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32231#p32231</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32231#p32231"/>
<title type="html"><![CDATA[Any Documents on FDS bankswitching?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4018&amp;p=32231#p32231"><![CDATA[
There are almost no docs on FDS bankswitching stuff, How is it done?<br /><br />-Hamtaro126<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=287">Hamtaro126</a> — Thu Apr 03, 2008 7:43 pm</p><hr />
]]></content>
</entry>
</feed>
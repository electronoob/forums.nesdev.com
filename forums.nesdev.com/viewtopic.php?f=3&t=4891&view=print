<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Super Mario Brother Infinite Loop at: LDA $2000, BPL ....</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Super Mario Brother Infinite Loop at: LDA $2000, BPL ....</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=4891">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=4891</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dreampeppers99</b> [ Tue Feb 24, 2009 4:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Super Mario Brother Infinite Loop at: LDA $2000, BPL ....</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi I'm trying to write a nes emulator. ( big news  <img src="./images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" />  )
<br />Well I'm using the Super Mario Brother to make tests with my emulator.
<br />
<br />1ยบ I already load the rom (mappers don't has support yet);
<br /><a href="http://www.uploadimagens.com/" class="postlink"><img src="http://www.uploadimagens.com/upload/19cdded0a1a4db705846af1d7d68c904.jpg" alt="Image" /></a>
<br />2ยบ The pattern table seems to be right;
<br /><a href="http://www.uploadimagens.com/" class="postlink"><img src="http://www.uploadimagens.com/upload/37ad14bb8ce04d241e7ac90b3b2a8b85.jpg" alt="Image" /></a>
<br />3ยบ My debugger shows when it cames to infite loop;
<br /><a href="http://www.uploadimagens.com/" class="postlink"><img src="http://www.uploadimagens.com/upload/e011aeb1033bab4ef2bcadd07f0fbe46.jpg" alt="Image" /></a>
<br />3ยบ The ppu state has affected by this;
<br /><a href="http://www.uploadimagens.com/" class="postlink"><img src="http://www.uploadimagens.com/upload/90f45f94370cbd4371e1af14c080c1f2.jpg" alt="Image" /></a>
<br />
<br /><a href="http://www.uploadimagens.com/" class="postlink"><img src="http://www.uploadimagens.com/upload/20e8298c0a2a74d1eff476be98c034b8.jpg" alt="Image" /></a>
<br />
<br />
<br />Anytime of PPu execution it change the flag Sign?
<br />What's wrong...?[/img]
<br />
<br />If I try to execute ppu (on real hardware I guess cpu and ppu runs togheter at same time) I will not have the data to plot something on screen then the classic:
<br />1. Name table byte
<br />2. Attribute table byte
<br />3. Pattern table bitmap #0
<br />4. Pattern table bitmap #1
<br />Will not print nothing...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>polaco</b> [ Tue Feb 24, 2009 5:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The game is waiting for the PPU to enter in VBLANK state.
<br />your code emulate this correctly?
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;if&#40;scanline==240&#41;<br />&nbsp; &nbsp;&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;// start vblank simulation<br />&nbsp; &nbsp;&nbsp; &nbsp;VBLANK_REG&#40;1&#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;SPRITE0_REG&#40;0&#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;// check non-emulated events<br />&nbsp; &nbsp;&nbsp; &nbsp;sdl_poll_events&#40;&#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;queue_check_cmd&#40;&#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;// generate interrupts on vblank, if enabled<br />&nbsp; &nbsp;&nbsp; &nbsp;if&#40;VBLANK_ON_NMI&#41; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;cpu_interrupt&#40;INT_NMI&#41;;<br />&nbsp; &nbsp;&#125;<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dreampeppers99</b> [ Wed Feb 25, 2009 3:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks polaco I'll try to "simulate" in this way!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dreampeppers99</b> [ Wed Feb 25, 2009 4:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I guess the game wait that the value of $2000 update the sign/negative flag; but when I made a check (I mean write 1 to vblank at $2000) the number is 128, I have to check this number as unsigned byte ?
<br />
<br />Always I have to change a flag must I to check the number as unsigned?
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; cpu.setupFlagSign&#40;cpu.accumulator&#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; cpu.setupFlagZero&#40;cpu.accumulator&#41;;<br /><br /><br />&nbsp; &nbsp; public void setupFlagSign&#40;short value&#41; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; flagSign = &#40;byte&#41; &#40;&#40;&#40;byte&#41;value &lt; 0&#41; ? 1 : 0&#41;;<br />&nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; public void setupFlagZero&#40;short value&#41; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; flagZero = &#40;byte&#41; &#40;&#40;&#40;byte&#41;value == 0&#41; ? 1 : 0&#41;;<br />&nbsp; &nbsp; &#125;</div><div class="codetitle"><b>Code:</b></div><div class="codecontent"></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>polaco</b> [ Wed Feb 25, 2009 4:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />BPL means branch on result plus (not negative), it will test the accumulator and set the N flag according.
<br />
<br />looking at the code, I see that is reads PPU status from $2002, and not from $2000.
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">8002: LDA #$10&nbsp; &nbsp; ; read immediate value to set PPU control registers<br />8004: STA $2000&nbsp; &nbsp;; store value<br />8007: LDX #$FF&nbsp; &nbsp; ; load immediate value into X register<br />8009: TXS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; store X register into stack<br />800a: LDA $2002&nbsp; &nbsp;; read PPU flags into accumulator &#40;set N flag based on bit 7&#41;<br />800d: BPL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; test N flag, branch to 800a if not positive, &#40;N is set&#41;<br /></div><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">PPUSTATUS &#40;$2002&#41; <br />PPU status &#40;read&#41; <br /><br />76543210<br />||||||||<br />|||+++++- Unimplemented<br />||+------ Sprite overflow. The PPU can handle only eight sprites on one<br />||&nbsp; &nbsp; &nbsp; &nbsp; scanline and sets this bit if it starts dropping sprites.<br />||&nbsp; &nbsp; &nbsp; &nbsp; Normally, this triggers when there are 9 sprites on a scanline,<br />||&nbsp; &nbsp; &nbsp; &nbsp; but the actual behavior is significantly more complicated.<br />|+------- Sprite 0 Hit.&nbsp; Set when a nonzero pixel of sprite 0 'hits'<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a nonzero background pixel.&nbsp; Used for raster timing.<br />+-------- Vertical blank has started &#40;0: not in VBLANK; 1: in VBLANK&#41;<br /></div><br /><br />This is the PPU status registers, and the last bit is the VBLANK state. I think you have confused it with the ppu control ($2000)<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&#91;edit&#93; PPUCTRL &#40;$2000&#41; <br />Various flags controlling PPU operation &#40;write&#41; <br /><br />76543210<br />||||||||<br />||||||++- Base nametable address<br />||||||&nbsp; &nbsp; &#40;0 = $2000; 1 = $2400; 2 = $2800; 3 = $2C00&#41;<br />|||||+--- VRAM address increment per CPU read/write of PPUDATA<br />|||||&nbsp; &nbsp; &nbsp;&#40;0: increment by 1, going across; 1: increment by 32, going down&#41;<br />||||+---- Sprite pattern table address for 8x8 sprites &#40;0: $0000; 1: $1000&#41;<br />|||+----- Background pattern table address &#40;0: $0000; 1: $1000&#41;<br />||+------ Sprite size &#40;0: 8x8; 1: 8x16&#41;<br />|+------- PPU master/slave select &#40;has no effect on the NES&#41;<br />+-------- Generate an NMI at the start of the<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vertical blanking interval &#40;0: off; 1: on&#41;<br /></div>
<br />
<br />When bit 7 of control register is set, it instructs PPU to generate a NMI on VBLANK.
<br />
<br />Also, take care when dealing with signed values, as it will fail the test if you try to put a negative value into an unsigned variable.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dreampeppers99</b> [ Wed Feb 25, 2009 1:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">polaco wrote:</div><div class="quotecontent">BPL means branch on result plus (not negative), it will test the accumulator and set the N flag according.<br />looking at the code, I see that is reads PPU status from $2002, and not from $2000.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">8002: LDA #$10&nbsp; &nbsp; ; read immediate value to set PPU control registers<br />8004: STA $2000&nbsp; &nbsp;; store value<br />8007: LDX #$FF&nbsp; &nbsp; ; load immediate value into X register<br />8009: TXS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; store X register into stack<br />800a: LDA $2002&nbsp; &nbsp;; read PPU flags into accumulator &#40;set N flag based on bit 7&#41;<br />800d: BPL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; test N flag, branch to 800a if not positive, &#40;N is set&#41;<br /></div><br /></div><br />BPL change the flag N ?<br />In this case if N == 0 jump to 800A... then it waits for flag N to be marked, when I'm in Vblank I should mark the VBLANK started on $2002?<br /><br />If I set it the value will be 10000000 (128) and this result on LDA set the N flag to 0 or 1? ( 0 if we suposse that the number is unsigned or 1 if we suposse that the numer is signed)<br /><br /><div class="quotetitle">polaco wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">PPUSTATUS &#40;$2002&#41; <br />PPU status &#40;read&#41; <br /><br />76543210<br />||||||||<br />|||+++++- Unimplemented<br />||+------ Sprite overflow. The PPU can handle only eight sprites on one<br />||&nbsp; &nbsp; &nbsp; &nbsp; scanline and sets this bit if it starts dropping sprites.<br />||&nbsp; &nbsp; &nbsp; &nbsp; Normally, this triggers when there are 9 sprites on a scanline,<br />||&nbsp; &nbsp; &nbsp; &nbsp; but the actual behavior is significantly more complicated.<br />|+------- Sprite 0 Hit.&nbsp; Set when a nonzero pixel of sprite 0 'hits'<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a nonzero background pixel.&nbsp; Used for raster timing.<br />+-------- Vertical blank has started &#40;0: not in VBLANK; 1: in VBLANK&#41;<br /></div><br /><br />This is the PPU status registers, and the last bit is the VBLANK state. I think you have confused it with the ppu control ($2000)<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&#91;edit&#93; PPUCTRL &#40;$2000&#41; <br />Various flags controlling PPU operation &#40;write&#41; <br /><br />76543210<br />||||||||<br />||||||++- Base nametable address<br />||||||&nbsp; &nbsp; &#40;0 = $2000; 1 = $2400; 2 = $2800; 3 = $2C00&#41;<br />|||||+--- VRAM address increment per CPU read/write of PPUDATA<br />|||||&nbsp; &nbsp; &nbsp;&#40;0: increment by 1, going across; 1: increment by 32, going down&#41;<br />||||+---- Sprite pattern table address for 8x8 sprites &#40;0: $0000; 1: $1000&#41;<br />|||+----- Background pattern table address &#40;0: $0000; 1: $1000&#41;<br />||+------ Sprite size &#40;0: 8x8; 1: 8x16&#41;<br />|+------- PPU master/slave select &#40;has no effect on the NES&#41;<br />+-------- Generate an NMI at the start of the<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vertical blanking interval &#40;0: off; 1: on&#41;<br /></div><br /><br />When bit 7 of control register is set, it instructs PPU to generate a NMI on VBLANK.<br />Also, take care when dealing with signed values, as it will fail the test if you try to put a negative value into an unsigned variable.</div>
<br />Thanks so much...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dreampeppers99</b> [ Wed Feb 25, 2009 1:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="codetitle"><b>Code:</b></div><div class="codecontent">800a: LDA $2002&nbsp; &nbsp;; read PPU flags into accumulator &#40;set N flag based on bit 7&#41;<br />800d: BPL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; test N flag, branch to 800a if not positive, &#40;N is set&#41; </div>
<br />The case is when the N flag is setted on VBlank?
<br />When I came to VBlank period I set the 7th bit of $2002 to 1 this mades the value become 10000000 (128) if we see is as unsigned then it can't change the N flag...
<br />
<br />However I guess this (128) is a negative number for the flag reasons... am I rigth?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>polaco</b> [ Wed Feb 25, 2009 2:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">dreampeppers99 wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">800a: LDA $2002&nbsp; &nbsp;; read PPU flags into accumulator &#40;set N flag based on bit 7&#41;<br />800d: BPL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; test N flag, branch to 800a if not positive, &#40;N is set&#41; </div><br />The case is when the N flag is setted on VBlank?<br />When I came to VBlank period I set the 7th bit of $2002 to 1 this mades the value become 10000000 (128) if we see is as unsigned then it can't change the N flag...<br /><br />However I guess this is a negative number for (128) the flag reasons... am I rigth?</div><br /><br />Sorry, there is a typo in my post! BPL does no set the N flag, it tests it. Correcting my post:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">800a: LDA $2002&nbsp; &nbsp;; read PPU flags into accumulator &#40;set N flag based on bit 7&#41;<br />800d: BPL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; test N flag, branch to 800a if not positive, &#40;if N is not set, jump&#41; </div>
<br />
<br />a signed char in 8bit goes from -128 to 128, and the unsigned goes from 0 to 255. Warping occurs if you increment the value.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Wed Feb 25, 2009 2:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's worth nothing that for all practical purposes in your emulator, you can treat <em>everything</em> as unsigned.  The only thing that must be signed is the relative address for branching.
<br />
<br />The 'N' flag just means 'high bit set'.  Therefore values $80-$FF will set N, and values $00-7F will clear N.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Feb 25, 2009 5:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">polaco wrote:</div><div class="quotecontent">a signed char in 8bit goes from -128 to 128</div>
<br />The range is actually -128 to 127. Just thought I'd point that out.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Wed Feb 25, 2009 5:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">polaco wrote:</div><div class="quotecontent">a signed char in 8bit goes from -128 to 128</div><br />The range is actually -128 to 127. Just thought I'd point that out.</div>
<br />
<br />He wasn't the only one to slip... ^_^;;

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>polaco</b> [ Wed Feb 25, 2009 7:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Fx3 wrote:</div><div class="quotecontent"><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">polaco wrote:</div><div class="quotecontent">a signed char in 8bit goes from -128 to 128</div><br />The range is actually -128 to 127. Just thought I'd point that out.</div><br /><br />He wasn't the only one to slip... ^_^;;</div>
<br />
<br />Wooops, thanks for pointing that!  <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Wed Feb 25, 2009 8:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">polaco wrote:</div><div class="quotecontent">Sorry, there is a typo in my post! BPL does no set the N flag, it tests it. Correcting my post:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">800a: LDA $2002&nbsp; &nbsp;; read PPU flags into accumulator &#40;set N flag based on bit 7&#41;<br />800d: BPL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; test N flag, branch to 800a if not positive, &#40;if N is not set, jump&#41; </div></div><br />This should read "branch to 800a if positive", or "branch to 800a if not negative" (the former is less confusing; prefer fewer negations).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">a signed char in 8bit goes from -128 to 128, and the unsigned goes from 0 to 255. Warping occurs if you increment the value.</div>
<br /><a href="http://en.wikipedia.org/wiki/Off-by-one_error#Fencepost_error" class="postlink">Fencepost errors are common</a>; always be on the watch for them. In this case, the range -128 to +128 indeed has 256 <em>intervals</em>, but this requires 257 boundary points, since a single interval requres two. Or perhaps you simply added the 128 negative and 128 non-zero positive values and came up with 256, forgetting zero in the middle. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dreampeppers99</b> [ Thu Feb 26, 2009 4:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Disch wrote:</div><div class="quotecontent">The 'N' flag just means 'high bit set'.  Therefore values $80-$FF will set N, and values $00-7F will clear N.</div>
<br />Thanks ! I'll think in this way!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dreampeppers99</b> [ Thu Feb 26, 2009 4:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">polaco wrote:</div><div class="quotecontent">a signed char in 8bit goes from -128 to 128</div><br />The range is actually -128 to 127. Just thought I'd point that out.</div>
<br /> <img src="./images/smilies/icon_surprised.gif" alt=":o" title="Surprised" />

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
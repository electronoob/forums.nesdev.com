<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Zap Ruder: The Zapper test ROM project</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Zap Ruder: The Zapper test ROM project</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=22&amp;t=8108">http://forums.nesdev.com/viewtopic.php?f=22&amp;t=8108</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sun Oct 02, 2011 6:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The addition of the tennis game doubled the project's compressed size, but it's smooth. Wii smooth.<br /><br /><a href="http://pineight.com/nes/ruder-0.02.zip" class="postlink">Download Zap Ruder 0.02</a></div>
<br />Pretty cool. Too bad I have no way of testing it with the actual hardware (no zapper, no CRT).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Oct 03, 2011 12:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />ZapPing can fallback to using a controller.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>AWal</b> [ Fri Oct 07, 2011 4:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi, Just though I'd chime in here, while browsing another thread it was mentioned that there was a lack of feedback.
<br />
<br />I have had an opportunity to test Zap Ruder on my consoles, not only with a CRT TV, but also with a pair of first-party Zappers (one grey one orange <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> ).
<br />
<br />It was very surprising that the Zappers are apparently capable of accurate light detection at the horizontal raster level (I actually did not know this until I threw it into Nestopia). A quick test of the paddle game, and I knew for certain that I had to try this on the real thing.
<br />
<br />The primary detection on the X axis, even at my TVs default settings (which are very <em>very</em> dark, so that the glow of the phosphors doesn't saturate the light...that bugs me) was able to accurately pin point the horizontal scanline without any issue. As you stated earlier the Y axis tends to be 'noisy' And I did note that...although my grey Zapper showed less noise when pointed at the screen. This might be a chip revision sort of thing...I'll have to crack them both open and nab the numbers when I have some time (and more importantly, room on the desk to do so <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />  ).
<br />
<br />When I had my dev cart running, and the tests showed acceptable results, I decided to give ZapPing a go. I plugged both controllers in and tossed the grey one to a roommate that was sitting by the set at the time. The background required me to change the brighness of the set at first (probably also why nintendo decided to use a white color), but then we ended up playing that game for about an hour. The underlying concept that a device that is normally associated with pulling the trigger and hitting a flash onscreen actually being used 'alternatively' to control a paddle was definitely an interesting concept.
<br />
<br />I do have to say, the fluidity of the 'controller' was definitely "Wii Smooth."
<br />
<br />The only real gripes I have with the software thus far is that the test menus are particularly tricky to navigate with the Zapper; Perhaps allowing a controller to select the menu could suffice here (or possibly smaller or more seperated targets for better control). Additionally, the only other thing I noticed was that ZapPing had no real way of letting you know that you weren't targeting the set. In WarioWare Smooth Moves the microgames that required targeting using the Sensor Bar usually would have the target object flash if they could not get a stable reading (The elephant's trunk, Mario with FLUDD, etc.). Perhaps if the Zapper cannot 'read' the screen, the paddle could flash. I say this simply because you do not necessarily need to look down the sight to aim the paddle, especially in this day and age with people used to just flicking Wii Remotes around.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Oct 07, 2011 5:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for the feedback.
<br />
<br />As for the brightness: Finding what brightnesses and hues work and don't work is one of the things the "Y COORD 1 GUN" screen is for. Try changing the hue and brightness by pressing Up, Down, Left, and Right on the Control Pad of the controller in port 1.
<br />
<br /><div class="quotetitle">AWal wrote:</div><div class="quotecontent">The only real gripes I have with the software thus far is that the test menus are particularly tricky to navigate with the Zapper; Perhaps allowing a controller to select the menu could suffice here</div><br />Did you try navigating the menu with a controller in port 1? It works with my authentic NES controller, and it works with a Super NES asciiPad through a Super NES to NES adapter that another member made me.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Perhaps if the Zapper cannot 'read' the screen, the paddle could flash.</div>
<br />Good suggestion. That might help my grandma, who always drifts gradually to the right and ends up pointing offscreen (POINT PODGE) when she plays.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>AWal</b> [ Fri Oct 07, 2011 6:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">As for the brightness: Finding what brightnesses and hues work and don't work is one of the things the "Y COORD 1 GUN" screen is for. Try changing the hue and brightness by pressing Up, Down, Left, and Right on the Control Pad of the controller in port 1.<br /><br />Did you try navigating the menu with a controller in port 1? It works with my authentic NES controller, and it works with a Super NES asciiPad through a Super NES to NES adapter that another member made me.</div>
<br />Didn't think to plug an actual controller in...Much easier to work the menus with that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jpx72</b> [ Tue Oct 25, 2011 11:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Wow this app is awesome! I just tried that and it felt like a freaking 8-bit wii controller! Didn't knew that the lightgun is able to scan movement like that! Nice!
<br />(testing on original Famicom with pirate lightgun connected via ext port)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon May 14, 2012 3:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Who remembers my old <a href="http://pineight.com/ds/#axe" class="postlink">Axe music toy demo</a> for DS homebrew? It's back as part of <a href="http://pineight.com/nes/ruder-0.03.zip" class="postlink">Zap Ruder 0.03</a>.
<br />
<br />The big thing I'm missing at the moment is how to make the CPU opponent play fair. Right now it plays nearly perfectly despite using a controller.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Mon May 14, 2012 5:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Cool stuff!
<br />
<br />I like the music demo, seems easy to make a catchy tune.  
<br />
<br />Yeah podge is a beast with the paddle...  I couldn't get one score on him.  How are you trying to keep him from perfect?  Seems like once the ball is hit back and forth so many times or the ball is faster he should be more prone to failure.  Or maybe even more prone to fail if his score is higher than yours.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bananmos</b> [ Fri May 18, 2012 1:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh crap, this test ROM will make it all too easy for people to find the easter egg in <a href="http://www.pouet.net/prod.php?which=11918" class="postlink">Years Behind</a> using emulators <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Fri May 18, 2012 1:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bananmos wrote:</div><div class="quotecontent">Oh crap, this test ROM will make it all too easy for people to find the easter egg in <a href="http://www.pouet.net/prod.php?which=11918" class="postlink">Years Behind</a> using emulators <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>
<br />
<br />Konami code?
<br />Didn't notice it until Code-Data logging the rest of the game, then noticing the Data count go up when typing those keystrokes.
<br />
<br />edit: I'll assume the real secret is something else, the stripped ROM is still missing a lot of data <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bananmos</b> [ Fri May 18, 2012 3:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I tried the (x, y) code, which measures the timing of photosensor activation down to a resolution of about six cycles, on an NES. Emulators gave clean timings, but timings from my NES were very noisy, with a range of about six or seven measurement points. Really all I think I can discern is left, center, or right, definitely not enough for firing a missile at a given point on the screen, and probably not even enough to do any meaningful target rejection given that the sprite unit already limits how many targets can be on one scanline.</div>
<br />
<br />How about compensating noise by using some sort of oversampling? If you settle on a maximum number of frames of delay that are acceptable, then in frame N you could compare the noisy X coordinate with the noisy ones from frame N-1, N-2 etc. I'd say up to 5 frames of history (for a minimum update rate of 10Hz assuming PAL systems) would be decent enough to be playable if the goal is to enable determining the position of the target on a bright grid without having to blank the screen.
<br />
<br />If you believe you can reliably determine if it is left, center or right as your post suggested, then that's a good start. From there you could convert the x positions to 3 bits for 8 candidate positions (0-7, 4-11 and 8-15).
<br />
<br />You could then use three different tables for these three base positions. Each table would store a "most likely real X coordinate" for the history of noisy X coordiantes given by this index. With say four frames of history, you'd then need to index a 3+3+3+3 = 12bit table, meaning three of those tables would take 12kB. If that would give reliable results enough to indicate that this idea works, you could probably start optimizing by decreasing the size of your history. (and thereby the table sizes)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri May 18, 2012 5:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, I could take the median of the past five measurements. I'll consider it for 0.04. I'll also have to play with letting the player win a few points once the ball reaches certain speeds.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dafydd</b> [ Mon Mar 04, 2013 4:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Zap Ruder: The Zapper test ROM project</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you ever need anyone to test PAL versions for you, I could be your guy. Y coords work great on my powerpak, X do not. The behavior appears to be very similar in FCEUX when running in PAL mode.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Mar 04, 2013 4:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Zap Ruder: The Zapper test ROM project</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Right now, the best practice if PAL NES is <a href="http://wiki.nesdev.com/w/index.php/Detect_TV_system" class="postlink">detected</a> is to multiply returned Y coordinates by 15/16 (a shift and a subtract). But should I need to make PAL NES zapkernels, I'll keep this offer in mind.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dafydd</b> [ Mon Mar 04, 2013 6:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Zap Ruder: The Zapper test ROM project</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />... what about X coordinates, then?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Mario Adventure ( SMB3 Hack ) on real Hardware !!</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Mario Adventure ( SMB3 Hack ) on real Hardware !!</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=5177">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=5177</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>8</strong> of <strong>10</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Thu Dec 15, 2011 2:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">ocdgamer wrote:</div><div class="quotecontent">It seems like the board that works for this game is TSROM with a battery add on, but my emulator says that the game with the padded ips is a TKROM with battery. Would that work with Shadowgate or Deja Vu then?</div>
<br />
<br />I don't know about those games specifically, but the only difference between TSROM and TKROM is battery backing as far as I'm aware.   So by adding the battery backing to TSROM you've converted it to TKROM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>marvelus10</b> [ Thu Dec 15, 2011 3:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">ocdgamer wrote:</div><div class="quotecontent">It seems like the board that works for this game is TSROM with a battery add on, but my emulator says that the game with the padded ips is a TKROM with battery. Would that work with Shadowgate or Deja Vu then?</div><br /><br />I don't know about those games specifically, but the only difference between TSROM and TKROM is battery backing as far as I'm aware.   So by adding the battery backing to TSROM you've converted it to TKROM.</div>
<br />
<br />
<br />I have tried to make this game on both TK and TS rom boards before the awal ips patch came out. Using a different ram chip I was able to get it to work on TS-ROM no problems, however I could only get it to work on one TK-ROM board the others failed, I have no idea why. These are the boards used :
<br />TS-ROM-03 = Nintendo MMC3A 8850KP      - worked fine
<br />TK-ROM-01 = Nintendo MMC3B 9007KP049 - worked fine
<br />TK-ROM-01 = Nintendo MMC3B S 9002 3 T  - black screen perfect sound no controller reaction
<br />
<br />Now I have not had the opportunity to try this new ips patched version on either when I get the chance I will follow up on this thread.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ocdgamer</b> [ Thu Dec 15, 2011 4:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Great thanks for the info. I'm going to try it with a tkrom now as well. Tecmo NBA Basketball. We'll see I guess.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jpx72</b> [ Mon Jan 02, 2012 1:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">ocdgamer wrote:</div><div class="quotecontent">Does anyone have an active link to the .ips that has the combined fixes a few posts up??</div><br />I've got it here: <a href="http://dl.dropbox.com/u/18341918/Mario%20Adventure%20Real%20Hardware%20Patch.zip" class="postlink">http://dl.dropbox.com/u/18341918/Mario%20Adventure%20Real%20Hardware%20Patch.zip</a></div>
<br />
<br />I have recreated this hack on a TKROM cartridge (battery backed HVC-TKROM-02 with 8kb WRAM and MMC3B) but I'm getting those weird graphical glitches on my Famicom. I patched the PRG1 rom with the provided IPS but I have read in this topic that some extra hardware stuff must be added to make this work. Can somebody tell me what that is? Please?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>l_oliveira</b> [ Mon Jan 02, 2012 3:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jpx72 wrote:</div><div class="quotecontent">I have recreated this hack on a TKROM cartridge (battery backed HVC-TKROM-02 with 8kb WRAM and MMC3B) but I'm getting those weird graphical glitches on my Famicom. I patched the PRG1 rom with the provided IPS but I have read in this topic that some extra hardware stuff must be added to make this work. Can somebody tell me what that is? Please?</div>
<br />
<br />The hack is poorly coded. It does not check if the RAM contents are invalid and load it anyway. 
<br />
<br />Try clearing the backup ram using the command on the rom readme and it will "automagically" start to work properly...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jpx72</b> [ Mon Jan 02, 2012 4:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks a lot! That was automagic!!!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>l_oliveira</b> [ Mon Jan 02, 2012 4:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I also think the problem reported by marvelous10 a few posts ago is related to poorly coded SRAM handling code. -_-;

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Mon Jan 02, 2012 4:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />To make it easier for those who don't have a patch I can whip up an NES-SRAM clearing program that sits in RAM from your powerpak or something if you'd like so you can clear it if you have the non-patched version on a cart. The game doesn't need it cleared more than once, right? It doesn't throw any bad values in there once it's cleared?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nintendo2600</b> [ Sun Jan 15, 2012 8:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><img src="http://img.photobucket.com/albums/v413/long_shawn_silver/rth.jpg" alt="Image" />
<br />
<br />So is this correct for adding the battery or am I incorrect\missing something?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Sun Jan 15, 2012 11:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nintendo2600 wrote:</div><div class="quotecontent"><img src="http://img.photobucket.com/albums/v413/long_shawn_silver/rth.jpg" alt="Image" /><br /><br />So is this correct for adding the battery or am I incorrect\missing something?</div>
<br />
<br />The way you connect your 22uF cap is kind of ambiguous in the picture.  It looks like you're trying to put it in series with the SRAM and diodes, which would be wrong.
<br />
<br />You basically want the SRAM Vcc pin, the 22uF (+) pin, and anode of the two diodes to all be connected in the same point.  The other leg of the cap goes to ground.  
<br />
<br />Basically if you took the cap out of your picture and redrew it between the GND and Vcc on the SRAM you'd be good.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nintendo2600</b> [ Sun Jan 15, 2012 11:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">nintendo2600 wrote:</div><div class="quotecontent">[img]<br /><br />You basically want the SRAM Vcc pin, the 22uF (+) pin, and anode of the two diodes to all be connected in the same point.  The other leg of the cap goes to ground.  <br /><br />Basically if you took the cap out of your picture and redrew it between the GND and Vcc on the SRAM you'd be good.</div></div>
<br />
<br />So like this you mean?
<br />
<br /><img src="http://img.photobucket.com/albums/v413/long_shawn_silver/rth1.jpg" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>flagoss</b> [ Mon Jan 16, 2012 12:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Both diodes are wrong way. They should prevent you from powering the NES with the battery and preventing the battery to receive current from the NES !! On your draft, the diode block the current to go from the battery to the SRAM and also block the current to go from the NES to the sram ! That should be the oposite !

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nintendo2600</b> [ Mon Jan 16, 2012 1:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">flagoss wrote:</div><div class="quotecontent">Both diodes are wrong way. They should prevent you from powering the NES with the battery and preventing the battery to receive current from the NES !! On your draft, the diode block the current to go from the battery to the SRAM and also block the current to go from the NES to the sram ! That should be the oposite !</div>
<br />
<br />OK I'll switch that on the next shematic. I'm gonna do a little more than a quick MSpaint job when I get it final. Thanks for the help! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Mon Jan 16, 2012 1:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nintendo2600 wrote:</div><div class="quotecontent">So like this you mean?<br /></div>
<br />
<br />Yeah and with the diode note <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nintendo2600</b> [ Mon Jan 16, 2012 2:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">nintendo2600 wrote:</div><div class="quotecontent">So like this you mean?<br /></div><br /><br />Yeah and with the diode note <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
<br />
<br />does it matter much if I use a Zenner or Scholky diode? I got a bunch of the later but not so many of the former.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>8</strong> of <strong>10</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - FPGA SPC / SPC Test ROMs?</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - FPGA SPC / SPC Test ROMs?" href="http://forums.nesdev.com/feed.php?f=12&amp;t=8466" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=8466';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sun Sep 21, 2014 1:56 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=8466">FPGA SPC / SPC Test ROMs?</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=8466"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 17 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=8466&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=8466&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=8466&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=8466&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=8466&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p88056"></a>
				<b class="postauthor">kevtris</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88056">FPGA SPC / SPC Test ROMs?</a></div><div style="float: right;"><a href="./viewtopic.php?p=88056#p88056"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 28, 2011 11:06 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=230.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Oct 29, 2005 2:09 am<br /><b>Posts:</b> 412<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Well I finally decided I should do this FPGA SPC for my possible FPGA SNES in the future.  Figured doing the SPC part would be fun, and so far it has been.
<br />
<br />I have fully written the CPU portion in verilog over the course of a day and have spent some time testing the instructions on it, but this is taking quit awhile, since I have to write code then trace its execution and manually verify that things are working how they should.
<br />
<br />I kinda remember there being test ROMs for the SPC that blargg might've written, but my google-fu has been letting me down.  I can't find much out there for testing the SPC, so my question is.. is there an SPC CPU test ROM floating around?
<br />
<br />Ideally something that could load via .spc would be nice but I'd take anything.  I don't mind having to hack around (i.e. an SNES based tester) to get something usable, since it'd save me a couple days of work testing and verifying.</div>

					
						<div class="postbody"><br />_________________<br />/* this is a comment */</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=230"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p88063"></a>
				<b class="postauthor">mic_</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88063"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88063#p88063"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 28, 2011 12:53 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Oct 05, 2006 6:29 am<br /><b>Posts:</b> 839
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Not a test ROM as such, but I have a VGM-&gt;SPC converter which includes the full source for the SPC playback code: <a href="http://jiggawatt.org/badc0de/vgm2spc-2.zip" class="postlink">http://jiggawatt.org/badc0de/vgm2spc-2.zip</a>
<br />It doesn't use every single SPC700 instruction, but maybe it can be helpful for verification in some way anyway.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=1181"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p88074"></a>
				<b class="postauthor">Hias</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88074"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88074#p88074"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 28, 2011 3:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Oct 15, 2011 6:00 am<br /><b>Posts:</b> 27
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Do you know this already?
<br /><!-- m --><a class="postlink" href="http://tcrf.net/SNES_Test_Program">http://tcrf.net/SNES_Test_Program</a><!-- m --></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5047"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p88075"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88075"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88075#p88075"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 28, 2011 4:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 12426<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I imagine that the "test cartridges" like the one Hias mentions were designed to test the common ways that an authentic Super NES could malfunction in the field, not exhaustively test that the hardware is authentic. If the SPC700 is authentic, and it can run the 64-byte bootloader, it's probably working enough to rule out most known SPC-related failure modes.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p88398"></a>
				<b class="postauthor">kevtris</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88398"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88398#p88398"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jan 04, 2012 10:00 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=230.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Oct 29, 2005 2:09 am<br /><b>Posts:</b> 412<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">thanks for the tips so far.  I used that .vgm converter project to debug and that went pretty well.  I have since finished the DSP (well "finished" as in, I got it to play some samples that I stuck in memory and the ADSR seems to be working.
<br />
<br />All the instructions that are used in the .vgm player seem to be working good but I can't get any SPCs working other than it.  I must have more buggy CPU instructions kicking around.
<br />
<br />I got a few tunes from equinox to actually sorta work though.  I think I might have some more DSP bugs but haven't really put a lot of effort into it yet to try and fix them since the CPU's so buggy. <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" />
<br />
<br />I think I will have to make up some kind of test ROM for it since no such ROMs exist that I could find.   Specifically, some kind of instruction test ROM.  I might make a CRC based one kinda like zexall. 
<br />
<br />To help development, is there an SPC player that lets you save the RAM after loading and playing it?  Some of the SNES emulators might do this but it'd save time if someone could tell me of one that does it before I go through and check all of them for one that can do it.</div>

					
						<div class="postbody"><br />_________________<br />/* this is a comment */</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=230"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p88404"></a>
				<b class="postauthor">mic_</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88404"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88404#p88404"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jan 04, 2012 10:35 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Oct 05, 2006 6:29 am<br /><b>Posts:</b> 839
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">BSNES's debugger let's you step/trace the S-SMP. There's also a memory viewer where you can look at various memory areas (select S-APU bus to look at the SPC RAM).
<br />
<br />If you trace the execution and everything looks correct from a CPU point-of-view, you could compare what's written to the ENVX registers ($x8) in BSNES and in your DSP implementation. If they don't match then you might have a problem in your envelope handling.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=1181"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p88463"></a>
				<b class="postauthor">kevtris</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88463"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88463#p88463"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jan 05, 2012 11:08 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=230.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Oct 29, 2005 2:09 am<br /><b>Posts:</b> 412<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">mic_ wrote:</div><div class="quotecontent">BSNES's debugger let's you step/trace the S-SMP. There's also a memory viewer where you can look at various memory areas (select S-APU bus to look at the SPC RAM).<br /><br />If you trace the execution and everything looks correct from a CPU point-of-view, you could compare what's written to the ENVX registers ($x8) in BSNES and in your DSP implementation. If they don't match then you might have a problem in your envelope handling.</div>
<br />
<br />Unfortunately, bsnes seems to have had its debugger 100% removed.  I don't know why, but the debugger is totally gone now.  The webpage doesn't even hint that a debugger ever existed.  I found links about it the forum here but it all just ends in 404's.
<br />
<br />marshall did manage to find the source code to an old version and built it with the debugging on but it didn't work.  I could load/run ROMs but the debugger wouldn't work.  it'd just grey out the "step" buttons and do nothing.
<br />
<br />I spent a lot of time trying to find a debugger that worked, so I finally did.  The mess emulator's debugger has been working pretty good for me now and testing has been proceeding.  It's buggy but I have gotten most of the bugs in it fixed (a buggy debugger. lol).
<br />
<br />So far, I have come up with a basic opcode testing framework that works like this:
<br />
<br />There's a 4096 entry linked list table that is loaded into memory, then the code follows the list and uses the addresses generated as input into the opcode testing part, which uses bits of the address to index 4 more random tables (0-255 sequence, no repeats) to generate the psw, a, x, and y values to test the opcodes with.  My coverage is probably going to be pretty close to 100% this way.  I did it this way to remove as much testing bias as possible (I had a nasty bug where X and Y were flipped on indexing for example.. this would've immediately detected that).
<br />
<br />After running the opcode it builds into memory (using the old linked list address, so things like inc and dec actually modify the old pointers), it then crc32's the psw, a, x, and y registers and after the opcode performs all 4096 tests, it crc's the pointer table in case it was modified.  This final 32 bit crc is then the "fingerprint" for a particular opcode.  This is stuffed into a 2K table (256 opcodes, max of 2 tests per).
<br />
<br />It sounds complicated but the code is actually fairly small, and a single test routine is about 200 bytes long and tests 36 opcodes with two sets of addresses which does not, and then does cross pages.  That's 72 full tests.  It takes about 50 seconds to run those so a full test ROM run will probably take 10-15 minutes.  But that's the price of accuracy.
<br />
<br />The only hard part I am going to have is how to test this on a real SNES.  Some kind of snes ROM that loads the data into the SPC, runs it, then reads the results back and saves them into battery-backed RAM is probably the best.  Then a SNES copier (yeah I have one) can be used to save the battery backed RAM to a file to recover the CRCs on the real system.
<br />
<br />That won't be for a few days though, so any ideas on how to do that would be cool.
<br />
<br />I finally got the tester debugged and working now, so adding the other opcodes shouldn't take TOO much time.  Right now I have it testing all of the absolute instructions, and absolute indexed instructions.  Today I will round that out hopefully with all of the ALU functions.
<br />
<br />After this tester is done, it should be relatively easy to port it to the 6502 and have it run on the NES for a kind of "super 6502 tester".</div>

					
						<div class="postbody"><br />_________________<br />/* this is a comment */</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=230"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p88470"></a>
				<b class="postauthor">mic_</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88470"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88470#p88470"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jan 05, 2012 12:46 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Oct 05, 2006 6:29 am<br /><b>Posts:</b> 839
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Unfortunately, bsnes seems to have had its debugger 100% removed. I don't know why, but the debugger is totally gone now. The webpage doesn't even hint that a debugger ever existed. I found links about it the forum here but it all just ends in 404's. </div>
<br />
<br />I've got a copy of the debugger version of BSNES v0.60 (for Windows) that I can put online, unless byuu has any objections.
<br />
<br />EDIT: <a href="http://jiggawatt.org/notmine/bsnes_v060d.zip" class="postlink">Here's</a> the BSNES 0.60 archive with the debugger.
<br />
<br />As for loading SPC files from the SNES side, I've got <a href="http://jiggawatt.org/badc0de/spcplayer-1.4.zip" class="postlink">something for that here</a> (source included) (<a href="http://jiggawatt.org/badc0de/spcplayer.htm" class="postlink">more info</a> on how it works).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=1181"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p88691"></a>
				<b class="postauthor">kevtris</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88691"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88691#p88691"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Jan 09, 2012 10:27 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=230.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Oct 29, 2005 2:09 am<br /><b>Posts:</b> 412<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">mic_ wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Unfortunately, bsnes seems to have had its debugger 100% removed. I don't know why, but the debugger is totally gone now. The webpage doesn't even hint that a debugger ever existed. I found links about it the forum here but it all just ends in 404's. </div><br /><br />I've got a copy of the debugger version of BSNES v0.60 (for Windows) that I can put online, unless byuu has any objections.<br /><br />EDIT: <a href="http://jiggawatt.org/notmine/bsnes_v060d.zip" class="postlink">Here's</a> the BSNES 0.60 archive with the debugger.<br /><br />As for loading SPC files from the SNES side, I've got <a href="http://jiggawatt.org/badc0de/spcplayer-1.4.zip" class="postlink">something for that here</a> (source included) (<a href="http://jiggawatt.org/badc0de/spcplayer.htm" class="postlink">more info</a> on how it works).</div>
<br />
<br />Cool thanks for the stuff.
<br />
<br />update:  The SPC test ROM is more or less done, and tests 254 of the 256 opcodes with around 8000 tests per opcode, followed by CRC32'ing of the results.
<br />
<br />I have used it to debug my FPGA SPC CPU, and it worked great for this.  I still have a few kinks to work out with the test code then I guess I can post the source to it.  It's not runnable on a real SNES yet, since I don't really know anything about the SNES to get it to spit back data in some usable form.
<br />
<br />I suspect it will basically run, then spit the crc's back to the SNES which can store it in SRAM, then the SRAM can be backed up by a copier and read out that way.  I might need some help on writing code to do this... I dunno yet.  After I post the source maybe someone can take a look at what I did and go from there.
<br />
<br />The tests are done fairly simply:  it just loads the registers with randomish values via some tables, runs the instruction, then CRC's all the registers afterwards (a, x, y, flags) and data bytes, if needed (i.e. instructions that modify memory).  This is done with two sets of data, and sometimes two slightly different testing methods.  i.e. page crosses and no page crosses.  
<br />
<br />I didn't go nuts with testing yet because I wasn't sure if the PC emulators could handle it.  namely things like zeropage wrapping and pcall wrapping among other things.
<br />
<br />(since someone will probably ask, the two opcodes I cannot test are sleep and stop).</div>

					
						<div class="postbody"><br />_________________<br />/* this is a comment */</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=230"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p88693"></a>
				<b class="postauthor">mic_</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88693"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88693#p88693"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Jan 09, 2012 11:58 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Oct 05, 2006 6:29 am<br /><b>Posts:</b> 839
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I suspect it will basically run, then spit the crc's back to the SNES which can store it in SRAM, then the SRAM can be backed up by a copier and read out that way. I might need some help on writing code to do this...</div>
<br />
<br />Or display it on the screen?  Unless you really want to keep the data for later.
<br />
<br />Sending data back to the SNES works the same way as for the other direction: you've got your four communication ports ($2140-$2143 on the S-CPU [SNES] side, and $F4-$F7 on the S-SMP [SPC] side).
<br />
<br />Pseudo-code:
<br />
<br />S-CPU
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">for &#40;i=0; i &lt; CRC_BYTES/2; i++&#41;<br />&#123;<br />&nbsp; &nbsp;while &#40;R_SPCCOM0 != i&#41; ;&nbsp; // Wait for indication of new data<br />&nbsp; &nbsp;crc&#91;i*2&#93; = R_SPCCOM1;<br />&nbsp; &nbsp;crc&#91;i*2 + 1&#93; = R_SPCCOM2;<br />&nbsp; &nbsp;R_SPCCOM0 = i;&nbsp; // echo the counter back to the S-SMP<br />&#125;<br /></div><br /><br />S-SMP<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">for &#40;i = 0; i &lt; CRC_BYTES/2; i++&#41;<br />&#123;<br />&nbsp; &nbsp;R_PORT0 = i;&nbsp; &nbsp; <br />&nbsp; &nbsp;R_PORT1 = crc&#91;i*2&#93;;<br />&nbsp; &nbsp;R_PORT2 = crc&#91;i*2 + 1&#93;;<br />&nbsp; &nbsp;while &#40;R_PORT0 != i&#41; ;&nbsp; // wait for echo from the S-CPU<br />&#125;<br /></div>
<br />
<br />If you have more than 256 bytes of data to transfer you might want to use ports 0-1 as a 16-bit counter, and ports 2-3 for the actual data bytes.. Or some other combination.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=1181"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p88775"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88775"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88775#p88775"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jan 12, 2012 8:39 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 835
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; I didn't go nuts with testing yet because I wasn't sure if the PC emulators could handle it. namely things like zeropage wrapping and pcall wrapping among other things.
<br />
<br />I would appreciate it if you ran the test on bsnes v085 to see if it fails anything. If so, I'll fix it.
<br />
<br />&gt; (since someone will probably ask, the two opcodes I cannot test are sleep and stop).
<br />
<br />One of the pins on the S-SMP has to be /IRQ (but I can't find a complete pinout.) Wire it up to a switch to toggle +5V/GND (pull off the Vreg or something), and have fun with SLEEP =)
<br />
<br />I'd actually really like to emulate IRQs on the chip, even if there's no way to use them, just to have a complete core.
<br />
<br />Speaking of that ... you have any plans to attack the TEST register? Neither me, anomie nor blargg have been able to figure out every bit entirely.
<br />We know: frequency adjust, RAM disable, RAM write disable, MMIO disable.
<br />We are fuzzy on: two bits that each do weird things to the timers, one frequency setting that deadlocks every SMP we've tried it on to date.
<br />No games use it at all, but again, fun to do it all the way.
<br />
<br />&gt; Unfortunately, bsnes seems to have had its debugger 100% removed. I don't know why, but the debugger is totally gone now.
<br />
<br />Rewrote the GUI. Debugger takes a lot of time to remake. Plan in the future is to have the debugger be a separate GUI entirely. Trying to get it to work with ALL GUI features doesn't work very well.
<br />
<br />You wouldn't like the current one anyway. I threw out the official SPC700 mnemonics and made my own 6502-alike to match the S-CPU, eg:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">mov a,#$12 -&gt; lda #$12<br />push x -&gt; phx</div>
<br />It works amazingly well. The chip was clearly a 6502 with the mnemonics changed last-minute (probably) for legal reasons.
<br />
<br />Anyway, v070 has probably the best debugger.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p88816"></a>
				<b class="postauthor">kevtris</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88816"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88816#p88816"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jan 13, 2012 10:19 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=230.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Oct 29, 2005 2:09 am<br /><b>Posts:</b> 412<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">&gt; I didn't go nuts with testing yet because I wasn't sure if the PC emulators could handle it. namely things like zeropage wrapping and pcall wrapping among other things.<br /><br />I would appreciate it if you ran the test on bsnes v085 to see if it fails anything. If so, I'll fix it.<br /><br /></div><br /><br />Yeah I may need a bit of help on the SNES side of things, since I have never written anything for it.  Sure I can learn it and all that, but at this point I don't want to spend the time to learn it, hehe.  (Since I've been concentrating on SPC and the FPGA implementation thereof).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />One of the pins on the S-SMP has to be /IRQ (but I can't find a complete pinout.) Wire it up to a switch to toggle +5V/GND (pull off the Vreg or something), and have fun with SLEEP =)<br /><br />I'd actually really like to emulate IRQs on the chip, even if there's no way to use them, just to have a complete core.<br /><br /></div><br /><br />Yeah I was wondering if the pin(s) existed for an interrupt or two.  It seems silly to have the instruction if you cannot use it.  But it miight make a little sense if they used a "stock" core as a base for it.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Speaking of that ... you have any plans to attack the TEST register? Neither me, anomie nor blargg have been able to figure out every bit entirely.<br />We know: frequency adjust, RAM disable, RAM write disable, MMIO disable.<br />We are fuzzy on: two bits that each do weird things to the timers, one frequency setting that deadlocks every SMP we've tried it on to date.<br />No games use it at all, but again, fun to do it all the way.<br /><br /></div><br /><br />Is is possible it controls something to do with the DSP's memory sharing or something?  From what I can tell, the DSP hits what amounts to RDY on the CPU for 2 out of 3 cycles.  This is how I implement it on my FPGA version anyways.  <br /><br />I guess the DSP could be running the show, too, when it comes to memory interleaving.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />&gt; Unfortunately, bsnes seems to have had its debugger 100% removed. I don't know why, but the debugger is totally gone now.<br /><br />Rewrote the GUI. Debugger takes a lot of time to remake. Plan in the future is to have the debugger be a separate GUI entirely. Trying to get it to work with ALL GUI features doesn't work very well.<br /><br />You wouldn't like the current one anyway. I threw out the official SPC700 mnemonics and made my own 6502-alike to match the S-CPU, eg:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">mov a,#$12 -&gt; lda #$12<br />push x -&gt; phx</div><br /><br /></div><br /><br />Gotcha.  that's a good reason as any <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" />   I wouldn't mind it TOO much, so long as it works.  I ended up using the MESS debugger, however.  It was good for dumping the SPC's RAM to disk so I could poke it later.<br /><br />The output of my test program is a 2K block of CRC's corresponding to all 256 instructions (4 bytes per, and 2 tests per opcode, so 512*4 bytes).  There is also a 512 byte field that indicates which tests passed and which failed (though that's not implemented  yet, it just shows when a test is run).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />It works amazingly well. The chip was clearly a 6502 with the mnemonics changed last-minute (probably) for legal reasons.<br /><br />Anyway, v070 has probably the best debugger.</div>
<br />
<br />Yeah I was wondering about this, if it was meant to be a super-enhanced 6502 or not.  They sure added some weird instructions if so, like being able to OR/NOR/AND/NAND/XOR a single memory bit with the carry flag.  Does anything even USE those instructions?</div>

					
						<div class="postbody"><br />_________________<br />/* this is a comment */</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=230"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p88817"></a>
				<b class="postauthor">kevtris</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88817"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88817#p88817"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jan 13, 2012 10:25 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=230.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Oct 29, 2005 2:09 am<br /><b>Posts:</b> 412<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">mic_ wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I suspect it will basically run, then spit the crc's back to the SNES which can store it in SRAM, then the SRAM can be backed up by a copier and read out that way. I might need some help on writing code to do this...</div><br /><br />Or display it on the screen?  Unless you really want to keep the data for later.<br /><br /></div>
<br />
<br />Yeah, I wanted to keep the 2K of CRC's so I could plug them back into the SPC so it can indicate pass/fail on the various tests.  I figure that on a real SNES, most of the tests will pass, through, so indicating the failures might be a valid way to go.
<br />
<br />My biggest issue is not getting them out of the SPC, but getting the SNES to do what I want it to do, hehe.  I haven't touched the SNES before with regards to coding it.  I was probably going to just take some kind of example code and convert it over to do my bidding or something.  
<br />
<br />Buut I've been busy with FPGA and running the SPC thereon, so I haven't had time nor inclination to do it yet.
<br />
<br />Speaking of, I got a video of it playing some SPC's posted to youtube:
<br />
<br /><!-- m --><a class="postlink" href="http://www.youtube.com/watch?v=_uDHCZGoHjM">http://www.youtube.com/watch?v=_uDHCZGoHjM</a><!-- m -->
<br />
<br />I squashed a major echo bug after posting this, but I don't think it's terribly audible.  I had some channel "Cross pollination" of the echo, because the right channel N audio is written during channel time N+1, which means the echo enable bit had changed, turning echo on wrongly for channel N.  This was since fixed.</div>

					
						<div class="postbody"><br />_________________<br />/* this is a comment */</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=230"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p88818"></a>
				<b class="postauthor">mic_</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88818"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88818#p88818"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jan 13, 2012 11:48 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Oct 05, 2006 6:29 am<br /><b>Posts:</b> 839
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">My biggest issue is not getting them out of the SPC, but getting the SNES to do what I want it to do, hehe. I haven't touched the SNES before with regards to coding it.<br /></div>
<br />
<br />Sounds like you've done all the hard parts and have the easy stuff left <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />
<br />Hell, you can program the SNES <a href="http://jiggawatt.org/notmine/SNES_SDK_r67_Win32.zip" class="postlink">using C</a>, except for the most timing-critical stuff, which simplifies the work a bit. And unless you need a fancy-schmancy GUI there's no need to learn all the details of the PPU and DMA controller (until you start implementing the full FPGASNES).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=1181"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p88819"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p88819"></a></div><div style="float: right;"><a href="./viewtopic.php?p=88819#p88819"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jan 13, 2012 11:52 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 12426<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The SNES is close enough conceptually to the NES that it shouldn't be too hard to get some sort of terminal running, should it?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=8466"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=8466"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 17 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=8466&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=8466&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Google [Bot]</span> and 1 guest</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="8466" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - DISASM6 v1.4 - Nes oriented disassembler producing asm6 code</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">DISASM6 v1.4 - Nes oriented disassembler producing asm6 code</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=7466">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=7466</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>7</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>frantik</b> [ Wed Feb 09, 2011 10:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>DISASM6 v1.4 - Nes oriented disassembler producing asm6 code</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />DISASM6 is a multi-pass NES-oriented disassembler which produces ASM6 code.  
<br />
<br />
<br />Features:
<br />* produces instantly re-assemblable code (without any human modification)
<br />* iNES header support
<br />* Can export CHR-ROM
<br />* can use optional NES registers
<br />* can use custom defined labels
<br />* can use FCEUDX code/data logs
<br />
<br />
<br />The output can be reassembled using ASM6.  I've tested it with a handful of roms and so far every mapper 0 rom has assembled into a 1:1 copy of the original. For 16k games that have 2 copies in in the .nes file, it will tweak the iNes header from 2 prg banks to 1 unless you disable 16k checking
<br />
<br /><a href="http://swiftlytilting.com/downloads/disasm6-1.4.zip" class="postlink">Download Dasm6 v1.4</a>
<br />
<br />Please let  me know about any bugs and any suggestions you have.  
<br />
<br />Some future ideas:
<br />* may add  support for mappers
<br />
<br />Windows EXE and PHP source included
<br />
<br /><a href="http://swiftlytilting.com/downloads/excite.asm.txt" class="postlink">example output</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Wed Feb 09, 2011 12:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: DASM6 - Nes oriented disassembler producing asm6 code</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">frantik wrote:</div><div class="quotecontent">... it's a 2 pass 6502 disassemler <strong><span style="text-decoration: underline">written in PHP</span></strong></div>
<br />
<br /><img src="http://arthropoda.southernfriedscience.com/wp-content/uploads/2009/11/facepalm.jpg" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>clueless</b> [ Wed Feb 09, 2011 1:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />While a disassembler is cool, I too am bemused by the choice of PHP.  I suppose if that is all that you know, then fine.  I am reminded of a quote that I'm totally going to screw up: "If you only have a hammer, then every problem is a nail" (or something).
<br />
<br />And I say the above half jokingly.  You've produced working code, and decided to share it with everyone.  That is far more than most people have done.  I congratulate you on your accomplishment, even if I snicker at PHP itself.  Just don't port it to COBOL, FORTRAN or JCL, ok? <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />
<br />
<br />Side-note: The core engine for "cacti" is written in PHP (web page + batch processing scripts).
<br />
<br />What would be really awesome is if you could identify, via static code analysis, code from data.  I can think of several heuristics for this.
<br />
<br />I once worked on a static code analyzer for intelligently disassembling NES roms.  It would start with each of the three interrupt vectors and trace all possible code execution paths.  I then realized that I had bitten off more than I wanted to when I needed to handle <a href="http://wiki.nesdev.com/w/index.php/RTS_Trick" class="postlink">constructs like this</a>:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">tay<br />lda some_tbl_msb, y<br />pha<br />lda some_tbl_lsb, y<br />pha<br />php<br />rti<br /></div>
<br />
<br />But if you could nail stuff like that, it would be TOTALLY AWESOME.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>frantik</b> [ Wed Feb 09, 2011 3:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />wow, who would expect people who program for an ancient and obsolete processor would make fun of someone else for their choice of programming languages.   ... snip ...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Wed Feb 09, 2011 3:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">frantik wrote:</div><div class="quotecontent">wow, who would expect people who program for an ancient and obsolete processor would make fun of someone else for their choice of programming languages.   fucking idiots</div>
<br />
<br />
<br />Lol, we might program for an ancient processor, but can YOU handle the challenge? NES compiler version, please!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>frantik</b> [ Wed Feb 09, 2011 3:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">Lol, we might program for an ancient processor, but can YOU handle the challenge? NES compiler version, please!</div>
<br />
<br />yeah, i'll leave that up to you  (though <a href="http://nesdev.com/bbs/viewtopic.php?t=4965&amp;highlight=" class="postlink">i do also write 6502 asm</a>)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Wed Feb 09, 2011 3:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">frantik wrote:</div><div class="quotecontent"><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">Lol, we might program for an ancient processor, but can YOU handle the challenge? NES compiler version, please!</div><br /><br />yeah, i'll leave that up to you  (though <a href="http://nesdev.com/bbs/viewtopic.php?t=4965&amp;highlight=" class="postlink">i do also write 6502 asm</a>)</div>
<br />
<br />As if PHP were more powerful then 6502? Hahaha!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>frantik</b> [ Wed Feb 09, 2011 3:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />anyways, on topic
<br />
<br /><div class="quotetitle">clueless wrote:</div><div class="quotecontent">What would be really awesome is if you could identify, via static code analysis, code from data.  I can think of several heuristics for this.</div>
<br />
<br />yes that would be cool but i think beyond the scope of this disassembler
<br />
<br />besides, i dont think it would be very effective at finding small bits of data in bit blocks of program code.  finding  big blocks of data isn't hard because there are lots of invalid opcodes
<br />
<br />it might not hurt to make 2 kinds of labels though.. ones used by LDA/X/Y and ones used by JMP/JSR.  then it would be even more obvious where data is and where program code is
<br />
<br />the main thing i want to do right now is make sure all labels which are referenced actually exist in the program code so that the output can immediately be reassembled without any modification

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>clueless</b> [ Wed Feb 09, 2011 3:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I take it that one of your goals is that a re-assmbled NES file should be identical to the one disassembled?  If so, you could stress test this by writing a small program to generate totally random NES roms (with valid ines header).  Then automate the disassembly and reassembly of the image, and compare the MD5 checksums.  If a test fails, set the original ROM aside for later analysis.
<br />
<br />Would be even cooler if your randomly generated ROMs used a byte distribution that is typical of most NES games.
<br />
<br />Do you have a fairly large corpus of ROM images to test with already?
<br />
<br />And the FORTRAN thing.. I'm sorry if I touched a nerve.  I was just teasing (just a little).  I've had far worse.  Sivak told me that my game sucked.  Period. <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />  The guys at work make fun of me for using C, C++ and Perl.  Yet my code can run circles around their fancy java frameworks.  Doesn't stop them from being dicks about it though.  I'm sorry if I was a dick to you.  I didn't intend to be.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>frantik</b> [ Wed Feb 09, 2011 4:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">clueless wrote:</div><div class="quotecontent">I'm sorry if I was a dick to you.  I didn't intend to be.</div>
<br />
<br />it's all good.. i had literally just woken up lol so i was a lil bitchy.. it was more the combination of the facepalm and your post.. but it's all good <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />
<br />and yeah the object is to create an assembly file that generates identical output as the original file.  i haven't gotten to that point yet though.. but asm6 doesn't generate any errors besides missing labels so thats good

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cartlemmy</b> [ Wed Feb 09, 2011 5:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm sometimes astounded by the negativity that is thrown about on these forums.
<br />
<br />But anyhow your disassembler looks cool. I program in PHP quite often, and though it is a bit of a retarded beast, some cool stuff can be done with it. If you're a good programmer, that's all that matters.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Wed Feb 09, 2011 6:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">clueless wrote:</div><div class="quotecontent">What would be really awesome is if you could identify, via static code analysis, code from data.  I can think of several heuristics for this.</div>
<br />Also maybe think about emulator assisted disassembly. FCEUX can make code/data logs already.
<br />
<br />E: Wohoo 400th post...
<br />
<br />E2: Also forgot to say: nice work OP.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>clueless</b> [ Wed Feb 09, 2011 6:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><div class="quotetitle">clueless wrote:</div><div class="quotecontent">What would be really awesome is if you could identify, via static code analysis, code from data.  I can think of several heuristics for this.</div><br />Also maybe think about emulator assisted disassembly. FCEUX can make code/data logs already.</div>
<br />
<br />Yup, and that was instrumental in my reverse engineering of Crystalis back in 2001 or so.  However, a complete disassembly requires playing the game such that you access every memory location, or create a TAS that does the same.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>frantik</b> [ Wed Feb 09, 2011 7:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><div class="quotetitle">clueless wrote:</div><div class="quotecontent">What would be really awesome is if you could identify, via static code analysis, code from data.  I can think of several heuristics for this.</div><br />Also maybe think about emulator assisted disassembly. FCEUX can make code/data logs already.</div>
<br />
<br />hmm good point.. i will see if i can incorporate those somehow <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Wed Feb 09, 2011 8:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">frantik wrote:</div><div class="quotecontent"><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><div class="quotetitle">clueless wrote:</div><div class="quotecontent">What would be really awesome is if you could identify, via static code analysis, code from data.  I can think of several heuristics for this.</div><br />Also maybe think about emulator assisted disassembly. FCEUX can make code/data logs already.</div><br /><br />hmm good point.. i will see if i can incorporate those somehow <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
<br />
<br />Yes...but....what about bankswitching?  JSR to $c039 might mean "jump into this pile of data" if the disassembler doesn't know that the code it just disassembled prior to this caused the MMC1 to swap the high bank.  ?
<br />
<br />Now...disassembly aided by a code/data log file generated by a run of the ROM in an emulator like FCEUX or NESICIDE...that is not static, but accurate.  In fact, isn't that what people most often use to rip NSFs?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>7</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
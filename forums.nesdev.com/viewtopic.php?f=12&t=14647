<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Some tidbits about the Cx4 (attn: byuu, nocash)</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Some tidbits about the Cx4 (attn: byuu, nocash)" href="http://forums.nesdev.com/feed.php?f=12&amp;t=14647" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=14647';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Mon Jan 21, 2019 5:22 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />

	<div class="forumrules">
		
			<h3>Forum rules</h3><br />
			<ul><li>For making cartridges of your Super NES games, see <a href="http://forums.nesdev.com/viewforum.php?f=28" class="postlink">Reproduction</a>.</li></ul>
		
	</div>

	<br clear="all" />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=14647">Some tidbits about the Cx4 (attn: byuu, nocash)</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=14647"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>4</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 47 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14647&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14647&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14647&amp;start=45">4</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=14647&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=14647&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=14647&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=14647&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p176882"></a>
				<b class="postauthor">ikari_01</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176882">Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176882#p176882"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 07, 2016 6:50 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3966.png" width="32" height="28" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 04, 2009 2:28 pm<br /><b>Posts:</b> 141<br /><b>Location:</b> Wunstorf, Germany
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hello!<br />While preparing firmware v0.1.7c for release I stumbled upon the Cx4 again - Rockman died in attract mode once again. After some nights of fiddling it turns out my timing is ass, and the Cx4 can pull off some more stuff than what the two games do. Bit of a shame actually it wasn't used for more stuff.<br /><br />Anyway this should cover most of the unknown stuff about MMIO registers, pins, internal registers, instruction timing, cartridge RAM access, DMA, and some oddball stuff.<br /><br />I did not touch unknown instructions and flags so far.<br /><br />I tried to organize my notes a bit but it's probably still a mess, please ask if you are confused or need to know anything <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />So without further ado, here are the notes. Also available at <!-- m --><a class="postlink" href="https://sd2snes.de/files/cx4_notes.txt">https://sd2snes.de/files/cx4_notes.txt</a><!-- m --><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">=======================================<br />Cx4 notes by ikari_01 &lt;otakon@gmx.net&gt;<br />https://sd2snes.de<br />-&gt; Version: 0.2<br />&nbsp; &nbsp; - add clarification on memory mapping<br />&nbsp; &nbsp; - point out that the CPU is halted until caching is complete<br />&nbsp; &nbsp; - cart bus only claimed on actual bus operations<br />&nbsp; &nbsp; - add register $7f48<br />&nbsp; &nbsp; - correct pin mapping (74 and 75 were swapped)<br /><br />&nbsp; &nbsp;Version: 0.1 (initial)<br />=======================================<br /><br />These notes add some information about previously unknown/undocumented aspects<br />of the Capcom Cx4 custom chip. It is NOT a complete documentation of the Cx4<br />but adds bits of information missing in existing documentation.<br />They were compiled while working with the Cx4 and are a bit chaotic, please<br />ask if anything is unclear.<br /><br /><br />Hardware:<br />=========<br /><br />Pin 74: global memory output enable<br />&nbsp; &nbsp; &nbsp; &nbsp; Cx4 still exposes its MMIO and internal RAM etc. to the bus if this is<br />&nbsp; &nbsp; &nbsp; &nbsp; high, but no ROM or RAM connected to it.<br />&nbsp; &nbsp; &nbsp; &nbsp; Probably for use with cart ROM/RAM connected &quot;alongside&quot; the Cx4 but<br />&nbsp; &nbsp; &nbsp; &nbsp; independent of it.<br />Pin 75: Map select (0=LoROM; 1=HiROM)<br /><br />Memory map<br />==========<br /><br />LoROM mapping is widely known. Cart RAM is mapped at 70-7f:0000-7fff.<br /><br />HiROM mapping is a bit botched at least on the MMX2 PCB. SNES A15 becomes A20<br />to the ROM, all other address lines are shifted down by one to close the gap.<br />So the mapping S-CPU -&gt; Cart ROM goes as follows:<br /><br />C0:0000 =&gt; 0x000000<br />C0:8000 =&gt; 0x100000<br />C1:0000 =&gt; 0x008000<br />C1:8000 =&gt; 0x108000<br />C2:0000 =&gt; 0x010000<br />&nbsp;...<br />DF:7FFF =&gt; 0x0FFFFF<br />DF:FFFF =&gt; 0x1FFFFF<br /><br />ROM content must be rearranged to match, or rewired.<br /><br />As a plus, in HiROM mode it is possible to use 32MBits of cart ROM in two<br />16Mbit chips (by leaving $7f52 at $01), from E0:0000 onward the second ROM<br />will be selected.<br /><br />In HiROM mode ROM is mapped as follows (assuming $7f52 = $01)<br /><br />&nbsp; &nbsp;00-3F:8000-FFFF ROM1 0x100000-0x1FFFFF, ROM2 0x100000-0x1FFFFF<br />&nbsp; &nbsp;40-7D:0000-FFFF NOTHING (open bus with a bit of noise)<br />&nbsp; &nbsp;80-BF:8000-FFFF ROM1 0x100000-0x1FFFFF, ROM2 0x100000-0x1FFFFF<br />&nbsp; &nbsp;C0-FF:0000-7FFF ROM1 0x000000-0x0FFFFF, ROM2 0x000000-0x1FFFFF<br />&nbsp; &nbsp;C0-FF:8000-FFFF ROM1 0x100000-0x1FFFFF, ROM2 0x100000-0x1FFFFF<br /><br />Cart RAM mapping:<br /><br />&nbsp; &nbsp;LoROM: 70-77:0000-7FFF<br />&nbsp; &nbsp;HiROM: 30-3F:6000-7FFF, B0-BF:6000-7FFF<br /><br />MMIO mapping:<br /><br />&nbsp; &nbsp;LoROM: 00-3F:6000-7FFF, 80-BF:6000-7FFF<br />&nbsp; &nbsp;HiROM: 00-2F:6000-7FFF, 80-AF:6000-7FFF (to make room for Cart RAM)<br /><br /><br />DMA<br />===<br /><br />DMA source and destination CAN reference the same bus but not the same chip,<br />e.g. cart ROM &lt;-&gt; cart RAM is allowed but cart RAM &lt;-&gt; cart RAM isn't!<br />Same-bus DMA takes WS1+WS2 extra waitstates per cycle.<br />DMA from/to internal RAM only takes WS1 or WS2 extra waitstates depending<br />on the referenced mapping area.<br />Neither DMA source nor destination may point to unmapped areas (-&gt; lockup).<br />ROM is disallowed as a DMA destination (-&gt; lockup).<br /><br /><br />CPU misc. (caching)<br />===================<br /><br />Cx4 has two program cache pages. They are the only way it can execute code,<br />the CPU CANNOT run directly from cart ROM/RAM.<br />The pages have tags to indicate what program page (from ROM) they currently<br />contain. The CPU will use these to determine whether a jump across page<br />boundaries requires re-buffering of one of the cache pages.<br /><br />If execution reaches the end of cache page 0 and there is no STOP instruction,<br />page 1 will be buffered (according to contents of P register?) and execution<br />continues. On end of page 1, execution halts (implied STOP instruction) and<br />CPU goes idle.<br /><br />During caching of a program page the CPU is halted until all bytes are copied.<br /><br />For more details on caching see $7f4c.<br /><br />For cartridge ROM/RAM access, there are two different configurable waitstate<br />counts (called WS1+WS2 here; see $7f50 below).<br />WS1 applies to cart ROM, WS2 applies to cart RAM.<br /><br /><br />Registers<br />=========<br /><br />(for sake of completeness in conjunction with $7f47, $7f40-$7f46 are listed<br />here.)<br />$7f40: DMA source low byte<br />$7f41: DMA source high byte<br />$7f42: DMA source bank<br />$7f43: DMA length low byte<br />$7f44: DMA length high byte<br />$7f45: DMA destination low byte<br />$7f46: DMA destination high byte<br />$7f47: DMA destination bank (!)<br />&nbsp; &nbsp; &nbsp; &nbsp;ALSO: Trigger GPDMA (BUS&lt;-&gt;internal map)<br /><br />$7f48: R/W<br />&nbsp; &nbsp; &nbsp; &nbsp;Trigger program page caching<br />&nbsp; &nbsp; &nbsp; &nbsp;0: Page select (0/1)<br />&nbsp; &nbsp; &nbsp; &nbsp;This preloads a cache page with bus data (cart ROM/RAM) pre-set by the<br />&nbsp; &nbsp; &nbsp; &nbsp;offset select ($7f49-$7f4b) and program page select ($7f4d-$7f3e)<br />&nbsp; &nbsp; &nbsp; &nbsp;registers. The appropriate number of waitstates for the designated<br />&nbsp; &nbsp; &nbsp; &nbsp;memory type applies.<br />&nbsp; &nbsp; &nbsp; &nbsp;<br />$7f4c: R/W<br />&nbsp; &nbsp; &nbsp; &nbsp;1: cache page 1 lock (1=locked)<br />&nbsp; &nbsp; &nbsp; &nbsp;0: cache page 0 lock (1=locked)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;The cache page lock flags are used to prevent the CPU from buffering<br />&nbsp; &nbsp; &nbsp; &nbsp;to the corresponding cache page at runtime (e.g. when the pgm_page<br />&nbsp; &nbsp; &nbsp; &nbsp;register is prepared and a JMP/CALL P instruction is executed).<br />&nbsp; &nbsp; &nbsp; &nbsp;The cache pages can still be filled by writing to $7f48.<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;This is more or less a tuning mechanism for the developer who can decide<br />&nbsp; &nbsp; &nbsp; &nbsp;to keep certain code cached at all times.<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;Several constellations must be considered when code is executed in one<br />&nbsp; &nbsp; &nbsp; &nbsp;of the cache pages:<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;no pages locked:<br />&nbsp; &nbsp; &nbsp; &nbsp;================<br />&nbsp; &nbsp; &nbsp; &nbsp;If the other page already contains the program page required, the CPU<br />&nbsp; &nbsp; &nbsp; &nbsp;will just jump there. Otherwise the other page will be loaded with the<br />&nbsp; &nbsp; &nbsp; &nbsp;program page contents from ROM prior to jumping and its tag will be<br />&nbsp; &nbsp; &nbsp; &nbsp;updated.<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;either of the pages locked:<br />&nbsp; &nbsp; &nbsp; &nbsp;===========================<br />&nbsp; &nbsp; &nbsp; &nbsp;The other page cannot be used for buffering so unless it already<br />&nbsp; &nbsp; &nbsp; &nbsp;contains the desired program page the same page is used, overwriting<br />&nbsp; &nbsp; &nbsp; &nbsp;the code that is currently executed. If a RET occurs, the previous<br />&nbsp; &nbsp; &nbsp; &nbsp;program page is swapped back in. This requires reading 512 bytes from<br />&nbsp; &nbsp; &nbsp; &nbsp;cartridge ROM every time so it can get very slow.<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;both pages locked:<br />&nbsp; &nbsp; &nbsp; &nbsp;==================<br />&nbsp; &nbsp; &nbsp; &nbsp;ONLY the program pages that have been pre-cached by writing $7f4d/e and<br />&nbsp; &nbsp; &nbsp; &nbsp;$7f48 are available to the CPU. If a different program page is requested<br />&nbsp; &nbsp; &nbsp; &nbsp;prior to execution either by $7f4d/e -&gt; $7f4f, or by a JMP/CALL P<br />&nbsp; &nbsp; &nbsp; &nbsp;instruction at runtime, execution will stop immediately.<br /><br />$7f50: 7: -<br />&nbsp; &nbsp; &nbsp; &nbsp;6-4: WS1 (ROM read waitstates) (0-7)<br />&nbsp; &nbsp; &nbsp; &nbsp;3: -<br />&nbsp; &nbsp; &nbsp; &nbsp;2-0: WS2 (cart RAM read/write waitstates) (0-7)<br /><br />$7f51: 0: IRQ ack / inhibit<br />&nbsp; &nbsp; &nbsp; &nbsp;(write 1 to ACK and disable further IRQ<br />&nbsp; &nbsp; &nbsp; &nbsp; write 0 to enable IRQ)<br /><br />$7f52: ROM configuration select<br />&nbsp; &nbsp; &nbsp; &nbsp;LoROM: 0: 2x&nbsp; 8Mbit (A21 switches between ROM /CE1 and /CE2)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1: 1x 16Mbit (maybe A22 switches but 40-7f/c0-ff are inactive)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;HiROM: 0: 2x&nbsp; 8Mbit (A20 switches)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1: 2x 16Mbit (A21 switches)<br /><br />$7f53: READ (mirrors: $7f54-$7f57, $7f59, $7f5b-$7f5f)<br />&nbsp; &nbsp; &nbsp; &nbsp;7: CPU is accessing ROM bus (SNES cut off)<br />&nbsp; &nbsp; &nbsp; &nbsp;6: CPU is running<br />&nbsp; &nbsp; &nbsp; &nbsp;5-2: -<br />&nbsp; &nbsp; &nbsp; &nbsp;1: IRQ pending<br />&nbsp; &nbsp; &nbsp; &nbsp;0: Cx4 suspended (see $7f55-$7f5d)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;WRITE (no mirrors)<br />&nbsp; &nbsp; &nbsp; &nbsp;Any write access returns the Cx4 to idle state immediately - useful to<br />&nbsp; &nbsp; &nbsp; &nbsp;recover from infinite loops ;)<br /><br />$7f55: Any write access indefinitely suspends the Cx4 (registers can be<br />&nbsp; &nbsp; &nbsp; &nbsp;read and written but the CPU shows no reaction: no buffering occurs,<br />&nbsp; &nbsp; &nbsp; &nbsp;no code is run and $7f53 is not updated).<br />&nbsp; &nbsp; &nbsp; &nbsp;Cx4 status bit 0 is set.<br /><br />$7f56: Any write: Suspend Cx4 for&nbsp; 32 cycles ( 1.6µs @20MHz)<br />$7f57: Any write: Suspend Cx4 for&nbsp; 64 cycles ( 3.2µs @20MHz)<br />$7f58: Any write: Suspend Cx4 for&nbsp; 96 cycles ( 4.8µs @20MHz)<br />$7f59: Any write: Suspend Cx4 for 128 cycles ( 6.4µs @20MHz)<br />$7f5a: Any write: Suspend Cx4 for 160 cycles ( 8.0µs @20MHz)<br />$7f5b: Any write: Suspend Cx4 for 192 cycles ( 9.6µs @20MHz)<br />$7f5c: Any write: Suspend Cx4 for 224 cycles (11.2µs @20MHz)<br /><br />These registers can be used to obtain guaranteed access to ROM/RAM from the<br />SNES side while the Cx4 is running. CPU and/or ongoing DMA transfers are<br />suspended.<br /><br />$7f5d: Any write clears the Cx4 suspend flag and the chip becomes<br />&nbsp; &nbsp; &nbsp; &nbsp;responsive again (presumably resumes execution).<br /><br />$7f5e: Any write clears the IRQ pending flag WITHOUT touching the actual<br />&nbsp; &nbsp; &nbsp; &nbsp;cart IRQ signal (remains low)<br /><br />If IRQ is enabled, /IRQ goes high-&gt;low when the Cx4 CPU stops, and stays low.<br />Software must ACK by writing 1 to $7f51 bit 0 -&gt; /IRQ will go high again.<br />Software must then write 0 again to re-enable IRQ triggering for the next<br />execution.<br /><br /><br />CPU registers<br />=============<br /><br />$20: PC&nbsp; (PC of current instruction + 1)<br /><br />$28: ??? (always seems to return $2e)<br /><br />$2e: cart ROM bus port (triggers cart ROM reads),<br />&nbsp; &nbsp; &nbsp;to be used with $61 opcode!<br />&nbsp; &nbsp; &nbsp;Waitstates = $7f50 bits 6-4.<br /><br />$2f: cart RAM bus port (triggers cart RAM reads/writes),<br />&nbsp; &nbsp; &nbsp;to be used with $61 / $e1 opcode!<br />&nbsp; &nbsp; &nbsp;Waitstates = $7f50 bits 2-0.<br /><br />$70-$7f are mirrors of $60-$6f (&quot;R0-R15&quot;).<br />internal register address appears to be 7-bit, e.g. $e0-$ff are the same<br />as $60-$7f.<br /><br /><br />Instruction cycles<br />==================<br /><br />1 cycle = 50ns (@20MHz) duh<br />The vast majority of instructions execute in a single cycle.<br />Exceptions/noteworthy details are:<br /><br />&nbsp;- jmp/call takes 1 cycle if branch not taken, 3 cycles if taken<br />&nbsp; &nbsp;(regardless of p flag, crossing page boundaries comes at no extra cost)<br /><br />&nbsp;- ret takes 3 cycles<br /><br />&nbsp;- skip takes 1 cycle for itself, but it makes the skipped instruction count<br />&nbsp; &nbsp;for 1 cycle (injected NOP or equivalent)<br /><br />&nbsp;- internal data rom/ram access takes 1 cycle only.<br /><br />&nbsp;- cart ROM access from Cx4 code:<br /><br />&nbsp; &nbsp;* Cartridge ROM is accessed by reading from register $2e to a special<br />&nbsp; &nbsp; &nbsp;internal register (fullsnes: ext_dta). (Opcode: $612e)<br />&nbsp; &nbsp;* The read itself is 0-waitstate and executes in a single cycle. However<br />&nbsp; &nbsp; &nbsp;the result will not be valid before the appropriate number of waitstates<br />&nbsp; &nbsp; &nbsp;is reached and the data is actually pulled in from the ROM.<br />&nbsp; &nbsp;* The CPU may execute other code in the meantime.<br />&nbsp; &nbsp;* To stall the CPU until the ROM read operation is complete, a wait<br />&nbsp; &nbsp; &nbsp;i­nstruction can be issued ($1c00).<br />&nbsp; &nbsp;* The external bus address does not auto-increment; to do so, a special<br />&nbsp; &nbsp; &nbsp;instruction can be issued ($4000). There may be a decrement instruction<br />&nbsp; &nbsp; &nbsp;as well (as of yet unknown). It is useful to do this before the wait<br />&nbsp; &nbsp; &nbsp;instruction to save a cycle.<br />&nbsp; &nbsp;* The number of waitstates can be configured by setting $7f50 bits 6-4.<br /><br />&nbsp;- cart RAM access from Cx4 code:<br /><br />&nbsp; &nbsp;* Cartridge RAM is accessed by reading from register $2f to a special<br />&nbsp; &nbsp; &nbsp;internal register, or by writing to register $2f from the same.<br />&nbsp; &nbsp; &nbsp;(Opcode: $612f (read) / $e12f (write))<br />&nbsp; &nbsp;* Access handling appears to be the same as for cart ROM, and the<br />&nbsp; &nbsp; &nbsp;same for reading and writing:<br />&nbsp; &nbsp; &nbsp; issue read/write; alter bus address; wait for complete (or do<br />&nbsp; &nbsp; &nbsp; something else in the meantime)<br />&nbsp; &nbsp;* The number of waitstates can be configured by setting $7f50 bits 2-0.<br /><br />Cartridge bus is only claimed by the Cx4 when DMA or caching occurs, or a bus access<br />is carried out by Cx4 code. At all other times the SNES address+data buses are forwarded<br />to the ROM/RAM even if the Cx4 CPU is running.<br /><br />Flags<br />=====<br /><br />As of yet untouched. higan seems to do a decent job at them already.<br /><br /><br />scribble / internal notes from testing<br />======================================<br /><br />This is probably useless but eh.<br /><br />Cx4 code base: 01:8000<br />PC always 00<br /><br />1 cycle = 50ns<br /><br />255 NOP + 1 STOP in 12.8us -&gt; 50ns/inst&nbsp; -&gt; 1 cycle/inst<br />255 JMP + 1 STOP in 38.4us -&gt; 150ns/inst -&gt; 3 cycles/inst<br />255 MOV -&gt; A/R0 + 1 STOP in 12.8 us -&gt; 50ns/inst -&gt; 1 cycle/inst<br />255 RDWR ROM/RAM + 1 STOP in 12.8 us -&gt; 50ns/inst -&gt; 1 cycle/inst<br />255 RDBUS (612E) -&gt; CRASH<br />127 RDBUS+WAIT + 1 STOP in 32us -&gt; 250ns/pair -&gt; 5 cycles total (WS = 4)<br />127 RDBUS+WAIT + 1 STOP in 19.2us -&gt; 150ns/pair -&gt; 3 cycles total (WS = 2)<br />127 RDBUS+WAIT + 1 STOP in 12.8us -&gt; 100ns/pair -&gt; 2 cycles total (WS = 1)<br />127 RDBUS+WAIT + 1 STOP in 12.8us -&gt; 100ns/pair -&gt; 2 cycles total (WS = 0!)<br />127 RDBUS+INC + 1 STOP in 12.8us + CRASH -&gt; 100ns/pair -&gt; 2 cycles total (WS = 4!!!!!)<br />&nbsp;85 RDBUS+INC+WAIT + 1 STOP in 21.4us -&gt; 250ns/triple -&gt; 5 cycles total (WS = 4)<br />&nbsp;85 WRBUS?!+INC+WAIT + 1 STOP in 21.4us -&gt; 250ns/triple -&gt; 5 cycles total (WS = 4)<br /><br />Page&nbsp; &nbsp; file<br />======================<br />&nbsp;00&nbsp; &nbsp; &nbsp;cx4_00_nop.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />&nbsp;01&nbsp; &nbsp; &nbsp;cx4_08_jmp.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3<br />&nbsp;02&nbsp; &nbsp; &nbsp;cx4_64_mova.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp;03&nbsp; &nbsp; &nbsp;cx4_e0_movr0.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />&nbsp;04&nbsp; &nbsp; &nbsp;cx4_70_rdrom.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />&nbsp;05&nbsp; &nbsp; &nbsp;cx4_68_rdram_r0.bin&nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp;06&nbsp; &nbsp; &nbsp;cx4_6c_rdram_imm.bin&nbsp; &nbsp; &nbsp; 1<br />&nbsp;07&nbsp; &nbsp; &nbsp;cx4_e8_wrram_r0.bin&nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp;08&nbsp; &nbsp; &nbsp;cx4_ec_wrram_imm.bin&nbsp; &nbsp; &nbsp; 1<br />&nbsp;09&nbsp; &nbsp; &nbsp;cx4_40_rdbus_wait.bin&nbsp; &nbsp; &nbsp;?!<br />&nbsp;0a&nbsp; &nbsp; &nbsp;cx4_40_rdbus_nowait.bin&nbsp; &nbsp;1<br />&nbsp;0b&nbsp; &nbsp; &nbsp;cx4_24_skip_unknown.bin&nbsp; &nbsp;1<br />&nbsp;0c&nbsp; &nbsp; &nbsp;cx4_25_skip_nc.bin&nbsp; &nbsp; &nbsp; &nbsp; 1<br />&nbsp;0d&nbsp; &nbsp; &nbsp;cx4_25_skip_c.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp;0e&nbsp; &nbsp; &nbsp;cx4_28_call.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3<br />&nbsp;0f&nbsp; &nbsp; &nbsp;cx4_81_add_shl1.bin&nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp;10&nbsp; &nbsp; &nbsp;cx4_61_bustest.bin&nbsp; &nbsp; &nbsp; &nbsp; - (1)<br />&nbsp;11&nbsp; &nbsp; &nbsp;cx4_61_bustest_1c.bin&nbsp; &nbsp; &nbsp;1+WS (1 cycle 612e; -&gt;WS cycles 1c00)<br />&nbsp;12&nbsp; &nbsp; &nbsp;cx4_61_bustest_40.bin&nbsp; &nbsp; &nbsp;2+crash (1 cycle 612e; 1 cycle 4000)<br />&nbsp;13&nbsp; &nbsp; &nbsp;cx4_61_bustest_401c.bin&nbsp; &nbsp;2+(WS-1) (1 cycle 612e; 1 cycle 4000; -&gt;WS cycles 1c00)<br />&nbsp;14&nbsp; &nbsp; &nbsp;cx4_e0_bustest_401c.bin&nbsp; &nbsp;1<br />&nbsp;15&nbsp; &nbsp; &nbsp;cx4_e1_bustest_401c.bin&nbsp; &nbsp;1<br />&nbsp;16&nbsp; &nbsp; &nbsp;cx4_e12f_bustest_401c.bin 2+WS2-1 !!!!<br />&nbsp;17&nbsp; &nbsp; &nbsp;cx4_612f_bustest_401c.bin 2+WS2-1 !!!!<br />&nbsp;18&nbsp; &nbsp; &nbsp;cx4_e02f_bustest_401c.bin 3 (doesn't work!)<br />&nbsp;19&nbsp; &nbsp; &nbsp;cx4_0a_jmp_p1.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3 (P test not applicable - see 1d+1e)<br />&nbsp;1a&nbsp; &nbsp; &nbsp;cx4_0a_jmp_p2.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3 (P test not applicable - see 1d+1e)<br />&nbsp;1b&nbsp; &nbsp; &nbsp;cx4_0c_jz.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 (not taken), 3 (taken)<br />&nbsp;1c&nbsp; &nbsp; &nbsp;cx4_10_jc.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 (not taken), 3 (taken)<br />&nbsp;1d&nbsp; &nbsp; &nbsp;cx4_3c_ret.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3<br />&nbsp;1e&nbsp; &nbsp; &nbsp;cx4_2a_call_p.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 (not taken), 3 (taken)<br />&nbsp;1f&nbsp; &nbsp; &nbsp;cx4_25_skiptest_nc.bin&nbsp; &nbsp; 1 (not taken), 2 (taken)<br />&nbsp;20&nbsp; &nbsp; &nbsp;cx4_25_skiptest_c.bin&nbsp; &nbsp; &nbsp;1 (not taken), 2 (taken)<br />&nbsp;21&nbsp; &nbsp; &nbsp;cx4_25_skiptest_nc_alljmp.bin<br />&nbsp;22&nbsp; &nbsp; &nbsp;cx4_25_skiptest_c_alljmp.bin<br />&nbsp;23&nbsp; &nbsp; &nbsp;cx4_xx_infloop.bin&nbsp; &nbsp; &nbsp; &nbsp; -<br />&nbsp;24&nbsp; &nbsp; &nbsp;cx4_xx_busloop.bin&nbsp; &nbsp; &nbsp; &nbsp; (for 0x80 flag testing)<br />&nbsp;25&nbsp; &nbsp; &nbsp;cx4_xx_dumpflags.bin&nbsp; &nbsp; &nbsp; (hopefully)<br />&nbsp;26&nbsp; &nbsp; &nbsp;cx4_f0_xchg.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp;27&nbsp; &nbsp; &nbsp;cx4_xx_opdump.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-<br />&nbsp;28&nbsp; &nbsp; &nbsp;cx4_xx_flagloop.bin&nbsp; &nbsp; &nbsp; &nbsp;-<br />&nbsp;29&nbsp; &nbsp; &nbsp;cx4_xx_opdump2.bin&nbsp; &nbsp; &nbsp; &nbsp; -<br />&nbsp;2a&nbsp; &nbsp; &nbsp;cx4_xx_opdump3.bin&nbsp; &nbsp; &nbsp; &nbsp; -<br /><br />opdump:<br /><br />PC&nbsp; &nbsp; &nbsp; &nbsp;regs<br />---------------<br />00&nbsp; &nbsp; &nbsp; &nbsp;04,05,06,07,09,0a,0b,0d,0e,0f,10,11,12,14,15,16<br />28&nbsp; &nbsp; &nbsp; &nbsp;17,18,19,1a,1b,1d,1e,1f,20,21,22,23,24,25,26,27<br />50&nbsp; &nbsp; &nbsp; &nbsp;28,29,2a,2b,2c,2d,30,31,32,33,34,35,36,37,38,39<br />78&nbsp; &nbsp; &nbsp; &nbsp;3a,3b,3c,3d,3e,3f,40,41,42,43,44,45,46,47,48,49<br />a0&nbsp; &nbsp; &nbsp; &nbsp;4a,4b,4c,4d,4e,4f,70,71,72,73,74,75,76,77,78,79<br />c8&nbsp; &nbsp; &nbsp; &nbsp;7a,7b,7c,7d,7e,7f,80,81,82,83,84,85,86,87,88,89<br />f0&nbsp; &nbsp; &nbsp; &nbsp;8a,8b,8c,8d,8e,8f,90<br /><br />opdump2:<br /><br />PC&nbsp; &nbsp; &nbsp; &nbsp;regs<br />---------------<br />00&nbsp; &nbsp; &nbsp; &nbsp;91,92,93,94,95,96,97,98,99,9a,9b,9c,9d,9e,9f,a0<br />28&nbsp; &nbsp; &nbsp; &nbsp;a1,a2,a3,a4,a5,a6,a7,a8,a9,aa,ab,ac,ad,ae,af,b0<br />50&nbsp; &nbsp; &nbsp; &nbsp;b1,b2,b3,b4,b5,b6,b7,b8,b9,ba,bb,bc,bd,be,bf,c0<br />78&nbsp; &nbsp; &nbsp; &nbsp;c1,c2,c3,c4,c5,c6,c7,c8,c9,ca,cb,cc,cd,ce,cf,d0<br />a0&nbsp; &nbsp; &nbsp; &nbsp;d1,d2,d3,d4,d5,d6,d7,d8,d9,da,db,dc,dd,de,df,e0<br />c8&nbsp; &nbsp; &nbsp; &nbsp;e1,e2,e3,e4,e5,e6,e7,e8,e9,ea,eb,ec,ed,ee,ef,f0<br />f0&nbsp; &nbsp; &nbsp; &nbsp;f1,f2,f3,f4,f5,f6,f7<br /><br />opdump3:<br /><br />PC&nbsp; &nbsp; &nbsp; &nbsp;regs<br />---------------<br />00&nbsp; &nbsp; &nbsp; &nbsp;f8,f9,fa,fb,fc,fd,fe,ff<br /><br /></div></div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=3966">ikari_01</a> on Wed Aug 10, 2016 5:59 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3966"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p176888"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176888">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176888#p176888"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 07, 2016 8:07 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1398
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Great work, thank you very much for sharing it with us!<br /><br />I can't say I understand all of your notes, but there's some stuff I should be able to improve. Really surprised that almost all instructions really do run at 20MIPS ... this thing is indeed a beast!<br /><br />When a program cache needs to be loaded, does the Cx4 stall and read in the entire page all at once? Or is it an on-demand thing, fetching the bytes as they execute? Given the way the Cx4 has to pull the ROM off the bus, I assume the former.<br /><br />Also, I'm unsure about emulating the HiROM mapping mode. I want to, but the weird address mangling you mention isn't something I'm going to want to do. If I do support it, I'll probably allow a non-mangled ROM to be used instead. Add something like mode=banked|linear to the cx4 node in the manifest.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p176909"></a>
				<b class="postauthor">ikari_01</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176909">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176909#p176909"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 12:44 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3966.png" width="32" height="28" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 04, 2009 2:28 pm<br /><b>Posts:</b> 141<br /><b>Location:</b> Wunstorf, Germany
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">When a program cache needs to be loaded, does the Cx4 stall and read in the entire page all at once? Or is it an on-demand thing, fetching the bytes as they execute? Given the way the Cx4 has to pull the ROM off the bus, I assume the former.</div>The former is correct. It always reads an entire cache page's worth of bytes (512) from cart ROM/RAM, that is its granularity for the cache tags.<br /><br />Oh, it may be worth mentioning that the Cx4 only acquires the bus when it is actually accessing it. This is a given for buffering/DMA but it also applies to individual bus read instructions carried out by Cx4 code.<br />E.g. with 4 waitstates (as set by RMX2/3), when a $612e;$4000;1c00 happens, it will only acquire the bus and apply its own address for 250ns, and forward the SNES CPU bus at all other times.<br /><br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">Also, I'm unsure about emulating the HiROM mapping mode. I want to, but the weird address mangling you mention isn't something I'm going to want to do.</div>I'd say it is safe to assume a &quot;classical&quot; HiROM mapping, my guess is that the pin was just intended for the Cx4 to respond on HiROM-ish addresses, requiring a dedicated PCB layout for the rest. It is set by a pin, not a register after all.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3966"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p176911"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176911">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176911#p176911"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 12:56 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">ikari_01 wrote:</div><div class="quotecontent"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">When a program cache needs to be loaded, does the Cx4 stall and read in the entire page all at once? Or is it an on-demand thing, fetching the bytes as they execute? Given the way the Cx4 has to pull the ROM off the bus, I assume the former.</div>The former is correct. It always reads an entire cache page's worth of bytes (512) from cart ROM/RAM, that is its granularity for the cache tags.</div><br /><br />I think what he meant to ask is does the Cx4 wait for the entire cache page to be loaded before resuming execution, or does it start executing as soon as the address being jumped to is in the cache? I.e. is jumping to the first address in a 512-byte page any faster than jumping to an address near the end of the page?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p176912"></a>
				<b class="postauthor">ikari_01</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176912">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176912#p176912"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 12:58 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3966.png" width="32" height="28" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 04, 2009 2:28 pm<br /><b>Posts:</b> 141<br /><b>Location:</b> Wunstorf, Germany
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Oh ok. No, the CPU is halted until the entire page has been filled.<br /><br />EDIT: Oh, looks like I forgot to mention one other thing:<br />Writing to $7f48 is used by SNES code to preload at least one of the cache pages. This is required before starting the CPU using $7f4f. Bit 0 determines which of the two pages to write to. Waitstates as usual are according to $7f50 and the source address set at $7f49-$7f4b.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3966"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p176920"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176920">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176920#p176920"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 3:36 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 21004<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">Also, I'm unsure about emulating the HiROM mapping mode. I want to, but the weird address mangling you mention isn't something I'm going to want to do. If I do support it, I'll probably allow a non-mangled ROM to be used instead.</div><br />Agreed. The situation reminds me of the &quot;swapbin&quot; utility. Rearrange the banks of the ROM image into what the program sees, and just assume the HiROM boards have a funny swapped ROM pinout.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p176948"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176948">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176948#p176948"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 11:49 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">In which 65816 banks are the Cx4 registers and internal RAM mapped in each mode (LoROM/HiROM)? The HiROM mapping you've shown for external RAM overlaps with the register/internal RAM mapping.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p176951"></a>
				<b class="postauthor">qwertymodo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176951">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176951#p176951"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 12:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 02, 2012 7:46 am<br /><b>Posts:</b> 771
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Great to see somebody finally figured out pins 74 and 75.  Now we have a complete pinout <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5348"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p176960"></a>
				<b class="postauthor">Markfrizb</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176960">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176960#p176960"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 1:31 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Dec 02, 2012 8:17 am<br /><b>Posts:</b> 500<br /><b>Location:</b> East Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">So if you hold pin75 high, is this basically tri-stating the outputs of the CX4?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5779"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p176967"></a>
				<b class="postauthor">qwertymodo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176967">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176967#p176967"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 2:13 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 02, 2012 7:46 am<br /><b>Posts:</b> 771
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">So if you hold pin75 high, is this basically tri-stating the outputs of the CX4?</div><br /><br />If I read it right, you can still read and write to the Cx4 itself (i.e. the internal registers) but it no longer passes through reads and writes to the ROM/SRAM.  Theoretically, you could have a ROM/RAM dedicated to just the Cx4, and then a separate ROM/RAM for the main cart address space, though you'd probably need a separate address decoder in that case.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5348"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p176983"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176983">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176983#p176983"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 5:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1398
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">qwertymodo wrote:</div><div class="quotecontent">If I read it right, you can still read and write to the Cx4 itself (i.e. the internal registers) but it no longer passes through reads and writes to the ROM/SRAM.  Theoretically, you could have a ROM/RAM dedicated to just the Cx4, and then a separate ROM/RAM for the main cart address space, though you'd probably need a separate address decoder in that case.</div><br /><br />I would think that would make the chip useless. If you don't have ROM, you can't load in program cache pages. If you don't have RAM, you don't really have space to write out any results from your code executing. If you don't have either, you have a 20MHz paperweight.<br /><br />If the Cx4 had its own little pool of program RAM and data RAM, that might be a useful feature to exist.<br /><br />At any rate, I'm definitely not emulating this mode.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p176988"></a>
				<b class="postauthor">ikari_01</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176988">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176988#p176988"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 5:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3966.png" width="32" height="28" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 04, 2009 2:28 pm<br /><b>Posts:</b> 141<br /><b>Location:</b> Wunstorf, Germany
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AWJ wrote:</div><div class="quotecontent">In which 65816 banks are the Cx4 registers and internal RAM mapped in each mode (LoROM/HiROM)? The HiROM mapping you've shown for external RAM overlaps with the register/internal RAM mapping.</div>LoROM: 00-3f:6000-7fff, 80-bf:6000-7fff<br />HiROM: 00-2f:6000-7fff, 80-af:6000-7fff (30-3f, b0-bf is used for cart RAM)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3966"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p176989"></a>
				<b class="postauthor">ikari_01</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176989">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176989#p176989"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 5:29 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3966.png" width="32" height="28" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 04, 2009 2:28 pm<br /><b>Posts:</b> 141<br /><b>Location:</b> Wunstorf, Germany
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">qwertymodo wrote:</div><div class="quotecontent">If I read it right, you can still read and write to the Cx4 itself (i.e. the internal registers) but it no longer passes through reads and writes to the ROM/SRAM.  Theoretically, you could have a ROM/RAM dedicated to just the Cx4, and then a separate ROM/RAM for the main cart address space, though you'd probably need a separate address decoder in that case.</div> This. I could only imagine this to be useful when in need of vastly more ROM than the Cx4 can address itself, or when it's absolutely necessary for the SNES to run from ROM while the Cx4 is working. <br />IIRC the only real world example that uses such a setup is the SPC7110.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3966"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p176991"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p176991">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=176991#p176991"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 08, 2016 5:45 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent"><div class="quotetitle">qwertymodo wrote:</div><div class="quotecontent">If I read it right, you can still read and write to the Cx4 itself (i.e. the internal registers) but it no longer passes through reads and writes to the ROM/SRAM.  Theoretically, you could have a ROM/RAM dedicated to just the Cx4, and then a separate ROM/RAM for the main cart address space, though you'd probably need a separate address decoder in that case.</div><br /><br />I would think that would make the chip useless. If you don't have ROM, you can't load in program cache pages. If you don't have RAM, you don't really have space to write out any results from your code executing. If you don't have either, you have a 20MHz paperweight.</div><br /><br />The Cx4 would have ROM, it just wouldn't be visible to the S-CPU (and vice-versa, the S-CPU's ROM wouldn't be visible to the Cx4). It would be a bit similar to the GSU configuration that's described in documents but not used by any actual games, where SNES-only ROM is mapped in the fast banks.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p177101"></a>
				<b class="postauthor">ikari_01</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p177101">Re: Some tidbits about the Cx4 (attn: byuu, nocash)</a></div><div style="float: right;"><a href="./viewtopic.php?p=177101#p177101"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Aug 10, 2016 6:00 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3966.png" width="32" height="28" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 04, 2009 2:28 pm<br /><b>Posts:</b> 141<br /><b>Location:</b> Wunstorf, Germany
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Updated the notes with some feedback, also I got the pins the wrong way around  <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3966"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=14647"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=14647"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>4</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 47 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14647&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14647&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14647&amp;start=45">4</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=14647&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <a href="./memberlist.php?mode=viewprofile&amp;u=9466">noyen1973</a> and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="14647" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
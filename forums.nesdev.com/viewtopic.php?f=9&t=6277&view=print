<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - SKROM how to?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">SKROM how to?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=6277">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=6277</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mutecity</b> [ Fri Apr 09, 2010 4:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>SKROM how to?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello everyone.
<br />
<br />I have been trying to make a hardware copy of NTRQ.
<br />
<br />It's MMC1 with CHR and PRG with save RAM,
<br />So It must be a SKROM.
<br />
<br />I find a post here saying that the wiring is the same as on SLROM.
<br />I used UCON64 to pad both the PRG and CHR to 128k.
<br />
<br />But I can't get it to work.
<br />anyone know where im going wrong?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri Apr 09, 2010 11:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What's NTRQ? And you shouldn't have to pad the PRG or CHR roms. That might be why it doesn't work.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Apr 09, 2010 11:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />NTRQ is <a href="http://nesdev.com/bbs/viewtopic.php?t=5702" class="postlink">here</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mutecity</b> [ Fri Apr 09, 2010 11:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">What's NTRQ? And you shouldn't have to pad the PRG or CHR roms. That might be why it doesn't work.</div>
<br />
<br />well all I had was 27c010 EPROMs
<br />
<br />well If the files are not paded there are 64k for the PRG and 16k for the CHR,
<br />How would I wire that?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Apr 09, 2010 12:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Do you need a way to save/load the music data?  I'm wanting to work on a way to do that, I have several different solutions actually.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Apr 09, 2010 12:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh, I thought of another thing too.  NTRQ appears to come with a "blank" SRAM file.  I'm assuming if that's needed then NTRQ doesn't do a full sanity check / initialization on the SRAM and so it could perhaps crash if it assumes that something is initialized when it isn't.  If that was true, you would need something like the CopyNES hardware to write the SRAM.  Or another EPROM that does it before you put NTRQ in. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mutecity</b> [ Fri Apr 09, 2010 12:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Do you need a way to save/load the music data?  I'm wanting to work on a way to do that, I have several different solutions actually.</div>
<br />
<br />That would be great! 
<br />
<br />hold on... do you mean save and load data to PC or on the cart?
<br />
<br />If it's on the cart you should have a chat to neil about it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Apr 09, 2010 1:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">NTRQ appears to come with a "blank" SRAM file.</div>
<br />It could just be there because PowerPak's file system code can't create files, and not everyone has Python to run <a href="http://wiki.nesdev.com/w/index.php/Make_sram" class="postlink">make_sram</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Apr 09, 2010 1:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">mutecity wrote:</div><div class="quotecontent"><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Do you need a way to save/load the music data?  I'm wanting to work on a way to do that, I have several different solutions actually.</div><br /><br />That would be great! <br /><br />hold on... do you mean save and load data to PC or on the cart?<br /></div>
<br />
<br />It can be done either way, but the cart I've designed will be able to do both since it will have FlashROM and a USB or RS232 connection.
<br />
<br />You can't save to FlashROM with MMC1 because the address space is used by the mapper for writing, but what you can do is build a TTL-to-RS232 converter (or TTL-USB) and plug it into the NES controller port.  I freely released my part of the source code (the NES-side of things), the XMODEM part was written by another 6502 guy, Daryl Rictor, and is free to use with credit given.  That works with Hyperterminal, which cames with practically every version of windows (vista and win7 I have no idea though).  For the USB cable you just install some drivers (so it uses it like a serial COM port).
<br />
<br />The cartridge I've designed (Squeedo) puts the mapper registers at $5xxx, so the PRG-ROM can be written to freely.  There's 32kB instead of 8kB of SRAM (not battery backed though - you save it to flash).  The next revision will have USB onboard, the "current" version was made in 2004 and I'm just now bringing it back to life to get the basic functionality up and running again, and into the hands of a few developers and testers.  The cart also has some extra sound functions, whenever NTRQ's source is available I definitely want to look into replacing (ideally, adding in), the sound channels with the ones my synth generates.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri Apr 09, 2010 1:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">mutecity wrote:</div><div class="quotecontent"><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">What's NTRQ? And you shouldn't have to pad the PRG or CHR roms. That might be why it doesn't work.</div><br /><br />well all I had was 27c010 EPROMs<br /><br />well If the files are not paded there are 64k for the PRG and 16k for the CHR,<br />How would I wire that?</div>
<br />
<br />Ok, so your problem is that you padded it up to size which is a big no-no. Instead you need to mirror it up to size. Basically you take the PRGROM file, and copy it to itself until it is to size. Example at the command line:
<br />
<br />copy /b PRG.ROM + PRG.ROM BIGPRG.ROM
<br />
<br />For the CHR that you say is 16K, you'll have to copy it onto itself alot more to get it up to 128K, the eprom size you have.
<br />
<br />But you can just go like this:
<br />
<br />copy /b chr.rom + chr.rom bigchr.rom
<br />
<br />Now it's 32K. Delete the CHR.ROM file and rename bigchr.rom to chr.rom and do the command again and it will double in size to 64k. Do the same renaming again and execute the command one more time and you'll have 128K.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Apr 09, 2010 2:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">The cartridge I've designed (Squeedo) puts the mapper registers at $5xxx, so the PRG-ROM can be written to freely.  There's 32kB instead of 8kB of SRAM (not battery backed though - you save it to flash).</div>
<br />Flash at what page size? People don't want to have to read-modify-write an area larger than the NES's RAM to change one byte.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Apr 09, 2010 3:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">The cartridge I've designed (Squeedo) puts the mapper registers at $5xxx, so the PRG-ROM can be written to freely.  There's 32kB instead of 8kB of SRAM (not battery backed though - you save it to flash).</div><br />Flash at what page size? People don't want to have to read-modify-write an area larger than the NES's RAM to change one byte.</div>
<br />
<br />Page size is 64kB.  When I redo the board it will have at least 128kB of RAM, but the workaround for the old Squeedo was the plan to use 2 sectors since this requires no RAM.  When one sector is full, the alternate one is erased, this is the only time it erases any old files.  So depending on how full your save memory is, and yeah if you keep changing a single byte in a large file, you'll see a delay more or less often while saving.  Just a simple wear-leveling type file system.  I had not coded it, but it always seemed simple enough.
<br />
<br />The user/programmer won't have to do much, you would JSR to a routine in the BIOS.  This is pretty much necessary so multiple programs can co-exist with eachother's save files, and also because the hardware will change or be reconfigured to save to other locations.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Sat Apr 10, 2010 1:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Oh, I thought of another thing too.  NTRQ appears to come with a "blank" SRAM file.  I'm assuming if that's needed then NTRQ doesn't do a full sanity check / initialization on the SRAM and so it could perhaps crash if it assumes that something is initialized when it isn't.  If that was true, you would need something like the CopyNES hardware to write the SRAM.  Or another EPROM that does it before you put NTRQ in. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>
<br />
<br />NTRQ checks for a signature in the SRAM file. If not found it "formats" the SRAM file so that it doesn't get upset. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />I only included that blank file as a fall-back in case something did go wrong. You don't actually need it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>arfink</b> [ Sat Apr 10, 2010 2:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I seem to recall seeing a post from a while ago where Memblers said to to an SKROM by using the SLROM rewiring instructions for the CHR chip and UNROM rewiring for the PRG chip. This doesn't seem to make sense to me, is it true?
<br />
<br />See here for reference: <!-- m --><a class="postlink" href="http://nesdev.com/bbs/viewtopic.php?t=216&amp;sid=dd150ae5923f0002fc316288b8ea274a">http://nesdev.com/bbs/viewtopi ... 88b8ea274a</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Apr 10, 2010 2:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The instructions shouldn't depend on the board name but on size of the chips. In that regard, all SLROM, SKROM, TLROM, TKROM, etc... boards will have the exact same instructions, and it makes perfect sense. SGROM, SNROM, etc... board will have the same instructions for the PRG chips, and nothing for the CHR obviously.
<br />
<br />Smaller size chips have standard pinouts so no rewiring needed if the board is the good one (but you will need some rewiring for size changes, for example to convert from NROM-128 to NROM-256).

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
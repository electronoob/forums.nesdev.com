<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - MMC3 Glitches</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">MMC3 Glitches</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9663">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9663</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Asphyx</b> [ Wed Jan 02, 2013 5:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So I finally reprogrammed my first nes cart. I used a MMC3 (SMB 3)as a donor cart and some plcc32 AM29f040b chips for PRG and CHR. I works fine, as I already tested a lot of games on it including Werewolf, Contra Force, Operation C, Bram Stocker's Dracula, Sword Master, Shatterhand etc. All worked very well except for the fact that I'm getting some glitchy graphics. I rewired the chips using documentation from Romlab and from here <!-- m --><a class="postlink" href="http://callanbrown.com/index.php/advanced-mmc3-nes-reproduction">http://callanbrown.com/index.php/advanc ... production</a><!-- m --> . I verified the connections and they are made according to the documentations, so I don't know what is causing this glitches to appear. Can anyone tell me please what could it be? I'm attaching some pix i made while playing werewolf and contra force. Thank you much!

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=266&amp;mode=view"><img src="./download/file.php?id=266&amp;t=1" alt="IMG_0977.JPG" /></a><br />
			<span class="gensmall">IMG_0977.JPG [ 75.61 KiB | Viewed 630 times ]</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=265&amp;mode=view"><img src="./download/file.php?id=265&amp;t=1" alt="IMG_0976.JPG" /></a><br />
			<span class="gensmall">IMG_0976.JPG [ 85.65 KiB | Viewed 630 times ]</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=264&amp;mode=view"><img src="./download/file.php?id=264&amp;t=1" alt="IMG_0973.JPG" /></a><br />
			<span class="gensmall">IMG_0973.JPG [ 87.75 KiB | Viewed 630 times ]</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Asphyx</b> [ Wed Jan 02, 2013 5:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />...and with Contra Force:

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=269&amp;mode=view"><img src="./download/file.php?id=269&amp;t=1" alt="IMG_0992.JPG" /></a><br />
			<span class="gensmall">IMG_0992.JPG [ 80.71 KiB | Viewed 629 times ]</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=268&amp;mode=view"><img src="./download/file.php?id=268&amp;t=1" alt="IMG_0979.JPG" /></a><br />
			<span class="gensmall">IMG_0979.JPG [ 96.99 KiB | Viewed 629 times ]</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=267&amp;mode=view"><img src="./download/file.php?id=267&amp;t=1" alt="IMG_0978.JPG" /></a><br />
			<span class="gensmall">IMG_0978.JPG [ 120.79 KiB | Viewed 629 times ]</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>keropi</b> [ Wed Jan 02, 2013 8:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I get similar glitches with my mmc3 donor cart too:<br /><br /><img src="http://i49.tinypic.com/2m47ux3.jpg" alt="Image" /><br /><br /><img src="http://i46.tinypic.com/x4ek94.jpg" alt="Image" /><br /><br />(yes, it's a cv2 mmc3 hack... also tried Y's III translation and get the same errors)<br />I use &quot;normal&quot; uv eproms with the same site-tutorial info , the instructions are fine since I made some translation carts using as donors the <strong>original</strong> famicom games.<br />At first I though the cart was busted since the glitches appeared after some time, but now <em>*I think*</em> the donor cart must be the <strong>same</strong> pcb-class as the target game or you get errors...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Asphyx</b> [ Wed Jan 02, 2013 8:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I got scrambled screen too when first tested the cart. The image was way scrambled than what you got with Castlevania. At first i thought there is a problem with my CHR chip. However, i solved the problem after i disconnected pin 24 from pin 26 (OE and CE connected, as specified on Romlab) of the PRG and connected it to the ground, and ended up with these minor glitches...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>keropi</b> [ Wed Jan 02, 2013 10:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />interesting.... don't know what to think of it but when I put the english rom inside my famicom Gargolye's Quest II cart (wanted the original look but english game  <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" />  ) it worked perfectly fine with romlab's instructions, that's why <em>I assume</em> you need the exact pcb-class when making repros/translations.<br />I also did his Akumajo Densetsu stuff, I have the famicom cart with the english re-translation which works perfect as well...<br /><br />Maybe someone more knowledgeable here has a more educated idea of what happens  <img src="./images/smilies/icon_question.gif" alt=":?:" title="Question" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Wed Jan 02, 2013 12:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Those are interestng glitches (looking at the contra title screen)  are they constant or do they flicker around?<br /><br />The horizontal one tile wide glitches are indicative of a bad byte or bad fetch of a single byte or two for given tile (probably CHR-ROM).<br /><br />The specific PCB class shouldn't be able to cause issues like this...<br /><br />I'd guess you have something that is slowing down your CHR-ROM's output.  Either they are bad (too slow) or you have some loss of signal integrity due to pin poor connections, mess of flux, etc. Make sure you've got CHR /RD connected to /OE and CHR A13 connected to /CE,  if those were backwards the ROM will be slower and could cause issues.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Asphyx</b> [ Wed Jan 02, 2013 1:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The glitches flicker around and they tend to increase on black background. They appear no matter the color of the textures but they are not constant as they appear at some certain moments and areas of the stage, and as i said they increase their number on black textures. I'll try your suggestions right away! Thank you for your help! <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Wed Jan 02, 2013 4:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />One other thing to check: NO! floating pins.  You shouldn't have a SINGLE one, unless your name is Chuck Norris.  People like to leave things like Vpp and other similar pins floating because they've never seen a problem with doing it before.  It's wrong though, and can cause crazy unexplainable problems.  Unless the datasheet specifically explains that there is a pullup/down internally on that pin (I've yet to see this on a memory though) you should take it to gnd/vcc according to the truth table on the datasheet.  And FYI 'x' or 'don't care' means use vcc or gnd, don't care which one, just pick one cause floating is wrong <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jan 02, 2013 4:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've seen external pull-ups on a memory though. Someone ended up implementing UOROM's fixed bank by <a href="http://forums.nesdev.com/viewtopic.php?p=79402#p79402" class="postlink">jury-rigging an OR function out of a 74HC374 3-state octal D flip-flop's output enable and external pull-ups</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>keropi</b> [ Wed Jan 02, 2013 5:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />In my case the eproms were fine as I tested several known good ones... I even used flash eproms just to be extra sure...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Asphyx</b> [ Wed Jan 02, 2013 5:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, my only floating pins were the WE ones for every chip. I connected them to 5V but still no difference. I think i'll check for mess and poor connections. I forgot to mention that i'm using this homemade programmer <!-- l --><a class="postlink-local" href="http://forums.nesdev.com/viewtopic.php?t=8938">viewtopic.php?t=8938</a><!-- l -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Asphyx</b> [ Sun Jan 20, 2013 8:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Found the source of glitches. Bad 72pin connector. Dammed scavenged tech! Gets you all the time...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Asphyx</b> [ Tue Feb 05, 2013 10:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC3 Glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Solved the glitches problem once and for all. I followed Infiniteneslives' advice and decoupled all the unused pins (CHR A18 and both WE) with 10nf capacitors. I didn't use pull up/down resistors because i wasn't sure of the state of the chip while playing and i thought that decoupling with capacitors should (kinda) satisfy both possibilities. I also connected some 100nf (i think the value is kinda big) capacitors between the VCC and GND of each chip. I'm not sure if it was because of this but i think i noticed some improvement after installing these caps. Anyway, thanks for your time and for the precious advice! Cheers! <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
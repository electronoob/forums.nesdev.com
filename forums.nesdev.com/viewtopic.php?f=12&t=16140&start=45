<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - SPC700 instruction cycle breakdown</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - SPC700 instruction cycle breakdown" href="http://forums.nesdev.com/feed.php?f=12&amp;t=16140" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '4');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=16140';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:30 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />

	<div class="forumrules">
		
			<h3>Forum rules</h3><br />
			Related:<br /><ul><li>For making cartridges of your Super NES games, see <a href="http://forums.nesdev.com/viewforum.php?f=28" class="postlink">Reproduction</a>.</li></ul>
		
	</div>

	<br clear="all" />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=16140&amp;start=45">SPC700 instruction cycle breakdown</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=16140"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>4</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 86 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=12&amp;t=16140&amp;start=30">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=12&amp;t=16140">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=30">3</a><span class="page-sep">, </span><strong>4</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=16140&amp;start=60">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=16140&amp;start=45&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=16140&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=16140&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199358"></a>
				<b class="postauthor">Revenant</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199358">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199358#p199358"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 12:30 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Apr 25, 2015 1:47 pm<br /><b>Posts:</b> 406<br /><b>Location:</b> FL
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, looking again, I indeed had NMI enabled, which did affect the results. I uploaded a new version of the ROM.<br /><br />Also, the reason $DA and higher were failing was because I wasn't waiting on the SMP program to write zero to $F4, so the CPU would write to the port, then the SMP would write $f1 to clear the input port, then the CPU would time out waiting for a response to something that the SMP never actually saw.<br /><br />I fixed that and ended up seeing something strange on the hardware: after writing $CA, $DA, $EA, or $FA, the CPU&lt;-&gt;SMP communication seems to break down and zero is never read from $2140 again. (Instead, I get a constant $CC, which tells me that attempting to restart the SMP program by forcing a jump to $200 may or may not have actually succeeded). See <a href="http://i.imgur.com/myihWvL.png" class="postlink">this screenshot</a><br /><br />The actual values returned when I test each of those four individually (averaged over several runs each):<br />$CA -&gt; $1A40<br />$DA -&gt; $1AE2<br />$EA -&gt; $1CCE<br />$FA -&gt; $2000<br /><br />Hopefully that's still useful. I'm not really sure if the weird port issue that happens after those four specific values is somehow my fault or not.<br /><br /><a href="https://gist.github.com/devinacker/6c578f3ead9bb6b0491be010d520d1fa" class="postlink">Here's</a> the somewhat messy source to the CPU-side program. Hopefully it's clear what it's actually attempting to do. The SMP code is identical to what you already posted.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6992"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199374"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199374">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199374#p199374"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 7:21 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks once again.<br /><br />It looks like on your particular SNES, when TEST is &gt;= $CA the IPL ROM's RAM-clearing loop works (allowing one test to succeed) but some later step, either the IPL ROM comms loop or executing out of RAM, is hanging the SMP.<br /><br />At any rate, it looks like nocash is approximately correct: TEST d6-d7 seems to affect access speed for both I/O ports and IPL ROM, and TEST d4-d5 affects access speed for RAM. TEST = $5A takes almost exactly twice as long as TEST = $0A, and TEST = $FA (when it works without crashing) takes almost exactly ten times as long as TEST = $0A.<br /><br />Now to see if I can implement that in bsnes and get the SMP timer tests (which are apparently more precise?) to match...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199376"></a>
				<b class="postauthor">Revenant</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199376">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199376#p199376"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 7:56 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Apr 25, 2015 1:47 pm<br /><b>Posts:</b> 406<br /><b>Location:</b> FL
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AWJ wrote:</div><div class="quotecontent">It looks like on your particular SNES, when TEST is &gt;= $CA the IPL ROM's RAM-clearing loop works (allowing one test to succeed) but some later step, either the IPL ROM comms loop or executing out of RAM, is hanging the SMP.</div><br /><br />Considering my SNES is an old SHVC-CPU-01, I wonder if running the ROM on consoles with a separate vs. integrated APU would make a difference here. Or maybe my specific unit is just broken in a really unimportant way, who knows.<br /><br />Either way, nice to see that the numbers look good. Hopefully matching it up with the other test ROMs isn't too much of a challenge.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6992"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199390"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199390">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199390#p199390"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 12:16 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1364
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><img src="http://i.imgur.com/RZjGQMo.png" alt="Image" /><br /><br />Well how about that. It looks like nocash bested myself, anomie, and blargg in understanding the TEST register's top four bits. His model also passes all of blargg's test_*speed ROMs. Oh well, blargg at least figured out RAM disable which nocash didn't, heehee.<br /><br />Great catch bringing this stuff up, AWJ. I'd have missed both Overload's PDF and nocash's TEST documentation.<br /><br />This gives us a wonderful test opportunity as well. You know how (x)+ writes don't read the timer? Well if we execute enough (x)+ instructions with RAM at 2 (5 waits, 20% speed) and I/O at 3 (10 waits, 10% speed), then we can find out more information on what that cycle is actually doing. It might even end up being a 100% speed cycle. We can alternate between X fetching $fd and $00 for comparison as well.<br /><br />The hard part will be trying to model emulation of when real hardware will lock up. It definitely varies per SNES, which makes this way harder. I'm guessing our best bet is simply to print a warning to a debugger/terminal saying TEST.d4-d7!=0. But, it'll always be one way to detect an emulator ... just, not so practical once you confirm it's not :P<br /><br />Note: if anyone else is reading this thread and doesn't know ... the reason the numbers don't match perfectly is because the real SNES has separate oscillators for the CPU and APU. These values drift on real hardware. Adjusting the values in emulation subtly change the output values as you would expect. Trying to match the current oscillator rates of 20 year old hardware that's undoubtedly drifted somewhat out of spec and has a natural variance between parts is pretty silly. All we need to do is get really close, which we have.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Agree that that table is probably nonsense. Nocash claims NOP's idle cycle has &quot;RAM timing&quot;, but blargg's test_speed.smc does NOPs and isn't affected by d4-d5 at all.</div><br /><br />I think we can say for sure it's junk now.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199392"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199392">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199392#p199392"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 12:46 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Great work! Are you using the address on the bus (based on Overload) to adjudicate which speed to use for &quot;idle&quot; cycles, or are you treating some of them as always-IO/ROM? And are you applying my 4-for-5 and 8-for-10 hypothesis for the timers?<br /><br />Sorry Revenant, I've got one more test for you to run. This one can use exactly the same CPU-side program as before, only the SMP-side is different:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; mov $f1,#$b0&nbsp; &nbsp; &nbsp; &nbsp; ; enable IPL ROM; clear input ports<br />&nbsp; &nbsp; mov x,#$7f&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; set up x for loop<br />&nbsp; &nbsp; mov $f4,#$00&nbsp; &nbsp; &nbsp; &nbsp; ; clear output port $F4<br />:&nbsp; &nbsp; &nbsp;mov a,$f5<br />&nbsp; &nbsp; beq :-<br />&nbsp; &nbsp; mov $f0,$f4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; set TEST<br />:&nbsp; &nbsp; &nbsp;mul ya&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; (fetch, ?dummy operand?, 7 ?idle?)<br />&nbsp; &nbsp; &nbsp; inc x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; (fetch, ?dummy operand?)<br />&nbsp; &nbsp; bmi :- OR bne :-&nbsp; &nbsp; ; (fetch, operand, 2 ?idle? when branch taken)<br />&nbsp; &nbsp; mov $f0,#$0a&nbsp; &nbsp; &nbsp; &nbsp; ; reset TEST to default<br />&nbsp; &nbsp; jmp $ffc9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; jump direcly to IPL ROM handshake (skip RAM clear)</div><br /><br />I'd like you to test both with BMI and with BNE on line 9, because nocash claims there's a difference between BPL/BVC/BCC/BNE and BMI/BVS/BCS/BEQ (which seems highly unlikely to me, but whatever). Use every value of TEST you can that doesn't lock up your SNES's SMP (including $8A/$9A/$AA/$BA, just in case they work on your SNES with this opcode sequence)<br /><br />The goal is to see if there are any &quot;idle cycles&quot; that are always port/ROM-speed regardless of the address (we're already pretty sure that there aren't any that are always RAM-speed)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199395"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199395">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199395#p199395"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 1:33 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1364
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; Are you using the address on the bus (based on Overload) to adjudicate which speed to use for &quot;idle&quot; cycles, or are you treating some of them as always-IO/ROM?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">uint waitStates&#91;&#93; = {1, 2, 5, 10};<br />if((addr &amp; 0xffc0) == 0xffc0 &amp;&amp; iplromEnable) return waitStates&#91;TEST.bits(6,7)&#93;;&nbsp; //ROM<br />if((addr &amp; 0xfff0) == 0x00f0) return waitStates&#91;TEST.bits(6,7)&#93;;&nbsp; //IO<br />return waitStates&#91;TEST.bits(4,5)&#93;;&nbsp; //RAM</div><br /><br />As per Overload's PDF, I'm acting like there's no such thing as pure idle cycles, except of course for the weird (x)+ case ... not sure what to do with that one.<br /><br />&gt; And are you applying my 4-for-5 and 8-for-10 hypothesis for the timers?<br /><br />I left the timer step as (1 &lt;&lt; TEST.bits(6,7)) + (2 &lt;&lt; TEST.bits(4,5)); because anything else broke test_timer_speed.<br /><br />&gt; Sorry Revenant, I've got one more test for you to run.<br /><br />No interest in that (x)+ test with separate ROM+IO/RAM speeds? :/</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199396"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199396">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199396#p199396"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 1:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">I left the timer step as (1 &lt;&lt; TEST.bits(6,7)) + (2 &lt;&lt; TEST.bits(4,5)); because anything else broke test_timer_speed.</div><br /><br />That means we aren't done yet. Bragging about still passing blargg's timer speed tests when you haven't actually changed the timer behaviour is cheating  <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br />Also, that lookup table should <em>really</em> be static const.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199398"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199398">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199398#p199398"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 1:57 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1364
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">It is static const, don't worry.<br /><br />I wasn't meaning to cheat on timers. I just meant that emulating the wait states passed Revenant's tests without breaking blargg's.<br /><br />The timer thing is trickier. The number of cycles it takes to advance the stage 1 counters is based off both settings, and doesn't seem to care how long RAM vs IO accesses take. In other words, it only cares how many cycles are executed -- not how many wait states each cycle takes.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">(1 &lt;&lt; clockSpeed&#91;ROM/IO speed&#93;) + (2 &lt;&lt; timerSpeed&#91;RAM speed&#93;)<br /><br />00 =&nbsp; 1 wait state<br />01 =&nbsp; 2 wait states<br />10 =&nbsp; 5 wait states<br />11 = 10 wait states<br /><br />(.d7,d6)&nbsp; &nbsp;(.d5,d4)<br /><br />(1 &lt;&lt; 0) + (2 &lt;&lt; 0) =&nbsp; 3<br />(1 &lt;&lt; 0) + (2 &lt;&lt; 1) =&nbsp; 5<br />(1 &lt;&lt; 0) + (2 &lt;&lt; 2) =&nbsp; 9<br />(1 &lt;&lt; 0) + (2 &lt;&lt; 3) = 17<br /><br />(1 &lt;&lt; 1) + (2 &lt;&lt; 0) =&nbsp; 4<br />(1 &lt;&lt; 1) + (2 &lt;&lt; 1) =&nbsp; 6<br />(1 &lt;&lt; 1) + (2 &lt;&lt; 2) = 10<br />(1 &lt;&lt; 1) + (2 &lt;&lt; 3) = 18<br /><br />(1 &lt;&lt; 2) + (2 &lt;&lt; 0) =&nbsp; 6<br />(1 &lt;&lt; 2) + (2 &lt;&lt; 1) =&nbsp; 8<br />(1 &lt;&lt; 2) + (2 &lt;&lt; 2) = 12<br />(1 &lt;&lt; 2) + (2 &lt;&lt; 3) = 20<br /><br />(1 &lt;&lt; 3) + (2 &lt;&lt; 0) = 10<br />(1 &lt;&lt; 3) + (2 &lt;&lt; 1) = 12<br />(1 &lt;&lt; 3) + (2 &lt;&lt; 2) = 16<br />(1 &lt;&lt; 3) + (2 &lt;&lt; 3) = 24</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199401"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199401">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199401#p199401"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 2:57 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">It is static const, don't worry.<br /><br />I wasn't meaning to cheat on timers. I just meant that emulating the wait states passed Revenant's tests without breaking blargg's.<br /><br />The timer thing is trickier. The number of cycles it takes to advance the stage 1 counters is based off both settings, and doesn't seem to care how long RAM vs IO accesses take. In other words, it only cares how many cycles are executed -- not how many wait states each cycle takes.</div><br /><br />Again, you're confusing your emulator implementation with the hardware. My hypothesis is that RAM cycles and port/ROM cycles each clock the timers according to the length of time they individually take, and that formula of yours is simply an artifact of the fact that blargg's test program happens to execute exactly twice as many RAM cycles as it does port/ROM cycles. If you modified the test program so that the ratio of RAM cycles to port/ROM cycles it executed was different, that formula would no longer work (i.e. higan wouldn't produce the same results as hardware in the modified test).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199405"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199405">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199405#p199405"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 3:51 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1364
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Well, my attempts at decoupling it have failed. If I try to tick the timers per wait state, it doesn't matter how many ticks are required per iteration for stage0-&gt;stage1 tick, the test always fails. And it won't tell me the value of the failed test because that would be much too convenient, wouldn't it?<br /><br />Hopefully you'll have better luck than I in getting the timers to work as a side effect of improving TEST.d4-d7 as nocash stated.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199408"></a>
				<b class="postauthor">Revenant</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199408">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199408#p199408"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 5:46 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Apr 25, 2015 1:47 pm<br /><b>Posts:</b> 406<br /><b>Location:</b> FL
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I really should have given the last test ROM a less clever (or at least better-punctuated) name, because thanks to my day job, I keep reading it as &quot;SMPTEsttest&quot;.<br /><br />Anyway,<br /><br /><div class="quotetitle">AWJ wrote:</div><div class="quotecontent">Sorry Revenant, I've got one more test for you to run. This one can use exactly the same CPU-side program as before, only the SMP-side is different:</div><br /><!-- m --><a class="postlink" href="http://revenant1.net/smpidletest_bmi.sfc">http://revenant1.net/smpidletest_bmi.sfc</a><!-- m --><br /><!-- m --><a class="postlink" href="http://revenant1.net/smpidletest_bne.sfc">http://revenant1.net/smpidletest_bne.sfc</a><!-- m --><br /><br /><!-- m --><a class="postlink" href="http://imgur.com/a/E2Q8O">http://imgur.com/a/E2Q8O</a><!-- m --><br /><br />(spoiler alert: they're the same)<br /><br />$CA and up actually work this time (with considerably higher values than I was expecting), but I assume that's due to the test register getting restored before going back to IPL land. $8A, etc. are still problematic.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6992"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199411"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199411">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199411#p199411"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 7:54 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Revenant wrote:</div><div class="quotecontent">I really should have given the last test ROM a less clever (or at least better-punctuated) name, because thanks to my day job, I keep reading it as &quot;SMPTEsttest&quot;.<br /><br />Anyway,<br /><br /><div class="quotetitle">AWJ wrote:</div><div class="quotecontent">Sorry Revenant, I've got one more test for you to run. This one can use exactly the same CPU-side program as before, only the SMP-side is different:</div><br /><!-- m --><a class="postlink" href="http://revenant1.net/smpidletest_bmi.sfc">http://revenant1.net/smpidletest_bmi.sfc</a><!-- m --><br /><!-- m --><a class="postlink" href="http://revenant1.net/smpidletest_bne.sfc">http://revenant1.net/smpidletest_bne.sfc</a><!-- m --><br /><br /><!-- m --><a class="postlink" href="http://imgur.com/a/E2Q8O">http://imgur.com/a/E2Q8O</a><!-- m --><br /><br />(spoiler alert: they're the same)<br /><br />$CA and up actually work this time (with considerably higher values than I was expecting), but I assume that's due to the test register getting restored before going back to IPL land. $8A, etc. are still problematic.</div><br /><br />Yeah, something very strange is happening with $CA and up on your SNES--probably no coincidence that the previous ROM and blargg's test ROMs lock up on your machine.<br /><br />Anyway, let's just look at $0A, $1A, $4A and $5A. Translating the cycle counts into decimal:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">0A (IO 0, RAM 0): 666 cycles<br />1A (IO 0, RAM 1): 930 cycles<br />4A (IO 1, RAM 0): 1061 cycles<br />5A (IO 1, RAM 1): 1324 cycles</div><br /><br />As expected, 5A takes almost exactly twice as many cycles as 0A. 1A and 4A take intermediate amounts of cycles, which means that some of the cycles in the loop are IO/ROM cycles even though the loop is running entirely out of RAM. We can use the ratios of these four cycle counts to determine how many of the cycles are IO/ROM and how many are RAM.<br /><br />Let x be the number of cycles out of the 15 cycles in the loop that are IO/ROM cycles. Then, solve either of these linear equations for x:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">666 * x / 15 + 1324 * (15 - x) / 15 = 930 (solution: x = 8.98)<br />666 * (15 - x) / 15 + 1324 * x / 15 = 1061 (solution: x = 9.00)</div><br /><br />How about that, a nice round number. It looks like 9 cycles are IO/ROM cycles and the remaining 6 cycles are RAM cycles. My educated guess would be that the first [PC+1] cycle of each one-byte instruction is a &quot;real&quot; read cycle (with speed depending on what memory it's accessing), and the additional idle cycles of the <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">mul ya</tt> (and presumably other one-byte instructions that take 3 or more cycles) and the two idle cycles of a taken branch are IO/ROM cycles.<br /><br />I think that's what nocash is getting at with his chart--it's meant to be the number of idle cycles of each instruction that are <em>always</em> IO/ROM cycles. But some of the numbers in his chart don't make a lot of sense (mainly the conditional branches and some of the stack instructions) and will have to be re-checked.<br /><br />Anyway, now we have a straightforward method to test the idle cycles of any SPC700 instruction we want <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> Design a loop that runs only that instruction and ones with known timing, run it with TEST = 0A, 1A, 4A and 5A, and do the ratio math.<br /><br />ETA: Another educated guess I would make is that &quot;always IO/ROM&quot; idle cycles are &quot;real&quot; idle cycles that don't affect internal SMP registers (i.e. don't reset the timers) regardless of what address appears on the external bus.<br /><br />Just for byuu, here's a sequence to test the mov (x)+ and mov (x) instructions:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; mov $f1,#$b0&nbsp; &nbsp; &nbsp; &nbsp; ; enable IPL ROM; clear input ports<br />&nbsp; &nbsp; mov $00,#$00&nbsp; &nbsp; &nbsp; &nbsp; ; set up counter for loop<br />&nbsp; &nbsp; mov $f4,#$00&nbsp; &nbsp; &nbsp; &nbsp; ; clear output port $F4<br />:&nbsp; &nbsp; &nbsp;mov a,$f5<br />&nbsp; &nbsp; beq :-<br />&nbsp; &nbsp; mov $f0,$f4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; set TEST<br />:&nbsp; &nbsp; &nbsp;mov x,#$01&nbsp; &nbsp; &nbsp; &nbsp; ; (fetch, operand)<br />&nbsp; &nbsp; &nbsp; mov a,(x)+ OR mov (x)+,a OR mov a,(x) OR mov (x),a (fetch, ?, ?, ?)<br />&nbsp; &nbsp; &nbsp; inc $00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; (fetch, operand, read, write)<br />&nbsp; &nbsp; bne :-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; (fetch, operand, idle, idle)<br />&nbsp; &nbsp; mov $f0,#$0a&nbsp; &nbsp; &nbsp; &nbsp; ; reset TEST to default<br />&nbsp; &nbsp; jmp $ffc9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; jump direcly to IPL ROM handshake (skip RAM clear)</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199418"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199418">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199418#p199418"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 9:17 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1364
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">As-is (with RAM vs ROM/IO timing supported):<br /><img src="http://i.imgur.com/jppbtPU.png" alt="Image" /><br /><br />With turning the two idle cycles in branch instructions, plus all but one in the MUL instruction to always-ROM/IO:<br /><img src="http://i.imgur.com/vesLNSt.png" alt="Image" /><br />(note that this is not concrete proof that branches are 2, multiplies are 7.)<br /><br />Given that emulation doesn't have the lockup conditions, these test ROMs can go ahead and test 8a,9a,aa,ba. Or if we just want to hone in on these cycle counts, we only really need to test 0a-7a, which seems much more reliable. Clearly ca-fa is behaving pathologically on Revenant's SNES console.<br /><br />But ... <a href="https://www.youtube.com/watch?v=2k0SmqbBIpQ" class="postlink">this is just getting insane.</a> Rabbit holes are fun, but this is so far beyond anything that will ever be useful to any degree. It was bad enough that I/O cycles became read cycles with -very- strange addresses, but now there's some new mystery where some are secretly 'true' I/O cycles (even though the addresses show up on the bus) and some aren't, meaning Overload's logic analyzer can't even reveal this?<br /><br />And apparently nocash's table won't work for us, as there's obvious errors like with BNE/BMI, and no test ROMs to verify any of it. So we pretty much have to scrap the whole thing.<br /><br />Are we really going to try and emulate this exactly, and write test ROMs to time every single SPC700 instruction (well, you can break them into addressing mode groups, so probably 60 or so tests) ... even the ones that are insanely hard to test like TCALL, RTI, etc (and not test SLEEP/STOP since that's impossible)? Is Revenant going to be up for writing all of those tests? Ideally, we need it to be automated, too. Just dumping numbers on the screen is too laborious. Yet due to CPU/APU oscillator differences, we can't do exact matches. So he'll have to use ranged values. If the value is within +/- ~5%, it's a pass. Otherwise it's a failure.<br /><br />And even if we <strong>do</strong> go this far ... we're still not going to know -which- cycles in each instruction are forced to use the ROM/IO timing, and which can use RAM timing. Yes, we can probably guess correctly, but they're gonna be just that ... guesses. But then I suppose it really doesn't matter if side effects are impossible to observe anyway.<br /><br />One thing is ... I'd like to propose we stop calling TEST.d4,d5 &quot;RAM timing&quot; and TEST.d6,d7 &quot;ROM/IO timing.&quot; It doesn't fit with this new extra behavior. Now it's more like &quot;ROM/IO/IDLE timing.&quot; That's too clunky. I think we should change it to d4,d5 = external wait-states/timing, d6,d7 = internal wait-states/timing. Given that the APU RAM is attached to the DSP (or really, just not inside of the SMP itself is all that matters here), and the SMP goes through the DSP to get to it. Whereas IPLROM, I/O, and true idle are all internal to the SMP. Are you guys in agreeance with that? If not, please suggest something better :)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199420"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199420">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199420#p199420"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 9:44 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">Are we really going to try and emulate this exactly, and write test ROMs to time every single SPC700 instruction (well, you can break them into addressing mode groups, so probably 60 or so tests) ... even the ones that are insanely hard to test like TCALL, RTI, etc</div><br /><br />We only need to test the instructions that have at least one &quot;idle&quot; cycle, and if we start seeing obvious patterns we can skip/assume a lot of them. TCALL is not hard to test at all; just disable IPL ROM and put a suitable vector into high RAM. RTI/RTS are easy to test once we know the timing for PUSH.<br /><br />Frankly I think blargg-style pass/fail test ROMs are dumb and harmful, and I'm surprised if you don't agree after all the trouble you've gone through trying to make your Game Boy both pass various blargg tests <em>and</em> run difficult commercial games at the same time. Also, look how bsnes passed all of blargg's SMP $F0 test ROMs for ten years despite having a completely incorrect conception of what the register is actually doing. Test ROMs are all well and good, but doing an opaque series of operations, CRC32ing the results (adding a further layer of opaqueness) and finally printing either &quot;pass&quot; or &quot;fail&quot; doesn't contribute to hardware understanding, it just encourages emulator authors to game the tests.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199421"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199421">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199421#p199421"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Jun 30, 2017 10:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1364
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; We only need to test the instructions that have at least one &quot;idle&quot; cycle, and if we start seeing obvious patterns we can skip/assume a lot of them.<br /><br />Okay, so then the question is ... are we really going to do this? We need to determine:<br /><br />OR1,EOR1 addr:bit<br />MOV1 addr:bit (may not be the same as the former)<br />Absolute indexed<br />Branch<br />Branch on bit<br />CBNE, DBNZ<br />DBNZ Y-- (quite different from the others; though we should really test all four separately)<br />BRK<br />CALL absolute<br />PCALL<br />TCALL<br />CMC<br />DAA,DAS<br />MOVW<br />CMPW<br />CMP immediate to direct page<br />Direct<br />Direct indexed<br />DIV<br />XCN<br />CLR&lt;flag&gt;,SET&lt;flag&gt;<br />Implied instructions (NOP, CMC, TAX [mov x,a], etc)<br />Indexed indirect<br />Indirect indexed<br />(x) (should do reads and writes separate)<br />(x)+ (should do reads and writes separate)<br />(x),(y) (should do CMP (x),(y) separate but could go off other cases from before)<br />JMP indirect,x<br />MUL<br />PUSH<br />POP<br />RTI<br />RTS<br />TSB,TRB<br /><br />STOP (untestable)<br />SLEEP (untestable)<br /><br />The current test from Revenant is no good as there's more than one instruction with idle cycles, and right now, we need to start from nothing if we're gonna do this right. The first test should only test one instruction and be unambiguous.<br /><br />And as you said, certain ones need to be tested before we can test others.<br /><br />&gt; Also, look how bsnes passed all of blargg's SMP $F0 test ROMs for ten years despite having a completely incorrect conception of what the register is actually doing.<br /><br />Well that's emulation in a nutshell. I could be working on higan until I keel over at the age of 97 (as if, have you seen my diet?), and there would still surely be plenty of things completely wrong in the SNES core.<br /><br />Let's not lose sight of the fact we're exhausting weeks of effort here to emulate a TEST register that not one single game, licensed or not, ever actually uses. The only thing that uses TEST are, unsurprisingly, test ROMs.<br /><br />I'm not saying it's not worth the effort. But let's not pretend that this is a serious flaw in emulation either.<br /><br />&gt; Test ROMs are all well and good, but doing an opaque series of operations, CRC32ing the results (adding a further layer of opaqueness)<br /><br />I've ranted plenty about CRC32s. blargg's DMG APU ones in particular that print ten pages of numbers, then a PASS/FAIL CRC32. The source code doesn't have a single comment on what the test is doing, what it's showing, or how to pass it. I get the impression blargg himself didn't actually know.<br /><br />I actually offered a $50 bounty if anyone could help pass his tests in my DMG core, and had no takers. I gave up after a week of trying, but I suspect the true answer is finer grained cycle timing for latching registers and such.<br /><br />&gt; it just encourages emulator authors to game the tests.<br /><br />You can find dozens of rants by me about emudevs being encouraged to pass tests blindly at the expense of working on actually important things; and this situation being hurt by sites like tasvideos ranking emulators based on a raw percentage of how many test ROMs they pass. (And I say this as someone who gets a 100% on the SNES tests list, so you know it's not just me being bitter about scoring badly.)<br /><br />Nevermind that one test is &quot;basic ADD/SUB flags are correct&quot; and the other is &quot;correct number of dummy read cycles versus internal I/O cycles for ADD when using SMP TEST register.&quot; If they had two tests, both would be worth 50% of your total score. That's <em>insane</em>.<br /><br />However ... I still want these test ROMs for emudev use. I don't want to keep a big text document to familiarize myself with each test every time I run it, and what I should generally be expecting, and I want an easy regression tester. I may clean up the SMP core again in another five years, and I want a set of ROMs I can run to hopefully catch any mistakes I've made.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=16140&amp;start=45"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=16140"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>4</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 86 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=12&amp;t=16140&amp;start=30">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=12&amp;t=16140">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=30">3</a><span class="page-sep">, </span><strong>4</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=16140&amp;start=60">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="16140" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - comprehensive SMB1 disassembly</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">comprehensive SMB1 disassembly</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=2987">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=2987</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>10</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Apr 16, 2007 6:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: short answer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bohan wrote:</div><div class="quotecontent">You know MARIO?</div>
<br />Some time ago there was a widely known joke (a retarded one at that) here in Brazil that started with this exact question, but it makes no sense at all in english...
<br />
<br />EDIT: Just to stay on topic: I think disassemblies are great to learn from (research), but I don't see the point in recoding the game...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Apr 16, 2007 6:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The point in recoding the game from scratch piece by piece is to produce a Free game engine on which 100% legal homebrew NES side-scrollers can be built.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Apr 16, 2007 6:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't know, maybe it's just me, but I don't believe in the reuse of side-scrolling engines... If a person does not know how to make their own, I doubt they can adapt one. And if they do know how to make one... well... I am against using code that isn't mine, but I guess some people don't mind...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Apr 16, 2007 6:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">I don't know, maybe it's just me, but I don't believe in the reuse of side-scrolling engines... If a person does not know how to make their own, I doubt they can adapt one.</div>
<br />Tell that to Lunar Magic users and their total conversions of <em>Super Mario World</em>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>doppelganger</b> [ Mon Apr 16, 2007 7:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />To each his own, as I always say.  This comprehensive disassembly is only for those who might be interested in how Super Mario Bros. works.  It isn't going to create interest in disinterested people, and I don't expect it to.  And this modularization effort beneficii has put forth is just one of many possible things that could offshoot from it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Tue Apr 17, 2007 9:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I 100&amp; agree with Tokumaru. I'm against using any code by anyone else if you don't understand it, and if you understand this then make your own because you should be able to do it.
<br />Also, I'm for game engines being optimized to the particular game they're written for. The only reason to re-use a game engine as it would be to make a similar sequel or a different version a game. Quake fans will say the opposite, but since I'm 100% against Quake-like games I'm still coherent in my own ideas.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Apr 17, 2007 9:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">I'm against using any code by anyone else if you don't understand it, and if you understand this then make your own because you should be able to do it.</div>
<br />What operating system and what web browser have you written lately?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Tue Apr 17, 2007 9:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Stupid joke. I meant using code directly for your own project and without using it for learning purpose.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Apr 17, 2007 12:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Heh, I guess Bregalad and I are a special case of "control freaks"... I'd never be able to call "mine" something I didn't know how it worked bit by bit. It's just not mine then. I'd like to be able to say in the end: "This is 100% mine".
<br />
<br />It's like, I don't know, a person who decorates cakes, but can not bake one. If by any chance they are required to make a cake from the start, they'll not be able to. So they can't really say they know how to make cakes, although they may have finished many of them. Same thing happens with games, I guess.
<br />
<br />Some people, however, are only interested in finishing games, and don't want to go through all the trouble of coding it all. I guess they are the target audience of such re-usable engines.
<br />
<br />I don't think this is a bad thing, it's just not for me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>CKY-2K/Clay Man</b> [ Tue Apr 17, 2007 6:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />How would I edit it so that the fireflower doesn't use h-flipping for the right half of the sprite?
<br />
<br />I really want to know this and I think an example of how to change something would help me a little.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>beneficii</b> [ Tue Apr 17, 2007 11:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">doppelganger wrote:</div><div class="quotecontent">Oh, goddamnit.  These things are coming out of the woodwork. <br /><br /> Yeah, I went ahead and fixed that.  Then I ran a complete check on every branch and jump in the file, and could find no others.  But anyway, thanks again for finding those bugs.<br /><br />My methodology was simple: I ran a disassembler on the program rom, then started at the beginning (reset vector) and traced out all the code.  The first version of this file I uploaded was full of gaping code and data holes.<br /><br />Anyway, sometimes I would trace out more code, sometimes I would go over the code with both FCEU and my intuition to figure out what the code did, and sometimes I did both at the same time.  I was able to expedite the process of figuring out the level data format by comparing notes with others who had done SMB1 hacking in the past, and I was able to actually verify that, for the most part, their own ideas were correct.  Some other parts, like enemy data, I had sparse information on.  For the rest of the code, however, I was for the most part completely on my own.<br /><br />It became fully functional (meaning it could be assembled) sometime in February I believe.  But although it was filled with comments, it was almost completely devoid of labels.  So I went back and replaced all the memory locations with addresses.  Some of the values which would have led to confusion I replaced with constants.  This was the part I call the clean-up phase.  Still, I'm only human, and even I overlooked some of them, apparently.<br /><br />Anyway, that's pretty much how I did it.  It's not something that anyone else with a lot of free time and a shitload of patience couldn't do.</div>
<br />
<br />Actually, I'm curious, what did you do to add the labels?  Did you just work them in manually, or did you have a program that added as you disassembled the code?
<br />
<br />Additionally, what do you think of using a code data logger to help disassemble?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Apr 18, 2007 8:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">It's like, I don't know, a person who decorates cakes, but can not bake one. If by any chance they are required to make a cake from the start, they'll not be able to. So they can't really say they know how to make cakes, although they may have finished many of them. Same thing happens with games, I guess.</div>
<br />Yeah, but even someone who know to bake cakes needs some prior ingredients such as that poder made from cereals I have no idea how it's called in english, and you don't want to make your own each time you make a cake, because this would need your own field of weater and you'll have to cultivate it just to make poder from it to eventually bake cakes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Apr 18, 2007 10:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Powder made from grain/cereal is called <a href="http://en.wikipedia.org/wiki/Flour" class="postlink">flour</a>, pronounced like "flower".

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>commodorejohn</b> [ Wed Apr 18, 2007 12:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: short answer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">Bohan wrote:</div><div class="quotecontent">You know MARIO?</div><br />Some time ago there was a widely known joke (a retarded one at that) here in Brazil that started with this exact question, but it makes no sense at all in english...<br /><br />EDIT: Just to stay on topic: I think disassemblies are great to learn from (research), but I don't see the point in recoding the game...</div>
<br />Mind repeating it in Portuguese? I'm just curious.
<br />
<br />Also, I agree with you about code reuse and calling it your work, although limited code pasting can help for educational purposes (my first NES programs had chunks lifted from the MagicKit demo code, then over time I used that as a reference to figure out how everything worked.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Apr 18, 2007 1:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: short answer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">commodorejohn wrote:</div><div class="quotecontent">Mind repeating it in Portuguese? I'm just curious.</div><br />It's too stupid... so, I ask that any other brazilian members around forgive me for propagating something so stupid...<br /><br />It goes something like:<br />-Conhece o Mario?<br />-Que Mario?<br />-Aquele que te comeu atrás do armário!<br /><br />Which translates to:<br />-Do you know Mario? (kids used to ask other kids this question)<br />-What Mario? (this was the most likely answer)<br />-The one that banged you behind the closet! (the first kid, feeling so smart, replied with this)<br /><br />It only "makes sense" because "armário" rhymes with "Mario"... Just search Google Images for "Conhece o Mario?" for some graphical renderings of this "joke". Those are somewhat funny.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">although limited code pasting can help for educational purposes</div>
<br />Sure, but I think people should understand exactly what goes on with a piece of code that was copied and pasted. If they don't, there might just be a case where this code misbehaves (when compared to their expectations) and they are just buying themselves some nasty bugs, while they could have coded something specifically tailored to their needs, and have no nasty surprises.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>10</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
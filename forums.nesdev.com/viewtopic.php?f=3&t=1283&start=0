<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Starting Out</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESemdev" href="http://forums.nesdev.com/feed.php?f=3" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Starting Out" href="http://forums.nesdev.com/feed.php?f=3&amp;t=1283" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=3&amp;t=1283';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sun Sep 21, 2014 9:49 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=3&amp;t=1283">Starting Out</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=1283"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 20 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=1283&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=3&amp;t=1283&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=3&amp;t=1283&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=3&amp;t=1283&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=3&amp;t=1283&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p11221"></a>
				<b class="postauthor">FreakSoftware</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11221">Starting Out</a></div><div style="float: right;"><a href="./viewtopic.php?p=11221#p11221"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 26, 2006 9:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=369.png" width="75" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 26, 2006 9:20 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hi,
<br />
<br />I've always wanted to write an NES emulator and for some reason I've finally just gotten to the point where I actually started. I'm reading everything I can get my hands on (minus the 6502 manual <img src="./images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" />), but I'm having trouble figuring out from a high level perspective of what it is that needs to be written.
<br />
<br />The problem I'm finding is that every document I read either explains some things very detailed or very vaguely, either implying a lot between the lines, or simply expecting you to know everything else. I haven't been able to put together a clear picture of how things work.
<br />
<br />Starting with the 6502 core from iNES, I've written a bit of code implementing some of basics of the memory and PPU, but I'm suck on a general lack of understanding. Some questions I have follow. I feel foolish asking some of these, but I'd rather ask and make a fool of myself than do something completely wrong. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />1) What big pieces need to be written? The CPU is taken care of, then there's the PPU, APU, memory, controllers (not sure how much there is to do there), and then the mappers (which I haven't quite fully digested the details of, but I basically get it). 
<br />
<br />2) When the processor starts running do I need to load data from the cartridge into memory, or does the MMC map straight to the cartridge in such a way that access to certain areas of CPU memory automatically read from the cartridge? 
<br />
<br />3) With the CPU memory, do I really need to mirror chunks of memory or do I just look at every single address coming in and reduce it to a common unmirrored chunk? For example, on the PPU, $4000 - $10000 mirrors $0000-$3FFF. Is there any point at all of having any data in $4000+? Am I correct in guess that with $2008-$3FFF in CPU memory that as long as the address is &gt;= $2000 and &lt;= $2007 then it just looks at the least significant 4 bits? Is this why $3456 is the same as $2006?
<br />
<br />It's actually difficult to formulate specific questions to ask because basically I'm just kind of confused as to where to start. Lets start with these for now, if you will. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Thanks guys</div>

					
						<div class="postbody"><br />_________________<br />Seth</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p11222"></a>
				<b class="postauthor">Disch</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11222">Re: Starting Out</a></div><div style="float: right;"><a href="./viewtopic.php?p=11222#p11222"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 26, 2006 11:25 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=33.png" width="65" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 10, 2004 6:47 pm<br /><b>Posts:</b> 1694
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">FreakSoftware wrote:</div><div class="quotecontent">1) What big pieces need to be written?</div><br /><br />CPU, APU, PPU, mappers.  That's pretty much it.  Basic controllers are very simple to impliment, but nonstandard controllers (like the zapper, ROB, keyboard, other crap) are a bit harder.<br /><br />If you have a CPU running code, a PPU drawing pixels, an APU playing sound, and mappers managing the game -- you have a fully working emulator.<br /><br />PPU should be next highest priority after the CPU.  Even if you don't have input... getting a game's title screen displayed or watching the intro demo of a game is very satisfying.<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">or does the MMC map straight to the cartridge in such a way that access to certain areas of CPU memory automatically read from the cartridge?</div><br /><br />Bingo.<br /><br />You may instinctively think to have a big array of $10000 bytes that hosts the RAM and PRG, but it's actually somewhat harder to manage an emu with that setup.<br /><br />I find it's best to load the ROM's PRG and CHR into their own buffers, then use a series of function pointers to cover certain addressing spaces.<br /><br />I get into more details, and other people have recommendations in this thread:<br /><br /><!-- m --><a class="postlink" href="http://nesdev.com/bbs/viewtopic.php?t=990">http://nesdev.com/bbs/viewtopic.php?t=990</a><!-- m --><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">3) With the CPU memory, do I really need to mirror chunks of memory or do I just look at every single address coming in and reduce it to a common unmirrored chunk?</div><br /><br />Mirroring can easily be accomplished by masking out the appropriate bits of the address.  For example system RAM is at $0000-07FF but is also mirrored at $0800-1FFF.  In an emu this is easily done with something like:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">BYTE read_ram&#40;WORD a&#41;<br />&#123;<br />&nbsp; return RAM&#91; a &amp; 0x07FF &#93;;<br />&#125;<br /></div><br /><br />where 'a' is an address between $0000-$1FFF.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Is there any point at all of having any data in $4000+?</div><br /><br />Not really.  Whenever you're dealing with PPU memory accesses, just mask the address with 0x3FFF to have larger addresses mirror the first 16k.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Am I correct in guess that with $2008-$3FFF in CPU memory that as long as the address is &gt;= $2000 and &lt;= $2007 then it just looks at the least significant 4 bits? Is this why $3456 is the same as $2006?</div>
<br />
<br />Yeah, you have the right idea.  When the CPU accesses $2000-3FFF, only the low <em>3</em> bits are significant.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=33"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p11225"></a>
				<b class="postauthor">FreakSoftware</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11225">Re: Starting Out</a></div><div style="float: right;"><a href="./viewtopic.php?p=11225#p11225"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 1:49 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=369.png" width="75" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 26, 2006 9:20 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Disch wrote:</div><div class="quotecontent">PPU should be next highest priority after the CPU.  Even if you don't have input... getting a game's title screen displayed or watching the intro demo of a game is very satisfying.</div><br /><br />I bet <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I find it's best to load the ROM's PRG and CHR into their own buffers, then use a series of function pointers to cover certain addressing spaces.</div><br /><br />Now all of these map to the CPU's memory, not the PPU's right? The PPU's memory is physical?<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Mirroring can easily be accomplished by masking out the appropriate bits of the address.</div><br /><br />Hey there's a good idea.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Yeah, you have the right idea.  When the CPU accesses $2000-3FFF, only the low <em>3</em> bits are significant.</div>
<br />
<br />Who came up with this stuff? :p
<br />
<br />
<br />
<br />Ok, now just a quick overview of how the whole thing works... 
<br />
<br />The system turns on, and initial states are loaded into all of the registers. The CPU runs for a fixed amount of cycles (113.333 for NTSC etc) then the PPU draws the line to the screen. (Nothing happens during H-Blank?) This happens for 240 lines, then the V-Blank period starts. The CPU runs one cycle, performs (if enabled) an NMI (generated by hardware I assume), then runs the rest of the cycles per line, runs for the rest of the lines, then starts on the new frame. 
<br />
<br />Right? I'll gather my thoughts and re-read some things and ask more tomorrow.... err... today. It's getting early in the morning. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Thanks</div>

					
						<div class="postbody"><br />_________________<br />Seth</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p11227"></a>
				<b class="postauthor">hap</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11227"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11227#p11227"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 3:23 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=115.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Mar 24, 2005 3:17 pm<br /><b>Posts:</b> 354
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hey, it's always nice to see new people starting on an NES emulator.
<br />
<br />I don't think it's a good approach to use an existing 6502 emulator, as it's the core and will make it hard for you to understand how it works. If you won't write your own CPU emulator, at least do some reading on the subject, and you'll see your general lack of understanding isn't as bad as you thought it was.
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Now all of these map to the CPU's memory, not the PPU's right? The PPU's memory is physical?</div><br />CHR is always mapped to the PPU memory area $0000-$1fff. It can also be mapped to the PPU nametable area, with specific mappers, you can worry about that later.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The CPU runs for a fixed amount of cycles (113.333 for NTSC etc) then the PPU draws the line to the screen. (Nothing happens during H-Blank?) This happens for 240 lines, then the V-Blank period starts. The CPU runs one cycle, performs (if enabled) an NMI (generated by hardware I assume), then runs the rest of the cycles per line, runs for the rest of the lines, then starts on the new frame.</div>
<br />This quick overview would be the behaviour of an emulator with a scanline based renderer. Is that what you meant ? On the other hand, a real NES behaves differently; every component runs in parallel, and something does happen during hblank (PPU fetching sprites, and the first 2 tiles of the upcoming scanline).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=115"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p11229"></a>
				<b class="postauthor">dXtr</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11229"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11229#p11229"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 8:38 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=15.gif" width="32" height="32" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Sep 21, 2004 12:11 am<br /><b>Posts:</b> 377<br /><b>Location:</b> Karlshamn (Sweden)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">if this is your first emulation project I would recommend to start a little simpler with writing a Chip8 emulator  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					
						<div class="postbody"><br />_________________<br />Sorry for misspellings, I'm from Sweden ^^</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=15"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p11234"></a>
				<b class="postauthor">FreakSoftware</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11234"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11234#p11234"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 10:55 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=369.png" width="75" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 26, 2006 9:20 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">hap wrote:</div><div class="quotecontent">I don't think it's a good approach to use an existing 6502 emulator, as it's the core and will make it hard for you to understand how it works. If you won't write your own CPU emulator, at least do some reading on the subject, and you'll see your general lack of understanding isn't as bad as you thought it was.</div><br /><br />I'm well aware of how processors in general work (I made one in VDHL and Verilog) as well as assembly (80806 for a class), I just don't think I need to know the specifics of the 6502 right now. I do plan to write the core eventually.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Now all of these map to the CPU's memory, not the PPU's right? The PPU's memory is physical?</div><br />CHR is always mapped to the PPU memory area $0000-$1fff. It can also be mapped to the PPU nametable area, with specific mappers, you can worry about that later.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">This quick overview would be the behaviour of an emulator with a scanline based renderer. Is that what you meant ? On the other hand, a real NES behaves differently; every component runs in parallel</div>
<br />
<br />Of course. I was actually playing with the idea of running separate components in threads just to see if it would work pretty well (I'm looking to emulate more complicated hardware later on, and being able to take advantage of multiple cores would be a big boost). Though I think I'll just get it working in a single thread for now. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />A few more questions:
<br />
<br />A) How does the NES hardware vsync itself with the TV? Or does it work the other way around? hsync?
<br />
<br />B) bah... I'll ask more later, I have to go.</div>

					
						<div class="postbody"><br />_________________<br />Seth</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p11239"></a>
				<b class="postauthor">teaguecl</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11239"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11239#p11239"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 12:48 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=29.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Oct 21, 2004 4:02 pm<br /><b>Posts:</b> 208<br /><b>Location:</b> San Diego
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">FreakSW,
<br />Glad to see another NES enthusiast join the community.  You have a somewhat unique perspective on this since you are starting from scratch.  I was thinking maybe you could help us out by testing our wiki out <a href="http://nesdevwiki.ath.cx/index.php/Main_Page" class="postlink">http://nesdevwiki.ath.cx/index.php/Main_Page</a>
<br />
<br />This is intended to be the collection of all NES technical info we know about.  Theoretically you should be able to implement an emulator from scratch using info from the wiki.  Of course we're not there yet, but you are in a good position to let us know what is missing or confusing.  Regardless, it's a good reference for someone in your position, and it's difficult to find (not linked from main page).  Good luck!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=29"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p11241"></a>
				<b class="postauthor">FreakSoftware</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11241"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11241#p11241"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 1:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=369.png" width="75" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 26, 2006 9:20 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">teaguecl wrote:</div><div class="quotecontent">FreakSW,<br />Glad to see another NES enthusiast join the community.  You have a somewhat unique perspective on this since you are starting from scratch.  I was thinking maybe you could help us out by testing our wiki out <a href="http://nesdevwiki.ath.cx/index.php/Main_Page" class="postlink">http://nesdevwiki.ath.cx/index.php/Main_Page</a></div>
<br />
<br />Oh believe me, I am. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />There's a lot of details, but nothing really explains how it works from the top down in a high level sense and that's one thing I'm trying to put together.</div>

					
						<div class="postbody"><br />_________________<br />Seth</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p11242"></a>
				<b class="postauthor">FreakSoftware</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11242"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11242#p11242"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 2:03 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=369.png" width="75" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 26, 2006 9:20 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Is "one-screen mirroring" just a typical game like Mario Brothers would be?
<br />
<br />A document describing MMC1 says that the chip has four registers:
<br />   Register 0 (reg0) - written to via $8000-$9FFF
<br />   Register 1 (reg1) - written to via $A000-$BFFF
<br />   Register 2 (reg2) - written to via $C000-$DFFF
<br />   Register 3 (reg3) - written to via $E000-$FFFF
<br />
<br />I don't quite follow how you can write to a register via an address range. Can someone explain that, or is the above simply misleading?</div>

					
						<div class="postbody"><br />_________________<br />Seth</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p11243"></a>
				<b class="postauthor">hap</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11243"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11243#p11243"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 2:04 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=115.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Mar 24, 2005 3:17 pm<br /><b>Posts:</b> 354
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">You don't need to create multithreaded software to simulate components running in parallel; a 'catch-up' implementation is sufficient, that has been described on these forums before; run the PPU to catch up with the CPU at each write or read of any PPU register, and at vblank.
<br />
<br />and A): The same way cable tv broadcasting does, by outputting high voltage 'blacker than black' synchronisation and screen transition pulses to let the television screen know when the beam must retrace.
<br />
<br />*edit* that question about MMC1 registers, I suggest you to do some reading on the subject of 'memory mapped I/O'..</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=115"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p11244"></a>
				<b class="postauthor">FreakSoftware</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11244"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11244#p11244"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 2:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=369.png" width="75" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 26, 2006 9:20 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">hap wrote:</div><div class="quotecontent">You don't need to create multithreaded software to simulate components running in parallel;</div><br /><br />No, but running them in parallel a) is interesting b) can run faster.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">and A): The same way cable tv broadcasting does, by outputting high voltage 'blacker than black' synchronisation and screen transition pulses to let the television screen know when the beam must retrace.</div>
<br />
<br />So the signal source just says "VBlank now" and then goes from there. Ok.</div>

					
						<div class="postbody"><br />_________________<br />Seth</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p11245"></a>
				<b class="postauthor">Disch</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11245"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11245#p11245"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 2:42 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=33.png" width="65" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 10, 2004 6:47 pm<br /><b>Posts:</b> 1694
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">FreakSoftware wrote:</div><div class="quotecontent">Is "one-screen mirroring" just a typical game like Mario Brothers would be?</div><br /><br />No.  One screen mirroring is typically for games which want to have a 4-way scrolling screen AND a stationary status bar of some sort.  Examples of this are Conflict, Battletoads, RC Pro Am, etc.<br /><br />Such games that use 1-screen in this manner can reserve the second nametable to hold nothing but the status bar... and have the scrolling map on its own nametable.  This way the map will never overlap the status bar in the nametable as the screen scrolls.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I don't quite follow how you can write to a register via an address range. Can someone explain that, or is the above simply misleading?</div>
<br />
<br />It's the same concept of mirroring.
<br />
<br />The same reason the CPU address $3726 is the same as $2006.  Within a certain range, only certain address bits are used.
<br />
<br />On MMC1, when you write in the $8000-FFFF range, only bits 13-15 are significant for determining which of the 4 MMC1 regs you're writing to (well really only 13 and 14, since bit 15 is always 1).
<br />
<br />ie: writing to $9213 is the same as writing to $8000 because when you mask out bits 13-15 (address &amp; 0xE000), you get the same value ($8000)
<br />
<br />If it helps to think of it this way... you could say that $8001-9FFF are all mirrors of $8000, etc.  (but only when writing)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=33"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p11250"></a>
				<b class="postauthor">FreakSoftware</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11250"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11250#p11250"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 27, 2006 10:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=369.png" width="75" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 26, 2006 9:20 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Disch wrote:</div><div class="quotecontent"><div class="quotetitle">FreakSoftware wrote:</div><div class="quotecontent">Is "one-screen mirroring" just a typical game like Mario Brothers would be?</div><br /><br />No.  One screen mirroring is typically for games which want to have a 4-way scrolling screen AND a stationary status bar of some sort.  Examples of this are Conflict, Battletoads, RC Pro Am, etc.<br /><br />Such games that use 1-screen in this manner can reserve the second nametable to hold nothing but the status bar... and have the scrolling map on its own nametable.  This way the map will never overlap the status bar in the nametable as the screen scrolls.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I don't quite follow how you can write to a register via an address range. Can someone explain that, or is the above simply misleading?</div><br /><br />It's the same concept of mirroring.</div><br /><br />Oh so they literally mean that every one of those address writes to the same register. That's crazy.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">On MMC1, when you write in the $8000-FFFF range, only bits 13-15 are significant for determining which of the 4 MMC1 regs you're writing to (well really only 13 and 14, since bit 15 is always 1).<br /><br />ie: writing to $9213 is the same as writing to $8000 because when you mask out bits 13-15 (address &amp; 0xE000), you get the same value ($8000)<br /><br />If it helps to think of it this way... you could say that $8001-9FFF are all mirrors of $8000, etc.  (but only when writing)</div></div>
<br />
<br />See, now that's a beautiful explanation! You should describe everything in that way so I don't have to ask <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Be back later.</div>

					
						<div class="postbody"><br />_________________<br />Seth</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p11253"></a>
				<b class="postauthor">FreakSoftware</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11253"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11253#p11253"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 28, 2006 1:04 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=369.png" width="75" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 26, 2006 9:20 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Continuing on MMC1 registers... If I understand this correctly, writing to $8000-$FFFF writes to the actual registers in the MMC, but reading from those address reads from the select ROM banks defined by the bits in the registers?  <img src="./images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> 
<br />
<br />So for example if we have Register 0 as 00001100, then a) writing 11111111 to $A234 would actually write 11111111 to register 0, but b) reading from $A234 would read from address $2234 of the low 16 KB PRGROM bank? 
<br />
<br />What ranges in the CPU address range are mapped and which ones are real? Is only $0000 to $07FF real? $2000-$2007 are mapped to PPU registers, $4000 to $401F is kind of sketchy so I don't know about them, but then from $4020 to $10000 it's all mapped somehow onto the cartridge?
<br />
<br />Addresses lower than $2000 only use the least significant 11 bits, addresses from $2000 to $3FFF use the least significant 3 bits... 
<br />
<br />Yeah, I don't get the memory mapping. I'm doing my best sorry 
<br />
<br />A diagram would help. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					
						<div class="postbody"><br />_________________<br />Seth</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p11261"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p11261"></a></div><div style="float: right;"><a href="./viewtopic.php?p=11261#p11261"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 28, 2006 8:19 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 12425<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">FreakSoftware wrote:</div><div class="quotecontent">Continuing on MMC1 registers... If I understand this correctly, writing to $8000-$FFFF writes to the actual registers in the MMC, but reading from those address reads from the select ROM banks defined by the bits in the registers?  <img src="./images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> </div><br />Correct. Consider the CPU's read/write flag to be like another address bit in some cases.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So for example if we have Register 0 as 00001100, then a) writing 11111111 to $A234 would actually write 11111111 to register 0, but b) reading from $A234 would read from address $2234 of the low 16 KB PRGROM bank? </div><br />Almost. The MMC1 is actually loaded through a serial port, so writing 11111111 would reset the mapper. If you want to write 11111 to register 0, then write 00000001 00000001 00000001 00000001 00000001, or 00011111 00001111 00000111 00000011 00000001, etc. (Bits 6 to 1 don't matter.)<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What ranges in the CPU address range are mapped and which ones are real? Is only $0000 to $07FF real? $2000-$2007 are mapped to PPU registers, $4000 to $401F is kind of sketchy so I don't know about them, but then from $4020 to $10000 it's all mapped somehow onto the cartridge?</div>
<br />That's about right.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=3&amp;t=1283"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=1283"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 20 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=1283&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=3&amp;t=1283&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 5 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="1283" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3" selected="selected">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
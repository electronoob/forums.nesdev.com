<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Nintendulator Debug Extensions (NintendulatorDX)</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Nintendulator Debug Extensions (NintendulatorDX)</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=6773">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=6773</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>5</strong> of <strong>7</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yesyesyall</b> [ Wed Mar 30, 2011 12:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />oh, okay. yeah, it does. every time i press F8, it loads the state, but also automatically switches PPU mode one down. (for example, if i am in PAL and load a state, the state is loaded and the mode is switched to Hybrid. if i am in hybrid, the state is loaded and 'wraps around' to NTSC mode.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Mar 31, 2011 1:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">yesyesyall wrote:</div><div class="quotecontent">oh, okay. yeah, it does. every time i press F8, it loads the state, but also automatically switches PPU mode one down. (for example, if i am in PAL and load a state, the state is loaded and the mode is switched to Hybrid. if i am in hybrid, the state is loaded and 'wraps around' to NTSC mode.)</div>
<br />Yeah then you're using an old version. Get the latest dev build from the official Nintendulator site or my debug extension version from the first post in this thread.
<br />
<br />Also, just to remind everybody, this still isn't a generic Nintendulator support thread. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Thu May 19, 2011 12:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">I worked on timer support yesterday. Timers allow you to count and display CPU cycles between two blocks. Currently it's implemented using special registers: $401E/$401F control timer 0 (VirtuaNES compatible) and $402x/$403x control 16 additional timers.</div>
<br />
<br />Would you mind to put that in the top post or the read me or something? I have to go digging through this post every time I wan to use them <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> This is a really great feature that has really helped me a lot.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri May 20, 2011 1:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">I worked on timer support yesterday. Timers allow you to count and display CPU cycles between two blocks. Currently it's implemented using special registers: $401E/$401F control timer 0 (VirtuaNES compatible) and $402x/$403x control 16 additional timers.</div><br /><br />Would you mind to put that in the top post or the read me or something? I have to go digging through this post every time I wan to use them <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> This is a really great feature that has really helped me a lot.</div>
<br />Sure, done. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Fri May 20, 2011 7:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks man! Helpful macros too!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Jul 04, 2011 5:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just an FYI to anybody who has been trying this out in the last couple of weeks or wants to do so in the future:
<br />
<br />Because of recent changes in CC65, if you use the latest snapshot of CC65, NintendulatorDX won't work correctly (you'll get errors in the Debug Information window). A temporary fix is to use an older snapshot (which unfortunately isn't available for download anywhere).
<br />
<br />This is all good in the long run though, as CC65 debug file now supports segment (= banking) and size info for symbols. This means you'll no longer need to type ",w" after symbol names to display 16-bit data as long as the size info is available. It also opens some options for profiling since the size of .proc blocks is known... I hope to put out a new version this month.
<br />
<br />Big thanks to Uz (the author of CC65) for adding all the new features in CC65!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Tue Jul 05, 2011 5:10 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Good to see that this project is moving forward. I didn't touch a line of code in a while so didn't try it yet. Hope I will be able someday.
<br />
<br />I guess I must be repeating myself. getting older <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Wed Jul 06, 2011 1:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Banshaku wrote:</div><div class="quotecontent">Good to see that this project is moving forward. I didn't touch a line of code in a while so didn't try it yet. Hope I will be able someday.<br /><br />I guess I must be repeating myself. getting older <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div>
<br />Thanks!
<br />
<br />Here's the latest version: <!-- m --><a class="postlink" href="http://kkfos.aspekt.fi/downloads/nintendulatordx-0.27.zip">http://kkfos.aspekt.fi/downloads/ninten ... x-0.27.zip</a><!-- m -->
<br />
<br />The fixes/changes are:
<br />
<br />- works with the latest CC65 snapshot
<br />- timer titles no longer need to be prefixed with the ASCII identifier
<br />- watch window will try to automatically set the symbol size (byte/word)
<br />- diagnostics will be shown in two cases: 1) if absolute addressing is used when zero page could have been used (can happen by accident) 2) if an unitialized memory location is accessed, i.e. one that is read before a value has been written to it after reset/power on
<br />
<br />Yes yes... I know there are some legitimate applications to using absolute addressing for zero page addresses (timing stuff) and reading seemingly uninitialized memory (detecting power on/reset). Maybe I'll add an option to turn the feature off later if people find it too annoying.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Thu Jul 28, 2011 6:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks like the debug format change on the latest snapshot of CC65. When I try to load my ROM I get messages like the one below.
<br />
<br />Error:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Debug info error on line 8227: Unexpected input token 27</div><br /><br />Line:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">sym&nbsp; &nbsp;name=&quot;_graphics_chr&quot;,value=0x0,addrsize=absolute,type=label,segment=6</div><br /><br />If I remove the ",segment=6" bit from the end it works.<br /><br />I also get this error:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Debug info error on line 8292: Unexpected input token 28</div><br /><br />For this line:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">sym&nbsp; &nbsp;name=&quot;L0280&quot;,value=0x814C,addrsize=absolute,type=label,size=3,segment=0</div>
<br />
<br />And it works if I remove the ",size=3,segment=0" part.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Jul 28, 2011 7:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">Looks like the debug format change on the latest snapshot of CC65. When I try to load my ROM I get messages like the one below.</div>
<br />Works fine here. Are you sure you're using the latest version of NintendulatorDX (v0.27)? v0.26 had this problem.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Thu Jul 28, 2011 7:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ack! My bad TheFox. I thought that was the problem yeseterday, so I downloaded your latest version. Too bad I forgot to unpack the new version <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> Works like a charm.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Wed Aug 03, 2011 9:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Version 0.28 released. Download link is in the first post.
<br />
<br />Changes:
<br />- Preliminary support for debug messages
<br />- Sources added to the package because somebody ratted my violation of GPL to Quietust... just kidding, no hard feelings. :=) I was going to release the source at some point anyways.
<br />
<br /><strong>How to use debug output feature</strong>
<br />
<br />This feature allows you to do "printf" style debugging from your applications. It works like this: when the emulator detects a write to $4040, it reads a string from PC+3 and outputs it in the debug window. This feature can thus be used from any assembler. Some simple number formatting is also supported.
<br />
<br />Some helper macros for CA65:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.macro debugOut str<br />&nbsp; &nbsp; .local over<br />&nbsp; &nbsp; sta $4040<br />&nbsp; &nbsp; jmp over<br />&nbsp; &nbsp; &nbsp; &nbsp; .byte str, 0<br />&nbsp; &nbsp; over:<br />.endmacro<br /><br />.define fHex8&#40; addr &#41; 1, 0, &lt;&#40;addr&#41;, &gt;&#40;addr&#41;<br />.define fDec8&#40; addr &#41; 1, 1, &lt;&#40;addr&#41;, &gt;&#40;addr&#41;<br />.define fHex16&#40; addr &#41; 1, 2, &lt;&#40;addr&#41;, &gt;&#40;addr&#41;<br />.define fDec16&#40; addr &#41; 1, 3, &lt;&#40;addr&#41;, &gt;&#40;addr&#41;<br /></div><br /><br />Some usage examples:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.zeropage<br />&nbsp; some_var:&nbsp; &nbsp; .res 2<br />&nbsp; other_var:&nbsp; &nbsp;.res 1<br /><br />.code<br />entry:<br />&nbsp; lda #$34<br />&nbsp; sta some_var<br />&nbsp; lda #$12<br />&nbsp; sta some_var+1<br />&nbsp; debugOut &#123;&quot;entry point reached, some_var = &quot;, fHex16&#123;some_var&#125;, &quot;, isn't that exciting?&quot;&#125;<br /><br />&nbsp; lda #123<br />&nbsp; sta other_var<br />&nbsp; debugOut &#123;&quot;other var is &quot;, fDec8&#123;other_var&#125;, &quot; in decimal&quot;&#125;<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Wed Aug 03, 2011 5:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Nice, with an alternate macro that could work on NES too (printing through the controller port to a terminal) - with a significant speed penalty though, if execution time matters.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Aug 04, 2011 8:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Nice, with an alternate macro that could work on NES too (printing through the controller port to a terminal) - with a significant speed penalty though, if execution time matters.</div>
<br />Yeah, I initially intended to supply just a single register to handle character output to the terminal, and let the 6502 side handle all formatting, but opted for this because it takes constant time. Still need to add some more formatting options.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Sep 12, 2011 3:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Version 0.33 released. Download link in the first post as usual.
<br />
<br />Changes are:
<br />- Modified to work with the latest version of CC65 snapshot (I also included this snapshot in the package).
<br />- .proc/.scope profiling information can be collected (see first post).
<br />- Better support for multiple line infos from the same line.
<br />
<br />The profiling feature is very useful/cool IMO. As long as your functions are wrapped in .proc/.endproc, you simply have to write to $4041 (to enable profiling) to get an idea where the hotspots are in your program.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>5</strong> of <strong>7</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
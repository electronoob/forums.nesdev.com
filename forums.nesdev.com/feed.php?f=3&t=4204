<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=4204" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2012-06-12T18:28:36-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=4204</id>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2012-06-12T18:28:36-07:00</updated>
<published>2012-06-12T18:28:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=95438#p95438</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=95438#p95438"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=95438#p95438"><![CDATA[
Reviving this thread because I'm having the same issue with Time Lord.   Nintendulator also gets this game wrong.<br /><br />Edit: Yep, should start at Prerender, not vblank time.  Nintendulator starts at Vblank time, so the game dies.  This is what happens when you copy Nintendulator's methods: you get Nintendulator's bugs <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Tue Jun 12, 2012 6:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jargon]]></name></author>
<updated>2008-08-18T19:33:31-07:00</updated>
<published>2008-08-18T19:33:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=36056#p36056</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=36056#p36056"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=36056#p36056"><![CDATA[
<div class="quotetitle">Fx3 wrote:</div><div class="quotecontent"><br />It worked. The PPU starts near the dummy scanline (20 lines relative to the VBlank).<br /></div><br /><br />Yay, good job, Fx3.<br /><br />Knew it had to be something initialization related. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3449">jargon</a> — Mon Aug 18, 2008 7:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2008-08-16T15:16:44-07:00</updated>
<published>2008-08-16T15:16:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35923#p35923</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35923#p35923"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35923#p35923"><![CDATA[
It worked. The PPU starts near the dummy scanline (20 lines relative to the VBlank).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Sat Aug 16, 2008 3:16 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2008-08-16T14:29:57-07:00</updated>
<published>2008-08-16T14:29:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35920#p35920</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35920#p35920"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35920#p35920"><![CDATA[
<div class="quotetitle">jargon wrote:</div><div class="quotecontent"><br />I thought Strobe initialization accounted for that missing amount of cycles? Am I wrong?<br /></div><br /><br />yes  =P<br /><br />Time Lord appears to be just zeroing all the APU regs during that time.<br /><br />Actually -- change that number to 723 cycles instead of 210 -- just remembered that it's writing to $4014 which is sucking up CPU cycles as well.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Sat Aug 16, 2008 2:29 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jargon]]></name></author>
<updated>2008-08-16T09:29:42-07:00</updated>
<published>2008-08-16T09:29:42-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35903#p35903</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35903#p35903"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35903#p35903"><![CDATA[
I thought Strobe initialization accounted for that missing amount of cycles? Am I wrong?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3449">jargon</a> — Sat Aug 16, 2008 9:29 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2008-08-16T09:15:11-07:00</updated>
<published>2008-08-16T09:15:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35902#p35902</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35902#p35902"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35902#p35902"><![CDATA[
Fx3:  Don't listen to jargon.  He's spouting nonsense.  I don't know why he thinks Prince Of Persia has anything to do with this... or why the game is set up a certain way just because it has "Time" in the title.  The controller has nothing to do with this.<br /><br />I looked at Time Lord again and it looks like you're right... it doesn't acknowledge frame IRQs with even a dummy read!<br /><br />Game looks like it's doing the following:<br /><br />1)  LDA $4015<br /><br />2)  STA $4000,X  (where X=$15) -- results in dummy read of $4015, followed by a write to $4015<br /><br />3)  STA $4017 (where A=$80) -- changes to 5 step mode, but does not disable frame IRQs<br /><br />4)  STA $4015 -- no dummy read (still doesn't do anything to stop IRQs)<br /><br /><br />I figure there's approximately 210 cycles between the STA $4000,X (last frame IRQ acknowledge) and the STA $4017 (mode change).  If the Frame IRQ happens in this window, you'll have a problem.<br /><br />Only thing I can think of that might help would be to adjust your startup time.  IIRC, on powerup, you should start emulation some time shortly after the start of rendering (I forget exactly where -- been so long).  <br /><br />All I can say is try to keep shifting around your startup time until the game starts working.  You shouldn't have to shift much more than 200 cycles in either direction.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Sat Aug 16, 2008 9:15 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jargon]]></name></author>
<updated>2008-08-16T08:49:58-07:00</updated>
<published>2008-08-16T08:49:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35901#p35901</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35901#p35901"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35901#p35901"><![CDATA[
<div class="quotetitle">Fx3 wrote:</div><div class="quotecontent"><br /><div class="quotetitle">jargon wrote:</div><div class="quotecontent">Check if <strong>Strobe</strong> is bound to the same <strong>IRQ</strong> as the timer for <strong>VBlank</strong>.<br /></div><br /><br />- I didn't get what you mean.</div><br /><br />See if the controller is supposed to resynchronize at a specific line after vertical retrace begins after VBlank occurs instead, due to missing something you were supposed to emulate but didn't.<br /><br />Time themed games often have uber controller sync issues.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3449">jargon</a> — Sat Aug 16, 2008 8:49 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2008-08-16T08:01:57-07:00</updated>
<published>2008-08-16T08:01:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35898#p35898</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35898#p35898"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35898#p35898"><![CDATA[
<div class="quotetitle">jargon wrote:</div><div class="quotecontent"><br />Check if <strong>Strobe</strong> is bound to the same <strong>IRQ</strong> as the timer for <strong>VBlank</strong>.<br /></div><br /><br />- I didn't get what you mean.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Sat Aug 16, 2008 8:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jargon]]></name></author>
<updated>2008-08-16T06:44:15-07:00</updated>
<published>2008-08-16T06:44:15-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35894#p35894</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35894#p35894"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35894#p35894"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br /><div class="quotetitle">jargon wrote:</div><div class="quotecontent">I think there may be a similar issue in emulating the <em>"Prince Of Persia : Sands of Time"</em> game for Playstation2 and the upcoming Wii VirtualConsole re-release of the GCN (GameCube) version.<br /></div><br />Screenshots please.</div><br /><br />I said <strong>"may be"</strong>, not <em>"is."</em><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3449">jargon</a> — Sat Aug 16, 2008 6:44 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-08-16T06:40:24-07:00</updated>
<published>2008-08-16T06:40:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35892#p35892</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35892#p35892"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35892#p35892"><![CDATA[
<div class="quotetitle">jargon wrote:</div><div class="quotecontent"><br />I think there may be a similar issue in emulating the <em>"Prince Of Persia : Sands of Time"</em> game for Playstation2 and the upcoming Wii VirtualConsole re-release of the GCN (GameCube) version.<br /></div><br />Screenshots please.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Aug 16, 2008 6:40 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jargon]]></name></author>
<updated>2008-08-16T06:17:52-07:00</updated>
<published>2008-08-16T06:17:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35890#p35890</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35890#p35890"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35890#p35890"><![CDATA[
<div class="quotetitle">Fx3 wrote:</div><div class="quotecontent"><br />- Recap: by default (?), 4017h=00 on power up. This way, a frame IRQ is requested &amp; remains pending until <em>4015h is read</em> or <em>4017h AND 40h</em> is <em>true</em>.<br /><br />- There's a bug in my emulator, or very close to it. The game Time Lord reads 4015h twice too early, clearing the pending frame IRQ, <strong>but</strong> writting 80h into 4017h (switching into mode 1, 5 steps), keeping the pending frame IRQ, which is triggered right after a CLI. So, the IRQs are tripping during the game, messing up the scorebar.<br /><br />- Any suggestions, please?<br /></div><br /><br />Check if <strong>Strobe</strong> is bound to the same <strong>IRQ</strong> as the timer for <strong>VBlank</strong>.<br /><br />I think there may be a similar issue in emulating the <em>"Prince Of Persia : Sands of Time"</em> game for Playstation2 and the upcoming Wii VirtualConsole re-release of the GCN (GameCube) version.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3449">jargon</a> — Sat Aug 16, 2008 6:17 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2008-08-07T19:12:26-07:00</updated>
<published>2008-08-07T19:12:26-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35621#p35621</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35621#p35621"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=35621#p35621"><![CDATA[
- Recap: by default (?), 4017h=00 on power up. This way, a frame IRQ is requested &amp; remains pending until <em>4015h is read</em> or <em>4017h AND 40h</em> is <em>true</em>.<br /><br />- There's a bug in my emulator, or very close to it. The game Time Lord reads 4015h twice too early, clearing the pending frame IRQ, <strong>but</strong> writting 80h into 4017h (switching into mode 1, 5 steps), keeping the pending frame IRQ, which is triggered right after a CLI. So, the IRQs are tripping during the game, messing up the scorebar.<br /><br />- Any suggestions, please?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Thu Aug 07, 2008 7:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2008-07-13T18:59:34-07:00</updated>
<published>2008-07-13T18:59:34-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34866#p34866</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34866#p34866"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34866#p34866"><![CDATA[
<strong>EDIT2:</strong> Found the problem. On powerup, 4017h=00h. If I set it to C0h, the game works fine. Suggestions, please? ^_^;;<br />___________________________________________________<br /><br />- Dummy reads are emulated. If I press reset, everything's fine.<br /><br /><strong>EDIT:</strong> yes, there's an error in the APU IRQ timing reset (test rom). Heh, it wasn't supposed to do, but anyway... :S<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Sun Jul 13, 2008 6:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2008-07-13T15:44:21-07:00</updated>
<published>2008-07-13T15:44:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34860#p34860</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34860#p34860"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34860#p34860"><![CDATA[
Time Lord looks like IRQ trouble.  Specifically, APU Frame IRQs are tripping when they shouldn't be.  The screenshot you showed looks like exactly what happens when APU Frame IRQs trip.<br /><br />Time Lord uses DMC IRQs for the status bar, but never actually disables APU Frame IRQs.  Instead, it switches to 5-step mode some time after start up.  It may require dummy reads to be emulated, as I don't think it explicitly acknowledges APU Frame IRQs ever.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Sun Jul 13, 2008 3:44 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2008-08-07T19:14:16-07:00</updated>
<published>2008-07-04T06:14:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34626#p34626</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34626#p34626"/>
<title type="html"><![CDATA[Ian Bell's Tank &amp; TimeLord]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4204&amp;p=34626#p34626"><![CDATA[
- Any clues what's causing those black lines in the score?<br /><span style="font-size: 75%; line-height: normal">image removed</span><br /><br />- Plus, this occurs with Time Lord:<br /><span style="font-size: 75%; line-height: normal">image removed</span><br /><br />- Any help? Thanks!<br /><br /><strong>EDIT:</strong> Well, TimeLord requires those dummy reads, since 2002:80 is "required" on startup.<br /><br /><strong>EDIT2:</strong> Fixed Ian Bell's tank demo. Still pending TimeLord problem.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Fri Jul 04, 2008 6:14 am</p><hr />
]]></content>
</entry>
</feed>
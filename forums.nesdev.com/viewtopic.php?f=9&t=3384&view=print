<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - 160 kb CHR file</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">160 kb CHR file</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3384">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3384</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Thu May 24, 2007 3:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>160 kb CHR file</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />so i want to put a 160 kb CHR file onto an eprom.  is this possible?  i would assume it could go on a 27c020 eprom,  but how would i increase the size to 256 kb?  i cant just do the copy /b + because it would make it 320 kb.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu May 24, 2007 5:23 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The <a href="http://www.pineight.com/gba/#gbfs" class="postlink">GBFS distribution</a> contains a command-line program called "padbin". Usage:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">padbin 262144 crap.chr</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Thu May 24, 2007 7:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />thanks, it worked!  i dont understand where 262144 came from though?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>baisoku</b> [ Thu May 24, 2007 7:27 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">coinheaven wrote:</div><div class="quotecontent">i dont understand where 262144 came from though?</div>
<br />256 kb * 1024 bytes/kb = 262,144 bytes

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dXtr</b> [ Thu May 24, 2007 7:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />1024 Bytes = 1 KiB
<br />256 KiB = 262144 Bytes
<br />
<br />edit: to slow <img src="./images/smilies/icon_surprised.gif" alt=":o" title="Surprised" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Thu May 24, 2007 10:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The <a href="http://www.pineight.com/gba/#gbfs" class="postlink">GBFS distribution</a> contains a command-line program called "padbin". Usage:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">padbin 262144 crap.chr</div></div>
<br />Does it pad it with a fixed byte or does it mirror the last 32k four times?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu May 24, 2007 11:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It pads with a fixed byte. You could always download it and check the source:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; /* find the amount the file has over the limit */<br />&nbsp; fseek&#40;fp, 0, SEEK_END&#41;;<br />&nbsp; overage = ftell&#40;fp&#41; % factor;<br />&nbsp; if&#40;overage != 0&#41;<br />&nbsp; &#123;<br />&nbsp; &nbsp; unsigned long extension = factor - overage;<br /><br />&nbsp; &nbsp; while&#40;extension &gt;= 1024&#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; fwrite&#40;zeroz, 1, 1024, fp&#41;;<br />&nbsp; &nbsp; &nbsp; extension -= 1024;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if&#40;extension &gt;= 0&#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; fwrite&#40;zeroz, 1, extension, fp&#41;;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &#125;<br /></div>
<br />A 1024 byte buffer called 'zeroz' gets written multiple times to the file. The compiler fills it with the value 0x00, but you can modify the source code to fill 'zeroz' with any other constant byte (such as 0xFF) before it gets to this part.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tormenter</b> [ Thu May 24, 2007 1:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What game are you trying to do?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Thu May 24, 2007 1:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />mario adventure:
<br />
<br /><!-- m --><a class="postlink" href="http://www.romhacking.net/hacks/70/">http://www.romhacking.net/hacks/70/</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>leonk</b> [ Thu May 24, 2007 10:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Don't bother with mario adventure,
<br />
<br />it won't work.  
<br />
<br />There's an interview floating on the web with the original developer discussing the game.  It seems he made a few bad assumptions while making the game.  The game works perfectly on an emulator, but fails on the real thing (the status bar is all messed up, etc).
<br />
<br />Just goes to show you that emulators aren't 100% perfect.  Don't rely only on them when making a new game.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri May 25, 2007 1:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It seems that many hacks like these fail to work on hardware. It's already strange enough that it has 160KB of CHR data.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri May 25, 2007 2:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I know I've tried at least one SMB hack that wouldn't work on an NES.  And it was just a CHR and palette hack!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Fri May 25, 2007 3:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />damn, that sucks, it looks like a really great game too.  thanks for the heads up.
<br />
<br /><div class="quotetitle">leonk wrote:</div><div class="quotecontent">Don't bother with mario adventure,<br /><br />it won't work.  <br /><br />There's an interview floating on the web with the original developer discussing the game.  It seems he made a few bad assumptions while making the game.  The game works perfectly on an emulator, but fails on the real thing (the status bar is all messed up, etc).<br /><br />Just goes to show you that emulators aren't 100% perfect.  Don't rely only on them when making a new game.</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Fri May 25, 2007 6:55 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />i found the article:
<br />
<br /><!-- m --><a class="postlink" href="http://www.vintagecomputing.com/index.php/archives/65">http://www.vintagecomputing.com/index.php/archives/65</a><!-- m -->
<br />
<br />too bad he didnt finish mario adventure 2

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Fri May 25, 2007 12:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Mario Adventure doesn't even work on a NES.  It has major glitches from misuse of the IRQ counter (displays sprites from the wrong pattern table, causing the counter to clock extra times), so the status bar appears too high in the screen, and moves up and down as sprites enter and leave.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
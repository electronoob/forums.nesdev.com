<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=7491" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2011-02-17T01:01:40-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=7491</id>
<entry>
<author><name><![CDATA[frantik]]></name></author>
<updated>2011-02-17T01:01:40-07:00</updated>
<published>2011-02-17T01:01:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74092#p74092</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74092#p74092"/>
<title type="html"><![CDATA[Testing For 32KB WRAM Support in an Emulator]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74092#p74092"><![CDATA[
now that's what i call a "nag screen" <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3841">frantik</a> — Thu Feb 17, 2011 1:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2011-02-17T00:57:37-07:00</updated>
<published>2011-02-17T00:57:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74091#p74091</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74091#p74091"/>
<title type="html"><![CDATA[Testing For 32KB WRAM Support in an Emulator]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74091#p74091"><![CDATA[
<div class="quotetitle">NESICIDE wrote:</div><div class="quotecontent"><br /><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">Everyone else feel free to ignore this thread. *shame*<br /></div><br /><br />Any chance you could put up the generated ROM for those of us with emulators not in your "tested on" list to test with?  <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br />Yes...I'm being lazy.</div><br /><br />Already done <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><!-- m --><a class="postlink" href="http://blog.ntrq.net/?p=494">http://blog.ntrq.net/?p=494</a><!-- m --><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Thu Feb 17, 2011 12:57 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cpow]]></name></author>
<updated>2011-02-16T18:51:47-07:00</updated>
<published>2011-02-16T18:51:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74082#p74082</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74082#p74082"/>
<title type="html"><![CDATA[Testing For 32KB WRAM Support in an Emulator]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74082#p74082"><![CDATA[
<div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent"><br />Everyone else feel free to ignore this thread. *shame*<br /></div><br /><br />Any chance you could put up the generated ROM for those of us with emulators not in your "tested on" list to test with?  <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br />Yes...I'm being lazy.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3705">cpow</a> — Wed Feb 16, 2011 6:51 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2011-02-16T13:45:28-07:00</updated>
<published>2011-02-16T13:45:28-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74055#p74055</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74055#p74055"/>
<title type="html"><![CDATA[Testing For 32KB WRAM Support in an Emulator]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74055#p74055"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />Mmh maybe it's possible that those emulators *does* emulate 32k WRAM, but does only *save* 8k ? If they would emulate 8k or 16k this code would obviously detect that.<br /><br />Also this might seems like a stupid question, but does WRAM0_TEST WRAM1_TEST, WRAM2_TEST and WRAM3_TEST equals the same adress (exept the bank) ? If they're not, it's no wonder why your program doesn't lead to the expected results.  <img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /><br /></div><br /><br />Doh, they were *supposed* to be pointing to the same address. Would help if I'd setup the RAM segment properly in my CA65 config file.<br /><br />Thanks for being the voice of clarity Bregalad. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Everyone else feel free to ignore this thread. *shame*<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Feb 16, 2011 1:45 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2011-02-16T13:28:35-07:00</updated>
<published>2011-02-16T13:28:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74053#p74053</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74053#p74053"/>
<title type="html"><![CDATA[Testing For 32KB WRAM Support in an Emulator]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74053#p74053"><![CDATA[
Mmh maybe it's possible that those emulators *does* emulate 32k WRAM, but does only *save* 8k ? If they would emulate 8k or 16k this code would obviously detect that.<br /><br />Also this might seems like a stupid question, but does WRAM0_TEST WRAM1_TEST, WRAM2_TEST and WRAM3_TEST equals the same adress (exept the bank) ? If they're not, it's no wonder why your program doesn't lead to the expected results.  <img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Wed Feb 16, 2011 1:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2011-02-16T12:43:56-07:00</updated>
<published>2011-02-16T12:43:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74052#p74052</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74052#p74052"/>
<title type="html"><![CDATA[Testing For 32KB WRAM Support in an Emulator]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7491&amp;p=74052#p74052"><![CDATA[
I'm trying to figure a way to test whether emulators *truly* support WRAM bigger than 8K.<br /><br />The test I came up with was to write a different value to the last byte of each 8K WRAM bank and then when all 4 banks have been written, read the values back from each bank and check that they are still set correctly.<br /><br />The logic behind this is that if the WRAM bank-switching is not implemented, the value from each bank will read the same value (the last value that was written) and therefore I can trap that condition.<br /><br />However, I've tested this in FCEUX, NesterJ and VirtuaNES and the odd thing is, despite the fact that I *know* these emulators don't support WRAM&gt;8K, the test doesn't catch.<br /><br />Can anyone suggest another test?<br /><br />Here's the code from my test:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   lda #WRAM_BANK_00<br />   jsr setMMC1r1<br />   lda #$01<br />   sta WRAM0_TEST   <br />   lda #WRAM_BANK_01<br />   jsr setMMC1r1<br />   lda #$02<br />   sta WRAM1_TEST   <br />   lda #WRAM_BANK_02<br />   jsr setMMC1r1<br />   lda #$04<br />   sta WRAM2_TEST   <br />   lda #WRAM_BANK_03<br />   jsr setMMC1r1<br />   lda #$08<br />   sta WRAM3_TEST<br />      <br />   lda #WRAM_BANK_00<br />   jsr setMMC1r1<br />   lda WRAM0_TEST<br />   cmp #$01<br />   bne @lockUp   <br />   lda #WRAM_BANK_01<br />   jsr setMMC1r1<br />   lda WRAM1_TEST<br />   cmp #$02<br />   bne @lockUp<br />   lda #WRAM_BANK_02<br />   jsr setMMC1r1<br />   lda WRAM2_TEST<br />   cmp #$04<br />   bne @lockUp<br />   lda #WRAM_BANK_03<br />   jsr setMMC1r1<br />   lda WRAM3_TEST<br />   cmp #$08<br />   beq @noLock<br /><br />@lockUp:   jmp @lockUp<br />   <br />@noLock:<br /></div><br /><br />'setMMC1r1' sets the WRAM bank<br />WRAM0_TEST is a RAM variable in bank 0<br />WRAM1_TEST is in bank 1 etc<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Feb 16, 2011 12:43 pm</p><hr />
]]></content>
</entry>
</feed>
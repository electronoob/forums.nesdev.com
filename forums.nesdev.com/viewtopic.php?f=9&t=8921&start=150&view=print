<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NROM larger than 32K?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NROM larger than 32K?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=8921">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=8921</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>11</strong> of <strong>13</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>80sFREAK</b> [ Tue May 29, 2012 5:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">80sFREAK wrote:</div><div class="quotecontent">What was the first purpose - get more room for code or get some sort emulator-protection? <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /></div><br /><br />If you can't find the answer to that question in this thread I would imagine your question is impossible to answer.</div>I can see tons of flame and problem to emulate non-standart hardware. Bank switching is an idea, going thru whole 8-bit computers epoche and nothing wrong with it. Yeah, code a bit tricky(if you want to use banks for executable), but nothing is impossible.
<br />
<br />Main disadvantage of this mapper is no "save mode" or either you have to "hide" some RAM under mirrored system RAM

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Tue May 29, 2012 5:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I had zero previous experience with FCEUX and was able to add the support for the mapper in a few hours. So no problem there.
<br />
<br />Linear memory model predates use of bankswitched memory in 8-bit computers. It is only seems 'crazy' for people who get used to the NES design too much, I think.
<br />
<br />I don't think there are too many NROM homebrews that use save RAM, so this problem does not seem too large. Also, no one forces to use the mapper if someone needs save RAM, or more ROM, or anything else. It does not replace anything.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Tue May 29, 2012 6:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">80sFREAK wrote:</div><div class="quotecontent"> Bank switching is an idea</div>
<br />
<br />Why didn't we think of that idea???  Yes!  Now all our problems, they are solved.
<br />
<br />EDIT: Sorry, to understand my sarcasm I assumed you had actually read a few posts on this thread.  Your like the 4-5th person to present bank switching as a solution, when avoiding bank switching was the POINT.
<br />
<br />Q: How do I get to China without flying?
<br />A: Buy a plane ticket and fly there.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue May 29, 2012 7:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">Your like the 4-5th person to present bank switching as a solution</div>
<br />That alone should serve as an indication of how crazy this whole idea is, don't you think?
<br />
<br />I still barely see the point in this extension, but I'm not against you trying to make it work. If someone does find that a slightly expanded NROM is better for their project than the most common/simple mappers, great for them.
<br />
<br />I will problably never use it though, because I really don't like the CHR-ROM constraints of NROM. Even for really small projects I'd rather go with UNROM.
<br />
<br />Like it's been said, nobody is forcing anyone to use specific boards on their projects, so the existence this extension isn't a problem at all. Don't like it, don't use it, like tons of weird mappers out there.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Tue May 29, 2012 7:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">That alone should serve as an indication of how crazy this whole idea is, don't you think?</div>
<br />
<br />No I think it's just ignorant and annoying.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Tue May 29, 2012 7:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">That alone should serve as an indication of how crazy this whole idea is, don't you think?</div><br /><br />No I think it's just ignorant and annoying.</div>
<br />I'm so loosing track of who's on what side.  Can we please calm the "you're nuts" replies down so the thread can return to its original topic?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Tue May 29, 2012 8:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Make bank switching less painful, then you won't need crazy chip select stuff everywhere.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Tue May 29, 2012 10:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The problem is that dealing with bank switching in CC65 is painful. There are two solutions, the EE solution and the programmer solution. The EE solution is "increase the linear range to 46kB", and can be implemented with a single 74 series chip <a href="http://www.mouser.com/search/ProductDetail.aspx?qs=P62ublwmbi%2fwHEOfBckSBA%3d%3d" class="postlink">that costs 18c in single quantities from Mouser</a>. Yes, it's stopgap, but it does in fact solve the problem as outlined. It also doesn't pose any problems for future-proofing — it is not contradictory to any other existing hardware, and "here's 48kB of PRG" couldn't mean anything else.*
<br />
<br />The programmer solution is fixing CC65. While this is not <em>hard</em> it <em>is</em> a huge time sink, and since no one has mentioned that they're now investing effort into fixing CC65, I just don't understand the nay-sayers.**
<br />
<br />It's not even like one'd need to do this the really hard way with the aforementioned call graph: you could implement something like Borland Turbo C++'s Medium (bankswitched code, no bankswitched data, one trampoline in fixed bank, all calls involve bankswitch) or Compact (bankswitched data, no bankswitched code, all data fetches involve bankswitch) memory models.
<br />
<br />But I'm not volunteering, and until one of you do, I'm going to stick by the EE solution.
<br />
<br />*<span style="font-size: 75%; line-height: normal">Someone's going to bring up the "why is it 48kB-2kB instead of 48kB-24 bytes?" complaint I read earlier. Answer: because the hardware implementation is the important implementation. Emulators could implement the full window but the concern is that would encourage the development of programs that would require significantly more expensive hardware.</span>
<br />
<br />**<span style="font-size: 75%; line-height: normal">If a programmer in your employ came up to you and said "Boss, I'm having problems writing bigger games and $simple_change would help me," that your reaction is <em>No! You're going to use the same tools everyone else does!</em> — well, it makes me glad I don't work for you.</span>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Tue May 29, 2012 11:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well said lidnariq I fully agree.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>80sFREAK</b> [ Tue May 29, 2012 11:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">The problem is that dealing with bank switching in CC65 is painful. There are two solutions, the EE solution and the programmer solution. The EE solution is "increase the linear range to 46kB", and can be implemented with a single 74 series chip <a href="http://www.mouser.com/search/ProductDetail.aspx?qs=P62ublwmbi%2fwHEOfBckSBA%3d%3d" class="postlink">that costs 18c in single quantities from Mouser</a>. Yes, it's stopgap, but it does in fact solve the problem as outlined. It also doesn't pose any problems for future-proofing — it is not contradictory to any other existing hardware, and "here's 48kB of PRG" couldn't mean anything else.*<br /><br />The programmer solution is fixing CC65. While this is not <em>hard</em> it <em>is</em> a huge time sink, and since no one has mentioned that they're now investing effort into fixing CC65, I just don't understand the nay-sayers.**<br /><br />It's not even like one'd need to do this the really hard way with the aforementioned call graph: you could implement something like Borland Turbo C++'s Medium (bankswitched code, no bankswitched data, one trampoline in fixed bank, all calls involve bankswitch) or Compact (bankswitched data, no bankswitched code, all data fetches involve bankswitch) memory models.<br /><br />But I'm not volunteering, and until one of you do, I'm going to stick by the EE solution.<br /><br />*<span style="font-size: 75%; line-height: normal">Someone's going to bring up the "why is it 48kB-2kB instead of 48kB-24 bytes?" complaint I read earlier. Answer: because the hardware implementation is the important implementation. Emulators could implement the full window but the concern is that would encourage the development of programs that would require significantly more expensive hardware.</span><br /><br />**<span style="font-size: 75%; line-height: normal">If a programmer in your employ came up to you and said "Boss, I'm having problems writing bigger games and $simple_change would help me," that your reaction is <em>No! You're going to use the same tools everyone else does!</em> — well, it makes me glad I don't work for you.</span></div>
<br />I am fine with 46kB linear memory.
<br />*48kB-2kB is good compromize
<br />**As a boss i would ask, "how it will affect budget?"
<br />
<br /><strong>2 infiniteneslives</strong> If you don't have sea sickness buy ferry ticket <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> 
<br />
<br /><strong>2 cpow</strong> treat it as drinking and fighting in a pub, then drinking again together with folks, who made your nose bleeding <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Wed May 30, 2012 5:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">80sFREAK wrote:</div><div class="quotecontent"><strong>2 cpow</strong> treat it as drinking and fighting in a pub, then drinking again together with folks, who made your nose bleeding <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /></div>
<br />I'll drink to that! <img src="./images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Sun Sep 30, 2012 5:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NROM larger than 32K?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I just checked the <!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/NROM-368">http://wiki.nesdev.com/w/index.php/NROM-368</a><!-- m --> page. It does currently say that NROM-368 can be used for <em>all mappers incapable of banking PRG, such as discrete logic mappers 0 (NROM), 3 (CNROM), 13 (CPROM), 99 (Vs. System), and 184 (Sunsoft 1)</em>.<br /><br />For mapper 99, that's wrong. VS Gumshoe uses Mapper 99 for accessing 40K PRG-ROM (rounded up to 48K in iNES images). The game shares 4016h.bit2 for both selecting a 8K CHR-ROM bank, and simultaneously selecting a 8K PRG-ROM bank.<br /><br />I'll remove Mapper 99 from list of the NROM-368 compatible mappers (on the wiki).<br />If there are other NROM-368 docs elsewhere, please fix them, too.<br />If anybody has already made a NROM-368 game for the VS system, please add some warnings about the problem (to the wiki, and to this thread, and to whom else you might want to warn).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Dec 23, 2012 11:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NROM larger than 32K?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />We now have a <a href="http://wiki.nesdev.com/w/index.php/7485" class="postlink">page for the 7485's pinout</a>, based on a <a href="http://www.alldatasheet.com/datasheet-pdf/pdf/15667/PHILIPS/74HC85.html" class="postlink">datasheet</a>. Does anyone feel like clarifying how A14-A11, M2, and /PRGSEL are routed through this chip?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Mon Jun 10, 2013 10:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re:</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Shiru wrote:</div><div class="quotecontent">...to have a reason to put the support into official FCEUX and other emulators.</div>This is also one reason why I defined mapper 768 submapper 0; hopefully it can be used to run a mapper VM code, in order to test new mappers you make up without modifying the emulator.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Tue Jun 11, 2013 8:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NROM larger than 32K?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />lidnariq: It's true that CC65 has no built in support for bankswitching, but it's not true that you can't do it without modifying CC65 itself.<br /><br />- The easiest way by far is to only place your C code in a single bank, and use the other banks only for data and assembly code. (The simplest way to do this is with AxROM/BNROM and no DPCM samples. This gives you a full 32k to devote entirely to C code, and up to 224k for other things too! It's also a &quot;one chip&quot; mapper, no more complicated than the 48k NROM.)<br /><br />- If you need C code in more than one bank, you can manage a small trampoline in assembly to transition between the banks. Each bank should be linked separately and combined at the end. You will need to link the CRT into both banks, and also remember to reserve enough RAM area for each bank's static variables (this can be policed fairly easily by the linker config for each bank). Also, make sure your startup code does the initialization for all the banks that need it.<br /><br />Maybe it's true that this is too advanced for someone who wants to only write in C, but it really doesn't require rewriting/modifying the compiler to accomplish! The only thing that would require doing that is if you want transparent native bankswitching in C. If you're willing to organize your code and write a little bit of assembly, it's quite doable.<br /><br /><br />This said, I'm not offering this as a counter-argument to oversize NROM, which I think is fine. I just wanted to respond to the idea that bankswitching is somehow unfeasible in CC65.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>11</strong> of <strong>13</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
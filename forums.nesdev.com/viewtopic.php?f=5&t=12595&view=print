<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Is Anyone Willing to Explain This C++ Code?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Is Anyone Willing to Explain This C++ Code?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=5&amp;t=12595">http://forums.nesdev.com/viewtopic.php?f=5&amp;t=12595</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>5</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Fri Apr 03, 2015 6:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Okay, I know what you're all thinking: Why don't you learn C++ yourself? Well, If you find a tutorial that isn't a thousand pages long and is not in book form, then I might consider. (I think koitsu might have showed me something on C? If he did, I don't know where it is.) Basically, this is an extension of the Irem M92 thread, but it's main focus is on translating this, which admittedly, doesn't look like any small task: <!-- m --><a class="postlink" href="https://github.com/OpenEmu/UME-Core/blob/master/mame/src/mame/video/m92.c">https://github.com/OpenEmu/UME-Core/blo ... ideo/m92.c</a><!-- m --> I would be offering money, but I'm 99% sure my mother won't let me...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Fri Apr 03, 2015 7:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's C++ code, not C code.  Looks like it's filled with macros, so you could run it through a preprocessor to get the actual code.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Fri Apr 03, 2015 7:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oops... <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> I'll change the title... I've always wondered, is there such a thing as C+?<br /><br />Edit: What the heck is a preprocessor? And are the macros just like they are in ASM, but instead they use C++, meaning they exist so you don't need to write the same or nearly the same code over and over again?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Fri Apr 03, 2015 7:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you're building with GCC, you can run CPP (c preprocessor) on it and see the result of all Preprocessor directives.  This will perform all the #includes and everything, so you might have to cut all that stuff out first before reading it.  I think that will also remove the comments as well.<br /><br />I think you invoke it by &quot;cpp file.c &gt; output.txt&quot; or something like that.  You need GCC (mingw or cygwin) installed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jarhmander</b> [ Fri Apr 03, 2015 7:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hmm, the <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">paletteram_xBBBBBGGGGGRRRRR_word_w</tt> would score quite high as the longest function name. Hopefully it's used only once.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Fri Apr 03, 2015 7:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />C++ mangled function names make that look short.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Fri Apr 03, 2015 7:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, at least we now it uses the same color setup as the SNES. <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /><br /><br />Oh, you know, one thing I don't understand is how there was no real reference used in the making of this. Wouldn't it have been easier to make a sheet with all the hardware info before making this? Do you think that maybe I should email the author of the page to see if he made one as a reference?<br /><br />Edit: Oh, a random observation: When System 16 said the Irem M107 had twice as many colors, it must have meant colors total instead of color palettes because it has the same number of color palettes as the M92. It would probably have been a lot easier to do that instead of increasing the color palettes, seeing that every color in CGRAM (or whatever it's called here) has an unused bit for every color. I wonder if it's like the Neo Geo in that it has a half brightness bit, or if it has an extra green. I personally like the half brightness better.<br /><br />Edit: I emailed the author of the page. We'll see what happens...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jarhmander</b> [ Fri Apr 03, 2015 9:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">C++ mangled function names make that look short.</div><br />Well yeah, when you look at nested templates, the result is quite surprising!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drag</b> [ Fri Apr 03, 2015 11:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Jarhmander wrote:</div><div class="quotecontent"><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">C++ mangled function names make that look short.</div><br />Well yeah, when you look at nested templates, the result is quite surprising!</div><br />Yep! So thank god we have the mangled names so we don't have to look at those really long names, huh?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Sat Apr 04, 2015 12:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Good news! I've contacted the person who made that code, so I'm at least one step closer to figuring this whole thing out. He showed me this: <!-- m --><a class="postlink" href="https://github.com/OpenEmu/UME-Core/blob/master/mame/src/mame/drivers/m92.c">https://github.com/OpenEmu/UME-Core/blo ... vers/m92.c</a><!-- m --> which helps explain things a ton. I've been looking at 80186 related stuff, and I found this which I <em>think</em> is what I'm looking for. It's supposed to be the instruction set for it.<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=2973">IntelCodeTable.pdf</a> [146.9 KiB]
			</span><br />
			<span class="gensmall">Downloaded 120 times</span>
		

		<br />
	</div><br />If this is correct, it actually doesn't look that bad! It actually seems to share quite a bit of similarities (at least compared to ARM. I actually looked at the 68000 and it left my head spinning.) with the 65816 instruction set. Well, at least I don't have to deal with things like this anyway! (I now know why x86 is considered a mess.)<br /><br /><div class="quotetitle">Wikipedia wrote:</div><div class="quotecontent">Instruction: VFMADDSUBPD xmm0, xmm1, xmm2, xmm3<br />Opcode: C4E3 WvvvvL01 5D /r /is4<br />Meaning: Fused Multiply-Alternating Add/Subtract of Packed Double-Precision Floating-Point Values </div><br />One thing though, do I need to find a special 80186 assembler, or will any x86 assembler do as long as I don't use any instructions that come after? (By judging instruction earlier, I don't think I'd even want to.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Joe</b> [ Sat Apr 04, 2015 1:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Why are you linking to the OpenEmu copy of MAME instead of... actual MAME? <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /> (There probably aren't any significant differences between the two, but...)<br /><br />That instruction set isn't very complete. It's missing a few instructions, like movsb and movsw, and it doesn't cover addressing modes or segmentation at all. If someone made the same chart for 68000, you'd think it looked like 65816 too.<br /><br />As far as assemblers go, I recommend NASM or YASM. They can easily be configured to generate only valid 80186 opcodes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Apr 04, 2015 2:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent"><div class="quotetitle">Wikipedia wrote:</div><div class="quotecontent">Instruction: VFMADDSUBPD xmm0, xmm1, xmm2, xmm3<br />Opcode: C4E3 WvvvvL01 5D /r /is4<br />Meaning: Fused Multiply-Alternating Add/Subtract of Packed Double-Precision Floating-Point Values </div><br /></div>I told you to ignore things newer than 8086 ;p<br />MMX and SSE instructions are ... really an entirely different universe than the older ones.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">One thing though, do I need to find a special 80186 assembler, or will any x86 assembler do as long as I don't use any instructions that come after?<br /></div>Almost all assemblers have a directive that will specify the instruction set. (e.g. nasm has &quot;CPU 80186&quot;). One almost-unusable instruction present in the original 8088/8086 that they removed from later cores is <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">POP CS</tt>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Sat Apr 04, 2015 2:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Joe wrote:</div><div class="quotecontent">Why are you linking to the OpenEmu copy of MAME instead of... actual MAME?  (There probably aren't any significant differences between the two, but...)</div><br />The guy who made it pointed me to it. I don't think a document like this is even on actual mame.<br /><br /><div class="quotetitle">Joe wrote:</div><div class="quotecontent">That instruction set isn't very complete. It's missing a few instructions, like movsb and movsw, and it doesn't cover addressing modes or segmentation at all. If someone made the same chart for 68000, you'd think it looked like 65816 too.</div><br />Ok. It looked rather small. (One can dream. <img src="./images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" /> ) I guess I should just stick with this? <!-- m --><a class="postlink" href="http://en.wikipedia.org/wiki/X86_instruction_listings">http://en.wikipedia.org/wiki/X86_instruction_listings</a><!-- m --><br /><br /><div class="quotetitle">Joe wrote:</div><div class="quotecontent">As far as assemblers go, I recommend NASM or YASM. They can easily be configured to generate only valid 80186 opcodes.</div><br />I'm going to take a look...<br /><br />Oh yeah, and lidnariq, the thing is so preposterously large, I almost though someone put it in the webpage as a joke, until I saw other ones just like it... The instruction is so complex, that even when I read the description, I still understand what it does.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Apr 04, 2015 2:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The wikipedia reference isn't very good for actually programming...<br />I'd try a few of the other search results for &quot;8086 instruction set&quot;, such as<br /><!-- m --><a class="postlink" href="http://www.gabrielececchetti.it/Teaching/CalcolatoriElettronici/Docs/i8086_instruction_set.pdf">http://www.gabrielececchetti.it/Teachin ... on_set.pdf</a><!-- m --><br /><!-- m --><a class="postlink" href="http://www.ing.unlp.edu.ar/electrotecnia/arcom1/UNDERSTANDING8085_8086_cap14_Instruccion_set.pdf">http://www.ing.unlp.edu.ar/electrotecni ... on_set.pdf</a><!-- m --><br /><!-- m --><a class="postlink" href="http://mai.kvk.uni-obuda.hu/documents/tantargy/8086-instruction-set-overview.pdf">http://mai.kvk.uni-obuda.hu/documents/t ... erview.pdf</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Sat Apr 04, 2015 2:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is Anyone Willing to Explain This C++ Code?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The one thing though is that I'm looking at the 80816, so there are a bit more instructions, but I could still probably use those. I looked at NASM, but after I opened the rar file, a billion files spewed out, and I couldn't even find the exe/bat file. I then got YASM, and it was only one file. I think you know which one I chose. <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>5</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
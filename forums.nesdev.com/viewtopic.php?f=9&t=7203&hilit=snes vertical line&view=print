<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Cheap upscaler?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Cheap upscaler?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=7203">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=7203</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Nov 29, 2010 1:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Cheap upscaler?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Anybody have suggestions for cheap upscalers to get the NES 240p composite signal up to like 480p, maybe VGA? My HDTV thinks the signal is interlaced so it interlaces every other frame together to a 25 FPS (PAL) picture. This doesn't look TOO bad but it's still annoying when there's intentional flickering etc.
<br />
<br />Question #2, how difficult would it be to build a device like that from scratch? I should be able to get Altera DE2 FPGA board from school, could it be used for the signal conversion? I'm thinking it could make a good learning experience. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamburgler</b> [ Mon Nov 29, 2010 6:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Have you taken a look at the HD Box Pro or its clones? For the price, they're rather nice for properly upscaling 240p to VGA.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Mon Nov 29, 2010 5:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Cheap upscaler?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">uestion #2, how difficult would it be to build a device like that from scratch? I should be able to get Altera DE2 FPGA board from school, could it be used for the signal conversion? I'm thinking it could make a good learning experience. :)</div>
<br />Not too too difficult. Does your TV have VGA input? If so the DE2 has everything you need.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Tue Nov 30, 2010 4:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Cheap upscaler?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Hamburgler wrote:</div><div class="quotecontent">Have you taken a look at the HD Box Pro or its clones? For the price, they're rather nice for properly upscaling 240p to VGA.</div><br />Nope. I Googled it now and it seems decent. My only question is can I be sure it handles NES signal correctly? Also I can't find info on their site if it has composite input or only component.<br /><br /><div class="quotetitle">kyuusaku wrote:</div><div class="quotecontent"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">uestion #2, how difficult would it be to build a device like that from scratch? I should be able to get Altera DE2 FPGA board from school, could it be used for the signal conversion? I'm thinking it could make a good learning experience. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br />Not too too difficult. Does your TV have VGA input? If so the DE2 has everything you need.</div>
<br />Cool, thanks, I think I'll give it a go.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamburgler</b> [ Tue Nov 30, 2010 6:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You're right, it doesn't take composite. Nevermind. :)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Oct 14, 2011 9:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Cheap upscaler?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><div class="quotetitle">kyuusaku wrote:</div><div class="quotecontent"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">uestion #2, how difficult would it be to build a device like that from scratch? I should be able to get Altera DE2 FPGA board from school, could it be used for the signal conversion? I'm thinking it could make a good learning experience. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br />Not too too difficult. Does your TV have VGA input? If so the DE2 has everything you need.</div><br />Cool, thanks, I think I'll give it a go.</div>
<br />I figured I'd post a little status update. I did get the DE2, and fortunately a demo called DE2_TV was included with it, which was supposed to do almost exactly what I needed. Unfortunately the demo didn't work. From some googling I found out that there are different versions of the demo for different PCB revisions, but I couldn't get either one of them to work.
<br />
<br />Yesterday I found <a href="http://www.eecg.toronto.edu/~jayar/ece241_08F/AudioVideoCores/vin/vin.html" class="postlink">another example</a> online. This one actually worked, so at least I know the video decoder chip works. However this demo uses the internal FPGA RAM for the frame buffer, so it can only do 1 bit per RGB component at 320x240 resolution, or a bunch more at 160x120 (which obviously doesn't cut it).
<br />
<br />So, now I have to either figure out how to get the DE2_TV example to work, or comb through this second example <span class="posthilit">line</span> by <span class="posthilit">line</span> to figure out exactly how it works and if it's possible to modify it for my needs. I'm wondering whether it would be possible to do the conversion from ITU656 bitstream to VGA in more or less real time, without using big intermediary buffers, since I don't need to deinterlace the signal...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri Oct 14, 2011 10:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's weird; if they're not explicitly doing any deinterlacing why are they bothering with a framestore? I guess for noisy analog NTSC input you might not be able to just use a fake 2x PLL on the hsync output, but because the NES's crystal is stable enough you should be able to get away with just storing two lines of video from the NES and drawing back from them at double rate.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Oct 17, 2011 2:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">That's weird; if they're not explicitly doing any deinterlacing why are they bothering with a framestore? I guess for noisy analog NTSC input you might not be able to just use a fake 2x PLL on the hsync output, but because the NES's crystal is stable enough you should be able to get away with just storing two lines of video from the NES and drawing back from them at double rate.</div>
<br />It does kind of deinterlace by dropping all the even fields, but mostly I think they just wanted to demo their VGA controller.
<br />
<br />Anyway, I got my ghetto upscaler/scandoubler working, it's quite cool. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> The colors look pretty crappy (oversaturated) though for some reason. I used the YCrCb-&gt;RGB conversion module from the example I linked earlier, I'll have to look into it later to see if there's a problem with it. I should also add PAL support.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Oct 17, 2011 4:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I see no reason why a <span class="posthilit">line</span>-doubling 240p composite to 480p RGB/component converter should need take more than 1 KB of RAM. If you sample an NTSC composite signal at 14.318 MHz (four times Fsc), there are 746 samples across the width of in the clean aperture. Perhaps you might want to do comb filtering or interpolation, but you still wouldn't need more than 4 KB.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Oct 17, 2011 8:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">I see no reason why a <span class="posthilit">line</span>-doubling 240p composite to 480p RGB/component converter should need take more than 1 KB of RAM. If you sample an NTSC composite signal at 14.318 MHz (four times Fsc), there are 746 samples across the width of in the clean aperture. Perhaps you might want to do comb filtering or interpolation, but you still wouldn't need more than 4 KB.</div>
<br />Yeah that's what my linedoubler does more or less. It stores two scanlines, writes to the other while rendering (twice) from the other one. Also I'm not sampling the analog composite signal, the video decoder does that and converts it to a digital ITU656 bitstream.
<br />
<br />I managed to fix the color problem a little bit by tweaking the video decoder parameters (it has settings for contrast, saturation etc), will have to do more of that later by using blargg's palette test as a reference.
<br />
<br />E: The colors look pretty good now. Unfortunately it seems PAL support is a no go -- my TV apparently doesn't support 50Hz resolutions over VGA (although 720x576@50Hz works fine over DVI/HDMI).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mark_k</b> [ Mon Oct 24, 2011 12:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A cheap alternative to a hardware <span class="posthilit">line</span> doubler/scaler is to use a video capture device with your PC and suitable software. You might think the added latency of doing that would suck, but in fact -- depending on the capture hardware -- it's not too bad at all. PCI (Express) capture cards should give lower latency than USB capture devices, but some USB devices give a very acceptable result. You can buy them for a few dollars on eBay.
<br />
<br />Check out <a href="http://deinterlace.sourceforge.net/" class="postlink">DScaler</a>. DScaler's "Old Game" deinterlacer works pretty well for 240p sources. If you configure DScaler to use a 480p full-screen resolution and connect your PC to your display the result should be pretty good.
<br />
<br />I've been working on some improvements to DScaler but they're not quite ready for public consumption yet. (Example: variable brightness scanline effect, blend with previous field so flickering effects like the Batman intro show with no flickering, a "NES mode" for the temporal comb filter.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Grumskiz</b> [ Mon Oct 24, 2011 1:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">mark_k wrote:</div><div class="quotecontent">A cheap alternative to a hardware <span class="posthilit">line</span> doubler/scaler is to use a video capture device with your PC and suitable software. You might think the added latency of doing that would suck, but in fact -- depending on the capture hardware -- it's not too bad at all. PCI (Express) capture cards should give lower latency than USB capture devices, but some USB devices give a very acceptable result. You can buy them for a few dollars on eBay.<br /></div>
<br />
<br />I'm doing exactly this, since I don't actually own a TV. I have a PAL NES and a PAL <span class="posthilit">SNES</span> here.
<br />
<br />I've used different devices to get the NES video onto my computer and the results were always pretty bad.
<br />First a USB device often called Logilink Video Grabber. I say "often called", because there is a variety of devices by different companies using the same hardware and driver. Some of you might know it under the name EasyCap Audio/Video Grabber.
<br />This thing sucks!
<br />It has really bad latency and colors are altered.(Suprisingly only when using an NES/<span class="posthilit">SNES</span>, PS2 looks fine).
<br />Also sometimes there were weird color artifacts appearing in the picture. We all know the <span class="posthilit">vertical</span> lines of the NES 2. Imagine the same horizontally and with broader lines. It seems to happen on very light colors more often, than on darker ones.
<br />Audio is awful. Most of the time, I can get it to work properly. If it does it's distorted.
<br />
<br />Now, I use a PCI TV-card (I think it was made by Typhoon, but it shows up as a Phillips device when I run lspci) which has an Audio-In(never got that to work, not even on Windows with the original driver) and a composite Video-In.
<br />It's old, but it works okay. There is no (noticeable) latency, but the colors are somewhat of again, but not as bad as with the Logilink device.
<br />Btw, I'm comparing the colors to what I see, whenever I get a chance to use my NES on a TV(I don't have...doesn't mean I never get to use one), not what can be seen in emulators.
<br />
<br />There is one catch though.
<br />As far as I know, it does support both PAL and NTSC signal (as well as SECAM I think, but really I have only tried PAL).
<br />The problem is, it only shows you half the frames of the input.
<br />That means I only get 25 fps from my consoles and all intentional flicker effects or fast color changes are blurred out.
<br />Prime example is Megaman 2. Whenever you get a new weapon after defeating a robot master, Megaman is shown on the screen rapidly changing his suit's color for a moment.
<br />I only get to see him in a mixture of both colors.
<br />
<br />
<br />Maybe I just should have spend more money on the devices and maybe I should have made sure that I get something of actual quality, but for me the TV-card does the job, until I can get a good TV and until I have the room for it.
<br />However, If you have the chance to use a TV or you really want a quality picture and not all the hassle with the drivers/programs just to get bad video, then I'd say, don't go with this method unless you really know that what you're getting is top quality.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mark_k</b> [ Mon Oct 24, 2011 1:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Grumskiz wrote:</div><div class="quotecontent">As far as I know, it does support both PAL and NTSC signal (as well as SECAM I think, but really I have only tried PAL).<br />The problem is, it only shows you half the frames of the input.<br />That means I only get 25 fps from my consoles and all intentional flicker effects or fast color changes are blurred out.<br />Prime example is Megaman 2. Whenever you get a new weapon after defeating a robot master, Megaman is shown on the screen rapidly changing his suit's color for a moment.<br />I only get to see him in a mixture of both colors.</div>
<br />Do you use DScaler or another program for displaying the video signal? If you use DScaler, use the Old Game deinterlacing method as that's designed for 240p sources.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Grumskiz</b> [ Tue Oct 25, 2011 1:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">mark_k wrote:</div><div class="quotecontent">Do you use DScaler or another program for displaying the video signal? If you use DScaler, use the Old Game deinterlacing method as that's designed for 240p sources.</div>
<br />
<br />Oh, that's a program. Thought it was some sort of device. My bad.
<br />I'm going to try that out, thanks for the advice!
<br />
<br />€dit:
<br />Dang, it's windows only. Oh well...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mark_k</b> [ Tue Oct 25, 2011 11:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yep. :( And sadly I doubt Wine is good enough to run DScaler under Linux or whatever.
<br />
<br />What program have you been using to view video signals on your PC? I've tried tvtime in Linux and that doesn't reduce the frame rate.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
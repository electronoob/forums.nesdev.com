<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - bsnes-mcfly: The v073 and bsnes-classic killer</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">bsnes-mcfly: The v073 and bsnes-classic killer</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=17377">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=17377</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>8</strong> of <strong>10</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hex_usr</b> [ Sun Jul 22, 2018 5:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">007 wrote:</div><div class="quotecontent">Just trying r09 I see you brought compatibility legacy back.</div><br />I didn't intend on bringing Compatibility: Legacy back; my compilation script compiles it automatically, and I simply forgot to delete the DLL for it before packaging this version. I intend on retiring Compatibility: Legacy and replacing it with Compatibility: OpenMP, so if anyone wants to test both profiles and see if there's a game that Legacy supports and not OpenMP, this will be the last chance to do so. And if you do have a bug report for Compatibility: OpenMP, be sure to forward it to byuu, as this profile comes directly from the bsnes WIPs.<br /><br />EDIT: Since this post started a new page, I added a link to <a href="https://mega.nz/#!l0xgwKgC!5Sc7LnWxdZCWxmM_BR2qNd9DULwWtLyB5x5c2f_b8kU" class="postlink">bsnes-mcfly v106r09</a> for convenience. the release notes are on the previous page.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Exequiel</b> [ Mon Jul 23, 2018 5:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This message is directed to the author of this build:<br /><br />I want to incorporate your build into my front-end emulator launcher (launchbox) because I love it..! That said, I'm having a issue with getting it to launch games in Fullscreen automatically. The issue is that when an emulator doesn't have the option to do it automatically, we use AHK scripts (auto hotkey scripts) to manully fire hotkeys after a certain delay (i.e. wait 5 secs, send {alt+enter} which would trigger fullscreen) but nothing happens using your build. These techniques work on various higans and old bsnes to bypass the issue but on this build it's just not working. I was hoping your could either add an option within the emulator to launch games in fullscreen or enable what the moderators from launchbox have mentioned below:<br /><br />&quot;Well to be perfectly honest this isn't a &quot;Launchbox problem&quot; it's just something that the emulator doesn't allow for, the vast majority of emulators out there either have a command line option or a toggle to set to load in fullscreen. Even Byuus original BSnes and Higan emulators allow for this for most builds and those that don't will allow an AHK script to toggle it &quot;F11&quot;.”<br /><br />This issue may seem trivial, but I use a regular remote control to launch games and use original snes gamepads... so I have no access to a keyboard once it’s set up...<br /><br />Hoping this reaches you, <br />regards<br /><br />LINK FIXED:<br />ref: <!-- m --><a class="postlink" href="https://forums.launchbox-app.com/topic/46103-banes-mcfly-v106-can">https://forums.launchbox-app.com/topic/ ... y-v106-can</a><!-- m -->’t-fullscreen/

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hex_usr</b> [ Mon Jul 23, 2018 6:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hmmm, I can believe that the command line option won't work, but I just spent the last few days trying and failing to add resolution changing, so I'm pretty sure that the hotkey for fullscreen works at least. Did you configure the hotkey in the Settings window's Input tab? Unlike the official bsnes, bsnes-mcfly will allow combination hotkeys such as Alt+Enter.<br /><br />I'll look into this pretty soon.<br /><br />EDIT: By the way, the URL you linked is broken.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Exequiel</b> [ Mon Jul 23, 2018 6:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I fixed the ref link, my bad<br /><br />Your hotkeys work when I’m using my actual keyboard but when I use an automated script (which basically send key inputs) then it doesn’t work.. is there something else you want me to try??

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hex_usr</b> [ Tue Jul 24, 2018 3:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The automated keyboard script won't work? Interesting. Do you know if it works with the <a href="https://board.byuu.org/viewtopic.php?f=29&amp;t=2102" class="postlink">bsnes v106r44 beta</a>? And if it does, I think I might have an idea of what's going wrong with bsnes-mcfly... though the question then becomes “why does it work with bsnes v073 and not bsnes-mcfly?”:<br /><br />The Windows version of bsnes v073 used to come as 3 DLLs and a launcher EXE, where the 3 DLLs correspond to the 3 emulation profiles: bsnes-accuracy.dll, bsnes-compatibility.dll, and bsnes-performance.dll. The DLLs aren't actually dynamic linked libraries; they're really EXE programs disguised as DLLs, and the launcher program is responsible for executing the selected DLL as an EXE. In order to look as much like bsnes v073 as possible, bsnes-mcfly follows the same setup.<br /><br />If you want to, you could rename one of the DLLs to have the “.exe” extension and run it directly. Though if you do, the Settings window's Profiles tab will stop having any effect (with one exception*). This is just a guess, but maybe your keyboard script doesn't take into account launcher programs that invoke other programs, and renaming one of the DLLs to have the “.exe” extension will fix it? If not, then I'm all out of ideas.<br /><br />*bsnes-accuracy.dll actually contains both the Accuracy and Compatibility: OpenMP profiles (bsnes-compatibility.dll contains only the Compatibility: Legacy profile, which is deprecated), and it is possible to switch between them without a full restart; just loading a new game is all that is needed for the profile change to take effect. Switching to or from any other profile really will require a full restart.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Tue Jul 24, 2018 3:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just a fair warning hex, you're probably going to <em>hate</em> the next WIP ...<br /><br />I've cleaned up the Emulator::Interface a good deal.<br /><br />Gone are the persistent structs, in their place:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">auto information() -&gt; Information;<br />auto videoInformation() -&gt; VideoInformation;<br />auto ports() -&gt; vector&lt;Port&gt;;<br />auto devices(uint portID) -&gt; vector&lt;Device&gt;;<br />auto inputs(uint deviceID) -&gt; vector&lt;Input&gt;;<br />auto connected(uint portID) -&gt; deviceID;<br />auto connect(uint portID, uint deviceID) -&gt; void;</div><br /><br />The overscan boolean was moved to VideoInformation.<br /><br />Port no longer includes vector&lt;Device&gt;, and Device no longer includes vector&lt;Input&gt;. The Input::type is more specific as well now.<br /><br />connected(port) solves two problems at once:<br />1) for new configuration files, this can be called before calling connect() to get the default, sensible device for said port. This avoids the &quot;controller ports default to none&quot; problem higan has had for a long time now.<br />2) for handling devices such as the NES FourScore, this works in place of needing the core to call into Emulator::Platform.<br /><br />For the latter, here's what I propose: put &quot;Four Score&quot; into both controller ports in the menu and devices() results. Whenever the user picks any item from the menu, call connect(port, device) and then immediately call connected(port) for all ports(). When the NES core sees a connect([Controller1 *OR* Controller2], FourScore), it will actually connect both controller ports to the FourScore device ID. Then when the UI polls connected(), it sees this and both options end up selected in the menu. When the user then picks something OTHER than FourScore on EITHER port, the core will then set the other controller port to Device::None, and the UI will see this via calls to connected().<br /><br />As for what to do with the input settings window, I don't know ... probably put all the inputs under Controller1::FourScore, and return no inputs for Controller2::FourScore. Maybe call devices(Controller2)::FourScore &quot;Four Score (virtual)&quot; or something? Could also make a dummy single digital input under Controller2::FourScore named &quot;Use Controller Port 1 :: Four Score&quot;, but... yuck.<br /><br />Also, vector&lt;Media&gt; is gone. Now that there's separate Interface classes per core, it serves no purpose. You can get the preferred filetype extension for a system via information().extension now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hex_usr</b> [ Tue Jul 24, 2018 4:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I already migrated bsnes-mcfly to v106r51. It's worth noting that bsnes v073 supported the asciiPad, a turbo controller with switches with “Off”, “Turbo”, and “Auto” settings. Support for this device was never internal to the Super Famicom core itself, only in the Qt GUI. Even in bsnes-mcfly, the ports and devices vectors were largely unused because the asciiPad's existence means that I can't use those vectors directly. What I'm saying is, v106r52's planned changes to Emulator::Interface probably won't be as much of an impact as you think.<br /><br />And besides, I'm not afraid of breaking changes. Remember v106r47's wide-reaching changes to nall (loss of the rrange() function, et al.)? I incorporated that change into bsnes-mcfly. It helps that I use a directory structure where the “higan/” directory is completely unchanged from higan. I have a separate “bsnes/” directory (soon to be renamed “bsnes-mcfly/”) where I put all my evil hacks (such as frameskip for the fast PPU and simultaneous up+down and left+right).<br /><br />I'm glad you came up with a way to support the Four Score (and the Mega Drive's EA 4 Way Play). nSide's future is looking pretty bleak right now (the main reason I still haven't put it up on GitLab yet is that it still has an older manifest format, but more details in a PM), so I can rest easy about discontinuing the Famicom part at least.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Exequiel</b> [ Tue Jul 24, 2018 4:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hey,<br />I confirm launching to fullscreen works with bsnes_v106r44-windows. <br />I tried renaming from .dll to .exe and launching one of them but it still doesn't work :/

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hex_usr</b> [ Tue Jul 24, 2018 7:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, that's very interesting. I wonder if Qt is somehow interfering with the keyboard script? I can't think of any reason why it wouldn't work; hotkeys work by polling ruby's Input driver, which is also included in the official bsnes, and if the script works on the official bsnes, then I'm truly stumped on finding the cause.<br /><br />Here's <a href="https://mega.nz/#!0o5XgTqK!VEzEQ6erhjQ9znuKSirUQ_JisPHvTZFsrh_kZBAF2gE" class="postlink">bsnes-mcfly v106r10</a> (based on higan/bsnes v106r51). This version restores the missing --fullscreen command line switch. To run a game in fullscreen, simply run the following command, substituting the game's path:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">bsnes-mcfly.exe --fullscreen &quot;path/to/game.sfc&quot;</div><br /><br />As a side effect of the change I made, it should now be possible to chain a base cartridge with a slot cartridge and load them both together. I remember that being <a href="https://board.byuu.org/viewtopic.php?f=8&amp;t=1383" class="postlink">a complaint someone had with bsnes v073</a>. For example:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">bsnes-mcfly.exe --fullscreen &quot;path/to/Same Game.sfc&quot; &quot;path/to/Same Game Character Data Shuu.bs&quot;</div><br /><br />This will work with BS Memory cartridges, Sufami Turbo cartridges, and Super Game Boy cartridges.<br /><br />EDIT: Oh, and by the way, Alt+F4 will now work in fullscreen. It previously wouldn't work before, probably because it's Qt that listens for the hotkey, and Qt considers itself unfocused when in fullscreen mode, so I had to write code to explicitly watch for Alt+F4 and close the program. And if you want a different binding for exiting the program, you can now assign one on the Input tab (it works in addition to, not instead of, Alt+F4).<br /><br />================================<br /><br />Speaking of the Super Game Boy, there has been something on my mind for the past few months.<br /><br />A few bsnes v073 users are no doubt aware that bsnes v073 uses gambatte for Super Game Boy emulation, whereas bsnes v074 and later use byuu's own Game Boy emulator, which was once known as “bgameboy”, and then “bgb” (all lowercase to distinguish from beware's BGB). gambatte has... I don't want to say “accuracy”, but it has great compatibility with the Game Boy library, and great performance overall. Whereas bgameboy/bgb has a history of incorporating new findings that later turned out to be incorrect, so its accuracy and compatibility are less than excellent. And like all of byuu's emulators other than the upcoming <a href="https://board.byuu.org/viewtopic.php?f=2&amp;t=2131" class="postlink">csnes</a>, the “code as documentation” philosophy means that bgameboy/bgb is somewhat slow. Compound that with the SNES accuracy profile's demands, and I'm sure it doesn't take a genius to figure out the implications.<br /><br />If I switch bsnes-mcfly to gambatte, then byuu's own Game Boy emulator will not get tested as much and will receive fewer bug fixes. But if I don't, there could easily be users who continue using bsnes v073 or bsnes-classic in spite of everything I have done for bsnes-mcfly.<br /><br />Decisions, decisions...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Exequiel</b> [ Tue Jul 24, 2018 8:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I confirm it works using the bsnes-mcfly.exe --fullscreen command line.<br />I will update the launchbox forum thread to let them know as well...<br />Thanks for looking into this <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>007</b> [ Wed Jul 25, 2018 7:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@hex_usr r8 works fie for me on windows 7 &amp; 10<br /><br />r9 and r10 crash on exit. tested on 3 systems all windows 7.<br /><br />not complaining just reporting.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hex_usr</b> [ Wed Jul 25, 2018 8:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I did notice something similar, but the symptom was different. Instead of outright crashing, bsnes-mcfly would instead hang in memory. It would look like it closed properly, only to show that it was still running whenever I try to overwrite the current build with a new build.<br /><br />v106r09 corresponds to higan/bsnes v106r49, while the previous version corresponds to higanbsnes v106r46. Between those, v106r47 was the start of a near-complete overhaul of nall. It's possible that something in there made it much harder for bsnes-mcfly to close itself properly, but this is unproven.<br /><br /><a href="https://gitlab.com/higan/higan/-/jobs/81727219" class="postlink">bsnes v106r47 Windows build</a><br /><br /><a href="https://gitlab.com/higan/higan/-/jobs/84282028" class="postlink">bsnes v106r52 Windows build</a><br /><br /><a href="https://gitlab.com/higan/higan/pipelines/26476113" class="postlink">List of Windows builds for higan/bsnes WIPs</a>. Don't be fooled by the FAILED status indicators; on GitLab, FAILED is shown whenever at least 1 target build fails, which in this case would be the libretro port. The standalone higan and bsnes targets build just fine, and they are available for download.<br /><br />I will say though, I don't think I've noticed this hanging/crashing after I upgraded to the 20180724 intermediate WIP preceding v106r52.<br /><br />Oh, and fair warning: I have now completely dropped the Compatibility: Legacy profile from the source code. From now on, the Compatibility: OpenMP profile will simply be known as “Compatibility”. If you need the deprecated profile, bsnes-mcfly v106r09 will have it, but if you find a game that works with Compatibility: Legacy and not also Compatibility: OpenMP, please post about it either here or on byuu's message board.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>007</b> [ Sat Jul 28, 2018 7:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@hex_usr<br /><br />It seems older setting cause this. I went into user folder deleted old files and crash gone. Thought of doing this when I tried it on a system that never ran mcfly before and there was no crash.<br /><br />so there is no bug, just if settings files from old install exist it effected somehow, i deleted all higan and bsnes folders and on all systems all is good now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hex_usr</b> [ Sat Jul 28, 2018 8:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Still, if there is a crashing bug, I would like to know how to reproduce it so that I can fix it.<br /><br />Because yesterday, I went on a coding spree and converted almost all of the Qt 4 signals/slots in the code to lambdas, which are supported by Qt 5. Exactly 1 file in the source code still requires moc to compile, and it relates to the file browser. All because I'm trying to find out why the crash happens and needed a bit more freedom than moc allows.<br /><br />================================<br /><br />Regarding gambatte, I won't be able to incorporate it into bsnes-mcfly. Not legally, at least. gambatte is licensed under the General Public License version 2, and it does not contain an “or any later version” clause. bsnes-mcfly, being based on the higan/bsnes v106 WIPs, uses the General Public License version 3, and these licenses are not compatible without that “or any later version” clause. It's the same situation with libjma, the JMA archive extraction library.<br /><br />I said previously that I will “take any legal means necessary” to replace bsnes v073 and bsnes-classic. Incorporating gambatte is not a legal means, and if I was talented enough to write a whole Game Boy emulator from scratch, I would just help byuu with his Game Boy emulator instead.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hex_usr</b> [ Sun Jul 29, 2018 1:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: bsnes-mcfly: The v073 and bsnes-classic killer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I decided that I would study up on GDB, and debug bsnes-mcfly's exit routine. And I think I have a lead on the crashing bug.<br /><br />RawInputWindowProc(HWND__*, unsigned int, unsigned long long, unsigned long long)<br /><br />There seems to be a segmentation fault in ruby's Windows input driver. And indeed, if I change the input driver to None, then bsnes-mcfly stops crashing. But now I obviously can't play any games, so I need to figure out why ruby is crashing on exit.<br /><br />The bsnes WIPs don't crash on exit, do they? Make sure you have the Windows input driver selected if you want to test.<br /><br />EDIT: I think I got it. The bsnes WIPs, on exit, call video.reset(), audio.reset(), and input.reset() on the unique_pointer objects holding ruby's drivers, but bsnes-mcfly was not doing the same. Oh boy, I just went through so many slot→lambda changes, dropping moc from all but 1 file, and the actual fix turned out to be as simple as this? Well, I think these code changes are for the better, so I'll keep them.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>8</strong> of <strong>10</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
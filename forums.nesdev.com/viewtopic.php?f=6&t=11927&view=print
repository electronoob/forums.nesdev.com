<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - How to analize songs, and take out instruments?[NSFIMPORTED]</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">How to analize songs, and take out instruments?[NSFIMPORTED]</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=11927">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=11927</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>michikaze</b> [ Fri Oct 17, 2014 5:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>How to analize songs, and take out instruments?[NSFIMPORTED]</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello. I want to take songs from Darkwing Duck and Chip&amp;Dale2, and memorise every bit of it. For that, I need to record an output of NSF as a list of register values, get some info on how these registers converts to actual soundwave, and get notes and instruments out of this mess.<br /><br />Actually, I want to convert them to flash markup language. And make some visulation program. I want to see it, not just hear. I want to know it, to keep it in my head clear as much as possible.<br /><br />You can give some shortcuts for me, don't you?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Oct 17, 2014 6:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How to analize songs, and take out instruments?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />NSF importer should come in handy: <!-- m --><a class="postlink" href="http://rainwarrior.ca/projects/nes/nsfimport.html">http://rainwarrior.ca/projects/nes/nsfimport.html</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri Oct 17, 2014 7:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How to analize songs, and take out instruments?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you're familiar with Famitracker, this program will let you analyze the frame-by-frame changes visually:<br /><a href="http://rainwarrior.ca/projects/nes/nsfimport.html" class="postlink">http://rainwarrior.ca/projects/nes/nsfimport.html</a><br /><br />Edit: TheFox beat me to it while I had the tab open.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bavi_H</b> [ Fri Oct 17, 2014 8:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How to analize songs, and take out instruments?[NSFIMPOR</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is &quot;Flash markup language&quot; the same thing as <a href="http://flmml.codeplex.com/" class="postlink">FlMML</a>?:<br /><div class="quotetitle">Google Translate wrote:</div><div class="quotecontent">FlMML is a library for you to play the music in Flash.<br />It allows you to play the melody just pass the text of the MML notation.</div><br />I found a script for the NES emulator <a href="http://www.fceux.com/web/home.html" class="postlink">FCEUX</a> that looks like it will convert NES audio playing in FCEUX into MML. (I have never used MML. I found this script while looking for sound visualization scripts for FCEUX.)<br /><br />The script collection: <a href="https://github.com/gocha/emu2midi-lua" class="postlink">emu2midi-lua</a>. In the right margin, click on Download ZIP.<br />A blog post about how to use it: <a href="http://loveemu.hatenablog.com/entry/20130627/Emu2MIDI_Lua_Tools" class="postlink">MIDI Converter Runs On Emulator</a><br /><br />FCUEX can play NSF files, so if the script works, maybe this will do what you want.<br />_____<br /><br /><span style="font-size: 85%; line-height: normal">I got the script to write a MML file, <s>but I don&#39;t know how to use the MML file to confirm it works well.</s> <strong>EDIT:</strong> The MML text works well, see below.<br /><br />The script normally requires a base64 extension and a MIDI extension, but I don't know how to install those. In nes2midi.lua, it looks like the base64 code is only used to embed DPCM samples, so I just disabled that code for now. And if you remove the line that writes the MIDI file, then the script will still write the MML file and a debugging text file. These are the changes I made:<br /><br />In nes2midi.lua, find this line near the top and remove it:<br /><br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">local base64 = require&#40;&quot;base64&quot;&#41;</tt><br /><br />Near the bottom, find this line:<br /><br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">ch.patch = string.format&#40;&quot;%d,%d,%s&quot;, ch.dmcseed, ch.dmcloop and 1 or 0, base64.encode&#40;memory.readbyterange&#40;ch.dmcaddress, ch.dmcsize&#41;&#41;&#41;</tt><br /><br />Change the part beginning with <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">0,</tt> to the end of the line to be: <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">0, &quot;&quot;&#41;</tt><br /><br />Also near the bottom, remove this line:<br /><br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">writer:writeMidiFile&#40;&quot;testVGM.mid&quot;&#41;</tt></span><br />_____<br /><br />EDIT: Using the stand-alone Flash player, I opened flmll.swf from <a href="http://flmml.codeplex.com/releases/view/79060" class="postlink">this download</a> and pasted in the MML text. The converted MML text works well for internal audio and NTSC speeds. Expansion audio isn't converted. Music designed for PAL speeds will play fast in the MML version, but you can lower the T number at the beginning of the MML text to adjust the speed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bavi_H</b> [ Fri Oct 17, 2014 9:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How to analize songs, and take out instruments?[NSFIMPOR</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />By the way, <a href="http://www.fceux.com/web/home.html" class="postlink">FCEUX</a> comes with some example music visualization scripts (SoundDisplay.lua and SoundDisplay2.lua). If you are willing to use something other than Flash, maybe you can make visualizations the way you want using FCEUX's scripting language. For example, I made my own script to visualize things the way I wanted to:<br /><br />Script&#058; <a href="http://rnhart.net/fceux/" class="postlink">Scrolling Pitch Display</a>.<br />Videos: <a href="http://www.youtube.com/embed/qARaW8619Fc?rel=0" class="postlink">Battle Kid 2 Demo startup story and title screen</a>, <a href="http://www.youtube.com/embed/27EwA1EB-vU?rel=0" class="postlink">Utaco credits screen</a>.<br /><span style="font-size: 85%; line-height: normal">(I'm not good at converting videos for YouTube. The script runs smoothly and in sync in FCEUX.)</span><br /><br />If you still want to use Flash, the FCEUX visualization scripts might still help you understand NES audio better. For example, when using the FCEUX visualizations with NES ROMs, you can pause the emulator, then press the Frame Advance key to step one frame at a time and watch the visualization change. This can help you analyze how some of the faster effects are created.<br /><br />Unfortunately, when you open an NSF file in FCEUX, the script isn't allowed to draw graphics on the screen, so you can't normally use visualization scripts when FCEUX is playing an NSF file. However, in the FCEUX source code, <a href="http://sourceforge.net/p/fceultra/bugs/666/" class="postlink">a line can be added</a> to allow the script to draw graphics on the NSF playback screen. If you're interested and unfamiliar with compiling it yourself, I think I can compile a <span style="font-size: 85%; line-height: normal">(edit:)</span> <strong>Windows</strong> version.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>michikaze</b> [ Tue Oct 21, 2014 1:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How to analize songs, and take out instruments?[NSFIMPOR</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />And direct conversion to FlMML, amasing! Thank you all, really.<br /><br />(I forgot to mention, nsfplay have a nice visualizer too. With register values, volume, and a nice little keyboard. Just click &quot;NSFplug&quot; -&gt; view -&gt; keyboard)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>michikaze</b> [ Thu Oct 23, 2014 5:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How to analize songs, and take out instruments?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Tried emu2midi-lua, output is kind of unreadable. I, I'm wondering if there is a tool to export/import famitrackef files as text. Like this <!-- m --><a class="postlink" href="http://famitracker.com/forum/posts.php?id=3129">http://famitracker.com/forum/posts.php?id=3129</a><!-- m --> . I'll try to understand output in meantime.<br /><br />And a little unrelated question, just to not create another thread. Can you recommend lightweight midi editor? For both linux and windows. Not for creating something complex, just to look inside midi files.<br /><br />Edit: Tried to nsfimport stage select music from DW (at 160 rows per frame), music slied down one row every 9-10 frames. I guess importing process does loses some data, it's not a perfect convertion. Btw, there is a line &quot;Harware length counters are not supported by FamiTracker, and are essentially rounded down to the nearest frame by the import process.&quot; in the readme. I know it's a very very minor detail, but it still bugs me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Oct 23, 2014 6:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How to analize songs, and take out instruments?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">michikaze wrote:</div><div class="quotecontent">And a little unrelated question, just to not create another thread. Can you recommend lightweight midi editor? For both linux and windows. Not for creating something complex, just to look inside midi files.</div><br /><br />BRELS MIDI editor is pretty simple and direct: <a href="http://breno.sarmen.to/midi/" class="postlink">http://breno.sarmen.to/midi/</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bavi_H</b> [ Thu Oct 23, 2014 5:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: How to analize songs, and take out instruments?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">michikaze wrote:</div><div class="quotecontent">Can you recommend lightweight midi editor?</div> I like <a href="http://openmidiproject.sourceforge.jp/Sekaiju_en.html" class="postlink">Sekaiju</a>, a MIDI sequencer for Windows. It defaults to Japanese, but you can change it to English: Go to the (S) menu and choose Language.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
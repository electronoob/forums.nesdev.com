<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Use of parallel ports in NES/PC interfaces</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Use of parallel ports in NES/PC interfaces</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9910">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9910</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>5</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Mon Mar 25, 2013 5:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's not hard to get a PCI-E parallel port for a modern computer, it is however difficult to rewrite legacy software to use it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Cybertronic</b> [ Mon Mar 25, 2013 10:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Cybertronic wrote:</div><div class="quotecontent">You CAN find USB adapters that support all the right protocols but, you just have to look around.</div><br />Any help with the right query? Would <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">usb ecp epp spp</tt> return mostly relevant results? I tried that and got <a href="http://www.ambery.com/hiusbpaprpoa.html" class="postlink">If you need to connect a legacy parallel-port device like [...] EPROM programmer [...] please use our cardbus version</a> which doesn't help for a laptop that has only USB, not CardBus.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If you want an IEEE1284 Card that is worth your money get a &quot;2S1P Combo-Value&quot; by SIIG It is fully compliant with IEEE 1284-1994 parallel port standard and supports ECP, EPP, PS2 and SPP modes.</div><br />On siig.com I see PCIe and PCI, one of which should work provided your PC is a desktop.</div><br /><br />I feel Cardbus Technology died off too quickly. There were so many great options.<br /><br />Worst case scenario you could build a USB2LPT...<br /><!-- m --><a class="postlink" href="http://www-user.tu-chemnitz.de/~heha/bastelecke/Rund%20um%20den%20PC/USB2LPT/ul-16.en.htm">http://www-user.tu-chemnitz.de/~heha/ba ... -16.en.htm</a><!-- m --><br /><br />or buy it....<br /><!-- m --><a class="postlink" href="http://www.aliexpress.com/store/product/Usb-parallel-port-lpt-ecp-epp-spp-vxd-compatible/420916_800229698.html">http://www.aliexpress.com/store/product ... 29698.html</a><!-- m --><br /><br />The drivers virtualize the port so the legacy hardware doesn't know the difference. I got one a while back and works like a champ.<br /><br /><br />Additionally there is the Targus ACP45US1, but I have never used it personally but it is listed that it supports EPP/ECP and even comes with DB9 serial. Decent brand, but never tried this particular product before.<br /><br /><!-- m --><a class="postlink" href="http://www.newegg.com/Product/Product.aspx?Item=N82E16834994907">http://www.newegg.com/Product/Product.a ... 6834994907</a><!-- m --><br /><br /><div class="quotetitle">kyuusaku wrote:</div><div class="quotecontent">It's not hard to get a PCI-E parallel port for a modern computer, it is however difficult to rewrite legacy software to use it.</div><br /><br /><br />With well written drivers you don't need to rewrite legacy software to use it. A proper legacy adapter should be fully transparent, and function as the original would using hardware virtualization if it isn't a junk product.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Mar 25, 2013 11:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />USB, almost by definition, is incompatible with the way most legacy bit-banging parallel ports is used; it's not ECP or EPP that's necessary, but rather MMIO.<br /><br />Now, this <strong>is</strong> something that—modulo timing constraints—could be supported by dosbox, dosemu, or the windows NTVDM; for 32-bit code running not in ring 0, a fault handler. All of these all involve more involvement from lower-level kernel bits than most people are comfortable with.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Cybertronic</b> [ Wed Mar 27, 2013 10:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">USB, almost by definition, is incompatible with the way most legacy bit-banging parallel ports are used; it's not ECP or EPP that's necessary, but rather MMIO.<br /><br />Now, this <strong>is</strong> something that—modulo timing constraints—could be supported by dosbox, dosemu, or the windows NTVDM; for 32-bit code running not in ring 0, a fault handler. All of these all involve more involvement from lower-level kernel bits than most people are comfortable with.</div><br /><br />That is a very good point, I really do take for granted all the virtual machines I run on my rig. Being in network administration, virtualization kinda becomes an every day thing for me, and I forget not everyone can or knows how to run virtual machines. But still as it stands, the information provided in the write ups that use these parallel ports are free and generally intended to be a low cost solution so people really shouldn't complain that the writeup calls for a parallel port rather than a specialized piece of hardware such as a programmable IC.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Mar 28, 2013 5:06 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Cybertronic wrote:</div><div class="quotecontent">Being in network administration, virtualization kinda becomes an every day thing for me, and I forget not everyone can or knows how to run virtual machines.</div><br />I thought anybody who used NES programs developed since 1997 was aware of emulators, which are a kind of virtual machine.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Cybertronic</b> [ Thu Mar 28, 2013 3:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Cybertronic wrote:</div><div class="quotecontent">Being in network administration, virtualization kinda becomes an every day thing for me, and I forget not everyone can or knows how to run virtual machines.</div><br />I thought anybody who used NES programs developed since 1997 was aware of emulators, which are a kind of virtual machine.</div><br /><br />yeah that is true, but it does not fit the context of this thread for what the parallel port is intended to be used for. OP wanted to write/dump some Famicom Disk system games, and the only option was via parallel port.. An Emulator for the NES would be of no use to him in this particular case. He can't just emulate .FDS images onto or off of a stack of Famicom disks to be used on a real Famicom/NES.<br /><br />If he wanted to just play Famicom disk system games on an emulator I am sure he wouldn't have posted a rant on how he hates parellel ports can't get a hold of a computer with one.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Thu Mar 28, 2013 4:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Will USB adapter drivers hook to port-writing DOS apps in NTVDM?<br />Virtual machines? Which virtual machines are able to forward port access (today)?<br />I know Dosbox can, but obviously there's timing jitter which still renders it unacceptable for many applications.<br /><br />My LPT solution has been to use a USB MCU to issue buffered I/O with deterministic timing. It works well for almost every LPT application (as long as they don't use a write-back protocol), but reimplementing protocols sucks, and there's the unavoidable latency.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Cybertronic</b> [ Thu Mar 28, 2013 4:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />VirtualBox is by far the best free virtual machine, it can forward port access as well as direct access to any hardware you'd like (with a bit of editing a few xml files). I've had virtual box setup before where it accessed a partition or another hard drive in a dual boot setup with full 3D hardware acceleration. I did this because I did not want to constantly reboot to switch between an OS, and I had brute force CPU power (i7 3930K) and plenty of ram on my side (32gb)<br /><br /><!-- m --><a class="postlink" href="https://www.virtualbox.org/">https://www.virtualbox.org/</a><!-- m --><br /><br />As far as I know though it does not support parallel ports, but it does have, serial passthrough and emulation. There are some &quot;hacks&quot; to get it kinda working, and there is a release candidate version that has it added which you can try at your own risk.<br /><br /><!-- m --><a class="postlink" href="https://forums.virtualbox.org/viewtopic.php?f=0&amp;t=50934&amp;p=233253&amp;hilit=parallel+port#p233253">https://forums.virtualbox.org/viewtopic ... rt#p233253</a><!-- m --> <br /><br /><br />VMWare on the other hand, has full parallel virtualization or passthrough, but it isn't free.<br /><br /><!-- m --><a class="postlink" href="http://www.vmware.com/">http://www.vmware.com/</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Thu Mar 28, 2013 5:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If it can forward port access, why doesn't it support parallel ports? By serial support it sounds like its just hooking the Windows API, not actually trapping the ports which apparently requires IOMMU--a recent hardware extension.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Mar 28, 2013 8:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">kyuusaku wrote:</div><div class="quotecontent">It's not hard to get a PCI-E parallel port for a modern computer, it is however difficult to rewrite legacy software to use it.</div><br /><br />Speaking of which, has anybody written a version of FDSLOADR that runs on a modern platform? (e.g. Windows 7 desktop with a PCIe parallel port installed)<br /><br />If no, I'm planning to attempt it myself, but it would make me pretty happy to find out it's already done.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Thu Mar 28, 2013 9:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />FDSloadr needs a reliable timebase, which you can't get in a non-RTOS like Windows. If you rewrite it, you're better off targetting a FTDI chip in bit-bang mode (I'm saving this for a rainy week), or offloading the whole program to a microcontroller.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Cybertronic</b> [ Sat Mar 30, 2013 12:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">kyuusaku wrote:</div><div class="quotecontent">FDSloadr needs a reliable timebase, which you can't get in a non-RTOS like Windows. If you rewrite it, you're better off targetting a FTDI chip in bit-bang mode (I'm saving this for a rainy week), or offloading the whole program to a microcontroller.</div><br /><br />Then wouldn't the simple solution be to Emulate an RTOS environment? <br /><br /><!-- m --><a class="postlink" href="http://www.freertos.org/FreeRTOS-Windows-Simulator-Emulator-for-Visual-Studio-and-Eclipse-MingW.html">http://www.freertos.org/FreeRTOS-Window ... MingW.html</a><!-- m --><br /><br />I figure if you are going to write a modern implementation for Legacy hardware you should make modern systems behave more like legacy systems. That is part of the reason DOSBox exists because it is easier to make a modern OS behave like DOS rather than having a DOS application behave like a modern one. WOW32 is a wonderful example as well. Windows 7 64-bit runs 32 bit applications because it recreates a 32 bit environment natively by simulating 32 bit memory addresses and a few other things that aren't present or changed in a 64 bit OS. I can run Windows 3.1 in a virtual machine on a 64-bit processor so it would stand to reason that creating an RTOS wrapper for an application like FDSloader is possible to do. I am not saying it would be easy, just saying just because a Modern OS does things differently or doesn't do something an older OS did doesn't mean it can't be adapted to do so. XBOX 1 kernel and software operates at Ring 0, something Windows normally wouldn't do, and people had said it wasn't possible, yet people managed make Xbox Emulators that execute these very applications at Ring 0. (albeit they worked slowly and with faults but the point is the applications ran)<br /><br />So we know the appropriate hardware can be found via PCI or USB, and the Above link shows that RTOS process threads can be created, now we just need the software to run with the RTOS threads and address the hardware.<br /><br />here is a commercial RTOS virtualization..<br /><br /><!-- m --><a class="postlink" href="http://www.tenasys.com/index.php/tenasys-products/intime-rtos-family/intime-for-windows">http://www.tenasys.com/index.php/tenasy ... or-windows</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sat Mar 30, 2013 12:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yes, there are ways of circumventing windows' scheduler when necessary.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Mar 30, 2013 1:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Can you run a 64-bit OS in a virtual machine inside a 32-bit OS and keep the benefits of a 64-bit OS?<br /><br />Can you run a real-time OS in a virtual machine inside a non-real-time OS and keep the benefits of a real-time OS?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Mar 30, 2013 1:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Use of parallel ports in NES/PC interfaces</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />For things that don't run constantly, there's always the 100% CPU approach to getting better scheduling on a non-real-time OS (though not the full guarantee of a real-time one).

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>5</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
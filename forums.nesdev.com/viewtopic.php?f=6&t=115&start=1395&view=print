<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - More NSF Requests</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">More NSF Requests</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=115">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=115</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>94</strong> of <strong>99</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Apr 29, 2012 2:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />And there's even more than one NSF of "Comic Bakery".
<br /><ul><li><a href="http://pics.pineight.com/nt2/meatspin.nsf" class="postlink">meatspin.nsf</a>: "Comic Bakery" mashed up with "You Spin Me Round" </li><li><a href="http://www.zophar.net/music/nsf/jurassic-park-.html" class="postlink">Jurassic Park</a>: one of the songs turns into "Comic Bakery" </li></ul>
<br />Not to mention <a href="http://www.youtube.com/watch?v=CaXVdwWuU-A" class="postlink">Press Play On Tape's Backstreet Boys parody</a>. Once you hear the lyrics you can't unhear them.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gil-Galad</b> [ Tue May 01, 2012 2:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The moment you've been waiting for, for a few months has arrived. But don't get too excited. Some are decent, some not. I also filled in a few requests from you guys. You can download them at my <a href="http://gilgalad.arc-nova.org/" class="postlink">website</a>.
<br />
<br />Alfred Chicken - FIX 
<br />Bo Jackson Baseball - FIX 
<br />Cammandos 
<br />Exploding Fist (Prototype) 
<br />Golden Axe 
<br />Imparial Judge 
<br />International Cricket - FIX 
<br />Nangoku Shirei!! - Spy Vs Spy 
<br />Total Recall - FIX 
<br />Zhen Jia Hou Wang 
<br />Zheng Jiu Shi Ji
<br />
<br />Have fun and enjoy listening. I will try to rip some more for the next update.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gil-Galad</b> [ Tue May 01, 2012 3:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: The Blue Marlin</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">locke_gb7 wrote:</div><div class="quotecontent">Sadly, one of my favorite NES games NSF i just realized is missing the "Noise" layer <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />  The Blue Marlin</div>
<br />
<br />I have a fix version of Blue Marlin on my website. Specifically in the NEWNSF page, NSF Fix category. I hear the noise channel in it. Let me know if it's ok.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>locke_gb7</b> [ Tue May 01, 2012 4:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Here is an updated list of NSF fix on my list</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Obocchama-Kum	Flopping Guy
<br />Kabuki Quantum Fighter	Cutscene
<br />Advanced Dungeons &amp; Dragons - Hillsfar	Arena Match Start
<br />Advanced Dungeons &amp; Dragons - Hillsfar	Failed Lock Pick
<br />Short Order Eggsplode	Burger Game
<br />Baseball Stars	You're Hired
<br />Rally Bike	Died, Stage 3, Stage 5
<br />Dai-2-Ji - Super Robot	Regular  Battle Scene
<br />Bases Loaded	Switching sides
<br />Jackie Chan's Action Kung Fu 	Second part of the Ending
<br />World Class Track Meet	Too many tracks, in parts, all fucked up
<br />Famicom Wars	End turn
<br />
<br />
<br />Cool I'll check for the Blue Marlin fix tomorow <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gil-Galad</b> [ Tue May 01, 2012 6:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />One more thing, locke_gb7
<br />
<br />Check those fix requests vs the archive that I posted a couple of days ago.
<br />
<br />I know AD&amp;D Hillsfar needs fixed so you don't have to check it.
<br />
<br />Short Order Eggsplode I know needs fixed.
<br />
<br />The others, not sure yet. Because my archive has close to the most updated archive that I know of.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>SolarFOX</b> [ Tue May 01, 2012 8:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The NSF rip of Strike Wolf (TXC) is missing 2 tracks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>locke_gb7</b> [ Wed May 02, 2012 12:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oki ill check, completely missed that whole page of the forum. Pretty out of ti lately.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Doommaster1994</b> [ Wed May 02, 2012 4:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was not able to find the composers to Exploding Fist and Nangoku Shirei!! - Spy Vs. Spy until after Gil released the NSFs
<br />I was able to find the composers, so update your NSFs
<br />Exploding Fist - Tania Smith
<br />Nangoku Shirei!! Spy Vs Spy - Hiroyuki Masuno
<br />
<br />I also have some fixes on my request list.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu May 17, 2012 9:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">bucky o'hare wrote:</div><div class="quotecontent">Has the PAL (expansion-less) version of Mr. Gimmick been ripped?</div>
<br />
<br />I've started working on it. I've successfully got it playing a few tracks already; still hunting down the rest of the data / banks / etc.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gil-Galad</b> [ Thu May 17, 2012 11:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I've started working on it. I've successfully got it playing a few tracks already; still hunting down the rest of the data / banks / etc.</div>
<br />
<br />How nice. Someone else doing rips for a change. It's been a long time since a bunch of us were ripping NSFs like crazy. Thanks a lot rainwarrior!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri May 18, 2012 4:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Mr. Gimmick (Europe)
<br />
<br /><a href="http://dl.dropbox.com/u/883356/Mr.%20Gimmick%20%28Europe%29.nsf" class="postlink">http://dl.dropbox.com/u/883356/Mr.%20Gimmick%20%28Europe%29.nsf</a>
<br />
<br />
<br />How-to details, if anyone's interested:
<br />
<br />This was a lot trickier than Wario's Woods. I started by writing a quick program to chop the PRG ROM into 8k banks (like the FME-7 uses). Then I arranged these into a ca65 assembly project. I looked for a square channel register write with a debugger, and started out with the set of four banks that were currently loaded when that write was done.
<br />
<br />After some tracing and thinking and debugging, and with a little help from the NTSC version's NFS, I found its play routine and initialization code. With this in place I found 3 of the songs from the game and a bunch of sound effects. The songs were running strangely slow, but it was a good start. I found a little bit of room to jam my INIT bootstrap into at the end of one of the banks.
<br />
<br />Next I tried out the sound test in the debugger, and noted that for different songs, a different bank might be loaded at A000-BFFF, so I tried all the banks in this slot and found most of the songs (though still playing slow, and some sounded funny, especially the DPCM).
<br />
<br />Next I figured out how the FME-7 actually performs a bankswitch, and put breakpoints on writes that would trigger it. I discovered the music playback code switched the A000-BFFF bank every frame for music data, and C000-DFFF for DPCM whenever a new sample was played. At this point I disassembled the bank that contained the music code and inserted a JSR to a custom NSF bankswitch routine where the STAs were supposed to be bankswitching the FME-7.
<br />
<br />It took a bit of fiddling to get the bankswitching code in a state I liked. I wasn't sure if I could get away with just deleting stuff out of one of the banks to make room, so I actually put most of the code in an extra bank that I quickly switch to. This also have me space to build a table that maps the intended FME-7 bank numbers to the banks I included in the NSF. Spent some time with conditional breakpoints on the bankswitch code making sure I'd included all the relevant banks.
<br />
<br />Fixing the speed was interesting; it turns out the music is composed for a 60Hz update rate, and there is a tiny bit of code that just calls the music update twice on every fifth frame. I stuck an RTS on the end of this snippet, and pointed my PLAY routine at it.
<br />
<br />After that it was just a matter of building a song table and cleaning it up, and a little bit of debugging to make sure the code wasn't trying to set IRQs or write to the PPU or anything like that. I've tried to make the absolute minimum amount of changes to the banks ripped from the game.
<br />
<br />If anyone's interested in what my working project looked like, this is the source code: <a href="http://dl.dropbox.com/u/883356/mr_gimmick_nsf_dev.zip" class="postlink">http://dl.dropbox.com/u/883356/mr_gimmick_nsf_dev.zip</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri May 18, 2012 10:38 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Apparently only FCEU 0.98.12 and AudioOverload 2.0 play (at least this) PAL NSF correctly. FCEUX 2.1.4a ignores the NSF's PAL mode setting and plays the DPCM using the NTSC rate table unless "Enable PAL mode" is checked in the video preferences, Nestopia 1.4.0H seems to entirely ignore all the PAL enable bits both in its menu and in the NSF and just plays it as though it were on an NTSC console,  and Nsfplay 2.1 plays in tune but too high :/ (And I'm wrong, it's not too fast)
<br />
<br />edit: described specifically what FCEUX and Nestopia were doing wrong

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri May 18, 2012 11:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What do you mean by "in tune but too high and fast"? How is that possible? (As far as I can tell they are in tune and in the right octave on NSFPlay 2.1.) Can you give me any specific details?
<br />
<br />I don't have a way to verify against a PAL NES (unless someone wants to send me a <a href="http://nesdev.com/bbs/viewtopic.php?t=8639" class="postlink">reference recording</a>) but I would like to get the sound emulation as accurate as I can.
<br />
<br />If FCEU 0.98.12 is an accurate reference, can you point me at a track where the DPCM sounds different than NSFPlay? (I am comparing them side by side right now and they seem the same to me...)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri May 18, 2012 12:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />At least for me, under wine, Nsfplay 2.1 on NSF track 17 (because notes are clearest earliest there) sounds like <a href="http://eamp.org/li/gimmicktitlensfplay.mp3" class="postlink">this</a>, and FCEU's version (and fceux when I force PAL mode) sounds like <a href="http://eamp.org/li/gimmicktitlefceu.mp3" class="postlink">this</a>.
<br />
<br />This is the song that appears on the "SUNSOFT PRESENTS" screen on boot.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri May 18, 2012 1:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />lidnariq, could you send me your in_yansf.ini file? NSFPlay should not be playing back at that pitch (does everything you play in it sound at higher pitch like that?). Was that MP3 made by using NSFPlay's WAV output feature, or by recording directly from your system?
<br />
<br />The pitch is correct on my computer. I wonder if NSFPlay has a samplerate problem under Wine. Though I did have one other person say that it wasn't playing back at the expected pitch (they were using Windows though). Maybe there's a lingering bug in the sound init code...

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>94</strong> of <strong>99</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
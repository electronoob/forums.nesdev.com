<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Using the SNES PowerPak for development</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Using the SNES PowerPak for development</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=5895">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=5895</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artakserkso</b> [ Sat Jan 02, 2010 5:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Using the SNES PowerPak for development</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />First of all, I'd like to state that I'm a complete n00b in SNESDev.
<br />
<br />Regardless, it's not my code I can't get to run on the PowerPak, it's someone else's.
<br />
<br />I tried some tutorials here and there, read up a bit on the 65816 and then realized something - I should first try to get any kind of example code running on the SNES, because developing for it was/is my ultimate goal.
<br />
<br />That's when MottZilla, who was very helpful with all my newbie questions thus far (thanks, MZ!), showed me to an example I really loved - <a href="http://ekid.nintendev.com/xms" class="postlink">the XMSNES</a> (look for the example demo under Files). Loading a background, "writing" on-screen, music, nicely commented... It had everything. Unfortunately, I can't get it to run with the PowerPak. Not even some tutorial code that worked with bsnes when I used neviksti's SNES init code instead of the one provided for the tutorial.
<br />
<br />I realize I need to fix the header or checksum of any ROM image I assembled, but I really don't know what exactly the PowerPak expects and how I am to achieve it. With the help of Jeroen, I tried fooling around SNES-Tool, but that didn't really work. Maybe we were doing it the wrong way. Any and all game ROM images work with the PowerPak, but nothing easier such as a couple of lines example code to change the background color or a harder example such as XMSNES seems to work (it complains about lacking internal headers, then something very cryptic; sometimes it even locks up when trying to copy to memory).
<br />
<br />My current failures in being able to run bsnes aside for now (it works with XMSNES and the tutorial code I copied on my gf's laptop, where I can get it to run - on my desktop, it now no longer works with anything (!), it only loads up a black screen), I would really love to see any code I could either understand or begin to understand within a couple of months/years or so tailored for and working with the PowerPak.
<br />
<br />If any of you guys can help me with this or point me to other good examples, please do. Getting into SNESDev from scratch seems to be much harder than the same for NESDev, but I would really like to go that more direct path (I don't mean assembly-wise, as I understand 65816 is mostly a superset of 6502). Any personal success stories on learning about more than 65816 assembly and running code on the SNES PowerPak would also be appreciated.
<br />
<br />Thanks!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat Jan 02, 2010 3:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I had a pretty good background working with the NES when I did some SNES development, so it was fairly comfortable and familiar.  The main thing was all the PPU registers, it's much more complex than NES.  I had to use someone else's initialization code at reset, there's no shame in doing that. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />  After that it took me a little while to set up the VRAM and video mode properly.  But it was smooth sailing after that, after that it was just a matter of keeping in mind the 8/16-bit mode selection so the assembler doesn't make the wrong opcode lengths.
<br />
<br />If you need to fix the checksum (it wouldn't be smart for PowerPak to use that, as most translations/hacks/etc/devbuilds leave it broken) you can use ucon64.  I forget the command, but -help -snes will show all the commands available.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artakserkso</b> [ Sat Jan 02, 2010 6:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Great stuff, Memblers, thanks. I'll try and take a similar path to knowledge.
<br />
<br />Unfortunately, fixing the checksum (ucon -chk) along with converting to gd3 (-gd3) or rewriting the smc header (-smc), even combining the checksum fix and header repair, didn't work with the PowerPak.
<br />
<br />I'd really, really love to see at least some snippet of visually verifiable homebrew code working with the PowerPak. If anyone gets <em>anything</em> working, please drop me a line here.  I'm desperate to see something work.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>d4s</b> [ Sat Jan 02, 2010 6:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Expand the ROM to 4 Mbit and it will most likely work.
<br />PowerPak appears to have problems with smaller ROMs.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artakserkso</b> [ Sat Jan 02, 2010 6:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ahhh, finally some progress. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Expanding to 4Mbit with Lunar Expand (a Windows tool <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />... is there a way to do it with ucon64?) partially worked.
<br />
<br />The colours/graphics are very messed up. XMSNES loads with a very light background color, the graphics are mostly invisible and the font is barely readable (it is almost the same as the background).
<br />
<br />The tutorial code (that should paint the background magenta) turns the screen to a weird, pixelated yellow (and fails to clear the information about copying the ROM to the PowerPak's memory).
<br />
<br />If pictures or the output in LOG.TXT would help clarify, I can post those.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sun Jan 03, 2010 11:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />After expanding you could try using UCON64 to convert the ROM to another format too. Try the GD3 format seeing how it will load the Star Ocean SDD1 perhaps it actually uses the GD3 header information which might help with loading ROMs that cause you problems.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artakserkso</b> [ Sun Jan 03, 2010 12:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I tried expanding xmsnes.smc and magenta.smc with Lunar Expand and UCON64, along with trying both the .smc and .gd3 (thus, 4 possibilities).
<br />
<br />Nothing worked better than before, same problems.
<br />
<br />I was a bit taken aback by the fact that the .smc and .gd3 had 524800 bytes instead of 524288, but I understand those must be the SWC and GD3 headers, consecutively (don't know really why SWC and not SMC, but that's what the PowerPak recognizes it as). For some reason, UCON64 once padded the ROMs to 524288 bytes (when I used it with -pad twice on a ROM). Whatever the number should be, no combination of anything works.
<br />
<br />Same ugly yellow instead of the lovely magenta, same pale XMSNES (although the music works almost perfectly - there is a faint crackle when you listen closely).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>whicker</b> [ Sun Jan 03, 2010 1:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Have you checked to see if your homebrew rom image has the official "Nintendo" information near where the interrupt vectors are? As in, the information about the Internal Name, checksum, mapper (mode 20, 21, etc), ROM size (power of 2), Battery RAM size, version, etc.
<br />
<br />Unless we hear from the man who made this, I don't think copier headers do jack squat.
<br />
<br />Maybe posting log.txt would help. Unlike an emulator that can guess on-the-fly, the physical hardware needs to know exactly how your game pak is "constructed", so to speak.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>d4s</b> [ Sun Jan 03, 2010 2:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">artakserkso wrote:</div><div class="quotecontent">I'd really, really love to see at least some snippet of visually verifiable homebrew code working with the PowerPak. If anyone gets <em>anything</em> working, please drop me a line here.  I'm desperate to see something work.</div>
<br />
<br />Oh, and here's a shameless self plug:
<br />If you want to see homebrew code that runs perfectly on the PowerPak, check out the sourcecode of a game i released some time ago:
<br /><a href="http://gra.dforce3000.de/" class="postlink">http://gra.dforce3000.de/</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artakserkso</b> [ Sun Jan 03, 2010 5:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">whicker wrote:</div><div class="quotecontent">Have you checked to see if your homebrew rom image has the official "Nintendo" information near where the interrupt vectors are? As in, the information about the Internal Name, checksum, mapper (mode 20, 21, etc), ROM size (power of 2), Battery RAM size, version, etc.</div><br />Your post made me realize how much I have to learn.<br /><br />I think there's no point in trying to run "my" code for now. I need to read up more on SNESdev. I certainly won't embarrass myself here by blindly asking away about something I should obviously look up on my own.<br /><br /><div class="quotetitle">d4s wrote:</div><div class="quotecontent">Oh, and here's a shameless self plug:<br />If you want to see homebrew code that runs perfectly on the PowerPak, check out the sourcecode of a game i released some time ago:<br /><!-- m --><a class="postlink" href="http://gra.dforce3000.de/">http://gra.dforce3000.de/</a><!-- m --></div>
<br />OMG! That's <em>exactly</em> what I need! Thanks a million! When I first found this forum, I saw and acknowledged the game's (and source code's) existence, but I never imagined that studying the code would be a plausible idea. It truly does work perfectly with the PowerPak! All that code is very intimidating, though... If you have any invaluable advice on what it takes to understand it, I'm all ears!
<br />
<br />Now that I have seen the overall scarcity of good tutorials and introductory information, <em>especially</em> considering the fact that some good stuff doesn't run on the PowerPak out of the box (XMSNES, for example... also, Skipp and Friends which I just tried - the .smc doesn't load all the level graphics for some reason ((most of the level is white and you don't know where the walls are)), and when converted to .gd3 it doesn't work at all: <a href="http://pastebin.ca/1736842" class="postlink">here's the LOG.TXT</a>), N-Warp Daisakusen seems too good to be true.
<br />
<br />Oh, right... XMSNES and the tutorial code I initially wanted to run have very similar LOG.TXTs to that linked to in the parentheses above (sorry for its bad formatting, it was pasted verbatim).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>whicker</b> [ Sun Jan 03, 2010 8:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hey, nobody should be embarrassed right now. None of this stuff is intuitive. For info on the internal header, it's in the official SNES developer manual (google is your friend).
<br />
<br />The Powerpak log.txt confirms it can't find a viable internal header, so it's either guessing wrong or doesn't know what to do.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Mon Jan 04, 2010 1:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The <a href="http://www.romhacking.net/docs/121/" class="postlink">SNES documentation</a> I wrote long ago should contain a demo/intro with source code that you can assemble using TRASM (now known as x816; should work there with little modification, if any).  It should be called TEST.LZH (yes, an LZH/LHA within a ZIP file).  This intro was written + tested on actual hardware and not emulators (we didn't have such back in the day :P).  It'd be a good starting point.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artakserkso</b> [ Mon Jan 04, 2010 4:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for the tips, guys!
<br />
<br />I'm sure I'll have many questions when I learn some more.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ikari_01</b> [ Sat Feb 19, 2011 1:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">artakserkso wrote:</div><div class="quotecontent">also, Skipp and Friends which I just tried - the .smc doesn't load all the level graphics for some reason ((most of the level is white and you don't know where the walls are))</div>
<br />
<br />The game doesn't initialize $2132 properly, leading to wrong layer1+2 colors on real hardware. It's not the PowerPak's fault <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br /><a href="http://sd2snes.de/files/misc/SAF-realhardware.zip" class="postlink">Here's a fixed version.</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>KungFuFurby</b> [ Sun Feb 20, 2011 7:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Skipp and Friends doesn't actually use XMSNES, but uses SNESMod. SNESMod is by the same person that made XMSNES. See <!-- m --><a class="postlink" href="http://snes.mukunda.com/">http://snes.mukunda.com/</a><!-- m --> .
<br />
<br />If you can get a game up and running that uses XMSNES, I'd be really surprised... ^_^

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
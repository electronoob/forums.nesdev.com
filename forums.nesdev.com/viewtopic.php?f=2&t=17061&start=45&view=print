<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - What's the reason for the missing PPU cycle on even frames?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">What's the reason for the missing PPU cycle on even frames?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=17061">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=17061</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Thu Mar 01, 2018 2:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />On a well-formed 480i NTSC signal, there are exactly 227.5 × 262.5 = 59718.75 chroma cycles per vertical refresh, so it actually takes 4 fields for the chroma phases to cancel out again.<br /><br />With a 240p signal, it's a bit harder. The most-frequently done and most problematic thing done was to use 228 chroma cycles per scanline. (CGA, Apple 2, Master System, Genesis). Crosstalk artifacts occur at fixed X positions on every scanline, but aren't a function of which scanline. This produces a stable image, but produces very visible artifacts if there's any movement. As nocash says, &quot;perfect ugliness&quot;.<br /><br />The simplest thing to do would be to have the right hsync rate – 227.5 chroma cycles per scanline – with some odd number of scanlines.<br /><br />In fact, the NTSC VIC-20 does. It uses a pixel clock of 260÷227.5 times the chroma carrier, and generates 261 total scanlines, for a total of 59377.5 chroma cycles per vertical refresh, and thus both every scanline and every field is exactly opposite the phase of the previous.<br /><br />The NTSC C64 apparently came with two revisions of the VIC-2. Both used a 8 2/11 MHz pixel clock, but one apparently used 224 chroma cycles per scanline and 262 scanlines (...?) generating stable but highly-visible artifacts; the later revision generated 227.5 chroma cycles per scanline and 263 scanlines, achieving the same objectives as the VIC-20. <a href="http://www.antimon.org/dl/c64/code/stable.txt" class="postlink">(see also)</a><br /><br />The NTSC NES and SNES both start with 227 <sup>1</sup>/<sub>3</sub> chroma cycles per scanline. The video generated by the NES dramatically exceeds the chrominance bandwidth that would be transmitted over-the-air, and they decided that having the chroma interference pattern repeat every 3 fields wasn't desirable. By removing one pixel = 2/3 of a chroma cycle every other vsync, they got something close to the desired 30Hz stability.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Mar 01, 2018 3:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />How does that compare to my previous suggestion of 227.5x262, but drop one-sixth of a chroma cycle (thus 227 1/3) during each of the three cycles of vsync?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Thu Mar 01, 2018 3:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'd say it's easier to just do the same as the VIC-20 or later C64s and have an odd total number of scanlines...<br /><br />I mean, either way, you get a 180° phase shift from scanline to scanline and also from field to field, which is the only metric I've thought of for evaluating this...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>NewRisingSun</b> [ Thu Mar 01, 2018 3:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, at least the NES' designers weren't as lazy as the Apple IIs, which uses an integer number of color cycles per scanline. This makes cross-color artifacts consistent from line to line and field to field. In fact, since the pixel clock also is a multiple of the color subcarrier frequency, the cross-color artifacts <em>are</em> all the color there is, as the Apple II itself does not generate any color at all, other than the color burst in the back porch!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Great Hierophant</b> [ Thu Mar 01, 2018 9:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I would not call the Steve Wozniak lazy when his design for the Apple II's mainboard (which was almost totally a one-man effort) was the first practical and consumer affordable solution to display color graphics on regular TVs without specialized hardware.  It was a cool hack of the NTSC decoding system that was sufficiently reliable and cheap enough to use for the first color consumer computer.<br /><br />However, the Tandy CoCo doesn't have the excuse of coming first.  The CoCo's startup composite artifact colors are random when you boot the computer.  &quot;Pixel 0&quot; may be orange or blue depending on where in the clock cycle the system starts up into, and you would have to reset the system until you got the &quot;right&quot; colors.  That doesn't happen on an Apple II, you know even lines will be purple/blue dominant and odd lines green/orange dominant.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri Mar 02, 2018 1:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You can literally think of the four bits in chroma period of the Apple 2 (or CGA)'s output as literally being the four samples [Y+U] [Y+V] [Y-U] [Y-V] <span style="font-size: 67%; line-height: normal">(or maybe reverse that?)</span>. Doing so even makes it easy to see why you get two identical greys out of the Apple 2 or from CGA artifact colors—they're the ones where +U and -U are the same, vs +V and -V are the same.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Oziphantom</b> [ Fri Mar 02, 2018 6:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">On a well-formed 480i NTSC signal, there are exactly 227.5 × 262.5 = 59718.75 chroma cycles per vertical refresh, so it actually takes 4 fields for the chroma phases to cancel out again.<br /><br />With a 240p signal, it's a bit harder. The most-frequently done and most problematic thing done was to use 228 chroma cycles per scanline. (CGA, Apple 2, Master System, Genesis). Crosstalk artifacts occur at fixed X positions on every scanline, but aren't a function of which scanline. This produces a stable image, but produces very visible artifacts if there's any movement. As nocash says, &quot;perfect ugliness&quot;.<br /><br />The simplest thing to do would be to have the right hsync rate – 227.5 chroma cycles per scanline – with some odd number of scanlines.<br /><br />In fact, the NTSC VIC-20 does. It uses a pixel clock of 260÷227.5 times the chroma carrier, and generates 261 total scanlines, for a total of 59377.5 chroma cycles per vertical refresh, and thus both every scanline and every field is exactly opposite the phase of the previous.<br /><br />The NTSC C64 apparently came with two revisions of the VIC-2. Both used a 8 2/11 MHz pixel clock, but one apparently used 224 chroma cycles per scanline and 262 scanlines (...?) generating stable but highly-visible artifacts; the later revision generated 227.5 chroma cycles per scanline and 263 scanlines, achieving the same objectives as the VIC-20. <a href="http://www.antimon.org/dl/c64/code/stable.txt" class="postlink">(see also)</a><br /><br />The NTSC NES and SNES both start with 227 <sup>1</sup>/<sub>3</sub> chroma cycles per scanline. The video generated by the NES dramatically exceeds the chrominance bandwidth that would be transmitted over-the-air, and they decided that having the chroma interference pattern repeat every 3 fields wasn't desirable. By removing one pixel = 2/3 of a chroma cycle every other vsync, they got something close to the desired 30Hz stability.</div><br /><br />The 64 clock NTSC VIC-II is a mistake, and only the very early revision NTSC 64s had the chip, as most of these were the &quot;Sparkle&quot; C64s most 64 chips are gone( the replaced the VIC-II when they replaced the CHARGEN) . 65 clock is the standard.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Fri Mar 02, 2018 2:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Did people use to use TVs as computer monitors a lot?  It's weird how many old computers have composite video.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Revenant</b> [ Fri Mar 02, 2018 3:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />VGA connectors didn't exist until 1987. Plenty of actual computer monitors used composite prior to that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri Mar 02, 2018 3:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, before the VGA card, in the US, there wasn't really a widespread standard video connector other than baseband CVBS via RCA jack. Even S-Video on the MiniDIN-4 was introduced at the same time as VGA - 1987.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Fri Mar 02, 2018 3:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I find that strange because composite requires more circuitry.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri Mar 02, 2018 3:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So does modulating to RF. It's not about complexity of the generator; it's about being able to take advantage of the monitors (televisions) that people already had rather than requiring that they buy a new monitor.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Mar 02, 2018 3:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Correct. A composite output for use with the composite monitor that one already owns is less circuitry than an RGB output and a bespoke monitor.<br /><br /><strong>Ninja'd twice</strong> while trying to post the following:<br /><br />Before 1987: Most home computers came with composite output of some sort.<br /><br />1987 through 2007: The dark ages of most people not knowing to connect a personal computer to a television. Because processing, storage, and network communication weren't yet up to the task of SD full-motion video, computers were seen as tools to display large amounts of text. It was possible to use a <a href="https://pineight.com/mw/index.php?title=Cable_finder" class="postlink">scan converters to downscale VGA to composite or S-Video</a>, but these were expensive and hard to find, and few PC applications were designed to work with standard definition. This gave the console makers a monopoly on the living room, apart from <a href="https://pineight.com/mw/index.php?title=HTPCs_are_for_geeks" class="postlink">a minority of geeks</a>, and large game publishers a cartel on <a href="https://pineight.com/mw/index.php?title=Single-screen_multiplayer" class="postlink">single-screen multiplayer</a>.<br /><br />2007 to present: Most TVs come with HDMI input, which can display HDMI or DVI-D output. Many also come with VGA input. It became even easier in fourth quarter 2015 when Valve introduced the <a href="https://en.wikipedia.org/wiki/Steam_Link" class="postlink">Steam Link thin client</a>, as the PC no longer has to be in the same room as the TV.<br /><br />2012: The successful crowdfunding of the OUYA console shows demand for indie games on a TV, even if the end product underwhelms. Over the next few years, this causes console makers to open their developer programs to smaller studios in order to keep living room PCs from taking over.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Oziphantom</b> [ Fri Mar 02, 2018 11:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">Did people use to use TVs as computer monitors a lot?  It's weird how many old computers have composite video.</div><br /><br />Yes, almost as &quot;The standard&quot;, if you had a monitor you were a rich kid. You are use to the modern &quot;TVs cost nothing&quot; world. Back in the late 70s and 80s TV were expensive &quot;furniture&quot; like items. <br />For example a VIC-20 cost you $99, but a Monitor for it would cost you $395. So if you have to have a monitor with the VIC-20 the computer costs you $494, if you can use the TV you already own it costs to $99. <br /><br />By 88 seems you could get a 1084 for $289 while a C128 would cost you $244. Mean while you could get a C64 for $154 and use the TV you already have. You could add a 1802 to the 64 for better picture for $164. That is basically the tipping point, by the time you get the IIgs the machine is $999 and a monitor is still $499.<br /><br />A disk drive for the C64 was $164. So you could have a C64 + Monitor or a C64+Disk drive+Game for the same price. If you already had a TV you would use it and take the Disk Drive.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Mon Mar 05, 2018 1:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I find it pretty funny how a lot of Europeans online say that skin colors on NTSC appear as either green or purple, yet, I never seen it happen on any of the TVs I had.  If these Europeans actually seen North Amercian TV sets, they must be either way older than me or they watched TV with one of those people who just leave the tint control in a funny place.<br /><br />Saturation and black levels were always my pet peeve with NTSC.  They were always inconsistent from one channel to the next.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
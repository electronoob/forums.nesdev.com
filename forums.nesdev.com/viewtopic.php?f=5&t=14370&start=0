<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Is there a known algorithm for this?</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="https://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="https://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="https://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="https://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - General Stuff" href="https://forums.nesdev.com/feed.php?f=5" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Is there a known algorithm for this?" href="https://forums.nesdev.com/feed.php?f=5&amp;t=14370" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=5&amp;t=14370';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:23 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=5">General Stuff</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=5&amp;t=14370">Is there a known algorithm for this?</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=5"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=5&amp;t=14370"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 28 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=5&amp;t=14370&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=5&amp;t=14370&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=5&amp;t=14370&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=5&amp;t=14370&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=5&amp;t=14370&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p172943"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172943">Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172943#p172943"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 11:22 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'm toying with a new type of level map compression (will share the details later if the results are good), and in order to make the most out of it, at one point I need to combine several strips of numbers (all strips are the same length) into one long strip. The resulting strip should be the shortest possible combination of all strips, which must be overlaid in a way that makes optimal use of any redundancy that might exist.<br /><br />For example, if I need to combine the strips &quot;AABBBBBAAAAA&quot; and &quot;AAAAACCAAAAA&quot;, the result would be &quot;AABBBBBAAAAACCAAAAA&quot;. This is simple when you only have a handful of strips, but with several hundred of them it's easy to make the wrong choices. My current idea is the following:<br /><br />1 - Find the longest overlap for each strip and save this information (length of the overlap, index of the strip);<br />2 - Find the longest overlap among all strips, using the previously calculated values (if the longest overlap is 0, go to step 7);<br />3 - Join the two strips that are involved in the longest overlap and mark both original slots &quot;empty&quot;;<br />4 - Add the new strip to the end of the list and find the longest overlap for it;<br />5 - Find the longest overlap for any strips that had the removed strips as their longest overlaps;<br />6 - Go to step 2;<br />7 - There are no more overlaps, so concatenate all the strips, ignoring the empty slots;<br /><br />That seemed OK to me at first, but now I have the impression that by combining the best possible pair at each step, I might be botching future combinations that would result in larger gains, but I can't seem to think of a better way to do this. This is why I'm asking here if anyone knows of an algorithm (or can come up with one on the spot!) that can solve this problem optimally.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p172947"></a>
				<b class="postauthor">3gengames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172947">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172947#p172947"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 11:37 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly 65024U</td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Mar 27, 2010 12:57 pm<br /><b>Posts:</b> 2262
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Sounds like you want a dictionary based compression method. It might waste a few bytes because of it having to reference the dictionary, but I believe as the data set grows it'd be better than anything else, as like runs will get down to just single bytes if they are referenced multiple times and it would be acceptable.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4311"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p172949"></a>
				<b class="postauthor">pubby</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172949">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172949#p172949"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 11:50 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7486_1460669286.png" width="50" height="50" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Mar 31, 2016 11:15 am<br /><b>Posts:</b> 334
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">At a quick glance it sounds like the traveling salesman problem. You have a weighted directed graph where the strips are the nodes and the amount of overlap between strips form the edge weights. Finding the optimal path that visits each node once sounds very much like TSP, but then again I haven't thought about this very hard.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7486"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p172951"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172951">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172951#p172951"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 12:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">This is the <a href="https://en.wikipedia.org/wiki/Shortest_common_supersequence_problem" class="postlink">shortest common supersequence problem</a>, and it indeed <a href="https://stackoverflow.com/a/10286529/2738262" class="postlink">appears related to the traveling salesman problem</a>. For a general set of strings, it is NP-complete.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p172956"></a>
				<b class="postauthor">calima</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172956">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172956#p172956"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 12:29 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Oct 06, 2015 10:16 am<br /><b>Posts:</b> 778
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Surely you can brute-force it with NES-sized data?<br /><br />It's a n! problem, but if you did it in sets of say 12 strings, it would still compute fast, and likely have a better result than just with pairs.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7237"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p172969"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172969">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172969#p172969"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 1:32 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">Sounds like you want a dictionary based compression method.</div><br />Yes, and I want to make the dictionary as compact as possible.<br /><br /><div class="quotetitle">pubby wrote:</div><div class="quotecontent">At a quick glance it sounds like the traveling salesman problem.</div><br />I've never been good at solving that! <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">You have a weighted directed graph where the strips are the nodes and the amount of overlap between strips form the edge weights. Finding the optimal path that visits each node once sounds very much like TSP, but then again I haven't thought about this very hard.</div><br />Makes sense.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">This is the <a href="https://en.wikipedia.org/wiki/Shortest_common_supersequence_problem" class="postlink">shortest common supersequence problem</a></div><br />Thanks for finding the name of the problem! Now I can see if I can find any interesting ways of solving it.<br /><br /><div class="quotetitle">calima wrote:</div><div class="quotecontent">Surely you can brute-force it with NES-sized data?</div><br />I don't know... Even with tens of strips, trying all permutations isn't feasible, let alone with 500!<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> if you did it in sets of say 12 strings</div><br />Which 12 strings, though? Those that are involved in the longest overlaps? What kind of selection would make me lose less opportunities?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p172972"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172972">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172972#p172972"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 1:58 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Found an <a href="http://www.cs.jhu.edu/~langmea/resources/lecture_notes/assembly_scs.pdf" class="postlink">interesting presentation</a> on this subject. The greedy version described there is exactly what I was planning on doing:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">At each step, the greedy algorithm “greedily” chooses longest remaining overlap, merges its source and sink</div><br />Then it says this:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But greedy algorithm is a good approximation; i.e. the superstring yielded by the greedy algorithm won’t be more than ~2.5 times longer than true SCS (see Gus!eld 16.17.1)</div><br />How is 2.5 times longer a good approximation?!?! <img src="./images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p172974"></a>
				<b class="postauthor">pubby</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172974">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172974#p172974"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 2:03 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7486_1460669286.png" width="50" height="50" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Mar 31, 2016 11:15 am<br /><b>Posts:</b> 334
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Well you can always attempt to improve an imperfect solution using an optimization technique like hill climbing or simulated annealing.<br /><br />So let's say that you knew the order of the strips. &quot;AABBBBBAAAAA&quot; comes first and &quot;AAAAACCAAAAA&quot; comes second and so on.<br /><br />Can you figure out the minimum length required when all of these strips are combined in their given order? It shouldn't be too hard or computationally intensive -- just a little bit hard. Some type of dynamic programming is probably the answer.<br /><br />When you have that figured out the optimization techniques are easy. Just modify the order of the strips and compare lengths. Keep the shorter lengths and discard the rest.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7486"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p172975"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172975">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172975#p172975"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 2:12 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">pubby wrote:</div><div class="quotecontent">Can you figure out the minimum length required when all of these strips are combined in their given order?</div><br />Yes, this is the easy part. Figuring out the optimal order is the tough task.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Just modify the order of the strips and compare lengths.</div><br />But I can't possibly test every possible order! Even if I had only 20 strips total, there'd be 20! = 2432902008176640000 permutations! With 500 strips the number of permutations is practically infinite...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p172978"></a>
				<b class="postauthor">pubby</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172978">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=172978#p172978"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 2:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7486_1460669286.png" width="50" height="50" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Mar 31, 2016 11:15 am<br /><b>Posts:</b> 334
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">What I was getting at was that you can turn an imperfect solution into a much-better-but-not-perfect solution in only a few hundred iterations of improvement. Start with a greedy algorithm and then apply an optimization technique until it's &quot;good enough&quot;.<br /><br />Read up on <a href="https://en.wikipedia.org/wiki/Simulated_annealing" class="postlink">simulated annealing</a> to see what I mean. It's probabilistic. You check a certain number of random permutations and then stop. Diminishing returns, etc.<br /><br />(And this is a common way of solving the salesman problem. Start with a simple nearest-neighbor approach, similar to your greedy algorithm, and then improve it for several iterations with hill climbing.)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7486"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p173006"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p173006">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=173006#p173006"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 4:47 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I wrote a program that does this (except all blocks are not a fixed size), but it doesn't really try for absolutely optimal. Here's some of its log file:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Chunks to Export: 81 <br /><br />Found block $00C. Looking for a good merge match. Attempting to merge Block 00C <br />and Block 005... <br /><br />Block 00C: <br />$00$0E$01$04$00$00$03$03$14$17$09$03$00$1D$04$09$20$00$10$24$09$28$00$1D$2D$2E$3 <br />0$04$09$03$00$37$1D$04$0E$09$48$72$02$03$01$4F$7A$53$10$1D$1D$17$1D$03$04$56$42$ <br />00$34$28$16$3C$4F$00$1C$53$48$3E$03$09$46$09$09$5A$03$5F$63$85$82$93$A2$82$80$94 <br />$8E$96$00$98$93$94$02$02$9B$9F$9D$00$8F$02$98$A1$8A$D5$D3$A8$A6$D7$D1$B5$B3$D1$D <br />3$A4$02$B1$02$02$AA$AC$B0$A8$7D$03$7F$F2$59$03$03$03$68$03$68$03$03$03$03$FF$FD$ <br />DF$DF$FE$03$AD$AA$AF$03$E1$AC$AF$DF$DF$DF$03$C6$FD$D9$DB$C7$C9$C6$C0$C7$4F$C9$C6 <br />$C0$53$D0$48$D0$C6$C0$00$BB$00$CF$00$BB$CF$00$BD$BD$C0$4D$64$00$F4$F4$05$03$03$0 <br />3$00$00$00$05$05$03$05$03$00$00$00$00$00$00$00$F0$00$00 <br />Block 005: <br />$00$00$00$00$00$00$00$00$00$00$20$20$20$20$30$30$30$30$30$30$30$30$10$10$10$10$1 <br />0$10$10$10$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$40$40$40$40$18$18$ <br />18$20$20$40$40$40$40$40$40$40$40$40$40$40$40$40$40$40$40$40$40 <br /><br />Beginning merge. Best offset is 203. <br /><br />Merged size: 277. mergeddata initialized. <br /><br />$00$0E$01$04$00$00$03$03$14$17$09$03$00$1D$04$09$20$00$10$24$09$28$00$1D$2D$2E$3 <br />0$04$09$03$00$37$1D$04$0E$09$48$72$02$03$01$4F$7A$53$10$1D$1D$17$1D$03$04$56$42$ <br />00$34$28$16$3C$4F$00$1C$53$48$3E$03$09$46$09$09$5A$03$5F$63$85$82$93$A2$82$80$94 <br />$8E$96$00$98$93$94$02$02$9B$9F$9D$00$8F$02$98$A1$8A$D5$D3$A8$A6$D7$D1$B5$B3$D1$D <br />3$A4$02$B1$02$02$AA$AC$B0$A8$7D$03$7F$F2$59$03$03$03$68$03$68$03$03$03$03$FF$FD$ <br />DF$DF$FE$03$AD$AA$AF$03$E1$AC$AF$DF$DF$DF$03$C6$FD$D9$DB$C7$C9$C6$C0$C7$4F$C9$C6 <br />$C0$53$D0$48$D0$C6$C0$00$BB$00$CF$00$BB$CF$00$BD$BD$C0$4D$64$00$F4$F4$05$03$03$0 <br />3$00$00$00$05$05$03$05$03$00$00$00$00$00$00$00$F0$00$00$00$00$00$00$00$00$00$00$ <br />20$20$20$20$30$30$30$30$30$30$30$30$10$10$10$10$10$10$10$10$00$00$00$00$00$00$00 <br />$00$00$00$00$00$00$00$00$00$00$40$40$40$40$18$18$18$20$20$40$40$40$40$40$40$40$4 <br />0$40$40$40$40$40$40$40$40$40$40 <br /><br />Blocks merged. <br /><br />Found block $00B. Looking for a good merge match. Attempting to merge Block 00B <br />and Block 00C... <br /><br />Block 00B: <br />$00$0E$01$04$00$00$03$03$14$17$09$03$00$1D$04$09$20$00$10$24$09$28$00$1D$2D$2E$3 <br />0$04$09$03$00$37$1D$04$0E$09$48$72$02$03$01$4F$7A$53$10$1D$1D$17$1D$03$04$56$42$ <br />00$34$28$16$3C$4F$00$1C$53$48$3E$03$09$46$09$09$5A$03$5F$63$85$82$93$A2$82$80$94 <br />$8E$96$00$98$93$94$02$02$9B$9F$9D$00$8F$02$98$A1$8A$D5$D3$A8$A6$D7$D1$B5$B3$D1$D <br />3$A4$02$B1$02$02$AA$AC$B0$A8$7D$03$7F$F2$59$03$03$03$68$03$68$03$03$03$03$FF$FD$ <br />DF$DF$FE$03$AD$AA$AF$03$E1$AC$AF$DF$DF$DF$03$C6$FD$D9$DB$C7$C9$C6$C0$C7$4F$C9$C6 <br />$C0$53$D0$48$D0$C6$C0$00$BB$00$CF$00$BB$CF$00$BD$BD$C0$4D$64$00$F4$F4$05$03$03$0 <br />3$00$00$00$05$05$03$05$03$00$00$00$00$00$00$00$F0$00$00$00$00$00$00$00$00$00$00$ <br />20$20$20$20$30$30$30$30$30$30$30$30$10$10$10$10$10$10$10$10$00$00$00$00$00$00$00 <br />$00$00$00$00$00$00$00$00$00$00$40$40$40$40$18$18$18$20$20$40$40$40$40$40$40$40$4 <br />0$40$40$40$40$40$40$40$40$40$40 <br />Block 00C: <br />$00$0F$0F$04$00$00$03$03$00$18$04$0A$1A$1E$0A$03$23$00$25$26$0A$27$00$2C$2D$00$3 <br />1$34$04$0A$35$1D$04$0A$0F$03$49$73$4C$76$0F$50$7B$54$25$2C$1E$3A$04$03$30$57$23$ <br />00$25$41$00$34$50$1B$1F$54$4C$47$0A$0A$40$03$0A$5B$5E$60$03$86$83$92$89$91$81$95 <br />$A3$97$00$99$92$95$9A$02$9C$02$9E$00$90$02$A0$9E$8B$D6$D4$A9$A7$D8$D2$B6$B4$D2$D <br />4$A5$02$B2$02$02$AB$AD$AF$AF$64$03$64$F2$03$74$03$03$66$03$69$62$03$03$03$DD$DD$ <br />03$FE$DD$DD$E2$AB$DD$B0$AA$AD$03$A8$03$FF$03$BC$DD$DA$DC$C8$CA$BC$C5$C8$C5$CA$49 <br />$C5$64$64$4C$49$BC$C5$B7$BC$D0$00$B7$52$00$48$00$00$C1$4E$00$D0$03$04$04$03$F8$F <br />8$00$00$00$06$04$03$06$03$00$00$00$00$00$00$00$F1$00$00 <br /><br />Beginning merge. Best offset is -204. <br /><br />Merged size: 481. mergeddata initialized. <br /></div><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">No compressable blocks found<br /><br />Blocks Merged: 457<br />Blocks Tagged: 289<br /><br />Bytes Saved: 725<br /></div><br />I guess I shouldn't be surprised it's been thought of before, and now I have the actual name rather than what I've been calling it I guess. It's one of a few parts to how I store some very large maps in 16KB. This merges RLE compressed blocks with each other (and a few other things.)<br /><br />Even without doing it optimally, you'll get decent savings. (But whether this is okay depends on your whole goal I guess.) I actually think the steps you described are better than what this does to search. I didn't need best, I only did it because it was &quot;free&quot; compression. (No extra cycles spent decompressing at run time.) The block lengths are known, it doesn't matter if the one ends how another starts.<br /><br />I might share the code, but I'm not convinced ripping it out of what it's currently part of to use generically will be easy enough for me to bother. I'll certainly watch this topic with interest, I might even attempt to implement your steps into mine to see if I get better savings.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p173008"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p173008">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=173008#p173008"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 5:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">pubby wrote:</div><div class="quotecontent">Read up on <a href="https://en.wikipedia.org/wiki/Simulated_annealing" class="postlink">simulated annealing</a> to see what I mean. It's probabilistic. You check a certain number of random permutations and then stop. Diminishing returns, etc.</div><br />I will check it out. Thanks for the tip.<br /><br /><div class="quotetitle">Kasumi wrote:</div><div class="quotecontent">(except all blocks are not a fixed size)</div><br />This doesn't matter at all in my algorithm either, I just mentioned this in case it made any difference for someone else coming up with another idea.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Here's some of its log file:</div><br />Interesting... You're apparently attempting to merge blocks with previous blocks as soon as they are found, is that right? I can see why that wouldn't be optimal, since a premature merge prevents better merges from happening with future blocks. I was originally gonna do it like this, but opted for getting all blocks ready first to avoid making crappy merges.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I guess I shouldn't be surprised it's been thought of before, and now I have the actual name rather than what I've been calling it I guess.</div><br />I was sure this had a proper name, since it seemed like a common programming problem. One of the reasons I started the thread was my conviction that tepples would know the name! <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It's one of a few parts to how I store some very large maps in 16KB. This merges RLE compressed blocks with each other (and a few other things.)</div><br />I'm also planning on using this for large maps, while still keeping them accessible directly from ROM (which is why the strips are all the same length, they're not compressed).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Even without doing it optimally, you'll get decent savings. (But whether this is okay depends on your whole goal I guess.)</div><br />I'll just try the greedy algorithm I described and see how much space I can save with that. It was good to find that presentation that validated my approach as an acceptable solution for the problem. <br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I only did it because it was &quot;free&quot; compression. (No extra cycles spent decompressing at run time.) The block lengths are known, it doesn't matter if the blocks overlap if they start and end the same.</div><br />Yes, for the decompressor it doesn't make any difference, there's no performance hit whatsoever. The amount of compression I get from this will be very decisive though... I can't possibly go with this scheme if the compression isn't significant.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I might share the code, but I'm not convinced ripping it out of what it's currently part of to use generically will be easy enough for me to bother.</div><br />You could describe it, though.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p173009"></a>
				<b class="postauthor">Myask</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p173009">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=173009#p173009"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 5:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6603_1469162638.png" width="32" height="40" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 12, 2014 3:04 pm<br /><b>Posts:</b> 958
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">even if you can't check all permutations(because N!), checking all pairs is &quot;reasonably&quot; quick O(Ln²) to do your greedy algorithm (remember to check BA as well as AB merges). You then can just inherit the longest string-matches from each end, unless it was the entire string (as it's stopping within the new, longer string).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6603"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p173010"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p173010">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=173010#p173010"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 5:47 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Myask wrote:</div><div class="quotecontent">checking all pairs is &quot;reasonably&quot; quick O(Ln²) to do your greedy algorithm (remember to check BA as well as AB merges). You then can just inherit the longest string-matches from each end</div><br />Yes, that's my plan. Test all pairs, and merge the pair with the greatest overlap. Then I test only the blocks that were affected by the merge (i.e. the newly formed block and any blocks that wanted to pair with the ones that were merged), to keep the information updated. Then I keep merging and testing affected blocks until there's nothing left to merge, at which point I concatenate all remaining blocks to form the final block.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p173011"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p173011">Re: Is there a known algorithm for this?</a></div><div style="float: right;"><a href="./viewtopic.php?p=173011#p173011"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 07, 2016 5:58 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I look for the largest block. I check all other blocks and merge with whatever one would get me the most savings with that largest block (if a merge exists that would give <em>any</em> savings). Then do it again. <br /><br />Which usually means, yes, whatever was the first largest block basically keeps getting bytes added to it until it's like 2KB. Then nothing else can be added to it and it finds a new largest block and starts making that one huge.<br /><br />What you describe (just looking for best merge match for all blocks ignoring which is the largest block) should absolutely beat it. It's true that might not get the best because different and better combinations might be made from future merges. My reasoning behind going with the largest block is that other blocks might fit entirely within it (00 00 00 fits in 50 23 00 00 00 84). This alone made it work pretty well on uncompressed data.<br /><br />If I just do this not in addition to the RLE thing, I think it was something like 5KB of savings, rather than 725 bytes. (Not even close, see edit below.) I don't have the exact data for just that, but you might get similar big savings since you said your data is uncompressed. For my data, I basically end up nickel and diming single bytes (XXXXXX 00 and 00 XXXXXX will merge) but it ended up being enough on top to fit all I had before a level format change into the same 16KB it fit into before I added a new data structure so I didn't attempt to improve it.<br /><br />&quot;RLE bytes saved: 5087&quot;+&quot;Bytes Saved: 725&quot; (from the merge) was greater than just merging without RLE. (Not by a lot.) (Yes by a lot, see edit below.) It's possible that done more optimally I wouldn't need RLE, so I'm certainly interested. I might play around with it a bit.<br /><br />Edit: Wow, I have no idea why I went with largest block. It wasn't even really easier to program.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Bytes Saved: 853<br /></div><br />An extra 128 bytes to call my very own! I just changed it to look for the best match of all blocks. It doesn't do anything smart as far as time optimization (like only updating counts for blocks who best paired with one of the merged ones), it just checks all every time. This is for 746 total blocks, so I basically get a byte per block. (The 81 chunks from the previous post is something else.)<br /><br />I kind of want to see if this alone will beat RLE+this now, but that's harder to check. I suppose I'm not contributing much in any case, but thanks for making me revisit this.<br /><br />Edit2: It turned out to not be hard to check. It loses alone. <br />3922 bytes for merge vs. 5940 for merge+RLE.<br />Largest block method saved 3191 alone. 731 bytes is a pretty substantial difference on the uncompressed data with different merge methods.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=5&amp;t=14370"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=5"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=5&amp;t=14370"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 28 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=5&amp;t=14370&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=5&amp;t=14370&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=5">General Stuff</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <a href="./memberlist.php?mode=viewprofile&amp;u=6595">93143</a>, <span style="color: #9E8DA7;" class="username-coloured">Google [Bot]</span> and 7 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="14370" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5" selected="selected">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
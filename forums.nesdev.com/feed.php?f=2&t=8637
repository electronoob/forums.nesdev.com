<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=8637" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2012-03-29T05:52:09-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=8637</id>
<entry>
<author><name><![CDATA[slobu]]></name></author>
<updated>2012-03-29T05:52:09-07:00</updated>
<published>2012-03-29T05:52:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91954#p91954</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91954#p91954"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91954#p91954"><![CDATA[
What about just using the offsets in Game Genie codes for Battletoads?  In effect, Codemasters has already figured out the non-graphic areas that effect gameplay.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4942">slobu</a> — Thu Mar 29, 2012 5:52 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2012-03-28T12:38:37-07:00</updated>
<published>2012-03-28T12:38:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91919#p91919</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91919#p91919"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91919#p91919"><![CDATA[
Ah, didn't realize he wanted the opposite, but he can do the same thing... wait until the level is loaded, then corrupt the ROM in memory. CHR-RAM will be fine since it's already loaded.<br /><br />Tepples' idea is good too.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Wed Mar 28, 2012 12:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2012-03-28T07:13:30-07:00</updated>
<published>2012-03-28T07:13:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91910#p91910</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91910#p91910"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91910#p91910"><![CDATA[
<div class="quotetitle">Kasumi wrote:</div><div class="quotecontent"><br />Except I think he wants to know where the graphics are so he can AVOID corrupting them and only change program code<br /></div><br />Can't FCEUX do both code/data logging and movie playback? Try this: Play back a TAS of the game with CDL turned on, save the CDL, and then corrupt only areas that show up as code in the CDL. Or do the existing movies of Battletoads desync in FCEUX?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Mar 28, 2012 7:13 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Kasumi]]></name></author>
<updated>2012-03-28T07:09:07-07:00</updated>
<published>2012-03-28T07:09:07-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91908#p91908</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91908#p91908"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91908#p91908"><![CDATA[
Except I think he wants to know where the graphics are so he can AVOID corrupting them and only change program code when he randomly changes bytes. <br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I need to figure out where all the CHR data is (as corrupting CHR is rather boring/lame)<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3504">Kasumi</a> — Wed Mar 28, 2012 7:09 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2012-03-28T05:01:58-07:00</updated>
<published>2012-03-28T05:01:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91907#p91907</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91907#p91907"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=91907#p91907"><![CDATA[
Another thought: instead of dealing with the compression, in an emulator with scripting support, you could just wait until the level is loaded, and then corrupt CHR RAM at that point.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Wed Mar 28, 2012 5:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Reaper_Man]]></name></author>
<updated>2012-03-02T13:02:52-07:00</updated>
<published>2012-03-02T13:02:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90809#p90809</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90809#p90809"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90809#p90809"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />If you're just trying to find stuff, I can see most of the graphics in YY-CHR.  Compressed graphics just look a little different and aren't whole, but since they are still byte aligned, they are partially recognizable.<br /></div><br /><br />okay, that info'll help, thanks.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=661">Reaper_Man</a> — Fri Mar 02, 2012 1:02 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2012-02-26T23:23:00-07:00</updated>
<published>2012-02-26T23:23:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90617#p90617</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90617#p90617"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90617#p90617"><![CDATA[
I told you everything I already know about it.<br /><br />If you have a really specific question, and it wouldn't take me long to figure out, I can maybe answer it for you. If it's time intensive, though, I could maybe give you tips on how to figure it out, but that's about it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Sun Feb 26, 2012 11:23 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2012-02-26T15:39:45-07:00</updated>
<published>2012-02-26T15:39:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90586#p90586</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90586#p90586"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90586#p90586"><![CDATA[
If you're just trying to find stuff, I can see most of the graphics in YY-CHR.  Compressed graphics just look a little different and aren't whole, but since they are still byte aligned, they are partially recognizable.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Sun Feb 26, 2012 3:39 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2012-02-26T14:40:54-07:00</updated>
<published>2012-02-26T14:40:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90584#p90584</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90584#p90584"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90584#p90584"><![CDATA[
Well, if nobody gave you anything yet it's because this information is not out there, and you can't really expect people to get out of their way to do a lot of research just for someone else's project, unless they're also interested.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Sun Feb 26, 2012 2:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Reaper_Man]]></name></author>
<updated>2012-02-26T14:16:51-07:00</updated>
<published>2012-02-26T14:16:51-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90580#p90580</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90580#p90580"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90580#p90580"><![CDATA[
So, I suppose I'm on my own at this point? <img src="http://forums.nesdev.com/images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=661">Reaper_Man</a> — Sun Feb 26, 2012 2:16 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Reaper_Man]]></name></author>
<updated>2012-02-20T18:56:13-07:00</updated>
<published>2012-02-20T18:56:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90250#p90250</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90250#p90250"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90250#p90250"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />I think a lot of us are knowledgeable about how the NES works in general, but not about specific proprietary game engines. Emulator authors know how they work to the extent that they need certain hardware features correctly emulated, but CHR decompression needs only a working CPU and working $2006/$2007 ports on the PPU. I imagine that people primarily interested in reverse engineering proprietary game engines hang out at the Romhacking.net board. One exception is tokumaru, who reverse engineered Bee 52's Markov-chain CHR format.<br /></div><br /><br />Yeah, I realize that, and I just made a topic in RHDN as I hope to get some help there, but given the nature of the game and how the game is used as a benchmark of sorts, I was kinda hoping that someone here would have documented it some.<br /><br /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent"><br />What exactly are you wanting to do to Battletoads?<br /></div><br /><br />Simple, corrupt it (for entertainment purposes), but in order to do so I need to figure out where all the CHR data is (as corrupting CHR is rather boring/lame).  While that's trivial for games with CHR ROM, it's a pain for games with CHR RAM, especially this one.<br /><br /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"><br />If you're just trying to rip tiles, I'd maybe just suggest playing through the game and dumping the CHR-RAM/nametables to a file every time you see something new in there (about once a level + animation cycles).<br /><br />If you're trying to romhack, well, good luck. It's a big game with a lot of code. This game obviously had a lot of development time, and kind of has a little of everything in it. Each ROM page might have a completely different way of doing things (e.g. some levels do parallax by animating background tiles, others do it by timed code and changing the scroll register). Multidirectional scrolling levels might be stored straightforwardly in the ROM, but the horizontal scrolling levels might just be a list of timings and events or something.<br /><br />Personally I think it would take me maybe 100-200 hours of work to reverse engineer the whole game, after which it would be completely rom-hackable and reprogrammable... but then I think of other things I could do with that time.<br /></div><br /><br />All I want to find out is the ROM map, at least enough to know where all the CHR stuff is.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=661">Reaper_Man</a> — Mon Feb 20, 2012 6:56 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2012-02-20T12:18:31-07:00</updated>
<published>2012-02-20T12:18:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90230#p90230</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90230#p90230"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90230#p90230"><![CDATA[
For the battletoad character sprites, I did see that the game first writes code to RAM somewhere to efficiently copy sprites into CHR-RAM. You can see from watching CHR-RAM in an emulator that it only ever stores one frame of the battletoad, and uploads a new one as needed. Try tracing a few frames, and look for execution from RAM ($0000-$07FF), verify that it's writing to CHR-RAM, and then search backwards to find out when that code was written to RAM (which should should show you where the sprite's data came from). That's how I figured out the text compression, anyway, find the final resting place of the data (e.g. nametable), and search backwards in a trace until you see where it was written, repeat until you find the source data. (Yes, you're going to have to learn 6502 assembly.)<br /><br />Enemy/other character sprites seem to be static throughout a level, so far as I've seen. They are much more likely to be compressed than the Battletoads sprites, since there's no per-frame maintenance there.<br /><br />Background CHR data, usually there's a set of tiles that are animated, probably updated in the same way as the battletoad sprites.<br /><br />I don't know anything about the level data, or nametables, other than the game maps seem to be made with 32x32 blocks (i.e. 4x4 tiles) for the most part, so probably there's a palette of 16-byte (18-byte with attrib?) tiles somewhere, and the level data indexes them?<br /><br />Cutscene nametables and CHR data probably have their own compression scheme going on, though I think they're all together in page 6 with the text data I mentioned in the other thread.<br /><br />If you're just trying to rip tiles, I'd maybe just suggest playing through the game and dumping the CHR-RAM/nametables to a file every time you see something new in there (about once a level + animation cycles).<br /><br />If you're trying to romhack, well, good luck. It's a big game with a lot of code. This game obviously had a lot of development time, and kind of has a little of everything in it. Each ROM page might have a completely different way of doing things (e.g. some levels do parallax by animating background tiles, others do it by timed code and changing the scroll register). Multidirectional scrolling levels might be stored straightforwardly in the ROM, but the horizontal scrolling levels might just be a list of timings and events or something.<br /><br />Personally I think it would take me maybe 100-200 hours of work to reverse engineer the whole game, after which it would be completely rom-hackable and reprogrammable... but then I think of other things I could do with that time.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Mon Feb 20, 2012 12:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[MottZilla]]></name></author>
<updated>2012-02-20T11:25:22-07:00</updated>
<published>2012-02-20T11:25:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90228#p90228</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90228#p90228"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90228#p90228"><![CDATA[
What exactly are you wanting to do to Battletoads? <br /><br />I've never looked into it but I recall Battletoads manages to upload ALOT of data to VRAM each frame. So if it really does compress graphics I would imagine it only does so with static graphics, not the Toad's sprites and not any animated background tiles since time is important there and there isn't any large amount of RAM to decompress to on the CPU bus.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1726">MottZilla</a> — Mon Feb 20, 2012 11:25 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2012-02-20T06:15:24-07:00</updated>
<published>2012-02-20T06:15:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90222#p90222</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90222#p90222"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90222#p90222"><![CDATA[
I think a lot of us are knowledgeable about how the NES works in general, but not about specific proprietary game engines. Emulator authors know how they work to the extent that they need certain hardware features correctly emulated, but CHR decompression needs only a working CPU and working $2006/$2007 ports on the PPU. I imagine that people primarily interested in reverse engineering proprietary game engines hang out at the Romhacking.net board. One exception is tokumaru, who reverse engineered Bee 52's Markov-chain CHR format.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Feb 20, 2012 6:15 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Reaper_Man]]></name></author>
<updated>2012-02-20T01:35:18-07:00</updated>
<published>2012-02-20T01:35:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90215#p90215</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90215#p90215"/>
<title type="html"><![CDATA[Battletoads and graphics]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8637&amp;p=90215#p90215"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />Have you tried other romhacking-specific boards like Acmlm's (board2/jul) or Romhacking.net?<br /></div><br /><br />I've looked through the posts (and acmlm's archives) and have found very little.  I have, however, contacted a couple of people who have done some work on battletoads to see if they have any documentation that I would need to write my script.<br /><br />As for making a thread, this is the first one that I made, as you guys would probably be the most knowledgeable on how Battletoads works.<br /><br /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />Otherwise, use a corrupter to find compressed graphics, and use data breakpoints to find the code that reads it, then step through with a debugger or trace logger to see what's going on.  Alternatively, use data breakpoints when it starts writing to VRAM instead of a corrupter.<br /></div><br /><br />As I said, my NES debugging is nonexistent, and I believe I would have to go through the entire game to achieve that, no?  There has to be an easier way.... right?<br /><br /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />I think player sprites are uncompressed.<br /></div><br /><br />Probably, I don't think that'll be an issue.<br /><br /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />Edit: I can clearly see graphics throughout the ROM in a tile editor.  I'm guessing some kind of RLE or LZ compression scheme, since they are clearly byte-aligned.<br /></div><br /><br />Yeah, I can too, but there are some areas where I'm not too sure if it's graphics data or something else, not to mention other areas that may contain graphics, but are unseen with a tile viewer.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=661">Reaper_Man</a> — Mon Feb 20, 2012 1:35 am</p><hr />
]]></content>
</entry>
</feed>
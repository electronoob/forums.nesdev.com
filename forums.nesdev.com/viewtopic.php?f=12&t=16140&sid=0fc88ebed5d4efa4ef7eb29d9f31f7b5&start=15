<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - SPC700 instruction cycle breakdown</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - SPC700 instruction cycle breakdown" href="http://forums.nesdev.com/feed.php?f=12&amp;t=16140" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '2');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php?sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php?sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php?sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Oct 27, 2017 11:09 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">View unanswered posts</a> | <a href="./search.php?search_id=active_topics&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=cd0d2f0fe38ad6b865cc173201b42fa3">Board index</a> &#187; <a href="./viewforum.php?f=25&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">Other</a> &#187; <a href="./viewforum.php?f=23&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />

	<div class="forumrules">
		
			<h3>Forum rules</h3><br />
			Related:<br /><ul><li>For making cartridges of your Super NES games, see <a href="http://forums.nesdev.com/viewforum.php?f=28" class="postlink">Reproduction</a>.</li></ul>
		
	</div>

	<br clear="all" />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=16140&amp;start=15&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">SPC700 instruction cycle breakdown</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>2</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 86 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=0">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">1</a><span class="page-sep">, </span><strong>2</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=30">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=16140&amp;start=15&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=16140&amp;view=previous&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=16140&amp;view=next&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199107"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199107">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199107&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199107"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jun 27, 2017 3:18 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1338
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; I'm wondering whether it'd be better just to stick most of the instruction implementations directly inside the switch table<br /><br />Especially if we used fallthrough and grouped ordering as you suggested previously, then one might as well. Doesn't really make much of a difference as I would sure hope that a single function call used only in one place would be inlined.<br /><br />Of course if you really want to compress the code, there's always the microcoding approach. It would make understanding the code near impossible, but eg Bisqwit managed to get a 6502 core (with illegal ops) into less than 100 lines of code that way (and no, none of the lines were &gt;80 characters.)<br /><br />&gt; only use functions for things that are actually reused across multiple instructions<br /><br />I continue to dither on the instructions only used once.<br /><br />Like, you can have sta direct,x; stx direct,y; sty direct,x so then I have storeDirect(uint8&amp; reg, uint8&amp; index) but then you can <em>only</em> have sta (direct+x), so is it better to have storeIndexedIndirect() [or just outright calling it STA_IDPX or something], or storeIndexedIndirect(uint8&amp; reg, uint8&amp; index)?<br /><br />&gt; You can still parameterize SetFlag etc. with bitfields<br /><br />Yeah, that's how I was doing it before.<br /><br />&gt; If you think the &quot;.mask&quot; is ugly you can hide it in a macro or something<br /><br />I used to have a deathly allergy to the existence of any and all macros (save for the L lastCycle(); hack), but lately I think it's a whole lot nicer for the innard of a CPU core to be able to say &quot;A, X, Y&quot; instead of &quot;regs.a, regs.x, regs.y&quot; everywhere.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199175"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199175">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199175&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199175"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 7:04 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1338
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, I tried to update the SPC700 code to follow Overload's cycle timings. Hopefully I got everything right. He's missing some instructions, and doesn't list cycle counts for some, and Direct, X Relative, CBNE has one cycle listed as RWB 0/1 that can only ever be a 1 (it's only one instruction and it never writes.) And of course, I'm not perfect, sadly ._.<br /><br />I am using idle(uint16 address) to indicate that the cycle is &quot;internal&quot;, but it has the same functionality as &quot;read&quot;.<br /><br />I also had to lose the very handy fetch/load/store/push/pull helper functions, because those all fell back on regular reads, and three of them affected registers. Instead I moved to only using read/write with two functions, page(uint8) and stack(uint8) that just transform into a full 16-bit address, and use those inside read/write.<br /><br />Not crazy about it, but in this way, it's way easier than having no-increment/decrement versions of fetch/push/pull, and some way to signal load/store as being idle cycles.<br /><br />Also dropped the address++ semantics and instead went with address+0, address+1, since sometimes you'd read from one of the two addresses twice. For both PC and S, I always inc/dec when doing the actual read anyway, and then use +1,-1 as appropriate to match the address bus locations in the PDF. In this way, the weirdness is isolated to the idle() cycle addresses.<br /><br />I merged more functions to reduce repetition, and expanded the three-letter acronym functions (XCN =&gt; ExchangeNibble).<br /><br />Probably the last redesign change I still want to make is to consider merging the read/modify/write variants with some sort of flag inside of them like &quot;Compare/Write&quot;; and then also use that to drop the op function comparisons I use to specialize some of the functions now.<br /><br />As we know, the logic analyzer can't show us which read actually matters when the same address is read twice in a row, the first or the second one. This could end up wrong for any instructions like that, and I'm not sure there's a way we can ever find out which is correct.<br /><br />I put source comments on the weird (x)+ cycle 3 case. We <em>really</em> need a test ROM for this one. spc700cyc.txt indicates the read version happens at cycle 3, the write version happens at cycle 4. I'd have expected both to happen on cycle 4, but then the read being at cycle 3 is probably how Overload observed this oddity: it was probably reading the underlying RAM value instead of the register value for mov (x+),a. If it were the discarded idle read, then he couldn't observe it was pulling underlying RAM.<br /><br /><!-- m --><a class="postlink" href="https://gitlab.com/higan/higan/blob/master/higan/processor/spc700/instructions.cpp">https://gitlab.com/higan/higan/blob/mas ... ctions.cpp</a><!-- m --></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199184"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199184">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199184&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199184"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 7:58 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 431
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Which instructions are missing from Overload's list?<br /><br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">but then the read being at cycle 3 is probably how Overload observed this oddity: it was probably reading the underlying RAM value instead of the register value for mov (x+),a. If it were the discarded idle read, then he couldn't observe it was pulling underlying RAM.</div><br /><br />No, the <em>write</em> is the one where the &quot;bypassing registers&quot; effect is noticeable. If you <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV &#40;X&#41;+,A</tt> and X is pointing at one of the timer registers which are reset when read ($FD through $FF), that timer <em>won't</em> get reset at all. Anomie's 2007 document and nocash's fullsnes document both point out this anomaly (it's an anomaly because almost all writes on the SPC700 do a discarded read from the same address first and thus <em>do</em> reset the timers)<br /><br />You've just made it so that <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV &#40;X&#41;+,A</tt> <em>does</em> reset timer registers, which is well known to be wrong!<br /><br />There are two possibilities for how <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV A, &#40;X&#41;+</tt> works which are indistinguishable with a logic analyzer and tricky but possible to distinguish with software testing:<br /><br />Possibility 1:<br />Cycle 3 reads from underlying RAM and is discarded<br />Cycle 4 reads from RAM or an internal register and is kept<br /><br />Possibility 2:<br />Cycle 3 reads from RAM or an internal register and is kept<br />Cycle 4 reads from wherever and is discarded (standard duplicate read)<br /><br />To distinguish them, you'd have to start the instruction exactly 3 cycles before the timer being read is due to tick over, so that reading the timer on Cycle 3 and Cycle 4 will get different values. <em>I assume that that's exactly what blargg did back in 2007</em>, because in Anomie's document every instruction where the final read cycle <em>can</em> be made to read from a timer register is &quot;confirmed by blargg&quot;; it's only instructions that only read from the stack which are marked as guesses.<br /><br />In short, I'm almost certain that possibility 2 is the one that's correct. It's consistent with Overload's findings to the extent that can be distinguished with a logic analyzer, and consistent with blargg's findings to the extent that can be distinguished via software testing.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199197"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199197">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199197&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199197"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 10:33 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1338
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; Which instructions are missing from Overload's list?<br /><br />SLEEP, STOP, and I thought CLRn/SETn was missing, but it looks like it's there but being called CLR1/SET1.<br /><br />I know, if you call SLEEP or STOP, you're never recovering anyway. But I'm wondering if it waits one idle cycle or two between each execution (plus the opcode fetch.) I copied the 65816 WAI's two idle cycles for now.<br /><br />&gt; No, the write is the one where the &quot;bypassing registers&quot; effect is noticeable.<br /><br />Ah, I see. You're gonna have to forgive me, I have eight different emulated systems all rattling around inside my head, so some details are fuzzy these days. It's not like back in the bsnes days I'm afraid.<br /><br />So then ... it's gotta be one of these two designs, right?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">//mov (x),a<br />auto SPC700::instructionIndirectXRead(fpb op) -&gt; void {<br />&nbsp; idle(PC);<br />&nbsp; uint8 data = read(page(X));&nbsp; //this *WILL* reset the timers, and A will be the old timer value<br />&nbsp; A = alu(A, data);<br />}<br /><br />//mov a,(x)<br />auto SPC700::instructionIndirectXWrite(uint8&amp; data) -&gt; void {<br />&nbsp; idle(PC);<br />&nbsp; idle(page(X));&nbsp; //this *WILL* reset the timers<br />&nbsp; write(page(X), data);<br />}<br /><br />//POSSIBILITY ONE<br /><br />//mov (x+),a<br />//I have to swap cycles 3 and 4 from the Git repo<br />auto SPC700::instructionIndirectXIncrementRead(uint8&amp; data) -&gt; void {<br />&nbsp; idle(PC);<br />&nbsp; idle();&nbsp; //this will not reset the timers (or even if it does, we won't notice due to next cycle)<br />&nbsp; data = read(page(X));&nbsp; //this *WILL* reset the timers<br />&nbsp; ZF = data == 0;<br />&nbsp; NF = data &amp; 0x80;<br />}<br /><br />//mov a,(x+)<br />auto SPC700::instructionIndirectXIncrementWrite(uint8&amp; data) -&gt; void {<br />&nbsp; idle(PC);<br />&nbsp; idle();&nbsp; //this will not reset the timers, period<br />&nbsp; write(page(X++), data);<br />}<br /><br />//POSSIBILITY TWO<br /><br />//mov (x+),a<br />auto SPC700::instructionIndirectXIncrementRead(uint8&amp; data) -&gt; void {<br />&nbsp; idle(PC);<br />&nbsp; data = readButNotFromIORegistersBecauseFuckYouThatsWhy(page(X));&nbsp; //this will return internal RAM<br />&nbsp; read(page(X++));&nbsp; //this *WILL* reset timers, but we won't get the timer value into A<br />&nbsp; ZF = data == 0;<br />&nbsp; NF = data &amp; 0x80;<br />}<br /><br />//mov a,(x+)<br />auto SPC700::instructionIndirectXIncrementWrite(uint8&amp; data) -&gt; void {<br />&nbsp; idle(PC);<br />&nbsp; readButNotFromIORegistersBecauseFuckYouThatsWhy(page(X));&nbsp; //this will *not* affect the timers<br />&nbsp; write(page(X++), data);<br />}</div><br /><br />&gt; To distinguish them, you'd have to start the instruction exactly 3 cycles before the timer being read is due to tick over, so that reading the timer on Cycle 3 and Cycle 4 will get different values.<br /><br />That sounds like it would work. Revenant, I don't suppose you'd be up for writing this test too? ^-^<br /><br />&gt; In short, I'm almost certain that possibility 2 is the one that's correct. It's consistent with Overload's findings to the extent that can be distinguished with a logic analyzer<br /><br />It doesn't sound like the logic analyzer revealed any evidence supporting either possibility. It cannot determine which cycle's read is actually used internally.<br /><br />&gt; and consistent with blargg's findings to the extent that can be distinguished via software testing.<br /><br />Has blargg really confirmed this exact scenario? We're 100% proof positive of that? The million dollar problem here is that blargg's test ROMs are gone.<br /><br />If we had his ROM, I could fire it up on possibilities 1 and 2, and one of them should fail if he wrote a test as you described.<br /><br />So here's the thing ... possibility one is way more sane and logical to me. But I also have 13 years of experience with the SNES shitting all over my notions of sane and logical, so I concur with you. Possibility two is the most likely because &quot;fuck you (emudevs), that's why.&quot;<br /><br />Still ... I'd <em>really</em> like to have a test ROM to prove this.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">byuu</a> on Wed Jun 28, 2017 11:04 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199199"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199199">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199199&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199199"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 11:00 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 431
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Your possibility 2 for reading is wrong (it doesn't even increment X). It should be:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">auto SPC700::instructionIndirectXIncrementRead(uint8&amp; data) -&gt; void {<br />&nbsp; idle(PC);<br />&nbsp; data = read(page(X)); //this *WILL* reset the timers, and A will be the old timer value<br />&nbsp; idle(page(X++)); // this might or might not reset the timers a second time; it's almost impossible to test <br />&nbsp; ZF = data == 0;<br />&nbsp; NF = data &amp; 0x80;<br />}</div><br /><br />According to blargg, the read whose value matters is on cycle 3, not cycle 4, and like I said I'm assuming that he used the timers to test all these opcode timings.<br /><br />If <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV A,&#40;X&#41;+</tt> couldn't read the timers at all (it returned underlying RAM, or always returned 0 due to resetting the timer and then reading it again) I'm sure blargg would have noticed and would have made a note of such surprising behaviour.<br /><br />ETA: also you've got the canonical mnemonics backwards. SPC700 is Intel style (destination first), not Motorola style (source first). <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV A,&#40;X&#41;+</tt> is a load, <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV &#40;X&#41;+,A</tt> is a store.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=3737&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">AWJ</a> on Wed Jun 28, 2017 11:08 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199201"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199201">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199201&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199201"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 11:25 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1338
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">... I can't handle this. Every single post changes small details and it keeps throwing me off.<br /><br />&gt; Your possibility 2 for reading is wrong<br /><br />My possibility 2 does have X++. Possibility 1 doesn't, due to a copy paste typo.<br /><br />&gt; ETA: also you've got the canonical mnemonics backwards. SPC700 is Intel style (destination first), not Motorola style (source first).<br /><br />Sigh. Okay, I'm just going to use target=source syntax, that way it's obvious what I mean and people don't have to keep track of which ordering every CPU uses.<br /><br />...<br /><br />Let's try this one more time. If this fails, then I'm giving up.<br /><br />readIO() = this read DOES affect timers; returns RAM outside $f0-ff<br />readRAM() = this read does not affect timers; returns underlying RAM value<br /><br />Note: when readRAM()'s read is discarded, it may be a true idle cycle that doesn't actually read.<br />However, this won't have any possible effect on emulation, so let's not worry about that.<br /><br />For cycles 3 and 4 ... the possibilites are:<br /><br />a=(x++) -- we are reading the memory at (X), storing it in A, and incrementing X<br />[Alpha] readRAM(x), a=readRAM(x++)<br />[Beta] readRAM(x), a=readIO(x++)<br />[Gamma] readIO(x), a=readRAM(x++)<br />[Delta] readIO(x), a=readIO(x++)<br />[Epsilon] a=readRAM(x), readRAM(x++)<br />[Zeta] a=readRAM(x), readIO(x++)<br />[Eta] a=readIO(x), readRAM(x++)<br />[Theta] a=readIO(x), readIO(x++)<br /><br />(x++)=a -- we are storing the value of A into (X), and incrementing X<br />[Iota] readRAM(x), writeRAM(x++,a)<br />[Kappa] readRAM(x), writeIO(x++,a)<br />[Lambda] readIO(x), writeRAM(x++,a)<br />[Mu] readIO(x), writeIO(x++,a)<br /><br />Many of these possibilities are nonsensical. I'm just elaborating every <strong>possible</strong> one so we can get this right.<br /><br />Most likely, Kappa is correct for writes. Reads seem to be more confusing, but logically I'd say it was Beta, but the notes from blargg and Overload seem to indicate that case is most definitely wrong. It sounds like you favor either Eta or Theta. Of the two, Eta is more reasonable to me.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199205"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199205">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199205&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199205"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 12:00 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 431
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">Most likely, Kappa is correct for writes.</div><br /><br />Agree.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Reads seem to be more confusing, but logically I'd say it was Beta, but the notes from blargg and Overload seem to indicate that case is most definitely wrong. It sounds like you favor either Eta or Theta. Of the two, Eta is more reasonable to me.</div><br /><br />Agree with Eta or Theta.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199212"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199212">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199212&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199212"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 1:41 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1338
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; According to blargg, the read whose value matters is on cycle 3, not cycle 4<br /><br />I mean, this directly contradicts Overload's document.<br /><br /><img src="http://i.imgur.com/L6GAWVO.png" alt="Image" /><br /><br />If blargg is correct and cycle 3 is the read that matters (eg it's the one to reset the timers), then Overload is wrong in saying cycle 3 can't access internal registers. If Overload is correct, then cycle 4 is the one that matters. From a logical design perspective, I like cycle 4 being the one that reads from or writes to IO, and cycle 3 being a read from internal RAM. Which is Beta.<br /><br />It's not clear from either of their documentation which of the two cycle reads actually set A, either.<br /><br />And to throw out more insane theories ... is there a possibility that simply reading from $fd-ff takes another cycle to wrap up after the fact, and the read -is- actually working with IO, just ignored because those registers are busy? Because I really don't believe there's specialization of logic inside the SMP core for just this one instruction. Even if we figure out how to emulate it, it would be nice to understand the why as well. I feel like if the timer register reads are the ONLY thing we're going on, that it's not enough information to definitively say that internal IO is ignored for all of $f0-ff.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199217"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199217">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199217&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199217"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 2:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 431
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">I mean, this directly contradicts Overload's document.<br /><br /><img src="http://i.imgur.com/L6GAWVO.png" alt="Image" /><br /><br />If blargg is correct and cycle 3 is the read that matters (eg it's the one to reset the timers), then Overload is wrong in saying cycle 3 can't access internal registers. If Overload is correct, then cycle 4 is the one that matters. From a logical design perspective, I like cycle 4 being the one that reads from or writes to IO, and cycle 3 being a read from internal RAM. Which is Beta.</div><br /><br />Reads have different timing from writes in every other SPC700 addressing mode, so why do you expect them to be perfectly symmetrical in this one?<br /><br /><img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> Unfortunately, your OCD obsession with beautiful, logical symmetry has nothing to do with how electronic hardware works. After more than a decade as an emulator developer across multiple systems by multiple manufacturers, surely you should <em>stop being surprised</em> by now when your intuitions about what the most &quot;logical&quot; way for something to work are wrong so much more often than they are right? <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It's not clear from either of their documentation which of the two cycle reads actually set A, either.</div><br /><br />The read that can hit I/O is definitely the read that sets A, because blargg would have noticed if reading from $FD-$FF via that addressing mode always set A to 0, or set A to the underlying APU RAM instead of the timer value.<br /><br />(snip utterly unverifiable speculation)<br /><br />Here's what we know: writing to $FD-$FF by <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV &#40;X&#41;+,A</tt> doesn't reset the timer, unlike literally every other addressing mode. Reading from $FD-$FF by <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV A,&#40;X&#41;+</tt> does reset the timer and set A to its previous value, exactly like every other addressing mode. As &quot;unlikely&quot; and &quot;impossible&quot; as you find it, as loudly as it makes your OCD scream, those are the objective facts.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199219"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199219">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199219&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199219"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 2:57 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1338
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; Unfortunately, your OCD obsession with beautiful, logical symmetry has nothing to do with how electronic hardware works. After more than a decade as an emulator developer across multiple systems by multiple manufacturers, surely you should stop being surprised by now when your intuitions about what the most &quot;logical&quot; way for something to work are wrong so much more often than they are right?<br /><br />I mean I did say like <em>four times in this thread alone</em> that hardware, especially SNES hardware, never acts in the logical way you would expect.<br /><br />That's not going to stop me from thinking logically and wishing things were that way. When you and I star in that next Star Trek reboot, you can be Kirk and I'll be Spock :P<br /><br />&gt; The read that can hit I/O is definitely the read that sets A, because blargg would have noticed if reading from $FD-$FF via that addressing mode always set A to 0, or set A to the underlying APU RAM instead of the timer value.<br /><br />I sure hope so. In absense of confirmation, that's still the more likely outcome at least. So that narrows us to: Beta, Delta, Eta, Theta.<br /><br />In my view, I find it very unlikely that both reads are going to hit IO. <em>Especially</em> not if A is set on the fourth cycle. So that narrows us further to: Beta, Eta.<br /><br />So if Overload is right that cycle 3 is the ignored one, then the answer is Beta.<br />If blargg is right that cycle 4 is the ignored one, then the answer is Eta.<br /><br />&gt; Reads have different timing from writes in every other SPC700 addressing mode, so why do you expect them to be perfectly symmetrical in this one?<br /><br />Writes *gain* an extra cycle in all those other modes. That is not the case here.<br /><br />&gt; writing to $FD-$FF by MOV (X)+,A doesn't reset the timer, unlike literally every other addressing mode.<br /><br />Right, Kappa will result in that effect.<br /><br />&gt; Reading from $FD-$FF by MOV A,(X)+ does reset the timer and set A to its previous value, exactly like every other addressing mode.<br /><br />Right, so that rules out Alpha, Gamma, Epsilon, Zeta.<br /><br />...<br /><br />So, logically I think it's Beta. Based on my experience with the SNES, I would bet money on it being Eta, although there is a slim chance it is Delta or Theta.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199242"></a>
				<b class="postauthor">Revenant</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199242">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199242&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199242"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 10:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Apr 25, 2015 1:47 pm<br /><b>Posts:</b> 330<br /><b>Location:</b> FL
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AWJ wrote:</div><div class="quotecontent">I can write a program to do this, but someone who's already got a bit of experience with APU programming (Revenant?) can probably do it a lot more easily and quickly.</div><br /><br />Alright, finally got around to this.<br /><br /><!-- m --><a class="postlink" href="http://revenant1.net/smpechotest.sfc">http://revenant1.net/smpechotest.sfc</a><!-- m --><br /><br />The result:<br /><br /><img src="http://i.imgur.com/cLfzzJt.png" alt="Image" /><br /><br />(that is, $214x is reading back the initial SMP-&gt;CPU port writes, not echo buffer data)<br /><br />I can try to test the other thing later, I suppose.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=6992&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">Revenant</a> on Wed Jun 28, 2017 11:52 pm, edited 2 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6992&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199244"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199244">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199244&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199244"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 10:44 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 431
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks a ton, Revenant. As I expected, that was much faster and much nicer than I could have done it. I'm impressed that you managed to play actual music essentially without access to zero page.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199246"></a>
				<b class="postauthor">Revenant</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199246">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199246&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199246"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jun 28, 2017 11:59 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Apr 25, 2015 1:47 pm<br /><b>Posts:</b> 330<br /><b>Location:</b> FL
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, I had to take it down and reupload because I was dumb and didn't delay for long enough before enabling the echo to reliably avoid clobbering my one unnecessarily large sample on the real hardware. Don't write test ROMs at 2:30 AM, kids.<br /><br />Anyway, you get the idea. The real console works pretty much the way I figured it did (i.e. with a bunch of simple D-latches or whatever between the CPU and SMP).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6992&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199264"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199264">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199264&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199264"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jun 29, 2017 3:52 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1338
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Shoot, I was going to post that hex_usr just made the same demo last night, but was too tired. Still, thank you for the extra test to confirm!<br /><br />This has been fixed in upstream, by giving SPC700::port(Read,Write) its own 4x8-bit buffer.<br /><br />So obviously this confirms that the DSP can modify the internal $f4-f7 RAM, and that the CPU does not read back the internal RAM, but separate 4x8-bit latches. But one question I still have is, if the CPU writes to $2140-2143, do those bytes show up when the DSP then reads from underlying $f4-f7 RAM?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199270"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199270">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199270&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3#p199270"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jun 29, 2017 7:55 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 431
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">Shoot, I was going to post that hex_usr just made the same demo last night, but was too tired. Still, thank you for the extra test to confirm!<br /><br />This has been fixed in upstream, by giving SPC700::port(Read,Write) its own 4x8-bit buffer.<br /><br />So obviously this confirms that the DSP can modify the internal $f4-f7 RAM, and that the CPU does not read back the internal RAM, but separate 4x8-bit latches. But one question I still have is, if the CPU writes to $2140-2143, do those bytes show up when the DSP then reads from underlying $f4-f7 RAM?</div><br /><br />Definitely not. There are 8 latches, four CPU-to-SMP (though the SMP can clear them to 0) and four SMP-to-CPU and all totally separate from RAM. The CPU having direct access to APU RAM (either reading or writing) makes no sense and is simply impossible when the SMP and DSP are both already constantly using it. Look how difficult it is for the GSU or SA-1 to share ROM/RAM with the CPU.<br /><br />I imagine the reason you got confused and originally implemented it the way you did is because whenever the SMP writes to any of $F0-$FF the data also falls through to APU RAM as well as to the internal register.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">SMP writes to $F1&nbsp; &nbsp; &nbsp;-&gt; value written goes to underlying APU RAM, CPU-to-SMP latches set to 0 depending on set bits<br />SMP writes to $F4-$F7 -&gt; value written goes to SMP-to-CPU latch (where the CPU can see it) and also to underlying APU RAM (where the DSP can see it)<br />SMP reads $F4-$F7&nbsp; &nbsp; &nbsp;-&gt; reads CPU-to-SMP latch<br /><br />DSP reads from or writes to $F0-FF -&gt; reads/writes APU RAM, never SMP registers<br /><br />CPU writes to $2140-$2143&nbsp; -&gt; value written goes to CPU-to-SMP latch, does not affect APU RAM<br />CPU reads from $2140-$2143 -&gt; reads SMP-to-CPU latch, cannot see APU RAM</div><br /><br />Every one of these cases was already correct in higan except &quot;CPU reads from $2140-$2143&quot;.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=3737&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">AWJ</a> on Fri Jun 30, 2017 10:04 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=16140&amp;start=15&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>2</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 86 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=0">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">1</a><span class="page-sep">, </span><strong>2</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=16140&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3&amp;start=30">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=cd0d2f0fe38ad6b865cc173201b42fa3">Board index</a> &#187; <a href="./viewforum.php?f=25&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">Other</a> &#187; <a href="./viewforum.php?f=23&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing [Bot]</span>, <span style="color: #9E8DA7;" class="username-coloured">Google Adsense [Bot]</span>, <a href="./memberlist.php?mode=viewprofile&amp;u=4209&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3">kogami</a> and 8 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php?sid=cd0d2f0fe38ad6b865cc173201b42fa3"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="16140" />
<input type="hidden" name="sf" value="msgonly" />
<input type="hidden" name="sid" value="cd0d2f0fe38ad6b865cc173201b42fa3" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php?sid=cd0d2f0fe38ad6b865cc173201b42fa3" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>

<img src="./cron.php?cron_type=tidy_search&amp;sid=cd0d2f0fe38ad6b865cc173201b42fa3" width="1" height="1" alt="cron" />
</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
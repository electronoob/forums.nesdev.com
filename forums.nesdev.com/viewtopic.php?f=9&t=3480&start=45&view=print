<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Connect AY-3-8910 sound chip to FME-7 board</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Connect AY-3-8910 sound chip to FME-7 board</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3480">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3480</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>7</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Sun Oct 14, 2012 2:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jpx72 wrote:</div><div class="quotecontent">Dic-sc7 made a new schematic for connecting the yamaha chip:<br /><!-- m --><a class="postlink" href="http://www.forum.emunes.pl/index.php/topic,1448.msg47858.html#msg47858">http://www.forum.emunes.pl/index.php/to ... l#msg47858</a><!-- m --></div><br /><br />Yeah that mess of an opamp and dozen or so resistors really negates the clock selecting advantages of the YM...<br /><br />Good to hear the word is the 8912 won't suffer the same volume issues.<br /><br />Thanks for pointing out the reset thing l_oliveira, I wondered how necessary it really was but never took the time to look into it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>80sFREAK</b> [ Mon Oct 15, 2012 5:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jpx72 wrote:</div><div class="quotecontent">Dic-sc7 made a new schematic for connecting the yamaha chip:<br /><!-- m --><a class="postlink" href="http://www.forum.emunes.pl/index.php/topic,1448.msg47858.html#msg47858">http://www.forum.emunes.pl/index.php/to ... l#msg47858</a><!-- m --></div><br />A bit weird way to use electronic parts <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elseyf</b> [ Tue Jun 25, 2013 11:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I am getting frustrated <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /><br />I am trying to apply this mod to my spare FME-7 cart, but I don't get the extra sounds out of this thing.<br />I hooked the AY-3 8910 up as the schematics show and also connected the '139 and '74 (i used 74hc74 instead of 74ls74, but that shouldn't matter) chips properly.<br />I am trying to output the sound through cinch to hook the sounds up directly to the TV's Audio In (I saw this method somewhere with CV3 in order to not have to mod the expansion connector of the Nes).<br /><br />Might be neccessary information: I am using a PAL Nes (original Nintendo model, not a clone) and I applied changes to my gimmick! dump in order to have the sprites properly shown when playing on PAL console. The emulator I used to test before burning the Eprom played the sounds just fine, so I think something is up with my AY-3 8910?<br /><br />Thanks in advance

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Tue Jun 25, 2013 11:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Do you have an oscilloscope? If not, you should be able to do the debugging just using your ears (touch them, through &gt;10kÎ© resistor, to an amplifier). (Touch the signals and make sure you can see them on a scope / hear them in the audio)<br />Do 'D' and 'E' in the schematic do anything? If you listen to the AY's direct outputs, do you hear anything? Is your divider working (try bypassing it)?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elseyf</b> [ Tue Jun 25, 2013 12:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Unfortunately, I don't have an oscilloscope. Therefore I tried the other method you suggested. I hoked the Audio in of the TV directly to the E and D points of the schematic. If I connect it, I can hear some scratching noise, which has, if I am not mistaken, some kind of rythm. It does not resemble the actual audio in any way.<br />With direct output you mean the Analog A,B and C? If so, I do not hear anything out of these if I connect the Audio in to these.<br /><br />I forgot to mention: Is it neccessary to have the exact values for the capacitors (like the unpolarized 1mF capacitor or the 82nF cap, because I only have some electrolyt 1mF caps, the ones with + and - and I did not hook up any 82nF caps).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Tue Jun 25, 2013 12:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You need some capacitor where the 82nF caps are, but they don't need to be that size. I think you should be fine with anything you have lying around that's larger than 90pF and not electrolytic.<br /><br />I think you should hear a quiet 50Hz (PAL PPU; 60Hz otherwise) buzz on D and E, as I think Gimmick! writes to those registers every vblank. If you don't, check your connections to /ROMSEL, A14 and R/W.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elseyf</b> [ Thu Jun 27, 2013 7:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">You need some capacitor where the 82nF caps are, but they don't need to be that size. I think you should be fine with anything you have lying around that's larger than 90pF and not electrolytic.<br /><br />I think you should hear a quiet 50Hz (PAL PPU; 60Hz otherwise) buzz on D and E, as I think Gimmick! writes to those registers every vblank. If you don't, check your connections to /ROMSEL, A14 and R/W.</div><br /><br />There is a buzz on E and D and it should be the 50Hz buzz you mean(at least it is very fast). <br />I read that wires should not be too thin, I think that could be the reason that nothing is happening. I used awg32 wires from an IDE cable, I checked all the traces but there were no shorts nor any wire falsely connected. I will try thicker wires and look what happens

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>l_oliveira</b> [ Thu Jun 27, 2013 8:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Isn't the CPU clock frequency on the PAL NES different than that of a NTSC NES ? how that would affect anything tied to the M2 signal ?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Jun 27, 2013 8:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If all the music data was copied from the NTSC ROM then the square channels on the AY should detune the same way the squares on the PAL CPU do, but sadly the DPCM won't. The basslines are going to be out of tune because the DPCM tuning tables are different on the PAL CPU. Because the DPCM tuning tables are part of the chip and you can't change them, to compensate for this you'll need to find the game's software tuning tables used for the square channels and retune those.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elseyf</b> [ Thu Jun 27, 2013 10:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I tried my dump on an acurate emulator (fceux and nestopia) and i listened to the music and it seemed to me like it plays it just as it should, but slower because of the clock frequence. I also thought of something like the game's music would not playback correctly on pal, but after the test i thought it is just as it should and frequence of clock does not affect the music.<br />And i also don't think a clone improves compatibility of cpu for playing back either PAL or NTSC games, so it should be the same and the threadstarter used a clone which, if i am not mistaken, uses PAL clock frequence and it plays back the music like it should sound on pal

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Jun 27, 2013 11:07 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There are several issues involved.<br /><ol style="list-style-type: lower-alpha"><li>Expansion audio: You want the ratio of M2 cycles to synthesizer cycles to be the same. A synth clocked by M2 is fine. A synth clocked by its own oscillator may have problems. </li><li>Tonal DMC samples (aka &quot;Sunsoft bass&quot;): You want the ratio of CPU cycles to DMC fetches to be the same. </li><li>Raster effects: You want the ratio of PPU dots to CPU cycles to be the same, and in some cases (VRC IRQ and the cycle-timed NMI handlers of Balloon Fight and Battletoads), you want the time from NMI to start of picture to be the same. </li><li>DMC IRQ-assisted raster effects: You want the ratio of PPU dots to DMC fetches to be the same. </li><li>Total frame length: Most music engines use NMI as a time base for counting tempo. </li></ol><br />An AY-3-8910 clone clocked by M2 was used in Sunsoft games that use Sunsoft bass. This means A is OK, and the limiting factor to keeping a music engine in tune on PAL NES is condition B.<br /><br />The Dendy, a PAL famiclone, uses a divide-by-15 counter on the CPU, and it put the extra 50 lines of a 50 Hz TV system before NMI. This ensures condition C, and because the pitches stay almost the same, the cloner didn't have to modify the DPCM table, ensuring B, which is why Sunsoft bass should work on Dendy. Ensuring B and C ensures D, which mostly concerns compatibility with games like Time Lord and Fire Hawk.<br /><br />A PAL NES, on the other hand, fails condition C because of the 2A07's divide-by-16, and to compensate, it also fails B. This means the pitch tables have to be modified to keep the rest of the music from being way flat compared to the bass. I have no access to a PAL NES and thus no way to see to what extent the changes to B and C canceled out with respect to D.<br /><br />E just makes the music slower or faster. It doesn't knock things out of tune, though it might knock repeating rhythmic patterns on DMC out of sync.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elseyf</b> [ Thu Jun 27, 2013 11:27 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So is it normal that there is no sound coming out of the AY-3 8910 because of these tuning tables?<br />Or, as i have understood, there should be the music playing back, but some channels out of sync which would be the channels coming out of the AY-3-8910?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Thu Jun 27, 2013 12:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The pitches should be wrong, in the sense of what you get if you try playing the japanese ROM in an emulator set to PAL.<br />If you're not getting any audio at all, that's not what's wrong.<br /><br />The 50 Hz buzz should sound like a pitch, not a clicking. something like this:<div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=667">50hz-impulse-train.mp3</a> [3.09 KiB]
			</span><br />
			<span class="gensmall">Downloaded 37 times</span>
		

		<br />
	</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elseyf</b> [ Thu Jun 27, 2013 2:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">The pitches should be wrong, in the sense of what you get if you try playing the japanese ROM in an emulator set to PAL.<br />If you're not getting any audio at all, that's not what's wrong.<br /><br />The 50 Hz buzz should sound like a pitch, not a clicking. something like this:<div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia0 -->50hz-impulse-train.mp3<!-- ia0 --></div></div><br /><br />The sound at Point D and E just sound like the sample you provided.<br />I don't care for the pitch of the sound as long as I can hear all the sounds.<br />I rewired the chips with thicker wires, but did not change anything.<br />It would help if there was a way to test the sound chip and the other chips<br />so that i can assure myself that the chip are all working.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elseyf</b> [ Fri Aug 16, 2013 6:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Connect AY-3-8910 sound chip to FME-7 board</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Solved it

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>7</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
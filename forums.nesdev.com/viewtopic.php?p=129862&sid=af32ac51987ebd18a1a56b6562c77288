<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Unsigned Integer Division Routines</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESdev" href="http://forums.nesdev.com/feed.php?f=2" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Unsigned Integer Division Routines" href="http://forums.nesdev.com/feed.php?f=2&amp;t=11336" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en&amp;sid=5453a1e2348f193ea741908bdd85e3f5" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php?sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php?sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php?sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Apr 21, 2017 2:47 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered&amp;sid=5453a1e2348f193ea741908bdd85e3f5">View unanswered posts</a> | <a href="./search.php?search_id=active_topics&amp;sid=5453a1e2348f193ea741908bdd85e3f5">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=5453a1e2348f193ea741908bdd85e3f5">Board index</a> &#187; <a href="./viewforum.php?f=24&amp;sid=5453a1e2348f193ea741908bdd85e3f5">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2&amp;sid=5453a1e2348f193ea741908bdd85e3f5">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5">Unsigned Integer Division Routines</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320&amp;sid=5453a1e2348f193ea741908bdd85e3f5">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>3</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 31 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5&amp;start=30">3</a> &nbsp;<a href="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=2&amp;t=11336&amp;view=previous&amp;sid=5453a1e2348f193ea741908bdd85e3f5">Previous topic</a> | <a href="./viewtopic.php?f=2&amp;t=11336&amp;view=next&amp;sid=5453a1e2348f193ea741908bdd85e3f5">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p129849"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129849">Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129849&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129849"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 9:50 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 33<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I have written a number of division routines in 6502 assembly, and I'm posting them here for other people to use. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />These routines start with any value (0-255) in the accumulator and finish with the integer division result in the accumulator. They are all constant cycles and do not use X or Y. Most do require 1 temp register. I've listed all divisions from 2 to 32 below, including the trivial divide by powers of 2 cases (for sake of completion).<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; Unsigned Integer Division Routines<br />; by Omegamatrix<br /><br /><br />;Divide by 2<br />;1 byte, 2 cycles<br />&nbsp; lsr<br /><br /><br />;Divide by 3<br />;18 bytes, 30 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #21<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br /><br /><br />;Divide by 4<br />;2 bytes, 4 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 5<br />;18 bytes, 30 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #13<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 6<br />;17 bytes, 30 cycles<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br /><br /><br />;Divide by 7 (From December '84 Apple Assembly Line)<br />;15 bytes, 27 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 8<br />;3 bytes, 6 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 9<br />;17 bytes, 30 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 10<br />;17 bytes, 30 cycles<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 11<br />;20 bytes, 35 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 12<br />;17 bytes, 30 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br /><br /><br />; Divide by 13<br />; 21 bytes, 37 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; clc<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 14<br />;1/14 = 1/7 * 1/2<br />;16 bytes, 29 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 15<br />;14 bytes, 24 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #4<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 16<br />;4 bytes, 8 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 17<br />;18 bytes, 30 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; #0<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 18 = 1/9 * 1/2<br />;18 bytes, 32 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 19<br />;17 bytes, 30 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 20<br />;18 bytes, 32 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 21<br />;20 bytes, 36 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 22<br />;21 bytes, 34 cycles<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;cmp&nbsp; #33<br />&nbsp; &nbsp;adc&nbsp; #0<br />&nbsp; &nbsp;sta&nbsp; temp<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;adc&nbsp; temp<br />&nbsp; &nbsp;ror<br />&nbsp; &nbsp;adc&nbsp; temp<br />&nbsp; &nbsp;ror<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;adc&nbsp; temp<br />&nbsp; &nbsp;ror<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br /><br /><br />;Divide by 23<br />;19 bytes, 34 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 24<br />;15 bytes, 27 cycles<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;sta&nbsp; &nbsp;temp<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;adc&nbsp; &nbsp;temp<br />&nbsp; &nbsp;ror<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;adc&nbsp; &nbsp;temp<br />&nbsp; &nbsp;ror<br />&nbsp; &nbsp;lsr<br /><br /><br />;Divide by 25<br />;16 bytes, 29 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 26<br />;21 bytes, 37 cycles<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 27<br />;15 bytes, 27 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 28<br />;14 bytes, 24 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #2<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 29<br />;20 bytes, 36 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 30<br />;14 bytes, 26 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; sec<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 31<br />;14 bytes, 26 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /><br />;Divide by 32<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br /></div></div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5">Omegamatrix</a> on Sun Jun 15, 2014 3:50 pm, edited 4 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p129851"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129851">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129851&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129851"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 10:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 5024<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Cool!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p129853"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129853">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129853&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129853"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 11:44 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 998
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Didn't want to continue off topic in <a href="http://forums.nesdev.com/viewtopic.php?p=129791#p129791" class="postlink">the other thread,</a> but cool! The latest divide by 5 was in the atariage thread, but I do wish I had seen more of the others. Might as well say what I'm using them for. My game detects 49 slope heights. (flat, and 24 facing downward left, 24 facing downward right) I did the trig for the angles of those heights to find what percentage of the speed should be kept. Then I used whatever divide routine was the closest to what it would really be out of the ones I could find. <br /><br />1/2 (0.5)<br />1/4(0.25)<br />1/8(0.125)<br />etc are already accounted for obviously.<br />Then<br />3/4(.75)<br />7/8(0.875) <br />Because you can do the divide, then subtract it from the original. (In fact I do this for 1/2, because I wanted a speed of 1 to not be scaled to zero.) You can do 2/5 with divide by 5 asl etc.I could probably get a little closer with the other divides, but the biggest difference is like 0.04 and I've already gotten used to the feel of the game as is.<br /><br />I'm also using the divide by 5 for a bouncing ball that decays in strength. I looked up the coefficient of restitution for a basketball bouncing on concrete and it was .88ish. So I tried original-original/10, but that felt wrong to interact with in game, so now it's original-original/5.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p129854"></a>
				<b class="postauthor">bogax</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129854">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129854&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129854"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 12:15 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Jul 30, 2008 12:03 am<br /><b>Posts:</b> 32
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Omegamatrix wrote:</div><div class="quotecontent">I have written a number of division routines in 6502 assembly, and I'm posting them here for other people to use. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />These routines start with any value (0-255) in the accumulator and finish with the integer division result in the accumulator. They are all constant cycles and do not use X or Y. Most do require 1 temp register. I've listed all divisions from 2 to 32 below, including the trivial divide by powers of 2 cases (for sake of completion).<br /><br /></div><br /><br />I always thought it was a pity that you didn't keep<br />(or maybe even look for) routines of less accuracy.<br />eg if you know your dividend will never be &gt;40<br />you might get by with less code.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3594&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p129855"></a>
				<b class="postauthor">zzo38</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129855">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129855&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129855"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 12:50 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://forums.nesdev.com/styles/prosilver/theme/images/no_avatar.gif" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Feb 07, 2011 12:46 pm<br /><b>Posts:</b> 880
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Might you add some for calculating modulo as well? As well as 16-bit routines?</div>

					
						<div class="postbody"><br />_________________<br /><a href="gopher://zzo38computer.org/" class="postlink">.</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4734&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p129857"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129857">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129857&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129857"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 1:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 33<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">bogax wrote:</div><div class="quotecontent"><div class="quotetitle">Omegamatrix wrote:</div><div class="quotecontent">I have written a number of division routines in 6502 assembly, and I'm posting them here for other people to use. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />These routines start with any value (0-255) in the accumulator and finish with the integer division result in the accumulator. They are all constant cycles and do not use X or Y. Most do require 1 temp register. I've listed all divisions from 2 to 32 below, including the trivial divide by powers of 2 cases (for sake of completion).<br /><br /></div><br /><br />I always thought it was a pity that you didn't keep<br />(or maybe even look for) routines of less accuracy.<br />eg if you know your dividend will never be &gt;40<br />you might get by with less code.</div><br />Funny you should mention that, as I was just staring at the routines I posted and it occurred to me that in some cases I might be able to go quicker by doing a division up front to reduce the sum, and follow with a cruder approximation second. As simple as that sound it never occurred to me when I wrote them.<br /><br /><br />So... I was immediately able to make five of the routines better. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> I am going to update the first post but in summary here are the updated routines:<br /><br />Old:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Divide by 6<br />;1/6 = 1/3 * 1/2<br />;19 bytes, 32 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #21<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br /><br />;Divide by 10<br />;1/10 = 1/5 * 1/2<br />;19 bytes, 32 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #13<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br />;Divide by 20<br />;1/20 = 1/5 * 1/4<br />;20 bytes, 34 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #13<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br />;Divide by 24<br />;1/24 = 1/3 * 1/8<br />;21 bytes, 36 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #21<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br />;Divide by 26<br />;1/26 = 1/13 * 1/2<br />;22 bytes, 39 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; clc<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr</div><br /><br /><br />And new:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Divide by 6<br />;17 bytes, 30 cycles<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br /><br />;Divide by 10<br />;17 bytes, 30 cycles<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br /><br />;Divide by 20<br />;18 bytes, 32 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br /><br />;Divide by 24<br />;15 bytes, 27 cycles<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;sta&nbsp; &nbsp;temp<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;adc&nbsp; &nbsp;temp<br />&nbsp; &nbsp;ror<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;adc&nbsp; &nbsp;temp<br />&nbsp; &nbsp;ror<br />&nbsp; &nbsp;lsr<br /><br />;Divide by 26<br />;21 bytes, 37 cycles<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /></div><br /><br /><br />I am very happy that a new solution for divide by 10 has been found. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><br />Edit - Divide by 12 has also been superseded! <br />Double Edit - Divide by 28 too!<br /><br />old:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Divide by 12<br />;1/12 = 1/3 * 1/4<br />;20 bytes, 34 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #21<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br /><br />;Divide by 28<br />;1/28 = 1/7 * 1/4<br />;17 bytes, 31 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr</div><br /><br />new:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Divide by 12<br />;17 bytes, 30 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br /><br />;Divide by 28<br />;14 bytes, 24 cycles<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #2<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr</div></div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5">Omegamatrix</a> on Sat Jun 14, 2014 2:40 pm, edited 2 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p129858"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129858">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129858&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129858"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 1:15 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 33<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Kasumi wrote:</div><div class="quotecontent">Didn't want to continue off topic in <a href="http://forums.nesdev.com/viewtopic.php?p=129791#p129791" class="postlink">the other thread,</a> but cool! The latest divide by 5 was in the atariage thread, but I do wish I had seen more of the others. Might as well say what I'm using them for. My game detects 49 slope heights. (flat, and 24 facing downward left, 24 facing downward right) I did the trig for the angles of those heights to find what percentage of the speed should be kept. Then I used whatever divide routine was the closest to what it would really be out of the ones I could find. <br /><br />1/2 (0.5)<br />1/4(0.25)<br />1/8(0.125)<br />etc are already accounted for obviously.<br />Then<br />3/4(.75)<br />7/8(0.875) <br />Because you can do the divide, then subtract it from the original. (In fact I do this for 1/2, because I wanted a speed of 1 to not be scaled to zero.) You can do 2/5 with divide by 5 asl etc.I could probably get a little closer with the other divides, but the biggest difference is like 0.04 and I've already gotten used to the feel of the game as is.<br /><br />I'm also using the divide by 5 for a bouncing ball that decays in strength. I looked up the coefficient of restitution for a basketball bouncing on concrete and it was .88ish. So I tried original-original/10, but that felt wrong to interact with in game, so now it's original-original/5.</div><br />Kasumi, as much as I do love writing these routines, it makes me feel even more glad to hear from people making use of them! Thank you for sharing and one day hopefully we will all be able to play your game!!<br /><br /><br />Jeff</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p129859"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129859">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129859&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129859"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 1:27 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 33<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">zzo38 wrote:</div><div class="quotecontent">Might you add some for calculating modulo as well? As well as 16-bit routines?</div><br />With modulo, most of the time it should be easy enough to run the division routine, times the result, and subtract from the original sum. Multiplication is generally pretty easy... but sometimes can gobble up a lot of cycles.<br /><br /><br />I have written a modulo six routine before. I know I posted one on Atariage a long time ago, but IIRC it wasn't correct and I made one a few months ago that was. I will look for it. Modulo six is useful for games simulating dice rolls. I can't remember how good or bad the routine was that I came up with.<br /><br /><br />For 16-bit routines, I have written one for 10 bit division. It is in my blog here:<br /><br /><!-- m --><a class="postlink" href="http://atariage.com/forums/blog/563/entry-11044-16-bit-division-fast-divide-by-10/">http://atariage.com/forums/blog/563/ent ... ide-by-10/</a><!-- m --><br /><br />After finding that new divide by 10 today I know that the 16 bit routine can also be improved. In general 16 bit division is neither fast in terms of cycles, and cheap in terms of bytes.<br /><br /><br />Edit - found my Modulo 6 routine. It looks like I'm just integer dividing by 6, times by 6, and subtracting from the original sum:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Mod 6<br />;28 bytes, 43 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #21<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; and&nbsp; #$FC<br />&nbsp; sta&nbsp; temp2<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp2<br />&nbsp; sbc&nbsp; temp<br />&nbsp; eor&nbsp; #$FF</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p129861"></a>
				<b class="postauthor">chitselb</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129861">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129861&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129861"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 5:22 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jun 14, 2014 2:14 pm<br /><b>Posts:</b> 6
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">These are great!  I needed a divide by 40 and modulo 40 for a <!-- m --><a class="postlink" href="http://en.wikipedia.org/wiki/DEC_Radix-50">http://en.wikipedia.org/wiki/DEC_Radix-50</a><!-- m --> decoder in a game I'm writing for the Commodore PET 2001( <!-- m --><a class="postlink" href="http://pettil.tumblr.com">http://pettil.tumblr.com</a><!-- m --> ) and the divide by 10 here looks like a good start.  Thank you!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6562&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p129862"></a>
				<b class="postauthor">psycopathicteen</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129862">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129862&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129862"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 5:30 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed May 19, 2010 6:12 pm<br /><b>Posts:</b> 2084
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">How does this work?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4383&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p129869"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129869">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129869&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129869"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 9:41 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 33<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">chitselb wrote:</div><div class="quotecontent">These are great!  I needed a divide by 40 and modulo 40 for a <!-- m --><a class="postlink" href="http://en.wikipedia.org/wiki/DEC_Radix-50">http://en.wikipedia.org/wiki/DEC_Radix-50</a><!-- m --> decoder in a game I'm writing for the Commodore PET 2001( <!-- m --><a class="postlink" href="http://pettil.tumblr.com">http://pettil.tumblr.com</a><!-- m --> ) and the divide by 10 here looks like a good start.  Thank you!</div><br />The good thing here is that the 6502 was used by so many systems. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br />As you know, once you have divided by 10 then you are just two shifts away from a divide by 40. <br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Divide by 40<br />;19 bytes, 34 cycles<br />&nbsp; lsr<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror&nbsp; <br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; lsr</div><br /><br />But here is an alternate code. It costs 1 more byte, but saves two cycles... so use whichever one bests suites you.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Divide by 40<br />;20 bytes, 32 cycles<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; #1<br />&nbsp; adc&nbsp; temp<br />&nbsp; and&nbsp; #$C0<br />&nbsp; rol<br />&nbsp; rol<br />&nbsp; rol</div><br /><br />And a modulo routine:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Mod 40<br />&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; #13<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; and&nbsp; #$E0<br />&nbsp; sta&nbsp; temp2&nbsp; ;x32<br />&nbsp; lsr<br />&nbsp; lsr&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;x8<br />&nbsp; adc&nbsp; temp2&nbsp; ;x40<br />&nbsp; sbc&nbsp; temp<br />&nbsp; eor&nbsp; #$FF</div><br /><br />Or both:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; sta&nbsp; temp<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; lsr<br />&nbsp; lsr<br />&nbsp; adc&nbsp; temp<br />&nbsp; ror<br />&nbsp; adc&nbsp; #1<br />&nbsp; adc&nbsp; temp<br />&nbsp; and&nbsp; #$C0<br />&nbsp; rol<br />&nbsp; rol<br />&nbsp; rol<br /><br />&nbsp; sta&nbsp; divideResult&nbsp; &nbsp;; divide 40 result... TAY, TAX, PHA could be used<br /><br />&nbsp; asl<br />&nbsp; asl<br />&nbsp; asl<br />&nbsp; sta&nbsp; temp2&nbsp; ;x8<br />&nbsp; asl<br />&nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;x32<br />&nbsp; adc&nbsp; temp2&nbsp; ;x40<br />&nbsp; sbc&nbsp; temp<br />&nbsp; eor&nbsp; #$FF<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; mod 40 result</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p129870"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129870">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129870&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129870"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 10:01 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 18163<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">If you're dividing by 10 to make a binary to decimal converter, there are ways to do that other than div/mod.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p129871"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129871">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129871&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129871"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 14, 2014 10:09 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 33<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">How does this work?</div><br />You are dividing and adding that result to your original sum, and then repeating the process. The key is find the correct and shortest sequence of divisions you have to do.<br /><br />I had a simple idea for finding the divisions. I used a brute attack approach running every possible combination in an excel sheet. I only tested for 1/x and ignored truncation... I just looked for division combinations that were the most accurate under perfect circumstances. Those were the routines I focused on testing<br /><br />From there I built a bunch of tools. I made another excel sheet to test division for all input values (0-255), some C programs to do the same thing as both excel sheets, a rom for the 2600 to test for verification and help solve correction factors for some routines. Whenever you see ADC #xx in one of the routines you are looking at a correction factor I had to introduce. Sometimes I found I could also use just CLC or SEC at certain points in the routine to do the correction.<br /><br /><br />The usage of the routines is easy. The accumulator starts with the value to be divided, and ends with the integer division result.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p129872"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129872">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129872&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129872"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 15, 2014 12:12 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 33<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Final thoughts on divide by 40 before I go to bed. This is such a big number that you are approaching the limit where it is simply better to do a looped divide... if you don't mind the extra cycles and spending X or Y.<br /><br /><br />I had another idea, this time using both X and Y. This routine takes 3 more bytes then the combined Div 40 and Mod 40 routine, but it is faster (45 cycles vs 56). It does a comparison and add to get the integer divide. After that I times the result by 4, as I'm reusing the bytes in the comparison as a look up table. The values are already there and nicely spread apart by 4 bytes so why not? I had to add a dummy load at the beginning to get first look up value, that's why the extra LDA #0 is in there.<br /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;Divide by and Mod 40 combined<br />;38 bytes, 45 cycles<br />;Y = value to be divided<br /><br />InterlacedMultiplyByFortyTable:<br />&nbsp; lda&nbsp; #0&nbsp; &nbsp; &nbsp; &nbsp; ; dummy load, #0 used in LUT<br />&nbsp; lda&nbsp; #0<br />&nbsp; cpy&nbsp; #40<br />&nbsp; adc&nbsp; #0<br />&nbsp; cpy&nbsp; #80<br />&nbsp; adc&nbsp; #0<br />&nbsp; cpy&nbsp; #120<br />&nbsp; adc&nbsp; #0<br />&nbsp; cpy&nbsp; #160<br />&nbsp; adc&nbsp; #0<br />&nbsp; cpy&nbsp; #200<br />&nbsp; adc&nbsp; #0<br />&nbsp; cpy&nbsp; #240<br />&nbsp; adc&nbsp; #0<br />&nbsp; <br />&nbsp; sta&nbsp; divideResult&nbsp; &nbsp; &nbsp; ; Integer divide 40<br />&nbsp; <br />&nbsp; asl<br />&nbsp; asl<br />&nbsp; tax<br />&nbsp; tya<br />&nbsp; sec<br />&nbsp; sbc&nbsp; InterlacedMultiplyByFortyTable+1,X<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; A = Mod 40</div><br /><br />Right away I look at this routine and think of putting in some branching to save bytes, but that would destroy the look-up table that's built in. It's a neat if not convoluted routine on its own... I'm just not to sure if it is really useful, but I like to be creative.  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p129873"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p129873">Re: Unsigned Integer Division Routines</a></div><div style="float: right;"><a href="./viewtopic.php?p=129873&amp;sid=5453a1e2348f193ea741908bdd85e3f5#p129873"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 15, 2014 2:48 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38_1485425698.png" width="100" height="94" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 7001<br /><b>Location:</b> Jongny, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The most useful in the case of the NES is probably divide-by-15, as a nametable can show 15 2x2 metatiles vertically, so you'll need to divide by 15 before knowing where to write your metatile when scrolling vertically. (yes I know there are workaround this, but still this is one of the ways to do this).<br /><br />As for divide by power of two, you don't have to remind us they're shifts, I think everyone already knowns.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>3</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 31 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5&amp;start=30">3</a> &nbsp;<a href="./viewtopic.php?f=2&amp;t=11336&amp;sid=5453a1e2348f193ea741908bdd85e3f5&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=5453a1e2348f193ea741908bdd85e3f5">Board index</a> &#187; <a href="./viewforum.php?f=24&amp;sid=5453a1e2348f193ea741908bdd85e3f5">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2&amp;sid=5453a1e2348f193ea741908bdd85e3f5">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <a href="./memberlist.php?mode=viewprofile&amp;u=8130&amp;sid=5453a1e2348f193ea741908bdd85e3f5">Garth</a> and 5 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php?sid=5453a1e2348f193ea741908bdd85e3f5"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="11336" />
<input type="hidden" name="sf" value="msgonly" />
<input type="hidden" name="sid" value="5453a1e2348f193ea741908bdd85e3f5" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php?sid=5453a1e2348f193ea741908bdd85e3f5" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2" selected="selected">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
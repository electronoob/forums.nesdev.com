<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - What happened with Miracle Piano rev-engineering?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">What happened with Miracle Piano rev-engineering?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=9477">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=9477</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Sat Nov 10, 2012 2:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Have there ever been any attempts to rev-engineer to the Miracle Piano?<br /><br />Aside from NES/SNES versions it has been also sold for PC, Amiga, Macintosh, and Genesis - all versions using the same keyboard (and differing only by the included software and connection cable). In so far, the keyboard should be quite popular and not too rare.<br /><br />Some things that are known are found here:<br /><!-- m --><a class="postlink" href="http://pianoeducation.org/pnompfaq.html#manuals">http://pianoeducation.org/pnompfaq.html#manuals</a><!-- m --> - midi messages described in owner's manual<br /><!-- m --><a class="postlink" href="http://pianoeducation.org/pnompfaq.html#Repairing">http://pianoeducation.org/pnompfaq.html#Repairing</a><!-- m --> - complete/official schematics<br />looks perfect for rev-engineering and emulation. Only a few important details are missing: The BIOS-ROM dump and SOUND-ROM dump, and details about the sound generator.<br /><br />A nice and simple thing to start with would be having a photo (or scan) of the piano's mainboard.<br /><br />Would be interesting to know if the two ROMs are having sockets (would make it easier to dump them), and if they are stored on ROMs or EPROMs (or in worst case: if the BIOS is located on-chip in the CPU).<br />And, if there are different PCB version ore stickers on the ROMs (theoretically all pianos should be identical, no matter if it's a NES or PC keyboard, but considering the miracle's lifetime, there might be several revisions).<br /><br />There seem to be two ASICs on the PCB that might be easy to guess how they work. And the sound generator, which may be harder. It is reportedly made by &quot;Thomson SGS&quot; (aka &quot;SGS Thomson&quot;), and the schematic is calling it &quot;J004&quot; (which looks more like an odd abbreviation than like a valid component name). Maybe the real chip has some more text on it, allowing to identify it, or even to find a datasheet for it.<br /><br />Anybody having one of those piano keyboards &amp; could take photos of it's mainboard &amp; chipet?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Sun Nov 11, 2012 6:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's a couple of photos of the board, click for full image (Huge files, ~7MB)<br /><br /><a href="http://www.dwedit.org/files/miracle/DSC_0259.JPG" class="postlink"><img src="http://www.dwedit.org/files/miracle/board1_sm.jpg" alt="Image" /></a><br /><br /><a href="http://www.dwedit.org/files/miracle/DSC_0257.JPG" class="postlink"><img src="http://www.dwedit.org/files/miracle/board2_sm.jpg" alt="Image" /></a><br /><br />If anyone really needs the raws (NEF format) for some reason, I could upload them too.<br /><br />Edit: Hard to put it back together, those leds sticking out need to be perfectly lined up, along with the rear ports.<br />Edit again: DAMMIT, those LEDS just don't want to go through the holes.  I don't know if this thing will ever snap back into place.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Sun Nov 11, 2012 11:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Cool, many thanks for the pics!<br /><br />The sound chip is actually called &quot;J004&quot; made by STmicroelectronics (aka SGS Thomson's newer name). But there seems to be no datasheet for it :-(<br /><br />And BIOS is badged &quot;STW 12-90, 800522, OS-1.10, C/S 87EC&quot; the 4 lines are probably meaning date, part number, version, checksum. If it's version 1.10 then there should be also some other version(s) out there.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Edit again: DAMMIT, those LEDS just don't want to go through the holes. I don't know if this thing will ever snap back into place.</div><br />Oops, sorry for getting you into that. I hope there's some trick to get it back together!<br />Before you do - how are chances that you could dump the socketed 28pin BIOS ROM?<br />(In case you have an EPROM burner or other tools for dumping ROMs/EPROMs).<br />(I guess you won't be too motivated to desolder &amp; dump the 32pin sound ROM?).<br /><br />I am wondering if there is a special BIOS version for the SNES. Nintendo seems to have been quite strict that SNES controllers must send a controller ID code (in the 13th..16th bit of the serial data). Maybe the newer piano versions are doing that too (although the 8032 CPU is maybe a bit too slow to shift-out more than 8bits at reasonable speed, so SNES software may encounter lost bits when trying to the ID; if there's one at all).<br /><br />EDIT: Is it possible to lift the black plastic that the LEDs are sticking in? Maybe that could help to get them well aligned.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Mon Nov 12, 2012 2:44 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sorry, I don't have any Rom dumping/burning equipment (or even a soldering iron for that matter).<br />But my Miracle also has a broken right speaker that works only if I power off and on really fast a few times.  Any ideas?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Mon Nov 12, 2012 5:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">Sorry, I don't have any Rom dumping/burning equipment (or even a soldering iron for that matter).</div><br />Okay. Hope somebody else will get them dumped someday. For now it's nice to know that the chips are there, and that they are quite easily accessible.<br />Did you got the case re-assembled? And do you have some hints for other people how to get it together?<br /><br /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">my Miracle also has a broken right speaker that works only if I power off and on really fast a few times.  Any ideas?</div><br />Sounds like a dirty switch or potentiometer - but, the miracle doesn't have any analog volume/equalizer regulators (only digital volume push buttons). The power switch itself shouldn't affect the right speaker (if it does then it must be some odd side-effect).<br />The headphone socket has two built-in switches (for muting speakers when headphone is connected), maybe these switches are dirty. You could try to insert/remove a headphone a bunch of times, maybe that changes something. If it does, then some (small amount of) contact spray in the headphone socket might also help.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Mon Nov 12, 2012 7:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What's strange is that I think the headphone jack also has the bad right channel at the same time.  My memory may be rusty, but I think that's happening too.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Nov 12, 2012 10:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Maybe there's something funny at the audio amplifier IC? or DAC?<br />I don't have any good guesses where to try, other than using an oscilloscope to find where the audio disappears. But that requires at least a block diagram of the PCB.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>sleepy9090</b> [ Tue Nov 13, 2012 6:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />interesting topic, I have a miracle piano system still in the box and all the necessary materials required for desoldering and dumping, I'm in the last 3 weeks of this semester, so if no one beats me to it I might get a chance over Christmas break to dump them.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Tue Nov 13, 2012 8:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />&gt; I have a miracle piano system still in the box and all the necessary materials required for desoldering and dumping<br />Cool, I'll try to remind you in case you forget it :-)<br /><br />&gt; I think the headphone jack also has the bad right channel at the same time.<br />That might be worth testing. Same for the RCA output. If they are all having the same problem then it must be something between the connectors and the J004 sound chip. The sound-engine schematic (see above link) is nicely showing where the right audio is routed through (J004 --&gt; U10 --&gt; U4D --&gt; U3A --&gt; U2A --&gt; connectors).<br />If it's sometimes working, and sometimes not, then it might be a broken soldering point somewhere near those components (you might spot that when closely looking at the soldering points). That would be very easy to repair: just one tap with the soldering iron - or as you don't have one - you could maybe even fix it by squeezing the solder back together with your fingernail (never tried that method, but it <em>might</em> temporarily fix the problem).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu Nov 15, 2012 4:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Finally got the thing reassembled!  YAY!<br /><br />For the next guy who has to get the motherboard back into the case:<br />Get the ports in the back through the holes in the case.  Raise the back side (where the ports are) as much as you can, make sure the screw holes are lined up, and lower the front and back together, then hopefully it goes back in cleanly with a snap sound.  Make sure none of the LEDs are bent before you do this, bend them back if they are bent, insertion attempts will bend them.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Fri Nov 16, 2012 10:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />&gt; Here's a couple of photos of the board<br /><br />Dear god. I could buy one of these and have a lifetime supply of resistors o.O

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Fri Nov 16, 2012 11:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks like there's diodes, capacitors, and inductors in there too, not just resistors.  But there are 121 of them!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Lord Nightmare</b> [ Sun Nov 23, 2014 11:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />We need dumps of the socketed firmware ROM at U17 (27c256 32KB EPROM, version 1.10 in the picture, there are likely others also needing dumps) and we need a dump of the soldered-down 32-pin mask ROM at U12, which holds the instrument sample data. The mask rom as pictured is a 128KB S631001-200 mask ROM, which should be dumpable as if it was a 27c010 eprom assuming the schematics are correct.<br /><br />LN

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Mon Nov 24, 2014 2:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I had some official source code (printed, on paper) given to me for what appears to be the Genesis Miracle Piano software, back in 1997 or so.  It's in C, and I think it's just an instrument/sample table (basically a big struct), but I'm not completely sure.  I could provide a picture/scan of one of the pages (and all the rest if someone wanted) if anyone found it useful.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Lord Nightmare</b> [ Tue Nov 25, 2014 9:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What happened with Miracle Piano rev-engineering?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Koitsu: It may or may not end up being useless, but I'd love to get a copy of that.<br /><br />LN

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - WIP: Wizard of Wor</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Homebrew Projects" href="http://forums.nesdev.com/feed.php?f=22" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - WIP: Wizard of Wor" href="http://forums.nesdev.com/feed.php?f=22&amp;t=16172" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '7');
	var per_page = '15';
	var base_url = './viewtopic.php?f=22&amp;t=16172';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 1:54 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=22">Homebrew Projects</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=22&amp;t=16172&amp;start=90">WIP: Wizard of Wor</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=22"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=22&amp;t=16172"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>7</strong> of <strong>12</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 166 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=22&amp;t=16172&amp;start=75">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=22&amp;t=16172">1</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=75">6</a><span class="page-sep">, </span><strong>7</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=105">8</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=120">9</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=135">10</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=165">12</a> &nbsp;<a href="./viewtopic.php?f=22&amp;t=16172&amp;start=105">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=22&amp;t=16172&amp;start=90&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=22&amp;t=16172&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=22&amp;t=16172&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p202282"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p202282">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=202282#p202282"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 11, 2017 12:34 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 35<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tschak909 wrote:</div><div class="quotecontent">The modulo is the problem here, given an integer divide by 24 such as:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;; void __fastcall__ div24(unsigned char d);<br />_div24: lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; rts<br /></div><br /><br />How can I determine a modulo? Is it sitting here in temp at some point?<br /><br />-Thom</div><br /><br />Modulo is easy, there are a few ways to do it. You'll have to figure out how to integerate it into C though. Here's a few ways:<br /><br />Long slow division does not take too long in this case as 24 is a big divisor.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;24-94 cycles<br />_div24_mod24:<br />&nbsp; &nbsp; &nbsp; &nbsp; ldy&nbsp; &nbsp;#$FF<br />&nbsp; &nbsp; &nbsp; &nbsp; sec<br />_div24:<br />&nbsp; &nbsp; &nbsp; &nbsp; iny<br />&nbsp; &nbsp; &nbsp; &nbsp; sbc&nbsp; &nbsp;#24<br />&nbsp; &nbsp; &nbsp; &nbsp; bcs&nbsp; &nbsp;_div24<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;#24<br />&nbsp; &nbsp; &nbsp; &nbsp; rts&nbsp; &nbsp;; Y = integer division result, A = modulo result</div><br /><br />Using the unsigned integer division routine for div24, modulo24 can be found afterward with the help of a small look up table:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;54 cycles&nbsp; <br />_div24_mod24: <br />&nbsp; &nbsp; &nbsp; &nbsp; pha&nbsp; &nbsp;; save original value<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; tay&nbsp; &nbsp;; integer division result<br />&nbsp; &nbsp; &nbsp; &nbsp; pla&nbsp; &nbsp;; get original value<br />&nbsp; &nbsp; &nbsp; &nbsp; sec<br />&nbsp; &nbsp; &nbsp; &nbsp; sbc&nbsp; &nbsp;_multiply24,Y<br />&nbsp; &nbsp; &nbsp; &nbsp; rts&nbsp; &nbsp;; Y = integer division result, A = modulo result<br /><br />_multiply24:<br />&nbsp; &nbsp; &nbsp; &nbsp; .db 0,24,48,72,96,120<br />&nbsp; &nbsp; &nbsp; &nbsp; .db 144,168,192,216,240</div><br /><br />If you don't want to trash Y, you could just multiply by 24 instead of using a look up table.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">_div24_mod24: <br />&nbsp; &nbsp; &nbsp; &nbsp; pha&nbsp; &nbsp;; save original value<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; C 76543210<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;intDiv24&nbsp; ; x 0000xxxx&nbsp; &nbsp; integer division result (0-10 possible)<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 0 000xxxx0&nbsp; &nbsp; x2<br />&nbsp; &nbsp; &nbsp; &nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 0 00xxxx00&nbsp; &nbsp; x4<br />&nbsp; &nbsp; &nbsp; &nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 0 0xxxx000&nbsp; &nbsp; x8<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 0 xxxx0000&nbsp; &nbsp; x16 (carry is always clear at this point)<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP&nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;x24<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; pla&nbsp; &nbsp;; get original value<br />&nbsp; &nbsp; &nbsp; &nbsp; sec<br />&nbsp; &nbsp; &nbsp; &nbsp; sbc&nbsp; &nbsp;TEMP&nbsp; &nbsp; &nbsp; ; A = modulo result, intDiv24 = integer division result<br />&nbsp; &nbsp; &nbsp; &nbsp; rts</div><br /><br /><br />Hope that helps!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p202284"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p202284">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=202284#p202284"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 11, 2017 1:23 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Omegamatrix wrote:</div><div class="quotecontent"><div class="quotetitle">tschak909 wrote:</div><div class="quotecontent">The modulo is the problem here, given an integer divide by 24 such as:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;; void __fastcall__ div24(unsigned char d);<br />_div24: lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; rts<br /></div><br /><br />How can I determine a modulo? Is it sitting here in temp at some point?<br /><br />-Thom</div><br /><br />Modulo is easy, there are a few ways to do it. You'll have to figure out how to integerate it into C though. Here's a few ways:<br /><br />Long slow division does not take too long in this case as 24 is a big divisor.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;24-94 cycles<br />_div24_mod24:<br />&nbsp; &nbsp; &nbsp; &nbsp; ldy&nbsp; &nbsp;#$FF<br />&nbsp; &nbsp; &nbsp; &nbsp; sec<br />_div24:<br />&nbsp; &nbsp; &nbsp; &nbsp; iny<br />&nbsp; &nbsp; &nbsp; &nbsp; sbc&nbsp; &nbsp;#24<br />&nbsp; &nbsp; &nbsp; &nbsp; bcs&nbsp; &nbsp;_div24<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;#24<br />&nbsp; &nbsp; &nbsp; &nbsp; rts&nbsp; &nbsp;; Y = integer division result, A = modulo result</div><br /><br />Using the unsigned integer division routine for div24, modulo24 can be found afterward with the help of a small look up table:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;54 cycles&nbsp; <br />_div24_mod24: <br />&nbsp; &nbsp; &nbsp; &nbsp; pha&nbsp; &nbsp;; save original value<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; tay&nbsp; &nbsp;; integer division result<br />&nbsp; &nbsp; &nbsp; &nbsp; pla&nbsp; &nbsp;; get original value<br />&nbsp; &nbsp; &nbsp; &nbsp; sec<br />&nbsp; &nbsp; &nbsp; &nbsp; sbc&nbsp; &nbsp;_multiply24,Y<br />&nbsp; &nbsp; &nbsp; &nbsp; rts&nbsp; &nbsp;; Y = integer division result, A = modulo result<br /><br />_multiply24:<br />&nbsp; &nbsp; &nbsp; &nbsp; .db 0,24,48,72,96,120<br />&nbsp; &nbsp; &nbsp; &nbsp; .db 144,168,192,216,240</div><br /><br />If you don't want to trash Y, you could just multiply by 24 instead of using a look up table.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">_div24_mod24: <br />&nbsp; &nbsp; &nbsp; &nbsp; pha&nbsp; &nbsp;; save original value<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; ror<br />&nbsp; &nbsp; &nbsp; &nbsp; lsr<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; C 76543210<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;intDiv24&nbsp; ; x 0000xxxx&nbsp; &nbsp; integer division result (0-10 possible)<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 0 000xxxx0&nbsp; &nbsp; x2<br />&nbsp; &nbsp; &nbsp; &nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 0 00xxxx00&nbsp; &nbsp; x4<br />&nbsp; &nbsp; &nbsp; &nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 0 0xxxx000&nbsp; &nbsp; x8<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; asl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 0 xxxx0000&nbsp; &nbsp; x16 (carry is always clear at this point)<br />&nbsp; &nbsp; &nbsp; &nbsp; adc&nbsp; &nbsp;TEMP&nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;x24<br />&nbsp; &nbsp; &nbsp; &nbsp; sta&nbsp; &nbsp;TEMP<br />&nbsp; &nbsp; &nbsp; &nbsp; pla&nbsp; &nbsp;; get original value<br />&nbsp; &nbsp; &nbsp; &nbsp; sec<br />&nbsp; &nbsp; &nbsp; &nbsp; sbc&nbsp; &nbsp;TEMP&nbsp; &nbsp; &nbsp; ; A = modulo result, intDiv24 = integer division result<br />&nbsp; &nbsp; &nbsp; &nbsp; rts</div><br /><br /><br />Hope that helps!</div><br /><br />OMEGAMATRIX! How are you, man? Good to see you over here from AtariAge. I just signed up here for my first NES project. <br /><br />also, thanks for the fast divide routines. They're great. <br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p202289"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p202289">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=202289#p202289"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 11, 2017 2:47 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 35<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'm well. Looking for to see this homebrew develop.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p202302"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p202302">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=202302#p202302"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 11, 2017 9:42 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'm getting closer, I've attached a ROM of the current behavior. It mostly works except in certain cases I can still go through walls, and am trying to figure out why this is:<br /><br />code snippets:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/**<br />&nbsp;* handle_pad_idle()<br />&nbsp;*/<br />void handle_pad_idle(void)<br />{<br />&nbsp; // Change to idle state if pad is idle.<br />&nbsp; switch(stamps&#91;STAMP_LAST_STATE(i)&#93;)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; case STATE_PLAYER_RIGHT:<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_RIGHT_IDLE;<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; case STATE_PLAYER_LEFT:<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_LEFT_IDLE;<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; case STATE_PLAYER_UP:<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_UP_IDLE;<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; case STATE_PLAYER_DOWN:<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_DOWN_IDLE;<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; }<br />}<br /><br />/**<br />&nbsp;* handle_player_in_field()<br />&nbsp;* Handle when player is on the playfield<br />&nbsp;*/<br />void handle_player_in_field(void)<br />{<br />&nbsp; if ((stamps&#91;STAMP_X(i)&#93;==PIXEL_BOX_X(a)) &amp;&amp; (stamps&#91;STAMP_Y(i)&#93;==PIXEL_BOX_Y(b)))<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; // We are aligned.<br />&nbsp; &nbsp; &nbsp; if (PLAYER_PAD_RIGHT(i) &amp;&amp; !BOX_WALL_RIGHT(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(i)&#93;=STATE_PLAYER_RIGHT;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_LEFT(i) &amp;&amp; !BOX_WALL_LEFT(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(i)&#93;=STATE_PLAYER_LEFT;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_UP(i) &amp;&amp; !BOX_WALL_UP(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(d)&#93;=STATE_PLAYER_UP;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_DOWN(i) &amp;&amp; !BOX_WALL_DOWN(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(d)&#93;=STATE_PLAYER_DOWN;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_IDLE(i))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; handle_pad_idle();<br />&nbsp; &nbsp; }<br />&nbsp; else<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; // We are not aligned.<br />&nbsp; &nbsp; &nbsp; if (PLAYER_PAD_IDLE(i))<br />&nbsp; &nbsp; &nbsp; &nbsp; handle_pad_idle();<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_RIGHT(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_LEFT)<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_RIGHT;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_LEFT(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_RIGHT)<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_LEFT;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_UP(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_DOWN)<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_UP;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_DOWN(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_UP)<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_DOWN;<br />&nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(i)&#93;;<br />&nbsp; &nbsp; }<br /><br />&nbsp; // Handle state movement<br />&nbsp; if (stamps&#91;STAMP_STATE(i)&#93;==STATE_PLAYER_RIGHT)<br />&nbsp; &nbsp; stamps&#91;STAMP_X(i)&#93;++;<br />&nbsp; else if (stamps&#91;STAMP_STATE(i)&#93;==STATE_PLAYER_LEFT)<br />&nbsp; &nbsp; stamps&#91;STAMP_X(i)&#93;--;<br />&nbsp; else if (stamps&#91;STAMP_STATE(i)&#93;==STATE_PLAYER_UP)<br />&nbsp; &nbsp; stamps&#91;STAMP_Y(i)&#93;--;<br />&nbsp; else if (stamps&#91;STAMP_STATE(i)&#93;==STATE_PLAYER_DOWN)<br />&nbsp; &nbsp; stamps&#91;STAMP_Y(i)&#93;++;<br /><br />&nbsp; // And set last state, if we aren't idle.<br />&nbsp; if (!PLAYER_PAD_IDLE(i))<br />&nbsp; &nbsp; stamps&#91;STAMP_LAST_STATE(i)&#93;=stamps&#91;STAMP_STATE(i)&#93;;<br />}<br /><br />/**<br />&nbsp;* handle_player_in_box()<br />&nbsp;* Handle when player is in box.<br />&nbsp;*/<br />void handle_player_in_box(void)<br />{<br />&nbsp; if (stamps&#91;STAMP_XTRA_A(i)&#93;&gt;0)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; if (stamps&#91;STAMP_XTRA_B(i)&#93; != 0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_XTRA_A(i)&#93;=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_Y(i)&#93;=PIXEL_BOX_Y(6)-1; // 6 is the Y for the box.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (sec==0) // 0 means approximately 1 second elapsed.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_XTRA_A(i)&#93;--;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Decrement timer<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; else<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_Y(i)&#93;=PIXEL_BOX_Y(5); // Pop out of box.<br />&nbsp; &nbsp; &nbsp; if (i==0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yellow_door_state=CLOSED;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blue_door_state=CLOSED;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />}<br /><br />/**<br />&nbsp;* move_players()<br />&nbsp;*/<br />void move_players(void)<br />{<br />&nbsp; for (i=0;i&lt;2;++i)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; get_current_box();<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_XTRA_B(i)&#93;=pad_poll(i);<br /><br />&nbsp; &nbsp; &nbsp; if (stamps&#91;STAMP_Y(i)&#93;==PIXEL_BOX_Y(6)-1)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; handle_player_in_box();<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; handle_player_in_field();<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />}<br /></div><br /><br />Some vars:<br /><br />a=the x coordinate for box cell (0-9)<br />b=the y coordinate for box cell (0-5)<br />c=the entry in the dungeon table to get the walls for that cell<br />d=the value pointed to by c<br /><br />PIXEL_BOX_X converts a to a screen pixel coordinate using a multiply by 24 and adding a center bias, effectively aligning sprite in the center of box.<br /><br />PIXEL_BOX_Y is the same for the Y coordinate in b.<br /><br />BOX_WALL_* are macros that check for a given bit set in D for a wall present in cell d<br /><br />I'm so freaking close, it's %(#@@#(%@# grrrrr... heeeeeelp! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Of course, the code is in github, but I'm attaching a binary rom here in case somebody can derive the errant behavior: <br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=9811">wow-better-player-collision.nes</a> [40.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 51 times</span>
		

		<br />
	</div><br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p202311"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p202311">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=202311#p202311"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 11, 2017 11:31 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Adding this block  in the aligned condition improves the collision detection to the point where I am no longer going through any walls, BUT, The player  tries to change direction one box before the actual corner, which causes the player to not go through the wall, but hit the preceeding wall early and stop trying to round the corner. urgh... <br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; if (PLAYER_PAD_RIGHT(i) &amp;&amp; BOX_WALL_RIGHT(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_RIGHT_IDLE;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_LEFT(i) &amp;&amp; BOX_WALL_LEFT(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_LEFT_IDLE;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_UP(i) &amp;&amp; BOX_WALL_UP(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_UP_IDLE;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_DOWN(i) &amp;&amp; BOX_WALL_DOWN(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_DOWN_IDLE;<br /></div><br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=9814">wow-better-player-coll-2.nes</a> [40.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 71 times</span>
		

		<br />
	</div><br /><br />Setting it to last state on each if, replicates the through wall behavior, so it looks like I need to dig into last state setting. <br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p202312"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p202312">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=202312#p202312"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Aug 12, 2017 12:09 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 6592<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The lion-head enemies have a nice bounce to them.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p202313"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p202313">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=202313#p202313"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Aug 12, 2017 12:13 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">The lion-head enemies have a nice bounce to them.</div><br /><br />Thanks, I am doing occasional tests on a front loader attached to a cheapo AV upscaler which is just butchering the field output, and would love to see a pic of this running on a real CRT. The NTSC emulation in various emulators just doesn't feel right at all.<br /><br />I will say that it is on my list that the monsters will all eventually have have random frame starts, so they aren't all skipping in unison, but right now, I am trying to get player to wall collision happening correctly. It's almost there. grrrrr...<br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p203312"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203312">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203312#p203312"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Aug 26, 2017 1:12 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">It's been quiet here, as I've been sidetracked on doing some Raspberry Pi work, but I'm continuing back on this, as soon as I hit a stopping point with the work I'm doing on the Pi.<br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p203920"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203920">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203920#p203920"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Sep 04, 2017 7:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">and I'm back. Motion solved with the following code (to be optimized):<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/**<br />&nbsp;* handle_player_in_field()<br />&nbsp;* Handle when player is on the playfield<br />&nbsp;*/<br />void handle_player_in_field(void)<br />{<br />&nbsp; if ((stamps&#91;STAMP_X(i)&#93;==PIXEL_BOX_X(a)) &amp;&amp; (stamps&#91;STAMP_Y(i)&#93;==PIXEL_BOX_Y(b)))<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; // We are aligned.<br />&nbsp; &nbsp; &nbsp; if (PLAYER_PAD_RIGHT(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93; != STATE_PLAYER_RIGHT &amp;&amp; !BOX_WALL_RIGHT(d))<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(i)&#93;=STATE_PLAYER_RIGHT;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_LEFT(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93; != STATE_PLAYER_LEFT &amp;&amp; !BOX_WALL_LEFT(d))<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(i)&#93;=STATE_PLAYER_LEFT;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_UP(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93; != STATE_PLAYER_UP &amp;&amp; !BOX_WALL_UP(d))<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(d)&#93;=STATE_PLAYER_UP;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_DOWN(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93; != STATE_PLAYER_DOWN &amp;&amp; !BOX_WALL_DOWN(d))<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(d)&#93;=STATE_PLAYER_DOWN;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_IDLE(i))<br />&nbsp; &nbsp;&nbsp; handle_pad_idle();<br />&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; if (stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_RIGHT &amp;&amp; BOX_WALL_RIGHT(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_RIGHT_IDLE;<br />&nbsp; &nbsp; &nbsp; else if (stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_LEFT &amp;&amp; BOX_WALL_LEFT(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_LEFT_IDLE;<br />&nbsp; &nbsp; &nbsp; else if (stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_UP &amp;&amp; BOX_WALL_UP(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_UP_IDLE;<br />&nbsp; &nbsp; &nbsp; else if (stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_DOWN &amp;&amp; BOX_WALL_DOWN(d))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_DOWN_IDLE;<br /><br />&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; }<br />&nbsp; else<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; // We are not aligned.<br />&nbsp; &nbsp; &nbsp; if (PLAYER_PAD_IDLE(i))<br />&nbsp; &nbsp;handle_pad_idle();<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_RIGHT(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_LEFT)<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_RIGHT;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_LEFT(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_RIGHT)<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_LEFT;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_UP(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_DOWN)<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_UP;<br />&nbsp; &nbsp; &nbsp; else if (PLAYER_PAD_DOWN(i) &amp;&amp; stamps&#91;STAMP_LAST_STATE(i)&#93;==STATE_PLAYER_UP)<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_DOWN;<br />&nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp;stamps&#91;STAMP_STATE(i)&#93;=stamps&#91;STAMP_LAST_STATE(i)&#93;;<br />&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; }<br />&nbsp; <br />&nbsp; // Handle state movement<br />&nbsp; if (stamps&#91;STAMP_STATE(i)&#93;==STATE_PLAYER_RIGHT)<br />&nbsp; &nbsp; stamps&#91;STAMP_X(i)&#93;+=2;<br />&nbsp; else if (stamps&#91;STAMP_STATE(i)&#93;==STATE_PLAYER_LEFT)<br />&nbsp; &nbsp; stamps&#91;STAMP_X(i)&#93;-=2;<br />&nbsp; else if (stamps&#91;STAMP_STATE(i)&#93;==STATE_PLAYER_UP)<br />&nbsp; &nbsp; stamps&#91;STAMP_Y(i)&#93;-=2;<br />&nbsp; else if (stamps&#91;STAMP_STATE(i)&#93;==STATE_PLAYER_DOWN)<br />&nbsp; &nbsp; stamps&#91;STAMP_Y(i)&#93;+=2;<br /><br />&nbsp; // And set last state, if we aren't idle.<br />&nbsp; if (!PLAYER_PAD_IDLE(i))<br />&nbsp; &nbsp; stamps&#91;STAMP_LAST_STATE(i)&#93;=stamps&#91;STAMP_STATE(i)&#93;;&nbsp; <br />}<br /></div><br /><br />Also merged in a new cfg file and Makefile courtesy of polluks, which will work on newer CC65 compilers after 2.15.<br /><br />Latest ROM here: <div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=10033">wow-working-player-collision.nes</a> [40.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 59 times</span>
		

		<br />
	</div><br /><br />More to come shortly,<br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p203922"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203922">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203922#p203922"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Sep 04, 2017 9:55 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">is control okay for everybody? You should be able to move and round corners with ease. Let me know.<br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p203923"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203923">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203923#p203923"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Sep 04, 2017 10:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 7391<br /><b>Location:</b> Seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Feels good to me. The bit where trying to walk into a wall makes you continue walking in the previous direction until you can turn strikes me as &quot;surprising, but useful&quot;.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p203924"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203924">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203924#p203924"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Sep 04, 2017 10:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 6592<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">It's good. I like that you can hold diagonal and it will alternate. That's exactly how I'd want/expect it to work.<br /><br />The only thing that's maybe weird to me is if I press up just a little bit then stop, now pressing either left or right will move me upwards until the next grid, which feels a little weird, but maybe not something that needs to be addressed at all. (It's easy to learn this quirk, and it resolves itself pretty quickly anyway.)<br /><br />Like I think I'd probably make it so that you can't stop moving between grid points, only reverse direction, so there's never a situation where you could have stopped just a little bit out of grid and have left/right forced to move up/down. I don't know if you'd want to do that, though, I presume the original game did not. That's just what I'd do, because it seems like walking a little bit out of the grid is already a commitment to move in that direction, might as well complete it?<br /><br />Right now the sprite overlaps right-hand walls by one pixel.<br /><br />Also kinda wish that my feet didn't always point right when going up/down but that also seems to be that way in the original? (I suppose it would make just as much sense to be able to walk upside-down as well, but that one doesn't feel &quot;missing&quot;.)<br /><br />Ejection from the starting point seems weird (immediate pop out, and then one frame of changed direction), but I'll assume that's something you haven't worked on yet.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> on Mon Sep 04, 2017 10:21 pm, edited 2 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p203925"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203925">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203925#p203925"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Sep 04, 2017 10:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The rounding corners is quite fine.<br /><br />But you've got some kind of serious glitch for the two players. <br /><br /><img src="https://i.imgur.com/ownOZ23.gif" alt="Image" /><br /><br />When player 2 changes to facing up or down, occasionally it affects player one. Let me know if you need an fm2 or something for debugging.<br /><br />Edit: Oh, I appear to have missed the previous post saying there were problems with going through walls. Maybe the gif is useful for reproducing it, though.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p203948"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203948">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203948#p203948"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 7:58 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">WOW, that's a neat bug. I'll try to squash that today. Thanks for finding it! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p203949"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203949">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203949#p203949"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 8:25 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ok, it has to be here, is there something stupid that I'm doing with regards to reading the player pads?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/**<br />&nbsp;* move_players()<br />&nbsp;*/<br />void move_players(void)<br />{<br />&nbsp; for (i=0;i&lt;2;++i)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; get_current_box();<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_XTRA_B(i)&#93;=pad_poll(i);<br /><br />&nbsp; &nbsp; &nbsp; if (stamps&#91;STAMP_Y(i)&#93;==PIXEL_BOX_Y(6)-1)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; handle_player_in_box();<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; handle_player_in_field();<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />}<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=22&amp;t=16172&amp;start=90"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=22"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=22&amp;t=16172"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>7</strong> of <strong>12</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 166 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=22&amp;t=16172&amp;start=75">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=22&amp;t=16172">1</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=75">6</a><span class="page-sep">, </span><strong>7</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=105">8</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=120">9</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=135">10</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=165">12</a> &nbsp;<a href="./viewtopic.php?f=22&amp;t=16172&amp;start=105">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=22">Homebrew Projects</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="16172" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22" selected="selected">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Fixing ROMs for EMS 64 GB Smart Card USB</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Fixing ROMs for EMS 64 GB Smart Card USB</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=20&amp;t=5804">http://forums.nesdev.com/viewtopic.php?f=20&amp;t=5804</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>14</strong> of <strong>19</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Wed Sep 18, 2013 10:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">zarkone wrote:</div><div class="quotecontent">2) Metal Gear. In STAGE 3, when i meet Chris, the game freezes.</div><br /><br />Did erasing the data fix Metal Gear for you?  Has anyone else made it past stage 3?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Thu Sep 19, 2013 12:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'll have to check them out when I get the chance.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Thu Sep 19, 2013 2:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">I'll have to check them out when I get the chance.</div><br />Awesome!  Thanks Mott.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Thu Sep 19, 2013 10:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just finished more tests on Gameboy Color games.  Only testing decent games to keep list low since there's only one MottZilla.  Although I'm finished, if I find another problematic Color game in the future I'll report it here.  I'll test Mono games later.<br /><br />Updated list of games refusing to load into writing queue:<br /><br />Alice In Wonderland<br />Bionic Commando - Elite Forces<br />Daikatana<br />Deja Vu I &amp; II<br />Heroes of Might and Magic II<br />Survival Kids<br />Toki Tori<br /><br />Funny thing -- Survival Kids 2 loads, but not Survival Kids 1.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Fri Sep 20, 2013 1:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />edit:<br /><br />Bugged games list no longer needed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Fri Sep 20, 2013 2:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />With bugged games, using the drop down menu freezes GB_USB.exe  However, when using drag and drop, I've received Access Violation and Privileged Instruction errors.<br /><br />Could it be a header problem?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri Sep 20, 2013 8:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Berserk wrote:</div><div class="quotecontent">With bugged games, using the drop down menu freezes GB_USB.exe  However, when using drag and drop, I've received Access Violation and Privileged Instruction errors.<br /><br />Could it be a header problem?</div><br /><br />I haven't been able to check it out yet, but it's possible when it reads data from the ROM you are trying to load that something happens due to the data read causing it to bug out/freeze/crash.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Fri Sep 20, 2013 9:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">I haven't been able to check it out yet, but it's possible when it reads data from the ROM you are trying to load that something happens due to the data read causing it to bug out/freeze/crash.</div>What concerns me is that the bug effects a quarter of the games tested.  If individual fixes are needed, the amount of work would be a bit much for a single person.  Of course, that's only if they can be fixed at all.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nitro2k01</b> [ Sat Sep 21, 2013 1:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm out travelling and currently don't have access to my EMS 64M cartridge, so I can't confirm the following myself. (I can open the application and even drag and drop files onto the window, but without plugging in the cartridge, the interface is otherwise all greyed out.)<br /><br />But, Mottzilla's modified exe is based on the 1.0.3 version of the EMS software, whereas the latest version is at least 1.0.4. Maybe the problem is fixed in the 1.0.4 version. <br />You can find this version here: <!-- m --><a class="postlink" href="http://www.hkems.com/files/GB_USB.rar">http://www.hkems.com/files/GB_USB.rar</a><!-- m --><br />Could someone please check if the problem exists in the 1.0.4 version as well?<br /><br />Another option might be to manually prepare a big ROM file and try to write that instead of letting the EMS software do that.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Windows:<br />copy /b menu.gb + rom1.gb + rom2.gb + rom3.gb output.gb<br /><br />UNIX-ish:<br />cat menu.gb rom1.gb rom2.gb rom3.gb &gt; output.gb</div>However, when doing this manully, care must be taken to align the ROMs correctly. A 64 <a href="http://en.wikipedia.org/wiki/Binary_prefix" class="postlink">ki</a>B ROM must lie on a 64 kiB boundary, a 128 kiB ROM must lie on a 128 kiB boundary, and so on. For example, if the menu is 32 kiB, and the rom1.gb above is 64 kiB, it will start 32 kiB into the ROM, which will make it fail.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Sat Sep 21, 2013 6:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Problem confirmed in 1.0.4.<br /><br />I don't fully understand the menu to rom size boundries you describe, so I haven't tried that yet.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Sat Sep 21, 2013 8:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was curious to find out if I'm having an isolated issue.  I decided to test an untouched rom and it worked.  I compared the crc to the rom that didn't work -- and they were the SAME.  Huh?<br /><br />Maybe I unearthed a strange bug or something, but so far all the roms I've tested now work after zipping them up and writing over the original.<br /><br />Weird.<br /><br />So problem solved... I think.  I really appreciated the help.  Thanks guys.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Berserk</b> [ Sat Sep 21, 2013 11:10 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">The SmartCard uses the first 32kb of FlashROM to store the menu program. This is why you can't have multiple games that add up to 32 megabits on a page. But as tepples suggested, it is quite possible you could trim a larger ROM that has empty space at the end. I have not personally tested it. I suspect it would probably work.</div>I managed to trim 'Wendy - Every Witch Way', which has exactly 32k of unused space at the end and have been putzing around trying to fill up an entire 32Mb page.<br /><br />The flasher doesn't recognize the trimmed space, so I couldn't just add in the extra game.  When I tried combining the roms outside the flasher (ordered from smallest to largest), the flasher only acknowledged the first rom in the combined set, which may be due to the flasher assuming it was a single game, and when it sees only a single game it doesn't add the rom menu.  So, while I did manage to fill the entire 32Mb page, I was only able to play 1 game.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Sep 21, 2013 12:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />To do it manually in Windows, your combined file may need the menu header edited. Using the Linux flasher this may not be needed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>V666</b> [ Mon Sep 23, 2013 6:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi!<br /><br />May I just add some games that are not working on the smart card:<br /><br />Final Fantasy Legend  1 &lt;- does not save.<br />Metal Masters &lt;- does not run.<br /><br />Great work here.<br /><br />I need to sharp my assembly skills so that I can help here <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>V666</b> [ Mon Sep 23, 2013 6:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Mmh...Final Fantasy Legend 1 seems to save OK if I have this only ROM loaded in the page.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>14</strong> of <strong>19</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
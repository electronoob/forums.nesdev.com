<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Hacking a NES cart in the name of love</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Hacking a NES cart in the name of love</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=8202">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=8202</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alt4</b> [ Mon Oct 10, 2011 1:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Hacking a NES cart in the name of love</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hey, everyone.  I originally posted this over at 8bit collective and a member pointed me in the direction of the NesDev forums.  Here's my original post:
<br />
<br />Hey guys.  I'd like to begin by saying I'm dead serious and that I'm looking for real advice.  This will probably sound a little silly, but bear with me.
<br />
<br />I'm thinking of tying the knot with my girlfriend and I've been mulling it over in my mind how to propose to her in some grand and surprising fashion.
<br />
<br />My girlfriend is a huuuuge Tetris fan.  She plays it on a daily basis and has a special love for the NES version.  I was thinking it'd be really awesome if I could hack a cart to deliver my proposal after she finishes a round of tetris.  She gets pretty focused when she's clearing lines, so there's no way she'd see it coming.  All I'd have to do is switch out her cart with my hacked one and then play the waiting game.  You know, go down on one knee once she tops out.
<br />
<br />Tell me, is this at all plausible?  Would it be possible to hack the ending of a game of tetris to deliver a few lines of text and maybe a simple rendering of a heart or something like that?
<br />
<br />I'm just curious if it'd be possible.  Would it be just such a huge amount of effort and work that a layman would be unable to figure it out?  I'm willing to spend the man hours learning how to make it happen, if there is such a possibility.
<br />
<br />If it can be done, I'd really appreciate it if you guys could point me in the right direction of how to get started.  If I have to build a hardware interface and flash a rom onto a blank cart, so be it.  I want this proposal to come out of nowhere so it'll have some flash and pizzazz.  I'm still a ways off from proposing, but I'd like to have the moment ready for when I've prepared the other fun stuff (like the much less fun talk with her Dad).
<br />
<br />Anyways, I appreciate any advice you can offer.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Oct 10, 2011 2:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Hacking a NES cart in the name of love</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Alt4 wrote:</div><div class="quotecontent">Tell me, is this at all plausible?  Would it be possible to hack the ending of a game of tetris to deliver a few lines of text and maybe a simple rendering of a heart or something like that?</div><br />That'd be almost trivial. All you have to do is take an open-source NES game with the same rules as Tetris (such as my own <a href="http://lj65.org/" class="postlink">LJ65</a>), change the Game Over scroll to say "WILL YOU MARRY ME?", and recompile.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If I have to build a hardware interface and flash a rom onto a blank cart, so be it.</div>
<br />Really all you have to do is load the game onto a CF card and put it in a <a href="http://www.retrousb.com/product_info.php?cPath=24&amp;products_id=34" class="postlink">PowerPak</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Mon Oct 10, 2011 2:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Hacking a NES cart in the name of love</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Alt4 wrote:</div><div class="quotecontent">Tell me, is this at all plausible?  Would it be possible to hack the ending of a game of tetris to deliver a few lines of text and maybe a simple rendering of a heart or something like that?</div><br />That'd be almost trivial. All you have to do is take an open-source NES game with the same rules as Tetris (such as my own <a href="http://lj65.org/" class="postlink">LJ65</a>), change the Game Over scroll to say "WILL YOU MARRY ME?", and recompile.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If I have to build a hardware interface and flash a rom onto a blank cart, so be it.</div><br />Really all you have to do is load the game onto a CF card and put it in a <a href="http://www.retrousb.com/product_info.php?cPath=24&amp;products_id=34" class="postlink">PowerPak</a>.</div>
<br />
<br />My guess is her reaction would be "WTF is LJ65 and WTH did you do with my Tetris???"
<br />
<br />I think he means taking the ROM image of the game she plays daily and modifying it.  Only slightly more complicated than your proposal [pun intended].

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alt4</b> [ Mon Oct 10, 2011 2:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Haha, cpow's got it.  The idea is to have a game of Tetris that's indistinguishable from an actual copy of tetris, except when you finish it asks you to get married.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Mon Oct 10, 2011 2:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Everything is doable, you only need either skills and knowledge how to do that, or money to get someone to make this done for you. You can't get the knowledge and skills with just reading few posts on a forum, this requires a lot of time and dedication.
<br />
<br />Also, you actually need to do two separate, unconnected things - hack a game and put it onto a cartridge. First requires knowledge of software, second requires knowledge or hardware (or just money to get PowerPak).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Oct 10, 2011 2:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Hacking a NES cart in the name of love</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">cpow wrote:</div><div class="quotecontent">My guess is her reaction would be "WTF is LJ65 and WTH did you do with my Tetris???"</div>
<br />"I made it faster and more responsive because I love you."
<br />
<br />Are we talking about Nintendo's version or Tengen's version? For Nintendo's version, probably the easiest hack would be replacing "SCORE / LEVEL / HEIGHT / TOTAL" in the B-type result screen with "WILL / YOU / MARRY / ME?".

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alt4</b> [ Mon Oct 10, 2011 2:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, I really just wanted to know if it was doable.  That way I could either decide to sit down and do the research on how to make it happen, or find another way of proposing.
<br />
<br />Beings this gang is pretty confident that it's possible, I think it'd be time to take the first steps down the road to making it happen.
<br />
<br />I take it there will be weeks worth of studying and preparation?  Where's a good place to begin my education?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Oct 10, 2011 2:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />General computer science concepts to read up on first:
<br /><!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/Before_the_basics">http://wiki.nesdev.com/w/index.php/Before_the_basics</a><!-- m -->
<br />
<br />Concepts specific to hacking:
<br /><!-- m --><a class="postlink" href="http://www.romhacking.net/start">http://www.romhacking.net/start</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alt4</b> [ Mon Oct 10, 2011 3:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks, everybody!
<br />
<br />And thanks for the links, Tepples.
<br />
<br />S'gonna be a good time for sure :3

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Mon Oct 10, 2011 4:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So...? Something like this? (ignore the random period in the middle, must have missed something when I put spaces everywhere)
<br />
<br /><img src="http://img818.imageshack.us/img818/1329/girlsname.png" alt="Image" />
<br />
<br />If so, here's an IPS patch to do that much: <!-- m --><a class="postlink" href="http://www.mediafire.com/?s7dad4fnninpxdn">http://www.mediafire.com/?s7dad4fnninpxdn</a><!-- m --> Took like ten minutes. So if you've got a specific message, PM me.
<br />
<br />As for a crude rendering of a heart, that's probably also possible. It might even be possible to put a teeny, tiny picture of you or her depending on how many unique letters your message uses. (Edit: NVM, no the picture definitely can't be done. If she's good enough to get to the castle ending, we can't take those tiles out. Unless you don't mind her head blasting off, heh)
<br />
<br />Edit: Putting this on a cart is probably easy too since this board is cloned by retrozone, but I won't do that for you.
<br />
<br />Also, this counts on her getting to the high score table, but from what you describe it sounds like that won't be an issue.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alt4</b> [ Mon Oct 10, 2011 4:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Wow, ten minutes, Kasumi?
<br />
<br />Heh, guys around here really know what they're doing!
<br />
<br />Thanks so much for the help.  This'll make an excellent reference.  Looks like the hard part's gonna be getting the info onto the cart, but I love a good build project, so it'll be fun.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Mon Oct 10, 2011 4:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />People who play a lot of games stop reading the text, they just know what it says, they don't even look at it.  So when the name entry screen comes up, I bet she wouldn't even notice it.
<br />
<br />So you need something else to get attention, so it's not just a skippable Name Entry screen with hacked text.
<br />
<br />Hack it to also play the unused song in the game.
<br />Or make the rest of the screen black, and stop the game (still playing music).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Mon Oct 10, 2011 4:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You're probably right, Dwedit. I won't bother with the song thing, but I'll see if I can't make it stop accepting input at the name entry screen. (So it can't be skipped at all.)
<br />
<br />Anyway, here's how I did it: (And by the way, I'm totally happy to just do it for you. The only reason I won't put it on a cart is because I've only made one cart before, and if I mess up I'm out some cash. I'd highly recommend you do find another person unless you're a real do it yourselfer, else it's a moderate amount of money for an Eprom programmer you'll only use once. I know... because I've used mine only once. I wouldn't call the process hard though. Just burn eproms, and solder them to a board)
<br />
<br />Open up Tetris in FCEUX. Get to the high score screen. Go to debug, name table viewer. Mouse over the text in the screen, and look at the tile ID.
<br />
<br />Mouse over C you get 0C. Mouse over O you get 18. N is 17. G is 10, etc.
<br />
<br />Get a hex editor. FCEUX actually has one built in. (If you're going to use that one, debug, Hex editor. Then view, rom file.)
<br />
<br />Now search for the string of hex numbers. For instance, cong is 0C, 18, 17, 10. To replace that text, just type in the tile ID of the letters you want there. For instance, putting 00 01 02 03 in place of 0C, 18, 17, 10 would make it say 0123ratulations
<br />
<br />To find out the hex values of the letters you'll need, go to debug, pattern viewer. Save the rom, run it and see how it looks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Mon Oct 10, 2011 5:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />And here's a new version that addresses Dwedit's concerns: <!-- m --><a class="postlink" href="http://www.mediafire.com/?3tnp9p9ffonp8x4">http://www.mediafire.com/?3tnp9p9ffonp8x4</a><!-- m -->
<br />
<br />It just completely locks the game up on the high score table, so she can't skip it. I even made sure it doesn't lock up in case of the castle blast off sequence, but something I did may have affected something else. No music or anything, but I wouldn't be willing to dedicate the time for all that. If a frozen screen with a message is enough, it's essentially done.
<br />
<br />Edit: I just figured out how I can probably make it keep playing the music, but I still wouldn't know how to change the song.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alt4</b> [ Mon Oct 10, 2011 8:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, you're very kind, Kasumi.  Thanks for doing so much tinkering on my behalf.  Dwedit, you bring up an excellent point.  There's quite a few games out there in which I myself just jam the start button until I'm playing again (just got it all memorized after all these years).
<br />
<br />Thanks for the tips, Kasumi.  I'll do some digging and see how much I can alter the final screen.  I'll try to make it so radically different that it would be foreign to a person who's a regular tetris player.
<br />
<br />The actual act of getting the info onto a cart is something that I'm 100% unfamiliar with, but I like to think I'm a DIYer, so it should be a fun project.
<br />
<br />I've been into the 8-bit music scene for some time now, so getting to know how to hack roms is a skill that I'd like to have.  All in all it should be a good time.
<br />
<br />Thanks again, everyone.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
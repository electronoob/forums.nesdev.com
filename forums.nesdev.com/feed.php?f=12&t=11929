<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=12&amp;t=11929" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2014-11-04T12:40:55-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=12&amp;t=11929</id>
<entry>
<author><name><![CDATA[Funky.Art]]></name></author>
<updated>2014-11-04T12:40:55-07:00</updated>
<published>2014-11-04T12:40:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=136038#p136038</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=136038#p136038"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=136038#p136038"><![CDATA[
Unfortunetly, it's too difficult for myself, so in can't made it....<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6731">Funky.Art</a> — Tue Nov 04, 2014 12:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qwertymodo]]></name></author>
<updated>2014-10-30T14:26:30-07:00</updated>
<published>2014-10-30T14:26:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135755#p135755</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135755#p135755"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135755#p135755"><![CDATA[
The patch is made by writing assembly code (well... apparently Conn wrote it directly in a hex sheet, but I wouldn't suggest it unless you really know what you're doing) which overwrites the parts in the game's original code that controls the audio track switching, then hijacking the code to run your own code instead.  Then, you write the code to check for the existence of the MSU-1 chip, attempt to load the MSU-1 track that corresponds to the track the game was originally trying to play, then checking whether or not the track loaded properly.  If it didn't (e.g. there's no .pcm file for that track, or maybe the storage device broke), then you should probably fall back to loading the original spc track instead.  Also, you'll need to handle audio fade-in/out events.  As far as asm hacks go, it's not that complicated, but if you haven't written SNES assembly before, chances are this is more complicated than you realize.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5348">qwertymodo</a> — Thu Oct 30, 2014 2:26 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Funky.Art]]></name></author>
<updated>2014-10-29T13:28:31-07:00</updated>
<published>2014-10-29T13:28:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135724#p135724</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135724#p135724"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135724#p135724"><![CDATA[
I wanted to know how is made the ips patch of Zelda, to know how to remade it ! <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6731">Funky.Art</a> — Wed Oct 29, 2014 1:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-10-28T15:59:11-07:00</updated>
<published>2014-10-28T15:59:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135694#p135694</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135694#p135694"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135694#p135694"><![CDATA[
Perhaps the ease of ripping GBA music with saptapper gave some people unrealistic expectations of how much can be done with automated music tools.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Oct 28, 2014 3:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[juef]]></name></author>
<updated>2014-10-28T15:08:05-07:00</updated>
<published>2014-10-28T15:08:05-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135692#p135692</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135692#p135692"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135692#p135692"><![CDATA[
You want to use the patch with <em>other games</em>? Well, I don't think a &quot;universal MSU1 patch&quot; can be made... You'll have to find or make one for each game with which you want to use MSU1.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4465">juef</a> — Tue Oct 28, 2014 3:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qwertymodo]]></name></author>
<updated>2014-10-28T14:31:36-07:00</updated>
<published>2014-10-28T14:31:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135689#p135689</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135689#p135689"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135689#p135689"><![CDATA[
I'm not sure exactly what the issue is you're having.  You can't just apply the .ips to another ROM and have it work, if that's what you're thinking.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5348">qwertymodo</a> — Tue Oct 28, 2014 2:31 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Funky.Art]]></name></author>
<updated>2014-10-26T08:08:10-07:00</updated>
<published>2014-10-26T08:08:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135576#p135576</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135576#p135576"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135576#p135576"><![CDATA[
I can't use the patch with other games, Higan doesn't make a bml file complete, and i can't use it ! D:<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6731">Funky.Art</a> — Sun Oct 26, 2014 8:08 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qwertymodo]]></name></author>
<updated>2014-10-23T13:54:09-07:00</updated>
<published>2014-10-23T13:54:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135467#p135467</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135467#p135467"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135467#p135467"><![CDATA[
It's possible, but what I've learned is that the way that patch works is rather simple and naive, which is what causes the issues I've seen.  <a href="http://www.zeldix.net/t453p180-enable-msu-streaming-music" class="postlink">This thread</a> has a better patch without the issues, but it isn't portable to other games (also, it requires you to expand the ROM because it's too large to fit within the limited empty space in the original aLttP ROM)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5348">qwertymodo</a> — Thu Oct 23, 2014 1:54 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Funky.Art]]></name></author>
<updated>2014-10-23T06:59:45-07:00</updated>
<published>2014-10-23T06:59:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135441#p135441</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135441#p135441"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135441#p135441"><![CDATA[
With all your help, now it's works fine ! <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> But i was thinking, with this tutorial : <!-- m --><a class="postlink" href="https://github.com/mwreichelt/Zelda3-MSU-Audio/wiki/Getting-Started">https://github.com/mwreichelt/Zelda3-MS ... ng-Started</a><!-- m --> , can we use it for making a patch for another rom ? Like Castlevania ?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6731">Funky.Art</a> — Thu Oct 23, 2014 6:59 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qwertymodo]]></name></author>
<updated>2014-10-20T11:58:15-07:00</updated>
<published>2014-10-20T11:58:15-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135284#p135284</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135284#p135284"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135284#p135284"><![CDATA[
Ok, so having finally managed to get it working, here's a step-by-step guide, since there isn't any documentation out there on the implementation details of the msu-1 in higan, e.g. the manifest markup or the file naming scheme.  Thankfully, byuu helped me figure it out, so I'll pass it along here.<br /><br />First of all, open higan and import your Zelda ROM.  This should create a game folder inside [user home folder]\Emulation\Super Famicom.  If you also want to have a non-MSU version in your higan library, make a copy of the game folder and rename it whatever you want in order to differentiate the two.<br /><br />Now, use LunarIPS (or any other IPS patching tool) to apply the IPS patch in the release folder from that link (see the &quot;Getting Started&quot; page for a download) to apply the patch to the file named program.rom inside the game folder.  Create an empty file inside the game folder named msu1.msu.  Note that if you do this, you *don't* need to copy all of the files from the release package into the game folder.<br /><br />Then, edit the manifest.bml, changing the title (if you want), the sha256 hash, and also adding the following lines:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">  msu1<br />    rom name=msu1.msu size=0x0000<br />    map id=io address=00-3f,80-bf:2000-2007</div><br /><br />Or, if you prefer, here's my full manifest.bml file<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">cartridge region=NTSC<br />  board type=1A3B revision=11,12,13<br />  rom name=program.rom size=0x100000<br />  ram name=save.ram size=0x2000<br />  map id=rom address=00-1f,80-9f:8000-ffff mask=0x8000<br />  map id=ram address=70-7d,f0-ff:0000-ffff<br /><br />  msu1<br />    rom name=msu1.msu size=0x0000<br />    track number=1 name=&quot;01 Title - Link to the Past.pcm&quot;<br />    track number=2 name=&quot;02 Hyrule Field Main Theme.pcm&quot;<br />    track number=3 name=&quot;&quot;<br />    track number=4 name=&quot;&quot;<br />    track number=5 name=&quot;05 Forest of Mystery.pcm&quot;<br />    track number=6 name=&quot;&quot;<br />    track number=7 name=&quot;07 Kakariko Village.pcm&quot;<br />    track number=8 name=&quot;&quot;<br />    track number=9 name=&quot;09 Dark Golden Land.pcm&quot;<br />    track number=10 name=&quot;10 Unsealing the Master Sword.pcm&quot;<br />    track number=11 name=&quot;11 Beginning of the Journey.pcm&quot;<br />    track number=12 name=&quot;&quot;<br />    track number=13 name=&quot;&quot;<br />    track number=14 name=&quot;14 Guessing Game House.pcm&quot;<br />    track number=15 name=&quot;&quot;<br />    track number=16 name=&quot;16 Majestic Castle.pcm&quot;<br />    track number=17 name=&quot;&quot;<br />    track number=18 name=&quot;18 Dank Dungeons.pcm&quot;<br />    track number=19 name=&quot;&quot;<br />    track number=20 name=&quot;20 Safety in the Sanctuary.pcm&quot;<br />    track number=21 name=&quot;&quot;<br />    track number=22 name=&quot;&quot;<br />    track number=23 name=&quot;23 Fortune Teller.pcm&quot;<br />    track number=24 name=&quot;24 Dank Dungeons.pcm&quot;<br />    track number=25 name=&quot;&quot;<br />    track number=26 name=&quot;&quot;<br />    track number=27 name=&quot;27 The Goddess Appears.pcm&quot;<br />    track number=28 name=&quot;&quot;<br />    track number=29 name=&quot;&quot;<br />    track number=30 name=&quot;&quot;<br />    track number=31 name=&quot;&quot;<br />    track number=32 name=&quot;&quot;<br />    track number=33 name=&quot;&quot;<br />    track number=34 name=&quot;&quot;<br />    track number=35 name=&quot;&quot;<br />    map id=io address=00-3f,80-bf:2000-2007<br /><br />information<br />  title:    The Legend of Zelda: A Link to the Past (MSU-1)<br />  name:     Legend of Zelda - A Link to the Past (MSU-1), The<br />  region:   NA<br />  revision: 1.0<br />  board:    SHVC-1A3B-12<br />  serial:   SNS-ZL-USA<br />  sha256:   e975381a0a07ba655469b2384e1c8a9f00f814a6c46468dcfa4e1f3ae96c9639<br />  configuration<br />    rom name=program.rom size=0x100000<br />    ram name=save.ram size=0x2000</div><br /><br />Notice all of the track number=x name=&quot;&quot; lines.  These can be deleted if you want, in which case the .pcm files should be named track-1.pcm, track-2.pcm, etc.  If you leave those lines there, you can name the music files whatever you want and just put the file name in the manifest (as you can see, I'm just getting started).  The .pcm files go inside the game folder (i.e. in the same folder as manifest.bml, program.rom, msu1.msu, etc).<br /><br />Now to convert the audio files.  First you need to convert whatever source files you have into 16-bit, 44100 PCM .wav files.  Once you've done that, you can use the wav2msu program in the release folder you downloaded previously to add the required msu header.  Copy the files into the game folder and name them appropriately (and update the manifest if necessary), and you should be good to go.  Use the <a href="https://github.com/mwreichelt/Zelda3-MSU-Audio/wiki/Tracklist" class="postlink">track list</a> to get an idea of what song is what track number (NB, the songs at the beginning with the rain sound effect during the storm seem to be separate tracks, and I can't find their track index just yet).  My suggestion is to start with the title track to be sure that you actually have it working before starting to work on the rest of the tracks.<br /><br />There are a few issues with that patch, so I'm not sure if you actually want to work on the .asm to improve it or if you were just looking for a drop-in solution.  For one, if you're missing a track and it falls back to the original .spc, it doesn't properly stop the .spc track when it switches to a new track that does have a .pcm replacement (e.g. try replacing the file selection song without replacing the title track, you'll see what I mean).  Also, opening the map completely breaks all audio, and you just get white noise.  Not sure what's up with that.  There may be other bugs too, but that's what I found in about 20 minutes playing around with it.<br /><br />Anywho... there ya go.  Have at it.  And if you do happen to improve the patch to fix some of the issues (I've read elsewhere that track fading probably isn't handled, so that probably needs to be added), please go ahead and release your improvements <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5348">qwertymodo</a> — Mon Oct 20, 2014 11:58 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qwertymodo]]></name></author>
<updated>2014-10-19T15:49:43-07:00</updated>
<published>2014-10-19T15:49:43-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135248#p135248</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135248#p135248"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135248#p135248"><![CDATA[
<!-- m --><a class="postlink" href="https://github.com/mwreichelt/Zelda3-MSU-Audio">https://github.com/mwreichelt/Zelda3-MSU-Audio</a><!-- m --><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5348">qwertymodo</a> — Sun Oct 19, 2014 3:49 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[juef]]></name></author>
<updated>2014-10-18T06:23:19-07:00</updated>
<published>2014-10-18T06:23:19-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135216#p135216</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135216#p135216"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135216#p135216"><![CDATA[
I have succeeded a while ago with Super Mario World, with the help from some technical documents. It's not much, but maybe <a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=8051&amp;p=127008#p127008" class="postlink">this post</a> can help you.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4465">juef</a> — Sat Oct 18, 2014 6:23 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Funky.Art]]></name></author>
<updated>2014-10-18T03:08:19-07:00</updated>
<published>2014-10-18T03:08:19-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135214#p135214</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135214#p135214"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135214#p135214"><![CDATA[
Well, it's more the code part that doesn't work I think ^^'<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6731">Funky.Art</a> — Sat Oct 18, 2014 3:08 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qwertymodo]]></name></author>
<updated>2014-10-17T14:26:52-07:00</updated>
<published>2014-10-17T14:26:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135191#p135191</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135191#p135191"/>
<title type="html"><![CDATA[Re: MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135191#p135191"><![CDATA[
If you do manage to get this working, <a href="http://forums.ffshrine.org/f72/legend-zelda-link-between-worlds-ost-rip-172599/" class="postlink">this</a> might make for a good source of music files (though redistributing those tracks wouldn't be legal).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5348">qwertymodo</a> — Fri Oct 17, 2014 2:26 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Funky.Art]]></name></author>
<updated>2014-10-17T09:50:08-07:00</updated>
<published>2014-10-17T09:50:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135184#p135184</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135184#p135184"/>
<title type="html"><![CDATA[MSU1 for A Link To The Past Problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11929&amp;p=135184#p135184"><![CDATA[
With all the tutorials on internet, i’ve tried to code in MSU1 for A Link to the Past, but i can’t listen the pcm music, there is only the soundfont of the title in spc ! D :<br />Could someone help me in making a xml code maybe, or do a tutorial for explain how to do a hack ? <br /><br />Thank you very much ! <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6731">Funky.Art</a> — Fri Oct 17, 2014 9:50 am</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - 用FC计算生肖(THE LUNAR YEAR MASCOTS OF CHINA)</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">用FC计算生肖(THE LUNAR YEAR MASCOTS OF CHINA)</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=18&amp;t=5045">http://forums.nesdev.com/viewtopic.php?f=18&amp;t=5045</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>fogota</b> [ Sat Apr 11, 2009 10:55 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>用FC计算生肖(THE LUNAR YEAR MASCOTS OF CHINA)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />FC(任天堂NES)自编程序.创意作品,首次将FC当成是小程序使用.<br />全英文版.全文字程序.输入年份计算生肖<br /><br />Do you want know what Mascots in the Lunar Year of China?<br />Tell me a year which you want known. And I'll tell you.<br /><br />Here,I use FC.<br /><br />Download here <br /><br />now , new download : <!-- m --><a class="postlink" href="http://fogota.ys168.com/">http://fogota.ys168.com/</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat Apr 11, 2009 1:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's good, for a first program it does a lot.  There are some problems with the PPU.  I tested it with NEStopia and FCEU.
<br />
<br />If you want, I'll review the code and help you fix all the problems.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>fogota</b> [ Sat Apr 11, 2009 8:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />With your help, too much honor to it.
<br />
<br />I'm using the NBasic Compiler.
<br />
<br />Here the asm &amp; NBasic code.
<br />
<br /><!-- m --><a class="postlink" href="http://www.uushare.com/user/fogota/files/1487930">http://www.uushare.com/user/fogota/files/1487930</a><!-- m -->
<br />
<br />my friends at NET ,they are going to add some pritrues to it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>fogota</b> [ Sat Apr 11, 2009 9:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's not my first program.It's the second.
<br />
<br />THe first program is GREEDY SNAKE.
<br />
<br />HA..HA..  at the same net-disk.
<br />
<br />Download here 
<br /><!-- m --><a class="postlink" href="http://www.uushare.com/group/10085/topic/11555">http://www.uushare.com/group/10085/topic/11555</a><!-- m -->
<br />
<br /><!-- m --><a class="postlink" href="http://www.uushare.com/user/fogota/files/1131553">http://www.uushare.com/user/fogota/files/1131553</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Apr 24, 2009 11:06 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sorry about the slow reply.
<br />
<br />Greedy Snake is pretty cool, I only tested it on emulators so far, but it seems to work there.  One misspelling is that it says "GAME LEVE" instead of "GAME LEVEL".
<br />
<br />I've never used nbasic so it confuses me a bit, so I'm not sure of what to change to fix the graphics in the Lunar Year program.  One problem I did see was waiting for vblank end (with LDA $2002 / BMI).  That won't work, because the vblank flag is cleared as soon as it's read.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Apr 24, 2009 11:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Most of the time, you don't need to wait for the end of vblank. You can just set up the scroll registers, run your outside-of-vblank code, and wait for the NMI handler to run again.
<br />
<br />Historical note: Some early homebrew developers assumed that the NES's vblank flag behaved like Nesticle's. In Nesticle, if you don't use NMI, you have to wait for vblank to end then wait for it to start again; otherwise, your main loop might run twice if it finishes while still in vblank.
<br />
<br />Platform note: The Game Boy Advance's vblank flag operates like Nesticle's, but the vblank interrupt is still preferred there because the GBA CPU has a "wait for next interrupt" instruction that lowers CPU power consumption to near zero.
<br />
<br />Exception: It is possible to wait for the end of vblank, and you may have to do that if you're using forced blanking at the top of the screen. The right way involves triggering a sprite 0 hit and waiting for that flag to become 0.
<br />
<br />"GAME LEVE" might be the 8 sprites limitation.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>fogota</b> [ Sun Apr 26, 2009 8:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Sorry about the slow reply.<br /><br />Greedy Snake is pretty cool, I only tested it on emulators so far, but it seems to work there.  One misspelling is that it says "GAME LEVE" instead of "GAME LEVEL".<br /><br />I've never used nbasic so it confuses me a bit, so I'm not sure of what to change to fix the graphics in the Lunar Year program.  One problem I did see was waiting for vblank end (with LDA $2002 / BMI).  That won't work, because the vblank flag is cleared as soon as it's read.</div>
<br />
<br />I'm sorry for my English.I'll change it "GAME LEVEL".
<br />
<br />And what do you use?
<br />
<br />My nbasic come from Mr.Bob Rost(<!-- m --><a class="postlink" href="http://bobrost.com/nes/">http://bobrost.com/nes/</a><!-- m -->)
<br />
<br />I'm learning his code. I just try to used the "wait for vbland end".
<br />
<br />And it looks like good. So I just use it. I'm just learning...
<br />
<br />My games all can run in my MP4 what it has a emulator .
<br />
<br /><img src="http://www.uushare.com/photo/preview/fogota/1540869.jpg" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>fogota</b> [ Sun Apr 26, 2009 8:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Most of the time, you don't need to wait for the end of vblank. You can just set up the scroll registers, run your outside-of-vblank code, and wait for the NMI handler to run again.<br /><br />Historical note: Some early homebrew developers assumed that the NES's vblank flag behaved like Nesticle's. In Nesticle, if you don't use NMI, you have to wait for vblank to end then wait for it to start again; otherwise, your main loop might run twice if it finishes while still in vblank.<br /><br />Platform note: The Game Boy Advance's vblank flag operates like Nesticle's, but the vblank interrupt is still preferred there because the GBA CPU has a "wait for next interrupt" instruction that lowers CPU power consumption to near zero.<br /><br />Exception: It is possible to wait for the end of vblank, and you may have to do that if you're using forced blanking at the top of the screen. The right way involves triggering a sprite 0 hit and waiting for that flag to become 0.<br /><br />"GAME LEVE" might be the 8 sprites limitation.</div>
<br />
<br />Thanks a lot!!
<br />
<br />I'll learning....
<br />
<br />My friend on China,Win for my GREEDY SNAKE.
<br /><img src="http://www.uushare.com/photo/preview/fogota/1540868.jpg" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sun Apr 26, 2009 9:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I use cc65 <a href="http://www.cc65.org/" class="postlink">http://www.cc65.org/</a>, but I've also worked with many other assembler programs.  cc65 has a C compiler, but I never use that part.  I have seen a few good programs use the nbasic compiler.
<br />
<br />Really the best way to update VRAM, is to use the NMI interrupt.  But since that's in assembly I don't know how (or if) nbasic handles it.
<br />
<br />tepples had mentioned NESticle, it sounds like the emulator in the MP4 device may be similar.  Best described as permissive, you can get away with a lot of things the hardware won't allow.  I wrote many programs that worked on NESticle but not other emulators or the real system when I first started out (since NESticle was the only emulator to test it on).
<br />
<br />I would advise using an emulator like Nestopia <a href="http://nestopia.sourceforge.net/" class="postlink">http://nestopia.sourceforge.net/</a> for testing.  Often I'll add it into the .bat file just for convenience.  And for the program, try to keep all updates to VRAM as short as possible and only do it immediately after vblank is detected.  It should work then.  By VRAM accesses I mean anything to the $2006 and $2007 registers (which is 8198 and 8199 in nbasic).
<br />
<br />As the program gets more complex, it helps to write VRAM updates into a buffer in RAM first, then copy it all during vblank.
<br />
<br />You've done good at learning this stuff, and your english is pretty good, by the way.  It's pretty cool to create a program from nothing. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>fogota</b> [ Tue Apr 28, 2009 6:23 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">I use cc65 <a href="http://www.cc65.org/" class="postlink">http://www.cc65.org/</a>, but I've also worked with many other assembler programs.  cc65 has a C compiler, but I never use that part.  I have seen a few good programs use the nbasic compiler.<br /><br />Really the best way to update VRAM, is to use the NMI interrupt.  But since that's in assembly I don't know how (or if) nbasic handles it.<br /><br />tepples had mentioned NESticle, it sounds like the emulator in the MP4 device may be similar.  Best described as permissive, you can get away with a lot of things the hardware won't allow.  I wrote many programs that worked on NESticle but not other emulators or the real system when I first started out (since NESticle was the only emulator to test it on).<br /><br />I would advise using an emulator like Nestopia <a href="http://nestopia.sourceforge.net/" class="postlink">http://nestopia.sourceforge.net/</a> for testing.  Often I'll add it into the .bat file just for convenience.  And for the program, try to keep all updates to VRAM as short as possible and only do it immediately after vblank is detected.  It should work then.  By VRAM accesses I mean anything to the $2006 and $2007 registers (which is 8198 and 8199 in nbasic).<br /><br />As the program gets more complex, it helps to write VRAM updates into a buffer in RAM first, then copy it all during vblank.<br /><br />You've done good at learning this stuff, and your english is pretty good, by the way.  It's pretty cool to create a program from nothing. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
<br />
<br />Oh, yes, you're right. My idae is same with you.
<br />
<br />But I'm lazy,,,,so have no time to reseach the interrupt.
<br />
<br />I know that the VRAM accesses must be end , at the end of vblank.
<br />
<br />So I use a lot of codes to wait the end of vblank.
<br />
<br />The tools is too lack to development. I just have Nbasic and a few of emulator.
<br />
<br />My codes often give me some wrong message what I do not understand.
<br />
<br />I busy modifing my codes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Yave</b> [ Sat Nov 01, 2014 4:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 用FC计算生肖(THE LUNAR YEAR MASCOTS OF CHINA)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />计算生肖喝了，uushare早挂了……<br /><br />这2009年的贴，真的好老！<br />然后到现在不见几个新的，可见nesdev的中文专区是有多么冷清啊！

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>fogota</b> [ Fri Mar 10, 2017 9:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 用FC计算生肖(THE LUNAR YEAR MASCOTS OF CHINA)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Yave wrote:</div><div class="quotecontent">计算生肖喝了，uushare早挂了……<br /><br />这2009年的贴，真的好老！<br />然后到现在不见几个新的，可见nesdev的中文专区是有多么冷清啊！</div><br /><br />新的下载 <!-- m --><a class="postlink" href="http://fogota.ys168.com/">http://fogota.ys168.com/</a><!-- m -->

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
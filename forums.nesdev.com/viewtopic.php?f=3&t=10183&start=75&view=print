<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - A note to all NES-emulator authors: ROM header wishlist</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">A note to all NES-emulator authors: ROM header wishlist</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=10183">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=10183</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>6</strong> of <strong>8</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Thu Jun 27, 2013 1:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It'd look like a PKZIP file containing a PRG ROM file, a CHR ROM file, and XML metadata.</div><br /><br />Now we're getting somewhere :D

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>proxy</b> [ Thu Jun 27, 2013 1:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I actually like the concept of separate PRG and CHR files <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" />.<br /><br />I'm not sure I would go with XML as the meta-data format, but that's a minor detail. Though I'd probably go with a more trivial container format lie ar or something.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>etabeta</b> [ Thu Jun 27, 2013 11:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors..</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">if the NES ROM file format were being developed today, based on what we know now. What would it look like?</div><br />It'd look like a PKZIP file containing a PRG ROM file, a CHR ROM file, and XML metadata. At least that's what the designer of WSZ (Winamp skin package), SMZIP (StepMania package), ODT (OpenOffice Writer document), DOCX (Microsoft Office 2007 Word document), JAR (Java archive), or APK (Android installer package) would have come up with. I'm aware that a zipped format wouldn't be practical on the successor to the PowerPak.</div><br /><br />This is basically what I wanted to add to MESS in addition to the internal database, for homebrew<br />The problem would be to convince users to add such a xml to their zipfiles or rom sites / authors to spread these files instead of the old ones... As of late I got quite negative on the possibility to replace iNES1.0 by any means, so I basically lost most motivation to pursue this line of work <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>etabeta</b> [ Thu Jun 27, 2013 11:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">proxy wrote:</div><div class="quotecontent">I actually like the concept of separate PRG and CHR files <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" />.<br /><br />I'm not sure I would go with XML as the meta-data format, but that's a minor detail. Though I'd probably go with a more trivial container format lie ar or something.</div><br /><br />I'm pretty sure there are a few torrents with the NES set for MESS which give you a pretty complete set of split PRG/CHR to play with <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Thu Jun 27, 2013 11:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />And then, if you run linux, you can split the entire NES ROM set into separate files in probably a couple seconds with a 2 minute shell script write up and my NES ROM splitter. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />If it ain't broken...don't fix it....we already fixed it, guys...chill down, this will never happen. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Fri Jun 28, 2013 6:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />&gt; I'm not sure I would go with XML as the meta-data format, but that's a minor detail.<br /><br />Not really. It's not even just language (XML vs JSON vs YAML, someone even said INI here), there's also how you name every element inside of it. It's much more than a small detail. That has the potential to bikeshed for decades.<br /><br />It's unlikely enough that an author is going to make ONE board markup file, let alone one for each NES emulator. So the only workaround there will be some kind of user-contributed database where anyone can make the board markup and contribute it for homebrew games. Won't get 100% coverage, but any popular emulator + popular homebrew should eventually work. And again, this is only an issue for homebrew that won't work with iNES 1.0 headers.<br /><br />&gt; Though I'd probably go with a more trivial container format lie ar or something.<br /><br />I solved that one already, in a way that works for flash carts too.<br /><br />Compressed archives are for distribution, because there's no way to download a folder all at once with ordinary browsers. But that's all they are is folders. For nearly any other media type on the planet, people decompress archives they download first. PNGs, MP4s, source code, etc. People don't expect those programs to load ZIP files containing their media. Browsers like Safari go so far as to auto-decompress ZIP archives for you. So when you load the game, just uncompress it to an actual folder. And now you can <em>optionally</em> store mutable data (such as SRAM) inside the folder, if the user wants that. Or store it somewhere else if they want.<br /><br />If you're fundamentally opposed to a specific container format, then tell the user to uncompress the archive first. Or use a tool like the one I made (purify) to auto-extract game ZIP files to folders.<br /><br />If people are really concerned about the extra disk space used (after all, the entire NES library eats up a whopping 300MB of disk space ... whereas we are lucky if the user has 1000000MB of disk space these days), then use something like NTFS' native folder compression.<br /><br />You'll get a lot of resistance still because change == bad to most people, so it's up to you. Offer an option to not extract to disk if all you're concerned about is popularity. Use blargg's fex to support a half-dozen of the most popular compression formats and call it a day. What I like to do is abstract things. Write an API that takes either a folder or archive name, and then it gives you the same API to load files from it. So your emulator is written like it's working with a folder, even though it may actually be an archive.<br /><br />&gt; As of late I got quite negative on the possibility to replace iNES1.0 by any means<br /><br />Well, you'll never replace it for everyone.<br /><br />So again, what I've come up with is to allow iNES 1.0, but also offer your own method. For instance:<br /><br />&gt; I'm pretty sure there are a few torrents with the NES set for MESS which give you a pretty complete set of split PRG/CHR to play with<br /><br />FitzRoy put together a torrent for what my emulator uses. Complete library with split PRG+CHR+manifest.<br /><br />People who support the idea can have a whole library in said format. And people who don't can keep loading their zipped iNES files.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sik</b> [ Fri Jun 28, 2013 1:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">If people are really concerned about the extra disk space used (after all, the entire NES library eats up a whopping 300MB of disk space ... whereas we are lucky if the user has 1000000MB of disk space these days), then use something like NTFS' native folder compression.</div><br />Unless you are keeping the ROMs in a pendrive or a SD card, as those are generally some variant of FAT (completely forget about compression in this case, or any even remotely interesting features, for that matter).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Fri Jun 28, 2013 2:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, in that case you'll have to eat up an entire 1.8% of the available storage space. Twice as much as when zipped.<br /><br />It's definitely not a universal solution. Only the people who can afford to throw away an extra one-hundredth of their $10 pen drive space can afford this luxury.<br /><br />You'd definitely be making your emulator for the top 1% only at that point. So it would be great to offer fex+decompress to RAM only as an option for everyone else. I only mentioned the decompress to folder idea as an option to counter the argument over which container format to use (ZIP vs tar vs 7z vs custom.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Fri Jun 28, 2013 3:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't like separate PRG and CHR ROM files for games on cartridge, although for games on disk I would like each disk side to be a separate file (you could put them in a ZIP archive if you want to, I suppose, although I would also like to be able to work with them when not in a ZIP archive).<br /><br />I also don't like having to put all the information in one database in order for the emulator to load a file (this makes it very difficult to distribute patches and homebrews), although if an emulator requires that, there could be a way to convert a NES 2.0 header and .NES.INI into such a database format. Other formats can also be converted in case someone uses XML for metadata or whatever, you can convert this too.<br /><br />I don't like that MESS and MAME have these features (there are also other things I dislike about MAME, such as the license conditions).<br /><br />My own recommendation is to distribute a .NES file (or a .FDS, or a collection of .QDI), using either iNES 1.0 or iNES 2.0 headers (there are some things which old iNES headers aren't sufficient for, so NES 2.0 is used), and then optionally provide a separate .NES.INI to go with it (if you prefer other formats (such as XML), you could provide those as long as it is possible to convert between them). If any emulators need their own format, a converter program can be made which will convert the formats into whatever is needed by those specific emulators.<br /><br />Sure, you could use a ZIP archive containing the PRG ROM, CHR ROM, and XML metadata, if you prefer; it should be not too difficult to convert between that format and the format I prefer.<br /><br />But I really think we should make the emulator that fully supports NES 2.0 headers (including high mapper numbers and submapper numbers), and a C plugin API for implementing mappers (and possibly input devices too); as it turns out, I have defined such an API.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri Jun 28, 2013 6:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There's no reason to replace the iNES format we have now. Separating PRG and CHR into separate files is pointless. With very little effort you know exactly where the PRG and CHR data is in the iNES file. iNES 1.0 was limited but it's since been expanded and I really don't see any specific example why anyone is going to go along with a new format. One file per game is enough. We don't need to separate everything or add some new header/xml, or whatever else. <br /><br />UNIF never exactly caught on even though many said it was superior. Lets name the cases where iNES falls short typically.<br /><br />Startropics/MMC6. Was that addressed in iNES 2.0?<br />Non-stand MMC1 Boards SUROM/SXROM. iNES 2.0 addresses that with PRGRAM size.<br />What else?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Fri Jun 28, 2013 7:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">Startropics/MMC6. Was that addressed in iNES 2.0?<br />Non-stand MMC1 Boards SUROM/SXROM. iNES 2.0 addresses that with PRGRAM size.<br />What else?</div><br /><br />MMC3 revisions A and B. They have different working IRQs.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Fri Jun 28, 2013 8:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">iNES 1.0 was limited but it's since been expanded and I really don't see any specific example why anyone is going to go along with a new format. One file per game is enough. We don't need to separate everything or add some new header/xml, or whatever else. </div>Yes; this is good, to use NES 2.0 headers for these purposes please, since NES 2.0 implements all the stuff we need. (External metadata files might still be useful for optional features, which don't needed to emulate the game, though, such as: title, author, input devices, licenses, etc.; and an emulator need not read this file, although it might be useful to support it to automatically select input device or the switches for the Vs.System, but this isn't necessary.) Even though it is good to have one file per game if it is one cartridge, I think each cartridge, and each side of each disk, should be in separate files. (The current format puts all disk sides in one file too, and I think that is a bad idea and makes the system very limited. You could support both the combined and separated disk image formats in an emulator, for maximum compatibility and usefulness.)<br /><br /><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">MMC3 revisions A and B. They have different working IRQs.</div>These kind of things might use NES 2.0 submapper numbers; you should really implement NES 2.0 and a plugin interface.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Jun 28, 2013 8:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">zzo38 wrote:</div><div class="quotecontent"><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">MMC3 revisions A and B. They have different working IRQs.</div>These kind of things might use NES 2.0 submapper numbers; you should really implement NES 2.0 and a plugin interface.</div><br />MMC6-style PRG RAM enable and TEROM/TFROM fixed mirroring were already defined as submappers. I've defined another submapper to mean MMC3A behavior. I've numbered it 4, and MMC3A + fixed mirroring is 6. Any objections?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Fri Jun 28, 2013 9:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />&gt; What else?<br /><br />VRC board &quot;protection&quot; pinouts (Goemon, Contra, etc.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri Jun 28, 2013 10:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A note to all NES-emulator authors: ROM header wishlist</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><a href="http://wiki.nesdev.com/w/index.php/NES_2.0_submappers#VRC4" class="postlink">Done</a>

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>6</strong> of <strong>8</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Issue with Sprite Motion</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Newbie Help Center" href="http://forums.nesdev.com/feed.php?f=10" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Issue with Sprite Motion" href="http://forums.nesdev.com/feed.php?f=10&amp;t=16105" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:46 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=10&amp;t=16105">Issue with Sprite Motion</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=16105"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 6 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=10&amp;t=16105&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=10&amp;t=16105&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=10&amp;t=16105&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198370"></a>
				<b class="postauthor">Europa</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198370">Issue with Sprite Motion</a></div><div style="float: right;"><a href="./viewtopic.php?p=198370#p198370"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 17, 2017 1:57 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jun 17, 2017 1:24 am<br /><b>Posts:</b> 3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">hi guys,<br /><br />I'm new to nes programming and have been reading a lot and slowly learning.  I had a question regarding sprite motion.  I'm following the Nerdy Nights tutorials to familiarize myself with controlling a meta sprite.  I was finally able to develop a simple program to move my sprite up, down, left, right...and also perform some basic animation in movement.  <br /><br />However, I'm noticing some &quot;sputtering&quot; in the motion that occurs every now and then.  For example, if you constantly press &quot;up&quot; the character will move fluidly but occasionally it will sputter and move in a choppy manner.  I'm attaching my code below and also the rom file in case anyone wants to test it out.  <br /><br />Could anyone explain to me why this is happening and how to fix it?  Also, if anyone notices any major mistakes or suggestions for optimization, that would also be greatly appreciated. I'm trying to get the fundamentals right from the beginning and am eager to keep learning.<br /><br />thanks in advance for any help.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; .inesprg 1&nbsp; &nbsp;; 1x 16KB PRG code<br />&nbsp; .ineschr 1&nbsp; &nbsp;; 1x&nbsp; 8KB CHR data<br />&nbsp; .inesmap 0&nbsp; &nbsp;; mapper 0 = NROM, no bank swapping<br />&nbsp; .inesmir 1&nbsp; &nbsp;; background mirroring<br />&nbsp; <br /><br />;;;;;;;;;;;;;;;<br />&nbsp; &nbsp;.rsset $0000&nbsp; ;;start variables at ram location 0<br />x1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .rs 4<br />y1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .rs 1<br />y2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .rs 1<br />y3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .rs 1<br />y4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .rs 1<br />buttons1&nbsp; &nbsp; .rs 1&nbsp; ; player 1 gamepad buttons, one bit per button<br />CURRENT_DIRECTION&nbsp; &nbsp;&nbsp; &nbsp;.rs 1&nbsp; ;current sprite direction<br />FRAME_RIGHT&nbsp; &nbsp;.rs 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;start of current meta sprite<br />CURRENT_SPRITE&nbsp; &nbsp;.rs 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;end of current meta sprite<br />NEXT_FRAME&nbsp; &nbsp;.rs 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;number of frames for each animation<br /><br />FACING_LEFT = $00<br />FACING_RIGHT = $01<br />;;;;;;;;;;<br /><br />&nbsp; &nbsp; <br />&nbsp; .bank 0<br />&nbsp; .org $C000 <br />RESET:<br />&nbsp; SEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; disable IRQs<br />&nbsp; CLD&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; disable decimal mode<br />&nbsp; LDX #$40<br />&nbsp; STX $4017&nbsp; &nbsp; ; disable APU frame IRQ<br />&nbsp; LDX #$FF<br />&nbsp; TXS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Set up stack<br />&nbsp; INX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; now X = 0<br />&nbsp; STX $2000&nbsp; &nbsp; ; disable NMI<br />&nbsp; STX $2001&nbsp; &nbsp; ; disable rendering<br />&nbsp; STX $4010&nbsp; &nbsp; ; disable DMC IRQs<br /><br />vblankwait1:&nbsp; &nbsp; &nbsp; &nbsp;; First wait for vblank to make sure PPU is ready<br />&nbsp; BIT $2002<br />&nbsp; BPL vblankwait1<br /><br />clrmem:<br />&nbsp; LDA #$00<br />&nbsp; STA $0000, x<br />&nbsp; STA $0100, x<br />&nbsp; STA $0200, x<br />&nbsp; STA $0400, x<br />&nbsp; STA $0500, x<br />&nbsp; STA $0600, x<br />&nbsp; STA $0700, x<br />&nbsp; LDA #$FE<br />&nbsp; STA $0300, x<br />&nbsp; STA CURRENT_DIRECTION<br />&nbsp; &nbsp;STA FRAME_RIGHT<br />&nbsp; &nbsp;STA CURRENT_SPRITE<br />&nbsp; &nbsp;STA NEXT_FRAME<br />&nbsp; INX<br />&nbsp; BNE clrmem<br />&nbsp; &nbsp;<br />vblankwait2:&nbsp; &nbsp; &nbsp; ; Second wait for vblank, PPU is ready after this<br />&nbsp; BIT $2002<br />&nbsp; BPL vblankwait2<br /><br /><br />LoadPalettes:<br />&nbsp; LDA $2002&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; read PPU status to reset the high/low latch<br />&nbsp; LDA #$3F<br />&nbsp; STA $2006&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; write the high byte of $3F00 address<br />&nbsp; LDA #$00<br />&nbsp; STA $2006&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; write the low byte of $3F00 address<br />&nbsp; LDX #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; start out at 0<br />LoadPalettesLoop:<br />&nbsp; LDA palette, x&nbsp; &nbsp; &nbsp; &nbsp; ; load data from address (palette + the value in x)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; 1st time through loop it will load palette+0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; 2nd time through loop it will load palette+1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; 3rd time through loop it will load palette+2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; etc<br />&nbsp; STA $2007&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; write to PPU<br />&nbsp; INX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; X = X + 1<br />&nbsp; CPX #$20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Compare X to hex $20, decimal 32 - copying 32 bytes = 8 sprites<br />&nbsp; BNE LoadPalettesLoop&nbsp; ; Branch to LoadPalettesLoop if compare was Not Equal to zero<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; if compare was equal to 32, keep going down<br />LoadSprites:<br />&nbsp; <br />&nbsp; LDX #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; start at 0 <br />LoadSpritesLoop:<br />&nbsp; LDA sprites, x&nbsp; &nbsp; &nbsp; &nbsp; ; load data from address (sprites +&nbsp; x)<br />&nbsp; STA $0200, x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; store into RAM address ($0200 + x)<br />&nbsp; INX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; X = X + 1<br />&nbsp; CPX #$10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Compare X to hex $10, decimal 16<br />&nbsp; BNE LoadSpritesLoop&nbsp; &nbsp;; Branch to LoadSpritesLoop if compare was Not Equal to zero <br /><br />&nbsp; LDA #%10000000&nbsp; &nbsp;; enable NMI, sprites from Pattern Table 1<br />&nbsp; STA $2000<br /><br />&nbsp; LDA #%00010000&nbsp; &nbsp;; enable sprites<br />&nbsp; STA $2001<br /><br />Forever:<br />&nbsp; JMP Forever&nbsp; &nbsp; &nbsp;;jump back to Forever, infinite loop<br />&nbsp; <br />&nbsp;<br /><br />NMI:<br />&nbsp; LDA #$00<br />&nbsp; STA $2003&nbsp; &nbsp; &nbsp; &nbsp;; set the low byte (00) of the RAM address<br />&nbsp; LDA #$02<br />&nbsp; STA $4014&nbsp; &nbsp; &nbsp; &nbsp;; set the high byte (02) of the RAM address, start the transfer<br />&nbsp;<br />;buttons1 a b select start up down left right <br />&nbsp; JSR ReadController1 <br /><br /><br />Readup:<br />&nbsp; LDA buttons1<br />&nbsp; AND #%00001000&nbsp; ; only look at bit 4 for up button<br />&nbsp; BEQ Readupdone&nbsp; ; branch to Readupdone if button is NOT pressed (0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; LDX #$00<br />allup:<br />&nbsp; LDA $0200, x&nbsp; &nbsp; &nbsp; &nbsp;; load sprite X position<br />&nbsp; SEC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; make sure the carry flag is clear<br />&nbsp; SBC #$01&nbsp; &nbsp; &nbsp; &nbsp; ; A = A + 1<br />&nbsp; STA $0200, x&nbsp; &nbsp; &nbsp; &nbsp;; save sprite X position<br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; INX&nbsp; <br />&nbsp; CPX #$10<br />&nbsp; BNE allup<br />Readupdone:<br /><br />Readdown:<br />&nbsp; LDA buttons1<br />&nbsp; AND #%00000100&nbsp; ; only look at bit 3<br />&nbsp; BEQ Readdowndone&nbsp; &nbsp;; branch to ReadADone if button is NOT pressed (0)<br /><br />&nbsp; LDX #$00<br />alldown:&nbsp; <br />&nbsp; LDA $0200, x&nbsp; &nbsp; &nbsp; &nbsp;; load sprite X position<br />&nbsp; CLC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; make sure the carry flag is clear<br />&nbsp; ADC #$01&nbsp; &nbsp; &nbsp; &nbsp; ; A = A + 1<br />&nbsp; STA $0200, x&nbsp; &nbsp; &nbsp; &nbsp;; save sprite X position<br />&nbsp; INX<br />&nbsp; INX <br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; CPX #$10<br />&nbsp; BNE alldown<br />Readdowndone:&nbsp; &nbsp; &nbsp; &nbsp; ; handling this button is done<br /><br />Readleft: <br />&nbsp; LDA buttons1&nbsp; &nbsp; &nbsp; &nbsp;; player 1 - left<br />&nbsp; AND #%00000010&nbsp; ; only look at bit 0<br />&nbsp; BEQ ReadleftDone&nbsp; &nbsp;; branch to ReadBDone if button is NOT pressed (0)<br /><br />&nbsp; LDX #$00<br />FlipSprite:<br />&nbsp; LDA CURRENT_DIRECTION&nbsp; ;if already facing left, no need to flip<br />&nbsp; CMP #FACING_LEFT<br />&nbsp; BEQ endFlip<br /><br />&nbsp; LDA $0203&nbsp; &nbsp;&nbsp; &nbsp;;To mirror the sprite to the left, must add 16 or $10 to the left half sprites, tiles 32 &amp; 34<br />&nbsp; CLC<br />&nbsp; ADC #$10<br />&nbsp; STA $0203<br />&nbsp; LDA $020B<br />&nbsp; CLC<br />&nbsp; ADC #$10<br />&nbsp; STA $020B<br />endFlip:<br />allleft:<br />&nbsp; LDA $0203, x&nbsp; &nbsp; &nbsp; &nbsp;; load sprite X position<br />&nbsp; SEC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; make sure carry flag is set<br />&nbsp; SBC #$01&nbsp; &nbsp; &nbsp; &nbsp; ; A = A - 1<br />&nbsp; STA $0203, x&nbsp; &nbsp; &nbsp; &nbsp;; save sprite X position<br />&nbsp; LDA $0202, x&nbsp; &nbsp; &nbsp; &nbsp;;flip the sprite horizontally<br />&nbsp; ORA #$40&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;flip the sprite horizontally<br />&nbsp; STA $0202, x&nbsp; &nbsp; &nbsp; &nbsp; ;flip the sprite horizontally<br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; CPX #$10<br />&nbsp; BNE allleft<br /><br />&nbsp; LDA #FACING_LEFT&nbsp; &nbsp;; make sure the saved direction is facing left<br />&nbsp; STA CURRENT_DIRECTION<br />&nbsp; &nbsp;LDA #$00<br />&nbsp; &nbsp;STA FRAME_RIGHT<br />&nbsp; &nbsp;STA NEXT_FRAME<br />&nbsp; &nbsp;LDA #$10<br />&nbsp; &nbsp;STA CURRENT_SPRITE<br />&nbsp; <br />ReadleftDone:&nbsp; &nbsp; &nbsp; &nbsp; ; handling this button is done<br /><br />Readright:<br />&nbsp;LDA buttons1 ; player 1 -right<br />&nbsp;AND #%00000001&nbsp; ; only look at bit 0<br />&nbsp; BNE FlipSpriteRight<br />&nbsp; jmp ReadrightDone&nbsp; &nbsp;; branch to ReadADone if button is NOT pressed (0)<br /><br />FlipSpriteRight:<br />&nbsp; LDA CURRENT_DIRECTION&nbsp; ;if already facing right, no need to flip<br />&nbsp; CMP #FACING_RIGHT<br />&nbsp; BEQ endFlipRight<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Otherwise we need to flip the sprites and adjust the position after flipping<br />&nbsp; LDA $0203&nbsp; &nbsp;&nbsp; &nbsp;;To mirror the sprite to the left, must add 16 or $10 to the left half sprites, tiles 32 &amp; 34<br />&nbsp; SEC<br />&nbsp; SBC #$10<br />&nbsp; STA $0203<br />&nbsp; LDA $020B<br />&nbsp; SEC<br />&nbsp; SBC #$10<br />&nbsp; STA $020B<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;LDX #$00<br />AddRightMotion:&nbsp; ; when you switch facing direction, make him move slightly right so it looks like he turned around<br />&nbsp; &nbsp;LDA $0203, x<br />&nbsp; &nbsp;CLC<br />&nbsp; &nbsp;ADC #$08<br />&nbsp; &nbsp;STA $0203, x<br />&nbsp; &nbsp;INX<br />&nbsp; &nbsp;INX<br />&nbsp; &nbsp;INX<br />&nbsp; &nbsp;INX<br />&nbsp; &nbsp;CPX #$10<br />&nbsp; &nbsp;BNE AddRightMotion <br />endFlipRight:<br />&nbsp; <br />&nbsp; jsr SaveXPosition<br />&nbsp; jsr SaveYPosition<br />&nbsp; &nbsp;<br />LoadSprites2:<br />&nbsp; <br />&nbsp; LDX FRAME_RIGHT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; start animation frame <br />&nbsp; LDY #$00<br />&nbsp; &nbsp;<br />LoadSpritesLoop2:<br />&nbsp; LDA sprites, x&nbsp; &nbsp; &nbsp; &nbsp; ; load data from address (sprites +&nbsp; x)<br />&nbsp; STA $0200, y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; store into RAM address ($0200 + x)<br />&nbsp; INX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; X = X + 1 <br />&nbsp; INY <br />&nbsp; CPX CURRENT_SPRITE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Compare X to end of current meta sprite<br />&nbsp; BNE LoadSpritesLoop2&nbsp; &nbsp;; Branch to LoadSpritesLoop if compare was Not Equal to zero<br /><br />;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;<br />&nbsp; jsr RestoreXPosition<br />&nbsp; jsr RestoreYPosition<br />&nbsp; LDX #$00<br />allright:<br />&nbsp; LDA $0203, x&nbsp; &nbsp; &nbsp; &nbsp;; load sprite X position<br />&nbsp; CLC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; make sure the carry flag is clear<br />&nbsp; ADC #$02&nbsp; &nbsp; &nbsp; &nbsp; ; A = A + 1<br />&nbsp; STA $0203, x&nbsp; &nbsp; &nbsp; &nbsp;; save sprite X position<br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; INX<br />&nbsp; CPX #$10<br />&nbsp; BNE allright<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;LDA NEXT_FRAME&nbsp; ;animate the character<br />&nbsp; &nbsp;;EOR #$FF<br />&nbsp; &nbsp;;STA NEXT_FRAME<br />&nbsp; &nbsp;;CMP #$00<br />&nbsp; &nbsp;;BEQ continue<br />&nbsp; &nbsp;CLC<br />&nbsp; &nbsp;ADC #$01<br />&nbsp; &nbsp;STA NEXT_FRAME<br />&nbsp; &nbsp;CMP #$03&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;BMI keep_frame<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;LDA FRAME_RIGHT&nbsp; &nbsp;&nbsp; &nbsp;;Move on to the next meta sprite<br />&nbsp; &nbsp;CLC<br />&nbsp; &nbsp;ADC #$10<br />&nbsp; &nbsp;STA FRAME_RIGHT<br />&nbsp; &nbsp;CLC<br />&nbsp; &nbsp;ADC #$10<br />&nbsp; &nbsp;STA CURRENT_SPRITE&nbsp; ;Also move the comparison so we only load 1 meta sprite<br />&nbsp; &nbsp;LDA FRAME_RIGHT<br />&nbsp; &nbsp;CMP #$30<br />&nbsp; &nbsp;BNE next_frame<br />&nbsp; &nbsp;<br />reset_frame:<br />&nbsp; LDA #$00&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;the initial meta sprite<br />&nbsp; &nbsp;STA FRAME_RIGHT<br />&nbsp; &nbsp;LDA #$10<br />&nbsp; &nbsp;STA CURRENT_SPRITE&nbsp; ;the end of the initial meta sprite<br />&nbsp; <br />next_frame:<br />&nbsp; &nbsp;LDY #$00<br />&nbsp; &nbsp;STY NEXT_FRAME<br />keep_frame:<br />&nbsp; LDA #FACING_RIGHT&nbsp; &nbsp;<br />&nbsp; STA CURRENT_DIRECTION<br />ReadrightDone:&nbsp; &nbsp; &nbsp; &nbsp; ; handling this button is done<br />&nbsp; <br /><br />NoButton:&nbsp; <br />&nbsp; LDA buttons1<br />&nbsp; AND #%11111111&nbsp; &nbsp;&nbsp; &nbsp;; no buttons were pressed so A = 00000000<br />&nbsp; BNE NoButtonDone<br />&nbsp; <br />&nbsp; LDA CURRENT_DIRECTION&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;if facing left, then leave facing left<br />&nbsp; CMP #FACING_LEFT<br />&nbsp; BEQ NoButtonDone <br />&nbsp; <br />&nbsp; LDY #FACING_RIGHT&nbsp; &nbsp; ;save the current facing direction<br />&nbsp; STY CURRENT_DIRECTION<br />&nbsp; <br />&nbsp; ;store again the x &amp; y coordinates of all sprites<br />&nbsp; jsr SaveXPosition<br />&nbsp; jsr SaveYPosition<br />&nbsp; &nbsp;<br />StandStill:<br />&nbsp; LDX #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; start at 0 <br />StandSprites:<br />&nbsp; LDA sprites, x&nbsp; &nbsp; &nbsp; &nbsp; ; load data from address (sprites +&nbsp; x)<br />&nbsp; STA $0200, x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; store into RAM address ($0200 + x)<br />&nbsp; INX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; X = X + 1<br />&nbsp; CPX #$10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Compare X to hex $10, decimal 16<br />&nbsp; BNE StandSprites&nbsp; &nbsp;; Branch to LoadSpritesLoop if compare was Not Equal to zero<br /><br />&nbsp; jsr RestoreXPosition<br />&nbsp; jsr RestoreYPosition<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;LDA #$00<br />&nbsp; &nbsp;STA FRAME_RIGHT<br />&nbsp; &nbsp;STA NEXT_FRAME<br />&nbsp; &nbsp;LDA #$10<br />&nbsp; &nbsp;STA CURRENT_SPRITE<br />&nbsp;<br />NoButtonDone:<br />&nbsp; <br />&nbsp; RTI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; return from interrupt<br />&nbsp;<br />&nbsp;<br />ReadController1:<br />&nbsp; LDA #$01&nbsp; &nbsp;; latch controller<br />&nbsp; STA $4016<br />&nbsp; LDA #$00<br />&nbsp; STA $4016<br />&nbsp; LDX #$08<br />ReadController1Loop:<br />&nbsp; LDA $4016<br />&nbsp; LSR A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; bit0 -&gt; Carry<br />&nbsp; ROL buttons1&nbsp; &nbsp; &nbsp;; bit0 &lt;- Carry<br />&nbsp; DEX<br />&nbsp; BNE ReadController1Loop<br />&nbsp; RTS<br />&nbsp; <br />SaveXPosition:<br />&nbsp; LDA $0203<br />&nbsp; STA x1<br />&nbsp; LDA $0207<br />&nbsp; STA x1+1<br />&nbsp; LDA $020B<br />&nbsp; STA x1+2<br />&nbsp; LDA $020F<br />&nbsp; STA x1+3<br />&nbsp; rts<br />&nbsp; <br />SaveYPosition:<br />&nbsp; LDA $0200<br />&nbsp; STA y1<br />&nbsp; LDA $0204<br />&nbsp; STA y2<br />&nbsp; LDA $0208<br />&nbsp; STA y3<br />&nbsp; LDA $020C<br />&nbsp; STA y4<br />&nbsp; rts<br />&nbsp; <br />RestoreXPosition:<br />&nbsp; LDA x1<br />&nbsp; STA $0203<br />&nbsp; LDA x1+1<br />&nbsp; STA $0207<br />&nbsp; LDA x1+2<br />&nbsp; STA $020B<br />&nbsp; LDA x1+3<br />&nbsp; STA $020F<br />&nbsp; rts<br />&nbsp; <br />RestoreYPosition:<br />&nbsp; LDA y1<br />&nbsp; STA $0200<br />&nbsp; LDA y2<br />&nbsp; STA $0204<br />&nbsp; LDA y3<br />&nbsp; STA $0208<br />&nbsp; LDA y4<br />&nbsp; STA $020C<br />&nbsp; rts<br />&nbsp; <br />&nbsp; <br />&nbsp; .bank 1<br />&nbsp; .org $E000<br />palette:<br />&nbsp; .db $0F,$17,$28,$39,$34,$35,$36,$37,$38,$39,$3A,$3B,$3C,$3D,$3E,$0F<br />&nbsp; .db $0F,$17,$28,$39,$31,$02,$38,$3C,$0F,$1C,$15,$14,$31,$02,$38,$3C<br /><br />sprites:<br />&nbsp; &nbsp; &nbsp;;vert tile attr horiz<br />&nbsp; .db $80, $32, $00, $80&nbsp; &nbsp;;sprite 0<br />&nbsp; .db $80, $33, $00, $88&nbsp; &nbsp;;sprite 1<br />&nbsp; .db $88, $34, $00, $80&nbsp; &nbsp;;sprite 2<br />&nbsp; .db $88, $35, $00, $88&nbsp; &nbsp;;sprite 3<br />&nbsp; .db $80, $36, $00, $90&nbsp; &nbsp;;sprite 4<br />&nbsp; .db $80, $37, $00, $98&nbsp; &nbsp;;sprite 5<br />&nbsp; .db $88, $38, $00, $90&nbsp; &nbsp;;sprite 6<br />&nbsp; .db $88, $39, $00, $98&nbsp; &nbsp;;sprite 7<br />&nbsp; .db $80, $3A, $00, $90&nbsp; &nbsp;;sprite 8<br />&nbsp; .db $80, $3B, $00, $98&nbsp; &nbsp;;sprite 9<br />&nbsp; .db $88, $3C, $00, $90&nbsp; &nbsp;;sprite 10<br />&nbsp; .db $88, $3D, $00, $98&nbsp; &nbsp;;sprite 11<br /><br />&nbsp; .org $FFFA&nbsp; &nbsp; &nbsp;;first of the three vectors starts here<br />&nbsp; .dw NMI&nbsp; &nbsp; &nbsp; &nbsp; ;when an NMI happens (once per frame if enabled) the <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;processor will jump to the label NMI:<br />&nbsp; .dw RESET&nbsp; &nbsp; &nbsp; ;when the processor first turns on or is reset, it will jump<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;to the label RESET:<br />&nbsp; .dw 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;external interrupt IRQ is not used in this tutorial<br />&nbsp; <br />&nbsp; <br />;;;;;;;;;;;;;;&nbsp; <br />&nbsp; <br />&nbsp; <br />&nbsp; .bank 2<br />&nbsp; .org $0000<br />&nbsp; .incbin &quot;mario.chr&quot;&nbsp; &nbsp;;includes 8KB graphics file from SMB1<br /></div></div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=9270">test2.nes</a> [24.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 44 times</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8543"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p198371"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198371">Re: Issue with Sprite Motion</a></div><div style="float: right;"><a href="./viewtopic.php?p=198371#p198371"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 17, 2017 2:01 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 3110<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Likely the emulator you're using is skipping a frame every now and then.<br /><br />You can easily verify whether this is the case by going into frame stepping mode, e.g., press Pause, then Enter to step in FCEUX.</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">fauxgame.com</a>! — Some other stuff I've done: <a href="https://fo.aspekt.fi/" class="postlink">fo.aspekt.fi</a></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198372"></a>
				<b class="postauthor">Europa</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198372">Re: Issue with Sprite Motion</a></div><div style="float: right;"><a href="./viewtopic.php?p=198372#p198372"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 17, 2017 2:34 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jun 17, 2017 1:24 am<br /><b>Posts:</b> 3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">Likely the emulator you're using is skipping a frame every now and then.<br /><br />You can easily verify whether this is the case by going into frame stepping mode, e.g., press Pause, then Enter to step in FCEUX.</div><br /><br />Excuse my ignorance, but I'm not sure I understand.  I used FCEUX and displayed the frame #s on the lower left.  I also used the backslash key to emulate 1 frame, and then pressed up on the keyboard to move my sprite.  But the frames are increasing so fast I can't follow.  The choppiness occurs regularly and I didn't know FCEUX skipped frames.   But I'm not sure if that's what you suggested.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8543"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p198373"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198373">Re: Issue with Sprite Motion</a></div><div style="float: right;"><a href="./viewtopic.php?p=198373#p198373"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 17, 2017 2:43 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 3110<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hold down Up in the controller, and at the same time press the frame step key multiple times (don't hold it down) to see if the sprite moves 1 pixel at a time as it's supposed to. If you can't see the jitter when you frame step like this, the issue is in the emulator.<br /><br />It's a fairly common issue in emulators, and not easy to solve. Here's one past thread about the same topic: <!-- l --><a class="postlink-local" href="http://forums.nesdev.com/viewtopic.php?f=5&amp;t=15337">viewtopic.php?f=5&amp;t=15337</a><!-- l --></div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">fauxgame.com</a>! — Some other stuff I've done: <a href="https://fo.aspekt.fi/" class="postlink">fo.aspekt.fi</a></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198375"></a>
				<b class="postauthor">Europa</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198375">Re: Issue with Sprite Motion</a></div><div style="float: right;"><a href="./viewtopic.php?p=198375#p198375"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 17, 2017 3:04 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jun 17, 2017 1:24 am<br /><b>Posts:</b> 3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">Hold down Up in the controller, and at the same time press the frame step key multiple times (don't hold it down) to see if the sprite moves 1 pixel at a time as it's supposed to. If you can't see the jitter when you frame step like this, the issue is in the emulator.<br /><br />It's a fairly common issue in emulators, and not easy to solve. Here's one past thread about the same topic: <!-- m --><a class="postlink" href="http://forums.nesdev.com/viewtopic.php?f=5&amp;t=15337">http://forums.nesdev.com/viewtopic.php?f=5&amp;t=15337</a><!-- m --></div><br /><br />thanks for the speedy response and the helpful link!  I followed your suggestion and one provided in the link and recorded a movie of the motion.  Then I went ahead and re-played it several times.  Sometimes the jitter occurs and sometimes it does not.  Even in cases where it does occur, it doesn't happen in the same spot.  It seems random.  Several users mentioned it possibly being related to vsync, but if it is a known issue with emulators, then I'm happy to know my code wasn't the culprit.<br /><br />Thanks again for clarifying the issue.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8543"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p198402"></a>
				<b class="postauthor">Oziphantom</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198402">Re: Issue with Sprite Motion</a></div><div style="float: right;"><a href="./viewtopic.php?p=198402#p198402"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 18, 2017 4:26 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Feb 07, 2017 2:03 am<br /><b>Posts:</b> 511
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">If you are in a PAL territory as your name suggests, then the issue is your PC monitor will only do 60Hz updates, but a PAL machines need 50hz updates, and when you display 50 on 60 it has to double a frame every now and then. Until we get emulators Free Sync/Gsync enhanced we have to suffer the stutter.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8250"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=10&amp;t=16105"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=16105"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 6 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 8 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="16105" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10" selected="selected">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
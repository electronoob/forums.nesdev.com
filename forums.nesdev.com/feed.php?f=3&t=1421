<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=1421" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2006-04-24T22:32:00-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=1421</id>
<entry>
<author><name><![CDATA[mattmatteh]]></name></author>
<updated>2006-04-24T22:32:00-07:00</updated>
<published>2006-04-24T22:32:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12216#p12216</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12216#p12216"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12216#p12216"><![CDATA[
ok, got it.  thanks<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=170">mattmatteh</a> — Mon Apr 24, 2006 10:32 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2006-04-24T21:21:43-07:00</updated>
<published>2006-04-24T21:21:43-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12214#p12214</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12214#p12214"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12214#p12214"><![CDATA[
no... <br /><br />the last cycle is the opcode fetch for the NEXT instruction (it's just showed there to show where the CPU is reading its dummy reads from).  Like it says in the doc (and in my previous post)... branches are actually 1 cycle shorter than that doc says, because the last cycle isn't really part of the branch.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Mon Apr 24, 2006 9:21 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mattmatteh]]></name></author>
<updated>2006-04-24T19:36:14-07:00</updated>
<published>2006-04-24T19:36:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12211#p12211</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12211#p12211"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12211#p12211"><![CDATA[
disch, <br /><br />thats what i read that showed 5 intructions.  seems that is wrong ?<br /><br />matt<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=170">mattmatteh</a> — Mon Apr 24, 2006 7:36 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mattmatteh]]></name></author>
<updated>2006-04-24T10:45:02-07:00</updated>
<published>2006-04-24T10:45:02-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12185#p12185</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12185#p12185"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12185#p12185"><![CDATA[
hmmm, need a test rom for that.  not sure if i could write one.  ill try, but not sure when ill get that done.  still working on my nes.<br /><br />matt<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=170">mattmatteh</a> — Mon Apr 24, 2006 10:45 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[baisoku]]></name></author>
<updated>2006-04-24T10:26:01-07:00</updated>
<published>2006-04-24T10:26:01-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12183#p12183</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12183#p12183"/>
<title type="html"><![CDATA[Re: cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12183#p12183"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br />I wish I knew a way for a test ROM to check cycle timing.... but how could you test something like that?<br /></div><br />Disable IRQ, enable NMI, wait for event of known time (e.g. NMI), execute operation many times, wait for event of known time, calculate time elapsed.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=35">baisoku</a> — Mon Apr 24, 2006 10:26 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mattmatteh]]></name></author>
<updated>2006-04-24T10:12:44-07:00</updated>
<published>2006-04-24T10:12:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12182#p12182</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12182#p12182"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12182#p12182"><![CDATA[
thanks for the replies.<br /><br />disch, when i was reading that i was kinda thinking that might be the case.  seems confusing like that.<br /><br />matt<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=170">mattmatteh</a> — Mon Apr 24, 2006 10:12 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2006-04-24T10:01:50-07:00</updated>
<published>2006-04-24T10:01:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12181#p12181</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12181#p12181"/>
<title type="html"><![CDATA[Re: cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12181#p12181"><![CDATA[
<div class="quotetitle">mattmatteh wrote:</div><div class="quotecontent"><br />i read several different manuals that the branch instruction can be 2, 3, 4, or 5 cycles long depending if it branches and if there are 1 or more page crosses.  does anyone have any info that would explain this more?<br /></div><br /><br /><a href="http://nesdev.com/6502_cpu.txt" class="postlink">6502_cpu.txt</a> explains it very well.  But note its line about the last cycle not counting as part of the instruction (therefore while it shows a 5th cycle, the most there ever are in a branch is 4).  In its example... the last byte fetched is used as the opcode for the next instruction to be exeucted (so that cycle actually counts as the first in the next instruction -- not as part of the branch).<br /><br /><br /><br />I wish I knew a way for a test ROM to check cycle timing.... but how could you test something like that?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Mon Apr 24, 2006 10:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2006-04-24T09:34:24-07:00</updated>
<published>2006-04-24T09:34:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12178#p12178</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12178#p12178"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12178#p12178"><![CDATA[
For my best, this is the correct drill...<br /><br />1 cycle to fetch the instruction byte<br />1 cycle to fetch the argument byte (signed char)<br />if true:<br />+ 1 cycle to fetch the next instruction byte (and throw it away)<br />+ 1 extra cycle if page is crossed<br /><br />No clue about a 5th or even a 6th cycle being executed though.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Mon Apr 24, 2006 9:34 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2006-04-24T06:47:17-07:00</updated>
<published>2006-04-24T06:47:17-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12171#p12171</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12171#p12171"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12171#p12171"><![CDATA[
<a href="http://www.tripoint.org/kevtris/mappers/incoming/" class="postlink">http://www.tripoint.org/kevtris/mappers/incoming/</a><br /><br />Both ROM and txt.<br /><br />Here is the lowdown on branching;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">inline void OperationCode?0&#40;&#41;<br />&#123;<br />   if&#40; ... &#41;<br />   &#123;<br />      if&#40; &#40;unsigned char&#41;CPU.PC + Relative &gt; 0xFF || &#40;unsigned char&#41;CPU.PC + Relative &lt; 0 &#41;<br />         CPU.CC++;<br />      CPU.PC += Relative;<br />      CPU.CC += 3;<br />   &#125;<br />      else<br />   &#123;<br />      CPU.PC += 2;<br />      CPU.CC += 2;<br />   &#125;<br />&#125;</div><br /><br />So if there is no branch then add 2 CC's. If there is a branch then add 3 CC's. If the branch is to another page then add 1 CC.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Mon Apr 24, 2006 6:47 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mattmatteh]]></name></author>
<updated>2006-04-23T23:57:48-07:00</updated>
<published>2006-04-23T23:57:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12167#p12167</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12167#p12167"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12167#p12167"><![CDATA[
maybe another test for cycles and page crossing, the invalid reads before a re-read<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=170">mattmatteh</a> — Sun Apr 23, 2006 11:57 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mattmatteh]]></name></author>
<updated>2006-04-23T23:44:45-07:00</updated>
<published>2006-04-23T23:44:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12166#p12166</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12166#p12166"/>
<title type="html"><![CDATA[cpu cycle timing with nestest.nes, branch instructions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1421&amp;p=12166#p12166"><![CDATA[
i noticed that a few links to nestest.nes and nestest.txt are not working; the wiki for example.  i have a copy and dont need it, but someone else i was chatting with did need it.<br /><br />i read several different manuals that the branch instruction can be 2, 3, 4, or 5 cycles long depending if it branches and if there are 1 or more page crosses.  does anyone have any info that would explain this more?<br /><br />awhile back quietust and blargg posted a dump of nestest.nes and i think quietusts' had the cycle timing on his.  that link is missing.  i requested before and will again, i think the nestest.log should be added to the wiki.   i think the log should contain the cpu information, memory reads/writes and cycle timing.  is there anyway of writing a test for the nes or logging it from a original nes? <br /><br />i would test and post this info myself if i knew i was 100% accurate and had the hardware to do so. <br /><br />thanks to all that have made these test roms  !!<br /><br />matt<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=170">mattmatteh</a> — Sun Apr 23, 2006 11:44 pm</p><hr />
]]></content>
</entry>
</feed>
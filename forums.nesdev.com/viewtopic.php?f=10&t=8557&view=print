<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - First time Homebrewer</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">First time Homebrewer</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=8557">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=8557</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Camronas</b> [ Tue Jan 24, 2012 3:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>First time Homebrewer</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello everyone, I am very interested in making homebrew nes games and can't wait to get started. I am studying game design at my uni and want to test my metal as a designer with older styles of games "that is what I like more".
<br />
<br />I have read many tutorials explaining how assembly works and I "think" I have a clear enough understanding to start. I would like to know though are there any practical nes assembly tutorials out there? By that I mean any that show you start to finish how to program a game for the nes?
<br />
<br />If not I would like to just ask question as I need them until I become more competent with my assembly programming. For the record I have learned several language before but none this low level.
<br />
<br />Cheers for your time <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Tue Jan 24, 2012 4:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'd start reading the nerdy nights to get the ideas behind 6502, some basic functions, and reference the wiki for registers and start reading up on everything. Ask here for any problems, but if you search before odds are somebody has probably had the same question and it's already answered. You can PM me too for help, but you better have a good grasp as I try to teach the right way off the bat first time. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Camronas</b> [ Tue Jan 24, 2012 4:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks ill do that <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />I started reading Nerdy Nights and its been very interesting so far, but then I came across this in the comments:
<br />
<br /><!-- m --><a class="postlink" href="http://www.nintendoage.com/forum/messageview.cfm?catid=22&amp;threadid=33287">http://www.nintendoage.com/forum/messag ... adid=33287</a><!-- m -->
<br />
<br />It has been easier for me to understand so far, and might encourage others to read it to if their starting out like I am. But I haven't read it all so I'm not 100% sure how good it really is.
<br />
<br />Has anyone else read this before? If so can you tell me if its good before I invest more time into it?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Tue Jan 24, 2012 4:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, it's good to teach you some basics. Any registers on there though that it doesn't explain in detail you should read up on on the wiki, the wiki has everything you'll need once you learn 6502 though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Tue Jan 24, 2012 5:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I have always been a fan of this guide: <!-- m --><a class="postlink" href="http://nesdev.com/6502guid.txt">http://nesdev.com/6502guid.txt</a><!-- m -->
<br />
<br />for straight 6502. That's what made it "click" for me. It may not be the same for you, though. One thing is doesn't quite explain is the addressing modes, but I bet you'll pick up what you need to know about that (sans the name) from Nerdy Nights. If not, ask away.
<br />
<br />I spend a lot of my time writings books-of-posts, so if you're into lots of reading  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />... I'm available for help as well!
<br />
<br />Edit: [url=http://nesdev.com/bbs/viewtopic.php?t=7451&amp;postdays=0&amp;postorder=asc&amp;start=15[/url]Here's a topic[/url] of someone else who started from absolute zero and made progress. It's a long thread, but there's a lot a of really useful posts and explanations in there.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Camronas</b> [ Tue Jan 24, 2012 6:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks Ill keep that in mind, at the moment I'm just downloading files other people have done and am trying to revers engineer it to see if I really understand whats going on. So far little success <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /> But Error is a part of learning.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Camronas</b> [ Tue Jan 24, 2012 6:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Quick question, and most likely a stupid one. Is their a staple of MUST have codes in assembly "nes in particular" becasue in c++ you need to include all of your other files and stuff. So do you need to declare anything? Other then sprites, pallets, and variables of course.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Tue Jan 24, 2012 6:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm not sure I understood the question, but here's some information based on what I think you mean.
<br />
<br />If you mean is there required code like
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">#include &lt;stdio.h&gt;<br /><br />void main&#40;&#41;&#123;<br /><br />&#125;<br /></div>
<br />to do basic things for NES, sort of.
<br />
<br />In C, the program starts at main(), for NES you put the starting address at $FFFC in the rom. There's also some some startup code (technically optional) and setting the parameters for the rom's header (if you want to run the game in an emulator or powerpak), which Nerdy Nights will explain better than I could.
<br />
<br />There's actually very little else that's needed. You don't <em>need</em> to declare anything or even name any variables in 6502 (lda $00 is just as valid as lda variable), and there are no libraries you need to worry about. Everything that can be done on the NES is done with the 56 different 6502 instructions. Interfacing with the actual NES hardware is done by storing numbers in specific locations, there aren't standard functions for doing so.
<br />
<br />Edit: About including, there's not a special format.
<br />
<br />.db $00 inserts the byte $00.
<br />
<br />Let's say you have a file that is exactly 1 byte, and that byte is $00.
<br />
<br />.incbin "file.bin" 
<br />
<br />would behave identically to the above. There's no extern or anything like that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Camronas</b> [ Tue Jan 24, 2012 7:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />My god this is confusing lol as I'm sure it was for everyone else when they started <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />
<br />One part in the tutorial that is confusing me the most is how to load in and draw a picture. I have a file with the Mario sprites to make it easier, I am trying to figure out how to load Mario as an entity and then later be able to move him around.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Tue Jan 24, 2012 8:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I am assuming you are familiar with hex and binary.
<br />
<br />A page of RAM is 256 bytes. $XX00-$XXFF.
<br />
<br />On the NES, XX can be 00-07.
<br />
<br />There is no need to load a picture. (at least not with the basic setup you will start with.) All the graphics you will use are just always there if you incbin'd the file as described in the tutorial.
<br />
<br />Storing a number to location $4014 causes the PPU to copy a page of RAM to the PPU which will then display sprites using that information without any more of your input. The page of RAM that is copied is determined by the number written to $4014. You also must set the low byte where the transfer starts with $2003. This is usually #$00. 
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #$00<br />sta $2003&nbsp; ; set the low byte &#40;00&#41; of the RAM address<br /><br />lda #$02;<br />sta $4014;$0200-$02FF is copied.<br /><br />lda #$07<br />sta $4014;$0700-$07FF is copied.<br /><br />The page of RAM you want to use for sprites is up to you. &#40;It's not wise to use $00 or $01, though.&#41;<br /></div><br /><br />Note that the write to $4014 should happen in your NMI interrupt code. (If you don't know what this is, ask and I'll explain that)<br /><br />You will also want to enable rendering by writing the values you want to $2000 and $2001. <a href="http://wiki.nesdev.com/w/index.php/PPU_registers#Controller_.28.242000.29_.3E_write" class="postlink">See here for what the bits of each register do.</a><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #%10010000<br />sta $2000<br /></div><br />Would start NMIs (you generally want them enabled if you want graphics), and set the tiles used for the background to the second half of your CHR-ROM. You can see how by looking at how the set bits correspond to the information in the wiki.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #%00011110<br />sta $2001<br /></div><br />Will start displaying sprites and the background.<br /><br />There are 64 sprites. So each sprite uses 4 bytes.<br /><br />Let's say you're using page 2.<br /><br />Byte 0 is the sprite's y position. So writing #$10 to $0200 would set one of the 64 sprite's y position to #$10. Writing #$20 to $0204 would set the next sprite's y position to #$20. Etc.<br /><br />Byte 1 is the sprite's tile. Whatever byte you write here is the tile graphic the sprite will use. $0201 refers to one sprite. $0205 refers to the next. etc. To know which tile to write, load your rom in FCEUX and go to debug, PPU Viewer. Mouse over the graphic you want, and it will give you its tile number.  <br /><br />Byte 2 ($0202, $0206 etc) is broken down like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">76543210<br />||||||||<br />||||||++- Palette &#40;4 to 7&#41; of sprite<br />|||+++--- Unimplemented<br />||+------ Priority &#40;0: in front of background; 1: behind background&#41;<br />|+------- Flip sprite horizontally<br />+-------- Flip sprite vertically<br /></div><br /><br />But you can just write #$00 there for now.<br /><br />Byte 3 ($0203, $0207) is the sprite's X position. <br /><br />So to make a sprite appear, write its X and Y positions to the RAM in the page you have chosen for sprites. Then write its tile number. <br /><br />The sprite will be drawn automatically next time the NMI interrupt happens. To move it, load its location, adc (or subtract) the number of pixels you want it to move by, and then store it's location.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda $0200<br />clc<br />adc #$01<br />sta $0200<br /></div>
<br />Like that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Camronas</b> [ Wed Jan 25, 2012 1:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />OMG I AM SOME KIND OF TECHNO WIZARD!!! I was able to make the background red instead of blue!?! Thanks a lot <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> I know you basically said the same thing as the tut but I got your way more. Thanks ill keep you posted if I have more trouble.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Camronas</b> [ Wed Jan 25, 2012 2:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ok so I am up to making the sprites move:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">LatchController:<br />&nbsp; LDA #$01<br />&nbsp; STA $4016<br />&nbsp; LDA #$00<br />&nbsp; STA $4016&nbsp; &nbsp; &nbsp; &nbsp;; tell both the controllers to latch buttons<br /><br /><br />ReadALeft: <br />&nbsp; LDA $4016&nbsp; &nbsp; &nbsp; &nbsp;; player 1 - A<br />&nbsp; AND #%00000001&nbsp; ; only look at bit 0<br />&nbsp; BEQ ReadADone&nbsp; &nbsp;; branch to ReadADone if button is NOT pressed &#40;0&#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; add instructions here to do something when button IS pressed &#40;1&#41;<br />&nbsp; LDA $0203&nbsp; &nbsp; &nbsp; &nbsp;; load sprite X position<br />&nbsp; CLC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; make sure the carry flag is clear<br />&nbsp; ADC #$01&nbsp; &nbsp; &nbsp; &nbsp; ; A = A + 1<br />&nbsp; STA $0203&nbsp; &nbsp; &nbsp; &nbsp;; save sprite X position<br />ReadADone:&nbsp; &nbsp; &nbsp;; handling this button is done<br />&nbsp; <br /><br />ReadB: <br />&nbsp; LDA $4016&nbsp; &nbsp; &nbsp; &nbsp;; player 1 - B<br />&nbsp; AND #%00000001&nbsp; ; only look at bit 0<br />&nbsp; BEQ ReadBDone&nbsp; &nbsp;; branch to ReadBDone if button is NOT pressed &#40;0&#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; add instructions here to do something when button IS pressed &#40;1&#41;<br />&nbsp; LDA $0203&nbsp; &nbsp; &nbsp; &nbsp;; load sprite X position<br />&nbsp; SEC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; make sure carry flag is set<br />&nbsp; SBC #$01&nbsp; &nbsp; &nbsp; &nbsp; ; A = A - 1<br />&nbsp; STA $0203&nbsp; &nbsp; &nbsp; &nbsp;; save sprite X position<br />ReadBDone:&nbsp; &nbsp; &nbsp; &nbsp; ; handling this button is done<br /></div>
<br />
<br />The tutorial wants me to make the sprites move using the arrow keys instead of A and B. I cant see the difference between the two function to be able to see what needs to change, this code works though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Camronas</b> [ Wed Jan 25, 2012 2:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Wait I got it <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> I need to list all the controls in order from A to Right.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Jan 25, 2012 5:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't know why the tutorials insist on reading the controller like that... This method is bad because it mixes hardware bahavior with game logic, and that's not professional at all... Also, there's no easy/quick/small way for you to know more than what buttons are pressed now. Many times you need to know what buttons are down now but weren't last frame, in order to avoid repeated button detection, such as when navigating a menu... If you don't apply any restriction there, when you press a direction the cursor will move through the options insanely fast, because people always hold buttons down longer than a frame (at 60 fps this is no surprise).
<br />
<br />The better way is to read the state of all the buttons at once and buffer them in a byte, and later have the game code check this byte, not the hardware directly. You should always separate hardware details from game logic when possible. It makes your code easier to maintain and even port to other systems, in case you decide to.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>bunnyboy</b> [ Wed Jan 25, 2012 11:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">I don't know why the tutorials insist on reading the controller like that...</div>
<br />
<br />Because it is one of the early lessons in a simple beginners tutorial.  Reading all the buttons at once needs shifting, variables, and subroutines.  Just a few lessons later those are covered and the controller reading is changed.
<br />
<br />Newbies need simplicity to learn first, being "professional" is overwhelming instead of teaching.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
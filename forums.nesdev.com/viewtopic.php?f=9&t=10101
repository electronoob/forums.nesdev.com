<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - FPGA Composite video, some questions and findings</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NES Hardware and Flash Equipment" href="http://forums.nesdev.com/feed.php?f=9" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - FPGA Composite video, some questions and findings" href="http://forums.nesdev.com/feed.php?f=9&amp;t=10101" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=9&amp;t=10101';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sat Sep 20, 2014 2:17 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=9">NES Hardware and Flash Equipment</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=9&amp;t=10101">FPGA Composite video, some questions and findings</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=9"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=9&amp;t=10101"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 30 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=9&amp;t=10101&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=9&amp;t=10101&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=9&amp;t=10101&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=9&amp;t=10101&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=9&amp;t=10101&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p112185"></a>
				<b class="postauthor">pyroholic</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112185">FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112185#p112185"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 2:40 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu May 16, 2013 1:33 am<br /><b>Posts:</b> 13
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hello, i have been doing some development of a VHDL implementation of a NES on an FPGA and have an almost finished PPU and have been doing some experimentation with a composite video interface trying to mimic the original output. I have the interface up and running on my television screen with a hardwired palette demo to check colors and saturation and have some findings that does not quite agree with the information on the wiki. <br /><br />The first thing i discovered is that the colorburst does not seem to use color 8 for synchronization as the wiki suggests. Actually the phase used for synchronization is not 100% available from the 12 square color waves. Studying the patent document for the PPU I found out that the actual video signal is generated by a separate circuit from color burst and sync and have drawn some conclusions from this. During my first attempts i just used a square color wave as the color burst signal, this proved to be pretty unsuccessful and unstable on my crt tv's which i guess is because the synchronization circuits need something more of an actual sinusoid to be able to synchronize correctly. <br /><br />To compensate for the reference signal being a square wave I applied a simple low-pass filter to the da-converter using a capacitor the monitors were able synchronize and display all the colors, or actually not entirely correct, instead of the regular nes colors they were somewhat off, especially the brown/yellowish color showed as green, resulting in four different shades of green instead of three. <br /><br />Based on this finding i figured out that the nes is probably using one of the square waves for color burst, and low pass filters it to provide a trianglular sinusoid for synchronization that can be mixed with the actual video data which uses the other square color waves. Since i'm using a single dac for signal generation i thought i was out of luck but then i figured out that i should be able to the low-pass filtering digitally using a FIR-filter. This proved to be very successful, a simple 6-tap filter turned my square reference signal into nice looking triangle wave, and voila, the first of the four green then turned into the brown/yellowish color that i expexted. As a result the colors were shifted around a bit because of the added phase shift to the burst reference signal, so when adjusting for that i actually ended up using the square wave from color A as reference. So according to my finding the wiki information is incorrect and the color reference signal should use color A, anybody else who has any thought on this?<br /><br />This post turned out to be a lot longer than i had originally thought, but anyways, on to my question as well. When studying the information about sync timing on the wiki as well as looking at the visual 2c02 simulator, the sync seems to be offset differently, they have the same pulse length but according to the wiki the pulse starts at pixel 276 while according to the simulator it should start at pixel 280, the same applies to where the color burst and borders are applied, except that the duration of left and right borders are swapped between the simulation and the wiki, which of the two would actually be the most correct information source? I would like to think that the visual 2c02 is an accurate representation of the ppu so that the information from there should be correct. <br /><br />Ok, now i'm done, hopefully some people think that this is interesting information.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5995"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p112186"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112186">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112186#p112186"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 4:50 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 1869<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I think it's going to be hard to convince anybody either way without some hard evidence (= data from a scope).<br /><br />Of course the data from wiki doesn't have any indication as to where it came from, either... <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">www.fauxgame.com</a>!</span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p112187"></a>
				<b class="postauthor">HardWareMan</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112187">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112187#p112187"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 5:03 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=2016.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 01, 2007 11:12 am<br /><b>Posts:</b> 162
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><strong>First</strong>, use one common DAC is wrong.<br /><strong>Second</strong>, you should look at <a href="http://breaknes.com/download" class="postlink">PPU schematic</a> to understand how magic is done.<br /><strong>Third</strong>, equivalent schematic for basic phase shifted frequencies looks like this, and generated 12 phases:<br /><a href="http://savepic.net/3647364.jpg" class="postlink"><img src="http://savepic.net/3647364m.jpg" alt="Image" /></a><br /><a href="http://savepic.net/3664984.png" class="postlink"><img src="http://savepic.net/3664984m.png" alt="Image" /></a><br /><a href="http://savepic.net/3661912.png" class="postlink"><img src="http://savepic.net/3661912m.png" alt="Image" /></a><br /><strong>Forth</strong>, according this schematic, final color phase will be:<br /><img src="http://savepic.net/3717579.png" alt="Image" /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Color ID&nbsp; : Used phase(s)<br />H 3 2 1 0 : P1 P2 P3 P4 P5 P6 P7 P8 P9 P10 P11 P12<br />0 0 0 0 0 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;. <br />1 0 0 0 1 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />2 0 0 1 0 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />3 0 0 1 1 :&nbsp; X&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />4 0 1 0 0 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; X&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />5 0 1 0 1 :&nbsp; .&nbsp; .&nbsp; X&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />6 0 1 1 0 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; X&nbsp; &nbsp;.&nbsp; &nbsp;.<br />7 0 1 1 1 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; X&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />8 1 0 0 0 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;X<br />9 1 0 0 1 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; X&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />A 1 0 1 0 :&nbsp; .&nbsp; X&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; X&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />B 1 0 1 1 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />C 1 1 0 0 :&nbsp; .&nbsp; .&nbsp; .&nbsp; X&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />D 1 1 0 1 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;X&nbsp; &nbsp;.<br />E 1 1 1 0 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; X&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br />F 1 1 1 1 :&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; .&nbsp; &nbsp;.&nbsp; &nbsp;.<br /></div><br />At this moment I don't figure which phase used in color burst, but I find it out soon.<br /><br />PS Another way is see it at oscilloscope. I have such PD ROM and I hope do some test very soon.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=2016"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p112190"></a>
				<b class="postauthor">pyroholic</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112190">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112190#p112190"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 5:47 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu May 16, 2013 1:33 am<br /><b>Posts:</b> 13
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks for the input, i know that a common DAC is wrong in the sense of doing an exact replica, but as long as i can reproduce the correct voltage levels i'm happy, especially since it is a lot simpler to hook up an r-2r DAC than a resistor ladder with pass-mosfets, and i guess it's pretty hard to figure out the resistor values from the die shots as well. <br /><br />I also get how to generate the phases, as far as i can tell that circuit you attatched is the equivalent of a johnson counter, where the outputs along with its inverted outputs generate the exact same wave diagram that you attached, that is at least what i used for my design. So i think that we are saying the same thing. 12 square wave signals with 50/50 duty cycle and a phase shift of 30 degrees.<br /><br />The way i figured out which phase to use was trial and error since i didn't get it down correctly with the info from the wiki, so it is by no means hard evidence, but it at least got me curious as to wether someone else had any input on the subject. So if you can determine it by a more scientific method that would be awesome.<br /><br />In the patent document <a href="http://www.google.com/patents/US4824106" class="postlink">http://www.google.com/patents/US4824106</a> there is a schematic of how the color phase and luminance is selected on page seven, and explained in the text is also that color burst and sync is generated from other circuitry and mixed before passed to the output pin. I guess that nintendo didn't deviate too much from this design either.<br /><br />About the filtering of the color-burst into a triangle wave, i'm sure i've read somewhere, perhaps on this forum that someone measured the signal on an oscilloscope and saw that the colorburst was triangular instead of square, but i haven't been able to find it again. I have some plans to hook it up on a scope, but i don't have access to one right now so if you beat me to it, if you want to i would be interested to know if the color burst is actually triangular and if the color waves in the video-signal are still rectangular.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5995"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p112191"></a>
				<b class="postauthor">HardWareMan</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112191">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112191#p112191"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 6:25 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=2016.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 01, 2007 11:12 am<br /><b>Posts:</b> 162
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">pyroholic wrote:</div><div class="quotecontent">About the filtering of the color-burst into a triangle wave, i'm sure i've read somewhere, perhaps on this forum that someone measured the signal on an oscilloscope and saw that the colorburst was triangular instead of square, but i haven't been able to find it again. I have some plans to hook it up on a scope, but i don't have access to one right now so if you beat me to it, if you want to i would be interested to know if the color burst is actually triangular and if the color waves in the video-signal are still rectangular.</div><br />I remeber that, <a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=8209&amp;start=30#p85310" class="postlink">it was me</a>. :3 <br /><a href="http://savepic.su/433471.png" class="postlink"><img src="http://savepic.su/433471m.png" alt="Image" /></a><br /><a href="http://savepic.su/421183.png" class="postlink"><img src="http://savepic.su/421183m.png" alt="Image" /></a><br />But, then <a href="http://forums.nesdev.com/viewtopic.php?p=85414#p85414" class="postlink">I was discovered</a> that apparently PPU have a high-resistance output. And triangle signal is wrong. It still almost square.<br /><a href="http://savepic.su/433133.png" class="postlink"><img src="http://savepic.su/433133m.png" alt="Image" /></a><br /><a href="http://savepic.su/418797.png" class="postlink"><img src="http://savepic.su/418797m.png" alt="Image" /></a></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=2016"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p112193"></a>
				<b class="postauthor">pyroholic</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112193">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112193#p112193"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 6:47 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu May 16, 2013 1:33 am<br /><b>Posts:</b> 13
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Haha, awesome, so that was you <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />So are the first two sets of pictures are from the ppu-output pin? Were the color subcarrier in the video still square then, i couldn't really determine from that thread? Anyways since the color burst seems integrated inside the ppu, unless the color subcarrier is integrated in the same way, the phase of the color burst would be offset from the color subcarrier, and any additional phase-shifting in amplifier circuitry would not alter the phase relationship between color-burst and color subcarrier.<br /><br />By the way, i did som calculations on my low-pass filter and got a phase shift of -75 degrees for 3.579 MHz so in that case color burst ends up between two adjacent phases, and since i use color B's phase (not A as i said before), the resulting phase ends up exactly between colors 8 and 9.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5995"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p112195"></a>
				<b class="postauthor">Quietust</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112195">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112195#p112195"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 9:14 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 10:59 pm<br /><b>Posts:</b> 1188
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">A quick test in Visual2C02 confirms that colorburst <strong>does</strong> use phase P5, the same as colors 08, 18, 28, and 38 - what's actually happening is that colorburst forces the palette into &quot;monochrome&quot; mode (forcing the 4 chroma bits to zero) but also forces the upper bit high (by grounding /3 at t2225), thus using an effective chroma value of 8.</div>

					
						<div class="postbody"><br />_________________<br />Quietust, QMT Productions
<br />P.S. If you don't get this note, let me know and I'll write you another.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p112197"></a>
				<b class="postauthor">pyroholic</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112197">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112197#p112197"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 10:12 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu May 16, 2013 1:33 am<br /><b>Posts:</b> 13
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ok, so you mean that color burst and sync uses the same dac as the video signal, so that would mean that color burst oscillates between super black and one of the other values, or basically output color 0x08? or have i missed something else?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5995"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p112204"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112204">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112204#p112204"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 11:28 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 2348<br /><b>Location:</b> seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">pyroholic wrote:</div><div class="quotecontent">Ok, so you mean that color burst and sync uses the same dac as the video signal, so that would mean that color burst oscillates between super black and one of the other values, or basically output color 0x08?</div><br />Similar to, but not the same as color 0x08; it's closer to color 0x08 with the attenuation bit set all the time. It's actually a little brighter than that: the high half phase is closer to color 0x2D than 0x00.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p112206"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112206">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112206#p112206"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 11:42 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 12423<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">There are <a href="http://wiki.nesdev.com/w/index.php/NTSC_video#Brightness_Levels" class="postlink">about ten different taps on the PPU's DAC</a>. The active picture uses the levels that correspond to colors $00, $10, $20/$30, $0D, $1D, $2D, and $3D. The blanking period uses separate taps for sync, color burst low, and color burst high, as well as <s>$0D</s> $1D.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p112208"></a>
				<b class="postauthor">pyroholic</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112208">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112208#p112208"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 12:13 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu May 16, 2013 1:33 am<br /><b>Posts:</b> 13
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ok, so i have been checking the schematics as well, mainly from the link from HardWareMan, and it seems the color-burst output uses its own pass mosfets for the signal voltage levels, as well as synch signal as tepples said. So the resulting voltage on the video out pin is still a mix from three components (video, colorburst and sync). I've also been doing some experimentation with my set-up, as filtering only color-burst signal (color burst will be out of phase from any of the color signals) and also filtering the entire video out signal (color burst in phase with color 8). When filtering the entire signal and using color 8 the colors don't seem to match entirely but pretty close, and while filtering only the color-burst signal the colors are much closer to what a real nes is outputting, still somewhat off though. <br /><br />So my theory is that the output signal from the color burst mosfets suffer from higher capacitive loads, which would result in the signal appearing more like a triangle wave. I have made a simple picture to try and explain what i'm saying.<br /><br /><img src="http://oi40.tinypic.com/28b3zes.jpg" alt="Image" /><br /><br />The top signal is an ideal square wave, the second an ideal triangle wave.<br />Now third is how the square wave would look like when passed through a low-pass RC filter with the cut-off frequency at the base frequency of the square wave signal, and finally the fourth signal the same as the third but with a cut-off frequency lower than the base frequency of the square wave, the resulting signal starts to appear as a triangle wave at the cost of signal attenuation. <br /><br />Also, none of the signals in the chart are at the same phase, if the square wave is set as reference signals, all the other signals will be lagging in phase, with the triangle signal beeing off by most. In the scope pictures posted by HardWareMan it is clear that the color burst is a heavily attenuated signal, and that is why the signal is appearing as a triangle, as in fourth signal in the pic. I'm going to try and get access to a scope next week to verify, but my theory is that the color wave-form in the video part of the signal is more like the third signal in the pic. <br /><br />If anyone is interested i can take a picture of the monitor when using the different set ups.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5995"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p112210"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112210">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112210#p112210"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 12:39 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 12423<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">There's also a phenomenon called <a href="https://en.wikipedia.org/wiki/Slew_rate" class="postlink">slew rate</a>, where low amplitude signals look more like the third example from the top (exponential rise to high level and fall to low level), whereas high amplitude signals look more like the fourth or even the second (a triangle wave). This happens when certain components in an amplifier produce a maximum rate of change of the output voltage. It causes the phase to depend on the amplitude: large signals lag more.<br /><br /><a href="http://forums.nesdev.com/viewtopic.php?p=85318#p85318" class="postlink">ReaperSMS mentioned slew rate before</a>.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p112211"></a>
				<b class="postauthor">Quietust</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112211">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112211#p112211"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu May 16, 2013 12:42 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 10:59 pm<br /><b>Posts:</b> 1188
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">There are <a href="http://wiki.nesdev.com/w/index.php/NTSC_video#Brightness_Levels" class="postlink">about ten different taps on the PPU's DAC</a>. The active picture uses the levels that correspond to colors $00, $10, $20/$30, $0D, $1D, $2D, and $3D. The blanking period uses separate taps for sync, color burst low, and color burst high, as well as $0D.</div><br />Actually, the blanking period does not use color $0D - it only uses the &quot;sync&quot; voltage (which is actually GND inside the PPU) for both horizontal and vertical sync, outputting color $<strong>1</strong>D (which is the same as $xE/$xF) during most of the other periods.<br /><br />Looking at visual2c02, vertical blank lasts for 3 scanlines, and it simply extends the HSYNC pulses during scanlines 244-246 by an additional 293 cycles (so they end at cycle 257 on the next scanline instead of cycle 305 on the current scanline).</div>

					
						<div class="postbody"><br />_________________<br />Quietust, QMT Productions
<br />P.S. If you don't get this note, let me know and I'll write you another.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p112240"></a>
				<b class="postauthor">pyroholic</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112240">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112240#p112240"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri May 17, 2013 12:37 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu May 16, 2013 1:33 am<br /><b>Posts:</b> 13
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">There's also a phenomenon called <a href="https://en.wikipedia.org/wiki/Slew_rate" class="postlink">slew rate</a>, where low amplitude signals look more like the third example from the top (exponential rise to high level and fall to low level), whereas high amplitude signals look more like the fourth or even the second (a triangle wave). This happens when certain components in an amplifier produce a maximum rate of change of the output voltage. It causes the phase to depend on the amplitude: large signals lag more.<br /><br /><a href="http://forums.nesdev.com/viewtopic.php?p=85318#p85318" class="postlink">ReaperSMS mentioned slew rate before</a>.</div><br /><br />Yup, slew rate is basically an RC effect why the results is the same as for a filter. The series resistance through the mosfets channel and source/drain capacitance basically form an rc circuit, so if nintendos goal would be to turn the square reference color burst into a triangular signal they could simply shorten the channel width of the pass mosfets for color burst and drive strength would decrease, so slew rate/cut-off frequency would decrease and the square would turn almost triangle. Along with wider transistor channels for the video the square would be more like a square instead of the triangle in the burst. This is just my theory but i think it seems reasonable. <br /><br />I saw on the topic you linked to that there were discussions on the duty cycle of the main clock as well, this should however only offset every second wave but might also cause differences.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5995"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p112248"></a>
				<b class="postauthor">HardWareMan</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p112248">Re: FPGA Composite video, some questions and findings</a></div><div style="float: right;"><a href="./viewtopic.php?p=112248#p112248"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri May 17, 2013 11:29 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=2016.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 01, 2007 11:12 am<br /><b>Posts:</b> 162
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">PPU DAC interesting thing. Its basis is a chain resistance between the VCC and GND supply, which sets the voltage level between different types of signals. Total 10 levels, designated as L01..L10. Each of these levels comes to switch that transfers selected voltage level to the output at the right time. Here is a table of different signal levels:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">LEVEL : SYNC : BURST : LUMA0 : LUMA1 : LUMA2 : LUMA3 :<br />&nbsp;VCC&nbsp; :&nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:<br />&nbsp;L10&nbsp; :&nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;: &lt; EMPHASIS CONTROL<br />&nbsp;L09&nbsp; :&nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp;H&nbsp; &nbsp;:&nbsp; &nbsp;H&nbsp; &nbsp;:<br />&nbsp;L08&nbsp; :&nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp;L&nbsp; &nbsp;:<br />&nbsp;L07&nbsp; :&nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp;H&nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:<br />&nbsp;L06&nbsp; :&nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp;H&nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:<br />&nbsp;L05&nbsp; :&nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp;L&nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:<br />&nbsp;L04&nbsp; :&nbsp; &nbsp; &nbsp; :&nbsp; &nbsp;H&nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:<br />&nbsp;L03&nbsp; :&nbsp; &nbsp;H&nbsp; :&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp;L&nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;: &lt; BLACK LEVEL<br />&nbsp;L02&nbsp; :&nbsp; &nbsp;.&nbsp; :&nbsp; &nbsp;.&nbsp; &nbsp;:&nbsp; &nbsp;L&nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:<br />&nbsp;L01&nbsp; :&nbsp; &nbsp;.&nbsp; :&nbsp; &nbsp;L&nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:<br />&nbsp;GND&nbsp; :&nbsp; &nbsp;L&nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; &nbsp; &nbsp;:</div><br />Every signal oscillates between &quot;L&quot; and &quot;H&quot; levels, except for B/W luma signals, that seems to be used only static &quot;H&quot; level. Of course, we cannot discover value of L01..L10 levels by DIE shot, but we can judge their relative positions. L10 is used to turn off the video output by shunting to GND, thus video pin have zero voltage level. I don't know right now what condition causing that, but it doesn't matter for now.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=2016">HardWareMan</a> on Fri May 17, 2013 10:57 pm, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=2016"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=9&amp;t=10101"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=9"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=9&amp;t=10101"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 30 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=9&amp;t=10101&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=9&amp;t=10101&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=9">NES Hardware and Flash Equipment</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="10101" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9" selected="selected">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - CPU-test: cpu_dummy_writes [DONE]</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESemdev" href="http://forums.nesdev.com/feed.php?f=3" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - CPU-test: cpu_dummy_writes [DONE]" href="http://forums.nesdev.com/feed.php?f=3&amp;t=8738" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=3&amp;t=8738';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Thu Aug 16, 2018 9:09 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=3&amp;t=8738">CPU-test: cpu_dummy_writes [DONE]</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=8738"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>3</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 36 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=8738&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=8738&amp;start=30">3</a> &nbsp;<a href="./viewtopic.php?f=3&amp;t=8738&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=3&amp;t=8738&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=3&amp;t=8738&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=3&amp;t=8738&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p91587"></a>
				<b class="postauthor">Bisqwit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91587">CPU-test: cpu_dummy_writes [DONE]</a></div><div style="float: right;"><a href="./viewtopic.php?p=91587#p91587"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2012 8:46 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://bisqwit.iki.fi/kala/hloop.gif" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 14, 2011 1:09 am<br /><b>Posts:</b> 248
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">There is a <a href="http://nesdev.com/bbs/viewtopic.php?p=31629" class="postlink">test called cpu_dummy_reads written by Blargg</a>.
<br />
<br />I created a logical counterpart called cpu_dummy_writes.
<br />
<br />As I understand it, read-modify-write instructions, such as INC, issue two writes: Once for the unmodified value, and then for the modified value.
<br />
<br />I tried my hand at making one (sans timings), and it is here, with source code: <!-- m --><a class="postlink" href="http://bisqwit.iki.fi/src/nes_tests/cpu_dummy_writes.zip">http://bisqwit.iki.fi/src/nes_tests/cpu ... writes.zip</a><!-- m -->
<br />
<br />It includes two versions. One depends on OAM reading being reliable, and the other depends on proper implementation of the PPU's open bus.
<br />
<br />Test results for OAM version:
<br />
<br />-- FCEUX, oldppu: OAM reading not supported (867 errors); fails test #3 (fail #2 given)
<br />-- FCEUX, newppu: All opcodes pass, but 5 errors in OAM read test (fail #6)
<br />-- BNES (BSNES 087): All official instructions pass, but emulator errors out at the first unofficial instruction (technically fail #9, but error message never gets displayed)
<br />-- Nesemu1 (my emulator): All tests pass
<br />-- Nintendulator 0.970: All opcodes pass, but 3 errors in OAM read test (fail #6)
<br />-- Nestopia 1.40: All tests pass
<br />-- NES: Random failures, more often than not. This suggests that OAM reading is reliable only on emulators. Though this test can help catch buggy CPU emulators, it does not suggest overall accuracy as it is now.
<br />
<br />Test results for the PPU memory version:
<br />
<br />-- FCEUX, oldppu: All tests pass
<br />-- FCEUX, newppu: 150 open bus errors, opcodes worked fine (fail #10)
<br />-- BNES (BSNES 087): 750 open bus errors, crash at unofficial instructions (technically fail #9, but error message never gets displayed), all official instructions report failure (but this is because open bus is not implemented properly).
<br />-- Nesemu1 (my emulator): All tests pass
<br />-- Nintendulator 0.970: All tests pass (nags about unofficial instructions)
<br />-- Nestopia 1.40: 15 open bus errors, opcodes worked fine (fail #10)
<br />-- NES: All tests pass</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5043">Bisqwit</a> on Sun Mar 25, 2012 2:43 pm, edited 14 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5043"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p91588"></a>
				<b class="postauthor">Zepper</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91588"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91588#p91588"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2012 9:14 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly Fx3</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=39_1487294131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 4:59 pm<br /><b>Posts:</b> 3139<br /><b>Location:</b> Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">*ahem* RockNES 5.07 gives error #10, "INC abs should do double-write".
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">#define INC&#40;v&#41; \<br />&nbsp; &nbsp;z_readvalue&#40;&#41;; \<br />&nbsp; &nbsp;v += 1; \<br />&nbsp; &nbsp;SET_SZ_FLAGS&#40;v&#41;<br /><br />CPUOP&#40;INC1&#41;<br />&nbsp; value = readvalue&#40;offset&#41;;<br />&nbsp; INC&#40;value&#41;;<br />&nbsp; writevalue&#40;offset, value&#41;;<br />OPEND</div><br /><br />Also... the <a href="http://nesdev.com/6502_cpu.txt" class="postlink">timing diagram source</a>.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Read-Modify-Write instructions &#40;ASL, LSR, ROL, ROR, INC, DEC,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SLO, SRE, RLA, RRA, ISB, DCP&#41;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; #&nbsp; address R/W description<br />&nbsp; &nbsp; &nbsp; &nbsp;--- ------- --- ------------------------------------------<br />&nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp;R&nbsp; fetch opcode, increment PC<br />&nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp;R&nbsp; fetch low byte of address, increment PC<br />&nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp;R&nbsp; fetch high byte of address, increment PC<br />&nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; address&nbsp; R&nbsp; read from effective address<br />&nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; address&nbsp; W&nbsp; write the value back to effective address,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;and do the operation on it<br />&nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; address&nbsp; W&nbsp; write the new value to effective address</div>
<br />
<br />Looks like the document is OK. I can't believe I bypassed it! <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /></div>

					
						<div class="postbody"><br />_________________<br /><strong>Zepper</strong><br /><a href="http://rocknes.web.fc2.com/" class="postlink"><em>RockNES developer</em></a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=39"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p91590"></a>
				<b class="postauthor">FHorse</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91590"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91590#p91590"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2012 9:28 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat May 08, 2010 9:31 am<br /><b>Posts:</b> 225
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">All test passed with puNES <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4369"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p91595"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91595"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91595#p91595"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2012 10:24 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Might one be able to exploit open bus to get the right value into INC $2005?
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp;ldx #$1F<br />&nbsp; inc $1FF5,x<br />&nbsp; ; read #$FE = INC a,x<br />&nbsp; ; read #$F5<br />&nbsp; ; read #$1F<br />&nbsp; ; read $1F05 = $0705<br />&nbsp; ; read $2005 &#40;open bus; hopefully returns value left there by reading $1F05&#41;<br />&nbsp; ; write back old value to $2005<br />&nbsp; ; write back new value to $2005<br /></div>
<br />$2006 (VRAM address) and $2007 (VRAM data) also have semantics for multiple reads and writes, and they may ignore writes too.
<br />
<br />I'd make this, but my PowerPak's open bus behavior can't be trusted.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p91600"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91600">Re: CPU-test request: cpu_dummy_writes</a></div><div style="float: right;"><a href="./viewtopic.php?p=91600#p91600"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2012 11:33 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 3110<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Bisqwit wrote:</div><div class="quotecontent">-- NES, PowerPak: According to Kiddcade at #nesdev, the OAM write/read tests fail randomly; and when they succeed, the instruction tests fail randomly. However, as of this writing, he has not tried the newest version.</div>
<br />This is expected, see <a href="http://nesdev.com/bbs/viewtopic.php?t=6424" class="postlink">this thread</a>.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p91613"></a>
				<b class="postauthor">Zepper</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91613"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91613#p91613"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2012 4:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly Fx3</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=39_1487294131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 4:59 pm<br /><b>Posts:</b> 3139<br /><b>Location:</b> Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Well, I did the necessary changes, but there's a problem. The APU test ROM (<em>4017_timing.nes</em>) <strong>fails</strong> regarding "delay after effective $4017 write: 0". Here's my new code anyways...
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">#define INC&#40;v&#41; \<br />&nbsp; &nbsp;v += 1; \<br />&nbsp; &nbsp;SET_SZ_FLAGS&#40;v&#41;<br /><br />CPUOP&#40;INC1&#41;<br />&nbsp; value = readvalue&#40;offset&#41;;<br />&nbsp; writevalue&#40;offset, value&#41;;<br />&nbsp; INC&#40;value&#41;;<br />&nbsp; writevalue&#40;offset, value&#41;;<br />OPEND</div>
<br />
<br /><strong>EDIT:</strong> I had to modify ASL, ROL, LSR and ROR w/ implicit addressing mode to take 2 cycles again. Everything's fine.</div>

					
						<div class="postbody"><br />_________________<br /><strong>Zepper</strong><br /><a href="http://rocknes.web.fc2.com/" class="postlink"><em>RockNES developer</em></a></div>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> on Wed Mar 21, 2012 9:48 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=39"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p91650"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91650">Re: CPU-test request: cpu_dummy_writes</a></div><div style="float: right;"><a href="./viewtopic.php?p=91650#p91650"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Mar 21, 2012 6:40 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1364
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Bisqwit wrote:</div><div class="quotecontent">-- BNES (BSNES 087): All official instructions pass, but emulator errors out at the first unofficial instruction (technically fail #50, but error message never gets displayed)</div>
<br />
<br />The documentation on unofficial opcodes is piss-poor, and wildly inconsistent. Every unofficial opcode also has 5+ mnemonics, which doesn't help matters any.
<br />
<br />I'd appreciate if there were a document that explains 100% of all behaviors (especially the ones that have "undefined behavior", which is coded speak for "I don't understand the actual interactions with past CPU actions/states"), and gives exactly one community-preferred name for each mnemonic.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p91651"></a>
				<b class="postauthor">Bisqwit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91651">Re: unofficial opcodes</a></div><div style="float: right;"><a href="./viewtopic.php?p=91651#p91651"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Mar 21, 2012 7:32 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://bisqwit.iki.fi/kala/hloop.gif" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 14, 2011 1:09 am<br /><b>Posts:</b> 248
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">SLO (ASL+ORA), RLA (ROL+AND), SRE (LSR+EOR), RRA (ROR+ADC), DCP (DEC+CMP), ISB (INC+SBC).
<br />
<br />These six are very consistent and regular. They are (nearly) perfect synthesis of their component opcodes.
<br />I am currently rewriting my CPU core, and from the rewritten core the combined synthesis of these opcodes becomes also rather obvious.
<br />--------
<br />Take opcode $17 (SLO zx) for example. It is a perfect synthesis of $16 (ASL zx) and 15 (ORA zx).
<br />ASL zx:<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; address&nbsp; &nbsp; write&nbsp; &nbsp; &nbsp; &nbsp; recipient&nbsp; &nbsp; &nbsp; code<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.raw=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 'ADDR.lo+=X'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 't&amp;=data; data=t'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data',&nbsp; &nbsp; &nbsp; &nbsp; 'sb=0; reg.P_C = t&amp;0x80; t&lt;&lt;=1$ t|=sb; data=t'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;, // Write new value<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw; reg.P_N=t&amp;0x80; reg.P_Z=!u8&#40;t&#41;'&#41;,</div><br />ORA zx:<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.raw=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 'ADDR.lo+=X'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 't&amp;=data; t2&amp;=A'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw; t|=t2; A=t; reg.P_N=t&amp;0x80; reg.P_Z=!u8&#40;t&#41;'&#41;,</div><br />SLO zx:<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.raw=data'&#41;,&nbsp; &nbsp; &nbsp;IDENTICAL<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 'ADDR.lo+=X'&#41;,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IDENTICAL<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 't&amp;=data; t2&amp;=A; data=t'&#41;,&nbsp; &nbsp; &nbsp; INCLUDES EVERYTHING FROM BOTH COMPONENTS<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data',&nbsp; &nbsp; &nbsp; &nbsp; 'sb=0; reg.P_C = t&amp;0x80; t&lt;&lt;=1$ t|=sb; data=t'&#41;, THIS COMES FROM ASL<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;, // Write new value&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; THIS FROM ASL<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw; t|=t2; A=t; reg.P_N=t&amp;0x80; reg.P_Z=!u8&#40;t&#41;'&#41;, INCLUDES EVERYTHING FROM BOTH COMPONENTS</div><br />--------<br />Similarly, opcode 8D, STA abs:<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.lo=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.hi=data; t&amp;=A; data=t'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw'&#41;,</div><br />Opcode 8E, STX abs:<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.lo=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.hi=data; t&amp;=X; data=t'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw'&#41;,</div><br />Opcode 8F, SAX abs:<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.lo=data'&#41;,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IDENTICAL<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.hi=data; t&amp;=A; t&amp;=X; data=t'&#41;, EVERYTHING FROM BOTH<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IDENTICAL<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw'&#41;,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IDENTICAL</div><br />--------<br />For a more complicated (and at first glance, irregular) example, consider the differences between these two official opcodes:<br />Opcode 95, STA zx (official):<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.raw=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 'ADDR.lo+=X; t&amp;=A; data=t'&#41;, // dummy read while the CPU is preparing data<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw'&#41;,</div><br />Opcode 96, STX zy (official):<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.raw=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 'ADDR.lo+=Y; t&amp;=X; data=t'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw'&#41;,</div><br />However, with absolute indexing, there is an extra cycle dedicated for fixing up the 16-bit address, and this conflicts with the indexing logic (the high-part of the address is loaded at the same time (I guess, in the same bus) as the target register, which is an index register), making 9E (STX absy) broken and therefore not part of the official set of instructions.<br /><br />Opcode 9D, STA absx (official):<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.lo=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.hi=data; ADDR.lo+=X; overflow=ADDR.lo&lt;X'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 'ADDR.hi += overflow; t&amp;=A; data=t'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw'&#41;,</div><br />Opcode 9E, STX absy (unofficial, alternative names: SHX/SXA/XAS)<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.lo=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.hi=data; ADDR.lo+=Y; overflow=ADDR.lo&lt;Y'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 't&amp;=&#40;ADDR.hi + overflow&#41;; t&amp;=X; data=t'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw'&#41;,</div><br />Then the perfect synthesis opcode of these two becomes:<br />Opcode 9F, SAX absx (unofficial, alternative names: SHA/AHA/AHX)<div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.lo=data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; '++PC.raw; ADDR.hi=data; ADDR.lo+=X; overflow=ADDR.lo&lt;X'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',false,&nbsp; &nbsp; &nbsp; 'data',&nbsp; &nbsp; &nbsp; &nbsp; 't&amp;=&#40;ADDR.hi+overflow&#41;; t&amp;=A; t&amp;=X; data=t'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'ADDR.raw',true,&nbsp; &nbsp; &nbsp; &nbsp;'data'&#41;,<br />&nbsp; &nbsp; &nbsp; Array&#40;'PC.raw',false,&nbsp; &nbsp; &nbsp; &nbsp; 'OPCODE',&nbsp; &nbsp; &nbsp; '++PC.raw'&#41;,</div>
<br />--------
<br />At this cycle-level opcode analysis, the even the erradic behavior of the unofficial opcodes starts looking surprisingly regular.
<br />True, there are some that are unpredictable, such as 8B (ANE #imm), which is a synthesis of 89 STA #imm + 82 STX #imm, both functionally NOPs, but combined does weird things.
<br />--------
<br />To answer your concern, what matters is not what people call these opcodes. What matters is what they do.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5043">Bisqwit</a> on Wed Mar 21, 2012 2:17 pm, edited 6 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5043"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p91652"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91652">Re: CPU-test request: cpu_dummy_writes</a></div><div style="float: right;"><a href="./viewtopic.php?p=91652#p91652"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Mar 21, 2012 7:46 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">I'd appreciate if there were a document that explains 100% of all behaviors (especially the ones that have "undefined behavior", which is coded speak for "I don't understand the actual interactions with past CPU actions/states")</div><br />The behaviors behind instructions involving $11 or $EE is actually analog, as <a href="http://visual6502.org/wiki/index.php?title=6502_Opcode_8B_%28XAA,_ANE%29" class="postlink">a page on visual6502 explains</a>. The CPU is trying to read and write the special bus at the same time, where some of it is direct and the other goes through ADC's decimal mode circuitry. The timing on this differs from one lot of 6502s to another and possibly even by temperature and RFI. It also involves the RDY input, meaning the behavior might change around a DMC DMA request (which pulls RDY low for a few cycles).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">and gives exactly one community-preferred name for each mnemonic.</div>
<br />For the stable opcodes, I'd pick whatever mnemonic <a href="http://www.cc65.org/doc/ca65-4.html#ss4.3" class="postlink">ca65's 6502X mode</a> uses. <a href="http://wiki.nesdev.com/w/index.php/Programming_with_unofficial_opcodes" class="postlink">My article about practical uses of unofficial opcodes</a> had mostly followed ca65's mnemonics, and today I changed SBX to AXS to conform fully.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p91695"></a>
				<b class="postauthor">Zepper</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91695"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91695#p91695"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 22, 2012 7:28 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly Fx3</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=39_1487294131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 4:59 pm<br /><b>Posts:</b> 3139<br /><b>Location:</b> Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Is there something else for CPU emulation that could be tested? Such test was important here.</div>

					
						<div class="postbody"><br />_________________<br /><strong>Zepper</strong><br /><a href="http://rocknes.web.fc2.com/" class="postlink"><em>RockNES developer</em></a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=39"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p91699"></a>
				<b class="postauthor">crudelios</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91699"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91699#p91699"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 22, 2012 9:12 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Feb 09, 2012 3:54 am<br /><b>Posts:</b> 24
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Nice to see someone other than blargg creating some tests!
<br />
<br />My emu (jaNES) passed both official and unnofficial tests <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5192"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p91783"></a>
				<b class="postauthor">Bisqwit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91783"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91783#p91783"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 24, 2012 4:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://bisqwit.iki.fi/kala/hloop.gif" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 14, 2011 1:09 am<br /><b>Posts:</b> 248
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I created another version of this test, now using PPU memory for the double write testing. It also verifies whether the emulator emulates PPU's open bus features properly. I also updated the OAM version to do more exhaustive testing on the OAM.
<br />
<br />I have updated the first post of the thread with test results.
<br />
<br />The test(s) can be downloaded here: <!-- m --><a class="postlink" href="http://bisqwit.iki.fi/kala/cpu_dummy_writes.zip">http://bisqwit.iki.fi/kala/cpu_dummy_writes.zip</a><!-- m -->
<br />
<br />I would appreciate it if someone could run this test on the real NES a few times and report carefully the results, preferably before people start using this test and before it becomes difficult to release updates to it.
<br />
<br />Screenshots from Nestopia (1.40), BSNES (v087), Nintendulator (0.970), FCEUX (2.1.4a), RockNES (5.07), puNES (0.56), nesemu1, iNES 3.6, Famtasia, Nesticle ;-)
<br /><img src="http://bisqwit.iki.fi/kala/snap/nestopia_dummywrite_ppumem.png" alt="Image" /> <img src="http://bisqwit.iki.fi/kala/snap/bsnes_dummywrite_ppumem.png" alt="Image" /> <img src="http://bisqwit.iki.fi/kala/snap/undulator_dummywrite_ppumem.png" alt="Image" /> <img src="http://bisqwit.iki.fi/kala/snap/fceux_dummywrite_ppumem.png" alt="Image" /> <img src="http://bisqwit.iki.fi/kala/snap/rocknes_dummywrite_ppumem.png" alt="Image" /> <img src="http://bisqwit.iki.fi/kala/snap/punes_dummywrite_ppumem.png" alt="Image" /> <img src="http://bisqwit.iki.fi/kala/snap/nesemu1_dummywrite_ppumem.gif" alt="Image" /> <img src="http://bisqwit.iki.fi/kala/snap/ines_dummywrite_ppumem.png" alt="Image" />  <img src="http://bisqwit.iki.fi/kala/snap/famtasia_dummywrite_ppumem.png" alt="Image" /> <img src="http://bisqwit.iki.fi/kala/snap/nesticle_dummywrite_ppumem.png" alt="Image" />
<br />
<br />Video capture from my emulator:
<br /><!-- m --><a class="postlink" href="http://bisqwit.iki.fi/kala/snap/nesemu1_dummywrite_oam.avi">http://bisqwit.iki.fi/kala/snap/nesemu1 ... te_oam.avi</a><!-- m --> , <!-- m --><a class="postlink" href="http://bisqwit.iki.fi/kala/snap/nesemu1_dummywrite_ppumem.avi">http://bisqwit.iki.fi/kala/snap/nesemu1 ... ppumem.avi</a><!-- m --></div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5043">Bisqwit</a> on Sat Mar 24, 2012 7:32 pm, edited 4 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5043"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p91787"></a>
				<b class="postauthor">Zepper</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91787"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91787#p91787"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 24, 2012 6:51 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly Fx3</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=39_1487294131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 4:59 pm<br /><b>Posts:</b> 3139<br /><b>Location:</b> Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">It's time for implementing such unofficial opcodes. In fact, they are/were used to identify bad dumps and/or bugs in the emulation.</div>

					
						<div class="postbody"><br />_________________<br /><strong>Zepper</strong><br /><a href="http://rocknes.web.fc2.com/" class="postlink"><em>RockNES developer</em></a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=39"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p91789"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91789"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91789#p91789"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 24, 2012 7:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I ran the OAM test with my PowerPak in NovaYoshi's NES. Most of the time I got this:
<br />"n FAILED READS; SPRDATA does not appear to be reliable RAM at all"
<br />The most common values of n were 126 and 895, depending on PPU-CPU alignment at reset, but 6, 134, and 902 were seen more than once.
<br />
<br />Occasionally I got this:
<br />"INC abs should do double-write"
<br />
<br />So I long-reset and did the PPU tests. Each line of open bus behavior was "0- 0- 00 0- 0- 0- 0- 00". Then it got glitchy as heck for a couple seconds. And then randomly depending on PPU-CPU alignment at reset, it would either pass or display a blank box below the "1B3B5B7BDBFB". Once I got it to say "Pas    " with four spaces after "Pas". On the most part the result of a passed run looked like Nintendulator, except for orange horizontal lines running through most blank areas, and random characters scattered about the screen.
<br />
<br />I don't have my video recording equipment with me at the moment. In a couple days, should I make videos covering about a dozen resets of each test?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p91790"></a>
				<b class="postauthor">Bisqwit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p91790"></a></div><div style="float: right;"><a href="./viewtopic.php?p=91790#p91790"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 24, 2012 7:34 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://bisqwit.iki.fi/kala/hloop.gif" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 14, 2011 1:09 am<br /><b>Posts:</b> 248
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">I don't have my video recording equipment with me at the moment. In a couple days, should I make videos covering about a dozen resets of each test?</div>
<br />Thank you, but no, I think that description was verbose enough. Weird!
<br />The jumpy image was to be expected, it does that on emulators too. (Though on emulators, it jumps during the open bus testing, not during the opcode testing.)
<br />I tried to minimize the times the screen is blanked, just in case an emulator crashes in the middle of the test and leaves nothing to be seen on the screen, but I may have cut it too close at times. I did include a vblank wait at relevant times, or so I think. I'll see if I can fix it more.
<br />I'm not sure what to make of the "blank box". There was a blank box on the next screen in some earlier version, but the scrolling position is set with a vblank wait before the pass texts are output.
<br />
<br />I will leave the OAM test like that though; I don't think I can improve it in any way except by adding more opcodes into the test or by making the opcode tests not depend on earlier tests, as is in the PPU memory version.
<br />
<br />Good to know that the assumptions I made in making the open bus test were right.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5043"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=3&amp;t=8738"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=8738"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>3</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 36 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=8738&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=8738&amp;start=30">3</a> &nbsp;<a href="./viewtopic.php?f=3&amp;t=8738&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="8738" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3" selected="selected">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Assembler Decision</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Assembler Decision</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7002">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7002</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Wed Oct 06, 2010 11:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">ibeenew2 wrote:</div><div class="quotecontent"><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">And the NESASM v3.0 is just an EXE, no docs or source, so whoever would want to fix any remaining issues/bugs will have to start back at v2.x.</div><br />Source has been at <a href="http://nespowerpak.com/nesasm/nesasmsrc.zip" class="postlink">http://nespowerpak.com/nesasm/nesasmsrc.zip</a> for at least 1.5 years.  Others recompiled it for Mac etc.</div>
<br />
<br />Ah cool, so it is.  And the docs even were updated.  I only had grabbed the zip with the EXE (and that's what most people would link to), so it would make a lot of sense to have all that stuff together in one file.  The history.txt file only shows one change in it though, regarding line length (I remember hearing about that now, but that's one bug I had never ran into myself).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Oct 06, 2010 11:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">The history.txt file only shows one change in it though, regarding line length (I remember hearing about that now, but that's one bug I had never ran into myself).</div>
<br />Yeah, I remember someone saying this problem was fixed... but what about the others? Looking at past threads I found that at least one version of NESASM failed to report <a href="http://nesdev.com/bbs/viewtopic.php?p=51635#51635" class="postlink">branches out of range</a> and <a href="http://nesdev.com/bbs/viewtopic.php?t=6588" class="postlink">invalid addressing modes</a>, generating corrupt binaries instead. That's awful, and will have a person pull all the hair from their heads when trying to debug a program that still assembled under these circumstances.
<br />
<br />Personally, even if these bugs were corrected, I'd rather stay away from an assembler with a history like this. It's almost like the default option is to not report any errors and let the user think everything is alright when this obviously isn't the case.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Wed Oct 06, 2010 12:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Not sure about you guys but I have had branches out of are errors when I first started so I would think it's fixed in NESASM3.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ibeenew2</b> [ Wed Oct 06, 2010 2:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Looking at past threads I found that at least one version of NESASM failed to report <a href="http://nesdev.com/bbs/viewtopic.php?p=51635#51635" class="postlink">branches out of range</a> </div><br />Fixed many years ago, possibly a decade.  v2.51 correctly reports the error and it is at least 5 years old.  People using ancient versions instead of new ones is a reflection on the people not the tool.  You can't say ASM6 is incomplete because the original version didn't have incbin when it does now.<br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">and <a href="http://nesdev.com/bbs/viewtopic.php?t=6588" class="postlink">invalid addressing modes</a>, generating corrupt binaries instead.</div>
<br />He was using the wrong syntax.  Parenthesis are used for order of operations like 2*(label+1) so STA (tempAdd),x is <strong>correctly</strong> assembled to STA tempAdd,x.  People using it wrong does not mean bugs.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Wed Oct 06, 2010 4:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">ibeenew2 wrote:</div><div class="quotecontent">He was using the wrong syntax.  Parenthesis are used for order of operations like 2*(label+1) so STA (tempAdd),x is <strong>correctly</strong> assembled to STA tempAdd,x.  People using it wrong does not mean bugs.</div>
<br />
<br />What's weird though is that NESASM seems to be the only thing in the 6502-using world that replaces parenthesis with brackets.  All other assemblers I've used also parenthesis for order of operations and they seem to do just fine.  It breaks a tradition that seems to go back maybe 35 years (including lots of source code), for no real advantage.  Then the brackets also are used for something else on 65c816, for long (24-bit) indirection, IIRC.
<br />
<br />You probably know all this too, but here's an except from the history text that explains the 8kB bank size, and maybe the syntax differences:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;- merged the code of the NES and the PCE assembler, now<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; there's only one program.<br /></div>
<br />
<br />It's an HuC6280 assembler, primarily.  And that system does have 8kB banks.  The MagicEngine TG16/PCE emulator written by the same author was really great one (and was the only one at the time).
<br />
<br />WLA-DX was another assembler that had syntax oddities that I complained about too when it was brought up.  Basically for the same reason - it supports multiple CPUs, it's not designed around the 6502.  Again I complained then, that the x816 assembler, as well as CA65, supported 6502/65C816 fully without any sort of weird pseudo-typecasting syntax being needed.
<br />
<br />Things are a lot better when people are able to share their source code and let other use it.  That's what is great about ASM6, CA65, DASM, and x816.  You will have to change local labels, swap .byte for .db, easy stuff like that.  Try that with NESASM, your bank is going to overflow, it might assemble and take guesses about what the parenthesis mean, it might run slower and be larger without adding stuff to specify zeropage vs absolute, and you're still going to have to change the local labels, heheh.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Wed Oct 06, 2010 4:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was porting something to 2.51 today and found that it doesn't even warn when  overwriting values:
<br />
<br />.bank 0
<br />.org $100
<br />.byte $12
<br />
<br />.bank 0
<br />.org $100
<br />.byte $34
<br />
<br />The above acts as if the first .byte was never even done, without any diagnostics. That's a recipe for hard-to-find bugs.
<br />
<br />And treating jmp ($1234) as jmp $1234 without even a warning is poor, given that (as far as I know) jmp ($1234) is the standard syntax for an indirect jump.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Wed Oct 06, 2010 4:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">And treating jmp ($1234) as jmp $1234 without even a warning is poor, given that (as far as I know) jmp ($1234) is the standard syntax for an indirect jump.</div>
<br />
<br />Yep, I've found myself using JMP ($FFFC) quite a few times.  The reset instruction, heheh.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>clueless</b> [ Wed Oct 06, 2010 5:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Disclaimer: I use ca65.  I've never tried nesasm, neshla, asm6 or others.
<br />
<br />I also use revision control.  Extensively.  Religiously.  
<br />
<br />I've recently read the posts about people making various changes to loopy's asm6.  I humbly suggest that loopy consider placing asm6 into some sort of revision control system and granting approved individuals commit access.
<br />
<br />Loopy, if you'd like, I can host a subversion project and "trac" system for your asm6 on my own server.  I maintain source trees for 20+ projects (mostly private, the largest one is 250,000+ lines of C code).  I have a few public source trees (one being my own aborted attempt a a NES game).  I backup to tape, a second hard-drive, a second computer (all in my house) and to a server at work (it's good to be the network security guy there).  Automated regression tests upon checking are also possible (eg, compile a source file that utilizes most asm6 features and md5 the resulting .nes file).  But my server is x86, so I can't automate testing of a big-endian build.
<br />
<br />You can also get SVN, CVS, Hg, git or other hosting from a variety of places for free.  Or if you have no desire to do so, you could permit the nesdev community to do the same.
<br />
<br />The alternative is for several people to maintain their own private branches (possibly using independent rcs systems) and not benefit from a shared repository, commit histories, bug tracking and ownership, etc...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Wed Oct 06, 2010 5:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Something like someone said earlier, why don't you get NESASM3 and stop using 2.51 and taunting it's problems?  <img src="./images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" />   <img src="./images/smilies/icon_question.gif" alt=":?:" title="Question" />  <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Wed Oct 06, 2010 7:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've actually had to to use NESASM.  NESASM 2.x has that bug where label names have to be shorter than a specific number of characters (which bit me when I was attempting to reassemble a public Japanese game from source -- written with NESASM!), otherwise it starts spitting out vague/bizarre errors which you won't easily determine are caused by label names being too long.  NESASM 3.x would just segfault or crash in some way (I forget).  Garbage.  :-)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Wed Oct 06, 2010 7:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are you running modern compter? 0_o XD

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Thu Oct 07, 2010 8:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I had no idea there was a nesasm3. I just looked and the only important change is an increase of line length. The other addition seemed to be some kind of list of function addresses.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Thu Oct 07, 2010 1:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think so? <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /> I know I don't use it alot, but I've not really had any problems with it. Although the bank sizes differ from NES hardware is a dumb idea, indeed. If I knew more C I'd edit it but I don't, so I guess I have to suffer. Oh well. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />
<br />
<br />
<br />Edited for sounding like an idiot.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Thu Oct 07, 2010 3:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I guess I didn't mention this earlier either, which somewhat explains why I'm willing to rant a lot about it, but like koitsu I use NESASM because I have to.  Sometimes it's teaching people (who are already using it), there's plenty of NESASM-assembled stuff in the Garage Cart #2 compilation, even an NBASIC game (it compiles to NESASM syntax).  I can certainly congratulate people who've never had trouble with it, heheh. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />MCK depends on NESASM also, it has been widely used.  On my original Squeedo cartridge I had a show-stopping bug that I was never able to track down (having moved on to a better rewrite), I hacked MCK to play music through my synth (IRQ'd to the NES's $4011) but there was some terrible glitching.  I wouldn't be surprised at all if it was something mundane and stupid slipping through NESASM's error-checking.  Wasted a lot of time debugging my PIC and NES code (which worked fine by itself), but, shit happens.  And it's totally worth it that I'm making it with the PIC32 now, instead. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />NESASM is inescapable, so yeah that's reason enough to discourage it's use among newbies.  With ASM6 one can use those macros posted recently to create an iNES header, and that's a good basic setup that's just as convenient.  At least until someone rewrites NESASM's erroring system (and banking size selectable), I can live with the syntax difference because of the ever-handy search-and-replace function.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
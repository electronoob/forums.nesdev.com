<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Nintendulator,Nestopia?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Nintendulator,Nestopia?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=6257">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=6257</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Wed Apr 07, 2010 7:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">- If he's using CHR RAM, there's no reason to write into VRC6 CHR registers.</div><br />Many mappers allow bankswitching of CHR RAM by design. These include MMC1, MMC3, and CPROM. A ROM-to-6264 rewire job on a board with a VRC6 would operate the same way.</div>
<br />
<br />Also Langrage Point on VRC7.  8K of swappable CHR-RAM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Wed Apr 07, 2010 8:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />- The only mapper that makes sense is Videomation (13) within 16k of CHR RAM. Bankswitching 8 banks of 1k looks meaningless. Personally, we would have more possibilities - like having 16k of CHR RAM for VRC6 and someone says "it works". Well, it works but it's out of defaults (released games).
<br />
<br /><div class="quotetitle">Disch wrote:</div><div class="quotecontent">Also Langrage Point on VRC7.  8K of swappable CHR-RAM.</div>
<br />
<br />- But this isn't unusual. It's a well known mapper. It's a known game/feature.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Wed Apr 07, 2010 8:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">- The only mapper that makes sense is Videomation (13). Bankswitching 8 banks of 1k looks meaningless.</div>
<br />
<br />Games still do it, even if it's meaningless.  Most mappers that have CHR-RAM and CHR swapping capabilities (ie:  VRC7, MMC3, etc, etc) have swappable CHR-RAM.  You're better off making CHR-RAM swappable by default than not.
<br />
<br />I can only think of 1 or 2 pirate mappers in which you actually need to ignore the CHR regs when there's CHR-RAM.  All other commercial games write to CHR regs appropriately.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Wed Apr 07, 2010 2:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Disch wrote:</div><div class="quotecontent">Games still do it, even if it's meaningless.  Most mappers that have CHR-RAM and CHR swapping capabilities (ie:  VRC7, MMC3, etc, etc) have swappable CHR-RAM.  You're better off making CHR-RAM swappable by default than not.</div><br /><br />- You forgot mapper 19 (Pinbot and a racing game, missing the title now) with *both* CHR RAM and ROM swappable.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I can only think of 1 or 2 pirate mappers in which you actually need to ignore the CHR regs when there's CHR-RAM.  All other commercial games write to CHR regs appropriately.</div>
<br />
<br />- I didn't trace his code, but probably he's doing the "default" mapper setup, with 0,1,2,3,4,5,6,7 CHR RAM pages at PPU $0000. The only real problem I had was with Space Shuttle (MMC1). Is only my emulator that's not ready for this "new" unusual situation, of taking VRC6 with CHR RAM? Seriously, does Nestopia/Nintendulator support such feature? Even if I do the required changes, it won't change the world after all. ^_^;;

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Apr 07, 2010 3:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">You forgot mapper 19 (Pinbot and a racing game, missing the title now) with *both* CHR RAM and ROM swappable.</div>
<br />By 19 you meant <a href="http://wiki.nesdev.com/w/index.php/TQROM" class="postlink">119</a>, right? And it wasn't a racing game; it was <a href="http://en.wikipedia.org/wiki/High_Speed#NES_version" class="postlink">High Speed</a>, a pinball game. But given the name of that pinball, I see how you'd make that mistake.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Apr 07, 2010 3:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't think any emulator author should block certain cartridge configurations just because they have never been used before. If the iNES header allows it, and the real console would take it, emulators should support it. You never know when some homebrewer will decide to do something unusual...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Wed Apr 07, 2010 3:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Still angry about the idiocy that led to mapper #3 having a Max CHR size in some emulators.  Just because CNROM cartridges can't accept more doesn't mean that Mapper #3 should be restricted by CNROM limitations.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Apr 07, 2010 3:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">Still angry about the idiocy that led to mapper #3 having a Max CHR size in some emulators.  Just because CNROM cartridges can't accept more doesn't mean that Mapper #3 should be restricted by CNROM limitations.</div>
<br />If you're talking about the limit of 4 CHR banks (32 KiB), I agree. But the 16 bank (128 KiB) limit is because of the security diode slots on D5-D4 of authentic boards.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Wed Apr 07, 2010 6:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">You forgot mapper 19 (Pinbot and a racing game, missing the title now) with *both* CHR RAM and ROM swappable.</div><br />By 19 you meant <a href="http://wiki.nesdev.com/w/index.php/TQROM" class="postlink">119</a>, right? And it wasn't a racing game; it was <a href="http://en.wikipedia.org/wiki/High_Speed#NES_version" class="postlink">High Speed</a>, a pinball game. But given the name of that pinball, I see how you'd make that mistake.</div>
<br />
<br />- Yes, thank you. Anyway, I meant a racing themed pinball game.
<br />
<br />- Regarding the unusual stuff, personally, I consider it a brand new subject on NES homebrew scene. Although, I'm not in the good mood for such thing, until the "big accurate ones" try to follow/support such line of "unusual or unreleased cartridge features".

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Thu Apr 08, 2010 4:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just to say that I am very disapointed by the accuracy of Nintendulator and Nestopia. Now that I have eventually imported an NTSC NES here, I was able to figure out that... pretty much ALL demoes I did with raster effects that worked fine in those "accurate" emulators haves glitches on the NES !
<br />At first I trought their accuracy was doubtful only in PAL mode, but no it's doubtful too in NTSC mode. I even had one program that worked fine in all emus but it looked like it spill out of VBlank time on the real console.
<br />
<br />So just to say there is still a LOT of room for improvement in accuracy, and that Nintendulator &amp; Nestopia really aren't that accurate. Anyone is pretty much forced to test their demoes on a real PAL and NSTC NES to be sure they work as expected.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Thu Apr 08, 2010 5:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">So just to say there is still a LOT of room for improvement in accuracy, and that Nintendulator &amp; Nestopia really aren't that accurate. Anyone is pretty much forced to test their demoes on a real PAL and NSTC NES to be sure they work as expected.</div>
<br />
<br />- That's what I was trying to say all the time.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Denine</b> [ Thu Apr 08, 2010 8:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Can I have a word? <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> '
<br />OK...So friend claimed that VRC6 is not using CHR RAM without a cart mod...
<br />SO....again I decided to Change to CHR ROM.I had even a nice routine to load GFX into specifed PPU number,with specifed number of tiles to read.But...RockNES and nintendulator is not working with VRC6 CHR RAM-that's why i decided to change it.
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">You decide.</div>
<br />I'll leave DRD for a while to start learning everything from zero,I already finished Nerdy nights tutorial.I'll find other to be sure I understand everything.Then,I'll try to clean,and understand every bit of my code.
<br />But right now i have some questions:
<br />
<br />1.I understand how to change CHR slots in VRC6.But...I'm using 10 banks of CHR ROM(It's 256kb).And I can't switch to the second half of CHR ROM.Normally I need to write #$03 to $D000 when I want to map 3rd 4kb piece of CHR ROM into 1st PPU slot.But this possibility end at #$4F.If Ill' try #$50 then slot goes gray.0x50th 4kb piece of CHR ROM is about half of file...Of course I don't think I'll need even 20 pieces,but I'm curious how to do it.I can't find info about this in wiki.
<br />
<br />2.When my friend treid to play DRD witch CHR ROM,it seems that slots have been swapped....
<br /><img src="http://img197.imageshack.us/img197/7844/040425122830.jpg" alt="Image" />
<br />After some changes in code..it appears it is true,but in reset code i have proper CHR Slots init,even Nintendulator don't complain.
<br />
<br />3.How to detect Consloe Region?(On PAL music is seriously too slow,and no enoyable)
<br />
<br />Oh,and By The Way:My friend,just for fun had replaced Fantastic Dizzy PRG chip with DRD.It's propably nothing new to you,but it was working.
<br />Fantastic Dizzy is mapper 71(Camerica).And I was suprised that music was working...
<br />
<br />Anyway..I going to look for another tutorial,and read wiki. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Thu Apr 08, 2010 3:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">emulators should support it.</div>
<br />
<br />- They should, but the task is quite complex. There's CHR page masking (RAM or native ROM), plus the bankswitching hooks - to swap CHR RAM or CHR ROM. It's *much* different when such feature is already present in a mapper, like MMC1 (Space Shuttle) or mapper 119 that uses *both*. By just putting such support available for any mapper requires a major code rewrite. Is worth the effort? Nope, unless such unusual mapper setups would be common in NES homebrew - we had an accidental case only! Anyway, meh! <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Thu Apr 08, 2010 3:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />For state of banks at beginning, I don't think any emulators support the official one since there is not much information about it.  Commercials games already set their banks properly so you don't have to worry about the initial state of the mapper. For homebrew, this is an issue. Like mentioned before, it bit me for MMC3 with CHR-RAM when it was working fine in the emulator but not on the real thing.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu Apr 08, 2010 3:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">- They should, but the task is quite complex.</div>
<br />I really fail to see what the complexity is. If you already support this mapper with CHR-ROM, you already have all the memory management working, wouldn't it be just a matter of allowing writes to that memory?
<br />
<br />I've never written an emulator before, but if I did I would probably make the distinction between CHR-ROM and CHR-RAM by simply allowing or disallowing writes to PPU addresses $0000-$1FFF, redirecting writes according to what the mapper has made accessible in that range, exactly like it's done for reads.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
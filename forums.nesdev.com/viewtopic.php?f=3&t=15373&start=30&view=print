<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - GGVm: Port, Package, and Protect NES rom for PC, Mobile</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">GGVm: Port, Package, and Protect NES rom for PC, Mobile</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=15373">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=15373</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Mar 16, 2017 7:23 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Interesting. I am however surprised by the lack of &quot;features&quot;, i.e. have to require to game-specific hacks for raster timing and playing OGG files for audio. It sounds quite chep, there's probably some emulators with GNU licences allowing re-use without asking anyone for permission... or isn't there any ?!</div><br />There are plenty, such as FCEUX, Nintendulator, and Nestopia. It's just that most are copylefted,  and copyleft requires distribution of complete corresponding source code for the emulator.<br /><br /><div class="quotetitle">Sour wrote:</div><div class="quotecontent">There is so much information, even on the wiki (How many times have you read &quot;FCEUX's code does this&quot;, &quot;Nestopia's code does that&quot; while reading the wiki?) that is extracted from the source of current GPL-licensed emulators</div><br />Mostly I've seen that in descriptions of obscure Japan-only mappers. (If an article that isn't about a Japan-only mapper uses &quot;FCEUX's code does this&quot;, let me know and I'll evaluate it.) If a particular mapper implementation is the only GPL code in your project, and you remove that mapper from a branch of an emulator designed to support only a particular game that does not use that mapper, you no longer have to release your emulator under GPL. This means you can make a GPL version with all mappers and a permissive or LGPL version with few mappers, much as FFmpeg does with its configuration switches that enable use of GPL libraries.<br /><br /><div class="quotetitle">Sour wrote:</div><div class="quotecontent">that it pretty much makes it impossible to not release an emulator as GPL (unless you just ignore the license's restrictions).</div><br />Copying an idea, process, or method of operation, as opposed to its expression, is not restricted by copyright. This means that if a particular piece of hardware is observed to do something, and the sequence and structure of your code is determined by that behavior, and you don't copy variable names or other &quot;window dressing&quot;, it does not infringe.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sour</b> [ Thu Mar 16, 2017 8:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Mostly I've seen that in descriptions of obscure Japan-only mappers.</div>Yes, I was mostly referring to those as well - I should have been clearer.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Copying an idea, process, or method of operation, as opposed to its expression, is not restricted by copyright. This means that if a particular piece of hardware is observed to do something, and the sequence and structure of your code is determined by that behavior, and you don't copy variable names or other &quot;window dressing&quot;, it does not infringe.</div>Oh I see, I always interpreted &quot;derived works&quot; as being anything derived from the GPL code (be it code or knowledge). I'm clearly not a lawyer, though.  Thanks for the information, I'll keep that in mind!  Anyway, enough off-topic discussion from me :)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>YoukaiCountry</b> [ Thu Mar 16, 2017 4:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I have the project all set up and building, however I believe there are some files missing from the assets. The Dushlan module is looking for font/gameover.png &amp; font/gameover.fnt, however they seem to not be included. My local.properties seems to be in order, have I missed setting something up? I can always substitute them with my own, but I just want to make sure. Thanks!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GradualGames</b> [ Thu Mar 16, 2017 6:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think I forgot something that was ignored for future check ins but is an integral part of the build. I'll fix it soon.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GradualGames</b> [ Fri Mar 17, 2017 5:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Fixed. Forgot to include android/assets, which is ignored because game assets are copied there (this directory is re-used by android and desktop projects) temporarily, but several files need to remain there (font, palette, shaders) etc.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>YoukaiCountry</b> [ Fri Mar 17, 2017 10:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Works perfectly now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GradualGames</b> [ Sat Mar 18, 2017 8:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Live CHR-RAM streaming is now supported. I added a test rom for demonstrating the capability. It works best on PC systems.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GradualGames</b> [ Sun Mar 19, 2017 1:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">GradualGames wrote:</div><div class="quotecontent"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Would it help to use a pixel shader for palette lookup so that you don't have to store eight copies of the pattern table in memory at once?</div><br /><br />I actually do use a fragment shader to interpret the textures I'm generating, which does perform a palette lookup on a texture that is 32 pixels wide by 1 pixel tall. I actually encode the pixel value, attribute, and bg or spr in the rgb values of the actual textures. Without the shader turned on, everything looks sickly greenish/red/blue hues, haha.<br /><br />I've been trying to think of a way to delegate all of the ppu decoding to the shader since that is performed in parallel on the gpu for each pixel (afaik), however the bandwidth needed for uploading 8k to the gpu every frame, though small, might be prohibitive? I'm not sure. #longtermgoals.  It'd be neat if I could get that to work though, because then suddenly live CHR-RAM updates would be possible. Right now, I can only support it during transitions.</div><br /><br />I was able to figure out how to delegate selection of background or sprite palettes as well as attributes entirely to the shader, so I do not have to duplicate textures anymore. This has the added benefit of making the new CHR-RAM streaming feature 4x faster.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GradualGames</b> [ Tue Mar 21, 2017 7:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />iOS builds work now. .ogg files do not play back on iOS, so I will have to convert Dushlan's assets to .mp3, but I was able to test with one of my own games. Works very well, same smooth 60fps as PC. No tearing, no stuttering. *edit* this just in. These results are also true on an iPad 2nd gen. That's pretty good news <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GradualGames</b> [ Fri Mar 24, 2017 5:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Broke through yet another remaining performance issue on mobile devices. I had still been observing some stuttering, every few seconds, enough to interrupt gameplay, on my 1st gen Moto X. All gone! It's as smooth as I think is possible to achieve on Android at this point. I.e. I don't think I've played a single game on Android that achieves the smoothness possible on PC or iOS. Heck even John NES emulator does what I'm talking about (every few seconds, a frame is dropped). I'll update the demos and apk sometime soon.<br /><br />*edit* Just noticed the CHR-RAM streaming test now runs at 60fps on Android. 7 chr tiles are uploaded each frame. I think that's the max you can do on NES itself, as when I try 8 I get glitches.<br /><br />In addition, the stuck button issue on iOS is resolved.<br /><br />Next things on my list:<br />-Make save states work on mobile devices<br />-Add menu to mobile devices<br />-Correct simulation of how PPU sorts background and foreground pixels. Right now certain effects are faked for common use cases.<br />-Improvement of touch controls on mobile so that they are a consistent size regardless of your screen size, as well as making them work for portrait orientation as well as landscape.<br />-Adding ability to skin the touch controls so you can have controls that fit the theme of your game.<br />-Continue to adapt more games to GGVm!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Mar 24, 2017 7:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">GradualGames wrote:</div><div class="quotecontent">7 chr tiles are uploaded each frame. I think that's the max you can do on NES itself, as when I try 8 I get glitches.</div><br />Well, that greatly depends on the type of loop you use to copy the bytes. With a fully unrolled loop and doing nothing else during vblank, you could easily update 16 tiles per frame. In my engine I believe I can do 12 tiles per frame if it's the graphics I have stored in immediate mode (LDA #$XX, STA $2007, which is only 6 cycles per byte).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GradualGames</b> [ Fri Mar 24, 2017 7:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">GradualGames wrote:</div><div class="quotecontent">7 chr tiles are uploaded each frame. I think that's the max you can do on NES itself, as when I try 8 I get glitches.</div><br />Well, that greatly depends on the type of loop you use to copy the bytes. With a fully unrolled loop and doing nothing else during vblank, you could easily update 16 tiles per frame.</div> <br />Cool...maybe I'll try unrolling the copy loop in the test, and then see how it fares. I'd love to be able to say it can support the max case for this ability.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">In my engine I believe I can do 12 tiles per frame if it's the graphics I have stored in immediate mode (LDA #$XX, STA $2007, which is only 6 cycles per byte).</div><br />Whoa, you mean you actually have graphics stored as code? Neat.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Mar 24, 2017 7:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">GradualGames wrote:</div><div class="quotecontent">Whoa, you mean you actually have graphics stored as code? Neat.</div><br />Heh, only for really critical stuff... This expands the graphics by a factor of 5 after all!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Mar 24, 2017 8:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><a href="https://forums.nesdev.com/viewtopic.php?f=22&amp;t=15440" class="postlink">Popslide</a> uses 8 cycles per byte plus I think 50 cycles per transfer of up to 64 bytes. This means you can fit an OAM DMA (526 cycles) and up to three 64-byte transfers (562 cycles each) totaling 12 tiles into an NTSC vblank (~2270 cycles). Then you can use the draw portion of the pre-render line (85 cycles) to set scroll position.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>GradualGames</b> [ Sat May 27, 2017 8:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: GGVm: Port, Package, and Protect NES rom for PC, Mobile</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A bunch of bugs have been found and fixed. Additionally, the first split screen capability has been added (it uses Sprite 0 to determine where to do the split, but actual Sprite 0 status spinning continues to be unsupported, and never will be) via a special register on the cpu bus. Finally, GGVm is now more straightforward to use for audio. You don't need to code a complex sound adapter anymore, you can just write to a few simple registers on the cpu bus to play a song #, a sfx #, or pause/resume/stop the music. These new features are all documented on the github README.md under the section &quot;Virtual Registers&quot;

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
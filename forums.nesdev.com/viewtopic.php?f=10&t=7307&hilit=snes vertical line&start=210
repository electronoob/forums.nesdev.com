<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Hello World</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Newbie Help Center" href="http://forums.nesdev.com/feed.php?f=10" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Hello World" href="http://forums.nesdev.com/feed.php?f=10&amp;t=7307" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '15');
	var per_page = '15';
	var base_url = './viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sun Jun 08, 2014 4:02 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=10&amp;t=7307&amp;start=210&amp;hilit=snes+vertical+line">Hello World</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=7307"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>15</strong> of <strong>18</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 268 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=195">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line">1</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=165">12</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=180">13</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=195">14</a><span class="page-sep">, </span><strong>15</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=225">16</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=240">17</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=255">18</a> &nbsp;<a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=225">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=10&amp;t=7307&amp;start=210&amp;hilit=snes+vertical+line&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=10&amp;t=7307&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=10&amp;t=7307&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p86993"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p86993"></a></div><div style="float: right;"><a href="./viewtopic.php?p=86993#p86993"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Nov 30, 2011 5:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 11932<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">FinalZero wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">2) Do not depend on the flags at the time of reset. You'll usually end up clearing X, S, and half of P in the first six instructions anyway. All you can be sure of is that PC points where $FFFC-$FFFD says.</div><br />What do you mean "where $FFFC-$FFFD says."? How do I set where?</div><br />That's one of the "vectors". How you set up the vectors depends on your assembler. I remember how only for ca65, not asm6 or nesasm.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Why are you setting the interrupt flag in your code?</div><br />To prevent IRQs from happening during the init code. True, the CPU already sets the interrupt priority bit to 1 (NMIs only) when coming out of reset, but having an explicit SEI makes the game more compatible with badly coded multicart menus that start the game with a JMP ($FFFC) but put the interrupt priority at 0 (CLI).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Okay, so that's the overlay thing again. I don't understand which segments overlay what. Is it by bank/memory-area? Basically, I still don't understand how my linker file is supposed to be set up.</div>
<br />Which assembler are you using again? If ca65, I have a <a href="http://nesdev.com/bbs/viewtopic.php?t=7991" class="postlink">project template</a> that sets most of this up for you.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p87000"></a>
				<b class="postauthor">FinalZero</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87000"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87000#p87000"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Nov 30, 2011 6:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Dec 03, 2009 7:27 am<br /><b>Posts:</b> 134
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Which assembler are you using again? If ca65, I have a project template that sets most of this up for you.</div><br />ca65, yes. Also, I'm trying to use MMC1.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">To prevent IRQs from happening during the init code. True, the CPU already sets the interrupt priority bit to 1 (NMIs only) when coming out of reset, but having an explicit SEI makes the game more compatible with badly coded multicart menus that start the game with a JMP ($FFFC) but put the interrupt priority at 0 (CLI). </div>
<br />But why would one expect an interrupt? Anyways, do you clear the flag at the end of the init code then?
<br />
<br />* * *
<br />
<br />Here's my linker code at the moment.
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">MEMORY &#123;<br />&nbsp; &nbsp;# Header<br />&nbsp; &nbsp;HEADER:&nbsp; &nbsp;start = $0000, size = $0010;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Ram<br />#&nbsp; &nbsp;ZEROPAGE: start = $0000, size = $0100;<br />#&nbsp; &nbsp;STACK:&nbsp; &nbsp; start = $0100, size = $0100;<br />&nbsp; &nbsp;RAM:&nbsp; &nbsp; &nbsp; start = $0200, size = $0600, fill = yes;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Rom<br />&nbsp; &nbsp;LOWER_PROG_ROM: start = $8000, size = $2000, fill = yes;<br />&nbsp; &nbsp;LOWER_CHAR_ROM: start = $A000, size = $1000, fill = yes;<br />&nbsp; &nbsp;UPPER_CHAR_ROM: start = $B000, size = $1000, fill = yes;<br />&nbsp; &nbsp;UPPER_PROG_ROM: start = $C000, size = $4000, fill = yes;<br />&#125;<br />#-------------------------------------------------------------------------------<br /><br />SEGMENTS &#123;<br />&nbsp; &nbsp;# Header<br />&nbsp; &nbsp;HEADER:&nbsp; &nbsp;load = HEADER,&nbsp; &nbsp;type = ro;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Ram<br />#&nbsp; &nbsp;ZEROPAGE: load = ZEROPAGE, type = zp;<br />#&nbsp; &nbsp;STACK:&nbsp; &nbsp; load = STACK,&nbsp; &nbsp; type = rw;<br />&nbsp; &nbsp;RAM:&nbsp; &nbsp; &nbsp; load = RAM,&nbsp; &nbsp; &nbsp; type = rw;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Rom<br />&nbsp; &nbsp;CODE:&nbsp; &nbsp; &nbsp; load = LOWER_PROG_ROM, type = ro;<br />&nbsp; &nbsp;FONT:&nbsp; &nbsp; &nbsp; load = LOWER_CHAR_ROM, type = ro;<br />&nbsp; &nbsp;TILES:&nbsp; &nbsp; &nbsp;load = UPPER_CHAR_ROM, type = ro;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;MORE_CODE: load = UPPER_PROG_ROM, type = ro;<br />&nbsp; &nbsp;VECTORS:&nbsp; &nbsp;load = UPPER_PROG_ROM, type = ro, start = $FFFA;<br />&#125;<br />#-------------------------------------------------------------------------------<br /></div><br />Do I need to include the zeropage and stack segments even if nothing gets initialized there? Also, when I open it in FCEUX, I don't see any code at $8000 in the debugger, even though there should be.<br /><br />And my header:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.byte $4E, $45, $53, $1A ; &quot;NES&quot;, eof<br />.byte 1 ; Number of 16 kB prog ROM Segments<br />.byte 1 ; Number of 8 kB char ROM Segments<br />.byte %00010001 ; Byte 6 &#40;Mirroring &#40;0xx0: Horizontal, 0xx1: <span class="posthilit">Vertical</span>&#41;, Ignored if the mapper controls mirroring.&#41;<br />.byte %00000000 ; Byte 7<br />.byte 0 ; Number of 8 kB prog RAM Segments<br />.byte 0 ; Byte 9 &#40;0: NTSC, 1: PAL&#41;<br />.byte 0 ; Byte 10 &#40;Sporadically Supported&#41;<br />.byte 0, 0, 0, 0, 0 ; Filler<br />;-------------------------------------------------------------------------------<br /></div>
<br />Does MMC1 even use 8kb PROG RAM?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4131"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p87026"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87026"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87026#p87026"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 01, 2011 8:18 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 11932<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">FinalZero wrote:</div><div class="quotecontent">ca65, yes. Also, I'm trying to use MMC1. </div><br />If you have only 16 or 32 KiB of PRG ROM and only 8 KiB of CHR, why are you using MMC1 and not just NROM? Is it just for the switchable nametable mirroring?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But why would one expect an interrupt?</div><br />Sources of IRQs on the NES other than mappers include the APU frame IRQ and the DMC completion IRQ. A few games on simple mappers without their own scanline or CPU cycle counter circuits (ab)use the DMC completion IRQ as a crude scanline counter.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Anyways, do you clear the flag at the end of the init code then? </div><br />A lot of games appear to just leave the ignore IRQs flag turned on (SEI) because they never use any IRQs.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">   HEADER:   start = $0000, size = $0010; </div><br />For this, you may want to specify "fill=yes, fillval=$00", which means you won't need the "; Filler" <span class="posthilit">line</span> at the end of the header.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;LOWER_PROG_ROM: start = $8000, size = $2000, fill = yes;<br />&nbsp; &nbsp;LOWER_CHAR_ROM: start = $A000, size = $1000, fill = yes;<br />&nbsp; &nbsp;UPPER_CHAR_ROM: start = $B000, size = $1000, fill = yes;<br />&nbsp; &nbsp;UPPER_PROG_ROM: start = $C000, size = $4000, fill = yes;</div><br />[...]<br />I don't see any code at $8000 in the debugger</div><br />That's because with one 16 KiB bank, you need the following in order: UPPER_PROG_ROM, then LOWER_CHAR_ROM, then UPPER_CHAR_ROM. The only time CHR ROM ever comes before PRG ROM is in certain CHR RAM setups, and there is no LOWER_PROG_ROM in a 16 KiB PRG ROM. And your PRG ROM is in fact 16 KiB, as seen next:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">.byte 1 ; Number of 16 kB prog ROM Segments<br />.byte 1 ; Number of 8 kB char ROM Segments<br /></div></div>
<br />Some MMC1 boards have PRG RAM; others don't. In fact, the possibility of PRG RAM doesn't depend much on the mapper; even one board in the NROM class (mapper 0) has PRG RAM.
<br />
<br />If you don't want to spend a lot of time fixing your linker script, I recommend just using the NROM project template that I linked, which has a known working linker script.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p87044"></a>
				<b class="postauthor">FinalZero</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87044"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87044#p87044"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 01, 2011 1:27 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Dec 03, 2009 7:27 am<br /><b>Posts:</b> 134
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If you don't want to spend a lot of time fixing your linker script, I recommend just using the NROM project template that I linked, which has a known working linker script.</div><br />I want to know why though. I don't want to just be cargo-cult programming.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">And your PRG ROM is in fact 16 KiB, as seen next:</div><br />Can't I just switch it to 2 then? (That doesn't seem to do anything. The debugger still shows nothing.)<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Some MMC1 boards have PRG RAM; others don't. In fact, the possibility of PRG RAM doesn't depend much on the mapper; even one board in the NROM class (mapper 0) has PRG RAM. </div>
<br />What is PRG RAM used for anyways? It's not any faster than PRG ROM, is it?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4131"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p87048"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87048"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87048#p87048"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 01, 2011 2:30 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 6539<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">FinalZero wrote:</div><div class="quotecontent">What is PRG RAM used for anyways?</div><br />It's used for whatever programmers dissatisfied with the stock 2KB of RAM want. Many games put things like decompressed level maps there. It's just RAM, usually 8KB of it, to complement the 2KB that are built in the console.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It's not any faster than PRG ROM, is it?</div>
<br />No.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p87049"></a>
				<b class="postauthor">3gengames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87049"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87049#p87049"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 01, 2011 2:32 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly 65024U</td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Mar 27, 2010 12:57 pm<br /><b>Posts:</b> 2122
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">PRG-RAM is the extra RAM at $6000-$7FFF. It's in the cart, sometimes battery backed up. SMB3 has it to decompress level to. Metroid also has it. So does Kid Icarus, although none of them back it up, it's just 8KB more RAM for stuff. Other games like zelda also use it for probably more space, but also saving information on the cart to continue later, which is very important in RPGs and why most have PRG-RAM with a battery like Zelda 1+2, Crystalis, Startropics, etc. MMC5 has even bankswitchable PRG-RAM, so you can have 16KB, maybe more, although nobody has ever used that much in the day so more isn't supported by any mappers but that one.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4311"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p87063"></a>
				<b class="postauthor">FinalZero</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87063"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87063#p87063"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 01, 2011 9:48 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Dec 03, 2009 7:27 am<br /><b>Posts:</b> 134
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If you have only 16 or 32 KiB of PRG ROM and only 8 KiB of CHR, why are you using MMC1 and not just NROM? Is it just for the switchable nametable mirroring?</div><br />I want to practice/try mirroring, yes.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It's used for whatever programmers dissatisfied with the stock 2KB of RAM want. Many games put things like decompressed level maps there. It's just RAM, usually 8KB of it, to complement the 2KB that are built in the console. </div><br />Okay.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Other games like zelda also use it for probably more space, but also saving information on the cart to continue later, which is very important in RPGs and why most have PRG-RAM with a battery like Zelda 1+2, Crystalis, Startropics, etc. MMC5 has even bankswitchable PRG-RAM, so you can have 16KB, maybe more, although nobody has ever used that much in the day so more isn't supported by any mappers but that one.</div>
<br />It's only that ram that's battery-backed-up though, right? What else must one do to use battery-backed-up saves?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4131"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p87067"></a>
				<b class="postauthor">3gengames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87067"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87067#p87067"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 02, 2011 1:44 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly 65024U</td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Mar 27, 2010 12:57 pm<br /><b>Posts:</b> 2122
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah, the 8KB is the only stuff that's backed up. And to use the back up function what you have to do is program your game/program to boot up and not clear the memory, but format it if need be and put someting in there to know it's been formatted and then use all the other data in the RAM as the state of your game and program your game to load from it.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4311"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p87073"></a>
				<b class="postauthor">FinalZero</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87073"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87073#p87073"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 02, 2011 1:43 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Dec 03, 2009 7:27 am<br /><b>Posts:</b> 134
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Yeah, the 8KB is the only stuff that's backed up. And to use the back up function what you have to do is program your game/program to boot up and not clear the memory, but format it if need be and put someting in there to know it's been formatted and then use all the other data in the RAM as the state of your game and program your game to load from it.</div>
<br />Okay.
<br />
<br />Also, can someone explain exactly what's wrong with my linker file?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4131"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p87078"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87078"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87078#p87078"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 02, 2011 2:16 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 11932<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The first thing that's wrong is that the CHR ROM data isn't last in the file, as it MUST be. Can you paste your revised linker script that fixes this problem?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p87083"></a>
				<b class="postauthor">FinalZero</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87083"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87083#p87083"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 02, 2011 4:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Dec 03, 2009 7:27 am<br /><b>Posts:</b> 134
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The first thing that's wrong is that the CHR ROM data isn't last in the file, as it MUST be. Can you paste your revised linker script that fixes this problem?</div>
<br />I am confused. Why must it be last? Looking at <!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/MMC1">http://wiki.nesdev.com/w/index.php/MMC1</a><!-- m --> , it isn't listed last there.
<br />
<br />Edit: Okay, wait. I'm not even sure why I put the char rom at the locations I did. It doesn't match the documentation. Where does the char rom go in MMC1?</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=4131">FinalZero</a> on Fri Dec 02, 2011 5:03 pm, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4131"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p87084"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87084"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87084#p87084"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 02, 2011 4:59 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 11932<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The relevant wiki article is <a href="http://wiki.nesdev.com/w/index.php/INES" class="postlink">iNES</a>. In <em>all</em> mappers that use CHR ROM, the CHR data comes last in the file. First the header, then the PRG ROM, then the CHR ROM.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p87085"></a>
				<b class="postauthor">FinalZero</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87085"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87085#p87085"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 02, 2011 5:08 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Dec 03, 2009 7:27 am<br /><b>Posts:</b> 134
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Linker File:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">MEMORY &#123;<br />&nbsp; &nbsp;# Header<br />&nbsp; &nbsp;HEADER: start = $0000, size = $0010, fill = yes, fillval = $00;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# General Ram<br />#&nbsp; &nbsp;ZEROPAGE:&nbsp; start = $0000, size = $0100;<br />#&nbsp; &nbsp;STACK:&nbsp; &nbsp; &nbsp;start = $0100, size = $0100;<br />&nbsp; &nbsp;RAM:&nbsp; &nbsp; &nbsp; &nbsp;start = $0200, size = $0600, fill = yes;<br />&nbsp; &nbsp;EXTRA_RAM: start = $6000, size = $2000, fill = yes;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Prog Rom<br />&nbsp; &nbsp;LOWER_PROG_ROM: start = $8000, size = $4000, fill = yes;<br />&nbsp; &nbsp;UPPER_PROG_ROM: start = $C000, size = $4000, fill = yes;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Char Rom<br />&nbsp; &nbsp;LOWER_CHAR_ROM: start = $0000, size = $1000, fill = yes;<br />&nbsp; &nbsp;UPPER_CHAR_ROM: start = $1000, size = $1000, fill = yes;<br />&#125;<br />#-------------------------------------------------------------------------------<br /><br />SEGMENTS &#123;<br />&nbsp; &nbsp;# Header<br />&nbsp; &nbsp;HEADER:&nbsp; &nbsp;load = HEADER,&nbsp; &nbsp;type = ro;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Ram<br />#&nbsp; &nbsp;ZEROPAGE:&nbsp; load = ZEROPAGE,&nbsp; type = zp;<br />#&nbsp; &nbsp;STACK:&nbsp; &nbsp; &nbsp;load = STACK,&nbsp; &nbsp; &nbsp;type = rw;<br />&nbsp; &nbsp;RAM:&nbsp; &nbsp; &nbsp; &nbsp;load = RAM,&nbsp; &nbsp; &nbsp; &nbsp;type = ro;<br />&nbsp; &nbsp;DATA:&nbsp; &nbsp; &nbsp; load = RAM,&nbsp; &nbsp; &nbsp; &nbsp;type = rw;<br />&nbsp; &nbsp;RODATA:&nbsp; &nbsp; load = RAM,&nbsp; &nbsp; &nbsp; &nbsp;type = ro;<br />&nbsp; &nbsp;EXTRA_RAM: load = EXTRA_RAM, type = ro;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Prog Rom<br />&nbsp; &nbsp;CODE:&nbsp; &nbsp; &nbsp; load = LOWER_PROG_ROM, type = ro;<br />&nbsp; &nbsp;MORE_CODE: load = UPPER_PROG_ROM, type = ro;<br />&nbsp; &nbsp;VECTORS:&nbsp; &nbsp;load = UPPER_PROG_ROM, type = ro, start = $FFFA;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Char Rom<br />&nbsp; &nbsp;FONT:&nbsp; &nbsp; &nbsp; load = LOWER_CHAR_ROM, type = ro;<br />&nbsp; &nbsp;TILES:&nbsp; &nbsp; &nbsp;load = UPPER_CHAR_ROM, type = ro;<br />&#125;<br />#-------------------------------------------------------------------------------<br /></div><br /><br />Header File:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.segment &quot;HEADER&quot;<br />;-------------------------------------------------------------------------------<br /><br />.byte $4E, $45, $53, $1A ; &quot;NES&quot;, eof<br />.byte 2 ; Number of 16 kB prog ROM Segments<br />.byte 1 ; Number of 8 kB char ROM Segments<br />.byte %00010001 ; Byte 6 &#40;Mirroring &#40;0xx0: H, 0xx1: V&#41;&#41;<br />.byte %00000000 ; Byte 7<br />.byte 0 ; Number of 8 kB prog RAM Segments<br />;-------------------------------------------------------------------------------<br /></div>
<br />
<br />It assembled, but doesn't show anything in the debugger.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4131"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p87087"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87087"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87087#p87087"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 02, 2011 7:20 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 11932<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I see your LOWER_PROG_ROM and UPPER_PROG_ROM sum to 32 KiB. Are you making sure to specify two 16k pages in the iNES header? And are you making sure to replicate the vectors and the beginning of the init code in all 16k banks (the <a href="http://wiki.nesdev.com/w/index.php/Programming_MMC1#PRG_banks" class="postlink"><em>Barbie</em> stub</a>) so that no matter how the MMC1's registers are set at power on, the program still starts? If all this is Greek to you, I would recommend <strong>removing LOWER_PROG_ROM entirely</strong> from your linker script and putting all your code and data in UPPER_PROG_ROM for now.
<br />
<br />In MEMORY, <strong>do not use fill=yes</strong> for any memory area that is RAM. This means remove it from RAM and EXTRA_RAM. If you use fill=yes, the linker will try to (uselessly) put initial values for the memory area into the ROM file. Only memory areas that represent ROM should have fill=yes.
<br />
<br />In SEGMENTS, <strong>use type=bss</strong> instead of type=rw for any RAM segment. For segments of type bss, the linker won't try to (uselessly) put initial values for the segment into the ROM file.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p87090"></a>
				<b class="postauthor">FinalZero</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p87090"></a></div><div style="float: right;"><a href="./viewtopic.php?p=87090#p87090"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Dec 03, 2011 1:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4131.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Dec 03, 2009 7:27 am<br /><b>Posts:</b> 134
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I see your LOWER_PROG_ROM and UPPER_PROG_ROM sum to 32 KiB. Are you making sure to specify two 16k pages in the iNES header? </div><br />Yes.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">And are you making sure to replicate the vectors and the beginning of the init code in all 16k banks (the Barbie stub) so that no matter how the MMC1's registers are set at power on, the program still starts?</div><br />I didn't know that I needed to.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If all this is Greek to you, I would recommend removing LOWER_PROG_ROM entirely from your linker script and putting all your code and data in UPPER_PROG_ROM for now.</div><br />Okay, I'll try that first.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">In MEMORY, do not use fill=yes for any memory area that is RAM. This means remove it from RAM and EXTRA_RAM. If you use fill=yes, the linker will try to (uselessly) put initial values for the memory area into the ROM file. Only memory areas that represent ROM should have fill=yes. </div><br />Okay.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">In SEGMENTS, use type=bss instead of type=rw for any RAM segment. For segments of type bss, the linker won't try to (uselessly) put initial values for the segment into the ROM file.</div>
<br />Why is it useless though? Isn't data stored there? I don't see why it should be any different from the CODE segment.
<br />
<br />And... I see my code at $8000! There's stuff at $C000 too, but it's nothing I wrote, and appears to be random garbage. However, running the debugger, it seems to be alternating between $0002 and $FFFF. I don't know why.
<br />
<br />Edit: I forgot to change the number of PRG banks in the header back to 1. Doing that, it runs code that I wrote. I think I made an error in the code though, because it isn't doing the addition that I wanted it to do.
<br />
<br />Edit Edit: It seems to be interrupting every so often, and then returning to the wrong address. Ideas as to why?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4131"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=10&amp;t=7307&amp;start=210"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=7307"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>15</strong> of <strong>18</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 268 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=195">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line">1</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=165">12</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=180">13</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=195">14</a><span class="page-sep">, </span><strong>15</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=225">16</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=240">17</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=255">18</a> &nbsp;<a href="./viewtopic.php?f=10&amp;t=7307&amp;hilit=snes+vertical+line&amp;start=225">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="7307" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10" selected="selected">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
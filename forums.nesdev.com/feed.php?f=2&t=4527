<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=4527" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2008-11-04T11:18:57-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=4527</id>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2008-11-04T11:18:57-07:00</updated>
<published>2008-11-04T11:18:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39551#p39551</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39551#p39551"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39551#p39551"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />Even worse, when I play games I usually plug the game in, power the console on, power the TV on and then spend some time so that channel '4' is selected (other channels are snow), so the player isn't likely to watch the screen for 20 seconds after a cold reset.<br /></div><br />So, by "the player" you mean you, basically? =)<br /><br />I'm very different. I guess I have some sort of Obsessive-Compulsive Disorder... By the time I turn the console on, all cables must be already connected and the TV set to the proper input. Then I usually position my hand over the button but will not press it until I'm looking at the screen again. I want to know everything that's going on, and if the game does something weird at power-on I'll want to see it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Tue Nov 04, 2008 11:18 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2008-11-04T04:51:04-07:00</updated>
<published>2008-11-04T04:51:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39547#p39547</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39547#p39547"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39547#p39547"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Players will be looking at the NES's power button, not the TV, for at least the first five frames that your game is turned on.<br /></div><br />Even worse, when I play games I usually plug the game in, power the console on, power the TV on and then spend some time so that channel '4' is selected (other channels are snow), so the player isn't likely to watch the screen for 20 seconds after a cold reset.<br />This is different for a warm reset, tough.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Tue Nov 04, 2008 4:51 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2008-11-04T02:14:51-07:00</updated>
<published>2008-11-04T02:14:51-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39546#p39546</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39546#p39546"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39546#p39546"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Players will be looking at the NES's power button, not the TV, for at least the first five frames that your game is turned on.<br /></div><br /><br />Don't bet on it...<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Tue Nov 04, 2008 2:14 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2008-11-03T10:33:13-07:00</updated>
<published>2008-11-03T10:33:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39520#p39520</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39520#p39520"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39520#p39520"><![CDATA[
<div class="quotetitle">SecretServiceDude wrote:</div><div class="quotecontent"><br />I gave your code a shot, but unfortunately it didn't work.<br /></div><br />Did you try just on emulators? They might not be implementing the correct behavior (as you can see, most people just thought all writes were ignored for a while). Let us know after you try it on hardware.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Out of curiosity, what's the significance of setting the PPU address back to zero? Is that considered good form?<br /></div><br />In that piece of code, it was probably to get the PPU address register away from the palette area. When it's within the palette area and rendering is off, the color pointed by it gets rendered instead of color 0. If the address register is not pointing at any color, color 0 gets drawn.<br /><br />Some people, however, insist on resetting the scroll by writing to $2006, even though $2005 and $2000 are enough to do it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Mon Nov 03, 2008 10:33 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2008-11-03T08:31:04-07:00</updated>
<published>2008-11-03T08:31:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39518#p39518</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39518#p39518"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39518#p39518"><![CDATA[
<div class="quotetitle">WedNESday wrote:</div><div class="quotecontent"><br />I thought that you said PPU writes were ignored for the first frame?<br /></div><br />I may have, but later found that it's only after pressing the reset button that they are ignored, or if powering up less than 20 seconds after having last been powered up, not after a "cold" powerup. See the <a href="http://nesdevwiki.org/index.php/Power-up_state_of_PPU" class="postlink">Wiki page about PPU powerup</a>.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Mon Nov 03, 2008 8:31 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2008-11-03T07:36:29-07:00</updated>
<published>2008-11-03T07:36:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39516#p39516</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39516#p39516"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39516#p39516"><![CDATA[
<div class="quotetitle">WedNESday wrote:</div><div class="quotecontent"><br />I thought that you said PPU writes were ignored for the first frame?<br /></div><br /><br />- Not every single PPU write, dude. Do you know the PPU test ROMs regarding this behaviour?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Mon Nov 03, 2008 7:36 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[SecretServiceDude]]></name></author>
<updated>2008-11-03T07:01:06-07:00</updated>
<published>2008-11-03T07:01:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39515#p39515</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39515#p39515"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39515#p39515"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Players will be looking at the NES's power button, not the TV, for at least the first five frames that your game is turned on.<br /></div><br />That's true for the operator of the power button; however, if there's a crowd of spectators, I want to deliver the most professional presentation possible. That one frame could make the difference between a fun party and a trip to the emergency room following an epileptic seizure. <img src="http://forums.nesdev.com/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />But in this particular case, it seems like a no-go. Oh well, no biggie.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3719">SecretServiceDude</a> — Mon Nov 03, 2008 7:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-11-03T05:57:51-07:00</updated>
<published>2008-11-03T05:57:51-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39513#p39513</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39513#p39513"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39513#p39513"><![CDATA[
Players will be looking at the NES's power button, not the TV, for at least the first five frames that your game is turned on.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Nov 03, 2008 5:57 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[smkd]]></name></author>
<updated>2008-11-03T05:38:29-07:00</updated>
<published>2008-11-03T05:38:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39509#p39509</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39509#p39509"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39509#p39509"><![CDATA[
<em>I thought that you said PPU writes were ignored for the first frame?</em><br /><br />yeah what's up with that.<br /><br />@servicedude: I remember reading that if the ppu address lies in the palette ram, and the screen is disabled, it displays the color pointed to in palette ram.  So that would ensure that the display color is the one that has just been written (col 0).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3295">smkd</a> — Mon Nov 03, 2008 5:38 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[SecretServiceDude]]></name></author>
<updated>2008-11-03T05:19:41-07:00</updated>
<published>2008-11-03T05:19:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39508#p39508</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39508#p39508"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39508#p39508"><![CDATA[
<div class="quotetitle">blargg wrote:</div><div class="quotecontent"><br />If I'm reading my notes/the Wiki right, you can write to $2006 and $2007 immediately after power, so you can set the screen to black immediately at power. Something like this should work:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #$3F ; VADDR = $3F00<br />sta $2006<br />lda #$00<br />sta $2006<br />lda #$0F ; set first entry to black<br />sta $2007<br />lda #0 ; VADDR = 0<br />sta $2006<br />sta $2006</div><br /></div><br />I gave your code a shot, but unfortunately it didn't work.<br /><br />Out of curiosity, what's the significance of setting the PPU address back to zero? Is that considered good form?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3719">SecretServiceDude</a> — Mon Nov 03, 2008 5:19 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2008-11-03T04:50:58-07:00</updated>
<published>2008-11-03T04:50:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39507#p39507</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39507#p39507"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39507#p39507"><![CDATA[
<div class="quotetitle">blargg wrote:</div><div class="quotecontent"><br />If I'm reading my notes/the Wiki right, you can write to $2006 and $2007 immediately after power, so you can set the screen to black immediately at power. Something like this should work:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #$3F ; VADDR = $3F00<br />sta $2006<br />lda #$00<br />sta $2006<br />lda #$0F ; set first entry to black<br />sta $2007<br />lda #0 ; VADDR = 0<br />sta $2006<br />sta $2006</div><br /></div><br /><br />I thought that you said PPU writes were ignored for the first frame?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Mon Nov 03, 2008 4:50 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2008-11-02T22:12:21-07:00</updated>
<published>2008-11-02T22:12:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39503#p39503</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39503#p39503"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39503#p39503"><![CDATA[
If I'm reading my notes/the Wiki right, you can write to $2006 and $2007 immediately after power, so you can set the screen to black immediately at power. Something like this should work:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #$3F ; VADDR = $3F00<br />sta $2006<br />lda #$00<br />sta $2006<br />lda #$0F ; set first entry to black<br />sta $2007<br />lda #0 ; VADDR = 0<br />sta $2006<br />sta $2006</div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Sun Nov 02, 2008 10:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2008-11-02T13:49:28-07:00</updated>
<published>2008-11-02T13:49:28-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39487#p39487</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39487#p39487"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39487#p39487"><![CDATA[
Yeah that method is great and almost compulary. I also use a flag so the update is optionnal, because sometimes I prefer having other PPU updates and not the palette during the VBlank time.<br />As long as you set the PPU adress to $3f00 imediately after writing to the palette you should be fine. (you're sure the background color displayed is the desired one).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Nov 02, 2008 1:49 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2008-11-02T12:08:00-07:00</updated>
<published>2008-11-02T12:08:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39483#p39483</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39483#p39483"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39483#p39483"><![CDATA[
Also it seems strange, but I believe the color shown for the background is actually the one being pointed to by $2006.  So if light green is the last color written to your palette initially, I'm thinking if the screen is off and you do nothing else with $2006/$2007 for a while, that will be the background color during that time.<br /><br />I've done all kinds of weird stuff with the palettes in tests, trying to get more colors, and I learned that if you want a 'clean' palette update that you need to be in vblank or hblank.  So the way Roth said is best, it's what I do also, just keep a buffer and blast it into VRAM on every NMI.  It's what a lot (most?) of commercial games do too (I've seen many NMI routines while ripping NSFs, heheh <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> ).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Sun Nov 02, 2008 12:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Roth]]></name></author>
<updated>2008-11-02T06:53:12-07:00</updated>
<published>2008-11-02T06:53:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39473#p39473</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39473#p39473"/>
<title type="html"><![CDATA[Setting the background color on the first frame after reset]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4527&amp;p=39473#p39473"><![CDATA[
Ooh! Maybe this will work for you, as yesterday I went through and rewrote how I handle palettes, so I can easily change the colors in my main loop while not having to worry about turning off the PPU and what-not. I finally figured out that it's possible to have some space set aside in RAM for the palette, and pull that in during every NMI. Maybe you could use the same sort of thing in this way: Have the first time you pull in a 'palette' be all $0f for your black, and the next frame write the actual palette to RAM, which will then be pulled in by the NMI.<br /><br />If you end up using this method, just make sure you set $2006 back to it's original state before the NMI happened, which you can do with some reserved bytes.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=174">Roth</a> — Sun Nov 02, 2008 6:53 am</p><hr />
]]></content>
</entry>
</feed>
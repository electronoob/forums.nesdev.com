<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Is NES/Famicom detection possible?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Is NES/Famicom detection possible?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=17562">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=17562</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>7</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>orlaisadog</b> [ Fri Jul 20, 2018 11:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">that I go through an entire post without understanding a single word of it! Seriously, it could just as well be written in Polish and I would have gotten just as much information from it.</div><br />I seem to have a  habit of using quotes from you, tokumaru...<br />By the way, I mean the one lidnariq linked.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Jul 20, 2018 12:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I did not write that!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri Jul 20, 2018 12:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You did but it was 5 years ago and in a different context:<br /><!-- l --><a class="postlink-local" href="https://forums.nesdev.com/viewtopic.php?p=122051#p122051">viewtopic.php?p=122051#p122051</a><!-- l -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>orlaisadog</b> [ Fri Jul 20, 2018 1:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well done on finding the post

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Jul 20, 2018 2:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Holy crap!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Fri Jul 20, 2018 3:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />OT: I miss blargg. :(

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Pokun</b> [ Fri Jul 20, 2018 4:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm with Rainwarrior. Tepple's system detecting program is very cool and I like it very much, but I'm also not sure how it could be useful for normal homebrew. Defaulting the language wouldn't be very useful since so many people have Famicoms outside Japan, and PAL systems and Famiclones are in all sorts of countries. This is a case when computer programs are trying to be &quot;smart&quot; and end up irritating the user because it doesn't work as it should.<br /><br />Things like controller II START and SELECT buttons, microphone and double zappers are problems that are probably best avoided by never assuming the user have access to all that. If a game is using the microphone, just make sure there are another way to do the same thing without the microphone (like in Takeshi no Chousenjou: Press DOWN and A buttons on Controller II and after that the A button on Controller II will act as shouting into the mic).<br /><br />NTSC, PAL, Famiclone and RGB PPU detection is probably far more useful as it could default some necessary settings that may not be clear for the user. But that would also require access to adjust these settings manually in case of being &quot;smart&quot; doesn't work. Personally I made settings for PAL pitch, PAL speed, PAL tint, duty cycle swap and RGB tint so the user can mix and match those settings depending on needs.<br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Seriously though, there are a few characteristics that can only be found in Famicoms, such as the inability to read from OAM, but that's just because the Famicom is older and the earlier units used older revisions of the PPU and CPU, but after the NES was introduced, they probably shared the exact same chips.</div>Famicom's with the earlier APU (without looped noise mode) are seemingly quite rare since Nintendo took back most of the earliest square button systems. The PPU where $2004 being write only is probably more common though. Most Famicoms I've seen are HVC-CPU-05 or later, and they usually have the newer CPU but maybe about half have the newer PPU.<br /><br /><div class="quotetitle">orlaisadog wrote:</div><div class="quotecontent">Most of the time? Just assume it's a normal NES, which is most common! Simple!</div>Not a chance! 60-pin systems (non-Nes) are far more common.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri Jul 20, 2018 5:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Pokun wrote:</div><div class="quotecontent">Famicom's with the earlier APU (without looped noise mode) are seemingly quite rare since Nintendo took back most of the earliest square button systems. The PPU where $2004 being write only is probably more common though. Most Famicoms I've seen are HVC-CPU-05 or later, and they usually have the newer CPU but maybe about half have the newer PPU.<br /></div>To spell this out explicitly:<br />1- 2A03letterless has no tonal noise<br />2- 2A03E,G,H, 2A07 and 2A07A have tonal noise<br /><br />3- 2C02A,B,C,D,E, 2C03, 2C04, 2C05 cannot read from $2004<br />4- 2C02G can, but writes to $2003 corrupt sprite memory<br />5- 2C07, 2C07A can both read and write to $2004, writes to $2003 work as intended, but sprite memory is inaccessible sometimes, regardless of whether a picture is being drawn<br />6- 2C02H - who knows<br /><br /><div class="quotetitle">Pokun wrote:</div><div class="quotecontent">Not a chance! 60-pin systems (non-Nes) are far more common.<br /></div>Over the years, there <em>might</em> be comparable numbers of 2C02-based and cartridge-accepting famiclone systems. Wikipedia claims 62M authentic NESes/Famicom, of which more than half are in the US, more than a third are in Japan, and the remaining 1/7th are probably the authentic PAL consoles.<br /><br />On the other hand, we know of more than <a href="http://ultimateconsoledatabase.com/famiclones.htm" class="postlink">377</a> famiclones, and I bet none sold fewer than 50k units. 377Â·50k=18M all by itself, comparable to the number of authentic Famicoms.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Pokun</b> [ Fri Jul 20, 2018 8:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, so in other words it's not very simple at all.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>orlaisadog</b> [ Sat Jul 21, 2018 12:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Pokun wrote:</div><div class="quotecontent">PAL systems</div><br />What do you mean? How does that affect it? Personally I'd set PAL language to English, but I live in England so I might be biased.<br /><br /><div class="quotetitle">Pokun wrote:</div><div class="quotecontent"><div class="quotetitle">orlaisadog wrote:</div><div class="quotecontent">Most of the time? Just assume it's a normal NES, which is most common! Simple!</div>Not a chance! 60-pin systems (non-Nes) are far more common.</div><br />I meant NES-001 vs NES-101. Also that was a joke.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>orlaisadog</b> [ Sat Jul 21, 2018 12:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Also, if we're so concerned about these clones (more than the originals) should we call this site &quot;NesCloneDev&quot;?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Pokun</b> [ Sat Jul 21, 2018 9:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's just that there are many people growing up with clones and still use them, and their behaviour is well known, so there is really no reason not to support them and limit your audience.<br /><br />I'm not talking about languages, as I said that is very hard to guess for the user (generally using simple English in menus and such should be fine I think, that's what early Famicom games did anyway despite Japanese not being good at English). I'm talking about hardware differences that you as the programmer needs to consider if you want your game to behave the same on all systems.<br />Some of the basic differences are:<br />-PAL systems runs in 50 Hz (so you have to make your game run faster, including music tempo or it will sound different on PAL systems).<br />-PAL system has different sound frequencies (so you have to use a separate pitch table for your music notes or your sound will sound different on PAL systems).<br />-PAL swaps green and red color emphasis (so you have to consider this if you use the emphasis feature).<br />-PAL has longer vblank (just don't use the extra vblank time if you want your game to be NTSC-compatible)<br />-PAL requires OAM-DMA to happen early in vblank (just do your OAM-DMA early and you are good to go for all systems).<br />-UMC-based Famiclones has a mix of NTSC and PAL settings. For example they use PAL speed and NTSC pitch.<br />-UMC-based Famiclones swaps duty cycle 25% and 50% settings for pulse channels (so you have to make your sound engine swap these automatically if swapped duty cycle option is checked).<br />-RGB PPU uses color emphasis differently (so you might not want to use it the same way if the user has a Famicom Titler or other RGB-PPU machine).<br /><br />My approach is to have all required settings as selectable options in an options menu. Then the player can for example turn on PAL speed and turn off PAL pitch if he has a Famiclone. If he has a PAL NES he would turn on both, and turn off both if he has NTSC and so on.<br /><br /><div class="quotetitle">orlaisadog wrote:</div><div class="quotecontent"><div class="quotetitle">Pokun wrote:</div><div class="quotecontent"><div class="quotetitle">orlaisadog wrote:</div><div class="quotecontent">Most of the time? Just assume it's a normal NES, which is most common! Simple!</div>Not a chance! 60-pin systems (non-Nes) are far more common.</div><br />I meant NES-001 vs NES-101. Also that was a joke.</div>I see.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Sat Jul 21, 2018 11:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I am not sure why you need to tell the difference between NES and AV Famicom, but telling the difference from NES and RF Famicom would be more useful, because RF Famicom has a microphone and does not have player 2 START and SELECT button.<br /><br />The only thing about AV Famicom is that the controller ports don't connect all of the pins, but this is probably unimportant.<br /><br />The fact that the cartridge doesn't fit also seems unimportant (an adapter will be used if needed), although if you are making a NES cartridge, maybe you can detect from the SYSTEM CLK pin if you need to tell the difference from NES and AV Famicom.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>orlaisadog</b> [ Sun Jul 22, 2018 4:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Pokun wrote:</div><div class="quotecontent">My approach is to have all required settings as selectable options in an options menu. Then the player can for example turn on PAL speed and turn off PAL pitch if he has a Famiclone.</div><br />That isn't very user-friendly. You also can't detect 377 Famiclones.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Jul 22, 2018 5:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Is NES/Famicom detection possible?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">zzo38 wrote:</div><div class="quotecontent">The only thing about AV Famicom is that the controller ports don't connect all of the pins, but this is probably unimportant.</div><br />Except in something like <em>Zap Ruder</em> that's designed for two Zappers. In addition, Famicom plays mapper audio; NES doesn't without a mod, and I don't know what 72-pin famiclones do.<br /><br /><div class="quotetitle">zzo38 wrote:</div><div class="quotecontent">although if you are making a NES cartridge, maybe you can detect from the SYSTEM CLK pin if you need to tell the difference from NES and AV Famicom.</div><br />I'm not sure 72-pin famiclones even pass SYSTEM CLK.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>7</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - I've been thinking, AND ... here's what happened (or not)</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - I've been thinking, AND ... here's what happened (or not)" href="http://forums.nesdev.com/feed.php?f=12&amp;t=17166" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:27 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />

	<div class="forumrules">
		
			<h3>Forum rules</h3><br />
			Related:<br /><ul><li>For making cartridges of your Super NES games, see <a href="http://forums.nesdev.com/viewforum.php?f=28" class="postlink">Reproduction</a>.</li></ul>
		
	</div>

	<br clear="all" />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=17166">I've been thinking, AND ... here's what happened (or not)</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=17166"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 15 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=17166&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=17166&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=17166&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215571"></a>
				<b class="postauthor">Ramsis</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215571">I've been thinking, AND ... here's what happened (or not)</a></div><div style="float: right;"><a href="./viewtopic.php?p=215571#p215571"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2018 3:31 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5345_1429818722.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jul 01, 2012 6:44 am<br /><b>Posts:</b> 341<br /><b>Location:</b> Lion's den :3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, so this has been driving me nuts for days. <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /><br /><br />Though I'm still convinced it's just me, myself and/or I (it always has, so it's got to be this time, too!), I thought I'd seek professional help before I involuntarily zero out, you know, the zero page. <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> <br /><br />Consider this bit of SNES-65816, native-mode code (Accu is 8 bits, X/Y are 16 bits):<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">CardCheckError:<br />&nbsp; &nbsp;lda&nbsp; &nbsp;CARDSTATUS&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get card status, check for general error<br />&nbsp; &nbsp;sta&nbsp; &nbsp;errorCode<br />&nbsp; &nbsp;and&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;cmp&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;beq&nbsp; &nbsp;CardError<br />&nbsp; &nbsp;rts<br /><br />CardError:<br />&nbsp; &nbsp;ClearLine 21<br />&nbsp; &nbsp;ClearLine 22<br />&nbsp; &nbsp;ClearLine 23<br />&nbsp; &nbsp;SetCursorPos 21, 1<br /><br />&nbsp; &nbsp;ldy&nbsp; &nbsp;#errorCode<br /><br />&nbsp; &nbsp;PrintString &quot;Error $%x - CF card status&quot;<br /></div><br />FYI, <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> is a 24-bit address, <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">errorCode</tt> is a direct page variable, and <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">ClearLine</tt>, <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">SetCursorPos</tt> and <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">PrintString</tt> are all macros, none of which messes with the contents of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">errorCode</tt>.<br /><br />Those who know me might recognize this as a code snippet from my unofficial SNES PowerPak firmware. What you might not know is that I'm currently working on v3.01, which will feature a lot of improvements over v3.00. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />So, here's the deal: As <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CardCheckError</tt> gets called very often (i. e., more than every 512 bytes of data transferred to or from the CF card), I thought it would be a good idea to optimize this subroutine a tiny little bit.<br /><br />Just like so:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">CardCheckError:<br />&nbsp; &nbsp;lda&nbsp; &nbsp;CARDSTATUS&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get card status, check for general error<br />&nbsp; &nbsp;sta&nbsp; &nbsp;errorCode<br />&nbsp; &nbsp;and&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;bne&nbsp; &nbsp;CardError<br />&nbsp; &nbsp;rts<br /></div><br />As there's only the LSB, aka <span style="text-decoration: underline">one single bit</span> being tested, I thought it'd be nothing to write home about.<br /><br />We-heh-heh-hell. Yes it is. <img src="./images/smilies/icon_exclaim.gif" alt=":!:" title="Exclamation" /> <br /><br />The routine being shortened like this, the PowerPak would give me a card error message right upon power-up.<br /><br />Strange? Yes, but wait 'til you hear this ...<br /><br />It would even laugh me in the face by telling me<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Error $50 - CF card status</div><br /><br />Can you believe it? Bit 0 of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">errorCode</tt> is clear/zero, as it apparently has been all the time, and still, the branch was taken regardless whenever I went from <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">AND #1/CMP #1/BEQ SOMEWHERE</tt> to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">AND #1/BNE SOMEWHERE</tt>.<br /><br />WTF's happening here?? <img src="./images/smilies/icon_question.gif" alt=":?:" title="Question" /> <br /><br />I spent 3+ hours googling for a 65X(X)X AND quirk, but didn't come up with anything.<br /><br />Please help me, as I'm beginning to lose my sanity over this (but luckily not my mane, which is hairdcoded). <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> <br /><br />Thanks!!</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Some of my projects:<br /><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=12317" class="postlink">Furry RPG!</a><br /><a href="http://www.manuloewe.de/main/index.php?/pages/snespowerpak.html" class="postlink">Unofficial SNES PowerPak firmware</a><br />(See my <a href="https://github.com/Ramsis-SNES/" class="postlink">GitHub profile</a> for more)<br /></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5345"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215581"></a>
				<b class="postauthor">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215581">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=215581#p215581"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2018 5:42 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 3477<br /><b>Location:</b> Mountain View, CA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">There's nothing wrong with your understanding the opcodes.  But I'll go over them anyway:<br /><br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda</tt> modifies N/Z flags, as you know.<br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">sta</tt> does not modify N/Z flags, as you know.<br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">and</tt> modifies N/Z flags appropriately -- if MSB of result is set, N=1 else N=0.  If result is zero, Z=1 else Z=0.<br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">cmp</tt> modifies N/Z/C -- it operates similar to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">sbc</tt> but there's no saving of the result, instead only flags get changed.  If MSB of result set, N=1 else N=0.  If result is zero, Z=1 else Z=0.  If borrow is required (accumulator value &gt;= result), C=1, else C=0.<br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">bne</tt> checks against Z flag; if Z=1, branch is taken.<br /><br />You don't state where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> lives, but you imply it's in direct page because you propose &quot;zeroing out zero page&quot; as a solution.  Keep reading.<br /><br />My gut feeling is that your <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda CARDSTATUS</tt> isn't using 24-bit addressing but instead absolute or direct page addressing, resulting in a value read from wherever B is at the time.  It varies per assembler, but I would expect to see <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda.l CARDSTATUS</tt> or some assembler equivalent.  Generate an assembly listing if you can and verify it's using 24-bit addressing; if you can't generate a listing, stick some identifier bytes near the routine (like <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.db $ca,$fe,$ba,$be</tt>, open up the resulting ROM in a hex editor, search for $cafebabe, then manually check each opcode of the routine in question to see which is being used.<br /><br />opcode <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">$ad</tt> = <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda</tt> absolute (16-bit)<br />opcode <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">$af</tt> = <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda</tt> absolute long (24-bit)<br />opcode <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">$a5</tt> = <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda</tt> direct page<br /><br />And as a general mode of operation -- if applicable, of course! -- your program should zero direct page / RAM anyway.  I won't harp on that though, everyone's needs/situations are different.<br /><br />Other weird things that might be be happening, but I have no way to confirm this (only you would know):<br /><br />* Possibly where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> is resides somewhere around where the stack pointer might be (or might overflow or underflow into)<br />* Possibly NMI routine is modifying some part of memory and changing values to something you don't expect<br />* Possibly there's a general bug in your program elsewhere writing a value to where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> lives without you realising it.  A common situation is a program that intends to write an 8-bit value to direct page (say address $0123), but the accumulator is 16-bit, so it writes to addresses $0123 and $0124 instead; if <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> was at $0124... you get the idea<br /><br />If this is a program you can run on an emulator, or &quot;simulate&quot; on an emulator through some predetermined ways (i.e. &quot;emulate&quot; the environment/thing you're working with by pre-initialising RAM/etc. with some values), then you could debug it easily (break on reads or writes exactly where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> lives, and/or break on execute on the questionable piece of code).  But on actual hardware, you'd need an ICE.<br /><br />Another option would be to write a small little test program of your own, run it in an emulator with debugging support (ex. bsnes-plus), and step through the code and look at behaviour/registers/bits yourself.  Change the value in RAM before the routine starts then see how it changes.  You get the idea.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215582"></a>
				<b class="postauthor">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215582">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=215582#p215582"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2018 5:57 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 3477<br /><b>Location:</b> Mountain View, CA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">BTW, if you don't believe me, go to <a href="https://skilldrick.github.io/easy6502/" class="postlink">Easy 6502</a> and throw in this code (note the first few commented-out lines):<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; pick one of the below 2:<br />; lda #$ff&nbsp; &nbsp;; this should cause brk to happen (bit 0 = 1)<br />; lda #$00&nbsp; &nbsp;; this should cause a pixel to show up (bit 0 = 0)<br />&nbsp; sta $0f<br /><br />&nbsp; lda #$11&nbsp; &nbsp;; just a bogus value in the accumulator<br /><br />CardCheckError:<br />&nbsp; lda $0f<br />&nbsp; sta $10<br />&nbsp; and #1<br />&nbsp; bne CardError<br /><br />noerror:<br />&nbsp; lda #5&nbsp; &nbsp; &nbsp; &nbsp;; green colour<br />&nbsp; sta $330&nbsp; &nbsp; &nbsp;; graphical RAM<br />&nbsp; jmp noerror<br /><br />CardError:<br />&nbsp; brk<br /></div><br />Then try changing <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">and #1 / bne CardError</tt> to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">and #1 / cmp #1 / beq CardError</tt> and note that there's no difference in behaviour.  You can use the disassembler and/or the debugger (see checkbox under little graphical window) + step through your code and see what happens.  The assembler does not support binary immediate syntax (i.e. <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">#%</tt>).<br /><br />This is a simple 6502 emulator, but the 65816 is identical in opcode behaviour in this case, so it's a valid test.<br /><br />Edit: fix URL to Easy 6502.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> on Wed Mar 21, 2018 10:46 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215593"></a>
				<b class="postauthor">Oziphantom</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215593">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=215593#p215593"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 20, 2018 9:51 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Feb 07, 2017 2:03 am<br /><b>Posts:</b> 511
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;ldy&nbsp; &nbsp;#errorCode<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8250"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215619"></a>
				<b class="postauthor">ReaperSMS</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215619">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=215619#p215619"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Mar 21, 2018 10:40 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:07 pm<br /><b>Posts:</b> 162
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">That is probably just loading a pointer to errorCode into Y, that gets parsed out by the Printf-like macro afterwards.<br /><br />A disassembly of the two cases, with the actual instruction bytes interspersed, might indeed shed some light on things.<br /><br />Is this function anywhere near a 64K boundary?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215880"></a>
				<b class="postauthor">Ramsis</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215880">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=215880#p215880"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 27, 2018 2:45 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5345_1429818722.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jul 01, 2012 6:44 am<br /><b>Posts:</b> 341<br /><b>Location:</b> Lion's den :3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thank you all, especially koitsu, for your invaluable feedback! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br />But, according to the Furry saying™, &quot;Sometimes an octopus sees more than a primate's visual field can cover,&quot; after days and days of reflecting the matter I still don't get what's happening, and why <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">AND #1/CMP #1/BEQ SOMEWHERE</tt> in this case yields a different result (i. e., carry bit) than <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">AND #1/BNE SOMEWHERE</tt> does.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">You don't state where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> lives</div><br />Yes I did. Please re-read my original post.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">but you imply it's in direct page</div><br />No.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">because you propose &quot;zeroing out zero page&quot; as a solution.</div><br />*Sigh* That was a silly joke. Sorry about confusing the confu page out of you. <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> <br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">My gut feeling is that your <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda CARDSTATUS</tt> isn't using 24-bit addressing</div><br />But it duuuuzz (see above) <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> <br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">Other weird things that might be be happening, but I have no way to confirm this (only you would know):</div><br />No, please. No. The mothf** eh code has been on <a href="https://github.com/Ramsis-SNES/snes-powerpak-firmware-v3" class="postlink">GitHub</a> for quite some time now, so no, not just me but hole wurlde, you n0.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">* Possibly where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> is resides somewhere around where the stack pointer might be (or might overflow or underflow into)<br />* Possibly NMI routine is modifying some part of memory and changing values to something you don't expect</div><br />Checked it all, but unfortunately, no.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">* Possibly there's a general bug in your program elsewhere writing a value to where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> lives without you realising it.</div><br />Have thought of this before, but like it or not ... no. <br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">A common situation is a program that intends to write an 8-bit value to direct page (say address $0123), but the accumulator is 16-bit, so it writes to addresses $0123 and $0124 instead; if <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> was at $0124... you get the idea</div><br />Exactly. But ... no. <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> <br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">If this is a program you can run on an emulator, or &quot;simulate&quot; on an emulator through some predetermined ways (i.e. &quot;emulate&quot; the environment/thing you're working with by pre-initialising RAM/etc. with some values), then you could debug it easily (break on reads or writes exactly where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CARDSTATUS</tt> lives, and/or break on execute on the questionable piece of code).  But on actual hardware, you'd need an ICE.</div><br />You sh***ing me? <strong><span style="text-decoration: underline">I've been running this on actual SNES PowerPak hardware ever since.</span></strong><br /><br />@Oziphantom No, it's fine (even though the comments in lib_strings.inc.asm are completely obsolete, and have been ever since ...)<br /><br />@ReaperSMS<br /><br /><div class="quotetitle">ReaperSMS wrote:</div><div class="quotecontent">That is probably just loading a pointer to errorCode into Y, that gets parsed out by the Printf-like macro afterwards.</div><br />This.<br /><br /><div class="quotetitle">ReaperSMS wrote:</div><div class="quotecontent">Is this function anywhere near a 64K boundary?</div><br />Good idea, will check on that. (It's probably not though ...)</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Some of my projects:<br /><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=12317" class="postlink">Furry RPG!</a><br /><a href="http://www.manuloewe.de/main/index.php?/pages/snespowerpak.html" class="postlink">Unofficial SNES PowerPak firmware</a><br />(See my <a href="https://github.com/Ramsis-SNES/" class="postlink">GitHub profile</a> for more)<br /></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5345"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215881"></a>
				<b class="postauthor">ReaperSMS</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215881">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=215881#p215881"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 27, 2018 3:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:07 pm<br /><b>Posts:</b> 162
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I don't have a great feel for '816 accum/index bit shenanigans, but what I see from poking at github:<br /><br /><!-- m --><a class="postlink" href="https://github.com/Ramsis-SNES/snes-powerpak-firmware-v3/blob/master/src/lib_variables.asm">https://github.com/Ramsis-SNES/snes-pow ... iables.asm</a><!-- m --> has most of the relevant definitions<br /><br />CARDSTATUS is defined as $A0800E<br />errorcode looks to be defined as $0002<br /><br /><!-- m --><a class="postlink" href="https://github.com/Ramsis-SNES/snes-powerpak-firmware-v3/blob/master/src/main_cf_interface.inc.asm">https://github.com/Ramsis-SNES/snes-pow ... ce.inc.asm</a><!-- m --> has the suspicious code<br /><br />accumulator appears to be assumed to be 8-bit here<br />index looks like it should be 16-bit for the whole file<br /><br />a quick look didn't reveal any spot that might have made it to CardCheckError with a 16-bit accumulator, but if it did it would probably be doing much stranger things.<br /><br />a dump of the bytes starting at CardCheckError would still probably be useful</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215884"></a>
				<b class="postauthor">nocash</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215884">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=215884#p215884"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 27, 2018 8:48 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Feb 24, 2012 12:09 pm<br /><b>Posts:</b> 602
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">If you are sure that &quot;Accu is 8 bits, X/Y are 16 bits&quot; then you can sefely initialize it as so at the begin of the function. If you are still seeing the same error then you were probably right about it being initialized as so.<br /><br />Another test would be to replace the &quot;bne CardError&quot; opcode by two dummy bytes (eg. two NOPs, or better: some 2-byte dummy instruction that has the same value as &quot;bne CardError&quot; in the second byte. If you still get the error then you know that something is wrong.<br /><br />As already suggested by 1-2 people: You should really disassemble the binary code instead of just relying on your source code.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5211"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p216012"></a>
				<b class="postauthor">Ramsis</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p216012">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=216012#p216012"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 30, 2018 3:08 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5345_1429818722.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jul 01, 2012 6:44 am<br /><b>Posts:</b> 341<br /><b>Location:</b> Lion's den :3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thank you all (again, esp. koitsu).<br /><br />What you guys all don't seem to realize though (good on you though, as working my way through the hell of a mess of the original SNES PowerPak firmware's code has been, and still is, a PITA, as opposed to my little thread here) is that <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">CardCheckError</tt> isn't just any kind of subroutine with a presumed A8/16 issue. Instead, it's called (not only, but especially) every f**king 512 bytes (i. e., every sector) read from or written to the CF card.<br /><br />So we know it's good in one case, but it immediately fails in the other.<br /><br />IOW: I change <div class="codetitle"><b>Code:</b></div><div class="codecontent">AND #1/CMP #1/BEQ SOMEWHERE</div> to <div class="codetitle"><b>Code:</b></div><div class="codecontent">AND #1/BNE SOMEWHERE</div>, and I'm f***ed. <br /><br />To rephrase this: Although the SNES PowerPak is known to work fine with <div class="codetitle"><b>Code:</b></div><div class="codecontent">AND #1/CMP #1/BEQ SOMEWHERE</div> called EVERY 512 BYTES read from the card, it refuses to even boot with <div class="codetitle"><b>Code:</b></div><div class="codecontent">AND #1/BNE SOMEWHERE</div>.<br /><br />Magic!<br /><br />Or (hopefully not, but) just me (again). <img src="./images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very sad" /></div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Some of my projects:<br /><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=12317" class="postlink">Furry RPG!</a><br /><a href="http://www.manuloewe.de/main/index.php?/pages/snespowerpak.html" class="postlink">Unofficial SNES PowerPak firmware</a><br />(See my <a href="https://github.com/Ramsis-SNES/" class="postlink">GitHub profile</a> for more)<br /></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5345"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p216017"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p216017">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=216017#p216017"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 30, 2018 4:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 7391<br /><b>Location:</b> Seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">When I'm debugging embedded situations, the order I do things, from &quot;easier to figure out what's going on&quot; to &quot;more guaranteed to work&quot;, is:<br />* Use a debugging simulator<br />* Use a captive debugger<br />* LED debugging<br />* LED debugging and a logic analyzer<br /><br />The SNES does have a very small number of GPIO pins, and one's even present on the controller ports.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p216019"></a>
				<b class="postauthor">Nicole</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p216019">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=216019#p216019"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 30, 2018 7:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Mar 27, 2016 7:56 pm<br /><b>Posts:</b> 161
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I can think of a couple things to try.<br /><br />1. Try replacing<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;and&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;cmp&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;beq&nbsp; &nbsp;CardError</div>with<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;and&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;nop<br />&nbsp; &nbsp;nop<br />&nbsp; &nbsp;bne&nbsp; &nbsp;CardError</div>just to make certain there's nothing weird relying on how the code is positioned or its size.<br /><br />2. Instead of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda CARDSTATUS</tt>, try some constant numbers to see how it behaves. What determines which branch it takes? Does it print the correct number?<br /><br />If those fail, my general advice for debugging is this: Tear out every single bit of unrelated code until you have the absolute minimum needed to recreate the bug. Do not trust a single thing, even your print macros. Don't ignore things that &quot;should&quot; work, because the fact is your code <em>doesn't</em> work, or you wouldn't be here.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7476"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p216032"></a>
				<b class="postauthor">ReaperSMS</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p216032">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=216032#p216032"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 31, 2018 5:42 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:07 pm<br /><b>Posts:</b> 162
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'm feeling generous, so I pulled down the various tools from github and such.<br /><br />wla-65816/wlalink's listing format is rather odd and suspect to the point of being nonsensical<br />main_rommapping.inc.asm produced some link errors, lines 44/46 referenced gameName.gCluster, which didn't exist. changing those to gameName.Cluster got it to get past that.<br /><br />it does seem to generate the correct-looking bytes.<br /><br />I might be hoping for too much, since your debugging approach so far has been you: &quot;LOL THIS DOESN'T WORK&quot; reasonable people: &quot;Have you looked at they bytes?&quot; you: &quot;LOL THIS DOESN'T WORK&quot;, but...<br /><br />does it die in the same fashion if you do<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">CardCheckError:<br />&nbsp; &nbsp;lda CARDSTATUS<br />&nbsp; &nbsp;sta errorCode<br />&nbsp; &nbsp;and #%00000001<br />&nbsp; &nbsp;bne CardError<br />&nbsp; &nbsp;rts<br /><br />CardError:<br />&nbsp; &nbsp;nop<br />&nbsp; &nbsp;nop<br />&nbsp; &nbsp;ClearLine 21 ...<br /></div><br /><br />instead? That keeps the code after aligned, which spits out a rom that only differs in about 8 bytes -- a couple in the timestamp, the new cardcheckerror, and the checksum bytes. If that works, then something is expecting some alignment elsewhere, that is getting screwed up by chopping 2 bytes out of the middle.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p216145"></a>
				<b class="postauthor">Ramsis</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p216145">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=216145#p216145"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 02, 2018 11:10 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5345_1429818722.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jul 01, 2012 6:44 am<br /><b>Posts:</b> 341<br /><b>Location:</b> Lion's den :3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">When I'm debugging embedded situations, the order I do things, from &quot;easier to figure out what's going on&quot; to &quot;more guaranteed to work&quot;, is:<br />* Use a debugging simulator<br />* Use a captive debugger<br />* LED debugging<br />* LED debugging and a logic analyzer<br /><br />The SNES does have a very small number of GPIO pins, and one's even present on the controller ports.</div><br />Thanks, but unfortunately I don't have access to hardware-level based debugging tools. <img src="./images/smilies/icon_sad.gif" alt=":-(" title="Sad" /><br /><br /><div class="quotetitle">Nicole wrote:</div><div class="quotecontent">I can think of a couple things to try.<br /><br />1. Try replacing<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;and&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;cmp&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;beq&nbsp; &nbsp;CardError</div>with<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;and&nbsp; &nbsp;#%00000001<br />&nbsp; &nbsp;nop<br />&nbsp; &nbsp;nop<br />&nbsp; &nbsp;bne&nbsp; &nbsp;CardError</div>just to make certain there's nothing weird relying on how the code is positioned or its size.<br /><br />2. Instead of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda CARDSTATUS</tt>, try some constant numbers to see how it behaves. What determines which branch it takes? Does it print the correct number?<br /><br />If those fail, my general advice for debugging is this: Tear out every single bit of unrelated code until you have the absolute minimum needed to recreate the bug. Do not trust a single thing, even your print macros. Don't ignore things that &quot;should&quot; work, because the fact is your code <em>doesn't</em> work, or you wouldn't be here.</div><br />Thanks indeed, Nicole, for your valuable input. I'll see how things turn out with a few NOPs here and there. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br /><div class="quotetitle">ReaperSMS wrote:</div><div class="quotecontent">I'm feeling generous, so I pulled down the various tools from github and such.</div><br />In case of trouble assembling The Source™, I'm usually very responsive, and willing to point out to you what you're doing wrong. You'd have to contact and ask me in the first place though ... <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /> <br /><br /><div class="quotetitle">ReaperSMS wrote:</div><div class="quotecontent">wla-65816/wlalink's listing format is rather odd and suspect to the point of being nonsensical</div><br />Not my fault. Feel free to open an issue <a href="https://github.com/vhelin/wla-dx" class="postlink">wherever</a> if it bothers you that much.<br /><br /><div class="quotetitle">ReaperSMS wrote:</div><div class="quotecontent">main_rommapping.inc.asm produced some link errors, lines 44/46 referenced gameName.gCluster, which didn't exist. changing those to gameName.Cluster got it to get past that.</div><br />*sigh* The current master branch is WIP, so sorry that I forgot to commit some variable renaming stuff. <img src="./images/smilies/icon_wink.gif" alt=";-)" title="Wink" /><br /><br /><div class="quotetitle">ReaperSMS wrote:</div><div class="quotecontent">it does seem to generate the correct-looking bytes.</div><br />[irony]Ah. Really. That's so good to know indeed.[/irony]<br /><br /><div class="quotetitle">ReaperSMS wrote:</div><div class="quotecontent">I might be hoping for too much, since your debugging approach so far has been you: &quot;LOL THIS DOESN'T WORK&quot; reasonable people: &quot;Have you looked at they bytes?&quot; you: &quot;LOL THIS DOESN'T WORK&quot;, but...</div><br />Right. <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> <br /><br />But let's not forget:<br /><br /><div class="quotetitle">ReaperSMS wrote:</div><div class="quotecontent">it does seem to generate <strong>the correct-looking bytes</strong>.</div><br />*plonk*</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Some of my projects:<br /><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=12317" class="postlink">Furry RPG!</a><br /><a href="http://www.manuloewe.de/main/index.php?/pages/snespowerpak.html" class="postlink">Unofficial SNES PowerPak firmware</a><br />(See my <a href="https://github.com/Ramsis-SNES/" class="postlink">GitHub profile</a> for more)<br /></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5345"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p216150"></a>
				<b class="postauthor">ReaperSMS</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p216150">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=216150#p216150"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 02, 2018 1:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:07 pm<br /><b>Posts:</b> 162
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Did you try it with the extra nops, as suggested, or not?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p216155"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p216155">Re: I've been thinking, AND ... here's what happened (or not</a></div><div style="float: right;"><a href="./viewtopic.php?p=216155#p216155"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 02, 2018 1:39 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">He just said he was going to.<br /><br />This issue reminds me of an HDMA table I made once, using <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.db</tt> to write it out in code.  It was only a few bytes long, and it <em>would not work</em> unless I added a dummy byte (can't remember the value) right after the very first byte.  To this day I have no idea why, and every other HDMA table I've made has worked great.  Programming can be tricky...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=17166"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=17166"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 15 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="17166" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
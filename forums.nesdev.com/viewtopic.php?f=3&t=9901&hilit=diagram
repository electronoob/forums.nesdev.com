<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Feedback wanted on SVG PPU frame timing diagram</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESemdev" href="http://forums.nesdev.com/feed.php?f=3" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Feedback wanted on SVG PPU frame timing diagram" href="http://forums.nesdev.com/feed.php?f=3&amp;t=9901" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sat Jun 07, 2014 11:59 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram">Feedback wanted on SVG PPU frame timing diagram</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=9901"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 80 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=3&amp;t=9901&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=3&amp;t=9901&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p109056"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109056">Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109056#p109056"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 08, 2013 10:44 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hello,<br /><br />I'm new to the forums but have been lurking in #nesdev for a few months. Making yet another emulator. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />The information on PPU frame events and timing on the wiki felt a bit scattered (and is contradictory in a few spots :/), so I put together an SVG <span class="posthilit">diagram</span> in Inkscape to get an overview and help my own understanding. I think it might be useful to other people too, so I'm putting it here. Tell me what you think. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Link to SVG file: <!-- m --><a class="postlink" href="https://www.dropbox.com/s/84k9ypwct3zwomu/ppu.svg">https://www.dropbox.com/s/84k9ypwct3zwomu/ppu.svg</a><!-- m --><br /><br />Edit: Rearranged things slightly for better clarity.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<a href="./download/file.php?id=451&amp;mode=view"><img src="./download/file.php?id=451&amp;t=1" alt="ppu.png" /></a><br />
			<span class="gensmall">ppu.png [ 422.51 KiB | Viewed 778 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5911">ulfalizer</a> on Sat Mar 09, 2013 7:28 am, edited 2 times in total.</span>
						

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p109058"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109058">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109058#p109058"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 08, 2013 11:30 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here's a few questions that came up while I was drawing it btw:<br /><br />1. <!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/Skinny">http://wiki.nesdev.com/w/index.php/Skinny</a><!-- m --> says that the horizontal position in v is incremented at dot 256:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If rendering is enabled, the PPU increments the horizontal position in v many times across the scanline, it begins at dots 328 and 336, and will continue through the next scanline at 8, 16, 24... 240, 248, 256 (every 8 dots across the scanline until 256).</div><br /><br />Is that a typo, or are both the vertical <strong>and</strong> the horizontal position updated at dot 256? Doesn't matter that much since the horizontal bits are reloaded at dot 257 anyway, but might as well get it right.<br /><br />2. When is the secondary OAM cleared? Only at the beginning of the visible scanlines?<br /><br />3. How are the two-cycle VRAM fetches split up? What addresses appear on the bus during each cycle? (I think it has to do with loading the VRAM address in two steps, but not sure.)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p109072"></a>
				<b class="postauthor">Quietust</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109072">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109072#p109072"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 09, 2013 10:22 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 10:59 pm<br /><b>Posts:</b> 1167
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Some of the information on that page predates analysis of <a href="http://www.qmtpro.com/~nes/chipimages/visual2c02/" class="postlink">Visual2C02</a>, so there are actually some minor differences:<br /><br />1. The visible scanlines are 0-239, VBLANK is scanlines 241-260, the prerender scanline is 261, and the postrender scanline is 240.<br />2. The fetches are actually offset by 1 cycle: 0 is idle, 1-2 is NT byte, 3-4 is AT byte, 5-6 is low BG tile, 7-8 is high BG tile (and the H increment happens during 8), etc. The last 2 fetches in the scanline happen at 321-328 (with H increment during 328) and 329-336 (with H inc at 336), and two garbage fetches at 337-338 and 339-340 (and an idle cycle at 0 where all it does is pulse the Address Latch Enable output).<br /><br />Regarding your questions:<br />1. Yes, that is correct - cycle 256 increment both H <strong>and</strong> V, and cycle 257 reloads H.<br />2. Secondary OAM is cleared during cycles 1-64 of every scanline where &quot;rendering&quot; fetches are done (including the pre-render scanline), evaluation occurs during cycles 65-256, and then the fetches happen at 257-264 (with the first 4 cycles being reads from secondary OAM and the second 4 cycles being the tile reads from VRAM), 265-272, 273-280, 281-288, 289-296, 297-304, 305-312, and 313-320.<br />3. For VRAM reads during rendering, during the 1st cycle the PPU outputs the address it's going to read and raises the ALE (Address Latch Enable) line for the first half of the cycle, and during the 2nd cycle it pulls /RD low for the entire cycle and performs the read. Reading or writing $2007 is notably different - after your $2007 access finishes, it waits 1 full cycle, then it outputs the address and raises ALE for one full cycle, then lowers it for one full cycle, then spends a 3rd cycle performing the read or write (with /RD or /WR pulled low for the entire cycle).</div>

					
						<div class="postbody"><br />_________________<br />Quietust, QMT Productions
<br />P.S. If you don't get this note, let me know and I'll write you another.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p109075"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109075">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109075#p109075"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 09, 2013 10:49 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Before I update the <span class="posthilit">diagram</span>: Where does the skipped tick occur? On the first pixel of the first scanline?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p109119"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109119">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109119#p109119"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 12:28 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here's an updated version based on the new information. Tell me if you spot any errors.<br /><br />The linked SVG file has been updated as well.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<a href="./download/file.php?id=452&amp;mode=view"><img src="./download/file.php?id=452&amp;t=1" alt="ppu.png" /></a><br />
			<span class="gensmall">ppu.png [ 437.49 KiB | Viewed 712 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p109121"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109121">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109121#p109121"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 12:45 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Should be an idle cycle at the beginning of sprite evaluation (I lump secondary OAM clear in with it ATM). Fixed.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<a href="./download/file.php?id=453&amp;mode=view"><img src="./download/file.php?id=453&amp;t=1" alt="ppu.png" /></a><br />
			<span class="gensmall">ppu.png [ 439.37 KiB | Viewed 708 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p109122"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109122">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109122#p109122"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 1:04 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'll separate secondary OAM clear and sprite evaluation, but I have a question first:<br /><br />Is sprite evaluation done at all on the prerender scanline, or just the OAM clear? If it's done, then what prevents it from finding sprites on the first visible scanline?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p109124"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109124">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109124#p109124"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 1:40 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Beannaich noted that the two dummy nametable fetches are both proper nametable fetches (since they're the same fetch as at the beginning of the next scanline), so the last one shouldn't be labeled &quot;AT&quot;. Fixed.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<a href="./download/file.php?id=454&amp;mode=view"><img src="./download/file.php?id=454&amp;t=1" alt="ppu.png" /></a><br />
			<span class="gensmall">ppu.png [ 439.62 KiB | Viewed 697 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p109127"></a>
				<b class="postauthor">WedNESday</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109127">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109127#p109127"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 2:57 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Sep 15, 2005 9:23 am<br /><b>Posts:</b> 1131<br /><b>Location:</b> England
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Should VBLANK be before or after the main 240 scanlines (I know that it doesn't really matter).</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="http://www.jamesturner.de/">http://www.jamesturner.de/</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=191"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p109129"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109129">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109129#p109129"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 3:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">From Quietust's post it looks like the visible scanlines should be first, so the numbering is still off in that respect in my <span class="posthilit">diagram</span>. I'm guessing that's based on how the PPU counts scanlines internally.<br /><br />As far as I've understood, the proper NTSC vblank is 22 scanlines long and includes the prerender and postrender scanlines by the way.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p109131"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109131">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109131#p109131"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 4:01 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Did some tracing with beannich in visual2c02, and it looks like the vblank flag goes high on v/h:241/1 (note: h = 1, not 0), and low on v/h:261/1 (exactly 20 scanlines later).<br /><br />Here's a trace around the beginning of v:241 (cycle, hpos, vpos, various stuff, and then vbl_flag at the end):<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">330088	000	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	0<br />330088	000	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	0<br />330089	000	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	0<br />330089	000	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	0<br />330090	000	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	0<br />330090	000	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	0<br />330091	000	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	0<br />330091	000	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	0<br />330092	001	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	1<br />330092	001	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	1<br />330093	001	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	1<br />330093	001	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	1<br />330094	001	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	1<br />330094	001	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	1<br />330095	001	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	1<br />330095	001	0f1	0000	0802	1e	1	0	1	1	1	0802	0	02	1</div><br /><br />By the way (since this seems undocumented):<br />Additional node names (like vbl_flag in this case) can be found in <!-- m --><a class="postlink" href="http://www.qmtpro.com/~nes/chipimages/visual2c02/nodenames.js">http://www.qmtpro.com/~nes/chipimages/v ... denames.js</a><!-- m -->. These can then be added to 'Trace these too:' (or searched for using 'Find:'). The simulation can be sped up a lot by disabling animations and logging. (Still takes 1h+ to simulate an entire frame though.)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p109134"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109134">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109134#p109134"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 7:47 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Did more tracing in visual 2c02 and figured out some more stuff:<br /><br /> - The starting frame is an even frame, with the prerender scanline being 341 ticks long. (The simulation starts on the prerender scanline - the last line of the frame.)<br /> - The next frame is an odd frame, with the skipped tick being at the end of the prerender scanline. Pixel: 339 jumps to Pixel: 0 instead of from 340 to 0 like on even frames.<br /> - The sprite overflow flag is cleared on the same tick as the VBL flag, as expected.<br /><br />I should've logged vbl_flag on the odd frame as well to see that it gets cleared one tick earlier as expected, but forgot. &gt;:|</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p109151"></a>
				<b class="postauthor">beannaich</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109151">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109151#p109151"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 10, 2013 2:33 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Mar 31, 2010 12:40 pm<br /><b>Posts:</b> 181
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">ulfalizer wrote:</div><div class="quotecontent">Did more tracing in visual 2c02 and figured out some more stuff:<br /><br /> - The starting frame is an even frame, with the prerender scanline being 341 ticks long. (The simulation starts on the prerender scanline - the last line of the frame.)<br /> - The next frame is an odd frame, with the skipped tick being at the end of the prerender scanline. Pixel: 339 jumps to Pixel: 0 instead of from 340 to 0 like on even frames.<br /> - The sprite overflow flag is cleared on the same tick as the VBL flag, as expected.<br /><br />I should've logged vbl_flag on the odd frame as well to see that it gets cleared one tick earlier as expected, but forgot. &gt;:|</div><br /><br />The cycle could still be skipped at the beginning depending on how visual 2C02 calculates the pixel value for the UI. If vbl_flag is cleared on dot 0 instead of dot 1, that'll prove that.<br /><br />EDIT: Ran another frame of simulation, this time with vbl_flag logged, here are the results:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Cycle&nbsp; H&nbsp; &nbsp;V&nbsp; &nbsp;VBL<br /><br />357368 000 105 1 <br />357368 000 105 1 <br />357369 000 105 1 <br />357369 000 105 1 <br />357370 000 105 1 <br />357370 000 105 1 <br />357371 000 105 1 <br />357371 000 105 1 <br />357372 001 105 0 &lt;- VBL still cleared on dot 1..<br />357372 001 105 0 <br />357373 001 105 0 <br />357373 001 105 0 <br />357374 001 105 0 <br />357374 001 105 0 <br />357375 001 105 0 <br />357375 001 105 0 <br /><br />Cycle&nbsp; H&nbsp; &nbsp;V&nbsp; &nbsp;VBL<br /><br />358724 153 105 0 <br />358724 153 105 0 <br />358725 153 105 0 <br />358725 153 105 0 <br />358726 153 105 0 <br />358726 153 105 0 <br />358727 153 105 0 <br />358727 153 105 0 <br />358728 000 000 0 &lt;- Skipped clock<br />358728 000 000 0 <br />358729 000 000 0 <br />358729 000 000 0 <br />358730 000 000 0 <br />358730 000 000 0 <br />358731 000 000 0 <br />358731 000 000 0 <br /><br />Cycle&nbsp; H&nbsp; &nbsp;V&nbsp; &nbsp;VBL<br /><br />&nbsp; 1356 153 105 0 <br />&nbsp; 1356 153 105 0 <br />&nbsp; 1357 153 105 0 <br />&nbsp; 1357 153 105 0 <br />&nbsp; 1358 153 105 0 <br />&nbsp; 1358 153 105 0 <br />&nbsp; 1359 153 105 0 <br />&nbsp; 1359 153 105 0 <br />&nbsp; 1360 154 105 0 &lt;- Non-skipped clock<br />&nbsp; 1360 154 105 0 <br />&nbsp; 1361 154 105 0 <br />&nbsp; 1361 154 105 0 <br />&nbsp; 1362 154 105 0 <br />&nbsp; 1362 154 105 0 <br />&nbsp; 1363 154 105 0 <br />&nbsp; 1363 154 105 0 <br />&nbsp; 1364 000 000 0 <br />&nbsp; 1364 000 000 0 <br />&nbsp; 1365 000 000 0 <br />&nbsp; 1365 000 000 0 <br />&nbsp; 1366 000 000 0 <br />&nbsp; 1366 000 000 0 <br />&nbsp; 1367 000 000 0 <br />&nbsp; 1367 000 000 0 </div><br /><br />It's pretty odd. Does this mean that a nametable fetch is dropped on shortened pre-render lines?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4320"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p109169"></a>
				<b class="postauthor">ulfalizer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109169">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109169#p109169"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 11, 2013 12:07 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5911_1363098840.png" width="80" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 08, 2013 9:55 pm<br /><b>Posts:</b> 347<br /><b>Location:</b> Linköping, Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here's a log around the end of the prerender line on even frames (no skipped tick):<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">hpos&nbsp; &nbsp; vpos&nbsp; &nbsp; vramaddr_t&nbsp; vramaddr_v&nbsp; io_db&nbsp; &nbsp;io_ab&nbsp; &nbsp;io_rw&nbsp; &nbsp;io_ce&nbsp; &nbsp;rd&nbsp; wr&nbsp; ab&nbsp; &nbsp;ale db&nbsp; vbl_flag spr0_hit spr_overflow<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />154&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />154&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />154&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />154&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />154&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />154&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />154&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />154&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;1000 1&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;1000 1&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;1000 1&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;1000 1&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;1000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;1000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;1000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;1000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0</div><br /><br />Here's the same area for odd frames:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">hpos&nbsp; &nbsp; vpos&nbsp; &nbsp; vramaddr_t&nbsp; vramaddr_v&nbsp; io_db&nbsp; &nbsp;io_ab&nbsp; &nbsp;io_rw&nbsp; &nbsp;io_ce&nbsp; &nbsp;rd&nbsp; wr&nbsp; ab&nbsp; &nbsp;ale db&nbsp; vbl_flag spr0_hit spr_overflow<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />153&nbsp; &nbsp; &nbsp;105&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />000&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 1&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />001&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;1&nbsp; &nbsp;2002 0&nbsp; &nbsp;02&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0<br />002&nbsp; &nbsp; &nbsp;000&nbsp; &nbsp; &nbsp;0000&nbsp; &nbsp; &nbsp; &nbsp; 0002&nbsp; &nbsp; &nbsp; &nbsp; 1e&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;1&nbsp; &nbsp;2000 0&nbsp; &nbsp;00&nbsp; 0&nbsp; &nbsp;0&nbsp; &nbsp;0</div><br /><br />It looks you go from v/h=261/339 to v/h=0/0 on odd frames instead of from v/h=261/340 to v/h=0/0 like on even frames. It also looks like the last tick of the last dummy nametable fetch &quot;moves down&quot; to fill the idle tick at the beginning of the first visible scanline.<br /><br />I guess a reasonably close way to represent that in the <span class="posthilit">diagram</span> would be to say that the idle tick at the beginning of the first visible scanline is optional. (I messed up pretty bad in the last version of the <span class="posthilit">diagram</span>. The skipped tick is off by an entire scanline. I hate +-1 errors <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />.)<br /><br />Attaching a diff.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<a href="./download/file.php?id=455&amp;mode=view"><img src="./download/file.php?id=455&amp;t=1" alt="evenodd.png" /></a><br />
			<span class="gensmall">evenodd.png [ 98.14 KiB | Viewed 593 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5911"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p109170"></a>
				<b class="postauthor">beannaich</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p109170">Re: Feedback wanted on SVG PPU frame timing <span class="posthilit">diagram</span></a></div><div style="float: right;"><a href="./viewtopic.php?p=109170#p109170"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 11, 2013 1:12 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Mar 31, 2010 12:40 pm<br /><b>Posts:</b> 181
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Makes sense. Instead of the last cycle of pre-render, the first cycle of raster 0 can be skipped. I noticed some possible Visual2C02 bugginess, if you look at the AB for the tile fetches at the end of pre-render (happens on all lines, though):<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">321: $2000 &lt;- name 1/2<br />322: $2000 &lt;- name 2/2<br /><br />..<br /><br />329: $2001 &lt;- name 1/2<br />330: $2000 &lt;- name 2/2<br /><br />the same occurs for the two dummy fetches:<br /><br />337: $2002<br />338: $2000 &lt;-+ why does the address go back to $2000 during the second cycle of nametable fetch?<br />339: $2002&nbsp; &nbsp;|<br />340: $2000 &lt;-+<br /><br />The same thing seems to happen with attributes:<br /><br />323: $23C0 &lt;- attr 1/2<br />324: $2300 &lt;- attr 2/2</div><br /><br />I'm chalking that up to bugginess for now.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4320"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=3&amp;t=9901"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=9901"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 80 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=3&amp;t=9901&amp;hilit=diagram&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="9901" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3" selected="selected">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
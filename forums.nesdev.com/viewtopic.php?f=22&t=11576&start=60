<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - SMB1 + SMB2J SRAM Plus (FDS hack)</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Homebrew Projects" href="http://forums.nesdev.com/feed.php?f=22" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - SMB1 + SMB2J SRAM Plus (FDS hack)" href="http://forums.nesdev.com/feed.php?f=22&amp;t=11576" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '5');
	var per_page = '15';
	var base_url = './viewtopic.php?f=22&amp;t=11576';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:54 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=22">Homebrew Projects</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=22&amp;t=11576&amp;start=60">SMB1 + SMB2J SRAM Plus (FDS hack)</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=22"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=22&amp;t=11576"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>5</strong> of <strong>12</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 170 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=22&amp;t=11576&amp;start=45">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=22&amp;t=11576">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=45">4</a><span class="page-sep">, </span><strong>5</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=90">7</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=105">8</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=165">12</a> &nbsp;<a href="./viewtopic.php?f=22&amp;t=11576&amp;start=75">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=22&amp;t=11576&amp;start=60&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=22&amp;t=11576&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=22&amp;t=11576&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p137018"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137018">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137018#p137018"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Nov 28, 2014 12:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">More info about the contest prize: <a href="http://acmlm.kafuka.org/board/thread.php?pid=159079#159079" class="postlink">http://acmlm.kafuka.org/board/thread.php?pid=159079#159079</a></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p137349"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137349">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137349#p137349"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Dec 06, 2014 10:28 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Most of you have probably read my previous posts concerning the SMB promotion over at Board 2. Well, I fixed some more things up in it. One I will share, with code exclusively I'm sharing here (since I'm probably the only one at Board 2 that is fluent in 6502 ASM). It has to do with an obscure glitch that I recently discovered with platform code (more info here: <a href="http://themushroomkingdom.net/bugs/10" class="postlink">http://themushroomkingdom.net/bugs/10</a> and here <a href="http://themushroomkingdom.net/bugs/56" class="postlink">http://themushroomkingdom.net/bugs/56</a>).<br /><br />This fucker was a real son of a bitch to fix, let me tell you. It took me 6-7 hours to trace code. Initially, I didn't have the slightest clue on what caused this. The fully labeled SMB2J disassembly really didn't help much; the balance lift code is HUMONGOUS. I mean, about 200 lines or so of code just for this, branching off to many subs. I tested this glitch out on Side A SMB1, on level 3-3. Before I hit the debugger, I hit the built-in FCEUX hex editor and looked at $18 and $19, where the enemy slots are stored for these enemies. They have an ID of $24 after being buffered in VRAM. Whatever platform I stood on (the one falling), would get cleared after going under $03 on the screen Y position and go to $00, while the other one would stay at $24. So, the first thing I noted was that the <em>opposite</em> platform was the one not being cleared. Which is why there is still collision where it stood. The next thing I did before setting Writes in the debugger was looked at the &quot;jmp EraseEnemyObject&quot; in the main routine &quot;BalancePlatform:&quot;. I found that this was responsible for clearing the OAM object enemy (yeah, platforms are all considered enemies in SMB1/2J). It cleared what was in A plus X offset. I then hit the debugger, setting Write breakpoints to $18; next I stepped into the code. This is what I found: $95d1 was responsible for clearing the object. It was only clearing what was stored in X, while the opposite platform is always Y. So, whenever X was below $03's Y position on the screen, it would clear the object, but Y (the opposite platform) wasn't. Well, not the collision, anyway. SO I came up with a simple fix:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">BalancePlatform:<br />&nbsp; &nbsp; &nbsp; &nbsp; lda Enemy_Y_HighPos,x&nbsp; &nbsp; &nbsp; &nbsp;;check high byte of vertical position<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp #$03<br />&nbsp; &nbsp; &nbsp; &nbsp; bne DoBPl<br />&nbsp; &nbsp; &nbsp; &nbsp;;;;;;; jmp EraseEnemyObject&nbsp; &nbsp; &nbsp; &nbsp; ;if far below screen, kill the object<br />&nbsp; &nbsp; &nbsp; JMP freespace&nbsp; &nbsp;;my custom code<br /><br />freespace:<br />JSR EraseEnemyObject<br />TYA<br />TAX<br />JMP EraseEnemyObject<br /></div><br /><br />It worked...for some platforms but not others. This was obviously the issue but I didn't understand why it was working half of the time and not other times. Then I tried replacing the &quot;lda Enemy_Y_HighPos,x&quot; with a &quot;lda Enemy_Y_HighPos,y&quot; and bingo! It worked. (What this does is make sure the opposite platform or &quot;Y&quot; is cleared FIRST, thereby clearing X, since Y fell after X (the one the player is on.)) Ever had one of those situations where when you fixed a glitch you caused another? Well, that's here. I fixed the invisible platform but caused something strange to happen. Well, not directly caused by my fix. Whenever the platforms fell, it would clear the objects completely, but then some strange collision was created by the rope of the pulleys when they fell. Also, now if the player was standing too close to the rope, they would be pushes away! Sort of like the Wind effect, except more brutal. So much so that the player could barely cross the lifts. (I checked and the lifts were indeed cleared from $18 and $19 or whatever enemy slot they were loaded from.)<br /><br />The rope code seems stable and I'm sure this code is the issue, not sure what was going on. Lifts would fall randomly on 4-3, other enemies disappeared from the screen randomly (no fixed pattern and sometimes they didn't disappear at all). I thought to myself and came to the conclusion that the platform code is so fucked up that it's a lost cause. So what did I do? After all, I fixed every other glitch I ever came across, I probably broke a record for optimizing SMB code and fixing glitches etc. I recoded the main portion of the troubled code for the platforms! I now made it to the platforms not falling off at all. I made it VERY realistic. The player is no longer awarded 1000 points when getting the platform off because that's now impossible (plus, I wrote over that code). I made it so that when the player stands on the platform and it gets to a certain point, it ceases to move, that is, until you jump onto the other platform. Sort of like a seesaw. But, I made it realistic, so if the platform ceases on one end and you jump up directly above it a certain amount, it drops slightly. Like in real life if a platform stops and a heavy person jumps on the ceased platform. Though it never falls off, with a hundred or so jumps you can get it visibly a little lower. This was HARD. Here is my code, as promised:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">balance_no_possessed: <br />lda #$2F&nbsp; ;;;;are we at a certain point where the screws are at the top of the balance lift on the opposite ;;platform?<br />cmp Enemy_Y_Position,y ;;;;;has the opposite platform reached a certain point close to the top of the lift? <br />;;If so, time keep em' stopped and then RTS. <br />bcc $04&nbsp; ;;;;;; yea boi!<br />jsr StopPlatforms&nbsp; &nbsp;;;;;;;cease and desist!<br />rts&nbsp; &nbsp;;;;;;;return from whence ye came<br />lda #$20&nbsp; &nbsp;;;;;;;;the movement force<br />jsr $A1D2 ;;;;;;store em' over speed and moveforce in RAM, I did a JSR here instead of having to write out ;;the STA $xx,y and STA $xxxx,y addresses. It's redundant and a waste of space.<br />pla&nbsp; ;;;;;;get the contents of X back<br />tax&nbsp; ;;;;;I'm back!<br />rts&nbsp; ;;;;;um...yep. Pretty self-explanatory<br /></div><br /><br />This code is actually called twice, so I made two JSRs to it. If you borrow it, CREDIT me or else I will know it's my code. <br /><br />I may share my Luigi code (pics on Board 2 from the last post) where I gave Luigi his proper Fiery form colors by doing a palette swap routine. (Getting his regular non-fiery palette was easy, just a simple hex change. Though, the fiery code was shared by Mario and Luigi and I had to create a routine to separate them.)    --ShaneM, Master of ASM</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p137413"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137413">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137413#p137413"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Dec 08, 2014 11:59 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Fixed the double-jump glitch that I recently found: <a href="http://www.mariowiki.com/List_of_Super_Mario_Bros._glitches#Jumping_in_Midair" class="postlink">http://www.mariowiki.com/List_of_Super_Mario_Bros._glitches#Jumping_in_Midair</a><br /><br />Even more reason to participate in the giveaway. Here's my code; I don't always play nice and share my code but I'll share this one, cuz it took one line of code to fix and it took me less than 5 minutes to figure out (I must be getting better at this...if that's even possible at this point):<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">PlayerChangeSize:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda TimerControl&nbsp; &nbsp; ;check master timer control<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cmp #$f8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;for specific moment in time<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bne EndChgSize&nbsp; &nbsp; &nbsp; ;branch if before or after that point<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;JSR DisJoyp&nbsp; &nbsp; &nbsp; &nbsp; ;ShaneM's fix<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jmp InitChangeSize&nbsp; ;otherwise run code to get growing/shrinking going<br /></div><br /><br />Is there any glitch too hard for me? The labels borrowed from doppleganger's SMB2J disassembly. I'll try to see if there's any more glitches on the worldwide web that I missed before Jan. 05th, the due date for this special build. Too bad, if time passes and I don't get deadline videos by then, nobody will get this special build.   <br /><br />I've already fixed all glitches found on Mariowiki, TheMushroomKingdom and many YT videos. (Excluding ones like &quot;Disappearing Power-Ups&quot; and &quot;Disappearing Trampolines&quot; which aren't glitches but are programmed that way to erase them because there can only be so much OAM buffered at once [but the trampoline one was programmed different in SMB2J to just not load at all instead of trapping the player but I optimized this some], but those reports were probably written by someone without ASM knowledge or knowledge of SMB1 mechanics.) --ShaneM, Master of ASM</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p137444"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137444">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137444#p137444"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 10, 2014 12:30 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Alright; I'm going to share how I fixed the fireball glitch (<a href="http://themushroomkingdom.net/bugs/12" class="postlink">http://themushroomkingdom.net/bugs/12</a>). Took me about 5 minutes to fix. There are two ways to fix this.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">ProcFireball_Bubble:&nbsp; &nbsp;;original routine<br />lda PlayerStatus&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;check player's status<br />cmp #$02<br />bcc ProcAirBubbles&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;if not fiery, branch<br /><br />;...some ways down you find<br />lda CrouchingFlag&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;if player crouching, branch<br />bne ProcFireballs<br /><br /></div><br /><br />Method #1 (my choice) = Simply NOP the LDA CrouchingFlag and BNE following it. That way, the player can now crouch and still shoot fireballs, thereby adding a feature as well as &quot;fixing&quot; the glitch.<br /><br />Method #2 (hardcore/precise) = This merely fixes the glitch instead of letting the player crouch and shoot fireballs. I didn't choose this road because I like the idea of crouching and shooting fireballs.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">ProcFireball_Bubble: <br />;new code found where the old &quot;lda CrouchingFlag&quot; was<br />lda Areatype&nbsp; &nbsp; ;if water type level ($00), then branch. ShaneM's code<br />beq ANDing&nbsp; &nbsp; &nbsp;;ShaneM's code<br />lda CrouchingFlag&nbsp; &nbsp; ;original code<br />bne ProcFireballs&nbsp; &nbsp; &nbsp;;original code<br /><br />Fix: ;... some ways down, where the original code &quot;lda #Sfx_Fireball&quot; is located<br />lda #Sfx_Fireball ;etc...the rest of the routine and so on. I just created a label here<br /><br />ANDing: ;found wayyy at the end of this routine, entirely. ShaneM's code<br />lda SavedJoypad1Bits<br />and %00000100<br />beq fix<br />rts<br /></div><br /><br />--ShaneM, Master of ASM</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p137472"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137472">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137472#p137472"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 10, 2014 10:50 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">So I've fixed every known glitch found in formal sites. But, I found one today on YT that was unmarked on any formal site: <a href="https://www.youtube.com/watch?v=CGk3emjoh8I&amp;list=PL576CDD8E4A2E5A07&amp;index=7" class="postlink">https://www.youtube.com/watch?v=CGk3emjoh8I&amp;list=PL576CDD8E4A2E5A07&amp;index=7</a>. Look at 15 seconds into the video. Notice that he went through the pipe there? That's a glitch having to do with the BG collision of invisible blocks. That happens to any and all invisible blocks, whether they be 1UPs, Invisible Coin, Powerup or Poison Mushroom. This has now been fixed. I tried to get it to emulate the SMAS SNES fix. But this is 6502 and I had to recode it myself. Here is my fix, it will be available only on the version on Board 2 of whomever submits to me entries in the contest giveaway. CREDIT ME IF USED!!!<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">RetYC: <br />and #%00001111&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;and mask out high nybble/ORIGINAL CODE<br />sta $04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;store masked out result here/ORIGINAL CODE<br />lda Player_X_Scroll&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;Is the player horizontally moving? SHANEM's CODE<br />beq new_label&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;if not, branch SHANEM's CODE<br />lda $03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;SHANEM's CODE<br />cmp #$5E&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;any object less than the invisible coin, branch. SHANEM's CODE<br />bcc new_label&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;SHANEM's CODE<br />cmp #$62&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;any object greater than invisible powerup, branch SHANEM's CODE<br />bcs new_label&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;SHANEM's CODE<br />lda #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;clear block buffer collision if player moving horizontally otherwise attribute collsion, ;;;;;SHANEM's CODE<br />sta $03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;SHANEM's CODE<br />new_label:&nbsp; &nbsp; &nbsp;lda $03&nbsp; &nbsp; &nbsp;;get saved content of block buffer/ORIGINAL CODE<br />rts&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;ORIGINAL CODE<br /><br /><br />;notes<br />;$5E = invisible coin<br />;$5F = invisible 1-UP<br />;$60 = invisible Poison Mushroom<br />;$61 = invisible powerup<br /></div><br /><br />tepples or any other person who somewhat knows SMB1/2J, are there any other glitches on the the worldwide web that I'm missing?    --ShaneM, Master of ASM</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5262">ShaneM</a> on Fri Dec 26, 2014 10:38 pm, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p137575"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137575">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137575#p137575"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Dec 14, 2014 12:03 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I've decided as a present before X-mas to share my glitch fixes, in which I fix every single glitch in the promo giveaway on Board 2. I know I don't get much acknowledgment for this work, cuz SMB1/SMB2J aren't very popular. But to me, they trumph SMB3 or any other SMB game. So these fixes are a HUGE deal to me. I'll space them out and share them some at a time. Remember, Jan. 05th 2014 are the video contest deadlines. <br /><br />Here, I fix this glitch, dealing with player-to-enemy collision: <a href="http://www.mariowiki.com/File:SMB_W1-1_Glitch2.ogg" class="postlink">http://www.mariowiki.com/File:SMB_W1-1_Glitch2.ogg</a> (Look at 1:38 into the video; and yeah, I fix the other glitches it presents, too.)<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">PlayerEnemyCollision:<br />;...Some ways down in the routine we find<br />lda Enemy_State,x<br />;;;;;and #%00100000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;if enemy state has d5 set, branch to leave<br />and #%00100001&nbsp; &nbsp;;SHANEM FIX; what we want to do is also branch if d0 is set<br />bne NoPECol<br />;...Some more ways down<br />NoPECol: rts<br /><br />;notes<br />;the LSBs we are checking if set are d5<br />;which is if the enemy is in a defeated state against $1E plus X offset<br />;or d0, if the enemy is in a falling state<br />;if either are true and therefore set, collision between enemy and player are void<br /></div><br /><br />Thanks for those bothering to even read this. I'll try to post some of my code each day, but I've fixed probably over 60 glitched in total. So I may not be able to post them all. Oh yeah, and as a bonus, here is my code in which I separate fiery Mario and Luigi and give them their own, proper palettes. Credit me if used, please. Here are pics at the bottom, too. (Luigi's colors based on their current official palettes. Only fiery forms depicted, though I corrected Luigi's standard palettes, too; those were simple data changes, though.)<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">PlayerColors:&nbsp; &nbsp; &nbsp;;original shit, here<br />&nbsp; &nbsp; &nbsp; .db $22, $16, $27, $18 ;player's normal colors, may be overwritten<br />&nbsp; &nbsp; &nbsp; .db $22, $37, $27, $16 ;player's colors after grabbing fire flower<br /><br />ClrGetLoop:&nbsp; &nbsp; <br />lda selectedplayer ;SHANEM's CODE; is Mario or Luigi playing?<br />bne Luigi ; SHANEM's CODE; if Mario, branch<br />lda $1a&nbsp; &nbsp;;SHANEM's CODE; otherwise, load Luigi's shade of green<br />sta PlayerColors+8 ;SHANEM's CODE; write over the $16 stored at PlayerColors+8 to the offset<br />bne VRAM ;SHANEM's CODE unconditional branch<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <br />Luigi: <br />lda $16 ;ShaneM's CODE; fetch the shade of red used by Mario<br />sta PlayerColors+8&nbsp; &nbsp; ;SHANEM's CODE; store it at PlayersColors+8 to the offset<br /><br />VRAM: <br />lda PlayerColors,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;original code<br />sta VRAM_Buffer1+3,x&nbsp; &nbsp; &nbsp;;this too is original code...continue the routine as normal<br /><br /><br />;notes<br />;the label &quot;VRAM&quot; is actually the start of the original routine, &quot;ClrGetLoop&quot;<br />;I just added it for the unconditional branch after loading Luigi's colors<br />;it may seem redundant that I created code to 'reload' Mario if by default<br />;Mario's palette is used<br />;the issue is, if you play as Luigi and choose Quit after a Game Over, then<br />;choose Mario, Luigi's colors would still be used until a hard reset<br />;this way palette gets properly swapped no matter which character is playing<br /></div><br /><br />Fiery Mario<br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlusJapan_005_zpscce3b4d0.png" alt="Image" /><br /><br />Fiery Luigi<br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlucsJapan-Copy_001_zps012d0fba.png" alt="Image" /><br /><br />Some pics of Luigi's regular proper colors, too. These I matched to the SMB Deluxe colors, though that's Z80 and VRAM renders big-endian addressing for each palette instead of single bytes, which it uses 4 palettes just like the FDS does.<br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlusJapan_009_zps5378d949.png" alt="Image" /><br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlucsJapan-Copy_003_zpsddc102c6.png" alt="Image" /><br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlucsJapan-Copy_004_zps984a5850.png" alt="Image" /><br /><br />SO participate for your chance to win this cool prize. Also, you can see the VC rip of the 25th anniversary blocks I mentioned using, something currently undumped, straight from the source! Also, you can see the  star from SMB Special and the ANNSMB mics used, too. Hurry, time's almost up! <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />  --ShaneM, the Master of ASM.<br /><br />EDIT: One more pic showing off the promotional sprites; SMB2J still on Side B with all these fixes, present (minus the promotional sprites).<br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlusJapan_008_zpsbfb6a084.png" alt="Image" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p137645"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137645">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137645#p137645"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Dec 16, 2014 11:25 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">So, how could I make this special version of SMB1 and SMB2J extra special? By adding a level from SMB Special!!! Originally released in Japan for the PC88 as a special version of SMB, I've remade 6-2 of this game's level and have replaced the old A-1 secret stage on Side B with it (the secret Warp to this level is still found on A-1 as before)! SMB2J's A-1 is left intact, there is just a secret Warp to this, now. Originally it was a remake of SMB1's 1-1. But now, for the first time, an SMB Special level has been remade for the FDS! That lucky contest winner will sure get to enjoy the fruits of their labor with this prize. Faithful to it's original PC88 version; with SMB2J features, too. Here is a map of the level: <a href="http://www.mariouniverse.com/images/maps/x1/smb/6-2.png" class="postlink">http://www.mariouniverse.com/images/maps/x1/smb/6-2.png</a><br /><br />That's a total of over 22 Worlds; 89 levels! Hours upon hours of fun and excitement while reliving classics to their fullest. Sublime to any other official Nintendo version as I've fixed all the glitches.<br /><br /><br />Here are some in-game pics of this level:<br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlusJapan_011_zps3735112c.png" alt="Image" /><br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlusJapan_013_zps6a40b547.png" alt="Image" /><br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlusJapan_012_zpsd0fb69c4.png" alt="Image" /><br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlusJapan_014_zpseca1e970.png" alt="Image" /><br /><br /><img src="http://i1302.photobucket.com/albums/ag140/Shane_Mohammed/SuperMarioBros1amp2SRAMPlusJapan_015_zps477e7ed7.png" alt="Image" /><br /><br />Production on this promotional game has been completed. I await entries until Jan.05th.    --ShaneM</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p137693"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137693">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137693#p137693"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 17, 2014 12:25 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">ShaneM wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">PlayerEnemyCollision:<br />;...Some ways down in the routine we find<br />lda Enemy_State,x<br />;;;;;and #%00100000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;if enemy state has d5 set, branch to leave<br />and #%00100001&nbsp; &nbsp;;SHANEM FIX; what we want to do is also branch if d0 is set<br />bne NoPECol<br />;...Some more ways down<br />NoPECol: rts<br /><br />;notes<br />;the LSBs we are checking if set are d5<br />;which is if the enemy is in a defeated state against $1E plus X offset<br />;or d0, if the enemy is in a falling state<br />;if either are true and therefore set, collision between enemy and player are void<br /></div><br /><br /></div><br /><br />I didn't take into account that d0 was masked out to take care of upside down shell to player collision. So I had to come up with a new fix. Here it is: <br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">PlayerEnemyCollision:<br />;...Some ways down in the routine we find<br />lda Enemy_State,x&nbsp; ;ORIGINAL CODE<br />and #%00100000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;if enemy state has d5 set, branch to leave ORIGINAL CODE<br />bne NoPECol&nbsp; &nbsp;;ORIGINAL CODE<br />lda Player_Y_Position&nbsp; &nbsp;;SHANEM's CODE<br />cmp $b1&nbsp; &nbsp; &nbsp; ;SHANEM's CODE is the player vertically one pixel below the ground? <br />bcs NoPECol ;SHANEM's CODE if so, then void collision<br />;...Some more ways down<br />NoPECol: rts&nbsp; &nbsp; ;ORIGINAL CODE<br /></div><br /><br />Code of the day: Glitch fix #999 Timer glitch: <a href="http://www.mariowiki.com/List_of_glitches_in_Super_Mario_Bros.:_The_Lost_Levels#999_Timer" class="postlink">http://www.mariowiki.com/List_of_glitches_in_Super_Mario_Bros.:_The_Lost_Levels#999_Timer</a><br /><br />Fix:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">EndCastleAward:<br />&nbsp;;Some ways down we find:<br />&nbsp;;;;; jsr AwardTimerCastle&nbsp; &nbsp;;original code<br />&nbsp;;Replace that jsr with this one:<br />&nbsp;jsr AwardGameTimerPoints ;SHANEM's CODE<br /></div><br /><br />Stay tuned for more as I've conquered them all.  --ShaneM</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p137997"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p137997">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=137997#p137997"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 24, 2014 12:54 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I've made a couple more fixes...Seriously, I'm done this time. Remember, the contest ends in about 11 days. What I fixed:<br /><br />-Added collision between fireballs and powerups...I don't know why I did this, probably because I made collision for everything else. Though the fireballs do not defeat powerups, they just mark collision.<br />-Fixed the <a href="http://themushroomkingdom.net/bugs/55" class="postlink">Powerful_Wind</a> glitch. I thought this was caused by an NES limitation, but it wasn't! This was a real bitch to fix. I mean this has got to be the hardest thing in the world to fix in the world of NES. I had to create a specific routine for when the windflag was set. Wind would CLC then ADC #$01 to player_x_position, causing horizontal scroll $6FF to increment and decrement between nanoseconds. I was REALLY REALLY tight on space. It took me 7 hours to do but I did it! I traced code and created a new subroutine for &quot;ChkPBtm:&quot;, the root of the issue. Did I mention that this was HARD? <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br />-Fixed an issue with Piranha Plant collision being buffered in d6 of the enemy slot. All Piranha Plants issues are now fixed and 100% stable collision with shells/fireballs/enemies, now.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<img src="./download/file.php?id=2328" alt="Super Mario Bros. 1&amp;2 SRAM Plus (Japan) - Copy_003.png" /><br />
			<span class="gensmall">Super Mario Bros. 1&amp;2 SRAM Plus (Japan) - Copy_003.png [ 3.78 KiB | Viewed 3216 times ]</span>
		

		<br />
	</td>
							</tr>
						
							<tr>
								<td class="row1">
			<img src="./download/file.php?id=2327" alt="Super Mario Bros. 1&amp;2 SRAM Plus (Japan)_016.png" /><br />
			<span class="gensmall">Super Mario Bros. 1&amp;2 SRAM Plus (Japan)_016.png [ 2.58 KiB | Viewed 3216 times ]</span>
		

		<br />
	</td>
							</tr>
						
							<tr>
								<td class="row2">
			<img src="./download/file.php?id=2326" alt="Super Mario Bros. 1&amp;2 SRAM Plus (Japan)_017.png" /><br />
			<span class="gensmall">Super Mario Bros. 1&amp;2 SRAM Plus (Japan)_017.png [ 2.64 KiB | Viewed 3216 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p138084"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p138084">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=138084#p138084"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 26, 2014 1:54 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">In an earlier post,<br /><br /><div class="quotetitle">ShaneM wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">RetYC: <br />and #%00001111&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;and mask out high nybble/ORIGINAL CODE<br />sta $04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;store masked out result here/ORIGINAL CODE<br />lda Player_X_Scroll&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;Is the player horizontally moving? SHANEM's CODE<br />beq new_label&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;if not, branch SHANEM's CODE<br />lda $03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;SHANEM's CODE<br />cmp #$5E&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;any object less than the invisible coin, branch. SHANEM's CODE<br />bcc new_label&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;SHANEM's CODE<br />cmp #$62&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;any object greater than invisible powerup, branch SHANEM's CODE<br />bcs new_label&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;SHANEM's CODE<br />lda #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;;;;clear block buffer collision if player moving horizontally otherwise attribute ;;;;;collsion, SHANEM's CODE<br />sta $03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;SHANEM's CODE<br />new_label:&nbsp; &nbsp; &nbsp;lda $03&nbsp; &nbsp; &nbsp;;get saved content of block buffer/ORIGINAL CODE<br />rts&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;ORIGINAL CODE<br /><br /><br />;notes<br />;$5E = invisible coin<br />;$5F = invisible 1-UP<br />;$60 = invisible Poison Mushroom<br />;$61 = invisible powerup<br /></div><br /><br /></div><br /><br />Today, I've made a discovery. &quot;Player_X_Scroll&quot;, or RAM $6FF did a check for if the player is horizontally moving, which includes horicontally moving when vertically inclined. This caused an issue when jumping too hard vertically as it registered as horizontal movement. There wasn't an address to do what I wanted it to do. The SNES version seems to use RAM $E4 for this purpose of this fix which is unused in the FDS version. I didn't have room to create an extra flag. None of the addresses doppleganger listed in his SMB2J disassembly helped for this specific need. I have discovered an address in use by the CPU which is not labeled by doppleganger. It is RAM $089F. It seems that this is purely for vertical movement and is negative (#$FF-#$FD) when the player is ascending but goes to #$04 when the player is descending and finally back to #$00 when the player is standing/running on something solid. This is a more proper register to use for this fix. So, here is the proper fix:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;replace<br />lda Player_X_Scroll&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;Is the player horizontally moving? SHANEM's CODE<br />beq new_label&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;;;;if not, branch SHANEM's CODE<br /><br />;with this<br />lda $089F&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;SHANEM's CODE, a register I discovered to fix this<br />bmi new_label&nbsp; &nbsp;;if player is jumping (ascending), then branch to initiate block buffer collision for <br />;invisible objects. SHANEM's CODE<br /><br /></div><br /><br />--ShaneM, the Master of ASM</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p138102"></a>
				<b class="postauthor">Hamtaro126</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p138102">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=138102#p138102"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 26, 2014 5:59 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=287.png" width="92" height="77" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Jan 19, 2006 5:08 pm<br /><b>Posts:</b> 751<br /><b>Location:</b> Shelton, Washington.
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Anything using $0800-0FFF, $1000-17FF, and $1800-1FFF will equal to $0000-$07FF, As they are mirrored in the NES's internal RAM... Therefore $089F equals $009F, or simply $9F in zero page, which equals to both ''SprObject_Y_Speed'' and ''Player_Y_Speed'' in the original disassemblies.<br /><br />Also, If you have the disassembled the shell animations from SNES SMB1, I would like to see it in your hacks, if not... I could add it to mine and credit you.<br /><br />EDIT - I deleted my second message, I misunderstood at first about tepples' message, Giving it a second look reveals that he said the SNES equivelent to the mirroring problem.</div>

					
						<div class="postbody"><br />_________________<br />AKA SmilyMZX/AtariHacker.</div>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=287">Hamtaro126</a> on Fri Dec 26, 2014 6:28 pm, edited 3 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=287"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p138104"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p138104">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=138104#p138104"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 26, 2014 6:02 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">On the Super NES (&quot;The Lost Levels&quot; in <em>Super Mario All-Stars</em>), they mirror to $7E009F and $7E089F.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p138106"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p138106">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=138106#p138106"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 26, 2014 6:28 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">On the Super NES (&quot;The Lost Levels&quot; in <em>Super Mario All-Stars</em>), they mirror to $7E009F and $7E089F.</div><br /><br /><br />Right, for RAM. When I said $E4 earlier as the address created for this fix on the SNES, I meant $7E00E4. I forgot that Geiger's debugger gives the ROM, RAM, SRAM etc. in hex mode, too. Anyway, my fix does not do the same thing as on the SNES, which bases its fix on horizontal acceleration while I make use of vertical. Because $06FF was the closest one that I originally had but that didn't quite fix this. So if anyone borrows my fix, credit me and replace the $06FF from earlier with $089F, and change the BEQ to BMI; everything else is the same to correct this glitch with invisible blocks.  --ShaneM<br /><br />@hamtaro<br />65c816 is similar to 6502. Use Geiger's SNES9x build to find what you want. I never studied 65c816 but since I'm fluent at 6502 I was able to trace the code and see how the SNES fixed it. Basically, use dopplerganger's disassembly when tracing code to the SNES because it's the same, for the most part.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5262">ShaneM</a> on Fri Dec 26, 2014 7:48 pm, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p138108"></a>
				<b class="postauthor">Hamtaro126</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p138108">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=138108#p138108"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 26, 2014 6:37 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=287.png" width="92" height="77" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Jan 19, 2006 5:08 pm<br /><b>Posts:</b> 751<br /><b>Location:</b> Shelton, Washington.
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">ShaneM wrote:</div><div class="quotecontent">So if anyone borrows my fix, credit me<br /></div><br /><br />Always!<br /><br /><div class="quotetitle">ShaneM wrote:</div><div class="quotecontent">65c816 is similar to 6502. Use Geiger's SNES9x build to find what you want. I never studied 65c816 but since I'm fluent at 6502 I was able to trace the code and see how the SNES fixed it. Basically, use dopplerganger's disassembly when tracing code to the SNES because it's the same, for the most part.</div><br /><br />Actually, I never got to edit SMAS successfully due to Lunar Address (FuSoYa's SNES address decoder) acting up on my ROM, only exception is SMW, And your advice here may be what I need, at least for the RAM!</div>

					
						<div class="postbody"><br />_________________<br />AKA SmilyMZX/AtariHacker.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=287"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p138110"></a>
				<b class="postauthor">ShaneM</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p138110">Re: SMB1 + SMB2J SRAM Plus (FDS hack)</a></div><div style="float: right;"><a href="./viewtopic.php?p=138110#p138110"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 26, 2014 6:40 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5262_1439529439.jpg" width="100" height="84" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 04, 2012 4:15 pm<br /><b>Posts:</b> 353<br /><b>Location:</b> United States of America (USA)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">EDIT: You know, I just realized, all the fixes I made to my FDS games could be applied to the SNES versions. That's what I did when I started my SNES project on this. I'll list some more fixes later on this week; I'll eventually get around to sharing them all and maybe they could go on some sort of Mariowiki for all hackers to have access to. I think I got about 50 original glitches fixed.<br /><br />Here's one more for today (I think I shared a handful of them last week). How to fix these: <a href="http://themushroomkingdom.net/bugs/2" class="postlink">Small_and_Fiery</a> and <a href="http://themushroomkingdom.net/bugs/13" class="postlink">Thank_You_Dead_Mario</a> (Same code corrects both glitches.)<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">HandleAxeMetatile:<br />&nbsp; &nbsp; &nbsp; &nbsp;lda #$00&nbsp; &nbsp; &nbsp;;ORIGINAL CODE<br />&nbsp; &nbsp; &nbsp; &nbsp;sta OperMode_Task&nbsp; &nbsp;;ORIGINAL CODE<br />&nbsp; &nbsp; &nbsp; &nbsp;lda #$02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;ORIGINAL CODE<br />&nbsp; &nbsp; &nbsp; &nbsp;sta OperMode&nbsp; &nbsp; &nbsp; &nbsp; ;ORIGINAL CODE<br />&nbsp; &nbsp; &nbsp; &nbsp;LSR&nbsp; &nbsp; &nbsp; &nbsp; ;SHANEM's CODE. Divide the #$02 loaded in A to get #$01<br />&nbsp; &nbsp; &nbsp; &nbsp;STA&nbsp; InjuryTimer&nbsp; &nbsp; &nbsp; ;SHANEM's CODE. Set $079E to #$01 to impose temporary invincibility for whenever <br />;the player touches the axe object metatile <br />&nbsp; &nbsp; &nbsp; &nbsp;jsr LoadMarioPhysics&nbsp; &nbsp;;ORIGINAL CODE<br />&nbsp; &nbsp; &nbsp; &nbsp;lda #$18&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;ORIGINAL CODE<br />&nbsp; &nbsp; &nbsp; &nbsp;sta Player_X_Speed&nbsp; ;ORIGINAL CODE<br /></div><br /><br />EDIT: My bad; I edited my post to correct the links I listed...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5262"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=22&amp;t=11576&amp;start=60"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=22"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=22&amp;t=11576"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>5</strong> of <strong>12</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 170 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=22&amp;t=11576&amp;start=45">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=22&amp;t=11576">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=45">4</a><span class="page-sep">, </span><strong>5</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=90">7</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=105">8</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=22&amp;t=11576&amp;start=165">12</a> &nbsp;<a href="./viewtopic.php?f=22&amp;t=11576&amp;start=75">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=22">Homebrew Projects</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 4 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="11576" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22" selected="selected">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
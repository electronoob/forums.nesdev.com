<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Changing color palette of FCE Ultra</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Changing color palette of FCE Ultra</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=6099">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=6099</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JohnJohn</b> [ Sat Feb 27, 2010 1:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Changing color palette of FCE Ultra</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Once I wanted to save the background graphic of a game. So, I had to do two screenshots. Since the player sprite covers a part of the background, I cut this part out of the second image and pasted it on the first image. Like this:
<br /><img src="http://i47.tinypic.com/zojm.jpg" alt="Image" /> + <img src="http://i46.tinypic.com/b848qs.png" alt="Image" /> = <img src="http://i47.tinypic.com/xlxyrc.png" alt="Image" />
<br />Then, when the part of the second image was pasted on the first image, I noticed something: The colors were not 100% identical. The first screenshot used another palette as the second screenshot. Both time it was the same emulator and I didn't choose another .pal file either. The differences were not visible right away. Only when I pasted a part of the second image on the first, I saw that all the colors were a nuance different.
<br />I did that on my mother's PC. It never happens on my own. On my PC, the colors are always consistent. But on my mother's, the palette may change from screenshot to screenshot.
<br />Now my question: How is that possible?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Feb 27, 2010 2:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Maybe the bit-depth the desktop uses makes a difference?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Sat Feb 27, 2010 8:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Maybe the images are being saved/generated as JPEGs or some other lossy format which results in quality loss every time you re-save them?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JohnJohn</b> [ Sat Feb 27, 2010 9:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Maybe the bit-depth the desktop uses makes a difference?</div><br />Even if this was the case, both images should still look the same since it would still be the same desktop where they are created. (But, no, it was 32 bit.)<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">Maybe the images are being saved/generated as JPEGs or some other lossy format which results in quality loss every time you re-save them?</div>
<br />No. The images in FCE Ultra are saved as PNG. And during my editing work, I copy them to MS Paint and save them as simple BMP files.
<br />
<br />And as I said: It's something that never ever happens on my own PC, but happened the instant I tried to paste images together on the other PC. So, it can't have anything to do with my working techniques.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Sun Feb 28, 2010 12:07 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are the 3 images you're working with literally those in the first post?  Because the first image is a JPEG, the 2nd and 3rd are PNG.
<br />
<br />EDIT: Nevermind, the first image is actually a PNG but the file extension is wrong.
<br />
<br />EDIT #2: What part of image #3 has a slightly different palette?  I'm looking at the palette compared to images #1 and #2, and I don't see anything that's different.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JohnJohn</b> [ Sun Feb 28, 2010 5:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">Are the 3 images you're working with literally those in the first post?<br />[...]<br />EDIT #2: What part of image #3 has a slightly different palette?  I'm looking at the palette compared to images #1 and #2, and I don't see anything that's different.</div><br />No, the three images are just an example to explain what I mean with pasting two images together. These pictures all have the same palette since I'm on my own PC and there the palette is always correct. I can't recreate the actual error now because my mother's PC is not available to me in the moment.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">Because the first image is a JPEG, the 2nd and 3rd are PNG.<br />EDIT: Nevermind, the first image is actually a PNG but the file extension is wrong.</div>
<br />In this case it's an error of Tinypic. All of them were PNGs and had the correct file extension when I uploaded them.
<br />
<br />I assume that the error has something to do with the graphic card. Could this be possible?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Sun Feb 28, 2010 6:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I can't say yes or no until I see actual examples.  :-)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JohnJohn</b> [ Sun Feb 28, 2010 6:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, what do you want to see there? Just imagine a screenshot where all the colors are for example three numbers lower for red, green and blue. So, orange, which has usually the RGB value 200, 76, 12 in FCE Ultra would be 197, 73, 9. Something like that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Mon Mar 01, 2010 6:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I can't explain why taking two screen shots within the same running instance of an emulator would result in different palettes.  The only explanations I have would be a lossy file format, or if the comparison is between what you see on-screen vs. what gets written to disk in the PNG.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Mon Mar 01, 2010 8:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">I can't explain why taking two screen shots within the same running instance of an emulator would result in different palettes.  The only explanations I have would be a lossy file format, or if the comparison is between what you see on-screen vs. what gets written to disk in the PNG.</div>
<br />
<br />- Did you try another emulator? o.O

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>miau</b> [ Mon Mar 01, 2010 11:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JohnJohn wrote:</div><div class="quotecontent">No. The images in FCE Ultra are saved as PNG. And during my editing work, I copy them to MS Paint and save them as simple BMP files.<br /></div>
<br />
<br />Some MS programs used to have difficulties with PNG files. Older versions of Internet Explorer come to mind. They displayed PNGs a tad darker than they're supposed to be. Never heard of Paint messing up the colors, though.
<br />
<br />What version of FCE Ultra are you using?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JohnJohn</b> [ Tue Mar 02, 2010 2:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">I can't explain why taking two screen shots within the same running instance of an emulator would result in different palettes.</div><br />Me neither.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">The only explanations I have would be a lossy file format, or if the comparison is between what you see on-screen vs. what gets written to disk in the PNG.</div><br />Cannot be the case either. A difference between screen output and PNG screenshot is not important since the two images with the different palette are both PNG screenshots. (This would only be relevant if I had made one screenshot with the screenshot function of the emulator while the other screenshot was made with the "Print" button on the keyboard.)<br /><br /><div class="quotetitle">miau wrote:</div><div class="quotecontent">Some MS programs used to have difficulties with PNG files. Older versions of Internet Explorer come to mind. They displayed PNGs a tad darker than they're supposed to be. Never heard of Paint messing up the colors, though.</div><br />By the way, I don't open the PNG file with Paint. I open the PNG file with Microsoft Photo Editor from Word 97. Then, I right-click and copy the image to the clipboard. Then I paste this to a standard 24 bit BMP file in Paint.<br /><br /><div class="quotetitle">miau wrote:</div><div class="quotecontent">What version of FCE Ultra are you using?</div>
<br />FCE Ultra 0.98.12. But it can't have to do with the emulator, I think. As I said: I worked on two computers. Everything was the same: Same emulator with same palette (FCE Ultra 0.98.12 with default palette), same game ("Castlevania (U) (PRG0).nes"), same screen resolution (800 x 600, 32 bit), same operation system (Windows 98 SE (the PCs are very old)), same program to open the PNG files and to copy the image to the clipboard (Microsoft Photo Editor from Word 97), same program to edit the images (Paint). And the result: My computer always has the same colors for the images, and I edited tons of them. The other computer had a color difference and I recognized it after only six screenshots.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Mar 02, 2010 2:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It seems like the image travels a lot until it finally reaches its destination, so if I were you I'd try to identify exactly when the colors get messed up. If you open the PNG directly in MSPaint, or use different combinations of software you might detect which software is the guilty one.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JohnJohn</b> [ Tue Mar 02, 2010 6:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It isn't the software. If it was the software, the error would occur on my PC as well since I always use exactly the same software on the same operation system. Also, even if one of the progams messes up the colors, wouldn't it mess up the colors in every image equally?
<br />I'm still assuming that the graphic card is guilty of it, maybe changing the colors a bit with each restart of the emulator.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Mar 02, 2010 6:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sometimes a DirectX or OpenGL window can change depending on whether a menu or tooltip is on top of it.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
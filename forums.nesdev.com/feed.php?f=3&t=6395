<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=6395" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2010-05-19T00:29:30-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=6395</id>
<entry>
<author><name><![CDATA[oRBIT2002]]></name></author>
<updated>2010-05-19T00:29:30-07:00</updated>
<published>2010-05-19T00:29:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61600#p61600</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61600#p61600"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61600#p61600"><![CDATA[
That's obviously clever. Thanks for the idea. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />How about that ROM you mentioned, does it heavily rely on branch-timing?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=353">oRBIT2002</a> — Wed May 19, 2010 12:29 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2010-05-19T00:20:45-07:00</updated>
<published>2010-05-19T00:20:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61599#p61599</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61599#p61599"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61599#p61599"><![CDATA[
Align the roms and ram/sram to a 256 byte boundary, examine the pointer.<br /><br />And you'll have a hell of a time getting The Magic of Scheherezade to work correctly when the enemies cast spells on you.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Wed May 19, 2010 12:20 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[oRBIT2002]]></name></author>
<updated>2010-05-19T00:16:03-07:00</updated>
<published>2010-05-19T00:16:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61598#p61598</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61598#p61598"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61598#p61598"><![CDATA[
In my emulator I don't know the NES PC until it's required (due to speed reasons) so I guess I have to be creative to think of something else.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=353">oRBIT2002</a> — Wed May 19, 2010 12:16 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2010-05-18T23:48:11-07:00</updated>
<published>2010-05-18T23:48:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61596#p61596</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61596#p61596"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61596#p61596"><![CDATA[
Compare the old high byte of PC with the new one.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Tue May 18, 2010 11:48 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[oRBIT2002]]></name></author>
<updated>2010-05-18T23:31:21-07:00</updated>
<published>2010-05-18T23:31:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61595#p61595</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61595#p61595"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61595#p61595"><![CDATA[
How do you guys implement the "add extra cycles if page boundary is crossed" in your emulator in a fast way? Any good ideas?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=353">oRBIT2002</a> — Tue May 18, 2010 11:31 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[meatloaf69]]></name></author>
<updated>2010-05-18T18:57:08-07:00</updated>
<published>2010-05-18T18:57:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61591#p61591</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61591#p61591"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61591#p61591"><![CDATA[
thnx for the info guys... this really helped me alot. <img src="http://forums.nesdev.com/images/smilies/icon_cool.gif" alt="8)" title="Cool" />. Now i got a clearer view of things... I can now continue coding  <img src="http://forums.nesdev.com/images/smilies/icon_twisted.gif" alt=":twisted:" title="Twisted Evil" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4364">meatloaf69</a> — Tue May 18, 2010 6:57 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2010-05-18T09:27:55-07:00</updated>
<published>2010-05-18T09:27:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61581#p61581</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61581#p61581"/>
<title type="html"><![CDATA[Re: About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61581#p61581"><![CDATA[
<div class="quotetitle">meatloaf69 wrote:</div><div class="quotecontent"><br />how are memory being paged??<br /></div><br /><br />- If you're speaking about memory mappers, well, each PRG data bank is 2000h bytes long. "Paged" is the same of PRG bank "mapped" to:<br /><br />CPU 8000-9FFF, A000-BFFF, ...<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Tue May 18, 2010 9:27 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-05-18T02:49:04-07:00</updated>
<published>2010-05-18T02:49:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61573#p61573</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61573#p61573"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61573#p61573"><![CDATA[
Here's the way I think of it: branch is a two-byte instruction. It executes normally like any other, incrementing the PC twice and taking two cycles. Then, if the branch will be taken, it adds the signed operand to the PC and takes one extra cycle (totaling three cycles now). If this requires alteration of the upper 8 bits of the PC, then it takes a second extra cycle (totaling four cycles). $FF signed is -1, $FE signed is -2, etc. down to $80 signed being -128.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue May 18, 2010 2:49 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2010-05-18T01:32:57-07:00</updated>
<published>2010-05-18T01:32:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61571#p61571</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61571#p61571"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61571#p61571"><![CDATA[
A page in 6502 is 256 bytes.  It's pretty easy to understand:<br /><br />$0000-00FF = page 0<br />$0100-01FF = page 1<br />$0200-02FF = page 1<br />...<br />$0F00-0FFF = page 15<br />$1000-11FF = page 16<br />...<br /><br />You get the idea.<br /><br />Regarding branch-related opcodes: the operand is a signed number.  This is why branch opcodes have a limitation in range of -128 to +127 bytes from the PC.  In this case, the branch is signed (MSB / bit 7 of the operand is set), indicating when the condition is met, the PC is to go backwards (e.g. branch backwards).<br /><br />$FF - $FB = 4.  Assuming the branch condition is met, the PC will have 4 subtracted from it, and will continue operation there.  It's important to remember that the PC increments at the operand (the "$FB" portion), so when this instruction executes, the PC is actually at $C07D.<br /><br />So, the disassembly in question therefore becomes this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$C077: A2 02      LDX #$02<br />$C079: AD 00 20   LDA $2000<br />$C07C: 10 FB      BPL $C079  ; BPL $FB, or BPL -4</div><br /><br />$C07D - 4 = $C079.<br /><br />If you truly want to understand how it works: it's two's complement.  I'd rather not explain why; <a href="http://www.alienbill.com/2600/101/docs/onestep.html" class="postlink">here's a better description</a> (see section "Relative Addressing").<br /><br />Now take this example code:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$C077: A2 02      LDX #$02<br />$C079: AD 00 20   LDA $2000<br />$C07C: 10 0A      BPL $C088  ; BPL $0A, or BPL +10</div><br /><br />In this case, the operand is positive (MSB / bit 7 of $0A is not set), which means the branch goes forward.  $C07D + 10 = $C087.  But wait, the branch there says $C088, so how did this happen?  Because the PC is incremented by one after executing the instruction, so $C087 + 1 = $C088.<br /><br />Branching itself is just a form of JMP, but is limited to the above range of bytes.  Branching is conditional (you already know this), but it also saves a byte compared to JMP (JMP = 3 bytes, branch = 2 bytes).<br /><br />Hope this helps.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Tue May 18, 2010 1:32 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[meatloaf69]]></name></author>
<updated>2010-05-17T21:46:54-07:00</updated>
<published>2010-05-17T21:46:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61566#p61566</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61566#p61566"/>
<title type="html"><![CDATA[About memory page, Branching and cycle]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6395&amp;p=61566#p61566"><![CDATA[
I have read documentations regarding the memory map of nes. I know how they are devided (Zero page, stack, ram etc.). What i don't understand is memory paging,  how are memory being paged??<br /><br /><br />When i was implementing 6502 opcode BPL, documents tells me that "branch on result plus". From what i understand, branch if negative flag is not set. Here comes my question in mind "What the hell is branching??? <img src="http://forums.nesdev.com/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> ". What does branching do???<br /><br />my disassembler code:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&#91;C077&#93; LDX #$02<br />&#91;C079&#93; LDA $2000<br />&#91;C07C&#93; BPL $FB &lt;- this is where i got confused :lol:<br /></div><br /><br /><br />my last problem is about opcode cycle. the BPL cycle is 2 but the document tells me that "Add 1 if branch on same page. 2 if different."<br />Which brings me back to the first problem....<br /><br />Taken here:<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />http://6502.wikicomplete.info/bpl<br /></div><br /><br />Hope you guys can help me with this thnx <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> [/quote]<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4364">meatloaf69</a> — Mon May 17, 2010 9:46 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Replaced battery, shadowrun still randomly wipes save file.</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Replaced battery, shadowrun still randomly wipes save file.</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=10314">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=10314</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ehks</b> [ Sun Jul 28, 2013 10:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />sorry for the late response, got sick <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Is the capacitor still on the board?</div><br /><br />Yes. i left it on in hope of not needing to replace it. Its been out of the system for 5 whole days now, any idea how long I should wait? could i unplug the snes, put the cart in and turn it on? would this drain the battery/cap?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">since you have the board out of the cartridge shell, try just cleaning off those contacts with a pink pencil eraser. There is a major color difference between the top and bottom of each of the contact pads. I still stand behind just cleaning it with isopropyl alcohol, but finding a pencil eraser takes almost no effort.<br /><br />The pencil eraser will clean by purely a friction action (don't go overboard and rip up the traces), whereas alcohol will dissolve most of the crud, and then the remainder removed by friction/exposure from the cotton swab.<br /><br />If you have a bad contact to one of the middle Address lines (A11-ish) on powerup, but the game code can get far enough to where it checks the SRAM, then it might think the save data integrity is bad and then attempt to initialize it.</div><br /><br />I clean every game i play with swabs until the swab no longer becomes dirty (usually go through a few each game lol)<br /><br />As for the address lines, you would need to provide and explanation along with a suggestion to test as i don't know what ya mean (im not against reading. just dont know what ya mean)<br /><br />Thanks

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qwertymodo</b> [ Sun Jul 28, 2013 12:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, we could keep trying to debug the board, or you could just give up and consider other options.  Are you able to desolder the ROM cleanly?  I'd be willing to send you a compatible donor board if you like.  I have a bunch of crappy sports games I picked up for research, and now I'm pretty much at a point where I don't have any real use for them.  I'm sure I have a few 1A3B-13's lying around.  Or, if you're not able to do the transplant yourself, shoot me a PM, I'd be willing to do it for you.<br /><br />Edit:  Whaddya know, I have one with the ROM already pulled in my toolbox right now.  Want it?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ehks</b> [ Mon Jul 29, 2013 12:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Tomorrow will be 7 days its been out of a system. im gonna try it tomorrow and post back if it still has its files or not.<br /><br />I have made repros out of donor carts, but i have always cut the mask roms out. If i needed to save the rom from shadow run, I dont know how comfortable I would feel about doing that myself. Are ya within Canada?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qwertymodo</b> [ Tue Jul 30, 2013 1:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">ehks wrote:</div><div class="quotecontent">Tomorrow will be 7 days its been out of a system. im gonna try it tomorrow and post back if it still has its files or not.<br /><br />I have made repros out of donor carts, but i have always cut the mask roms out. If i needed to save the rom from shadow run, I dont know how comfortable I would feel about doing that myself. Are ya within Canada?</div><br /><br />I'm in the US.  If you've done desoldering before, it's a piece of cake.  If not (as it sounds), you probably don't want to start with something you actually care about...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ehks</b> [ Tue Jul 30, 2013 2:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />just popped the game in, both save files still in-tact. I have never saved a chip from a board (only removed by way of cutting) i have an old mobo around here im going to practice on.<br />sending it to the US might be worth it, but its not my game. i will ask my buddy what he thinks tomorrow.<br /><br />Thanks again XD

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Tue Jul 30, 2013 3:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Apropos solder: How good are your batteries new soldering points? On the photo it looks as if you solder was a bit 'sticky'. In case it was your first soldering project: Heat up both contacts (the battery leg, and the PCB), and add some fresh solder (that'll make it more fluid, old solder can get sticky, and isn't shiny). After that you should have a nice shiny soldering point.<br />If the soldering point is bad, it might happen that the battery looses contact (like when you shake/move the cartridge). A bad contact (on the battery, or elsewhere) would effect the cartridge &quot;works only sometimes&quot; effect.<br />Removing the CB capactitor could really help on testing such problems (at the moment the SRAM is double-backed, by the battery and by the capacitor - so you won't notice the problem even if the battery looses the contact for some seconds - if you remove CB then you'll see such problems more instantly).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>getafixx</b> [ Fri Sep 06, 2013 12:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've been having an identical problem with a Secret of Mana 2 cart that I made out of a Seiken Densetsu 3 donor cart. It works fine for a week, or sometimes only 15 minutes, and then the save files disappear. Sometimes its only one of the 3 save slots, other times its all of them. At first I thought this was a bad battery, so I replaced it with a brand new one....Same issue happened within a day. I copied the save file onto the cart using a Retrode from an .srm file I have for this game.<br /><br />Next I figured it was something on the board, so I transplanted the flash chip onto another compatible donor cart, added a new battery and tested it. Save file was there for a while, and then again within ~2 days it erased itself. Strange...<br /><br />Now, I have tested with 3 different SNES systems and i've seen it happen on all of them. All my other rpgs have kept their saves since the day I bought them and they have held their saves with no issues for 10-20 years with plenty of use.<br /><br />So if the board, the systems and the battery have been ruled out, what else can it be? Is it possible there could be a checksum or whatever conflict between my save file and the version of the rom on the chip causing this to happen?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri Sep 06, 2013 1:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are your cartridge contacts clean? Not dirty or oxidized? Is your SNES connector pretty clean? I have a Chrono Trigger game which we believed had a dead battery. Turns out the original battery still works great, but dirty contacts were causing the saves to be lost. After a cleaning it works fine.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>getafixx</b> [ Fri Sep 06, 2013 2:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I had thought of that, so I cleaned both the carts with isopropyl alcohol during my tests. All squeaky clean, still happened.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri Sep 06, 2013 2:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There are two ways battery-backed memory loses its contents:<br />* Temporary voltage sag below the minimum necessary to retain cell voltage, causing partial or total loss<br />* Failure to disable the RAM when it shouldn't be enabled (powerup and powerdown, or incorrect decoding from bad contacts), causing random writes and thus partial loss<br /><br />Do you ever lose saves with the game pak left in the SNES? What if you leave the SNES on but only ever use the reset button? How confident are you there's no mechanical issues?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>getafixx</b> [ Fri Sep 06, 2013 6:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> How confident are you there's no mechanical issues?</div><br /><br />Very confident. <br />Again, i've tested these carts on 3 different systems and it happened on all of them, unless all three systems have the same fault  <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> <br /><br />The only thing that I thought maybe had something to do with it was that I am writing the save file to the sram using the Retrode. But I figured if the save file shows up even once when the game is booted up then the sram took the file properly, and that any loss thereafter must be with the cart...but 2 donor carts doing the same thing? And again, all my other rpgs (ToP, FF3, Super Metroid, etc...) all work perfectly. FF3 for example has over 200 hours total on the cart played on this same system, and the save files are intact on the original battery.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Do you ever lose saves with the game pak left in the SNES?</div><br /><br />Yes, I left it in the system for 2 days and when I went to check it the saves were gone.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What if you leave the SNES on but only ever use the reset button?</div><br /><br />If I reset the game and check the save file is there. The fastest I've seen a save disappear was around 5 min after power down, haven't held the reset button for that long so I can't say for sure.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qwertymodo</b> [ Sat Sep 07, 2013 2:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Replaced battery, shadowrun still randomly wipes save fi</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Holding the reset button doesn't affect the Vcc line, it just pulls the reset line on the CPU, holding the CPU in a reset state, then jumping to the code's reset vector once the button is released.  So basically, this means that the issue is with power loss to the SRAM chip, not with spurious garbage writes, although that was already kind of apparent by the fact that time removed from the console seemed to be a factor in the save retention.  My only suggestion at this point, since you've already replaced the battery and capacitor, is to try using a MAD-1 donor instead of the '139 board you're currently using.  The MAD-1 incorporates SRAM battery power and /CS management into the IC package, rather than using discrete components like the '139 boards do.<br /><br />Edit: I'm confusing getafixx's situation with ehks'.  getafixx, can you post high-res photos of your PCB (both sides) so we can see if there are any visually apparent mechanical issues?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
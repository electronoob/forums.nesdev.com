<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Generic compression on NES - *done*</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESdev" href="http://forums.nesdev.com/feed.php?f=2" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Generic compression on NES - *done*" href="http://forums.nesdev.com/feed.php?f=2&amp;t=8045" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '5');
	var per_page = '15';
	var base_url = './viewtopic.php?f=2&amp;t=8045';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sun May 10, 2015 12:11 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=2&amp;t=8045&amp;start=60">Generic compression on NES - *done*</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=8045"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>5</strong> of <strong>7</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 92 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=2&amp;t=8045&amp;start=45">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=2&amp;t=8045">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=45">4</a><span class="page-sep">, </span><strong>5</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=90">7</a> &nbsp;<a href="./viewtopic.php?f=2&amp;t=8045&amp;start=75">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=2&amp;t=8045&amp;start=60&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=2&amp;t=8045&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=2&amp;t=8045&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p104267"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p104267">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=104267#p104267"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 07, 2012 8:20 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=9_1426464006.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 13836<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The old assemblers followed this rule:<br />1. Labels MUST NOT follow whitespace; they MUST be the first thing on the line. A space, not a colon, denotes a label's end.<br />2. Anything other than a label MUST have whitespace before it on the line.<br /><br />For example, <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.db</tt> is an instruction and <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.db 12,34</tt> at the start of a line thus violates 2.<br /><br />Newer assemblers use a colon to distinguish a label from an instruction.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p104268"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p104268">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=104268#p104268"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Dec 07, 2012 8:31 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 2048<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The old assemblers followed this rule:<br />1. Labels MUST NOT follow whitespace; they MUST be the first thing on the line. A space, not a colon, denotes a label's end.<br />2. Anything other than a label MUST have whitespace before it on the line.<br /><br />For example, <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.db</tt> is an instruction and <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.db 12,34</tt> at the start of a line thus violates 2.<br /><br />Newer assemblers use a colon to distinguish a label from an instruction.</div><br />Those are not the problems in this case case, though, the problem is there's no white space after the comma.</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">www.fauxgame.com</a>!</span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p104367"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p104367">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=104367#p104367"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Dec 09, 2012 2:12 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38.jpg" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 6321<br /><b>Location:</b> Jongny, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thank you very much for the feedback. I am very pleased that this project was useful to someone else !<br />I shall do the improvements you mention when I get the time to do it. Most of them sound pretty simple.<br /><br />The reason the .db parser is so picky is because I coded it all by myself and I didn't know too much how to do it so I coded something randomly that worked for typcial cases and didn't bother to stress test it.<br />I think a comma without a white space should definitely be acceptable, and I don't know why there is an error when you use Foo2. Perhaps &quot;foo&quot; is already defined, and I replace it by it's address before it's followed by a 2 which makes no sense ?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p104526"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p104526">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=104526#p104526"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Dec 11, 2012 2:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38.jpg" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 6321<br /><b>Location:</b> Jongny, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">OK I've made several of the changes you suggested, and have at least semi-valid reasons not to have changed the others :<br /><br />- Now all labels are followed by : in outputs files. Which will create weird labels ending with :: if you try to chain algorithm, but at least it will be visible that you chained algorithms that way.<br />- You can compress using only a single algorithm with the &quot;fix algorithm&quot; -fa option, followed by the number of the algorithm you want to use. I know numbers suck, but I wanted to keep it generic, that way any algorithms can be removed or added in a completely generic way. Calling them by name would have been possible but I'm lazy. In another version pehaps.<br />- You can force the output to the file you desire with the -o option. It's recommended to use this alongside with -fa, else you'd end up with a single file compressed with the last algorithm, each algorithm overwriting output from the previous one.<br />- You can change .db into .byte and .dw with .word with the -byte option<br /><br />Now what way NOT changed :<br />- .db is still picky about the format. The reason is that if I replaced commas with white spaces, and threat white spaces as separators, then .db 12 34 would have been the same as .db 12, 34 which is a problem. I'd have to put some trought to fix this problem so I can't do it on just a quick fix. For a future version maybe.<br /><br />- I have no idea what is causing the foo2 bug. I'd have to investigate this and release a fix<br /><br />- Minmax is still defined as data. The reason for this is that I really do a one to one compression, I compress a List&lt;List&lt;Byte&gt;&gt; into another List&lt;List&lt;Byte&gt;&gt;, both with associated labels. If I had to make the difference between parameters and data, it would not be a one to one compression, and things would not be as generic as they are now (i.e. some coding and decoding algorithm would need more parameters than just a List&lt;List&lt;Byte&gt;&gt; to work, which I did not want to have because they could not expand the same Enoding interface if this were to happen).<br /><br />The update is temporarly available at <a href="http://dl.dropbox.com/u/23465629/other_junk/CompressTools.7z" class="postlink">Dropbox</a>, and will be released on Romhacking.net very soon.<br /><br />I hope this will be useful to everyone, and I am looking forward to other feedback in order to improve this tool.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p104535"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p104535">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=104535#p104535"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Dec 11, 2012 4:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 2048<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">OK I've made several of the changes you suggested, and have at least semi-valid reasons not to have changed the others :</div><br />Thanks! The ones that you didn't change weren't a big deal anyways, I can work around them easily.</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">www.fauxgame.com</a>!</span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p104590"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p104590">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=104590#p104590"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Dec 12, 2012 8:15 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 2048<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">OK I tried the new version, here are some further suggestions.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">- Now all labels are followed by : in outputs files. Which will create weird labels ending with :: if you try to chain algorithm, but at least it will be visible that you chained algorithms that way.</div><br />Yes but then the files will be unusable without modification, so I don't think it's a good thing. Also this happens if the input file has labels ending with &quot;:&quot; in them. So I think you should at least strip the &quot;:&quot; from the end of labels read by the mini assembler, or simply (as a quick fix) strip all extra &quot;:&quot; from end of a label when outputting them.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">- You can compress using only a single algorithm with the &quot;fix algorithm&quot; -fa option, followed by the number of the algorithm you want to use. I know numbers suck, but I wanted to keep it generic, that way any algorithms can be removed or added in a completely generic way. Calling them by name would have been possible but I'm lazy. In another version pehaps.</div><br />If -fa is used, it would be nice if it also didn't output &quot;no_coding.asm&quot; file.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">- You can force the output to the file you desire with the -o option. It's recommended to use this alongside with -fa, else you'd end up with a single file compressed with the last algorithm, each algorithm overwriting output from the previous one.</div><br />I'd prefer if it was possible to set the extension of the file on the command line (e.g. &quot;-o foo.s&quot;) instead of it always appending &quot;.asm&quot; at the end of the filename.</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">www.fauxgame.com</a>!</span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p108264"></a>
				<b class="postauthor">Bisqwit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108264">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108264#p108264"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 24, 2013 7:58 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://bisqwit.iki.fi/kala/hloop.gif" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 14, 2011 1:09 am<br /><b>Posts:</b> 214
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here are some test results profiling Bregalad's CompressionTools for actual data in my <a href="http://bisqwit.iki.fi/cv2fin/" class="postlink">Simon's Quest Retranslation</a>.<br /><br />The methods listed in the bottom of this table are from <a href="http://www.romhacking.net/utilities/882/" class="postlink">CompressionTools</a> version 1.1. The others are the compressors I wrote in the specified Retranslation versions.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">FILE#:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp;3&nbsp; &nbsp; &nbsp; &nbsp;4&nbsp; &nbsp; &nbsp; &nbsp;5&nbsp; &nbsp; &nbsp; &nbsp;6&nbsp; &nbsp; &nbsp; &nbsp;7&nbsp; &nbsp; &nbsp; &nbsp;9&nbsp; &nbsp; &nbsp; &nbsp;10&nbsp; &nbsp; &nbsp; 11&nbsp; &nbsp; &nbsp; 13&nbsp; &nbsp; &nbsp; 14&nbsp; &nbsp; &nbsp; 15&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 16<br />FILE:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;blank&nbsp; &nbsp;title&nbsp; &nbsp;ending&nbsp; passwd&nbsp; passwd2 menu&nbsp; &nbsp; crPalFI crNtaFI crNtaEN srPalFI srNtaFI srNtaEN mapPAL&nbsp; mapNTA&nbsp; TOTAL:&nbsp; +VRAM<br />--------------- --------------------------------------------&nbsp; &nbsp; ----------------------- ----------------------- --------------&nbsp; ------<br />Uncompressed:&nbsp; &nbsp;2048&nbsp; &nbsp; 2048&nbsp; &nbsp; 1024&nbsp; &nbsp; 2048&nbsp; &nbsp; 1024&nbsp; &nbsp; 1016&nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp; 1024&nbsp; &nbsp; 1024&nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp; 2048&nbsp; &nbsp; 2048&nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp; 2048&nbsp; &nbsp; 17496&nbsp; &nbsp;74752<br />--------------- --------------------------------------------&nbsp; &nbsp; ----------------------- ----------------------- --------------&nbsp; ------<br />RLE:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp; 802&nbsp; &nbsp; &nbsp;531&nbsp; &nbsp; &nbsp;1524&nbsp; &nbsp; 705&nbsp; &nbsp; &nbsp;545&nbsp; &nbsp; &nbsp;33&nbsp; &nbsp; &nbsp; 635&nbsp; &nbsp; &nbsp;644&nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; 920&nbsp; &nbsp; &nbsp;919&nbsp; &nbsp; &nbsp;33&nbsp; &nbsp; &nbsp; 1266&nbsp; &nbsp; 8621&nbsp; &nbsp; 57280<br />BitpackRLE:&nbsp; &nbsp; &nbsp;16&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;27&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;-<br />EscapeRLE:&nbsp; &nbsp; &nbsp; 24&nbsp; &nbsp; &nbsp; 803&nbsp; &nbsp; &nbsp;547&nbsp; &nbsp; &nbsp;1530&nbsp; &nbsp; 709&nbsp; &nbsp; &nbsp;549&nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; 640&nbsp; &nbsp; &nbsp;649&nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; 922&nbsp; &nbsp; &nbsp;921&nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; 1266&nbsp; &nbsp; 8656&nbsp; &nbsp; -<br />BytePair:&nbsp; &nbsp; &nbsp; &nbsp;1026&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;685&nbsp; &nbsp; &nbsp;1275&nbsp; &nbsp; 662&nbsp; &nbsp; &nbsp;632&nbsp; &nbsp; &nbsp;23&nbsp; &nbsp; &nbsp; 681&nbsp; &nbsp; &nbsp;690&nbsp; &nbsp; &nbsp;31&nbsp; &nbsp; &nbsp; 1247&nbsp; &nbsp; 1247&nbsp; &nbsp; 31&nbsp; &nbsp; &nbsp; 1585&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-<br />RecBytePair:&nbsp; &nbsp; 22&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;469&nbsp; &nbsp; &nbsp;865&nbsp; &nbsp; &nbsp;386&nbsp; &nbsp; &nbsp;344&nbsp; &nbsp; &nbsp;21&nbsp; &nbsp; &nbsp; 464&nbsp; &nbsp; &nbsp;484&nbsp; &nbsp; &nbsp;31&nbsp; &nbsp; &nbsp; 682&nbsp; &nbsp; &nbsp;682&nbsp; &nbsp; &nbsp;31&nbsp; &nbsp; &nbsp; 1294&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-<br />TinyHuff:&nbsp; &nbsp; &nbsp; &nbsp;520&nbsp; &nbsp; &nbsp;949&nbsp; &nbsp; &nbsp;610&nbsp; &nbsp; &nbsp;1409&nbsp; &nbsp; 536&nbsp; &nbsp; &nbsp;567&nbsp; &nbsp; &nbsp;23&nbsp; &nbsp; &nbsp; 621&nbsp; &nbsp; &nbsp;630&nbsp; &nbsp; &nbsp;27&nbsp; &nbsp; &nbsp; 1155&nbsp; &nbsp; 1155&nbsp; &nbsp; 29&nbsp; &nbsp; &nbsp; 1476&nbsp; &nbsp; 9707&nbsp; &nbsp; -<br />TinyHuffFixed:&nbsp; 514&nbsp; &nbsp; &nbsp;985&nbsp; &nbsp; &nbsp;612&nbsp; &nbsp; &nbsp;1449&nbsp; &nbsp; 575&nbsp; &nbsp; &nbsp;577&nbsp; &nbsp; &nbsp;18&nbsp; &nbsp; &nbsp; 682&nbsp; &nbsp; &nbsp;691&nbsp; &nbsp; &nbsp;24&nbsp; &nbsp; &nbsp; 1293&nbsp; &nbsp; 1292&nbsp; &nbsp; 26&nbsp; &nbsp; &nbsp; 1486&nbsp; &nbsp; 10224&nbsp; &nbsp;-<br />Huffman:&nbsp; &nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;1070&nbsp; &nbsp; 799&nbsp; &nbsp; &nbsp;1450&nbsp; &nbsp; 717&nbsp; &nbsp; &nbsp;734&nbsp; &nbsp; &nbsp;67&nbsp; &nbsp; &nbsp; 721&nbsp; &nbsp; &nbsp;731&nbsp; &nbsp; &nbsp;53&nbsp; &nbsp; &nbsp; 1185&nbsp; &nbsp; 1184&nbsp; &nbsp; 56&nbsp; &nbsp; &nbsp; 1686&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-<br />ROM_LZ77:&nbsp; &nbsp; &nbsp; &nbsp;128&nbsp; &nbsp; &nbsp;772&nbsp; &nbsp; &nbsp;690&nbsp; &nbsp; &nbsp;1148&nbsp; &nbsp; 542&nbsp; &nbsp; &nbsp;619&nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; 648&nbsp; &nbsp; &nbsp;669&nbsp; &nbsp; &nbsp;34&nbsp; &nbsp; &nbsp; 1040&nbsp; &nbsp; 1036&nbsp; &nbsp; 34&nbsp; &nbsp; &nbsp; 923&nbsp; &nbsp; &nbsp;8315&nbsp; &nbsp; 63620<br />ROM_7bit_LZ77&nbsp; &nbsp;68&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;28&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;-<br />RAM_LZ77:&nbsp; &nbsp; &nbsp; &nbsp;34&nbsp; &nbsp; &nbsp; 554&nbsp; &nbsp; &nbsp;557&nbsp; &nbsp; &nbsp;728&nbsp; &nbsp; &nbsp;410&nbsp; &nbsp; &nbsp;395&nbsp; &nbsp; &nbsp;26&nbsp; &nbsp; &nbsp; 555&nbsp; &nbsp; &nbsp;572&nbsp; &nbsp; &nbsp;34&nbsp; &nbsp; &nbsp; 704&nbsp; &nbsp; &nbsp;703&nbsp; &nbsp; &nbsp;34&nbsp; &nbsp; &nbsp; 808&nbsp; &nbsp; &nbsp;6114&nbsp; &nbsp; 54844<br />StaticDic:&nbsp; &nbsp; &nbsp; 145&nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;524&nbsp; &nbsp; &nbsp;943&nbsp; &nbsp; &nbsp;500&nbsp; &nbsp; &nbsp;428&nbsp; &nbsp; &nbsp;24&nbsp; &nbsp; &nbsp; 550&nbsp; &nbsp; &nbsp;565&nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; 799&nbsp; &nbsp; &nbsp;799&nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; 1191&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;-<br />--------------- --------------------------------------------&nbsp; &nbsp; ----------------------- ----------------------- --------------&nbsp; ------<br />Tokumaru:&nbsp; &nbsp; &nbsp; &nbsp;147&nbsp; &nbsp; &nbsp;823&nbsp; &nbsp; &nbsp;569&nbsp; &nbsp; &nbsp;1663&nbsp; &nbsp; 757&nbsp; &nbsp; &nbsp;559*&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;686&nbsp; &nbsp; &nbsp;702&nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; &nbsp; &nbsp;113&nbsp; &nbsp; &nbsp;1129&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;1385&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp; &nbsp;44472*<br />pucrunch**:&nbsp; &nbsp; &nbsp;301&nbsp; &nbsp; &nbsp;710&nbsp; &nbsp; &nbsp;676&nbsp; &nbsp; &nbsp;779&nbsp; &nbsp; &nbsp;605&nbsp; &nbsp; &nbsp;555&nbsp; &nbsp; &nbsp;314&nbsp; &nbsp; &nbsp;689&nbsp; &nbsp; &nbsp;710&nbsp; &nbsp; &nbsp;325&nbsp; &nbsp; &nbsp;787&nbsp; &nbsp; &nbsp;786&nbsp; &nbsp; &nbsp;325&nbsp; &nbsp; &nbsp;951&nbsp; &nbsp; &nbsp;8513**&nbsp; -<br />appack.exe:&nbsp; &nbsp; &nbsp;31&nbsp; &nbsp; &nbsp; 469&nbsp; &nbsp; &nbsp;435&nbsp; &nbsp; &nbsp;533&nbsp; &nbsp; &nbsp;343&nbsp; &nbsp; &nbsp;295&nbsp; &nbsp; &nbsp;43&nbsp; &nbsp; &nbsp; 435&nbsp; &nbsp; &nbsp;460&nbsp; &nbsp; &nbsp;55&nbsp; &nbsp; &nbsp; 519&nbsp; &nbsp; &nbsp;518&nbsp; &nbsp; &nbsp;54&nbsp; &nbsp; &nbsp; 718&nbsp; &nbsp; &nbsp;4908&nbsp; &nbsp; 35196<br />--------------- --------------------------------------------&nbsp; &nbsp; ----------------------- ----------------------- --------------&nbsp; ------<br />1.3.8:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 33&nbsp; &nbsp; &nbsp; 679&nbsp; &nbsp; &nbsp;467&nbsp; &nbsp; &nbsp;1487&nbsp; &nbsp; 613&nbsp; &nbsp; &nbsp;484&nbsp; &nbsp; &nbsp;34&nbsp; &nbsp; &nbsp; 616&nbsp; &nbsp; &nbsp;625&nbsp; &nbsp; &nbsp;33&nbsp; &nbsp; &nbsp; 880&nbsp; &nbsp; &nbsp;879&nbsp; &nbsp; &nbsp;34&nbsp; &nbsp; &nbsp; 525&nbsp; &nbsp; &nbsp;7389&nbsp; &nbsp; 57341<br />2.3.1:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 45&nbsp; &nbsp; &nbsp; 377&nbsp; &nbsp; &nbsp;467&nbsp; &nbsp; &nbsp;1168&nbsp; &nbsp; 532&nbsp; &nbsp; &nbsp;311&nbsp; &nbsp; &nbsp;21&nbsp; &nbsp; &nbsp; 616&nbsp; &nbsp; &nbsp;625&nbsp; &nbsp; &nbsp;33&nbsp; &nbsp; &nbsp; 870&nbsp; &nbsp; &nbsp;869&nbsp; &nbsp; &nbsp;34&nbsp; &nbsp; &nbsp; 525&nbsp; &nbsp; &nbsp;6493&nbsp; &nbsp; 57312<br />--------------- --------------------------------------------&nbsp; &nbsp; ----------------------- ----------------------- --------------&nbsp; ------<br />Deflate:&nbsp; &nbsp; &nbsp; &nbsp; 16&nbsp; &nbsp; &nbsp; 435&nbsp; &nbsp; &nbsp;418&nbsp; &nbsp; &nbsp;468&nbsp; &nbsp; &nbsp;324&nbsp; &nbsp; &nbsp;259&nbsp; &nbsp; &nbsp;20&nbsp; &nbsp; &nbsp; 384&nbsp; &nbsp; &nbsp;397&nbsp; &nbsp; &nbsp;32&nbsp; &nbsp; &nbsp; 492&nbsp; &nbsp; &nbsp;491&nbsp; &nbsp; &nbsp;703&nbsp; &nbsp; &nbsp;435&nbsp; &nbsp; &nbsp;4523&nbsp; &nbsp; 35054<br />--------------- --------------------------------------------&nbsp; &nbsp; ----------------------- ----------------------- --------------&nbsp; ------</div><br /><br />Deflate is provided for curiosity only. Like RAM_LZ77, it is way too complex to be implemented on NES.<br />Tokumaru crashed for 32-byte files, and failed to work for the 1016-byte file. Increasing the size to 1024 produced the result of 559 bytes. It also complained that the 74 kilobyte VRAM file contained too many tiles, but hacking the source code increasing the limit from 512 tiles to 10000 tiles produced a successful compression (don't know if it is decompressable).<br />pucrunch includes a decompressor in each data, and thus has a large starting cost.<br /><br />From the CompressTools selection, there were quite a few codecs that failed to apply to one or more files, and as such they cannot be said to be general-purpose. And EscapeRLE got a &quot;verify error&quot; for files 0 and 1 (harmless, as the data was valid).<br /><br />The compression methods marked with a mere version number (1.3.8 and 2.3.1) stand for the compression method I wrote myself for Simon's Quest. Turns out it is not too bad a general-purpose compressor, though it is mostly oriented for compression of nametables. I also profiled it for the game's VROM data (with duplicate tiles removed), and it achieved a performance somewhere between ROM_LZ77 and RAM_LZ77.<br /><br />The compression format, basically RLE with tweaks, is documented below:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; ; LIT: Input byte c = 0..3F:<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; Put next (c+0x01) bytes verbatim, except BACKWARDS<br />&nbsp; &nbsp; &nbsp; &nbsp; ; END: Input byte c = 40:<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; End stream<br />&nbsp; &nbsp; &nbsp; &nbsp; ; SEQ: Input byte c = 41..7F:<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; Read byte b<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; Put b, (c-0x3F) times; add 1 to b after each iteration<br />&nbsp; &nbsp; &nbsp; &nbsp; ; DBL: Input byte c = 80..9F:<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; Read byte b1<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; Read byte b2<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; Put b1, (c-0x7D) times; swap b2 and b1 after each iteration<br />&nbsp; &nbsp; &nbsp; &nbsp; ; RUN: Input byte c = A0..FF:<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; Read byte b<br />&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; Put b, (0x101-c) times</div><br />The earlier version was almost the same, except RUN was 80..FF and DBL did not exist.<br />You can find the source code to the decompressor for the 1.3.8 version <a href="http://bisqwit.iki.fi/src/nes-ppu_rleinc.inc" class="postlink">here</a>. It assembles into 92 bytes, and uses 4 bytes from zeropage for parameters. It decompresses directly into PPU's $2007 port.<br />The 2.3.1 version can be found <a href="http://bisqwit.iki.fi/src/nes-ppu_rleinc_v2.inc" class="postlink">here</a>. It assembles into 123 bytes.<br />You can find an example compressor here: <!-- m --><a class="postlink" href="http://bisqwit.iki.fi/src/nes-ppu_rleinc_compress.php.txt">http://bisqwit.iki.fi/src/nes-ppu_rlein ... ss.php.txt</a><!-- m --><br /><br />If you wish to perform independent tests, you can download the files I used for testing <a href="http://bisqwit.iki.fi/cv2fin/dev/compressor_tests.zip" class="postlink">here</a>.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5043">Bisqwit</a> on Sat Mar 02, 2013 6:43 pm, edited 14 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5043"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p108266"></a>
				<b class="postauthor">Dwedit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108266">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108266#p108266"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 24, 2013 8:08 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=53.png" width="68" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 19, 2004 7:35 pm<br /><b>Posts:</b> 3204
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'd say test out APLIB, pucrunch, and LZMA (same compression as 7-zip) as well.  APLIB is fast for decompressing, since it uses a nice trick where 8-bit values are always byte aligned.  Obviously not as fast as RLE, but still good.<br /><br />APLIB is one of the best I've seen that has very low system requirements to decompress.<br /><br />Also test out &quot;<a href="http://forums.nesdev.com/viewtopic.php?p=54230" class="postlink">tokumaru_tile_compression</a>&quot; for graphics.</div>

					
						<div class="postbody"><br />_________________<br />Here come the fortune cookies!  Here come the fortune cookies!  They're wearing paper hats!</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=53"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p108268"></a>
				<b class="postauthor">Bisqwit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108268">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108268#p108268"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 24, 2013 8:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://bisqwit.iki.fi/kala/hloop.gif" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 14, 2011 1:09 am<br /><b>Posts:</b> 214
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">LZMA actually produced just 10 bytes smaller total than Deflate when I tested, for this data.<br />I should test APLIB, or rather my reimplementation thereof. I'm not sure how efficient it would be to rewrite it for 6502 though. The decompressor is neat and nice in 8086 assembler, but...<br />And I'll see about Tokumaru's project, as well. Thanks for the suggestion.<br /><br />EDIT: Added Tokumaru.<br />APLIB's algorithm (which is LZ-based by the way) is a bit of trouble due to its thousands of options, and the fact that the choice of those options very much determines how large the decompressor will be. My COM file packer tests those options in conjuction with the decompressor size and chooses the smallest combination. Oh, and LZ-based are trouble for 6502 in general.<br />(Disclaimer: My knowledge of APLIB comes almost entirely through reverse engineering the executable compressor of aPACK.)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5043"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p108277"></a>
				<b class="postauthor">Dwedit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108277">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108277#p108277"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 24, 2013 10:35 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=53.png" width="68" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 19, 2004 7:35 pm<br /><b>Posts:</b> 3204
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">If pucrunch was displaying &quot;standalone decompressor required&quot;, then it wasn't including any decompression code.</div>

					
						<div class="postbody"><br />_________________<br />Here come the fortune cookies!  Here come the fortune cookies!  They're wearing paper hats!</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=53"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p108284"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108284">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108284#p108284"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Feb 25, 2013 1:23 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 2048<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Bisqwit wrote:</div><div class="quotecontent">APLIB's algorithm (which is LZ-based by the way) is a bit of trouble due to its thousands of options, and the fact that the choice of those options very much determines how large the decompressor will be. My COM file packer tests those options in conjuction with the decompressor size and chooses the smallest combination. Oh, and LZ-based are trouble for 6502 in general.<br />(Disclaimer: My knowledge of APLIB comes almost entirely through reverse engineering the executable compressor of aPACK.)</div><br />There's a 6502 decompressor for apLib at <!-- m --><a class="postlink" href="http://jiggawatt.org/badc0de/decrunch/aplib_decrunch_6502.asm">http://jiggawatt.org/badc0de/decrunch/a ... h_6502.asm</a><!-- m -->, it works well enough (I used it in STREEMERZ). I'm not sure what compression options you're talking about, appack.exe I've been using (from apLib's &quot;examples&quot; directory) didn't give me any.</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">www.fauxgame.com</a>!</span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p108291"></a>
				<b class="postauthor">Bisqwit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108291">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108291#p108291"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Feb 25, 2013 7:11 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://bisqwit.iki.fi/kala/hloop.gif" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 14, 2011 1:09 am<br /><b>Posts:</b> 214
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">If pucrunch was displaying &quot;standalone decompressor required&quot;, then it wasn't including any decompression code.</div><br />It never did, unless I missed it.<br /><br /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">There's a 6502 decompressor for apLib at <!-- m --><a class="postlink" href="http://jiggawatt.org/badc0de/decrunch/aplib_decrunch_6502.asm">http://jiggawatt.org/badc0de/decrunch/a ... h_6502.asm</a><!-- m -->, it works well enough (I used it in STREEMERZ). I'm not sure what compression options you're talking about, appack.exe I've been using (from apLib's &quot;examples&quot; directory) didn't give me any.</div><br />Interesting.<br />The compression options may have been of my adding, then. It has been years.<br /><br />You can find my reimplementation of aPack, suitable for small .com files, here: <!-- m --><a class="postlink" href="http://bisqwit.iki.fi/src/apacker-com.cc">http://bisqwit.iki.fi/src/apacker-com.cc</a><!-- m --><br />To compile it, you need a C++ compiler and a libc implementation that supports positional arguments syntax for printf (e.g. %$4d). At runtime, it requires nasm.<br /><br />Some tests here, using my apacker reimplementation, aPACK v1.00, and appack.exe from aPLib v1.01, for a few DOS programs I've written in the last few years. All results include the decompressor code.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">|| What&nbsp; &nbsp; || Original || apacker-com || aPACK || appack<br />| synhili&nbsp; | 3961&nbsp; &nbsp; &nbsp; | 2610&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 2638&nbsp; &nbsp; | 2759*<br />| jainput&nbsp; | 9679&nbsp; &nbsp; &nbsp; | 5384&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 5826&nbsp; &nbsp; | 5915*<br />| inputter | 1620&nbsp; &nbsp; &nbsp; | 1396&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 1403&nbsp; &nbsp; | 1313*</div><br />Links: <a href="http://bisqwit.iki.fi/source/synhili.html" class="postlink">synhili</a>, <a href="http://bisqwit.iki.fi/source/jainput.html" class="postlink">jainput</a>, <a href="http://bisqwit.iki.fi/source/inputter.html" class="postlink">inputter</a><br />(Note: appack results do NOT include a decompressor. A decompressor weighs about 80-100 bytes.)<br /><br />The options include, if I read my code correctly:<br />- Whether a byte that is just the previous byte plus an increments of +1, -1, or +2, is encoded efficiently as a gamma<br />- Whether x86 near jumps (JMP NEAR) are translated into absolute format or not<br />- Whether x86 near calls  (CALL NEAR) are translated into absolute format or not<br />- Whether type-2 codepairs (appends) are supported or not<br />- 0, 1 or 2 special efficiently encoded choosable constant bytes (aplib has always one, which is a zerobyte). Removing the one extends the range of the special short-offset copy by one byte.<br />- Whether all literals are stored in a separate table, and literals in actual data are encoded as gamma offsets to that table.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5043">Bisqwit</a> on Sat Mar 02, 2013 6:38 pm, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5043"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p108347"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108347">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108347#p108347"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Feb 26, 2013 12:31 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38.jpg" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 6321<br /><b>Location:</b> Jongny, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I just want to say I released version 1.2, which will be available on Romhacking.net in a day or so.<br /><br />I implemented why thefox suggested (I am really sorry to have taken more than 2 months to do this, especially considering it took me about 1 hour to do it but you know December-January-February is usually one of those super busy periods of the year), and I fixed a bug bisqwit had found.<br /><br />I want to thank you both for having helped to improve CompressTools.<br /><br />Also,<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Like RAM_LZ77, it is way too complex to be implemented on NES.</div><br />RAM_LZ77 is not too complex for the NES, it can just use a lot of RAM, which would probably end up needing external SRAM.<br />If the source code is modified to force 8-bit references to the sliding window, then the coded could eat only 256 bytes of RAM, which is acceptable even without external SRAM. However :<br />1) the codec is likely to work very poorly with only 8-bit references<br />2) In order to decode block N you have to decode blocks 0, 1, .... upto N, so if N is large it can be very time consuming. It is currently the only algorithm in CompressTools that can't allow random access to individual blocks when decoding<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The compression methods marked with a mere version number (1.3.8 and 2.3.1) stand for the compression method I wrote myself for Simon's Quest. Turns out it is not too bad a general-purpose compressor, though it is mostly oriented for compression of nametables. I also profiled it for the game's VROM data (with duplicate tiles removed), and it achieved a performance somewhere between ROM_LZ77 and RAM_LZ77.</div><br />This sounds interesting. It sounds like this works very well with nametables, as it can also encode alternate patterns like ABABAB very efficiently.<br />I think daisy chaining any RLE variant over a BytePair encoding will give a very similar result.<br /><br />I am worried about the verify error you get with Escape RLE.<br />This means that the data was encoded, then decoded again, and that the result was different from the original data. At least my algorithms does this, instead of only encoding, like some compressors does ^^<br /><br />EDIT : Also, please not that now, to force an algorithm, you have to use names, not numbers (which makes more sense). For example what was -fa 0 in version 1.1 should be -fa RLE in version 1.2</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p108359"></a>
				<b class="postauthor">Bisqwit</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108359">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108359#p108359"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Feb 26, 2013 2:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://bisqwit.iki.fi/kala/hloop.gif" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 14, 2011 1:09 am<br /><b>Posts:</b> 214
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">I am worried about the verify error you get with Escape RLE.<br />This means that the data was encoded, then decoded again, and that the result was different from the original data. At least my algorithms does this, instead of only encoding, like some compressors does ^^</div><br />The problem with EscapeRLE appears to be with runs that are &gt;= 129 bytes long (i.e. they encode as $80..$FF). Your decoder reads them wrong.<br />A minimal test case that invokes this error is a file that contains 129 bytes of NUL.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5043"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p108360"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p108360">Re: Generic compression on NES - *done*</a></div><div style="float: right;"><a href="./viewtopic.php?p=108360#p108360"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Feb 26, 2013 2:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38.jpg" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 6321<br /><b>Location:</b> Jongny, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah, good old &quot;bug&quot; of java forcing bytes to signed.<br />I'll fix this right away, thank you very much.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=2&amp;t=8045&amp;start=60"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=8045"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>5</strong> of <strong>7</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 92 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=2&amp;t=8045&amp;start=45">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=2&amp;t=8045">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=45">4</a><span class="page-sep">, </span><strong>5</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=8045&amp;start=90">7</a> &nbsp;<a href="./viewtopic.php?f=2&amp;t=8045&amp;start=75">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing [Bot]</span> and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="8045" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2" selected="selected">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;Reproduction</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
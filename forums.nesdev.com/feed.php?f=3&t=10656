<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=10656" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2015-02-28T16:18:52-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=10656</id>
<entry>
<author><name><![CDATA[zeroone]]></name></author>
<updated>2015-02-28T16:18:52-07:00</updated>
<published>2015-02-28T16:18:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=142225#p142225</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=142225#p142225"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=142225#p142225"><![CDATA[
<div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"><br />Method #2 is conceptually similar to separating just the pop into a separate signal and applying a lowpass filter to it, the ramp will still make a sound, just a lot less noticeable. What I did when implementing it is whenever $4011 is written to, I work out the the size of the resulting jump in output, then I generate an additional signal that is an exactly opposite jump against it which will gradually fade back to zero, and mix that in. This way the true delta counter value is preserved, along with the nonlinear mix, but the pop is suppressed.<br /></div><br /><br />That technique was easy to implement and it worked well for me.  Thanks for this suggestion.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6828">zeroone</a> — Sat Feb 28, 2015 4:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2013-11-19T16:42:23-07:00</updated>
<published>2013-11-19T16:42:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=121165#p121165</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=121165#p121165"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=121165#p121165"><![CDATA[
<a href="http://wiki.nesdev.com/w/index.php/Talk:APU_DMC" class="postlink">Here's the discussion</a> regarding my empirical find on pops, if anyone's interested.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Tue Nov 19, 2013 4:42 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[ulfalizer]]></name></author>
<updated>2013-11-11T16:20:12-07:00</updated>
<published>2013-11-11T16:20:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120604#p120604</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120604#p120604"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120604#p120604"><![CDATA[
<div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"><br /><div class="quotetitle">ulfalizer wrote:</div><div class="quotecontent">Do people really find the pops in e.g. Castlevania II annoying? If you remove them, the drums seem to lose a lot of their &quot;punch&quot;.<br /></div><br /><br />With headphones on, yes, I very much dislike the Konami bass drum pops, and I am glad when I have the option to turn them off. Over a loudspeaker they don't bother me.</div><br /><br />I only use headphones, and I still prefer the pops. No accounting for taste I guess...<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5911">ulfalizer</a> — Mon Nov 11, 2013 4:20 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2013-11-11T10:17:08-07:00</updated>
<published>2013-11-11T10:17:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120592#p120592</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120592#p120592"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120592#p120592"><![CDATA[
<div class="quotetitle">ulfalizer wrote:</div><div class="quotecontent"><br />Do people really find the pops in e.g. Castlevania II annoying? If you remove them, the drums seem to lose a lot of their &quot;punch&quot;.<br /></div><br /><br />With headphones on, yes, I very much dislike the Konami bass drum pops, and I am glad when I have the option to turn them off. Over a loudspeaker they don't bother me.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Mon Nov 11, 2013 10:17 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mic_]]></name></author>
<updated>2013-11-11T05:36:44-07:00</updated>
<published>2013-11-11T05:36:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120563#p120563</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120563#p120563"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120563#p120563"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Do people really find the pops in e.g. Castlevania II annoying?<br /></div><br />I'm not trying to get rid of pops where they were noticeable even when played on a real NES. The pops I'm trying to get rid of are ones that shouldn't be there (i.e. that are resulting from flawed emulation), like the ones I have in Ninja Gaiden.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1181">mic_</a> — Mon Nov 11, 2013 5:36 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[ulfalizer]]></name></author>
<updated>2013-11-10T23:51:48-07:00</updated>
<published>2013-11-10T23:51:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120554#p120554</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120554#p120554"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120554#p120554"><![CDATA[
Do people really find the pops in e.g. Castlevania II annoying? If you remove them, the drums seem to lose a lot of their &quot;punch&quot;.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5911">ulfalizer</a> — Sun Nov 10, 2013 11:51 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2013-11-08T12:47:02-07:00</updated>
<published>2013-11-08T12:47:02-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120440#p120440</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120440#p120440"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120440#p120440"><![CDATA[
In fact, there's <em>another</em> method. I discovered it a while ago, but since it can't be replicated on hardware, I was fired against such tip <img src="http://forums.nesdev.com/images/smilies/icon_sad.gif" alt=":(" title="Sad" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Fri Nov 08, 2013 12:47 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mic_]]></name></author>
<updated>2013-11-07T09:08:00-07:00</updated>
<published>2013-11-07T09:08:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120373#p120373</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120373#p120373"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120373#p120373"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I notice these games don't use $4011 with their DPCM samples.<br /></div><br />Huh. I thought that was the only thing I had changed. I'll have to go through the code when I'm at home to see if there was anything else I modified that could've affected Darkman &amp; TMNT1 (because I used to have very noticeable pops in them as well).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1181">mic_</a> — Thu Nov 07, 2013 9:08 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2013-11-07T08:48:02-07:00</updated>
<published>2013-11-07T08:48:02-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120372#p120372</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120372#p120372"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120372#p120372"><![CDATA[
Though, looking at Ninja Gaiden and Ninja Gaiden 2, I notice these games don't use $4011 with their DPCM samples. Have you considered that the sound you're hearing is just the way the samples in these games sound? (Though Darkman does not either, so I am unsure how you found an improvement there.)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Thu Nov 07, 2013 8:48 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2013-11-07T08:32:55-07:00</updated>
<published>2013-11-07T08:32:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120371#p120371</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120371#p120371"/>
<title type="html"><![CDATA[Re: DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120371#p120371"><![CDATA[
1. The simplest way is just to ignore writes to $4011.<br /><br />2. A more complicated way might be to suppress the pop, but remember the target delta and add it back in slowly (basically replace the pop with a ramp).<br /><br />NSFPlay implements both of these if you want to see what they sound like (APU2 options: Enable $4011 register, Eliminate clicking noise).<br /><br /><br />The only real drawback with #1 is that with quiet DPCM samples you lose the changes in volume due to nonlinear mixing. With loud DPCM samples it doesn't matter because they will clamp at the edges and self-centre.<br /><br />Method #2 is conceptually similar to separating just the pop into a separate signal and applying a lowpass filter to it, the ramp will still make a sound, just a lot less noticeable. What I did when implementing it is whenever $4011 is written to, I work out the the size of the resulting jump in output, then I generate an additional signal that is an exactly opposite jump against it which will gradually fade back to zero, and mix that in. This way the true delta counter value is preserved, along with the nonlinear mix, but the pop is suppressed.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Thu Nov 07, 2013 8:32 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mic_]]></name></author>
<updated>2013-11-07T07:49:24-07:00</updated>
<published>2013-11-07T07:49:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120370#p120370</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120370#p120370"/>
<title type="html"><![CDATA[DMC pops]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10656&amp;p=120370#p120370"><![CDATA[
Perhaps this has been discussed as a part of other threads, but I figured I'd create a dedicated thread. The issue I have in my APU emulation is that there are awful pops when DMC samples are started. I've already implemented my emulation of writes of $4011 in such a way that the values aren't sent directly to the &quot;DAC&quot;, and this helps a great deal with some games (e.g. Darkman and TMNT). But there are still a number of games where DMC samples sound horrible (e.g. Ninja Gaiden and Ninja Gaiden 2).<br /><br />Is there any common method of masking DMC pops in NES emulators? Low-pass filtering, some sort of ramping..?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1181">mic_</a> — Thu Nov 07, 2013 7:49 am</p><hr />
]]></content>
</entry>
</feed>
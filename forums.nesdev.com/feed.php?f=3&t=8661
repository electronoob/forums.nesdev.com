<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=8661" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2012-02-27T16:23:07-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=8661</id>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-27T16:23:07-07:00</updated>
<published>2012-02-27T16:23:07-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90670#p90670</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90670#p90670"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90670#p90670"><![CDATA[
<div class="quotetitle">Zepper wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">But isn't supposed that you run a CPU clock and then run the PPU.<br /></div><br /><br />That's what I though... but no, you clock the PPU/APU firstly.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />If i clock the ppu first, how many clocks am i going to clock. <br />Maybe having read the cpu opcode cycle first clock the PPU and then finish the instruction?<br /></div><br /><br />Uh... you clock the PPU, then fetch the opcode. Each memory fetch/write will clock the PPU firstly.</div><br /><br />Outstanding!! i didn't know and thats the way it goes. <br />It throws me cpu timming errors now, but i think its not too difficult to solve (altough they are unknown errors) i think i'll solve it.<br />I know you are from Brazil and you have the same GMT than me, but i haven't slept trying to solve this problem. <br />Now im going to sleep for some hours with a  <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> on my face.<br />This night and tomorrow will be a hard coding and debugging day.<br /><br />Thanks Zepper!!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Mon Feb 27, 2012 4:23 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2012-02-27T15:07:39-07:00</updated>
<published>2012-02-27T15:07:39-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90667#p90667</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90667#p90667"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90667#p90667"><![CDATA[
<div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />But isn't supposed that you run a CPU clock and then run the PPU.<br /></div><br /><br />That's what I though... but no, you clock the PPU/APU firstly.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />If i clock the ppu first, how many clocks am i going to clock. <br />Maybe having read the cpu opcode cycle first clock the PPU and then finish the instruction?<br /></div><br /><br />Uh... you clock the PPU, then fetch the opcode. Each memory fetch/write will clock the PPU firstly.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Mon Feb 27, 2012 3:07 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-27T14:43:15-07:00</updated>
<published>2012-02-27T14:43:15-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90664#p90664</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90664#p90664"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90664#p90664"><![CDATA[
<div class="quotetitle">Zepper wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">I solved NMI SUPPRESSION, but it was a hack. <br />All test pass now exect NMI timming throwing me error #2. What a pain in the a*s!!<br /></div><br /><br />I had to clock the PPU/APU *before* the CPU clock.</div><br /><br />But isn't supposed that you run a CPU clock and then run the PPU.<br />If i clock the ppu first, how many clocks am i going to clock. <br />Maybe having read the cpu opcode cycle first clock the PPU and then finish the instruction?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Mon Feb 27, 2012 2:43 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2012-02-27T14:34:12-07:00</updated>
<published>2012-02-27T14:34:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90663#p90663</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90663#p90663"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90663#p90663"><![CDATA[
<div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />I solved NMI SUPPRESSION, but it was a hack. <br />All test pass now exect NMI timming throwing me error #2. What a pain in the a*s!!<br /></div><br /><br />I had to clock the PPU/APU *before* the CPU clock.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Mon Feb 27, 2012 2:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-26T23:46:03-07:00</updated>
<published>2012-02-26T23:46:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90621#p90621</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90621#p90621"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90621#p90621"><![CDATA[
<div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br /><div class="quotetitle">miker00lz wrote:</div><div class="quotecontent">my MMC3 emulation is crappy too, i've got something strange going on with my IRQ countdown stuff. it worked well in the original incarnation of my emulator. everything in my new one is 100x better than the old except that part.<br /><br />if you've got your emu that far along there probably isn't all that much i can help with, but i definitely wouldn't mind having a look at all. i was assuming you weren't able to get games working. many of the other guys here are much sharper with the NES stuff than i am, but i am learning. i've been doing this for a year and a half, some nesdev guys have been doing this since the 90's.<br /><br /><a href="http://sourceforge.net/projects/moarnes/" class="postlink">feel free to peek at my code too</a>, but just don't take it as gospel. it's not by any means perfect. it has very few comments by i tried hard to organize it well.<br /></div><br /><br />Ok thanks for the link i'll take a look to it. Take a look at your PM.</div><br /><br />Anyway as you say there are a lot of people since the 90. <br />I started the emu when i registered. I discountiued it a couple of times.<br />But things have changed since i registered. There was not test roms, info changed and a lot of things.<br /><br />Anyway i think is a project i can't handle to much. Im saying maybe im not too good at emulating!!  <img src="http://forums.nesdev.com/images/smilies/icon_sad.gif" alt=":(" title="Sad" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sun Feb 26, 2012 11:46 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-26T23:34:13-07:00</updated>
<published>2012-02-26T23:34:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90620#p90620</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90620#p90620"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90620#p90620"><![CDATA[
<div class="quotetitle">miker00lz wrote:</div><div class="quotecontent"><br />my MMC3 emulation is crappy too, i've got something strange going on with my IRQ countdown stuff. it worked well in the original incarnation of my emulator. everything in my new one is 100x better than the old except that part.<br /><br />if you've got your emu that far along there probably isn't all that much i can help with, but i definitely wouldn't mind having a look at all. i was assuming you weren't able to get games working. many of the other guys here are much sharper with the NES stuff than i am, but i am learning. i've been doing this for a year and a half, some nesdev guys have been doing this since the 90's.<br /><br /><a href="http://sourceforge.net/projects/moarnes/" class="postlink">feel free to peek at my code too</a>, but just don't take it as gospel. it's not by any means perfect. it has very few comments by i tried hard to organize it well.<br /></div><br /><br />Ok thanks for the link i'll take a look to it. Take a look at your PM.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sun Feb 26, 2012 11:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[miker00lz]]></name></author>
<updated>2012-02-26T23:25:56-07:00</updated>
<published>2012-02-26T23:25:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90619#p90619</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90619#p90619"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90619#p90619"><![CDATA[
my MMC3 emulation is crappy too, i've got something strange going on with my IRQ countdown stuff. it worked well in the original incarnation of my emulator. everything in my new one is 100x better than the old except that part.<br /><br />if you've got your emu that far along there probably isn't all that much i can help with, but i definitely wouldn't mind having a look at all. i was assuming you weren't able to get games working. many of the other guys here are much sharper with the NES stuff than i am, but i am learning. i've been doing this for a year and a half, some nesdev guys have been doing this since the 90's.<br /><br /><a href="http://sourceforge.net/projects/moarnes/" class="postlink">feel free to peek at my code too</a>, but just don't take it as gospel. it's not by any means perfect. it has very few comments by i tried hard to organize it well.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4572">miker00lz</a> — Sun Feb 26, 2012 11:25 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-26T23:11:27-07:00</updated>
<published>2012-02-26T23:11:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90616#p90616</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90616#p90616"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90616#p90616"><![CDATA[
<div class="quotetitle">miker00lz wrote:</div><div class="quotecontent"><br />so, does your emulator run any kind of games yet or have you not gotten to that yet? if something is preventing games from running feel free to upload all of the code, and maybe i can point out the issue to get you over this hurdle.<br /></div><br /><br />Yes it run many.<br />It emulates mapper 0, UNROM, CNROM, MMC1, MMC3 and AOROM.<br /><br />It runs and overall of 90% games (of course, the one that uses this mappers)<br /><br />MMC3 emulation is crapy, but it works for most games.<br />Sprite emulation is not good too. i never understood wiki explication about sprites.<br /><br />It emulates sound a little crapy too, but it sounds.<br /><br />The code isn't commented at all, and it is disorganized.<br />If you HAVE THE WILL to review this code  <img src="http://forums.nesdev.com/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> i'll preciate it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sun Feb 26, 2012 11:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[miker00lz]]></name></author>
<updated>2012-02-26T22:57:04-07:00</updated>
<published>2012-02-26T22:57:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90615#p90615</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90615#p90615"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90615#p90615"><![CDATA[
so, does your emulator run any kind of games yet or have you not gotten to that yet? if something is preventing games from running feel free to upload all of the code, and maybe i can point out the issue to get you over this hurdle.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4572">miker00lz</a> — Sun Feb 26, 2012 10:57 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-26T22:11:05-07:00</updated>
<published>2012-02-26T22:11:05-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90614#p90614</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90614#p90614"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90614#p90614"><![CDATA[
<div class="quotetitle">miker00lz wrote:</div><div class="quotecontent"><br />it gets worse from here.  <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /></div><br /><br />you don't say ...  <img src="http://forums.nesdev.com/images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very sad" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sun Feb 26, 2012 10:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[miker00lz]]></name></author>
<updated>2012-02-26T21:59:23-07:00</updated>
<published>2012-02-26T21:59:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90612#p90612</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90612#p90612"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90612#p90612"><![CDATA[
it gets worse from here.  <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4572">miker00lz</a> — Sun Feb 26, 2012 9:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-26T21:10:36-07:00</updated>
<published>2012-02-26T21:10:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90610#p90610</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90610#p90610"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90610#p90610"><![CDATA[
I solved NMI SUPPRESSION, but it was a hack. <br />All test pass now exect NMI timming throwing me error #2. What a pain in the a*s!!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sun Feb 26, 2012 9:10 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2012-02-26T16:42:46-07:00</updated>
<published>2012-02-26T16:42:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90589#p90589</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90589#p90589"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90589#p90589"><![CDATA[
Quick answer: create a log of your CPU running the test ROM, including an indication of when $2002 is read and the VBlank flag is <strong>set by the PPU</strong>. This way, you will see exactly <a href="http://www.youtube.com/watch?v=6NXnxTNIWkc&amp;t=1m24s" class="postlink">What's Going On</a>. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br />Well, that's how I solved my problem.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Sun Feb 26, 2012 4:42 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-26T14:33:46-07:00</updated>
<published>2012-02-26T14:33:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90583#p90583</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90583#p90583"/>
<title type="html"><![CDATA[me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90583#p90583"><![CDATA[
<div class="quotetitle">miker00lz wrote:</div><div class="quotecontent"><br />yeah that's a bit of a vague question, but my answer would be all of them. since NMI/vblank timing is based on how many CPU ticks are in one frame, and you can run any opcodes you want during the course of that frame, any of 'em could be the problem. maybe your opcode timings are not the problem at all, but to check that out try blargg's instruction timing test ROMs.<br /><br /><!-- m --><a class="postlink" href="http://blargg.parodius.com/nes-tests/instr_timing.zip">http://blargg.parodius.com/nes-tests/instr_timing.zip</a><!-- m --><br /><br />the only caveat of those tests is that they require an accurately working APU frame sequencer.<br /></div><br /><br />I have tested instr_timing version 3 and all giving a passing result<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sun Feb 26, 2012 2:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2012-02-26T14:32:31-07:00</updated>
<published>2012-02-26T14:32:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90582#p90582</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90582#p90582"/>
<title type="html"><![CDATA[Re: me again with and nmi question]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8661&amp;p=90582#p90582"><![CDATA[
<div class="quotetitle">cpow wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">I think is a big question, but please help!!<br /></div><br />Too big, yes.  Perhaps if you were having trouble with a particular test rom giving you a particular error?</div><br /><br />Im having problem with nmi_suppression test it trows me error #3, <br /><br />anyway i think i coudn't solve it the way i emulating my ppu, my vblank rutine is as:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">while &#40; Ppu.scanline &gt;= 241 &amp;&amp; Ppu.scanline &lt;= 260 &#41; <br />&#123; <br />   while&#40; Ppu.scanline_cycle &lt; 341&#41; <br />   &#123; <br /><br />   if &#40;Ppu.scanline == 241 &amp;&amp; Ppu.scanline_cycle == 0&#41;<br />   &#123;<br />   if &#40;Ppu.cant_setvblank == 0&#41;<br />   Ppu.on_vblank = 0x80;<br /><br />   if &#40;Ppu.on_vblank &amp;&amp; Ppu.nmi_onvblank&#41;<br />                SetNmiPending&#40;1&#41;;<br />   &#125;<br />      <br />   Ppu.scanline_cycle++; <br />   Ppu.ppu_timestamp += 1; <br /><br />      if&#40; Ppu.ppu_timestamp &gt;= runto&#41;<br />      return; <br />                &#125;<br /><br />   Ppu.scanline_cycle = 0; <br />   Ppu.scanline++;<br />                &#125; <br /><br />Ppu.cant_setvblank = 0;<br />Ppu.scanline = -1;<br />Ppu.ppu_timestamp -= 262 * 341;<br /></div><br /><br />This is the end of the frame on my runppu().<br />How i threah vblank and i think is a mess. No i don't think it. IT IS A MESS, but i cannot find a better way!.<br /><br />Note: cant_setvblank is only for detecting error #8 on vblank basic test. Its set just when $2002 vblank is going to trigger.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sun Feb 26, 2012 2:32 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Need assistance with MMC5 source code from N8 Everdrive</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Need assistance with MMC5 source code from N8 Everdrive</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=16317">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=16317</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infidelity</b> [ Mon Aug 07, 2017 3:02 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />KRIKzz released his mmc5 source code to the N8 Everdrive, due to my request of wanting support for larger mmc5 roms. A friend of mine is going to perform the hardware modifications, by replacing the 512kb prg/chr srams, with 1024kb chips. The firmware aspect is out of my league. The Everdrive uses an fpga chip, and the mmc5 source code I was told is far from perfect.<br /><br />Is there anyone that would be willing to look at the mmc5 source code, to see what needs to be added or enhanced? This could open the door for full mmc5 capability on a flashcart, and stop the excessive destruction of rare mmc5 games, to get mmc5 creations (such as my own) to work on real hardware. I'll paste the link to the development section to obtain the source. Thanks for reading! <br /><br /><a href="http://krikzz.com/pub/support/everdrive-n8/development/" class="postlink">http://krikzz.com/pub/support/everdrive-n8/development/</a><br /><br />KRIKzz mentioned what I believe is the program used to work with the files.<br /><br />&quot;Project files for Quartus II v13&quot;

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byemu</b> [ Mon Aug 07, 2017 5:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Good idea, Maybe can replace to IS61WV10248BLL.<br />I also want to support more PRG.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infidelity</b> [ Mon Aug 07, 2017 5:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />He's contemplating a revision with either 4 or 8mb chips. But for now he's laid out for me a &quot;do-it-yourself&quot; schematic for what needs to be done to the motherboard. So within a couple weeks my friend should have the hardware modifications done, and then we can test my mmc5 2mb roms, to see what mmc5 functions are present, and lacking.<br /><br />Which is why I'm hoping before the cartridge is complete, if anyone with language skills would be willing to examine the existing mmc5 source code, and would modify/edit/expand/etc the code, so that the emulation of the mmc5 mapper would be on par with emulation you get from FCEUX, Nestopia, Nintendulator.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zansatsu0</b> [ Mon Aug 07, 2017 8:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infidelity wrote:</div><div class="quotecontent">if anyone with language skills would be willing to examine the existing mmc5 source code, and would modify/edit/expand/etc the code, so that the emulation of the mmc5 mapper would be on par with emulation you get from FCEUX, Nestopia, Nintendulator.</div><br /><br />I've been following this thread:<br /><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=15931" class="postlink">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=15931</a><br /><br />I'm not volunteering anyone, but there are two users in that thread that are figuring out Koei Bytecode intricacies. Unless I miss my guess, they appear to have a deep understanding of the MMC5.<br /><br />I would LOVE to be able to play the Legend of Link on original hardware without ruining a rare MMC5 cart. Developments like this thread and the one linked above will eventually lead to custom mappers and possibly even MMC5 repro boards that would make cartridge cannibalism a thing of the past. That's an exciting prospect. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infidelity</b> [ Mon Aug 07, 2017 10:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It is very exciting indeed. We are on the verge of having full mmc5 capability on a flashcart. The only missing piece now, is someone with fpga chip experience, that would examine KRIKzz source, and add on to the mmc5 source. That's all that's missing, and I hope this reaches out to someone with that experience, and the want, to see the mmc5 thrive on the N8 Everdrive, and spare the mmc5 cartridges in the world.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Aug 07, 2017 10:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />My recollection is that both the PowerPak and N8 use up all the available I/O on their corresponding FPGAs.<br /><br />The PowerPak doesn't really have any spare pins, because it could support the MMC5's &quot;SL&quot; mode. The N8, OTOH, adds the possibility of banking PRG in 1KiB chunks but couldn't support &quot;SL&quot; mode.<br /><br />For the N8, one of those pins (PRG A12, A11, A10, called &quot;prg_map&quot; in the source there) has to be stolen and repurposed as PRG A19 ... and then again for CHR A19 ... to get 1 MiB support. (The specifics of the &quot;do-it-yourself&quot; schematic matter)<br /><br />The MMC5 core itself already has reserved space for the full 1MiB supported by the MMC5 (&quot;chr_addr[19:0]&quot;) even though the most significant bit isn't always connected ( <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">assign chr_addr[1<span style="color: #FF0000">8</span>:10] = sprite_mode ? &#40;sprt_fetch ? chr_ax[<span style="color: #FF0000">8</span>:0] : chr_bx[<span style="color: #FF0000">8</span>:0]&#41; : last_set ? chr_bx[<span style="color: #FF0000">8</span>:0] : chr_ax[<span style="color: #FF0000">8</span>:0];</tt>)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infidelity</b> [ Mon Aug 07, 2017 11:07 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here is the convo on the schematic.<br /><br /><a href="http://krikzz.com/forum/index.php?topic=6645.15" class="postlink">http://krikzz.com/forum/index.php?topic=6645.15</a><br /><br />It's pretty much pg2 &amp; 3 that do the most describing. Everything in that thread according to KRIKzz  (on the hardware level) is there to accomplish getting 2mb roms to load.<br /><br />The only thing left, is for someone to analyze the fpga mmc5 source code, and see what additions need to be made. <br /><br />He said the code is &quot;far from perfect&quot; so idk if the vertical split screen address is missing, if $5130 is not implemented which allows you to load huge amounts of chr within a 1024kb chip, whether certain ExRAM functions are there or not there, etc. I'm no good in this department. So that's why I'm trying to spread the word on this, to see if anyone is willing to take this to the next level (via firmware) because Ben Boldt is able to perform the hardware modifications needed to make the N8 Everdrive load larger roms.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>calima</b> [ Mon Aug 07, 2017 11:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Forgive me if this has already been discussed once or twice (or a hundred times), but would it be less work to write it from the ground up than to do maybe-impossible fpga modifications? As a hack, it surely has inefficiencies a ground-up design would not have.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Aug 07, 2017 11:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Honestly, the verilog is almost all the way there already.<br /><br />It just needs <br />* two lines in the QSF file to map whatever physical pins to prg_map[9] and chr_map[9]<br />* adjustments in main.v to widen prg_map and chr_map from 9 bits wide to 10 bits wide<br />* adjustments in map_255.v (the loader?) and map_5.v to<br />** connect prg_addr[19] and chr_addr[19] along with the rest of the bus<br />** extend prg_size and chr_size to 6 and 7 bits respectively to correctly handle less-than-full-size images<br /><br />And that's basically it.<br /><br /><div class="quotetitle">calima wrote:</div><div class="quotecontent">As a hack, it surely has inefficiencies a ground-up design would not have.<br /></div>Why are you assuming it's a hack?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>calima</b> [ Mon Aug 07, 2017 12:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Because it's on romhacking.net, listed as a hack?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Aug 07, 2017 12:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />... You're complaining about Infidelity releasing romhacks that target 1 MiB MMC5 in a thread about specifically modifying an everdrive N8 to support the same 1 MiB that the hardware MMC5 does?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infidelity</b> [ Mon Aug 07, 2017 1:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thank you lidnariq for all that information! <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>calima</b> [ Tue Aug 08, 2017 12:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">... You're complaining about Infidelity releasing romhacks that target 1 MiB MMC5 in a thread about specifically modifying an everdrive N8 to support the same 1 MiB that the hardware MMC5 does?</div><br />Yes. It's a clear decision that makes it unavailable on all current flashcarts, unless this modification succeeds, making it obviously relevant.<br /><br />edit: And even if the mod succeeds, it's not something most users will be able to do.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infidelity</b> [ Wed Aug 09, 2017 2:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, I'm now at a roadblock with no timeframe to when I can go further. lidnariq revealed that the OS needs to be adjusted. I asked KRIKzz if he would be willing to share the source, and he refused (which I respect and understand). So I asked if he would make the change himself for me in the OS. I'm assuming he looked through it, stated it is too much work for 1 custom cart. It is very unfortunate, and I would've never purchased the cart knowing this OS issue at the time. So, Ben Boldt is still going to perform the hardware mod on the everdrive, then I need to find someone with FPGA experience, that will adjust the mmc5 source files for me, so that my cartridge can at least be at that state. I didn't want to keep pressing him on the subject, but I feel this isn't just for 1 custom cart. The blueprints have been laid out for anyone, on how to do this mod. It's unfortunate that he went this far with giving the mmc5 source, figuring the hardware schematic, only to be stopped by his undesired feelings on adjusting the OS. So that's where the project stands now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Great Hierophant</b> [ Wed Aug 09, 2017 12:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need assistance with MMC5 source code from N8 Everdrive</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />To be fair to Krikzz, sharing mapper code is one thing, but the core of his system is another.  Given that he makes his living selling EverDrives, he does not want to make life any easier for the clone makers and potential competitors.  Plus, if you change the OS, you make break stuff unintentionally, whereas if you change a mapper, you would only just break a subset of games.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
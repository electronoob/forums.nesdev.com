<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - issue with ppu drawing vertical tiles (RESOLVED)</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Newbie Help Center" href="http://forums.nesdev.com/feed.php?f=10" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - issue with ppu drawing vertical tiles (RESOLVED)" href="http://forums.nesdev.com/feed.php?f=10&amp;t=17145" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:46 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=10&amp;t=17145">issue with ppu drawing vertical tiles (RESOLVED)</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=17145"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 13 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=10&amp;t=17145&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=10&amp;t=17145&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=10&amp;t=17145&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215115"></a>
				<b class="postauthor">infidelity</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215115">issue with ppu drawing vertical tiles (RESOLVED)</a></div><div style="float: right;"><a href="./viewtopic.php?p=215115#p215115"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 5:52 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 01, 2013 4:46 am<br /><b>Posts:</b> 301
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">im trying to draw vertical tiles for a score value. my project starts out with $2000ppu having the vram draw with an increment of 1. Now I am able to turn the ppu rendering off, and write anything to any nametable.<br /><br />now when i want to draw verticaly, the vram engine inside the game recognizes my attempt to change the increment mode of $2000ppu to (8... 84..) #$8C. <br /><br />It changes and i am able to see the tiles in-game instantnly drawn vertically. However, when it is complete, i will get this millisecond white flash.<br /><br />My question is, am i writing too much to the vram with the ppu rendering on? Or am i missing additional code to stop that flashing from happening?<br /><br />Here is the tile data that is loaded, it includes the high/low NT address, the incremet mode with number of tiles, and the tiles.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">206484 00 00 00 00 <br />206584 00 00 00 00 <br />206784 00 00 00 00 <br />206884 00 00 00 00 <br />206A84 00 00 00 00 <br />206B84 00 00 00 00 FF (FF signifies the end of the reading tile data)<br /></div> <br /><br />This is the code within the vram engine that changes the bits to $2000ppu for 32+ increments<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01:FE61: A5 FF&nbsp; &nbsp; &nbsp;LDA $FF = #$88<br />01:FE63: 09 04&nbsp; &nbsp; &nbsp;ORA #$04<br />01:FE65: B0 02&nbsp; &nbsp; &nbsp;BCS $FE69<br />01:FE67: 29 FB&nbsp; &nbsp; &nbsp;AND #$FB<br />01:FE69: 8D 00 20&nbsp; STA $2000 = #$8C<br /></div><br /><br />And this is the code at the beginning of my NMI<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01:C083: AD 02 20&nbsp; LDA $2002 = #$00<br />01:C086: A5 FF&nbsp; &nbsp; &nbsp;LDA $FF = #$8C<br />01:C088: 29 F8&nbsp; &nbsp; &nbsp;AND #$F8<br />01:C08A: 8D 00 20&nbsp; STA $2000 = #$88<br />01:C08D: 85 FF&nbsp; &nbsp; &nbsp;STA $FF = #$88<br /></div><br /><br />Now, it seems that if I take away the last vertical string of vram tiles to be drawn in my score, (206B84 00 00 00 00) the screen does not flash or shake after the drawing is completed. I'm worried that I am writing too much to the vram, but I feel that I am not.<br /><br />Any help would be greatly appreciated! I wanted to do as much troubleshooting on my own as I could before posting here, but ive wasted too much time, and need help. Thanks!</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5898">infidelity</a> on Tue Mar 13, 2018 8:20 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5898"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215119"></a>
				<b class="postauthor">Denine</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215119">Re: issue with ppu drawing vertical tiles</a></div><div style="float: right;"><a href="./viewtopic.php?p=215119#p215119"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 6:16 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Feb 17, 2010 5:42 pm<br /><b>Posts:</b> 383
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Screen shaking does sound like you run out of vblank time for your updates.<br />You should be able to upload your amount of data quite comfortably, though.<br />In your NMI handler, do you do anything before uploading your data? If so, it may push your updates out of Vblank time.<br />Did you try to upload same amount of data in horizontal line instead of vertical and see if problem is still there?<br />Also, the data tile you provided seems to not include &quot;the high/low NT address, the incremet mode with number of tiles, and the tiles.&quot;<br />Unless all of these are zeros, which would mean you dont try to upload to NT but to chr instead?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4239"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215121"></a>
				<b class="postauthor">infidelity</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215121">Re: issue with ppu drawing vertical tiles</a></div><div style="float: right;"><a href="./viewtopic.php?p=215121#p215121"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 6:27 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 01, 2013 4:46 am<br /><b>Posts:</b> 301
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here is my NMI I put together, (taken from FCEUX debugger) I'm still trying to learn how to have everything setup properly. But so far I've had excellent results with an IRQ, palettes, the vram engine. It's just drawing the amount of vertical lines that is causing an issue. Again I feel i'm not overkilling the drawing routine, so I feel I'm missing something somewhere... And I my previous reply I did include the High/low address values for the Nametable addresses. and increment mode. Example (206484 00 00 00 00 ) 20=HInt, 64=LOnt, 84=bit 8# to signify vertical drawing &amp; #4 bit signifying number of tiles to draw, 00 00 00 00=tiles.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp;01:C000: 48&nbsp; &nbsp; &nbsp; &nbsp; PHA<br />&nbsp;01:C001: 8A&nbsp; &nbsp; &nbsp; &nbsp; TXA<br />&nbsp;01:C002: 48&nbsp; &nbsp; &nbsp; &nbsp; PHA<br />&nbsp;01:C003: 98&nbsp; &nbsp; &nbsp; &nbsp; TYA<br />&nbsp;01:C004: 48&nbsp; &nbsp; &nbsp; &nbsp; PHA<br />&nbsp;01:C005: A9 00&nbsp; &nbsp; &nbsp;LDA #$00<br />&nbsp;01:C007: 8D 03 20&nbsp; STA $2003 = #$00<br />&nbsp;01:C00A: A9 02&nbsp; &nbsp; &nbsp;LDA #$02<br />&nbsp;01:C00C: 8D 14 40&nbsp; STA $4014 = #$02<br /><br />&nbsp;01:C00F: 20 30 FE&nbsp; JSR $FE30 ;to vram engine<br />&nbsp;01:C012: 20 83 C0&nbsp; JSR $C083 ;AD0220 A5FF 29F8 8D0020 85FF 60<br /><br />&nbsp;01:C015: A5 EC&nbsp; &nbsp; &nbsp;LDA $EC = #$00<br />&nbsp;01:C017: 8D 00 C0&nbsp; STA $C000 = #$48<br />&nbsp;01:C01A: 8D 01 C0&nbsp; STA $C001 = #$8A<br />&nbsp;01:C01D: A9 01&nbsp; &nbsp; &nbsp;LDA #$01<br />&nbsp;01:C01F: 8D 01 E0&nbsp; STA $E001 = #$00<br />&nbsp;01:C022: A6 ED&nbsp; &nbsp; &nbsp;LDX $ED = #$00<br />&nbsp;01:C024: BD F0 FE&nbsp; LDA $FEF0,X @ $FEF0 = #$F6<br />&nbsp;01:C027: 85 EE&nbsp; &nbsp; &nbsp;STA $EE = #$00<br />&nbsp;01:C029: BD F1 FE&nbsp; LDA $FEF1,X @ $FEF1 = #$FE<br />&nbsp;01:C02C: 85 EF&nbsp; &nbsp; &nbsp;STA $EF = #$00<br />&nbsp;01:C02E: 58&nbsp; &nbsp; &nbsp; &nbsp; CLI<br />&nbsp;01:C02F: A5 FE&nbsp; &nbsp; &nbsp;LDA $FE = #$00<br />&nbsp;01:C031: 8D 01 20&nbsp; STA $2001 = #$00<br />&nbsp;01:C034: A2 05&nbsp; &nbsp; &nbsp;LDX #$05<br />&nbsp;01:C036: 8E 00 80&nbsp; STX $8000 = #$4C<br />&nbsp;01:C039: B5 F0&nbsp; &nbsp; &nbsp;LDA $F0,X @ $00F0 = #$00<br />&nbsp;01:C03B: 8D 01 80&nbsp; STA $8001 = #$6C<br />&nbsp;01:C03E: CA&nbsp; &nbsp; &nbsp; &nbsp; DEX<br />&nbsp;01:C03F: 10 F5&nbsp; &nbsp; &nbsp;BPL $C036<br />&nbsp;01:C041: A2 00&nbsp; &nbsp; &nbsp;LDX #$00<br />&nbsp;01:C043: AD 02 20&nbsp; LDA $2002 = #$88<br />&nbsp;01:C046: A9 3F&nbsp; &nbsp; &nbsp;LDA #$3F<br />&nbsp;01:C048: 8D 06 20&nbsp; STA $2006 = #$00<br />&nbsp;01:C04B: 8E 06 20&nbsp; STX $2006 = #$00<br />&nbsp;01:C04E: A0 20&nbsp; &nbsp; &nbsp;LDY #$20<br />&nbsp;01:C050: BD C0 06&nbsp; LDA $06C0,X @ $06C0 = #$00<br />&nbsp;01:C053: 8D 07 20&nbsp; STA $2007 = #$00<br />&nbsp;01:C056: E8&nbsp; &nbsp; &nbsp; &nbsp; INX<br />&nbsp;01:C057: 88&nbsp; &nbsp; &nbsp; &nbsp; DEY<br />&nbsp;01:C058: D0 F6&nbsp; &nbsp; &nbsp;BNE $C050<br />&nbsp;01:C05A: A9 3F&nbsp; &nbsp; &nbsp;LDA #$3F<br />&nbsp;01:C05C: 8D 06 20&nbsp; STA $2006 = #$00<br />&nbsp;01:C05F: 8C 06 20&nbsp; STY $2006 = #$00<br />&nbsp;01:C062: 8C 06 20&nbsp; STY $2006 = #$00<br />&nbsp;01:C065: 8C 06 20&nbsp; STY $2006 = #$00<br />&nbsp;01:C068: A5 FD&nbsp; &nbsp; &nbsp;LDA $FD = #$00<br />&nbsp;01:C06A: 8D 05 20&nbsp; STA $2005 = #$00<br />&nbsp;01:C06D: A5 FC&nbsp; &nbsp; &nbsp;LDA $FC = #$00<br />&nbsp;01:C06F: 8D 05 20&nbsp; STA $2005 = #$00<br />&nbsp;01:C072: 20 90 C0&nbsp; JSR $C090&nbsp; &nbsp; &nbsp; &nbsp; ;game code<br />&nbsp;01:C075: E6 F6&nbsp; &nbsp; &nbsp;INC $F6 = #$00&nbsp; ;frame counter<br />&nbsp;01:C077: 20 8E FF&nbsp; JSR $FF8E&nbsp; &nbsp; &nbsp; &nbsp; ;joypad code<br />&nbsp;01:C07A: 20 00 80&nbsp; JSR $8000&nbsp; &nbsp; &nbsp; &nbsp;;sound engine<br />&nbsp;01:C07D: 68&nbsp; &nbsp; &nbsp; &nbsp; PLA<br />&nbsp;01:C07E: A8&nbsp; &nbsp; &nbsp; &nbsp; TAY<br />&nbsp;01:C07F: 68&nbsp; &nbsp; &nbsp; &nbsp; PLA<br />&nbsp;01:C080: AA&nbsp; &nbsp; &nbsp; &nbsp; TAX<br />&nbsp;01:C081: 68&nbsp; &nbsp; &nbsp; &nbsp; PLA<br />&nbsp;01:C082: 40&nbsp; &nbsp; &nbsp; &nbsp; RTI<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5898"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215124"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215124">Re: issue with ppu drawing vertical tiles</a></div><div style="float: right;"><a href="./viewtopic.php?p=215124#p215124"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 7:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">instead of all of this<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01:C05A: A9 3F&nbsp; &nbsp; &nbsp;LDA #$3F<br />&nbsp;01:C05C: 8D 06 20&nbsp; STA $2006 = #$00<br />&nbsp;01:C05F: 8C 06 20&nbsp; STY $2006 = #$00<br />&nbsp;01:C062: 8C 06 20&nbsp; STY $2006 = #$00<br />&nbsp;01:C065: 8C 06 20&nbsp; STY $2006 = #$00<br />&nbsp;01:C068: A5 FD&nbsp; &nbsp; &nbsp;LDA $FD = #$00<br />&nbsp;01:C06A: 8D 05 20&nbsp; STA $2005 = #$00<br />&nbsp;01:C06D: A5 FC&nbsp; &nbsp; &nbsp;LDA $FC = #$00<br />&nbsp;01:C06F: 8D 05 20&nbsp; STA $2005 = #$00<br /></div><br />try this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda WhateverValueYouWantFor2000;Selects the nametable with the lowest two bits<br />sta $2000;I'm dumb, I forgot this and had to edit it in.<br />lda $FD<br />sta $2005<br />lda $FC<br />sta $2005<br /></div><br />The short, simple version:<br />When you write to $2005, $2006, and $2000, internal PPU scroll bits are affected. $2006 can affect the nametable bits that were written previously to $2000. So you should write $2000 after all your $2006 writes are done. After your write to $2000, you write the X value for scroll to $2005, then you write the Y value for scroll to $2005. Nothing else is needed. (In your NMI, at the top of the screen.)<br /><br />If you want to do freaky midscreen stuff, you write to $2006, $2005, $2005, $2006 in order. The four writes you have to $2006 with the two to $2005 seems like a lot of extra stuff.<br /><br />Edit: Here's the wiki page that explains all of that, and more: <!-- m --><a class="postlink" href="https://wiki.nesdev.com/w/index.php/PPU_scrolling">https://wiki.nesdev.com/w/index.php/PPU_scrolling</a><!-- m --><br />But don't let it confuse you. For the top of the screen, all you need is a write to $2000, and two writes to $2005.<br /><br />Edit2: For what it's worth, you actually don't need to guess about whether or not your NMI is running out of time. <a href="http://forums.nesdev.com/viewtopic.php?t=6773" class="postlink">NintendulatorDX</a> has timers. At the start of your NMI you can do sta $4020, and after the write to $2005 I suggested you can do sta $4030 and it will tell you in the debugger (debug, disassembly, timers) how many cycles your NMI ran for. If it's close to around ~2270, you're out of time. Otherwise, it's something else. We can't really tell from what you posted. Those jsr instructions could go to very slow subroutines.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=3504">Kasumi</a> on Tue Mar 13, 2018 7:52 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215127"></a>
				<b class="postauthor">infidelity</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215127">Re: issue with ppu drawing vertical tiles</a></div><div style="float: right;"><a href="./viewtopic.php?p=215127#p215127"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 7:51 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 01, 2013 4:46 am<br /><b>Posts:</b> 301
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">yeah I'm now pretty confused after reading that. I thought vram was supposed to be done early in the NMI? The vram engine I jsr to, performs the bit change to $2000, to allow the vertical drawing. So i'm guessing I should reshift how my NMI is arranged? Your example confused me too, you talk about write anything to $2000, then my writes to $2005 twice. So am I to do, load value, store to $2000, load x, store to $2005, load y, store to $2005?<br /><br />I tried reading that wiki yesterday and it's very complex, so i'm doing the best I can, any additional help would be great, thanks!<br /><br />EDIT: I came really close by removing/editing certain writes to $2006, but then rebooting caused my screen to be grayed out. But the flashing stopped during my vertical tile writes...</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5898">infidelity</a> on Tue Mar 13, 2018 7:58 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5898"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215129"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215129">Re: issue with ppu drawing vertical tiles</a></div><div style="float: right;"><a href="./viewtopic.php?p=215129#p215129"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 7:56 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> I thought vram was supposed to be done early in the NMI?</div><br />It is! And nothing I said changes that. You have ~2270 cycles to do all your writes to $2006, $2007, $2005, and $2000 if you want everything done before the screen starts rendering.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So am I to do, load value, store to $2000, load x, store to $2005, load y, store to $2005?</div><br />Exactly. And this needs to be done after all your other $2006/$2007 writes, because $2006 affects the scroll too. (In a way that's harder to understand and control.) <br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So am I to do, load value, store to $2000, load x, store to $2005, load y, store to $2005?</div><br />That's exactly right. And I'm totally dumb, and forgot the sta $2000 in my code example and edited it in just now. But it really should be as simple as those three scroll writes ($2000, $2005, $2005) after all your other VRAM updates are done.<br /><br />Still, use Nintendulator DX and time your code. Even if what I suggest works, it's still good to know how close you are to the limit.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215131"></a>
				<b class="postauthor">infidelity</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215131">Re: issue with ppu drawing vertical tiles (RESOLVED)</a></div><div style="float: right;"><a href="./viewtopic.php?p=215131#p215131"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 7:59 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 01, 2013 4:46 am<br /><b>Posts:</b> 301
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ok thanks for all your help, i'll give this another shot. <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" /><br /><br />EDIT: GOT IT! <img src="./images/smilies/icon_biggrin.gif" alt=":-D" title="Very Happy" /><br /><br />So I reshifted and rewrote certain portions as you suggested. I have no more glitches, no more flashes, or faint screen jumps when drawing vertically! Here is my new NMI structure.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp;01:C000: 48&nbsp; &nbsp; &nbsp; &nbsp; PHA<br />&nbsp;01:C001: 8A&nbsp; &nbsp; &nbsp; &nbsp; TXA<br />&nbsp;01:C002: 48&nbsp; &nbsp; &nbsp; &nbsp; PHA<br />&nbsp;01:C003: 98&nbsp; &nbsp; &nbsp; &nbsp; TYA<br />&nbsp;01:C004: 48&nbsp; &nbsp; &nbsp; &nbsp; PHA<br />&nbsp;01:C005: A9 00&nbsp; &nbsp; &nbsp;LDA #$00<br />&nbsp;01:C007: 8D 03 20&nbsp; STA $2003 = #$00<br />&nbsp;01:C00A: A9 02&nbsp; &nbsp; &nbsp;LDA #$02<br />&nbsp;01:C00C: 8D 14 40&nbsp; STA $4014 = #$02<br /><br />&nbsp;;palette engine<br />&nbsp;01:C00F: A2 00&nbsp; &nbsp; &nbsp;LDX #$00<br />&nbsp;01:C011: AD 02 20&nbsp; LDA $2002 = #$88<br />&nbsp;01:C014: A9 3F&nbsp; &nbsp; &nbsp;LDA #$3F<br />&nbsp;01:C016: 8D 06 20&nbsp; STA $2006 = #$00<br />&nbsp;01:C019: 8E 06 20&nbsp; STX $2006 = #$00<br />&nbsp;01:C01C: A0 20&nbsp; &nbsp; &nbsp;LDY #$20<br />&nbsp;01:C01E: BD C0 06&nbsp; LDA $06C0,X @ $06C0 = #$00<br />&nbsp;01:C021: 8D 07 20&nbsp; STA $2007 = #$00<br />&nbsp;01:C024: E8&nbsp; &nbsp; &nbsp; &nbsp; INX<br />&nbsp;01:C025: 88&nbsp; &nbsp; &nbsp; &nbsp; DEY<br />&nbsp;01:C026: D0 F6&nbsp; &nbsp; &nbsp;BNE $C01E<br /><br />&nbsp;;jsr to vram engine<br />&nbsp;01:C028: 20 30 FE&nbsp; JSR $FE30<br /><br />&nbsp;;final writes to $2000 &amp; $2005<br />&nbsp;01:C02B: A5 FF&nbsp; &nbsp; &nbsp;LDA $FF = #$88<br />&nbsp;01:C02D: 29 F8&nbsp; &nbsp; &nbsp;AND #$F8<br />&nbsp;01:C02F: 8D 00 20&nbsp; STA $2000 = #$88<br />&nbsp;01:C032: 85 FF&nbsp; &nbsp; &nbsp;STA $FF = #$88<br />&nbsp;01:C034: A5 FD&nbsp; &nbsp; &nbsp;LDA $FD = #$00<br />&nbsp;01:C036: 8D 05 20&nbsp; STA $2005 = #$00<br />&nbsp;01:C039: A5 FC&nbsp; &nbsp; &nbsp;LDA $FC = #$00<br />&nbsp;01:C03B: 8D 05 20&nbsp; STA $2005 = #$00<br /><br />&nbsp;;mmc3 irq routine<br />&nbsp;01:C03E: A5 EC&nbsp; &nbsp; &nbsp;LDA $EC = #$00<br />&nbsp;01:C040: 8D 00 C0&nbsp; STA $C000 = #$48<br />&nbsp;01:C043: 8D 01 C0&nbsp; STA $C001 = #$8A<br />&nbsp;01:C046: A9 01&nbsp; &nbsp; &nbsp;LDA #$01<br />&nbsp;01:C048: 8D 01 E0&nbsp; STA $E001 = #$00<br />&nbsp;01:C04B: A6 ED&nbsp; &nbsp; &nbsp;LDX $ED = #$00<br />&nbsp;01:C04D: BD F0 FE&nbsp; LDA $FEF0,X @ $FEF0 = #$F6<br />&nbsp;01:C050: 85 EE&nbsp; &nbsp; &nbsp;STA $EE = #$00<br />&nbsp;01:C052: BD F1 FE&nbsp; LDA $FEF1,X @ $FEF1 = #$FE<br />&nbsp;01:C055: 85 EF&nbsp; &nbsp; &nbsp;STA $EF = #$00<br />&nbsp;01:C057: 58&nbsp; &nbsp; &nbsp; &nbsp; CLI<br />&nbsp;<br />&nbsp;;ppu rendering<br />&nbsp;01:C058: A5 FE&nbsp; &nbsp; &nbsp;LDA $FE = #$00<br />&nbsp;01:C05A: 8D 01 20&nbsp; STA $2001 = #$00<br />&nbsp;<br />&nbsp;;mmc3 chr setup<br />&nbsp;01:C05D: A2 05&nbsp; &nbsp; &nbsp;LDX #$05<br />&nbsp;01:C05F: 8E 00 80&nbsp; STX $8000 = #$4C<br />&nbsp;01:C062: B5 F0&nbsp; &nbsp; &nbsp;LDA $F0,X @ $00F0 = #$00<br />&nbsp;01:C064: 8D 01 80&nbsp; STA $8001 = #$6C<br />&nbsp;01:C067: CA&nbsp; &nbsp; &nbsp; &nbsp; DEX<br />&nbsp;01:C068: 10 F5&nbsp; &nbsp; &nbsp;BPL $C05F<br />&nbsp;<br />&nbsp;;game code<br />&nbsp;01:C06A: 20 90 C0&nbsp; JSR $C090<br />&nbsp;<br />&nbsp;;frame counter<br />&nbsp;01:C06D: E6 F6&nbsp; &nbsp; &nbsp;INC $F6 = #$00<br />&nbsp;<br />&nbsp;;joypad routine<br />&nbsp;01:C06F: 20 8E FF&nbsp; JSR $FF8E<br /><br />&nbsp;;sound engine<br />&nbsp;01:C072: 20 00 80&nbsp; JSR $8000<br />&nbsp;<br />&nbsp;01:C075: 68&nbsp; &nbsp; &nbsp; &nbsp; PLA<br />&nbsp;01:C076: A8&nbsp; &nbsp; &nbsp; &nbsp; TAY<br />&nbsp;01:C077: 68&nbsp; &nbsp; &nbsp; &nbsp; PLA<br />&nbsp;01:C078: AA&nbsp; &nbsp; &nbsp; &nbsp; TAX<br />&nbsp;01:C079: 68&nbsp; &nbsp; &nbsp; &nbsp; PLA<br />&nbsp;01:C07A: 40&nbsp; &nbsp; &nbsp; &nbsp; RTI<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5898"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215133"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215133">Re: issue with ppu drawing vertical tiles</a></div><div style="float: right;"><a href="./viewtopic.php?p=215133#p215133"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 8:20 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Congrats! One thing! You should write to $2000 here too:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp;01:C00F: A2 00&nbsp; &nbsp; &nbsp;LDX #$00<br />&nbsp;01:C011: AD 02 20&nbsp; LDA $2002 = #$88<br /><br />;Here.<br /><br />&nbsp;01:C014: A9 3F&nbsp; &nbsp; &nbsp;LDA #$3F<br />&nbsp;01:C016: 8D 06 20&nbsp; STA $2006 = #$00<br />&nbsp;01:C019: 8E 06 20&nbsp; STX $2006 = #$00<br />&nbsp;01:C01C: A0 20&nbsp; &nbsp; &nbsp;LDY #$20<br />&nbsp;01:C01E: BD C0 06&nbsp; LDA $06C0,X @ $06C0 = #$00<br />&nbsp;01:C021: 8D 07 20&nbsp; STA $2007 = #$00<br />&nbsp;01:C024: E8&nbsp; &nbsp; &nbsp; &nbsp; INX<br />&nbsp;01:C025: 88&nbsp; &nbsp; &nbsp; &nbsp; DEY<br />&nbsp;01:C026: D0 F6&nbsp; &nbsp; &nbsp;BNE $C01E<br /></div><br />$2000 controls the nametables, yes. But it also controls the increment value, as you know. Your NMI starts, and you write to $2007 without specifying the increment value beforehand in the new version. So it's technically relying on whatever the last value written to it was. (Yes, you still need ANOTHER $2000 write at the end, only for scrolling)</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215135"></a>
				<b class="postauthor">infidelity</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215135">Re: issue with ppu drawing vertical tiles (RESOLVED)</a></div><div style="float: right;"><a href="./viewtopic.php?p=215135#p215135"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 8:33 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 01, 2013 4:46 am<br /><b>Posts:</b> 301
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Oh ok, I'll add <br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">LDA $FF<br />STA $2000<br /></div><br /><br />This is good enough, right? <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5898"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215136"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215136">Re: issue with ppu drawing vertical tiles (RESOLVED)</a></div><div style="float: right;"><a href="./viewtopic.php?p=215136#p215136"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 8:35 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">How about...<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">LDA $FF<br />and #%11111011<br />STA $2000<br /></div><br />otherwise you're still relying on the last written value. The above guarantees you're at increment 1, which is what is required for those palette writes.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215137"></a>
				<b class="postauthor">infidelity</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215137">Re: issue with ppu drawing vertical tiles (RESOLVED)</a></div><div style="float: right;"><a href="./viewtopic.php?p=215137#p215137"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 8:39 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 01, 2013 4:46 am<br /><b>Posts:</b> 301
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ok, so...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp;01:C00F: A2 00&nbsp; &nbsp; &nbsp;LDX #$00<br />&nbsp;01:C011: AD 02 20&nbsp; LDA $2002 = #$00<br />&nbsp;01:C014: A5 FF&nbsp; &nbsp; &nbsp;LDA $FF = #$88<br />&nbsp;01:C016: 29 FB&nbsp; &nbsp; &nbsp;AND #$FB<br />&nbsp;01:C018: 8D 00 20&nbsp; STA $2000 = #$88<br />&nbsp;01:C01B: A9 3F&nbsp; &nbsp; &nbsp;LDA #$3F<br />&nbsp;01:C01D: 8D 06 20&nbsp; STA $2006 = #$00<br />&nbsp;01:C020: 8E 06 20&nbsp; STX $2006 = #$00<br />&nbsp;01:C023: A0 20&nbsp; &nbsp; &nbsp;LDY #$20<br />&nbsp;01:C025: BD C0 06&nbsp; LDA $06C0,X @ $06C0 = #$0F<br />&nbsp;01:C028: 8D 07 20&nbsp; STA $2007 = #$00<br />&nbsp;01:C02B: E8&nbsp; &nbsp; &nbsp; &nbsp; INX<br />&nbsp;01:C02C: 88&nbsp; &nbsp; &nbsp; &nbsp; DEY<br />&nbsp;01:C02D: D0 F6&nbsp; &nbsp; &nbsp;BNE $C025<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5898"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p215138"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215138">Re: issue with ppu drawing vertical tiles (RESOLVED)</a></div><div style="float: right;"><a href="./viewtopic.php?p=215138#p215138"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 8:42 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yes, that's safe.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p215140"></a>
				<b class="postauthor">infidelity</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p215140">Re: issue with ppu drawing vertical tiles (RESOLVED)</a></div><div style="float: right;"><a href="./viewtopic.php?p=215140#p215140"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 13, 2018 9:08 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Mar 01, 2013 4:46 am<br /><b>Posts:</b> 301
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thank you for all of your help! Now i'm back on track. <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5898"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=10&amp;t=17145"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=17145"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 13 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 8 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="17145" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10" selected="selected">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
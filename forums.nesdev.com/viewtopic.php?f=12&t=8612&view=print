<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - FPGA SPC Player Done</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">FPGA SPC Player Done</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=8612">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=8612</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kevtris</b> [ Sun Feb 12, 2012 10:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>FPGA SPC Player Done</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well after a few weeks of work, I managed to finish that FPGA SPC player I was working on and added a nice little user interface doo-dad.  I posted a video of it if anyone wanted to see.
<br />
<br /><!-- m --><a class="postlink" href="http://www.youtube.com/watch?v=maQffWS2_jQ">http://www.youtube.com/watch?v=maQffWS2_jQ</a><!-- m -->
<br />
<br />Everything's all original on it, I didn't reuse anyone's cores.  They are all 100% verilog.  There is a 6502 running a few minor parts of the visualization thing (the timer and it loads the scroller) but the rest is verilog.
<br />
<br />I am hoping to make an FPGA SNES some time in the future and it needs sound, so that part is done <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Sun Feb 12, 2012 10:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's so good I don't know where to start. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> Like always, hell of a job kev!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TmEE</b> [ Mon Feb 13, 2012 1:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is it possible to disable interpolation on it ?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Mon Feb 13, 2012 3:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks great !
<br />
<br />Too bad your video doesn't demonstrate decoding of unstable BRR samples that caused so much problems to emulators (heard for example in "Musica Machina" from FF5).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Mon Feb 13, 2012 4:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />MAD PROPS!
<br />
<br />Looking forward to see some of this awesomeness released.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ReaperSMS</b> [ Tue Feb 14, 2012 8:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You go right on being awesome.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Tue Feb 14, 2012 9:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Too bad your video doesn't demonstrate decoding of unstable BRR samples that caused so much problems to emulators (heard for example in "Musica Machina" from FF5).</div>
<br />
<br />Maybe in older ones. Both anomie and blargg cracked 100.0% bit-perfect BRR decoding. blargg filled in 100% perfect timing onto everything else as well.
<br />
<br />Any difference in sound at this point is caused by using a PC sound card and speakers instead of a TV with an RCA cable.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Feb 15, 2012 5:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">Any difference in sound at this point is caused by using a PC sound card and speakers instead of a TV with an RCA cable.</div>
<br />And even then the difference should be minimal if you have a home theater PC (i.e. PC using TV as monitor), no?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kevtris</b> [ Wed Feb 15, 2012 10:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Looks great !<br /><br />Too bad your video doesn't demonstrate decoding of unstable BRR samples that caused so much problems to emulators (heard for example in "Musica Machina" from FF5).</div>
<br />
<br />Those all work,  however I do still seem to have a minor issue;  the channel to channel modulation does not appear to work correctly;  it seems that it needs to modulate more than the docs say.
<br />
<br />I used the blargg documentation and checked out his library code to make sure it conformed to the documentation and it seems to.
<br />
<br />This results in the wind effect on chrono trigger not sounding quite right:  they modulate the channel playing the "unstable" BRR sample to cause its pitch to rise/fall.   It works OK but the depth of the pitch change isn't enough.
<br />
<br />Other than that I can find no issue decoding the samples.  I use all fixed point decoding of course (like a real spc would), and having even one tiny error is enough to cause huge problems with most samples.  Even something like one wrong carry on a low bit of one of the coefficients is plenty to cause some things to wrap which causes clipping.  
<br />
<br />I wonder if the earlier emulators that had problems were using floating point to calculate the IIR filtering after the BRR decoding or something.  That would cause them to sound OK for normal samples, but to go pear shaped on anything that required bit precise wrapping behaviour.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kevtris</b> [ Wed Feb 15, 2012 10:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">MAD PROPS!<br /><br />Looking forward to see some of this awesomeness released.</div>
<br />
<br />Thanks all for the kind words too.  I am working on making an FPGA board I can sell, and was thinking of using kickstarter for this purpose once the board's designed.  If anyone's interested in what the board will do and pricing and all that I guess I can post info about it;  though the "other retro dev" forum would probably be a better place for it.  So far I have 8 or 9 separate videogame consoles running on the same board and I will be adding more.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Feb 15, 2012 11:10 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Mmh... testing the chanel - to - channel pitch modulation range should be easy to test on real hardware by playing a sample which is plain DC, and have it modulate a normal channel, then listen to at which pitch it changes.
<br />
<br />That way it should be easy to verify if the docs are accurate or not.
<br />
<br />Another common problem in emus is that whilte noise (not unstable samples but actual hardware noise) was not loud enough. This caused many sound effects which combines noise and normal samples to sound different on emulators. I think esepcially the SFX when enemies dies in Final Fantasy games and Chrono Trigger.
<br />However again BSNES is not concerned by this (old) problem.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>KungFuFurby</b> [ Sat Feb 18, 2012 7:18 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Packy and Marlon is the perfect SPC set to listen to that pitch modulation: it's strange, but it does use it. That is the best possible place I could think of, personally...
<br />
<br />The tracks that I'm sure use pitch modulation are...
<br />- Playground 2
<br />- House 4
<br />- Unknown Song 9

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>funraiser</b> [ Thu Apr 26, 2012 8:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You have figure out the 12 sample ring buffer for decoding BRR data?
<br />I don't know why they use 12 samples, because I saw the guassian part use at most 4, so why keep 8 more samples, can any one enlighten me in this ?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
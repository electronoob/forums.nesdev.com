<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Quality of the CC65 randomizer</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESdev" href="http://forums.nesdev.com/feed.php?f=2" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Quality of the CC65 randomizer" href="http://forums.nesdev.com/feed.php?f=2&amp;t=14499" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=2&amp;t=14499';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Tue Mar 19, 2019 12:52 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=2&amp;t=14499">Quality of the CC65 randomizer</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=14499"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>3</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 44 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=14499&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=14499&amp;start=30">3</a> &nbsp;<a href="./viewtopic.php?f=2&amp;t=14499&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=2&amp;t=14499&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=2&amp;t=14499&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=2&amp;t=14499&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174868"></a>
				<b class="postauthor">DRW</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174868">Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174868#p174868"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 12:55 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6156_1534723783.png" width="94" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Sep 07, 2013 2:59 pm<br /><b>Posts:</b> 1836
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Would you say that the randomizer of CC65 is a good one?<br /><!-- m --><a class="postlink" href="https://github.com/cc65/cc65/blob/master/libsrc/common/rand.s">https://github.com/cc65/cc65/blob/maste ... mon/rand.s</a><!-- m --><br /><br />My problem is: I have a character in a game that has a 3 out of 8 chance to do the motion where it is attackable.<br /><br />My call is basically this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/* 3 out of 8 chance<br />&nbsp; &nbsp;(random values can go from 0-7)<br />&nbsp; &nbsp;to be attackable. */<br />if ((rand() &amp; 0x07) &lt; 3)<br />&nbsp; &nbsp; PrepareMovementAttackable();<br /><br />/* If non-attackable,<br />&nbsp; &nbsp;the movement is chosen by a<br />&nbsp; &nbsp;1 to 1 (i.e. 1 out of 2) chance. */<br />else if ((rand() &amp; 0x01) == 0)<br />&nbsp; &nbsp; PrepareMovementNonAttackable1();<br />else<br />&nbsp; &nbsp; PrepareMovementNonAttackable2();</div><br />But the attackable movement is triggered quite rarely.<br /><br />Yesterday, the character did a non-attackable movement probably 10 times in a row before I finally gave up.<br />(In the moment, I only have one distinct non-attackable movement, so I couldn't check in how much that second random call switched between both alternatives.)<br /><br />Is this normal? Or is the randomizer crap?</div>

					
						<div class="postbody"><br />_________________<br />Available now: My game &quot;City Trouble&quot;.<br />Website: <!-- m --><a class="postlink" href="https://megacatstudios.com/products/city-trouble">https://megacatstudios.com/products/city-trouble</a><!-- m --><br />Trailer: <!-- m --><a class="postlink" href="https://youtu.be/IYXpP59qSxA">https://youtu.be/IYXpP59qSxA</a><!-- m --><br />Gameplay: <!-- m --><a class="postlink" href="https://youtu.be/Eee0yurkIW4">https://youtu.be/Eee0yurkIW4</a><!-- m --><br />German Retro Gamer article: <!-- m --><a class="postlink" href="http://i67.tinypic.com/345o108.jpg">http://i67.tinypic.com/345o108.jpg</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6156"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174870"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174870">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174870#p174870"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 1:39 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1275
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I would say it's normal. A random number generator does not try for an <em>even distribution</em> of values. It tries for random values. It does not try to flip heads only half the time. It could flip heads 10 times in a row.<br /><br />If that is not desirable you can use a variable so that it doesn't do the non-attackable movement more than X times in a row even if the random number generator says that's what it should do.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174871"></a>
				<b class="postauthor">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174871">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174871#p174871"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 2:01 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 3952<br /><b>Location:</b> A world gone mad
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I don't see a call to <a href="http://cc65.github.io/doc/funcref.html#ss3.186" class="postlink"><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">srand&#40;&#41;</tt></a> anywhere.  Maybe that's partially the problem?  (Normally with libc you only call this function once)<br /><br />But in general, I can't see how a &quot;generic rand()&quot; is going to be &quot;extremely random&quot;.  A per-system (and/or per-architecture) implementation would be needed.  There should be several threads here on the forum of how people go about getting &quot;random data&quot; in their NES games.  In fact, <a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=11241" class="postlink">here's a great one</a>.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174873"></a>
				<b class="postauthor">DRW</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174873">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174873#p174873"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 2:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6156_1534723783.png" width="94" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Sep 07, 2013 2:59 pm<br /><b>Posts:</b> 1836
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Kasumi wrote:</div><div class="quotecontent">I would say it's normal. A random number generator does not try for an <em>even distribution</em> of values. It tries for random values. It does not try to flip heads only half the time. It could flip heads 10 times in a row.</div><br />Sure, but I had to struggle with this for a few times now. It's never that the attackable movement comes too often. It's always the non-attackable that is much more frequent. (But the attackable stuff <em>does</em> appear from time to time.)<br /><br /><div class="quotetitle">Kasumi wrote:</div><div class="quotecontent">If that is not desirable you can use a variable so that it doesn't do the non-attackable movement more than X times in a row even if the random number generator says that's what it should do.</div><br />Sure, I can do this when the randomizer is definitely working correctly. But first I need to be sure that the randomizer itself isn't faulty.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">I don't see a call to <a href="http://cc65.github.io/doc/funcref.html#ss3.186" class="postlink"><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">srand&#40;&#41;</tt></a> anywhere.  Maybe that's partially the problem?</div><br />You don't see a function head either, do you? Which means it was just a code snippet and not a fully-working example. So, why do you think that the srand function should be anywhere near the movement function of one specific character?<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">But in general, I can't see how a &quot;generic rand()&quot; is going to be &quot;extremely random&quot;.</div><br />It doesn't need to be <em>extremely</em> random, but the one that I'm using still seems a little off.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">There should be several threads here on the forum of how people go about getting &quot;random data&quot; in their NES games.</div><br />If I'm not even sure whether one specific randomizer works correctly, in how far would it help me to have 10 more randomizers (unconfirmed ones, that is) that people posted in various forum threads?</div>

					
						<div class="postbody"><br />_________________<br />Available now: My game &quot;City Trouble&quot;.<br />Website: <!-- m --><a class="postlink" href="https://megacatstudios.com/products/city-trouble">https://megacatstudios.com/products/city-trouble</a><!-- m --><br />Trailer: <!-- m --><a class="postlink" href="https://youtu.be/IYXpP59qSxA">https://youtu.be/IYXpP59qSxA</a><!-- m --><br />Gameplay: <!-- m --><a class="postlink" href="https://youtu.be/Eee0yurkIW4">https://youtu.be/Eee0yurkIW4</a><!-- m --><br />German Retro Gamer article: <!-- m --><a class="postlink" href="http://i67.tinypic.com/345o108.jpg">http://i67.tinypic.com/345o108.jpg</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6156"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174875"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174875">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174875#p174875"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 3:56 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 3141<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here's another older thread about RNGs: <!-- l --><a class="postlink-local" href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=9598">viewtopic.php?f=2&amp;t=9598</a><!-- l -->. One trick shown there is that you can keep running the RNG in your VBlank poll loop, which will add an ounce of randomness to the mix since the poll time typically varies.<br /><br />I know <a href="https://en.wikipedia.org/wiki/Linear_congruential_generator" class="postlink">linear congruential RNGs</a>, often used on modern platforms for rand(), have widely documented problems with randomness if you use modulo (or bitwise AND) to limit their range. But cc65's implementation is probably not a LCG because that would require a multiplication.<br /><br />If you want some data, you can quite easily test the implementation by using the &quot;sim65&quot; target of cc65. Just generate some numbers with rand() (possibly with some additional masking), print with printf(), and look at the results in a spreadsheet program or whatever floats your boat.<br /><br />EDIT: Turns it out it <em>is</em> an LCG in ca65, just with a multiplier (0x01010101) that allows an efficient implementation.</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">fauxgame.com</a>! â€” Some other stuff I've done: <a href="https://fo.aspekt.fi/" class="postlink">fo.aspekt.fi</a></span></div>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=80">thefox</a> on Thu Jul 07, 2016 10:33 am, edited 2 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174876"></a>
				<b class="postauthor">na_th_an</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174876">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174876#p174876"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 4:27 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon May 27, 2013 9:40 am<br /><b>Posts:</b> 537
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Even if it's not perfect, I'm quite content with Shiru's implementation in neslib. Have you tried?</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="http://www.mojontwins.com">http://www.mojontwins.com</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6012"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174880"></a>
				<b class="postauthor">dougeff</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174880">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174880#p174880"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 5:40 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7008_1483937093.png" width="86" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri May 08, 2015 7:17 pm<br /><b>Posts:</b> 2465<br /><b>Location:</b> DIGDUG
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I think this is another example of 'humans don't understand the concept of randomization'<br /><br /><!-- m --><a class="postlink" href="http://www.dailymail.co.uk/home/moslive/article-1334712/Humans-concept-randomness-hard-understand.html">http://www.dailymail.co.uk/home/moslive ... stand.html</a><!-- m --><br /><br />Like when you tell an ipod to shuffle, but then get mad when it plays two songs from the same artist in a row.<br /><br />If you want a hard 3 times out of 8, have it randomly pick from SETS of 8 (pre-shuffled), where each set has exactly 3 in it (but in a different order).</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://nesdoug.com" class="postlink">nesdoug.com</a> -- blog/tutorial on programming for the NES</div>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=7008">dougeff</a> on Thu Jul 07, 2016 5:44 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7008"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174881"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174881">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174881#p174881"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 5:42 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38_1542836384.png" width="60" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 7677<br /><b>Location:</b> Chexbres, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Like when you tell an ipod to shuffle, but then get mad when it plays two songs from the same artist in a row.</div><br />Actually, some shufflers picks the same song twice, which sucks a bit.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174882"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174882">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174882#p174882"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 5:47 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 21204<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Some game designs make an enemy invulnerable at random times, make no attempt to ensure an occasional vulnerable state, and give the player no way to bypass the encounter. These games have a flaw that the invulnerable state may last too long if the player. A <a href="https://allthetropes.org/wiki/Luck-Based_Mission" class="postlink">Luck-Based Mission</a> is rarely fun.<br /><br />If you want short-term randomness but don't want a long-term string of the same result, I recommend using the least recently used (LRU) algorithm to modulate the output of your RNG. You store a list of all outcomes sorted by how recent they are. Then you choose one closer to the front of the list. For example, if you have two outcomes, with 3/8 probability for outcome A and 5/8 probability for outcome B, you toss three A's and five B's into a list. Then you randomly choose one of the four elements at the head of the list, move it to the back, and move all elements after it forward one space.<br /><br /><em>Tetris the Grand Master</em> uses &quot;history with rerolls&quot; (similar to LRU) to determine which piece to deal next. <em>Thwaite</em> uses LRU to select targets for enemy missiles, and <em>RHDE</em> uses LRU to for the same thing as <em>TGM</em>.<br /><br />Ninja'd:<br /><br />Dougeff describes a different randomizer, which EA Games and the <em>Tetris</em> fan community have referred to as the &quot;bag&quot; method. Fill the list with the three A and five B. Then each time, select a random element from that list <em>and remove it.</em> Once the set is empty, refill it with the original set. Most <em>Tetris</em> games since about 2001 use a bag of all seven pieces to address past concerns of an &quot;I drought&quot; (not receiving the straight &quot;I&quot; shaped piece for an extended period) wrecking one's game. Occasionally, as Bregalad alludes, you get two of a piece in a row when one bag ends with a particular piece and the next starts with the same piece. This has caused some <em>TGM</em> fans to refer to bag as the &quot;SZSZ&quot; randomizer, based on a perceived tendency to allow clumps of the S and Z pieces near the boundary between two bags. LRU allows the occasional drought but is less likely to allow brief floods.<br /><br />The practical problem with bag on a 6502 is that selection without replacement from a set of variable size needs either multiplication with a variable multiplier or modulo with a variable divisor. With LRU, you can tune the length of the head to always be a power of two, allowing (fast) shifts and ANDs to select an outcome.<br /><br />If you're fine with results repeating themselves after about 32000 or so steps, you can use <a href="http://6502.org/source/integers/crc-more.html" class="postlink">Greg Cook's fast implementation of CRC16</a> to generate eight pseudorandom bits quickly. And <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">srand&#40;time&#40;NULL&#41;&#41;</tt> won't work on any pre-Dreamcast console, as they lack a real-time clock. Instead seed it based on the time from power on to the player pressing Start.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174884"></a>
				<b class="postauthor">DRW</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174884">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174884#p174884"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 5:54 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6156_1534723783.png" width="94" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Sep 07, 2013 2:59 pm<br /><b>Posts:</b> 1836
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">I know <a href="https://en.wikipedia.org/wiki/Linear_congruential_generator" class="postlink">linear congruential RNGs</a>, often used on modern platforms for rand(), have widely documented problems with randomness if you use modulo (or bitwise AND) to limit their range.</div><br />Why should there be a problem with it as long as the range isn't limited in the randomizer's value itself, but only with the returned copy?<br />Or do you mean that, for example, values where the third bit from the right is a 1 appear less often than values where the third bit from the right is a 0, so that it shouldn't be used for getting values from 0 to 7 since it will mostly produce values from 0 to 3 since the highest bit is mostly 0?<br /><br />I guess I really need to write a test program: Generating numbers from 0 to 15, then using the sprite tiles to check how many of them have been created within a certain loop.<br /><br /><br /><div class="quotetitle">na_th_an wrote:</div><div class="quotecontent">Even if it's not perfect, I'm quite content with Shiru's implementation in neslib. Have you tried?</div><br />No. As I said, this is not about trying out a dozen randomizers that I happen to come by, nor do I want to implement some specific algorithm myself. I want to make sure whether the randomizer in CC65 has any specific issues, so that I need to use another one.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">And srand(time(NULL)) won't work on any pre-Dreamcast console, as they lack a real-time clock.</div><br />Sure, I know that of course.</div>

					
						<div class="postbody"><br />_________________<br />Available now: My game &quot;City Trouble&quot;.<br />Website: <!-- m --><a class="postlink" href="https://megacatstudios.com/products/city-trouble">https://megacatstudios.com/products/city-trouble</a><!-- m --><br />Trailer: <!-- m --><a class="postlink" href="https://youtu.be/IYXpP59qSxA">https://youtu.be/IYXpP59qSxA</a><!-- m --><br />Gameplay: <!-- m --><a class="postlink" href="https://youtu.be/Eee0yurkIW4">https://youtu.be/Eee0yurkIW4</a><!-- m --><br />German Retro Gamer article: <!-- m --><a class="postlink" href="http://i67.tinypic.com/345o108.jpg">http://i67.tinypic.com/345o108.jpg</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6156"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174885"></a>
				<b class="postauthor">DRW</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174885">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174885#p174885"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 6:07 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6156_1534723783.png" width="94" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Sep 07, 2013 2:59 pm<br /><b>Posts:</b> 1836
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">dougeff wrote:</div><div class="quotecontent">I think this is another example of 'humans don't understand the concept of randomization'</div><br />This is not about understanding or not understanding randomization. This is about the the fact that randomizers in programs don't create <em>truly</em> random numbers, but use a mathematical algorithm and I get a bit suspicious when there's a very large bias towards a certain outcome.<br /><br />But as I said, I'll do some tests with the randomizer in CC65 and post the results here later.</div>

					
						<div class="postbody"><br />_________________<br />Available now: My game &quot;City Trouble&quot;.<br />Website: <!-- m --><a class="postlink" href="https://megacatstudios.com/products/city-trouble">https://megacatstudios.com/products/city-trouble</a><!-- m --><br />Trailer: <!-- m --><a class="postlink" href="https://youtu.be/IYXpP59qSxA">https://youtu.be/IYXpP59qSxA</a><!-- m --><br />Gameplay: <!-- m --><a class="postlink" href="https://youtu.be/Eee0yurkIW4">https://youtu.be/Eee0yurkIW4</a><!-- m --><br />German Retro Gamer article: <!-- m --><a class="postlink" href="http://i67.tinypic.com/345o108.jpg">http://i67.tinypic.com/345o108.jpg</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6156"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174894"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174894">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174894#p174894"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 8:44 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 7315<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">DRW wrote:</div><div class="quotecontent"><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">There should be several threads here on the forum of how people go about getting &quot;random data&quot; in their NES games.</div><br />If I'm not even sure whether one specific randomizer works correctly, in how far would it help me to have 10 more randomizers (unconfirmed ones, that is) that people posted in various forum threads?</div><br />You seem to be referring directly to <a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=13172" class="postlink">this other thread where you asked a very similar question</a>?<br /><br />rand.s is a <a href="https://en.wikipedia.org/wiki/Linear_congruential_generator" class="postlink">linear congruential generator</a>, which is the same kind of PRNG that a lot of C standard libraries use.<br /><br />If you want to test how good a random number generator is, just write a program to test it. You seem to be interested in whether results happen with even probability, and whether you're getting too many of a particular value in a row. Here's some statistics on a million iterations of rand.s:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">rand() % 2 statistics:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 happened&nbsp; &nbsp; &nbsp;499999 times, average run&nbsp; &nbsp; &nbsp; 1.984<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 happened&nbsp; &nbsp; &nbsp;500001 times, average run&nbsp; &nbsp; &nbsp; 1.985<br />rand() % 8 statistics:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 happened&nbsp; &nbsp; &nbsp;125001 times, average run&nbsp; &nbsp; &nbsp; 1.143<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 happened&nbsp; &nbsp; &nbsp;124999 times, average run&nbsp; &nbsp; &nbsp; 1.143<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 happened&nbsp; &nbsp; &nbsp;125001 times, average run&nbsp; &nbsp; &nbsp; 1.143<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3 happened&nbsp; &nbsp; &nbsp;124998 times, average run&nbsp; &nbsp; &nbsp; 1.143<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4 happened&nbsp; &nbsp; &nbsp;124998 times, average run&nbsp; &nbsp; &nbsp; 1.143<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5 happened&nbsp; &nbsp; &nbsp;125000 times, average run&nbsp; &nbsp; &nbsp; 1.143<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 happened&nbsp; &nbsp; &nbsp;125000 times, average run&nbsp; &nbsp; &nbsp; 1.143<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7 happened&nbsp; &nbsp; &nbsp;125003 times, average run&nbsp; &nbsp; &nbsp; 1.143</div><br />So... looks perfectly fine; this is as good a result as I could hope from any PRNG, for these particular tests. You can try other random number generators if you're interested. Any good one should perform in a similar way, really. Most PRNGs will exhibit some kind of flaw if you throw the right test at it, but a lot of usage won't be affected by the flaw in a relevant way.<br /><br />The test program is attached, so that you can verify my implemenation, but also so that you can modify and try it with other random number generators or other tests, if you like.<br /><br /><em>Edit: I realized later, that lower bits are independent of higher ones and the implementation unnecessarily discards 8 bits, so &quot;rand() &amp; 1&quot; has an unfortunate sequence length of only 512 (9 bits), and &quot;rand() % 8&quot; only 2048 (11 bits), for example, so despite having normal frequency of bits, they are badly repetitive.</em><br /><br /><br />Edit: Python scripts were later <a href="https://forums.nesdev.com/viewtopic.php?p=218000#p218000" class="postlink">disallowed</a> on this forum. Uploading a ZIP with what I think was the original script.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=12825">lcg_test.py.zip</a> [656 Bytes]
			</span><br />
			<span class="gensmall">Downloaded 77 times</span>
		

		<br />
	</td>
							</tr>
						
							<tr>
								<td class="row1">
		<span class="genmed">[The extension <strong>py</strong> has been deactivated and can no longer be displayed.]</span><br />
	</td>
							</tr>
						
						</table>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> on Tue Jun 12, 2018 12:44 pm, edited 3 times in total.</span>
						

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174895"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174895">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174895#p174895"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 9:36 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 21204<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="codetitle"><b>Code:</b></div><div class="codecontent">def rand():<br />&nbsp; &nbsp; global seed<br />&nbsp; &nbsp; seed *= 0x01010101<br />&nbsp; &nbsp; seed += 0x31415927<br />&nbsp; &nbsp; seed &amp;= 0xFFFFFFFF<br />&nbsp; &nbsp; return (seed &gt;&gt; 8) &amp; 0x7FFF</div><br />Clever. I hadn't thought to use 16843009 as the multiplier for an LCG. I can see how it was chosen for ease of computation; it may be one of the few LCGs practical on a 6502. But has anyone done <a href="http://random.mat.sbg.ac.at/results/karl/server/node4.html" class="postlink">spectral tests</a> on it? A spectral test determines longer-term correlations among elements in the LCG's sequence.<br /><br />But if it's shifting right by only 8 (<tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&#40;seed &gt;&gt; 8&#41; &amp; 0x7FFF</tt>), it's using bits 22-8 of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">seed</tt>, with bits 31-23 calculated but never affecting anything. I tested the following, and it produces the same sequence with only 3 bytes of state:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">def rand():<br />&nbsp; &nbsp; global seed<br />&nbsp; &nbsp; seed *= 0x010101<br />&nbsp; &nbsp; seed += 0x415927<br />&nbsp; &nbsp; seed &amp;= 0x7FFFFF<br />&nbsp; &nbsp; return (seed &gt;&gt; 8)<br /></div><br /><br />The following (untested) should return the same sequence with slightly fewer cycles. It turns out to be even faster than Greg Cook's CRC16. Thank you for suggesting that I look at it.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;<br />; Random number generator<br />;<br />; Written and donated by Sidney Cadot - sidney&#91;at&#93;ch&#91;dot&#93;twi&#91;dot&#93;tudelft&#91;dot&#93;nl<br />; Optimized by Damian Yerrick - pino&#91;at&#93;pineight&#91;dot&#93;com<br />; May be distributed with the cc65 runtime using the same license.<br />;<br />; This implements a linear congruential generator with period 2^23.<br />; The multiplier in an LCG needs to be congruent to 1 (mod 4),<br />; and the addend needs to be odd.<br />; Bits 22-8 are returned because LCGs are known for patterns<br />; in low-order bits.<br />;<br /><br />.export _lcg23_rand, _lcg23_srand<br /><br />.data<br /><br />; At main() entry, the program expects srand(1) to have been called.<br />; Initialize the seed as if so.<br />rand: .byte 1, 0, 0<br />rand_addend = 4282663<br /><br />.code<br /><br />;;<br />; int lcg23_rand(void);<br />;<br />; Clocks the LCG using the iteration<br />;&nbsp; &nbsp; &nbsp;seed&#91;n+1&#93; = ((seed&#91;n&#93; * 65793) + 4282663) &amp; ((1&lt;&lt;23) - 1)<br />; @return bits 22-8 of seed.<br />.proc _lcg23_rand<br />&nbsp; ; Multiply by 0x10101: 22 cycles<br />&nbsp; clc<br />&nbsp; lda rand+0<br />&nbsp; adc rand+1<br />&nbsp; sta rand+1<br />&nbsp; adc rand+2<br />&nbsp; sta rand+2<br /><br />&nbsp; ; Add 0x415927: 34 cycles<br />&nbsp; clc<br />&nbsp; lda rand+0<br />&nbsp; adc #&lt;rand_addend<br />&nbsp; sta rand+0<br />&nbsp; lda rand+1<br />&nbsp; adc #&gt;rand_addend<br />&nbsp; sta rand+1<br />&nbsp; lda rand+2<br />&nbsp; adc #^rand_addend<br />&nbsp; and #$7F<br />&nbsp; sta rand+2<br />&nbsp; <br />&nbsp; ; Get return value in XXAA: 6 cycles + 6 for RTS<br />&nbsp; tax<br />&nbsp; lda rand+1<br />&nbsp; rts<br />.endproc<br /><br />;;<br />; void lcg23_srand(unsigned int seed);<br />;<br />; Sets the state of the LCG to a particular value.<br />; Only 1/256 of states are reachable from this function.<br />.proc _lcg23_srand<br />&nbsp; sta rand+0<br />&nbsp; stx rand+1<br />&nbsp; lda #0<br />&nbsp; sta rand+2<br />&nbsp; rts<br />.endproc<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p174904"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174904">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174904#p174904"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 11:42 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 7315<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">But has anyone done <a href="http://random.mat.sbg.ac.at/results/karl/server/node4.html" class="postlink">spectral tests</a> on it? A spectral test determines longer-term correlations among elements in the LCG's sequence.</div><br />Here's a quick X/Y plot of 9000 iterations of rand() % 256:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="gensmall"><b>File comment:</b> 9000 iterations of cc65's rand() plotted as X/Y pairs modulo 256.</span><br />
		
			<img src="./download/file.php?id=6183" alt="cc65_256_9000.png" /><br />
			<span class="gensmall">cc65_256_9000.png [ 11.33 KiB | Viewed 5036 times ]</span>
		

		<br />
	</div><br /><br />Specifically a spectral test is graphing correlations between successive elements; i.e. can you predict the next output if you knew the last one? All LCGs exhibit planes in spectral tests depending on how you organize it; it's actually a good way to detect and study LCGs, and it's why they aren't <a href="https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator" class="postlink">cryptographically secure</a>. A &quot;better&quot; LCG has more even distribution (i.e. more planes). cc65's rand() seems pretty good for an LCG, though this visible pattern is a good example why you don't usually want to use an LCG for generating X,Y pairs; it's one of the usage cases that exposes this flaw of the LCG paradigm.<br /><br />For comparison here's what a &quot;very good&quot; spectral test looks like, from the <a href="http://wiki.nesdev.com/w/index.php/Random_number_generator" class="postlink">LFSR PRNG example on the wiki</a>, which DRW doesn't want to use because it was written by a &quot;random&quot; person like me:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="gensmall"><b>File comment:</b> LFSR with 8 bits of entropy</span><br />
		
			<img src="./download/file.php?id=6185" alt="lfsr8_256_9000.png" /><br />
			<span class="gensmall">lfsr8_256_9000.png [ 14.37 KiB | Viewed 5036 times ]</span>
		

		<br />
	</div><br /><br />And a &quot;very bad&quot; test, made using the same generator but with the entropy turned down to 1 bit per iteration:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="gensmall"><b>File comment:</b> LFSR with 1 bit of entropy</span><br />
		
			<img src="./download/file.php?id=6184" alt="lfsr1_256_9000.png" /><br />
			<span class="gensmall">lfsr1_256_9000.png [ 2.39 KiB | Viewed 5036 times ]</span>
		

		<br />
	</div><br /><br />All three PRNGs from these spectral tests pass the other tests (even distribution of values, even distribution of run lengths) from my previous post, though. Again, whether or not this particular flaw matters depends on how you're using it.<br /><br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">But if it's shifting right by only 8 (<tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&#40;seed &gt;&gt; 8&#41; &amp; 0x7FFF</tt>), it's using bits 22-8 of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">seed</tt>, with bits 31-23 calculated but never affecting anything.</div><br />That seems an oversight worth pointing out to the maintainers of CC65. (Are you on the CC65 mailing list?) I suspect, though, that the better solution would not be to reduce it to a 24-bit PRNG for efficiency, but rather to repair it as a full 32-bit PRNG.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p174906"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p174906">Re: Quality of the CC65 randomizer</a></div><div style="float: right;"><a href="./viewtopic.php?p=174906#p174906"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Jul 07, 2016 12:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 7315<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">By the way, if you do a complete cycle with that modulo 256 graph on cc65's rand(), you get 50% coverage of the plane, which is actually very good for an LCG. A &quot;bad&quot; LCG would have them pile up in fewer planes.<br /><br />Again, you could be using other PRNGs, but for the question of how good the output of CC65's is, I'd say so far it looks pretty good. Probably no worse than most C library implementations of rand().<br /><br /><em>Edit: eventually discovered the low bits have poor sequence length, keep reading.</em></div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<span class="gensmall"><b>File comment:</b> 2&lt;&lt;24 iterations of cc65's rand()</span><br />
		
			<img src="./download/file.php?id=6186" alt="cc65_256_24bit.png" /><br />
			<span class="gensmall">cc65_256_24bit.png [ 2.31 KiB | Viewed 5022 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> on Tue Jul 12, 2016 12:24 am, edited 1 time in total.</span>
						

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=2&amp;t=14499"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=14499"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>3</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 44 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=14499&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=14499&amp;start=30">3</a> &nbsp;<a href="./viewtopic.php?f=2&amp;t=14499&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="14499" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2" selected="selected">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - A Few Hello World 'Tests'</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">A Few Hello World 'Tests'</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=22&amp;t=12847">http://forums.nesdev.com/viewtopic.php?f=22&amp;t=12847</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Thu May 28, 2015 1:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nicklausw wrote:</div><div class="quotecontent">nesasm<br />Eh. Not into it. Directives need to be indented, making me wonder why do they even start with a period (which I would think lets the assembler detect if it's a directive). No anonymous labels. Somewhat picky syntax. I'd say the pre-generated headers aren't worth having to live with the rest of the BS.</div>Directives in NESASM do not require the period; it is optional. I like the &quot;picky&quot; syntax of NESASM, and I have added support for anonymous labels (but this is one of the few of the features I have added that I do not use myself (I have added various other features too, but which I seem to be the only one to use them); I added anonymous labels for benefit of other people).<br /><br />Another limit of NESASM though is that the ROM data is limited to 1MB. (My own version though allows larger ROM data but if you do so, the extra data must be external and you have to use a custom output routine.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Thu May 28, 2015 1:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Throwing in my two cents: charmap in ca65 is stupid and badly-implemented.  Compare its ridiculousness to how <a href="https://www.dropbox.com/s/uv7nah7uhwcst9j/x816.doc.txt?dl=0" class="postlink">x816</a> implemented it (see <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.ASCTABLE</tt> and <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.ASC</tt>).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Thu May 28, 2015 1:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">Throwing in my two cents: charmap in ca65 is stupid and badly-implemented.  Compare its ridiculousness to how <a href="https://www.dropbox.com/s/uv7nah7uhwcst9j/x816.doc.txt?dl=0" class="postlink">x816</a> implemented it (see <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.ASCTABLE</tt> and <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.ASC</tt>).</div><br />That's exactly how WLA goes about it, something that I've always loved.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu May 28, 2015 2:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nicklausw wrote:</div><div class="quotecontent">Thanks Movax, I was able to set that up accordingly. The multi-line thing didn't work though...</div><br />Line continuation in ca65 needs to enabled with the &quot;.linecont +&quot; control command. I guess I forgot to mention that in the original post. BTW you don't need the .concat in there if it's a single line.<br /><br /><div class="quotetitle">nicklausw wrote:</div><div class="quotecontent">I tried to set A-Z to their specific characters, and found that the only good way to do so is through a loop. Is this really the best way?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">charmap1 .set $41<br />charmap2 .set $b<br />.repeat 26<br />.charmap charmap1,charmap2<br />charmap1 .set charmap1+1<br />charmap2 .set charmap2+1<br />.endrep<br />.charmap $20,$00 ; space</div></div><br />This simplifies down to:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.repeat 26, i<br />&nbsp; .charmap $41+i, $b+i<br />.endrepeat<br />.charmap $20,$00 ; space<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu May 28, 2015 2:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">Throwing in my two cents: charmap in ca65 is stupid and badly-implemented.  Compare its ridiculousness to how <a href="https://www.dropbox.com/s/uv7nah7uhwcst9j/x816.doc.txt?dl=0" class="postlink">x816</a> implemented it (see <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.ASCTABLE</tt> and <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.ASC</tt>).</div><br />I agree that it's suboptimal. However most of the shortcomings can be worked around with macros (you could implement quite easily a macro that allows you to map ranges). The biggest problem I feel is the lack of ability to push/pop/reset the character sets, which can be really problematic e.g. for macros/files that expect the character set to be set up in a certain way. This, too, can be somewhat worked around with macro trickery but it's not pleasant.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Thu May 28, 2015 2:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Assembler-wise, I think I'll stick with asm6. ca65 and wla-dx are tied for a second, and nesasm takes the spot for last.<br /><br />With nesasm, it's nice that someone made a better version on their own, but I'm not into the idea of having to say &quot;make sure you use the version from THIS PERSON, not the STANDARD ONE!&quot;

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu May 28, 2015 2:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nicklausw wrote:</div><div class="quotecontent">With nesasm, it's nice that someone made a better version on their own, but I'm not into the idea of having to say &quot;make sure you use the version from THIS PERSON, not the STANDARD ONE!&quot;</div><br />That's a big problem with assemblers in general. There's no standard to conform to, just a bunch of conventions implementers optionally use.<br /><br />As for whether .charmap is fussy to use, I don't really see the problem for a small table generating code that you only have to write once, and that you could easily shuffle off into a header file that you .include where needed. How often are you changing character sets that it really feels like an inconvenience?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu May 28, 2015 4:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">(Won't cause a problem on emulators, or with powerpak, but if you built a cartidge for it you might see problems if you're using the PPU before it's warmed up.)</div><br />Not waiting <em>will</em> cause a problem on PowerPak when you press the Reset button on the Control Deck after the game starts. So if you test on PowerPak, don't forget to try a reset every once in a while to see if your program still works.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikaelmoizt</b> [ Thu Jul 09, 2015 10:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't want to be nitpicking.. but I have some suggestions.<br />From the asm6 source<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">-:&nbsp; lda message, x<br />&nbsp; &nbsp; cmp $ff ; &lt;----- don't you mean #$ ?<br />&nbsp; &nbsp; beq load_attr<br />&nbsp; &nbsp; sta PPU_VRAM_IO<br />&nbsp; &nbsp; inx<br />&nbsp; &nbsp; jmp -<br />(..)<br />message:<br />.db &quot;MY FIRST NES ROM&quot;-$36,$ff</div><br /><br />The program works as intended because memory from the end of your code is all zeroes and returns true from your <div class="codetitle"><b>Code:</b></div><div class="codecontent">cmp $ff</div> It's a simple thing to mess up.<br /><br />Personally I really love to <div class="codetitle"><b>Code:</b></div><div class="codecontent">pad $fffa,$ea</div> so I know for certain things don't mess up anything. <br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.org $fffa<br />.dw 0, Reset, 0</div><br />Not fond of this..  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> I would atleast put some dummy labels there just in case.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Fri Jul 10, 2015 1:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />...aw crap, it seems I did screw up that loop. I'll get on my pc and fix that.<br /><br />I don't see how padding AND filling with $ea is better than just orging (which is padding) and taking the default filler of 0.<br /><br />Edit: I see watcha mean now, but still don't think it's necessary.<br /><br />And I guess I can add a dummy label to an rti.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Fri Jul 10, 2015 1:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Alrighty then, fixed some of that up and tried cleaning up a few things. Note that other than asm6, I can't guarantee that any of these will work (my previous set-up went with my hard drive) so yeah, just go with my blessing. XD<br /><br />EDIT: Broke ca65 on accident.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri Jul 10, 2015 1:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't really understand the point of filling with $EA. If you end up running code there it'll just NOP-slide all the way to the vectors, and then try to execute those as code, then if it's not dead yet, wrap around to the ZP and continue... what advantage is there to that?<br /><br />I fill with BRK (which happens to be 0 as well), which means the IRQ routine gets executed if I ever accidentally start executing fill. Since I'm not using the IRQ for anything else, I put an error diagnostic screen in my IRQ handler. Helps me debug if I ever make a mistake (usually to do with a missing stack push/pop or something).<br /><br />A lot of original NES games seem to fill with $FF. I don't know if there's any software advantage to this, but an &quot;empty&quot; EPROM has all bits set, so maybe this was an advantage during testing.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikaelmoizt</b> [ Fri Jul 10, 2015 2:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">I don't really understand the point of filling with $EA. If you end up running code there it'll just NOP-slide all the way to the vectors, and then try to execute those as code, then if it's not dead yet, wrap around to the ZP and continue... what advantage is there to that?<br /></div><br /><br />Technically there is none and I do some what agree with you on this. I totally see your point. If you also happen to have an irq/brk handler it would be really nice to use when ever you go out of boundry. However, as often as a nop slide can occur and wrap around, a brk might also end up - such as in this case - on zp and be equally confusing for someone not fully understanding how things work, which I assume a &quot;Hello World&quot; program is ment for. Setting all vectors, albeit to dummy values/labels, seem like a good idea to me atleast. Maybe I am looking too deep into something really simple here  <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri Jul 10, 2015 2:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yes, BRK is obviously not much use if you don't have something in your IRQ handler to catch it.<br /><br />If you put a <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">jmp &#40;$FFFC&#41;</tt> instruction just before your vectors (at $FFF7), an $EA fill NOP-slide will cause a soft-reset, which might be nicer than it going rogue? I actually did this for a while until I thought of using BRK instead.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Sat Jul 11, 2015 5:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">Yes, BRK is obviously not much use if you don't have something in your IRQ handler to catch it.<br /><br />If you put a <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">jmp &#40;$FFFC&#41;</tt> instruction just before your vectors (at $FFF7), an $EA fill NOP-slide will cause a soft-reset, which might be nicer than it going rogue? I actually did this for a while until I thought of using BRK instead.</div><br />Is that why, iirc in the standard nes.cfg file, the segment VECTORS starts 3 bytes before $fffa?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - More NSF Requests</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">More NSF Requests</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=115">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=115</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>37</strong> of <strong>99</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>-_pentium5.1_-</b> [ Mon Jun 26, 2006 2:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">NewRisingSun wrote:</div><div class="quotecontent">Raw PCM should work in NSFs as long as there's no need to play any other channels while you're playing the raw PCM sample.</div>
<br />That holds true for Action 52 but not for the other games. This has nothing to do with the nonstandard trick of the init routine signaling that it will never return, right?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jun 26, 2006 8:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">NewRisingSun wrote:</div><div class="quotecontent">As for the NSF format update: I made a proposal, sensible counter-proposals were made, then the thread got spammed with C-64 nonsense, and so nothing further happened.</div>
<br />Post in that topic again and I'll split out the Commodore 64 related posts to the best of my ability.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plinkoplus</b> [ Fri Jun 30, 2006 6:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello,
<br />
<br />Is there already a Legend Of Zelda rip w/the sfx available?
<br />
<br />If so could somebody please point me as to where it is?
<br />
<br />If not could I please request a rip of the sfx?
<br />
<br />I really appreciate your help.
<br />
<br />Thanks in advance.
<br />
<br />Yours truly,
<br />Chris

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>-_pentium5.1_-</b> [ Fri Jun 30, 2006 7:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">NewRisingSun wrote:</div><div class="quotecontent">As for the NSF format update: I made a proposal, sensible counter-proposals were made, then the thread got spammed with C-64 nonsense, and so nothing further happened.</div><br />Post in that topic again and I'll split out the Commodore 64 related posts to the best of my ability.</div>
<br />I believe <a href="http://nesdev.com/bbs/viewtopic.php?t=1090" class="postlink">this</a> is the thread. Should I bump it?
<br />
<br />EDIT: Oh, never mind; I had an issue to post about in that thread, so it's bumped anyway.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nensondubois</b> [ Sat Jul 01, 2006 7:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>re</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Does anyone have an ExciteBike nsf with all 3 variants of the Title screen?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nades</b> [ Sat Jul 01, 2006 10:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi! Nice thread! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> ok i'm studying nsf ripping but with no success <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> I need help with Road Blasters and Totsuzen Machoman. TIA.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nensondubois</b> [ Sat Jul 01, 2006 11:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>re</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I have no idea what those games are but if you have no succes with nsf ripping try reading and asking questions people will be glad to help.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nades</b> [ Sat Jul 01, 2006 12:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />so, first i'm trying to find $8D$15$40 (as state in Chris Covell NSF guide) in hex editor, and I found 5 accesses to sound register (in game Totsuzen Machoman) at $101cc, $10299, $1045c, $10693 and $106b8 but now I'm stuck <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> from where place cut memory?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ugetab</b> [ Sat Jul 01, 2006 5:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />With the advent of FCEUXDSP, there's an easier way to get into NSF ripping.
<br />
<br />Look at the way existing rips run using the FCEUXDSP debugger, mostly in how the 'Load' address works on the ROM(uses FCE Trick 1, and browse to 0x8000), the Init address works with front-end programming(just put in a breakpoint on the init address shown in the file), and how the Play code works(this 'execute' breakpoint will break the most often, so turn it off when you're done looking)
<br />
<br />FCEUXDSP doesn't like bankless NSF files, so the easy way is to put in some info that ends up being default(byte 0x70 through 0x77 refer to the banks at 0x8000 through 0xF000. If the init address is 0xAxxx, you'd start at 0x72, then put in 00 01 02 03 04 05, which would make the NSF itself debuggable in the emulator). It's best to test whether the NSF plays in FCEUXDSP before messing with this.
<br />
<br />Another trick I know of is to copy memory from the game to the NSF, which allows you to bypass memory init issues, if done after the NSF's init has executed(Use FCE Trick 1 to access NSF memory). Copy the game memory from 0x0200 to 0x0900, and paste the info into the NSF memory at 0x0200. This will make it avoid the Stack info that the RTS commands run on. If the songs play then, but won't otherwise, then you have the Play banking right, and the init code wrong. If it won't play, then the play address is wrong, or the banking is wrong, either in bank chosen, or in the setup of 0x70-0x77 in the file. If the songs play from FCEUXDSP do play right when copying from game memory, but don't play right when using the song selector, then that means that it's a problem with Sound Init. Usually, it can be narrowed down by copying 0x0100 memory from the game to the NSF, 0x0100 at a time, until it sounds right, then restarting the tune in the NSF and copying by 0x0080 at a time in that 0x0100 range, and so on until you have the bytes responsible. I've done this to fix more than one or 2 NSFs.
<br />
<br />FCE Trick 1:
<br />To be able to use the memory editor on an NSF file...
<br />Open a regular, non-NSF game.
<br />Open the memory viewer.
<br />Open the NSF file you want to edit.
<br />Ignore messages about being unable to edit memory in NSF files when you type into the memory editor.
<br />
<br />Some registers to remember:
<br />4015 = Channel Enabler. This will often be in the middle of the sound init routine, if it's not being written to constantly when a song is playing.
<br />(I divide most NSF files into 'Sound Init', 'Song Init' and 'Play', when recording information on them. I tend to put everything in a document, in case I need extra testing on a given field using the original game)
<br />
<br />4000-4008 = This is a good range to use the 'Step Out' option on to find the Play routine. It can also help find the music data location in memory, which can be used by resetting the game, and finding where the Song Init routine could be located. It takes experience to spot the types of code that suggests that you've found the song init.
<br />
<br />4012 / 4013 = If writes occur in these bytes, you've probably got DPCM samples, which is somewhat harder to explain in a paragraph. Look it up. See Barcode World for an example(you can trim out 0x2080 to 0x6080 (and change the 06 at 0x72 to a 02), and it'll mess with some of the instruments without being extremely noticable).
<br />
<br />Beyond this, you'll have to get experience. It's not something that's supposed to be easy, or quick. On rare occasion, you'll find something that takes no time at all to make work. This type of speedy works is an exception to the rule. Expect and exert long hours of effort, and you'll be rewarded with the ability to make precisely the NSFs you wish to make, and be able to spend your time perfecting those, or even working on existing NSF files you have an interest in bettering.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Quietust</b> [ Sat Jul 01, 2006 6:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: re</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nades wrote:</div><div class="quotecontent">Hi! Nice thread! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> ok i'm studying nsf ripping but with no success <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> I need help with Road Blasters and Totsuzen Machoman. TIA.</div><br /><br /><div class="quotetitle">nensondubois wrote:</div><div class="quotecontent">I have no idea what those games are but if you have no succes with nsf ripping try reading and asking questions people will be glad to help.</div>
<br />
<br />He said he's been studying, and he asked for help.
<br />Responding by telling him to study and ask for help isn't terribly useful.
<br />
<br />ugetab's suggestions seem reasonably sound, though my usual method is to simply run a game in an emulator with a CPU log function (which reports every instruction executed), search for code which looks to be related to audio, and then deduce the addresses of the necessary routines from there. It's not something you can learn overnight, but after you've ripped enough NSFs (especially simple ones) it almost becomes second nature.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ugetab</b> [ Sat Jul 01, 2006 6:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was just providing a method for him to get started. I'm quite sure that more mentally capable people wouldn't have to use the method I outlined.
<br />
<br />The breakpoints on writes to sound-related RAM addresses are something I use in conjunction with the 'Step Out' instruction. It tends to get me close to where I need to get to. FCEUXDSP provides logging functions as well, both to the logging window, and to a text file, in case you wish to use Quietust's method. I use the logger in window-mode sometimes if the step out command doesn't put me where I expect to be, and just go from one write to the next, and back track to the start of that code segment to try to find an address, or to find a control value for loading music-track specific info.
<br />
<br />The ability to deduce the type of code to look for comes from experience, as Quietust says.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kizul Emeraldfire</b> [ Wed Jul 05, 2006 6:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I just thumbed through all the pages in this thread and I noticed that Battle Chess and The Chessmaster haven't been ripped yet — is it okay if I rerequest them? :D
<br />
<br />Oh, P.S.: THANK YOU THANK YOU <strong>THANK YOU</strong> kingshriek, for ripping The 3-D Battles of World Runner! :D I'm going to go listen to that right now… :)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ugetab</b> [ Thu Jul 06, 2006 2:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Battle Chess and Chessmaster ripped.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kizul Emeraldfire</b> [ Fri Jul 07, 2006 11:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hmm, The Chessmaster is fine, but some of the tracks in Battle Chess's NSF play really slow, about half-speed. O.o As far as I can tell, tracks 1, 5, 8, 9 and 10 are fine — I dunno what 7 is — it's 2, 3, 4 and 6 that play at half-speed. Just thought you'd like to know.
<br />
<br />  Thanks for ripping them! :D

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nensondubois</b> [ Fri Jul 07, 2006 11:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>re</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Track 7 is a hidden song as far as I can tell.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>37</strong> of <strong>99</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
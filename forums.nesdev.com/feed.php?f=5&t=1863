<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=5&amp;t=1863" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2006-08-27T11:50:58-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=5&amp;t=1863</id>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-08-27T11:50:58-07:00</updated>
<published>2006-08-27T11:50:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16623#p16623</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16623#p16623"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16623#p16623"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Not if a sample is always played at one pitch, such as drums or voices.<br /></div><br />This is probably why Golden Sun drums sounds as they do, so not too bad. However, this doesn't allow a game to have the same drum sound more reverberant in a cave than for example in a simple grassfield.<br /><br />EDIT : I was able to load gba ROMs in GoldWave, and you get a bunch of inaudible data, and also all audio samples ! And this seems to work on most games ! Thanks for this trick !<br />Effectivly the pre-reverberated samples on the games you mentionned is noticeable. I haven't check Golden Sun yet (I have no image on my PC, only the real card for not). I'm gonna check it later.<br /><br />EDIT2 : The samples in Golden Sun doesn't look to be pre-reverbed. My conclusion are that the game include a programm to do some short echo in the game.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Aug 27, 2006 11:50 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-08-27T11:39:10-07:00</updated>
<published>2006-08-27T11:39:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16622#p16622</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16622#p16622"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16622#p16622"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />I'm unsure how I could check that just with an HEX editor.<br /></div><br />I meant audio editor. But still, long stretches of bytes in 0xF0 through 0x0F (GBA samples are signed bytes) are probably the tail of a pre-reverbed sample.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />But pre-computer reverb doesn't sound all that good, because the reverb lenght varies with the pitch of the sample instead by fixed reverb parameters<br /></div><br />Not if a sample is always played at one pitch, such as drums or voices.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Aug 27, 2006 11:39 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-08-27T11:25:03-07:00</updated>
<published>2006-08-27T11:25:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16621#p16621</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16621#p16621"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16621#p16621"><![CDATA[
I'm unsure how I could check that just with an HEX editor.<br />But pre-computer reverb doesn't sound all that good, because the reverb lenght varies with the pitch of the sample instead by fixed reverb parameters, and that is bad. I'd avoid it at all costs, exept maybe for plainly steamed sound effects.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Aug 27, 2006 11:25 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-08-27T10:02:10-07:00</updated>
<published>2006-08-27T10:02:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16620#p16620</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16620#p16620"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16620#p16620"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />I mean Golden Sun sounds to have an actual echo programm that is noticeable on drums (unless drums samples already have pre-reverb done to them before mixing).<br /></div><br />You'd be surprised at how many music samples in GBA games have precomputed reverb on them. Open <em>WarioWare</em> or <em>Puyo Pop</em> in a hex editor and see what I mean.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Aug 27, 2006 10:02 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-08-27T09:46:40-07:00</updated>
<published>2006-08-27T09:46:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16619#p16619</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16619#p16619"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16619#p16619"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Correct for GB and GBC, but not GBA. However, a lot of games modulate channel 3's waveform anyway and just deal with the buzzing noise.<br /></div><br />That's too bad, since the effect would have been a lot cooler on GB/GBC than GBA where direct PCM sound can be used anyway for such effects.<br />I don't think it would sound good at all if a programm would change the pulse regulary (each frame or each few frames) and doing buzzing/clicking effect on that channel. I think some games change the volume by doing so (because channel 3 has no volume control), but that's another story, they don't change it each few chrame.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Music is another story. Echo in music can be done with extra mixer channels, as heard in the ARYX.s3m sample song distributed with ModPlug and as heard in the Tetrisphere soundtrack. Even on the NES, the "Sappy" technique (as heard in part of track 10 of Opentris)<br /></div><br />No, I mean Golden Sun sounds to have an actual echo programm that is noticeable on drums (unless drums samples already have pre-reverb done to them before mixing). It also fakes echo by using a second delayed channel in several tunes, but it doesn't sound like actual echo, just a bit fun, but I wasn't talking about that.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Aug 27, 2006 9:46 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-08-27T06:07:50-07:00</updated>
<published>2006-08-27T06:07:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16618#p16618</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16618#p16618"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16618#p16618"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />I assume that the gameboy's channel 3 must be silented to change its wave, so that restricts a lot its possibilities. Maybe not, who knows ?<br /></div><br />Correct for GB and GBC, but not GBA. However, a lot of games modulate channel 3's waveform anyway and just deal with the buzzing noise.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />And what about if you actually WANT to play something quiet ?<br /></div><br />An 8-bit volume register gives nearly 48 dB of dynamic range.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I doubt Nintendo had the intention to sold devices that would plug in the extra connector and say in the manual to take a knife and cut of this piece of plastic.<br /></div><br />Nintendo did release the "Expansion Pak" for the N64, whose installation involved prying a Rambus terminator from a slot in the front of the N64 and inserting a RAM pack in its place. And it wouldn't have been a knife, more likely a specialized plastic (non-conductive) tool included with the expansion hardware.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />BTW : I was wrong to say no GBA game has digital echo, Golden Sun seems to have it, but only with relativly short echo times (small delay buffer), so there is no cavernous-sounding music like there could have been.<br /></div><br />Music is another story. Echo in music can be done with extra mixer channels, as heard in the <a href="http://pics.pineight.com/fuckRIAA/modplug/theirz/ARYX.S3M" class="postlink">ARYX.s3m</a> sample song distributed with ModPlug and as heard in the <em>Tetrisphere</em> soundtrack. Even on the NES, the "Sappy" technique (as heard in part of track 10 of <a href="http://pics.pineight.com/nt2/covers.zip" class="postlink">Opentris</a>)<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Also, I suspect Golden Sun uses pulse width effects in several music and to produce the noise when someone speaks.<br /></div><br />True, but pulse width effects on GB/GBC/GBA hardware can be done in hardware.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Aug 27, 2006 6:07 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-08-27T01:28:17-07:00</updated>
<published>2006-08-27T01:28:17-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16616#p16616</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16616#p16616"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16616#p16616"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Yeah, it's just great. Smile I played Chrono Trigger, but never noticed that. There's just so many possibilities with it. Can morph a waveform between square and triangle, do weird custom waveforms with changing timbre, or just anything. And with it being a 256-byte waveform, the changes could be done subtly too. Konami did some cool effects in the Solid Snake soundtrack for MSX2 with their wavetable chip. I don't know why it hasn't been done on Gameboy, maybe the channel has to stop playing to change the waveform or some other timing issue? I don't know if that's the case, but that would be a little problem.<br /></div><br />You'll notice that in the following soundtracks :<br />3-05 Zeal Palace<br />3-08 Undersea Palace<br />3-13 World Revolution (second-to-last Battle)<br />3-14 Last Battle<br /><br />Also, there is a lot of sound effects in Choro Trigger that use sampled pulse-width effects, like when a monster chants you something (like the robot in the milenial fair) or when you try to save in a dungeon/house where you cannot.<br />Alternativly, the variable pulse-width samle is often used as a pitch modulator for other SFX channels, allowing fun effects.<br />CT really DOES use 100% of the SNES' audio features, unlike 98% of SNES games.<br /><br />Romancing Saga 3 does also some pulse width effects just like CT (same sound engine), but it is less noticeable and the game is less popular.<br />I assume that the gameboy's channel 3 must be silented to change its wave, so that restricts a lot its possibilities. Maybe not, who knows ?<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />True. It'd be pretty simple (a bit CPU intensive though, with only an 8*8 hardware multiplier) to have a global volume control that would multiply the final sample value by something. Just some value that's calculated so the sum of all channels at max volume can't clip. I suppose the same concept could allow odd numbers of channels to work alright too. Perhaps Screamtracker did something like that.<br /></div><br />And what about if you actually WANT to play something quiet ?<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I know, that's irritated me since I found out too. Instead, we got an expansion port apparently tailored for the FDS which went completely unused. All those extra cart pins, wasted. At least adding the lockout chip made sense (though I don't like it, especially the regional differences).<br /></div><br />Also, the extra connector on the bottom isn't user accessible without removing a piece of plastic that would do unreversible "damage" to the console's case. (I know, it is not any actual damage, but it may be considered as it).<br />I doubt Nintendo had the intention to sold devices that would plug in the extra connector and say in the manual to take a knife and cut of this piece of plastic.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I have some cute ideas for a random sample generator too. Next idea I wanted to implement would be something like the NES's looped noise, but you can set the loop length and the random seed. That would be a lot of fun for some crazy distorted noise instruments. Very little input from the NES needed, but fully reproducable.<br /></div><br />Cool ! I like randomish sounds too. Chrono Trigger has up to 4 different white noise samples, but using different ADPCM/BRR tricks to get 4 different random sequences and lenghts. It has caused and still causes many problems for emualtors issues, because the exact way the SPC decode noisy samples has been unknown for years, but now I think Anti-Resonnance had found the final algorithm that sound like the real console. The last version of SNES9x still make the SFX in Chrono Trigger sound wrong.<br /><br />BTW : I was wrong to say no GBA game has digital echo, Golden Sun seems to have it, but only with relativly short echo times (small delay buffer), so there is no cavernous-sounding music like there could have been. Also, I suspect Golden Sun uses pulse width effects in several music and to produce the noise when someone speaks.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Aug 27, 2006 1:28 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2006-08-26T23:32:14-07:00</updated>
<published>2006-08-26T23:32:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16615#p16615</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16615#p16615"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16615#p16615"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />It won't be quiet if the mixer clips and amplifies the final result.<br /></div><br />True.  It'd be pretty simple (a bit CPU intensive though, with only an 8*8 hardware multiplier) to have a global volume control that would multiply the final sample value by something.  Just some value that's calculated so the sum of all channels at max volume can't clip.  I suppose the same concept could allow odd numbers of channels to work alright too.  Perhaps Screamtracker did something like that.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />(btw Nintendo are bastards to not have let the audio in in the NES; why wouldn't just they keep the famicom as-is ?)<br /></div><br /><br />I know, that's irritated me since I found out too.  Instead, we got an expansion port apparently tailored for the FDS which went completely unused.  All those extra cart pins, wasted.  At least adding the lockout chip made sense (though I don't like it, especially the regional differences).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Will you release plugins for emulators (or anything) so that we could easily see the results ? I'm just curious.<br /></div><br /><br />Yeah, the code will be available.  If anyone wants to support PIC18F in their emulator, that would be awesome.  The NES can read code off the PIC, and of course firmware updates will be available.  Nothing has gone farther than my desk since noone has yet stepped forward to become involved in testing/developing with it (x|k developed his MIDINES PIC code independantly, it's completely different in purpose and he also used a slightly different PIC than me).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">On Squeedo I keep my samples in RAM, but that's mostly because they're small and I do some dynamic effects on them, like reshaping the pulse-width. The NES could rewrite any part of the sample anytime too.<br /></div><br />YES !! This is an incredibly COOL effect to do, isn't it ? Chrono Trigger does it on it's sample #16, that is found in a few sound effects and music in the game, and it sounds so cool ! I wonder if it is possible to do that using GB's channel 3 with custom waveform. It sounds perfectly possible, but if so why noone did that ? <br /></div><br /><br />Yeah, it's just great. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" />  I played Chrono Trigger, but never noticed that.  There's just so many possibilities with it.  Can morph a waveform between square and triangle, do weird custom waveforms with changing timbre, or just anything.  And with it being a 256-byte waveform, the changes could be done subtly too.  Konami did some cool effects in the Solid Snake soundtrack for MSX2 with their wavetable chip.  I don't know why it hasn't been done on Gameboy, maybe the channel has to stop playing to change the waveform or some other timing issue?  I don't know if that's the case, but that would be a little problem.<br /><br />I have some cute ideas for a random sample generator too.  Next idea I wanted to implement would be something like the NES's looped noise, but you can set the loop length and the random seed.  That would be a lot of fun for some crazy distorted noise instruments.  Very little input from the NES needed, but fully reproducable.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Sat Aug 26, 2006 11:32 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-08-26T06:23:32-07:00</updated>
<published>2006-08-26T06:23:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16586#p16586</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16586#p16586"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16586#p16586"><![CDATA[
<div class="quotetitle">Memblers wrote:</div><div class="quotecontent"><br />Well, I think it's pretty significant.  If I want to take the cart over to my friend's house or somewhere, I think some of them would be pretty shocked if I told them I first need to take their NES apart and solder stuff to it, heheh.  And I want it to be usable by anybody, especially people who only do software and music stuff.  If it needs a modified NES to work, then it's not truly an NES cart IMHO. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /></div><br />Sure, they won't let you open their NES and solder stuff to it, especially considering the fact that the console isn't manufactured any longer.<br />For me the NES is able to reproduce extra sound, because the original famicom is, and it is the original famicom version that count for me (even if I don't have any). Most games (at least all GOOD games) has been first devlopped in Japan for the japanese console, and then may have been ported to the outside of jap. But, yeah, go with $4011 since you don't want people to modify their console. (btw Nintendo are bastards to not have let the audio in in the NES; why wouldn't just they keep the famicom as-is ?)<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />You'll need more than that, since you also need to multiply the 8-bit sample by your volume before adding.  With 8-bit volume control like I use on Squeedo, that would be 16 bits already for one channel.  On Squeedo I end up with a 24-bit result (only 18-bits used, I think for 4 channels), which is easily shifted to 7-bits for the NES.<br /></div><br />Well, four 8-bit channels it means max. 32-bit I think, but this cannot be plainly calculated like that on advenced DSP engines.<br />Will you release plugins for emulators (or anything) so that we could easily see the results ? I'm just curious.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Unless you have songs that only use a few of those channels, then they'll be a lot lower resolution (and quiet).  Which is just to say it definitely is good to use all the channels you've got, or at least not leave very many of them idle.<br /></div><br />Well, in my opinion, just use the channel you need. If this sounds wrong, then the DSP shucks. One could manually control the volume and make it louder if only a few channels are used, but normally this wouldn't cause too much problems if the DSP engine is a good one.<br />About the channel volume mixing, I'm unsure that the whole thing should be divided by the number of channels. Normally, the sound should be reducted by 3db for each channel, as my understanding. This may allow saturation on output, but normally the samples aren't all phased together, and not the whole amplitude is used, so I think it is doable to have a mixed that divide each channel by less than the number of channel, without too much problems.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />On Squeedo I keep my samples in RAM, but that's mostly because they're small and I do some dynamic effects on them, like reshaping the pulse-width.  The NES could rewrite any part of the sample anytime too.<br /></div><br />YES !! This is an incredibly COOL effect to do, isn't it ? Chrono Trigger does it on it's sample #16, that is found in a few sound effects and music in the game, and it sounds so cool ! I wonder if it is possible to do that using GB's channel 3 with custom waveform. It sounds perfectly possible, but if so why noone did that ?<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />It's considered normal to use RAM for the delay lines that make up an echo or reverb filter. Any machine with enough RAM to hold samples to mix is going to have enough RAM for the delay lines.<br /></div><br />Altrough I don't note any echo/reverb in any commercial GBA game.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sat Aug 26, 2006 6:23 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-08-25T21:28:25-07:00</updated>
<published>2006-08-25T21:28:25-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16575#p16575</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16575#p16575"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16575#p16575"><![CDATA[
<div class="quotetitle">Memblers wrote:</div><div class="quotecontent"><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">That would suck less, but still be mid-decent if there is really a lot of channels (like 16).<br /></div><br />Unless you have songs that only use a few of those channels, then they'll be a lot lower resolution (and quiet).</div><br />It won't be quiet if the mixer clips and amplifies the final result.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">It's considered normal to use RAM for the delay lines that make up an echo or reverb filter. Any machine with enough RAM to hold samples to mix is going to have enough RAM for the delay lines.<br /></div><br />But micros usually don't have much internal RAM (compared to ROM).  The PIC18F4525 I use for example, has &lt;4kB of RAM and 48kB of ROM.  A half-second delay of a 8-bit sound at 22kHz takes 88kB of RAM, which is way too much (if cost and chip count matters).</div><br />Which is also why you don't see a lot of hardware echo on older consumer-priced audio chips.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Aug 25, 2006 9:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2006-08-25T21:08:32-07:00</updated>
<published>2006-08-25T21:08:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16571#p16571</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16571#p16571"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16571#p16571"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />Adding one resistor and one capacity in my system is not what I call a significant modification.<br /></div><br /><br />Well, I think it's pretty significant.  If I want to take the cart over to my friend's house or somewhere, I think some of them would be pretty shocked if I told them I first need to take their NES apart and solder stuff to it, heheh.  And I want it to be usable by anybody, especially people who only do software and music stuff.  If it needs a modified NES to work, then it's not truly an NES cart IMHO. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I think the software DSP/mixer should do all cacluations adding 8-bit samples, then obtain a 16-bit result and upload the high bytes only in the buffer.<br /></div><br /><br />You'll need more than that, since you also need to multiply the 8-bit sample by your volume before adding.  With 8-bit volume control like I use on Squeedo, that would be 16 bits already for one channel.  On Squeedo I end up with a 24-bit result (only 18-bits used, I think for 4 channels), which is easily shifted to 7-bits for the NES.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />That would suck less, but still be mid-decent if there is really a lot of channels (like 16).<br /></div><br />Unless you have songs that only use a few of those channels, then they'll be a lot lower resolution (and quiet).  Which is just to say it definitely is good to use all the channels you've got, or at least not leave very many of them idle.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />It's considered normal to use RAM for the delay lines that make up an echo or reverb filter. Any machine with enough RAM to hold samples to mix is going to have enough RAM for the delay lines.<br /></div><br />But micros usually don't have much internal RAM (compared to ROM).  The PIC18F4525 I use for example, has &lt;4kB of RAM and 48kB of ROM.  A half-second delay of a 8-bit sound at 22kHz takes 88kB of RAM, which is way too much (if cost and chip count matters).<br /><br />On Squeedo I keep my samples in RAM, but that's mostly because they're small and I do some dynamic effects on them, like reshaping the pulse-width.  The NES could rewrite any part of the sample anytime too.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Fri Aug 25, 2006 9:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-08-25T15:58:04-07:00</updated>
<published>2006-08-25T15:58:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16561#p16561</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16561#p16561"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16561#p16561"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />I've been thinking a long time on how to handle echo/reverb on a DSP engine.<br />I think one buffer of a variable lenght in funciton of the echo lenght have to be mixed back with the main wave source, with a volume reduction wich is more often refered to the echo feedback parameter. Then send this data to both the output and the echo buffer. Then, since the output is written back to the echo buffer for a given amount of time (and that with the previous echo), the echoed wave will automatically repeat itself weaker and weaker, due to the feed back. Isn't that cool ?<br /></div><br />And if you set up the delay line to be less than 1/50 second, you can <a href="http://en.wikipedia.org/wiki/Karplus-Strong_string_synthesis" class="postlink">simulate a plucked string</a>.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I've think this buffer could waste a lot of RAM for long echo times.<br /></div><br />It's considered normal to use RAM for the delay lines that make up an echo or reverb filter. Any machine with enough RAM to hold samples to mix is going to have enough RAM for the delay lines.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I think reverb is the same, but with more than one single echo buffer, and with various lenghts, so that the listener cannot hear the actual echo. It would need more parameters and more RAM, but it sounds probably better.<br /></div><br />It takes about three delay lines of coprime lengths to make a convincing reverb. These lengths will be proportional to the room size.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Aug 25, 2006 3:58 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-08-25T13:38:41-07:00</updated>
<published>2006-08-25T13:38:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16559#p16559</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16559#p16559"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16559#p16559"><![CDATA[
I've been thinking a long time on how to handle echo/reverb on a DSP engine.<br />I think one buffer of a variable lenght in funciton of the echo lenght have to be mixed back with the main wave source, with a volume reduction wich is more often refered to the echo feedback parameter. Then send this data to both the output and the echo buffer. Then, since the output is written back to the echo buffer for a given amount of time (and that with the previous echo), the echoed wave will automatically repeat itself weaker and weaker, due to the feed back. Isn't that cool ?<br /><br />I've think this buffer could waste a lot of RAM for long echo times.<br />But, I could just save 1/2 or even 1/4 of the output samples to the echo buffer, and then apply some linear interolation when mixing it back with the high-freq main output. This does both tricks in one hit : A lowpass filter on the echoed wave and save RAM. Isn't that so cool ?<br /><br />I think reverb is the same, but with more than one single echo buffer, and with various lenghts, so that the listener cannot hear the actual echo. It would need more parameters and more RAM, but it sounds probably better.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Fri Aug 25, 2006 1:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-08-23T05:26:15-07:00</updated>
<published>2006-08-23T05:26:15-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16480#p16480</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16480#p16480"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16480#p16480"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />If you know the number of channels during development, you could just pre-scale all your samples and wavetables by 1/n in the ROM.<br /></div><br />Owww... I think you're not wrong but this leads to another problem : The more channels there is, the worse the quality will be since the same 8-bit output is maintened (on the GBA all PCM channels are 8-bit). For example, mixing 16 channel would do 4-bit samples, wich would REALLY suck.<br />I think the software DSP/mixer should do all cacluations adding 8-bit samples, then obtain a 16-bit result and upload the high bytes only in the buffer. That would suck less, but still be mid-decent if there is really a lot of channels (like 16). Also I'm unsure if it change something if the number of channels is a power of 2 or not using that method.<br /><br />The other solution would be to come on with an APR, wich automatically scale the main volume in function of the wave, but that would suck as much I think because the volume will change unpredicably.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Wed Aug 23, 2006 5:26 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2006-08-22T14:16:49-07:00</updated>
<published>2006-08-22T14:16:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16467#p16467</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16467#p16467"/>
<title type="html"><![CDATA[Game Boy and GBA sound registers]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1863&amp;p=16467#p16467"><![CDATA[
If you're generating 2^x channels, the volume factor for each channel is 1/2^x, which can be implemented as a simple shift. If you know the number of channels during development, you could just pre-scale all your samples and wavetables by 1/n in the ROM.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Aug 22, 2006 2:16 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Youkai Douchuuki PCB image with Namco-163 Removed</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NES Hardware and Flash Equipment" href="http://forums.nesdev.com/feed.php?f=9" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Youkai Douchuuki PCB image with Namco-163 Removed" href="http://forums.nesdev.com/feed.php?f=9&amp;t=14312" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				
				<br />	
				
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall">Last visit was: Sat Jun 25, 2016 11:30 am</td>
			<td class="gensmall" align="right">It is currently Sat Jun 25, 2016 11:30 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=9">NES Hardware and Flash Equipment</a></p>
			<p class="datetime">All times are UTC </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=9&amp;t=14312">Youkai Douchuuki PCB image with Namco-163 Removed</a></h2>


	<p class="moderators">Moderators: B00daW, <span>Moderators</span></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 9 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=9&amp;t=14312&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=9&amp;t=14312&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p171903"></a>
				<b class="postauthor">Ben Boldt</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p171903">Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Sat May 28, 2016 10:55 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Mar 23, 2016 3:27 am<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I removed the Namco-163 chip from Youkai Douchuuki for a homebrew Final Fantasy project I'm working on.  This reveals the traces beneath the Namco-163.  I thought I would share hi-res images of it in case it is useful to anyone.<br /><br /><img src="http://i.imgur.com/AFgH8wJ.jpg" alt="Image" /><br /><br /><img src="http://i.imgur.com/o9M1Wsl.jpg" alt="Image" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p172370"></a>
				<b class="postauthor">B00daW</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172370">Re: Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Thu Jun 02, 2016 1:14 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3466.jpg" width="98" height="99" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Jan 03, 2008 8:48 pm<br /><b>Posts:</b> 407
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">What are those extra edge connectors at the top of the board?  Seems like they're connected to just about everything.  Some sort of debugging/test clip?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p172371"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172371">Re: Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Thu Jun 02, 2016 1:18 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 6:12 pm<br /><b>Posts:</b> 4498<br /><b>Location:</b> seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah. Whatever that test/QA harness is, it includes <a href="http://wiki.nesdev.com/w/index.php/Namcot_163_family_pinout" class="postlink">the mysterious N163 pin 44</a>. (It's the narrow line without a real pad)<br /><br />If I follow the 16 possible contacts (three are narrow, two are covered with resist) from left to right (the same side and direction from famicom pin 60 downto 31), they are, in order:<br />CHR ROM /CE<br />PRG RAM /CE<br />CHR A11<br />Mystery N163 pin #44 (narrow)<br />CHR A13<br />CHR A14<br />CHR A17 (covered with resist)<br />CHR A16<br />CHR A15<br />CHR A12<br />PRG A16<br />PRG A14<br />PRG A13<br />PRG A15<br />PRG A17 (covered with resist)<br />PRG ROM /CE<br /><br />So they're basically just for verifying banking.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p172667"></a>
				<b class="postauthor">Ben Boldt</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172667">Re: Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Sat Jun 04, 2016 8:48 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Mar 23, 2016 3:27 am<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I built a new cartridge with this removed Namco-163, including CHR-RAM which seems to have never been done before, at least that I can find online.  This was for a Final Fantasy hack that makes the game run on Namco-163 for expansion audio support.  This hack runs great in emulators and it has a cool new custom sound engine that is proving to be really amazing.<br /><br /><img src="http://i.imgur.com/IvZvYN8.jpg" alt="Image" /><br />(Note: Not working yet in the above picture, still experimenting with CHR-RAM when this was taken.)<br /><br /><img src="http://i.imgur.com/NOn8ctX.jpg" alt="Image" /><br /><br />When I built the hardware for this hack, I had to wire some of the CHR-RAM address pins directly to the PPU and 1 of them to the N163, or else there were graphical problems.<br /><br />Originally, I connected all A10, 11, 12, 13 all to the N163 and that didn't work.  Then I connected all 4 of them directly to the PPU and that acted better but also didn't work.  I ended up wiring A10, A11 and A13 directly to PPU and A12 to N163.  I'm not sure why it needs this combination, or even what the difference is between N163 and PPU versions of these pins.  Notably, the original MMC1 Final Fantasy also connected only its CHR-RAM-A12 to the MMC1, but MMC1 doesn't have its own pins for CHR A10 or A11.  So, maybe this is an artifact of how the original Final Fantasy software was written.<br /><br />The ROM file does emulate properly in Nestopia, but it could be that the emulator is wrong and it should <em>not</em> work without further modification to the Final Fantasy software.  At the very least, with the pinout that I ended up with, it matches the N163 CHR-RAM implementation in Nestopia.  I am interested in figuring out the &quot;correct&quot; connections and seeing if this ROM hack will run on that hardware.  If not, it points to an issue with the emulator.<br /><br />Here is where I originally posted this:<br /><br /><a href="http://www.romhacking.net/forum/index.php/topic,21907.msg307516.html#msg307516" class="postlink">http://www.romhacking.net/forum/index.php/topic,21907.msg307516.html#msg307516</a><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HM62256BLP<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;256kbit (32K) SRAM<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; For Namco-163 CHR-RAM<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _________________<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp;V&nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 --| A14&nbsp; &nbsp; &nbsp; &nbsp;VCC |-- +5V<br />Namco CHR A12 --| A12&nbsp; &nbsp; &nbsp; &nbsp;/WE |-- PPU /WR<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A7 --| A7&nbsp; &nbsp; &nbsp; &nbsp; A13 |-- 0<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A6 --| A6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A8 |-- PPU A8<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A5 --| A5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A9 |-- PPU A9<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A4 --| A4&nbsp; &nbsp; &nbsp; &nbsp; A11 |-- PPU A11 (Not Namco)<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A3 --| A3&nbsp; &nbsp; &nbsp; &nbsp; /OE |-- PPU /RD<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A2 --| A2&nbsp; &nbsp; &nbsp; &nbsp; A10 |-- PPU A10 (Not Namco)<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A1 --| A1&nbsp; &nbsp; &nbsp; &nbsp; /CS |-- PPU A13 (Not Namco)<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A0 --| A0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D7 |-- PPU D7<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU D0 --| D0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D6 |-- PPU D6<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU D1 --| D1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D5 |-- PPU D5<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU D2 --| D2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D4 |-- PPU D4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GND --| D3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D3 |-- PPU D3<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |_______________|</div><br /><br />It works with these connections, but I am wondering if any gurus out there know if this configuration is expected.  Is there is some value in wiring all 4 of these address lines back to the N163 and pulling up pin 44 to see what happens?  There is some hint here in a footnote that it may have something to do with CHR-RAM:<br /><br /><a href="http://wiki.nesdev.com/w/index.php/Namcot_163_family_pinout" class="postlink">http://wiki.nesdev.com/w/index.php/Namcot_163_family_pinout</a><br /><br />Not even being sure if pin 44 is an input or an actual GND rail connection, I think I would throw a 10k up to 5V first and see what happens.  Let me know if anyone thinks these things I have talked about here are valuable or valid to experiment with, and I would be willing to give it a try.  I would be pretty happy to uncover some extra info that we can put on the nesdev wiki page.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p172670"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172670">Re: Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Sat Jun 04, 2016 9:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 6:12 pm<br /><b>Posts:</b> 4498<br /><b>Location:</b> seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Ben Boldt wrote:</div><div class="quotecontent">I ended up wiring A10, A11 and A13 directly to PPU and A12 to N163.  I'm not sure why it needs this combination, or even what the difference is between N163 and PPU versions of these pins.<br /></div>That sounds like the game isn't initializing the CHR banking registers at all, and Nestopia accidentally/intentionally has &quot;useful&quot; defaults, rather than the far more likely all-0 or all-random values.<br /><br />(Which specific hack so I can check in a debugger?)<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I am interested in figuring out the &quot;correct&quot; connections and seeing if this ROM hack will run on that hardware.<br /></div>Did you play with pins 33 and 34?<br /><br />I believe your initial assumptions are correct; namely, that you should have been able to connect 62256 A10..A14 up to N163 CHR A10..A14, and N163 CHR ROM/CE up to 62256/CE, and PPU /RD and /WR to 62256 /RD and /WR.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Not even being sure if pin 44 is an input or an actual GND rail connection<br /></div>I suspect pin 44 isn't internally connected to ground. Since you have it on a breakout board you should be able to measure what resistance (and/or diode drops) it has to other known-ground pins.<br /><br /><br />I determined both the fabrication technology of the MMC5 (It's NMOS, not CMOS) as well as whether a pin was an input or an output by measuring the amount of current a pin would source. Specifically: I have a microammeter that has a series resistance of 1kΩ; if the current to ground was less than the 200µA maximum supported in that mode but nonzero, I assumed it was an NMOS/TTL input. You should be able to do something similar.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p172825"></a>
				<b class="postauthor">Ben Boldt</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172825">Re: Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Mon Jun 06, 2016 6:46 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Mar 23, 2016 3:27 am<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I connected pin 33 to PPU /RD of the Nintendo, and I grounded pin 34.<br /><br />For /CS of the RAM chip, I had only tried PPU A13, N163 CHR A13, and ground.  I had never tried N163 CHR ROM /CE on this pin.  Maybe that's the problem!<br /><br />Should I be hooking it up like this?:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HM62256BLP<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;256kbit (32K) SRAM<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; For Namco-163 CHR-RAM<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _________________<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp;V&nbsp; &nbsp; &nbsp; &nbsp;|<br />Namco CHR A14 --| A14&nbsp; &nbsp; &nbsp; &nbsp;VCC |-- +5V<br />Namco CHR A12 --| A12&nbsp; &nbsp; &nbsp; &nbsp;/WE |-- PPU /WR<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A7 --| A7&nbsp; &nbsp; &nbsp; &nbsp; A13 |-- Namco CHR A13<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A6 --| A6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A8 |-- PPU A8<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A5 --| A5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A9 |-- PPU A9<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A4 --| A4&nbsp; &nbsp; &nbsp; &nbsp; A11 |-- Namco CHR A11<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A3 --| A3&nbsp; &nbsp; &nbsp; &nbsp; /OE |-- PPU /RD<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A2 --| A2&nbsp; &nbsp; &nbsp; &nbsp; A10 |-- Namco CHR A10<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A1 --| A1&nbsp; &nbsp; &nbsp; &nbsp; /CS |-- Namco CHR ROM /CE<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU A0 --| A0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D7 |-- PPU D7<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU D0 --| D0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D6 |-- PPU D6<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU D1 --| D1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D5 |-- PPU D5<br />&nbsp; &nbsp; &nbsp; &nbsp;PPU D2 --| D2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D4 |-- PPU D4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GND --| D3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D3 |-- PPU D3<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |_______________|</div><br /><br />Here is the file in question:<br /><br /><a href="https://sites.google.com/site/benboldt2/files/ff_namcot_town.nes.zip" class="postlink">https://sites.google.com/site/benboldt2/files/ff_namcot_town.nes.zip</a><br /><br />It comes from this thread:<br /><br /><a href="http://www.romhacking.net/forum/index.php/topic,21907.0.html" class="postlink">http://www.romhacking.net/forum/index.php/topic,21907.0.html</a></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p172827"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p172827">Re: Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Mon Jun 06, 2016 8:01 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 6:12 pm<br /><b>Posts:</b> 4498<br /><b>Location:</b> seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Ben Boldt wrote:</div><div class="quotecontent">I connected pin 33 to PPU /RD of the Nintendo, and I grounded pin 34.<br /></div>Pin 33 probably wants to be ground. I don't know about pin 34. <span style="font-size: 67%; line-height: normal">(It'd be nice to figure out what pin 34 is ...)</span><br /><br />I believe (although I've lost the citation) that CHR ROM /CE (pin 41) is ORed with pin 33, so that a 128 KiB 28-pin CHR ROMs could be used. But with two enables, like is necessary with RAM...<br /><br />There's the possibility that the N163 (among the short list of mappers that support ROM nametables) might just not support CHR-RAM in lieu of CHR-ROM. I don't think it's likely, but I can construct elaborate stories of how they could have unintentionally broken that.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Should I be hooking it up like this?:[...]<br /></div>That is what I'd assume. (Plus changing n163 pin 33)<br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">That sounds like the game isn't initializing the CHR banking registers at all, and Nestopia accidentally/intentionally has &quot;useful&quot; defaults, rather than the far more likely all-0 or all-random values.<br /></div>Nope, I definitely found the CHR banking initialization present when using Nintendulator. Of course, Nintendulator doesn't know what to do without CHR ROM, but that's pretty justifiable.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p173286"></a>
				<b class="postauthor">Ben Boldt</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p173286">Re: Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Sat Jun 11, 2016 8:13 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Mar 23, 2016 3:27 am<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I finally got around to testing this.  I hooked everything up according to the most recent CHR-RAM pinout (above) plus I grounded pin 33 of the N163.  This works great!  The game is fully functional like this.  I included the 2 extra address lines, so this technically has 32k of CHR RAM now.<br /><br />I also hooked up N163 Pin 34 to a switch, where I could connect it to +5V on one side, open in the middle, and GND on the other side.  I ran this switch outside of the Nintendo so I could toggle it while running.  I put a 10 nF from pin 34 to GND just to be safe.<br /><br />When I ground or open pin 34, it works normally.  When I set it to +5V, the game can run and the Namco-163 expansion audio works fine, but the graphics are screwed up, showing predominantly this sort of binary pattern (found this example image online):<br /><br /><img src="http://www.nullpointer.co.uk/images/0-256-big.jpg" alt="Image" /><br /><br />The color palettes are still correct when it is doing this.<br /><br />If I power on the game with pin 34 at 5V, it starts with the binary pattern.  Then, while running, if switch it to GND, the graphics become garbled.<br /><br />If I power on the game with pin 34 at GND, the graphics start OK, then I change it to +5V, the graphics go to the binary pattern.  But in this case, the graphics can return to normal when I change pin 34 back to GND.<br /><br />I have a pretty nice digital oscilloscope if there are any signals that you think I should look at - let me know if you have any ideas.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p173289"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p173289">Re: Youkai Douchuuki PCB image with Namco-163 Removed</a></div><div style="float: right;"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /><b>Posted:</b> Sat Jun 11, 2016 8:32 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 6:12 pm<br /><b>Posts:</b> 4498<br /><b>Location:</b> seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Ben Boldt wrote:</div><div class="quotecontent">When I set it to +5V, the game can run and the Namco-163 expansion audio works fine, but the graphics are screwed up, showing predominantly this sort of binary pattern<br /></div>That sounds like you're seeing the &quot;treat open bus as PPU tiles&quot; pattern, which should look like this:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia0 -->open-bus-as-chr.png<!-- ia0 --></div><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The color palettes are still correct when it is doing this.<br /></div>So the 163's CIRAM/CE output ignores this input.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If I power on the game with pin 34 at GND, then change it to +5V, the graphics go to the binary pattern, but the graphics can return to normal when I change pin 34 back to GND.<br /></div>This is expected<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I have a pretty nice digital oscilloscope if there are any signals that you think I should look at - let me know if you have any ideas.<br /></div>Based on your description, I expect that both pin 33 and pin 34 are both ORed with the internal CHR ROM banking signal before emerging on pin 41.... except this:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If I power on the game with pin 34 at 5V, then change it to GND, the graphics become garbled.<br /></div>This is confusing.<br /><br />I'm not really certain what to think that could imply. Maybe try connecting pin 34 to some slow clocked signal, and looking at pin 34, pin 41(CHRROM/CE), and pin 35(PPU A13)?<br /><br /><br />Anyway, did you have a chance to look at pin 44 ? The only stab in the dark I have is, maybe it's the partial product that indicates whether CIRAM/CE or CHRROM/CE will be asserted? If so, it should look very similar to PPU A13.</div>

					
						<span class="gensmall error"><br /><br />You do not have the required permissions to view the files attached to this post.</span>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>


	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 9 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=9">NES Hardware and Flash Equipment</a></p>
			<p class="datetime">All times are UTC </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Alexa [Bot]</span>, pipes and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9" selected="selected">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
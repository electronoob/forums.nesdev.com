<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - 8x16 and whatever else unreg wants to know</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">8x16 and whatever else unreg wants to know</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7451">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7451</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>51</strong> of <strong>83</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Sat Oct 06, 2012 11:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Bregalad's formula is correct, for when there are 7 items per row.</div>... ...Yeay!  <img src="./images/smilies/icon_idea.gif" alt=":idea:" title="Idea" />  <img src="./images/smilies/icon_surprised.gif" alt=":o" title="Surprised" />  Thanks tokumaru!  <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"> The formula for reading data from a 2D array which is stored in memory linearly is always <strong>Y * ElementsPerRow + X</strong>, that doesn't change. But you also have to take into consideration that the base unit is the type of element you are accessing, in this case, metatiles. If you have pixel coordinates, you have to first convert them to metatile coordinates, hence the need to divide both X and Y by the dimensions of your metatiles before applying that formula.<br /><br />Another thing that will affect how you apply the formula is how your levels are stored in RAM/ROM. If you store it screen by screen, then ElementsPerRow will always be the same, because the number of metatiles per screen doesn't change. If you don't divide your level in screens, then ElementsPerRow will be the length of the entire level, and it will vary from level to level. IMO, things are easier if you divide the levels into screens, because the metatile offsets will always fit in 8 bits, and the multiplications/divisions can be easily done with shifts.</div>And cause it would be easy for my sister to edit the screens.  <span style="color: #00ffff">The blue part</span> below is almost how she did it! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />  I never thought of not dividing the level into separate screens... that would be kind of insane <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /> I think.   But it does sound like it would be easy scrolling beyond 2 screens; though I don't know how to... ...yet.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br /><br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Here comes another (untested) example of data arrangement (and how to access it):<br /><br />code<tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;"><span style="color: #00ffff">LevelMap:<br /><br />	;first screen:<br />	.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00<br />	.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00<br />	;&#40;another 12 rows here&#41;<br />	.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10<br /><br />	;second screen:<br />	.db $00, $00, $00, $00, $00, $10, $10, $00, $00, $00, $00, $00, $00, $00, $00, $00<br />	.db $00, $00, $00, $00, $00, $10, $10, $00, $00, $00, $00, $00, $00, $00, $00, $00<br />	;&#40;another 12 rows here&#41;<br />	.db $10, $10, $20, $20, $20, $20, $20, $20, $20, $21, $22, $23, $00, $00, $00, $00<br /><br />	;third screen:<br />	.db $22, $00, $22, $00, $22, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00<br />	.db $22, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00<br />	;&#40;another 12 rows here&#41;<br />	.db $20, $20, $20, $20, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10<br /><br />	;&#40;keep going for as many screens as you want&#41;</span><br /><br />;Reads the index of the metatile at position &#40;PointX, PointY&#41; in the level map<br />ReadMetatile:<br /><br />	;get the index of the screen<br />	ldy PointX+1<br /><br />	;multiply it by 240 &#40;using a look-up table&#41; and add it to the base<br />	;address of the level to create a pointer to the screen we need<br />	<span style="color: #FFFF00">clc<br />	lda ScreenOffsetLo, y<br />	adc LevelMap+0<br />	sta ScreenPointer+0<br />	lda ScreenOffsetHi, y<br />	adc LevelMap+1<br />	sta ScreenPointer+1</span><br />	;calculate the index of the metatile: &#40;Y / 16&#41; * 16 + &#40;X / 16&#41;<br />	lda PointX+0<br />	lsr<br />	lsr<br />	lsr<br />	lsr<br />	sta Temp<br />	lda PointY+0<br />	and #%11110000<br />	ora Temp<br />	tay<br /><br />	;read the metatile<br />	lda &#40;ScreenPointer&#41;, y<br /><br />	;return<br />	rts</tt>/code<br />Now you can do whatever you want with that information. Want to know if that metatile is solid? Do something like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda MetatileCollision, x<br />&nbsp; &nbsp;and #BITTHATINDICATESWHETHERAMETATILEISSOLID<br />&nbsp; &nbsp;beq +NotSolid</div></div>Swell... incredible!  That takes less cycles.  But it takes a bit more <span style="color: #FF0000"><s>space</s></span> no... memory.  Fast is class!  <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Want to know what is the top left tile of that metatile?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda MetatileTopLeft, x</div></div>Aw yes faster code!  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br />Ok I slowly changed my code to be just like your code all today.  <span style="color: #FF0000"><s>Time to sleep.</s></span>  <br />But, I haven't implemented any of this bit of <span style="color: #FFFF00">your yellow code</span> up there...  I just tried to use my variables.   <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" />  I got the first part of my code to look like the first part of your code.  Now the lady sprite falls just halfway down the screen and then pauses.  She is susposed to fall to the bottom of the screen.  <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />  My code at the end is still the same: <br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">0C3DB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />0C3DB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;GRAVITY<br />0C3DB C6 31&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dec tC<br />0C3DD 10 02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bpl +skip<br />0C3DF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />0C3DF B1 0C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lda (rhombusCollision_low), y<br />0C3E1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3E1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;if the metatile is not solid<br />0C3E1 0A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;asl a&nbsp; &nbsp; ;&lt;pushes bit #7 into carry.<br />0C3E2 90 09&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bcc +skip<br />0C3E4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3E4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;then fall to the metatile below...<br />0C3E4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3E4 B1 1A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;lda (UCollision_low), y<br />0C3E6 A5 05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lda oY<br />0C3E8 18&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;clc <br />0C3E9 69 08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; adc #8<br />0C3EB 85 05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta oY<br />0C3ED&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+skip&nbsp; <br />0C3ED&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />0C3ED E6 31&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;inc tC<br />0C3EF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />0C3EF 60&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts ;end of unpack and end of daprg-collisionU</div><br />That line <span style="color: #FFFFBF">;lda (UCollision_low), y</span> is commented  because  it doesn't really work... should load accumulator with 0 for air or 1 for solid.  But, I'm not working any more right now... haven't solved it yet... maybe you could? It's perfectly ok if yall don't.  To sleep I go... goodnight. Ohhhh and thanks tokumaru, for all of the great help!! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  I'm almost done... will post some more tomorrow afternoon.<br /><br />edit: Ok... I want to say that I know that the yellow text will help me to make my game... almost... to make our game more like a machiene.  A machiene with parts that work flawlessly together... I remember that tokumaru. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sun Oct 07, 2012 12:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">unregistered wrote:</div><div class="quotecontent">I haven't implemented any of this bit of <span style="color: #FFFF00">your yellow code</span></div><br />That code is just a multiplication by 240, which is faster with a table, but this table needs 512 bytes, which you might not want to dedicate to this purpose. Another way to multiply X by 240 is to do <strong>(X * 256) - (X * 16)</strong>. Here's a replacement for that calculation, without using tables:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;;put (screen index * 16) into ScreenPointer<br />&nbsp; &nbsp;lda PointX+1<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;sta ScreenPointer+1<br />&nbsp; &nbsp;lda PointX+1<br />&nbsp; &nbsp;asl<br />&nbsp; &nbsp;asl<br />&nbsp; &nbsp;asl<br />&nbsp; &nbsp;asl<br />&nbsp; &nbsp;sta ScreenPointer+0<br /><br />&nbsp; &nbsp;;subtract it from (screen index * 256)<br />&nbsp; &nbsp;sec<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sbc ScreenPointer+0<br />&nbsp; &nbsp;sta ScreenPointer+0<br />&nbsp; &nbsp;lda PointX+1<br />&nbsp; &nbsp;sbc ScreenPointer+1<br />&nbsp; &nbsp;sta ScreenPointer+1<br /><br />&nbsp; &nbsp;;add the result to the base address of the level<br />&nbsp; &nbsp;clc<br />&nbsp; &nbsp;lda ScreenPointer+0<br />&nbsp; &nbsp;adc #&lt;LevelMap<br />&nbsp; &nbsp;sta ScreenPointer+0<br />&nbsp; &nbsp;lda ScreenPointer+1<br />&nbsp; &nbsp;adc #&gt;LevelMap<br />&nbsp; &nbsp;sta ScreenPointer+1</div><br />It's much slower though. BTW, in my old code I used <strong>LevelMap+0</strong> and <strong>LevelMap+1</strong> by mistake, I should have used <strong>#&lt;LevelMap</strong> and <strong>#&gt;LevelMap</strong> instead.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Fri Oct 12, 2012 3:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />My sprite has started out in the lower left corner all day today... I can't figure out why.  <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /><br />Is there something wrong in the code I've been trying to set?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">0C3B3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;**********************************************************************************************<br />0C3B3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;unpack:<br />0C3B3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3B3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;**********************************************************************************************<br />0C3B3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3B3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;128&nbsp; 64&nbsp; 32&nbsp; 16&nbsp; &nbsp;8&nbsp; &nbsp;4&nbsp; &nbsp;2&nbsp; &nbsp;1&nbsp; &nbsp;<br />0C3B3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;$80 $40 $20 $10 $08 $04 $02 $01<br />0C3B3 A9 3C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda #&lt;MetatileRhombus<br />0C3B5 85 0C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sta rhombusCollision_low<br />0C3B7 A9 C8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda #&gt;MetatileRhombus<br />0C3B9 85 0D&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sta rhombusCollision_high<br />0C3BB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<br />0C3BB A9 1B&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda #&lt;MetatileCollision<br />0C3BD 85 1A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sta UCollision_low<br />0C3BF A9 C9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda #&gt;MetatileCollision<br />0C3C1 85 1B&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sta UCollision_high<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;&nbsp; &nbsp;clc<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;&nbsp; &nbsp;lda ScreenOffsetLo, y<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;&nbsp; &nbsp;adc #&lt;LevelMap<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;&nbsp; &nbsp;sta ScreenPointer+0<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;&nbsp; &nbsp;lda ScreenOffsetHi, y<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;&nbsp; &nbsp;adc #&gt;LevelMap<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;&nbsp; &nbsp;sta ScreenPointer+1<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<br />0C3C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3C3 A5 04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda oX<br />0C3C5 85 28&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sta PointX<br />0C3C7 A5 1C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda oY+23<br />0C3C9 85 2A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sta PointY<br />0C3CB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<br />0C3CB 20 F5 C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jsr linear_position ;y holds new linear position<br />0C3CE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />0C3CE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<br />0C3CE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;;GRAVITY<br />0C3CE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />0C3CE 85 FF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sta $ff<br />0C3D0 B1 10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda (ten_low), y<br />0C3D2 A8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tay<br />0C3D3 B1 0C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda (rhombusCollision_low), y<br />0C3D5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3D5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;if the metatile is not all the same tile<br />0C3D5 0A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; asl a&nbsp; &nbsp; ;&lt;pushes bit #7 into carry.<br />0C3D6 90 1C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; bcc +skip<br />0C3D8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3D8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; and if the ground below is not something solid to stand on...<br />0C3D8 A5 2C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; lda SomethingSolidtoStandon<br />0C3DA F0 18&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; beq +skip<br />0C3DC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;then fall to the metatile below...<br />0C3DC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />0C3DC A5 05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; -- lda oY<br />0C3DE 18&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; clc <br />0C3DF 69 08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; adc #8<br />0C3E1 85 05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; sta oY<br />0C3E3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />0C3E3 85 2A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PointY<br />0C3E5 20 F5 C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;jsr linear_position<br />0C3E8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />0C3E8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;and check the value of the block<br />0C3E8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;&nbsp; &nbsp;&nbsp; &nbsp;tay<br />0C3E8 B1 10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;lda (ten_low), y <br />0C3EA A8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; tay<br />0C3EB B1 1A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;lda (UCollision_low), y<br />0C3ED 85 2C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; sta SomethingSolidtoStandon<br />0C3EF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ;if it is 00 it's air<br />0C3EF D0 03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; bne +notair<br />0C3F1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ;it is air!!!<br />0C3F1 4C DC C3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;jmp --<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; +notair<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ;and if it is 01 it's solid. :)&nbsp; So try to stop or move back to the previous tile?<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ;it's probably solid!!!<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ;so stop falling<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+skip<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<br />0C3F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />0C3F4 60&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts ;end of unpack <br />0C3F5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C3F5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;linear_position:<br />0C3F5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;; Calculate the index of the metatile: (Y / 16) * 16 + (X / 16) = LINEAR_POSITION&nbsp; p.50<br />0C3F5 A5 28&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda PointX+0<br />0C3F7 4A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lsr a ;divide my X coordinate by (2 * 2 * 2 * 2) = 16<br />0C3F8 4A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lsr a ;&lt;----------------------------*<br />0C3F9 4A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lsr a ;&lt;--------------------------------*<br />0C3FA 4A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lsr a ;&lt;------------------------------------*<br />0C3FB AA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; tax<br />0C3FC 85 37&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sta tC+1<br />0C3FE A5 2A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;lda PointY+0<br />0C400 29 F0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;and #11110000b<br />0C402 05 37&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;ora tC+1<br />0C404 A8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tay<br />0C405&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />0C405 60&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Mon Oct 15, 2012 1:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><strong><span style="font-size: 200%; line-height: normal"><span style="color: #BF0040">Yessss!</span></span></strong>  <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br />Ok it's fixed now... I found out this morning that the -- loop is too tiny!  When you delete that loop part and let it end with storing the new value of SomethingSolidtoStandon... then it works!! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  She falls ............................................. down into the ground and sticks there.  I would like to see her fall and stop with her feet on the ground.  Is this a good method?: Calculate the block above her hand... she has her hands high in the air.  Do I just subtract 16 inside each calculation?  Or maybe I should add 16 to her height so that checks the block near her feet?   <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />  I'm kind confused about what to do.  I'll figure it out sometime.  <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Oct 15, 2012 2:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The exact points that make contact with surfaces can be anything you want. I have no idea how you're handling object coordinates, but I assume you have the current coordinates of the girl characters stored somewhere, which you use to calculate the coordinates of the individual sprites. Similarly to how you calculate sprite coordinates from these &quot;master coordinates&quot;, you can also calculate the collision points.<br /><br />If the character is 16x32 pixels, and its coordinates indicate its top left corner, you can calculate a point of collision at the middle bottom of the character with X+8, Y+32. Once you know this point (PointX, PointY), you can call that routine that checks the metatile at that location. If it's not solid, the character should fall. If it is solid, you can't simply stop it from falling (because the character could be stuck into the ground if moving faster than 1 pixel per frame), you have to push it back up so that it's exactly on top of the floor.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Mon Oct 15, 2012 2:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Grand!!! Thlink I  have it!!<br /><br /><span style="color: #FF4000">edit: Well... now she starts way up high and falls a little bit...then stops... well above the ground.  It's kind of exciting!!!!!!!!!!!!!!  ALMOST THERE... SHE JUST NEEDS TO FALL FOR A LITTLE BIT LONGER!! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></span><br /><br /><span style="color: #FF8000">edit2: Now she falls to the ground and sticks inside it a little!</span>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Mon Oct 15, 2012 6:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">The exact points that make contact with surfaces can be anything you want. I have no idea how you're handling object coordinates, but I assume you have the current coordinates of the girl characters stored somewhere, which you use to calculate the coordinates of the individual sprites. Similarly to how you calculate sprite coordinates from these &quot;master coordinates&quot;, you can also calculate the collision points.<br /><br />If the character is 16x32 pixels, and its coordinates indicate its top left corner, you can calculate a point of collision at the middle bottom of the character with X+8, Y+32. Once you know this point (PointX, PointY), you can call that routine that checks the metatile at that location. If it's not solid, the character should fall. If it is solid, you can't simply stop it from falling (because the character could be stuck into the ground if moving faster than 1 pixel per frame), <span style="color: #FFFF00">you have to push it back up so that it's exactly on top of the floor.</span></div><br /><br /><span style="color: #FFFF00">HOW??</span> I get that it is time to add eight... but where ever I put the<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sec<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lda oY<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sbc #8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta oY</div><br />it makes our girl character not move at all... every time my function subtracts 8 right after it added 8... and so she doesn't fall... ever!   <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> How would you make <span style="color: #FFFF00">this</span> work correctly?  My logic has it <span style="color: #BF00FF">check the block below</span> and add eight if <span style="color: #BF00FF">it's</span> air and then quit after reading the type of block below.  That happens every time.  <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Mon Oct 15, 2012 6:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You can't subtract by a fixed amount. If she's one pixel in the floor and you subtract eight, she's flying. If she's 9 pixels in the floor and you subtract 8 she's still in the floor. <br /><br />You have to figure out how far she needs to be ejected, and then eject her.<br /><br />If you've got 16x16 metatiles, only the lowest four bits of her lowest coordinate byte matter. You check if she's in a collision enabled tile.<br /><br />Now think. If the lowest bits of her position are $0, how many pixels does she need to move up? How about when she's at $F? Once you figure that out, figure out some math to make it always eject her immediately out the tile.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Oct 15, 2012 7:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">unregistered wrote:</div><div class="quotecontent">it makes our girl character not move at all... every time my function subtracts 8 right after it added 8... and so she doesn't fall... ever!</div><br />Pushing her back up is something you should do only if her feet are into the floor, not all the time. And like Kasumi said, you can't just push her a fixed amount of pixels.<br /><br />The math should be quite simple really, since your solid metatiles are always 16x16 pixels... Say that you checked point X + 8, Y + 32 of a 16x32 character, and you found the metatile at that position to be solid. This means you have to make the character &quot;snap&quot; to the metatile that's above this one. You can ignore how far into the floor the character is with PointY AND #%f0, which is the pixel coordinate of the very top (first row) of the solid metatile. Then, it's just a matter of subtracting the character's height to find the new Y coordinate that will place it right above the floor.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">My logic has it <span style="color: #BF00FF">check the block below</span> and add eight if <span style="color: #BF00FF">it's</span> air and then quit after reading the type of block below.  That happens every time.  :?</div><br />And if the block below is solid, you must push the character back up. You can do it that way, but you'll have no acceleration at all (because you always add 8), and that looks very bad. The speed of falling objects increases with time, so it would be better that you added a variable instead of a constant number, and every frame that the character is in the air the value of that variable increases. However, if you increase the speed by whole pixels every frame it will grow too fast and you'll barely notice it, so you should probably look into fixed point math, so that you can add fractional numbers to the character's speed to make it more smooth.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Oct 15, 2012 8:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">(because you always add <img src="./images/smilies/icon_cool.gif" alt="8)" title="Cool" /></div><br />Can we get rid of that smiley on the forum? Way more often I see it used accidentally rather than intentionally. Or maybe the accidental uses just stick out...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Oct 15, 2012 10:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, I always get screwed by that stupid smiley...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Mon Oct 15, 2012 10:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">unregistered wrote:</div><div class="quotecontent">My logic has it <span style="color: #BF00FF">check the block below</span> and add eight if <span style="color: #BF00FF">it's</span> air and then quit after reading the type of block below.  That happens every time.  <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /></div><br />And if the block below is solid, you must push the character back up. You can do it that way, but you'll have no acceleration at all (because you always add <img src="./images/smilies/icon_cool.gif" alt="8)" title="Cool" />, and that looks very bad. The speed of falling objects increases with time, so it would be better that you added a variable instead of a constant number, and every frame that the character is in the air the value of that variable increases. However, if you increase the speed by whole pixels every frame it will grow too fast and you'll barely notice it, so you should probably look into fixed point math, so that you can add fractional numbers to the character's speed to make it more smooth.</div><br /><br />Fixed point math. OK... I found <a href="http://darcy.rsgc.on.ca/ACES/ICE4M/FixedPoint/FixedPointRepresentationFractionalMath.pdf" class="postlink"><span style="color: #FF80ff">this pdf</span></a> and have read it and understand most of it... i think.  I have kind of choose to use Q3.5 nums... on page 13 of that pdf i think I remember.  Would something like that work well for this falling faster math?  Or they show a Q3.13 also.  That's a 2 byte value.  <br /><br />...While reading <span style="color: #FFbfff">the pdf</span>  it reminded me of Calculus... I was able to retake my calculus class... so I learned it twice... I guess.  Those 2 semesters were quite a time ago though... I think. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><span style="color: #FFFF00">edit: tokumaru, </span><div class="quotetitle">tokumaru<span style="color: #80FF00">, on page 50,</span> wrote:</div><div class="quotecontent">EDIT: Damn <img src="./images/smilies/icon_cool.gif" alt="8)" title="Cool" /> smiley!</div><span style="color: #FFFF00"> how did you do that?  <img src="./images/smilies/icon_surprised.gif" alt=":o" title="Surprised" /> </span>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Tue Oct 16, 2012 1:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />In this case it's really more of change in perception than learning anything new.<br /><br />You have two bytes. Together, they represent one number. <br />You're probably familiar with this way.<br />Number = hibyte*256+lobyte for a range of 0 through 65535.<br /><br />But the computer really doesn't care about what the bytes represent to you.<br /><br />Number could also represent onebyte + (otherbyte/256) to you for a range of 0 through 255+(255/256). In this case &quot;otherbyte&quot; represents the fractional part of a number.<br /><br />In both cases additions/subtractions to the bytes are done in exactly the same way, they just represent something different for you, the programmer.<br /><br />A speed like this:<br />onebyte = #$01<br />otherbyte = #$00<br />added to the characters position means the character moves one pixel every frame.<br />A speed like this:<br />onebyte = #$00<br />otherbyte = #$40<br />added means the character moves one pixel every 4 frames. (Because that's how many adds of that amount it would take to carry 1 pixel over)<br /><br />(This also means your position will need another byte to represent the fractional part of the position, which if you scroll means you'll need at least 3 bytes for the position alone, two for the speed)<br /><br />At least, that's one way to set it up. Make sense?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Oct 16, 2012 7:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The code <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">8&#41;</tt> used to make the emoticon with sunglasses. As of two minutes ago, I have turned it off in favor of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">8-&#41;</tt>, which produces <img src="./images/smilies/icon_cool.gif" alt="8-)" title="Cool" />.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Oct 16, 2012 7:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: 8x16 sprite is really a 16x32 pixel image?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">unregistered wrote:</div><div class="quotecontent">I have kind of choose to use Q3.5 nums... on page 13 of that pdf i think I remember.  Would something like that work well for this falling faster math?  Or they show a Q3.13 also.</div><br />Those will make it hard to use the integer part of the values... Kasumi's suggestion of using 1 byte for the integer part and another for the fractional part (i.e. 8.8) makes much more sense. That way you easily use the high byte as the integer part as is, without having to shift bits around.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><span style="color: #FFFF00"> how did you do that?  <img src="./images/smilies/icon_surprised.gif" alt=":o" title="Surprised" /> </span></div><br />How did I do what? Show 8 and ) instead of the smiley? There's a checkbox in below the text area in the posting/editing page that disables smileys in the current post.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>51</strong> of <strong>83</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
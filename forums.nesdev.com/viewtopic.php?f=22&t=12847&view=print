<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - A Few Hello World 'Tests'</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">A Few Hello World 'Tests'</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=22&amp;t=12847">http://forums.nesdev.com/viewtopic.php?f=22&amp;t=12847</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Wed May 27, 2015 11:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So recently I got bored with the good ol' Sega 8 bit systems, and decided to try out the NES.<br /><br />When first walking in, there was an unfortunately debatable topic: which assembler to use.<br /><br />So I not only created a hello world for one assembler, I made one for them all. By 'all' I mean asm6, ca65, nesasm and wla-dx.<br /><br />The download link is below. It gives you a little taste of each one (except for possibly ca65, because for all I know that thing could have every function in the world I could have used). <br /><br />Got feedback on the code itself? I'd love it.<br /><br />I'm not sure if this is even a good section for the subject, but here's my thoughts.<br /><br />asm6<br />Easy to use. Simple and compatible. I've only ever seen two complaints with it, one of which was somewhat outlandish and the other one I'm not concerned with. Overall my favourite.<br /><br />ca65<br />Nice and all, but a bit heavy for my tastes. What with the separate cfg file being required for all your projects (unless portability isn't a concern). And I couldn't figure out how to have ascii text, but eh, that's not really the main subject. Certainly a second fave.<br /><br />wla-dx<br />My god, it's so underrated. The documentation may not be so great, but once you figure it out it can do plenty. Its main downside is its inability to decide on whether to put in addresses as 8 or 16 bit (you have to specify with .b or .w). I could have some bias since this is the assembler of choice in the z80 community, so.<br /><br />nesasm<br />Eh. Not into it. Directives need to be indented, making me wonder why do they even start with a period (which I would think lets the assembler detect if it's a directive). No anonymous labels. Somewhat picky syntax. I'd say the pre-generated headers aren't worth having to live with the rest of the BS.<br /><br />Anyway, what are your thoughts on these? Tell meh.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=3497">asm tests 0.4.zip</a> [10.89 KiB]
			</span><br />
			<span class="gensmall">Downloaded 203 times</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=3310">asm tests 0.3.zip</a> [10.33 KiB]
			</span><br />
			<span class="gensmall">Downloaded 181 times</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=3307">asm tests 0.2.zip</a> [10.05 KiB]
			</span><br />
			<span class="gensmall">Downloaded 152 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu May 28, 2015 7:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />In CA65 you can put string literals in a .byte directive. You can also interleave number literals with it.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.byte &quot;MY NAME IS&quot;,0<br />.byte &quot;A&quot;,13,&quot;B&quot;,$42</div><br /><br />If you want to get more advanced, it has directives to remap characters too, so that the encoding for string literals can map to something other than ASCII.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu May 28, 2015 7:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Also, you should wait for <em>two</em> vblanks to pass before writing to the PPU registers. Move that second <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">jsr vblank_cycle</tt> before your stx $2000. (Won't cause a problem on emulators, or with powerpak, but if you built a cartidge for it you might see problems if you're using the PPU before it's warmed up.)<br /><br />Secondly, you enable sprite rendering but you've never initialized the OAM data for displaying sprites. You're likely to see weird random sprites on the screen if you try it on real hardware. Emulators will probably just show a pile of sprite tile $00 in the top left corner.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Thu May 28, 2015 9:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't know about asm6, but I wholeheartedly recommend ca65 over wla-dx (I think you all know my opinion on that one...) and nesasm. I remember when I first wanted to do SNES programming, I found that I had a hard time finding anything, and I kept hearing about something called &quot;nerdy nights&quot; which was basically a tutorial for NES programming. I figured that maybe some of the knowledge that I'd acquire there would help me on the SNES, (luckily, it did a bit) and I remember them using nesasm as the assembler. I remember hating every second of it. It was only until I found bazz's tutorials on superfamicom.org and this website that I had any clue as to what I was doing. (I really don't think nerdy nights was the best tutorial either.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Prime</b> [ Thu May 28, 2015 9:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I use wla-dx for master system programming so it made sense to also use it for nes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Thu May 28, 2015 9:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I just had a big fiasco where it decided to use 8 bit addressing instead of 16 bit and it screwed me over, so I vowed never to use it again. I thought I was going crazy because I kept looking over the code I made and the SNES kept crashing, but it wasn't actually my fault.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Thu May 28, 2015 9:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent">I just had a big fiasco where it decided to use 8 bit addressing instead of 16 bit and it screwed me over, so I vowed never to use it again. I thought I was going crazy because I kept looking over the code I made and the SNES kept crashing, but it wasn't actually my fault.</div><br />Like I said, that can be fixed by adding a &quot;.w&quot; but it looks ugly and shouldn't be necessary.<br /><br /><div class="quotetitle">Prime wrote:</div><div class="quotecontent">I use wla-dx for master system programming so it made sense to also use it for nes.</div><br />Yup, that's my exact situation. It just doesn't seem as good for the 6502.<br /><br />rainwarrior, thanks for the suggestions. Fix'd it up. What are the directives to remap characters though?<br /><br />EDIT: Added new version to this post on accident.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Thu May 28, 2015 9:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nicklausw wrote:</div><div class="quotecontent">Like I said, that can be fixed by adding a &quot;.w&quot; but it looks ugly and shouldn't be necessary.</div><br />Nobody told me that... Anyway, the only reason you have to do that is that it's too stupid to realize if you want 8 bit or 16 bit addressing. It's not like any of the other assemblers have that problem.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Thu May 28, 2015 9:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent"><div class="quotetitle">nicklausw wrote:</div><div class="quotecontent">Like I said, that can be fixed by adding a &quot;.w&quot; but it looks ugly and shouldn't be necessary.</div><br />Nobody told me that...</div><br />Wait, seriously? People around here don't seem to have ANY idea how to use WLA. Perhaps it needs some better examples?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu May 28, 2015 10:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nicklausw wrote:</div><div class="quotecontent">What are the directives to remap characters though?</div><br /><br />The relevant control command is <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.charmap</tt><br /><br />You can find all this stuff in the documentation: <a href="http://www.cc65.org/doc/ca65.html" class="postlink">http://www.cc65.org/doc/ca65.html</a><br /><br />(You might look at the entry for <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.byte</tt> to see an example for using strings, too.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Thu May 28, 2015 10:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"><div class="quotetitle">nicklausw wrote:</div><div class="quotecontent">What are the directives to remap characters though?</div><br /><br />The relevant control command is <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.charmap</tt><br /><br />You can find all this stuff in the documentation: <a href="http://www.cc65.org/doc/ca65.html" class="postlink">http://www.cc65.org/doc/ca65.html</a><br /><br />(You might look at the entry for <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.byte</tt> to see an example for using strings, too.)</div><br />I tried to set A-Z to their specific characters, and found that the only good way to do so is through a loop. Is this really the best way?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">charmap1 .set $41<br />charmap2 .set $b<br />.repeat 26<br />.charmap charmap1,charmap2<br />charmap1 .set charmap1+1<br />charmap2 .set charmap2+1<br />.endrep<br />.charmap $20,$00 ; space</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Movax12</b> [ Thu May 28, 2015 10:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />More up-to-date documentation is here: <!-- m --><a class="postlink" href="http://cc65.github.io/doc/ca65.html">http://cc65.github.io/doc/ca65.html</a><!-- m --><br />Most recent win32 binary (If you don't want to build your own): <!-- m --><a class="postlink" href="http://sourceforge.net/projects/cc65/">http://sourceforge.net/projects/cc65/</a><!-- m --><br /><br />For charsets, maybe take a look at this post by thefox: <!-- l --><a class="postlink-local" href="http://forums.nesdev.com/viewtopic.php?p=129836#p129836">viewtopic.php?p=129836#p129836</a><!-- l -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Thu May 28, 2015 10:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks Movax, I was able to set that up accordingly. The multi-line thing didn't work though...<br /><br />Anyway 0.3 is up (updates so fast I'm like Ville Helin XD). Fixed the NESASM example (forgot to remove the part enabling sprites,) added the charmap to the ca65 example and changed how the print screen function works. At first I had the idea that this lets you print to infinity, but that's not the case.<br /><br />So far nesasm is the only assembler that I couldn't set up strings with. Any ideas?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu May 28, 2015 12:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just one more thing about the startup code. I think what you've got probably works, but for good practice you should add one extra read of $2002 before your 2 vblank loops, or alternatively just do 3 vblank loops.<br /><br />The reasons are outlined here: <a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=3958" class="postlink">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=3958</a><br /><br />I'd forgotten about this because it's been a long time since I wrote new startup code, but basically a lot of commercial NES games don't do this, and the popular Nerdy Nights tutorial doesn't either, but if you start writing to the PPU too soon after that second vblank loop, it can fail.<br /><br />Because you initialize RAM and stuff afterwards, the cycles spent doing that should actually cover the problematic window of time, but I'm just letting you know it's a probably a good idea to clear $2002 anyway. (Example: <a href="http://wiki.nesdev.com/w/index.php/Init_code" class="postlink">http://wiki.nesdev.com/w/index.php/Init_code</a>)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nicklausw</b> [ Thu May 28, 2015 12:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A Few Hello World 'Tests'</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">Just one more thing about the startup code. I think what you've got probably works, but for good practice you should add one extra read of $2002 before your 2 vblank loops, or alternatively just do 3 vblank loops.<br /><br />The reasons are outlined here: <a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=3958" class="postlink">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=3958</a><br /><br />I'd forgotten about this because it's been a long time since I wrote new startup code, but basically a lot of commercial NES games don't do this, and the popular Nerdy Nights tutorial doesn't either, but if you start writing to the PPU too soon after that second vblank loop, it can fail.<br /><br />Because you initialize RAM and stuff afterwards, the cycles spent doing that should actually cover the problematic window of time, but I'm just letting you know it's a probably a good idea to clear $2002 anyway. (Example: <a href="http://wiki.nesdev.com/w/index.php/Init_code" class="postlink">http://wiki.nesdev.com/w/index.php/Init_code</a>)</div><br />Alright, made that one last change. Didn't increment the version because it's...not really all that necessary.<br /><br />Espozo: I opened an issue on GitHub about how you have to use .w for all 16-bit addresses, and apparently Ville is looking into it. How long has this problem been around, anyway...?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
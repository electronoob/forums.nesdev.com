<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - CRT luminofor fading simulation</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="https://forums.nesdev.com/">https://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">CRT luminofor fading simulation</span><br /><span class="gensmall"><a href="https://forums.nesdev.com/viewtopic.php?f=3&amp;t=10171">https://forums.nesdev.com/viewtopic.php?f=3&amp;t=10171</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>5</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Eugene.S</b> [ Sat Jun 15, 2013 3:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I want to ask nesdev people,<br />Is there an &quot;emulator&quot;or &quot;filter&quot; that capable simulate <a href="http://youtu.be/E5SwaVilpX8" class="postlink">smooth luminofor fading</a> like CRT?<br />As you can see, stars has comet tails:<br /><img src="http://savepic.org/3652176.png" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 15, 2013 4:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I assume that playing with the &quot;motion blur&quot; effect of something like VisualBoyAdvance might provide a similar effect.<br /><br />ObNES: To run NES games in VisualBoyAdvance, use PocketNES.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Eugene.S</b> [ Sat Jun 15, 2013 4:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just tested Stars-Field demo on VBA-M (+ pocketnes) with motion blur. <br />Absolutely no effect, stars doesn't have tails

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Jun 15, 2013 5:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Googling &quot;crt simulator&quot; provides some links:<br /><!-- m --><a class="postlink" href="http://www.bogost.com/games/a_television_simulator.shtml">http://www.bogost.com/games/a_televisio ... ator.shtml</a><!-- m --> (definitely seems to provide some ghosting emulation)<br /><!-- m --><a class="postlink" href="http://ascii.textfiles.com/archives/3786">http://ascii.textfiles.com/archives/3786</a><!-- m --><br /><br />The current CRT TV I have has a half life noticeably shorter than 1/60th of a second. I'd arbitrarily guess somewhere around 5ms.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Jun 16, 2013 11:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you're okay with an exponential fade, you can implement something like this fairly cheaply by storing the previous frame buffer and blending it with the new frame buffer at some % blend (e.g. 50% blend). Basically like an audio delay with feedback.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Grapeshot</b> [ Sun Jun 16, 2013 12:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Simply blending the current frame with the previous one doesn't produce the right result, since it blurs the front of moving objects and doesn't leave tails. What's needed is a blending mode that blends in more of the color of the current frame pixel if it is brighter than the previous frame pixel.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Jun 16, 2013 12:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, not <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">y[n]=k·y[n-1]+&#40;1-k&#41;·x[n]</tt> but <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">y[n]=max&#40;k·y[n-1],x[n]&#41;</tt> then.<br /><br />I guess it's not simply doable with a couple of transparent opengl textures.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Jun 16, 2013 1:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The impression I got when I experimented with moving things around in a BASIC program on an Apple IIe with a monochrome monitor back in middle school is that the a CRT phosphor is like a piano string, decaying quickly over the short term and more slowly over the long term. So you'd need to feed the video signal into two different motion blur processes with two different time constants and then blend the state of both processes to the screen.<br /><br />As a first approximation, you could try implementing it as 75% current frame, 25% state of feedback motion blur.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Eugene.S</b> [ Sun Jun 16, 2013 5:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Funny effect: <!-- m --><a class="postlink" href="http://youtu.be/SKUHMEgfY_Q">http://youtu.be/SKUHMEgfY_Q</a><!-- m --><br />Stars change their size/color and pulsate on motion.<br /><br />I haven't seen anything like this on software &quot;CRT Filters&quot;

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Jun 16, 2013 5:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This could be one of two things. If it also happens in an emulator, the game is changing CHR banks based on the horizontal scroll position. MetalStorm is known to do this as a way of faking parallax scroll. Otherwise, you're seeing the fact that each pixel covers only 5/6 of a PAL color subcarrier cycle, and an isolated colored pixel may end up darker or lighter depending on its momentary alignment with the subcarrier grid.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Eugene.S</b> [ Sun Jun 16, 2013 5:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I haven't see size pulsations on emulators. <br />When you are using blargg's NTSC-filter, you can see color pulsations, but no size pulsations.<br />I think it's CRT effect.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Jun 16, 2013 5:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are you referring to the effect where the size of the image is proportionate to the brightness of the image? (i.e. crosstalk between the deflection circuit and the electron beam drive)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Eugene.S</b> [ Sun Jun 16, 2013 5:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yes, difference colors have different brightness.<br />Dark-blue star looks smaller than white star on CRT, but in real they have same size.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Jun 16, 2013 9:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh, you're referring to electron beam size being a function of brightness, especially in older tubes where the electron emitter has eroded. I think MAME's CRT simulator does handle that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikejmoffitt</b> [ Mon Jun 17, 2013 8:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: CRT luminofor fading simulation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You can get a similar effect by rendering the previous frame at 15% or so luminisoty, but with additive blending over the new frame, so that it does not darken the new frame at all. A few iterations of this should look similar.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>5</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
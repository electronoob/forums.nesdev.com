<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Fixing the broken music in StarTropics</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Fixing the broken music in StarTropics</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=12040">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=12040</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Wed Nov 19, 2014 11:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Probably most people never noticed, but two of the tracks in StarTropics have always been slightly broken. I decided to disassemble it and fix them. I made a video about it here:<br /><br /><a href="https://www.youtube.com/watch?v=EmUvGH2HMuc" class="postlink"><img src="http://i4.ytimg.com/vi/EmUvGH2HMuc/default.jpg" alt="Image" /><br />Fixing Startropics</a><br /><br />IPS patch: <a href="http://rainwarrior.ca/projects/nes/startropics_music_fix.ips" class="postlink">http://rainwarrior.ca/projects/nes/startropics_music_fix.ips</a><br />NSF: <a href="http://rainwarrior.ca/projects/nes/startropics_music_fix.nsf" class="postlink">http://rainwarrior.ca/projects/nes/startropics_music_fix.nsf</a><br />Source: <a href="http://rainwarrior.ca/projects/nes/startropics_music_fix.zip" class="postlink">http://rainwarrior.ca/projects/nes/startropics_music_fix.zip</a><br /><br />NSF of original soundtrack for comparison: <a href="http://rainwarrior.ca/projects/nes/startropics.nsf" class="postlink">http://rainwarrior.ca/projects/nes/startropics.nsf</a><br /><br />The source is probably of interest to the NESDev crowd. I made a fully labelled disassembly, and documented the process a bit. Anyone looking to hack StarTropics' music should have all the info they need right at hand with this. I suppose you could even borrow its music engine if you wanted (but it's really limited, maybe not great to use, possibly fun as a challenge).<br /><br />The NSF of the original soundtrack is a new rip I made built from the disassembly to prove I had done it correctly. It's not significantly different than the existing NSF rip of StarTropics, but it doesn't have unused data stripped out.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu Nov 20, 2014 8:02 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Will this be posted on romhacking.net?  They have a section for bug fixes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Nov 20, 2014 8:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I tried to submit to romhacking.net yesterday, but this morning I got an e-mail telling me that, apparently, I didn't get the submission ritual exactly right and will have to do it again. Site has a lot of usability issues. D:

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>brizzo</b> [ Thu Nov 20, 2014 8:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Great work! Thanks for sharing your disassembly as well! <br /><br />Always thought the ending music didn't fit the game, but the fixed tune certainly does

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccovell</b> [ Thu Nov 20, 2014 4:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Very cool, and thanks for giving a thorough explanation in your video.<br /><br />(Also, your speaking voice/style sounds a lot like my own... maybe it's a Canadian thing?)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Mon Nov 24, 2014 7:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think it may be buggy, try listening to the music on the first level, a channel cuts out after a while and starts playing weird high notes.  Perhaps they shared data with the overworld theme?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Mon Nov 24, 2014 7:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />All of the music data was accounted for in the disassembly. Nothing is shared between tracks.<br /><br />Maybe tell me your ROM's CRC and which emulator you were using? I have tested on two Startropics ROMs, the (U) one matched the dump from my own cartridge, and the (Europe) one I have seen has identical music data (so the same IPS works on it).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Mon Nov 24, 2014 9:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />File matches bootgod's CRC32s, I was using FCEUX (old ppu).  Rom's mapper was set to mapper 4 (MMC3).<br /><br />Crap, it was just the low hearts beeping....

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Mon Nov 24, 2014 10:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh, ha ha.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>SkinnyV</b> [ Wed Nov 26, 2014 8:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I got to say that it is a pretty awesome job you did. Very interesting! I wonder if the programmer did not notice or didn't think it was a big deal enough to fix. <br /><br />Now the next time Canada get blamed for Justin Bieber, I'll be able to fight back and state proudly that Canada also fixed StarTropic's soundtrack! Xp

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Wed Nov 26, 2014 8:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">SkinnyV wrote:</div><div class="quotecontent">I got to say that it is a pretty awesome job you did. Very interesting! I wonder if the programmer did not notice or didn't think it was a big deal enough to fix.</div><br />Quoting myself on Twitter: <em>I'd bet money someone noticed these at the time but deadlines &amp; priorities never allowed for its resolution.</em>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Great Hierophant</b> [ Sun Nov 08, 2015 8:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A bit late to this discovery, but I did want to inform everyone that this fix works in both the PowerPak and EverDrive N8 despite the Mapper 4 issue.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Nov 08, 2015 8:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It plays nice with any emulator that ignores the MMC3's RAM disable function, since without that it's MMC6 compatible. No MMC3 or MMC6 games actually rely on these bits to function, but they do get used to try and protect the data against accidental corruption, so they'll have an effect if you implement them.<br /><br />If you don't implement the RAM disable in mapper 4, though, your emulator probably has a problem with Low G Man due to a bug in its music code, which is why I patched it too: <a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=13105" class="postlink">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=13105</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jedi QuestMaster</b> [ Wed Nov 11, 2015 1:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing the broken music in StarTropics</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh, hey! I didn't notice this thread before. Now that I've played &amp; beaten StarTropics I suppose I can partake in this discussion now. <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> <br /><br />Your, sir Brad Smith, are a gentleman and a scholar. I fell in love with that ending theme since day one, and it's nice to know there's more to it--it's kinda like listening to the Ninja Ryukenden soundtrack release with those extra notes added. <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> <br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">Quoting myself on Twitter: <em>I'd bet money someone noticed these at the time but deadlines &amp; priorities never allowed for its resolution.</em></div><br /><br />It's a shame. This could have been fixed for the Virtual Console release (I take it it wasn't?).

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
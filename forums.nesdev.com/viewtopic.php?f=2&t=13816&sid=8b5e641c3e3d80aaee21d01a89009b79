<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - [FIXED] Decimal 16 bit variables and CPU time/ROM space...</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESdev" href="http://forums.nesdev.com/feed.php?f=2" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - [FIXED] Decimal 16 bit variables and CPU time/ROM space..." href="http://forums.nesdev.com/feed.php?f=2&amp;t=13816" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en&amp;sid=718af6d6c0ce7d3419f996e0840034f7" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php?sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php?sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php?sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Mon Nov 07, 2016 7:12 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered&amp;sid=718af6d6c0ce7d3419f996e0840034f7">View unanswered posts</a> | <a href="./search.php?search_id=active_topics&amp;sid=718af6d6c0ce7d3419f996e0840034f7">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=718af6d6c0ce7d3419f996e0840034f7">Board index</a> &#187; <a href="./viewforum.php?f=24&amp;sid=718af6d6c0ce7d3419f996e0840034f7">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2&amp;sid=718af6d6c0ce7d3419f996e0840034f7">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=2&amp;t=13816&amp;sid=718af6d6c0ce7d3419f996e0840034f7">[FIXED] Decimal 16 bit variables and CPU time/ROM space...</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320&amp;sid=718af6d6c0ce7d3419f996e0840034f7">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=13816&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 15 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=2&amp;t=13816&amp;sid=718af6d6c0ce7d3419f996e0840034f7&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=2&amp;t=13816&amp;view=previous&amp;sid=718af6d6c0ce7d3419f996e0840034f7">Previous topic</a> | <a href="./viewtopic.php?f=2&amp;t=13816&amp;view=next&amp;sid=718af6d6c0ce7d3419f996e0840034f7">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p163978"></a>
				<b class="postauthor">Vectrex2809</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p163978">[FIXED] Decimal 16 bit variables and CPU time/ROM space...</a></div><div style="float: right;"><a href="./viewtopic.php?p=163978&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p163978"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 06, 2016 4:31 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6607_1422790614.gif" width="100" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 14, 2014 6:05 am<br /><b>Posts:</b> 75<br /><b>Location:</b> Lausanne, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Up until now, I never used a 16 bit variable in my games as a variable that is buffered to the screen (at least not to its full potential, since the coins in Brony Blaster are a 16 bit variable but it can only go up to 9999 in the game). The first thing that came to my mind when buffering such variables is to take 5 variables in the RAM, load the high byte to X and then add decimal 256 to those variables, while having a loop where X decrements. When all this is done, I convert the lower byte to decimal and put it in the designated variables (Which works as it should). Here's some pseudocode to show you what I mean<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">LDX highbyte<br />.loop<br />CPX #$00<br />BEQ .done<br />;Fairly enough code that adds the decimal values to the designated RAM spot<br />DEX<br />JMP .loop<br />.done<br />;Rest of code<br /></div><br />The problem is that converting the high byte to decimal takes more CPU time each time the high byte is incremented, up to a certain point where the game slows down and becomes unplayable. I had another solution in mind but that would take a lot of ROM space which I don't want to waste either.<br />Does there exist any solution to buffer 16-bit variables conveniently? I know a few commercial games managed to do so (For example, the money in Uncharted Waters is a 16 bit variable, but then that game is rather slow paced so it can get away with CPU time use)<br /><br /><strong>tl;dr</strong> Is there any convenient way to buffer decimal 16 bit variables to sprites or to the background?</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=6607&amp;sid=718af6d6c0ce7d3419f996e0840034f7">Vectrex2809</a> on Sun Feb 07, 2016 5:38 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6607&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p163980"></a>
				<b class="postauthor">Sik</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p163980">Re: Buffering decimal 16 bit variables and CPU time/ROM spac</a></div><div style="float: right;"><a href="./viewtopic.php?p=163980&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p163980"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 06, 2016 5:43 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Aug 12, 2010 3:43 am<br /><b>Posts:</b> 1589
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Doesn't SMB1 store coins as two separate digits without ever storing the value as-is? (i.e. works off the split digits directly)<br /><br />But yeah, it may be more convenient to update each digit directly instead of recalculating them off the 16-bit value each time</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4526&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p163985"></a>
				<b class="postauthor">Vectrex2809</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p163985">Re: Buffering decimal 16 bit variables and CPU time/ROM spac</a></div><div style="float: right;"><a href="./viewtopic.php?p=163985&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p163985"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 06, 2016 7:35 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6607_1422790614.gif" width="100" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 14, 2014 6:05 am<br /><b>Posts:</b> 75<br /><b>Location:</b> Lausanne, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Sik wrote:</div><div class="quotecontent">Doesn't SMB1 store coins as two separate digits without ever storing the value as-is? (i.e. works off the split digits directly)<br /><br />But yeah, it may be more convenient to update each digit directly instead of recalculating them off the 16-bit value each time</div><br /><br />Yeah, I was thinking about this instead of using 16-bit variables. I actually use this method for scoring since scores usually have 5 or 6 &quot;active&quot; digits (I don't use the last zero in most of my games) that need to go over 65536. 16-bit variables would be more interesting to use for coin counts and similar purposes though IMO</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6607&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p163988"></a>
				<b class="postauthor">Sik</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p163988">Re: Buffering decimal 16 bit variables and CPU time/ROM spac</a></div><div style="float: right;"><a href="./viewtopic.php?p=163988&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p163988"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 06, 2016 8:20 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Aug 12, 2010 3:43 am<br /><b>Posts:</b> 1589
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">You could always just keep the value stored both ways =P (that's 7 bytes already, though...)<br /><br />Is it that bad to do four loops? (dividing by 10000, 1000, 100 and 10, in that order) Sounds wasteful, but shouldn't explode like that in terms of CPU usage (36 iterations at worst), and the last loop would only need 8-bit calculations even.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4526&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p163992"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p163992">Re: Buffering decimal 16 bit variables and CPU time/ROM spac</a></div><div style="float: right;"><a href="./viewtopic.php?p=163992&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p163992"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 06, 2016 11:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 17206<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">A 16-bit conversion takes 670 cycles at most. (<a href="http://wiki.nesdev.com/w/index.php/16-bit_BCD" class="postlink">Source</a>) It works by subtracting 40000, 20000, 10000, 8000, 4000, 2000, 1000, 800, ..., 10. And only when the status bar updates do you need to repeat the conversion. This is the approach I used for money in <em>RHDE</em> and kill count in <em>Haunted</em>.<br /><br />A trick I've used in <em>Thwaite</em> is &quot;base 100&quot;, which stores a 4-digit value as two bytes from 0 to 99 ($00 to $63) and subtracts 100 ($64) when it compares higher. Then I can use another unrolled 8-bit binary to decimal routine, which takes 80 cycles per byte.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p164008"></a>
				<b class="postauthor">Vectrex2809</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164008">Re: Buffering decimal 16 bit variables and CPU time/ROM spac</a></div><div style="float: right;"><a href="./viewtopic.php?p=164008&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164008"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 07, 2016 5:37 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6607_1422790614.gif" width="100" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 14, 2014 6:05 am<br /><b>Posts:</b> 75<br /><b>Location:</b> Lausanne, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Actually I found a rather simple way to do it! Here's a snippet of code from Brony Blaster that makes calculating 16 bit variables way easier.<br />This only works for 4 number values, and there is another part in my code that stops the counter at #$270F (dec 9999)<br />Thanks for the replies <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent"><br />;;Doing an 8-bit conversion to coins+1 first<br /><br />;;If bit 0 of the coins variable=1, add 256<br />;;Then if bit 1 of the variable=1, add 512<br />;;If bit 2=1, add 1024<br />;;And so on<br /><br />&nbsp; LDA coins<br />&nbsp; STA maintemp<br />&nbsp; LDX #$05<br />.sixteenbitloop<br />&nbsp; CLC<br />&nbsp; ROR maintemp<br />&nbsp; BCC .nextbin<br />&nbsp; TXA<br />&nbsp; PHA<br />&nbsp; ASL A<br />&nbsp; ASL A<br />&nbsp; TAX<br />&nbsp; LDY #$00<br />.add16bitloop<br />&nbsp; LDA Buffer+72,y&nbsp; &nbsp;;Buffer position doesn't matter, using Buffer+72 to Buffer+76 (!)<br />&nbsp; CLC<br />&nbsp; ADC calc16bit,x<br />&nbsp; STA Buffer+72,y<br />&nbsp; INX<br />&nbsp; INY<br />&nbsp; CPY #$04<br />&nbsp; BNE .add16bitloop<br />&nbsp; PLA<br />&nbsp; TAX<br />.nextbin<br />&nbsp; DEX<br />&nbsp; BPL .sixteenbitloop<br /><br />;;Arrange decimal<br /><br />;;More code<br /><br />calc16bit:<br />&nbsp; .db $08,$01,$09,$02,$04,$00,$09,$06,$02,$00,$04,$08,$01,$00,$02,$04<br />&nbsp; .db $00,$05,$01,$02,$00,$02,$05,$06<br /><br /></div><br /><br />Here's a version for 5 digits (using this one for another game with sprites)<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; LDX #$07<br />&nbsp; LDA position+1<br />&nbsp; STA maintemp<br />.sixteenbitloop<br />&nbsp; CLC<br />&nbsp; ROR maintemp<br />&nbsp; BCC .nextbin<br />&nbsp; TXA<br />&nbsp; PHA<br />&nbsp; ASL A<br />&nbsp; ASL A<br />&nbsp; STA maintemp+1<br />&nbsp; PLA<br />&nbsp; PHA<br />&nbsp; CLC<br />&nbsp; ADC maintemp+1<br />&nbsp; TAX<br />&nbsp; LDY #$00<br />.add16bitloop<br />&nbsp; LDA $023D,y&nbsp; &nbsp;;Sprite position doesn't matter either, using $023D,$0241,$0245,$0249 and $024D<br />&nbsp; CLC<br />&nbsp; ADC calc16bit,x<br />&nbsp; STA $023D,y<br />&nbsp; INX<br />&nbsp; TYA<br />&nbsp; CLC<br />&nbsp; ADC #$04<br />&nbsp; TAY<br />&nbsp; CPY #$14<br />&nbsp; BNE .add16bitloop<br />&nbsp; PLA<br />&nbsp; TAX<br />.nextbin<br />&nbsp; DEX<br />&nbsp; BPL .sixteenbitloop<br /><br />;;;;;;;;;;;;;;;;;;;;<br /><br />calc16bit:<br />&nbsp; .db $03,$02,$07,$06,$08,$01,$06,$03,$08,$04,$00,$08,$01,$09,$02,$00<br />&nbsp; .db $04,$00,$09,$06,$00,$02,$00,$04,$08,$00,$01,$00,$02,$04,$00,$00<br />&nbsp; .db $05,$01,$02,$00,$00,$02,$05,$06<br /><br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6607&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p164025"></a>
				<b class="postauthor">zzo38</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164025">Re: [FIXED] Decimal 16 bit variables and CPU time/ROM space.</a></div><div style="float: right;"><a href="./viewtopic.php?p=164025&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164025"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 07, 2016 12:37 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://forums.nesdev.com/styles/prosilver/theme/images/no_avatar.gif" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Feb 07, 2011 12:46 pm<br /><b>Posts:</b> 841
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here is another way (approx. 150 cycles, but not really tested yet) to convert 16-bit numbers into decimal form, although it requires more ROM space for the tables, requires the pattern tables to be arranged in a particular way (the digits 0-9 need to be duplicated within the first 32 cells, the program this code comes from duplicates them even twice more in other parts of the pattern table), and uses some unofficial opcodes.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;; *** PRINTN<br />&nbsp; &nbsp;def_inst_ext 230<br />&nbsp; &nbsp;lda &lt;$30<br />&nbsp; &nbsp;beq zcrlf2 ; ensure there is room in the buffer<br />&nbsp; &nbsp;ldy &lt;$11<br />&nbsp; &nbsp;lax &lt;$21<br />&nbsp; &nbsp;anc #$FF<br />&nbsp; &nbsp;bcc znum01<br />&nbsp; &nbsp;eor #$FF<br />&nbsp; &nbsp;sta &lt;4<br />&nbsp; &nbsp;ldx &lt;$30<br />&nbsp; &nbsp;inc &lt;$30<br />&nbsp; &nbsp;lda #'-'<br />&nbsp; &nbsp;sta &lt;0,x<br />&nbsp; &nbsp;tya<br />&nbsp; &nbsp;eor #$FF<br />&nbsp; &nbsp;tay<br />&nbsp; &nbsp;ldx &lt;4<br />znum01&nbsp; &nbsp;lda digit0l,y<br />&nbsp; &nbsp;adc digit0h,x<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;cmp #10<br />&nbsp; &nbsp;lda digit1l,y<br />&nbsp; &nbsp;adc digit1h,x<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;cmp #10<br />&nbsp; &nbsp;lda digit2l,y<br />&nbsp; &nbsp;adc digit2h,x<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;cmp #10<br />&nbsp; &nbsp;lda #0<br />&nbsp; &nbsp;adc digit3h,x<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;cmp #10<br />&nbsp; &nbsp;lda #0<br />&nbsp; &nbsp;adc digit4h,x<br />&nbsp; &nbsp;ldx &lt;$30<br />&nbsp; &nbsp;tay ; make the flag according to accumulator<br />&nbsp; &nbsp;beq znum02<br />&nbsp; &nbsp;; Five digits<br />&nbsp; &nbsp;sta &lt;0,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 1,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 2,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 3,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 4,x<br />&nbsp; &nbsp;txa<br />&nbsp; &nbsp;axs #-5<br />&nbsp; &nbsp;stx &lt;$30<br />&nbsp; &nbsp;jmp nxtinst<br />znum02&nbsp; &nbsp;pla<br />&nbsp; &nbsp;beq znum03<br />&nbsp; &nbsp;; Four digits<br />&nbsp; &nbsp;sta &lt;0,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 1,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 2,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 3,x<br />&nbsp; &nbsp;txa<br />&nbsp; &nbsp;axs #-4<br />&nbsp; &nbsp;stx &lt;$30<br />&nbsp; &nbsp;jmp nxtinst<br />znum03&nbsp; &nbsp;pla<br />&nbsp; &nbsp;beq znum04<br />&nbsp; &nbsp;; Three digits<br />&nbsp; &nbsp;sta &lt;0,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 1,x<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta 2,x<br />&nbsp; &nbsp;txa<br />&nbsp; &nbsp;axs #-3<br />&nbsp; &nbsp;stx &lt;$30<br />&nbsp; &nbsp;jmp nxtinst<br />znum04&nbsp; &nbsp;pla<br />&nbsp; &nbsp;beq znum05<br />&nbsp; &nbsp;; Two digits<br />&nbsp; &nbsp;sta &lt;0,x<br />&nbsp; &nbsp;inx<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;sta &lt;0,x<br />&nbsp; &nbsp;inx<br />&nbsp; &nbsp;stx &lt;$30<br />&nbsp; &nbsp;jmp nxtinst<br />znum05&nbsp; &nbsp;pla<br />&nbsp; &nbsp;; One digit<br />&nbsp; &nbsp;sta &lt;0,x<br />&nbsp; &nbsp;inc &lt;$30<br />&nbsp; &nbsp;jmp nxtinst</div></div>

					
						<div class="postbody"><br />_________________<br /><a href="gopher://zzo38computer.org/" class="postlink">.</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4734&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p164237"></a>
				<b class="postauthor">Myask</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164237">Re: [FIXED] Decimal 16 bit variables and CPU time/ROM space.</a></div><div style="float: right;"><a href="./viewtopic.php?p=164237&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164237"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Feb 09, 2016 5:39 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6603_1469162638.png" width="32" height="40" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 12, 2014 3:04 pm<br /><b>Posts:</b> 572
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">It's funny: the number of frames the decimal score-conversion in <em>Super Mario World</em> consumes is one of the things that TASers have to optimize for.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6603&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p164291"></a>
				<b class="postauthor">Sik</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164291">Re: [FIXED] Decimal 16 bit variables and CPU time/ROM space.</a></div><div style="float: right;"><a href="./viewtopic.php?p=164291&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164291"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Feb 10, 2016 3:53 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Aug 12, 2010 3:43 am<br /><b>Posts:</b> 1589
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Are you serious? I doubt something like that would slow down the game regularly. You aren't mixing up with the score tally, right?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4526&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p164292"></a>
				<b class="postauthor">Drag</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164292">Re: [FIXED] Decimal 16 bit variables and CPU time/ROM space.</a></div><div style="float: right;"><a href="./viewtopic.php?p=164292&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164292"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Feb 10, 2016 3:59 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 27, 2004 2:57 pm<br /><b>Posts:</b> 1169
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I took a stab at it for funsies:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">hexLo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;Input number<br />hexHi<br />numDigits&nbsp; &nbsp; &nbsp; &nbsp;;Number of digits to output, minus 1<br />decE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Most significant output digit<br />decD<br />decC<br />decB<br />decA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Least significant output digit<br /><br />; Tables for digit addition<br />digE<br />&nbsp;.db 3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0<br />digD<br />&nbsp;.db 2,6,8,4,2,1,0,0,0,0,0,0,0,0,0,0<br />digC<br />&nbsp;.db 7,3,1,0,0,0,5,2,1,0,0,0,0,0,0,0<br />digB<br />&nbsp;.db 6,8,9,9,4,2,1,5,2,6,3,1,0,0,0,0<br />digA<br />&nbsp;.db 7,3,1,5,7,3,1,5,7,3,1,5,7,3,1,0<br /><br />&nbsp;lda #$00&nbsp; &nbsp; &nbsp; &nbsp;;Initialize output digits<br />&nbsp;sta decA<br />&nbsp;sta decB<br />&nbsp;sta decC<br />&nbsp;sta decD<br />&nbsp;sta decE<br />&nbsp;ldy #$10&nbsp; &nbsp; &nbsp; &nbsp;;Current bit<br />nextBit<br />&nbsp;dey&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Advance to next bit value in table<br />&nbsp;bmi exit&nbsp; &nbsp; &nbsp; &nbsp;;Exit if we're out of bits to check<br />&nbsp;lsr hexHi&nbsp; &nbsp; &nbsp; ;Shift input right once<br />&nbsp;ror hexLo<br />&nbsp;bcc nextBit&nbsp; &nbsp; ;Don't add if bit is 0<br />&nbsp;lda decA&nbsp; &nbsp; &nbsp; &nbsp;;Ones place<br />&nbsp;adc digA,y&nbsp; &nbsp; &nbsp;;Carry is always set here, table compensates for it<br />&nbsp;cmp #$0A&nbsp; &nbsp; &nbsp; &nbsp;;Did the digit overflow?<br />&nbsp;bcc skipA&nbsp; &nbsp; &nbsp; ;Don't subtract if it didn't, carry stays cleared<br />&nbsp;sbc #$0A&nbsp; &nbsp; &nbsp; &nbsp;;Carry is already set, and remains set<br />skipA<br />&nbsp;sta decA<br />&nbsp;ldx numDigits&nbsp; ;Number of digits remaining<br />&nbsp;beq nextBit<br />&nbsp;lda decB&nbsp; &nbsp; &nbsp; &nbsp;;Tens place<br />&nbsp;adc digB,y<br />&nbsp;cmp #$0A&nbsp; &nbsp; &nbsp; &nbsp;;Did the digit overflow?<br />&nbsp;bcc skipB&nbsp; &nbsp; &nbsp; ;Don't subtract if it didn't, carry stays cleared<br />&nbsp;sbc #$0A&nbsp; &nbsp; &nbsp; &nbsp;;Carry is already set, and remains set<br />skipB<br />&nbsp;sta decB<br />&nbsp;dex&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Number of digits remaining<br />&nbsp;beq nextBit<br />&nbsp;lda decC&nbsp; &nbsp; &nbsp; &nbsp;;Hundreds place<br />&nbsp;adc digC,y<br />&nbsp;cmp #$0A&nbsp; &nbsp; &nbsp; &nbsp;;Did the digit overflow?<br />&nbsp;bcc skipC&nbsp; &nbsp; &nbsp; ;Don't subtract if it didn't, carry stays cleared<br />&nbsp;sbc #$0A&nbsp; &nbsp; &nbsp; &nbsp;;Carry is already set, and remains set<br />skipC<br />&nbsp;sta decC<br />&nbsp;dex&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Number of digits remaining<br />&nbsp;beq nextBit<br />&nbsp;lda decD&nbsp; &nbsp; &nbsp; &nbsp;;Thousands place<br />&nbsp;adc digD,y<br />&nbsp;cmp #$0A&nbsp; &nbsp; &nbsp; &nbsp;;Did the digit overflow?<br />&nbsp;bcc skipD&nbsp; &nbsp; &nbsp; ;Don't subtract if it didn't, carry stays cleared<br />&nbsp;sbc #$0A&nbsp; &nbsp; &nbsp; &nbsp;;Carry is already set, and remains set<br />skipD<br />&nbsp;sta decD<br />&nbsp;dex&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Number of digits remaining<br />&nbsp;beq nextBit<br />&nbsp;lda decE&nbsp; &nbsp; &nbsp; &nbsp;;Ten thousands place<br />&nbsp;adc digE,y&nbsp; &nbsp; &nbsp;;This fifth digit will never overflow<br />&nbsp;sta decE&nbsp; &nbsp; &nbsp; &nbsp;;so carry will always be clear<br />&nbsp;bcc nextBit&nbsp; &nbsp; ;Branch always<br />exit<br /></div><br />If you know you'll never use this to output more than 4 digits, you can insert a check to see if the input value is &gt;= $270F and skip to a routine which outputs &quot;9999&quot;. If you do this, you can remove the first row and the leftmost two columns of the table (change ldy #$10 to ldy #$0e), and you can remove the decE part of the unrolled loop, applying the carry skip and branch always tricks to the decD part instead.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=21&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p164293"></a>
				<b class="postauthor">Myask</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164293">Re: [FIXED] Decimal 16 bit variables and CPU time/ROM space.</a></div><div style="float: right;"><a href="./viewtopic.php?p=164293&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164293"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Feb 10, 2016 4:19 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6603_1469162638.png" width="32" height="40" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 12, 2014 3:04 pm<br /><b>Posts:</b> 572
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Sik wrote:</div><div class="quotecontent">Are you serious? I doubt something like that would slow down the game regularly. You aren't mixing up with the score tally, right?</div><br />Completely serious. <a href="http://tasvideos.org/GameResources/SNES/SuperMarioWorld.html#FadeoutLag" class="postlink">That the sum of the decimal digits of the score and the <em>tens</em> but not ones digits of lives/coins impact fadeout time is what leads to belief in it being a decimal conversion.</a></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6603&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p164452"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164452">Re: Buffering decimal 16 bit variables and CPU time/ROM spac</a></div><div style="float: right;"><a href="./viewtopic.php?p=164452&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164452"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 13, 2016 1:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 8981<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">A 16-bit conversion takes 670 cycles at most. (<a href="http://wiki.nesdev.com/w/index.php/16-bit_BCD" class="postlink">Source</a>) It works by subtracting 40000, 20000, 10000, 8000, 4000, 2000, 1000, 800, ..., 10.</div><br />Turns out you can make this conversion much faster (over twice as fast) if you use the exact same technique (which took me nearly 10 years to understand! <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />), but with unrolled loops and a few optimizations:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">binary = 0<br />decimal = 0<br />value = 65535<br /><br />&nbsp; &nbsp;.org $8000<br /><br />&nbsp; &nbsp;lda #&lt;value<br />&nbsp; &nbsp;sta binary+0<br />&nbsp; &nbsp;lda #&gt;value<br />&nbsp; &nbsp;sta binary+1<br /><br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta decimal+2<br />&nbsp; &nbsp;sta decimal+3<br />&nbsp; &nbsp;sta decimal+4<br />&nbsp; &nbsp;clc<br /><br />&nbsp; &nbsp;;5th digit, bit 2<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;39999<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;39999<br />&nbsp; &nbsp;bcc Skip52<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1<br />Skip52:<br />&nbsp; &nbsp;rol decimal+4<br />&nbsp; &nbsp;;5th digit, bit 1<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;19999<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;19999<br />&nbsp; &nbsp;bcc Skip51<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1 <br />Skip51:<br />&nbsp; &nbsp;rol decimal+4<br />&nbsp; &nbsp;;5th digit, bit 0<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;9999<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;9999<br />&nbsp; &nbsp;bcc Skip50<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1 <br />Skip50:<br />&nbsp; &nbsp;rol decimal+4<br /><br />&nbsp; &nbsp;;4th digit, bit 3<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;7999<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;7999<br />&nbsp; &nbsp;bcc Skip43<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1<br />Skip43:<br />&nbsp; &nbsp;rol decimal+3<br />&nbsp; &nbsp;;4th digit, bit 2<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;3999<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;3999<br />&nbsp; &nbsp;bcc Skip42<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1<br />Skip42:<br />&nbsp; &nbsp;rol decimal+3<br />&nbsp; &nbsp;;4th digit, bit 1<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;1999<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;1999<br />&nbsp; &nbsp;bcc Skip41<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1<br />Skip41:<br />&nbsp; &nbsp;rol decimal+3<br />&nbsp; &nbsp;;4th digit, bit 0<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;999<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;999<br />&nbsp; &nbsp;bcc Skip40<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1<br />Skip40:<br />&nbsp; &nbsp;rol decimal+3<br /><br />&nbsp; &nbsp;;3rd digit, bit 3<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;799<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;799<br />&nbsp; &nbsp;bcc Skip33<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1<br />Skip33:<br />&nbsp; &nbsp;rol decimal+2<br />&nbsp; &nbsp;;3rd digit, bit 2<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;399<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;399<br />&nbsp; &nbsp;bcc Skip32<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1<br />Skip32:<br />&nbsp; &nbsp;rol decimal+2<br />&nbsp; &nbsp;;3rd digit, bit 1<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #&lt;199<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;lda binary+1<br />&nbsp; &nbsp;sbc #&gt;199<br />&nbsp; &nbsp;bcc Skip31<br />&nbsp; &nbsp;stx binary+0<br />&nbsp; &nbsp;sta binary+1<br />Skip31:<br />&nbsp; &nbsp;rol decimal+2<br />&nbsp; &nbsp;;3rd digit, bit 0<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #99<br />&nbsp; &nbsp;bcc Skip30<br />&nbsp; &nbsp;sta binary+0<br />Skip30:<br />&nbsp; &nbsp;rol decimal+2<br /><br />&nbsp; &nbsp;;2nd digit, bit 3<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #79<br />&nbsp; &nbsp;bcc Skip23<br />&nbsp; &nbsp;sta binary+0<br />Skip23:<br />&nbsp; &nbsp;rol decimal+1<br />&nbsp; &nbsp;;2nd digit, bit 2<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #39<br />&nbsp; &nbsp;bcc Skip22<br />&nbsp; &nbsp;sta binary+0<br />Skip22:<br />&nbsp; &nbsp;rol decimal+1<br />&nbsp; &nbsp;;2nd digit, bit 1<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #19<br />&nbsp; &nbsp;bcc Skip21<br />&nbsp; &nbsp;sta binary+0<br />Skip21:<br />&nbsp; &nbsp;rol decimal+1<br />&nbsp; &nbsp;;2nd digit, bit 0<br />&nbsp; &nbsp;lda binary+0<br />&nbsp; &nbsp;sbc #9<br />&nbsp; &nbsp;bcc Skip20<br />&nbsp; &nbsp;sta binary+0<br />Skip20:<br />&nbsp; &nbsp;rol decimal+1</div><br />Please excuse the &quot;SkipXX&quot; labels, but this code is for the 6502 simulator, which doesn't have anonymous labels.<br /><br />Anyway, if converting binary numbers to decimal is something you do frequently, it might pay off to dedicate some extra ROM space to this unrolled version of the code.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p164466"></a>
				<b class="postauthor">Omegamatrix</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164466">Re: [FIXED] Decimal 16 bit variables and CPU time/ROM space.</a></div><div style="float: right;"><a href="./viewtopic.php?p=164466&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164466"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 13, 2016 7:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6558_1402456951.jpg" width="90" height="79" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Jun 10, 2014 8:15 pm<br /><b>Posts:</b> 33<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here is a link to some of the routines I wrote for very fast hex to decimal:<br /><br /><!-- l --><a class="postlink-local" href="http://forums.nesdev.com/viewtopic.php?p=130363#p130363">viewtopic.php?p=130363#p130363</a><!-- l --><br /><br />These routines are all tested and confirmed working. They are in subroutine form and can be used for smaller conversions. A summary is below:<br /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;slow routine - 174 bytes, 183 bytes with HexToDec255 and HexToDec999<br />;HexToDec99&nbsp; &nbsp; &nbsp;; 37 cycles<br />;HexToDec255&nbsp; &nbsp; ; 52-57 cycles<br />;HexToDec999&nbsp; &nbsp; ; 72-77 cycles<br />;HexToDec65535&nbsp; ; 178-186 cycles<br /><br /><br />;Fast routine - 234 bytes, 243 bytes with HexToDec255 and HexToDec999<br />;HexToDec99&nbsp; &nbsp; &nbsp;; 37 cycles<br />;HexToDec255&nbsp; &nbsp; ; 52-57 cycles<br />;HexToDec999&nbsp; &nbsp; ; 72-77 cycles<br />;HexToDec65535&nbsp; ; 157-162 cycles</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6558&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p164469"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164469">Re: [FIXED] Decimal 16 bit variables and CPU time/ROM space.</a></div><div style="float: right;"><a href="./viewtopic.php?p=164469&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164469"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 13, 2016 7:13 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 8981<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Those are some impressive times! Damn, it will probably take me another 10 years to understand THAT method! <img src="./images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p164471"></a>
				<b class="postauthor">zzo38</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p164471">Re: [FIXED] Decimal 16 bit variables and CPU time/ROM space.</a></div><div style="float: right;"><a href="./viewtopic.php?p=164471&amp;sid=718af6d6c0ce7d3419f996e0840034f7#p164471"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Feb 13, 2016 9:45 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://forums.nesdev.com/styles/prosilver/theme/images/no_avatar.gif" width="90" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Feb 07, 2011 12:46 pm<br /><b>Posts:</b> 841
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The code I posted is doing several things that you might not need, such as dealing with negative numbers, appending to the end of a text buffer, stripping leading zeroes, etc. It could probably be simplified to remove the stuff that you do not need. However, it uses more space in the program ROM space and in the pattern table than other methods do. You can compare all of the methods (including but not limited to mine) in a table in order to compare its working.</div>

					
						<div class="postbody"><br />_________________<br /><a href="gopher://zzo38computer.org/" class="postlink">.</a></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4734&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=2&amp;t=13816&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=13816&amp;sid=718af6d6c0ce7d3419f996e0840034f7"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 15 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=718af6d6c0ce7d3419f996e0840034f7">Board index</a> &#187; <a href="./viewforum.php?f=24&amp;sid=718af6d6c0ce7d3419f996e0840034f7">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2&amp;sid=718af6d6c0ce7d3419f996e0840034f7">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing [Bot]</span> and 6 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php?sid=718af6d6c0ce7d3419f996e0840034f7"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="13816" />
<input type="hidden" name="sf" value="msgonly" />
<input type="hidden" name="sid" value="718af6d6c0ce7d3419f996e0840034f7" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php?sid=718af6d6c0ce7d3419f996e0840034f7" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2" selected="selected">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
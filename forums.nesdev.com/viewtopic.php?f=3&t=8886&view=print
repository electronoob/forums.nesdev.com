<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - &quot;NES-patches&quot; for VS-games?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">&quot;NES-patches&quot; for VS-games?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=8886">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=8886</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Wed May 09, 2012 10:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>&quot;NES-patches&quot; for VS-games?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Retrozone are selling a few VS-repro's in his store. I guess they have been palette- and coin-fixed to work with a real NES(?). I am just curious, anyone knows if these patches has been released anywhere? I've seen patches for one game I think in this forum, but haven't seen the rest.<br /><br />EDIT:<br />Here are my own palette/coinpatches for VS-ROMs. Archives contain .ips + readme.<br /><br />EDIT2:<br />I've setup a page for my patches:<br /><br /><!-- m --><a class="postlink" href="http://www.goondocks.se/nespatches/">http://www.goondocks.se/nespatches/</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Wed May 09, 2012 1:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I made one for VS Super Mario Bros. myself, but I used the palette hack someone else already did for the game. So I basically only had to get the coins working. I'm sure there's another one of VS. Super Mario Bros., but if not I'll put mine up. 
<br />
<br />I once tried to do Balloon Fight, but it was damn difficult and I doubt I could do any others.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Wed May 09, 2012 10:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sounds like an interesting challenge.. Anyone? <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Thu May 10, 2012 12:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Theres a patch for SMB up on raphnet.net
<br /><a href="http://raphnet.net/electronique/nes_vs/nes_vs_en.php?section_id=10" class="postlink">http://raphnet.net/electronique/nes_vs/nes_vs_en.php?section_id=10</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Thu May 10, 2012 1:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Indeed, that's the palette fix I mentioned in my post. It's still not playable on a standard NES without a coin hack, though, unless something changed since I did it. 
<br />
<br />That whole article is about modding an NES to be compatible with VS Dip Switches etc., so he didn't need such a fix.
<br />
<br />edit: <!-- m --><a class="postlink" href="http://www.mediafire.com/?m26mpxqfb74fh8r">http://www.mediafire.com/?m26mpxqfb74fh8r</a><!-- m -->
<br />
<br />There's an IPS. It includes the palette fix from the article infiniteneslives linked, as well as three changed bytes from me. Since it always assumes coins are inserted, it skips the title screen entirely, which I guess is pretty lazy. My first try constantly triggered the coin switch, so you heard the insert coin noise CONSTANTLY! I settled for this, but if I was feeling <em>really</em> clever I would have rigged coins to select or something.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Thu May 10, 2012 7:55 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm working on patching IceClimber (VS) at the moment. I've done coinfix (using in-game keys <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />), palettefix is working but I am running out of cycles so I'm getting some screen corruption (works on PAL emulation..) so I have to tweak some things obviously. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>slobu</b> [ Thu May 10, 2012 9:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Being completely clueless I would think that VS patches would consist of
<br />
<br />A. Finding the palette and changing the values to the NES version.
<br />B. Finding the credits inserted value and changing that to 99
<br />
<br />What makes these kinds of conversions challenging?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu May 10, 2012 9:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You don't want to simply add credits, because then Attract Mode (the demo mode) won't play.  You want to hack the game so that pressing a controller button would insert a coin.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Thu May 10, 2012 12:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I now have a fully working patch for IceClimber(VS). Palette is fixed and coins can be inserted by pressing A. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />The price for this is however, a batterybackup-file. There's simply no space in the ROM for modifications so I've added a battery-file that contains code. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> 
<br />I'll share an .ips later after I've done some code-cleaning..
<br />
<br />It was along time ago I worked with this kind of stuff, it's still fun as hell! <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu May 10, 2012 12:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The other thing you can do with Ice Climber is modify the FDS version to work as a NES rom with WRAM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Thu May 10, 2012 12:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'll probably investigate more VS-games.. Is there something odd about Balloon Fight (VS)? Tried both FCEUX/Nintendulator, it seems to hang..?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu May 10, 2012 1:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Check the header.  Goodnes gives it an invalid header if you tell it to fix it.
<br />Not sure how all the new-fangled emulators do it these days, but setting the mapper to 99 and setting the VS flag should work.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Thu May 10, 2012 11:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I am not sure if distributing VS-fixes using custom-batteryfiles is the way to do it properly (imagine the trouble if someone would like to make a cart and the battery-RAM gets wiped for some reason).
<br />The battery-way is perhaps more suitable for emulators/PowerPak. But since my fix has a proper palette already, how would emulators deal with this since palette-conversion isn't needed anymore?
<br />
<br />Ideas are appreciated.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Fri May 11, 2012 4:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's done, I think. Here it is for anyone that's interested. A "NES hack" for Ice Climber (VS). This archive contains an .ips-file and a .sav file that's required for the game to work.
<br /><!-- m --><a class="postlink" href="http://dl.dropbox.com/u/2590713/Nintendo/VS/IceClimber%20%28Vs%29%20%5BNES-hack%20v1.0%5D.zip">http://dl.dropbox.com/u/2590713/Nintend ... 1.0%5D.zip</a><!-- m -->
<br />Haven't tried it on a real NES yet, but there's no reason it wouldn't work. 
<br />
<br />Features are:
<br />* Coins are inserted by pressing "A"
<br />* Palette is converted to "NES-standard" on-the-fly. 
<br />
<br />The game uses palette-tables so the palette could in theory be altered in advance using a hex-editor. But the game bypasses them every now and then so this won't work (without more work anyway).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri May 11, 2012 5:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">oRBIT2002 wrote:</div><div class="quotecontent">I am not sure if distributing VS-fixes using custom-batteryfiles is the way to do it properly (imagine the trouble if someone would like to make a cart and the battery-RAM gets wiped for some reason).</div><br />I can see three ways to solve this:<br /><ol style="list-style-type: lower-alpha"><li>The little-used "trainer" section in iNES. It's placed before the PRG ROM and contains 512 bytes of mapper support code loaded into $7000-$71FF before power on. I wouldn't recommend this because the "trainer" section is associated with mapper hacks for old copiers, and it doesn't work on a cart. </li><li>Mapper hack to a mapper that can put ROM into $6000-$7FFF. </li><li>Mapper hack to CNROM (#3), put the extra code destined for $6000-$7FFF at the end of CHR ROM, and copy that to PRG RAM on reset. Two additional chips (a 6264 and a <a href="http://wiki.nesdev.com/w/index.php/PRG_RAM_circuit#Using_7420" class="postlink">74HC20</a>) are needed for adding PRG RAM and bus conflict avoidance to CNROM. </li></ol><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The battery-way is perhaps more suitable for emulators/PowerPak. But since my fix has a proper palette already, how would emulators deal with this since palette-conversion isn't needed anymore?</div>
<br /><a href="http://wiki.nesdev.com/w/index.php/NES_2.0#Vs._hardware" class="postlink">NES 2.0 has a PPU type field</a>. I was under the impression that Vs. games with unrecognized CRC and no NES 2.0 header were emulated as if they were Duck Hunt or Tennis, whose 2C03 PPU was the same as that of the PlayChoice.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
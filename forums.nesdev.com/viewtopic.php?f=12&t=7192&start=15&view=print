<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - SPC memory allocation</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">SPC memory allocation</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=7192">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=7192</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sun Nov 28, 2010 1:44 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">http://www.youtube.com/watch?v=TGbwL8kSpEk&amp;feature=fvw<br /><br />This other video is completely irrelevant to this thread.  I just saw it on the "related videos" column, clicked on it, and enjoyed it a lot.<br /><br />Teenage girls + long legs + Japanese + techno = Awsomeness!</div>
<br />They're South Korean though. But I agree. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Sun Nov 28, 2010 7:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I wonder if this is how the SNES would've sounded like without the low-pass-filter, interpolation, and BRR compression.</div>
<br />
<br />..and reverb support in the DSP.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Nov 28, 2010 8:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The DSP already has an echo buffer. The first underground stage in Donut Plains of Super Mario World shows it off much better than the underground stages in Super Mario Bros. and Super Mario Bros. 3 do.
<br />
<br />Which brings me to another question: How much memory do games typically use for their echo buffers?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Sun Nov 28, 2010 10:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The DSP already has an echo buffer.</div>
<br />Yeah I know that the DSP supports echo, but it doesn't do reverb.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sun Nov 28, 2010 10:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />By reverb do you mean an impulse response around 1000 samples long?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Nov 28, 2010 10:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well as far as I know, reverb is multiple echo buffers with different delay/feedback values. SNES has only one echo buffer, which is why it is called echo and not reverb.
<br />The effect is less realistic, but in some case can be just as impressive, as seen in caves of Secret of Mana.
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Which brings me to another question: How much memory do games typically use for their echo buffers?</div>
<br />Definte "typically". Some game such as Castlevania IV uses nothing, Final Fantasy 4-5-6 uses an EDL of 5, Chrono Trigger have it varying in function of the song played, but it uses the maximum EDL = 15 for the 100AD overworld theme.
<br />
<br />Personally I think very short echo buffer (1-3) sounds really bad as the buffer is short enough to be in the audible range - it can lead to interesting effect, but overall if you're going to use echo at all you want EDL to be at least 5.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Sun Nov 28, 2010 11:04 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">By reverb do you mean an impulse response around 1000 samples long?</div>
<br />I mean multiple reflections of the same sound, taking into account the acoustic environment ("room type").

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Sun Nov 28, 2010 3:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I always wondered why SNES's reverb always sounded kind've tiny compared to reverb you would hear in trance music.
<br />
<br />I know a lot of people like the SNES characteristic sound quality, but for me it tends to fall in the "uncanny valley" where it isn't horribly bad, but not particularly good either.  I'm surprised neither of the two main competing 16-bit systems had a tradition upgrade from the NES sound chip.  The TurboGrafx was the only 16-bit system capable of replicating the nostalgic NES sound while improving upon it.
<br />
<br />In another thread, we were talking about how you have to use really long samples just to make a good sounding square wave, because of it's interpolation.  A perfect square wave would only take 2 samples on a traditional PCM chip.  The same thing with a sawtooth wave.  It just doesn't come out as pure and vibrant with all this extra stuff.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Nov 28, 2010 3:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I always wondered why SNES's reverb always sounded kind've tiny compared to reverb you would hear in trance music.</div>
<br />This is because they use actual reverb with multiple echo buffers in trance music, while the SNES only have a single echo buffer. So this "infinite" reverb effect is lacking. I know the therm is bad, but on the SNES you can clearly hear repetitions of the original sound at a constant distance.
<br />
<br />On a more modern reverb, the sounds seems to have an infinity of repetitions that comes everywhere and you can' hear spearate repetitions of the original sound. I guess it's made with 2 or more echo buffers, each one echoing the others buffer, effectively creating an "infinity" of echo repetitions.
<br />
<br />And I fully agree about the SNES's lacking the ability to reproduce square waves. Music on the GBA which mix samples and square waves is awesome !
<br />However, I think it should be possible to reproduce a square wave by doing a fourrier transform, shifting the phases, and re-fourrier transform it to get a different wave, without discontinuities, that sounds like a Square wave to the human ear. Maybe it would compress better into BRR. Maybe not, who knowns.
<br />
<br />Also "perfect" square waves could be done by filling the echo buffer with sofware writes (instead of enabling the echo normally) but you'd need CRAZY optimized code in order to do it in time, since you only get 32 cycles per outpu sample (the SPC is clocked at 1.024 MHz and the output is 32 kHz).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Nov 28, 2010 8:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">The TurboGrafx was the only 16-bit system capable of replicating the nostalgic NES sound while improving upon it.</div><br />If the TG16 was 16-bit, then the Genesis was 32-bit.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">A perfect square wave would only take 2 samples on a traditional PCM chip.</div><br />How many samples would a near-perfect sine wave take? With Gaussian or cubic interpolation, it doesn't take many.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The same thing with a sawtooth wave.</div>
<br />On a PCE/GB/VB style 32-step PCM wavetable unit with nearest-neighbor resampling, a sawtooth wave won't have much more resolution than an NES triangle wave.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Mon Nov 29, 2010 12:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">The TurboGrafx was the only 16-bit system capable of replicating the nostalgic NES sound while improving upon it.</div><br />If the TG16 was 16-bit, then the Genesis was 32-bit.<br /></div>
<br />
<br />Please don't start that. It's pretty obvious that the PC-Engine/TG16 belongs in the same product cycle as the Genesis and SNES which are considered to be the "16-bit generation". We don't need to grab register or address space sizes to come up with a number of bits just to try to ungroup them when they clearly are grouped.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Mon Nov 29, 2010 3:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The same thing with a sawtooth wave.</div><br />On a PCE/GB/VB style 32-step PCM wavetable unit with nearest-neighbor resampling, a sawtooth wave won't have much more resolution than an NES triangle wave.</div>
<br />
<br />Isn't a 32-step PCM sawtooth equivelant to a sawtooth + a reversed sawtooth with 32x the frequency and 1/32 the volume?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Mon Nov 29, 2010 3:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Going by release date makes even less sense than those other measurements. In that case you should drop any mention of "bits" and just refer to it as "N:th generation".

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tomaitheous</b> [ Mon Nov 29, 2010 8:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">The TurboGrafx was the only 16-bit system capable of replicating the nostalgic NES sound while improving upon it.</div><br />If the TG16 was 16-bit, then the Genesis was 32-bit.</div><br /> I know, right? Although, when I'm playing LOT port on the SegaCD - I can't figure out for the life of me why the colors are much reduced and there's slowdown in parts where there weren't originally. And the SegaCD is like 64bit, right? I mean, it's got like two processors and stuff. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">On a PCE/GB/VB style 32-step PCM wavetable unit with nearest-neighbor resampling, a sawtooth wave won't have much more resolution than an NES triangle wave.</div>
<br />What's nearest-neighbor has to do with anything??? PCE is all period driven from a base clock of 3.579545mhz. Full resolution.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Nov 30, 2010 9:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tomaitheous wrote:</div><div class="quotecontent">Although, when I'm playing LOT port on the SegaCD - I can't figure out for the life of me why the colors are much reduced</div><br />PCE, GBA: 16 background palettes and 16 sprite palettes<br />SNES: 8 background palettes and 8 sprite palettes<br />MD: 4 background palettes, and sprites share the background palettes<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">And the SegaCD is like 64bit, right?</div><br />Jaguar: Do the MA+H. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">On a PCE/GB/VB style 32-step PCM wavetable unit with nearest-neighbor resampling, a sawtooth wave won't have much more resolution than an NES triangle wave.</div><br />What's nearest-neighbor has to do with anything??? PCE is all period driven from a base clock of 3.579545mhz. Full resolution.</div>
<br />In digital signal processing, "nearest neighbor" refers to the kind of resampling that one gets from a <a href="http://en.wikipedia.org/wiki/Sample_and_hold" class="postlink">sample and hold</a> circuit. Linear interpolation fits a linear curve across each sample period; Gaussian and cubic interpolation fit a smoother curve. The smoother curves are worse for representing square waves but better for representing sinusoids and other band-limited signals.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
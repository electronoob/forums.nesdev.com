<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - SOROM and older emulators</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESemdev" href="http://forums.nesdev.com/feed.php?f=3" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - SOROM and older emulators" href="http://forums.nesdev.com/feed.php?f=3&amp;t=14205" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '2');
	var per_page = '15';
	var base_url = './viewtopic.php?f=3&amp;t=14205';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 1:34 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=3&amp;t=14205&amp;start=15">SOROM and older emulators</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=14205"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>2</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 25 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=3&amp;t=14205&amp;start=0">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=3&amp;t=14205">1</a><span class="page-sep">, </span><strong>2</strong></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=3&amp;t=14205&amp;start=15&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=3&amp;t=14205&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=3&amp;t=14205&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p178515"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178515">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178515#p178515"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 7:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 6592<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">As far as I can tell, the MMC1 implementation just needs a special case for the 16k boards. I think there are only 3 extant cases for battery backed WRAM on MMC1?<br /><br />1. 8k<br /><br />2. 16k (SOROM): save only the second half.<br /><br />3. 32k (SXROM): save all 32k<br /><br />Since WRAM size is absent from iNES 1, you need to get the data in either through the database, or through iNES 2's <a href="http://wiki.nesdev.com/w/index.php/NES_2.0#Byte_10_.28RAM_size.29" class="postlink">WRAM field</a>.<br /><br />It sounds like if there's a database entry specifying bigger WRAM, it saves the whole specified WRAM? In which case adding 16k to the entry should make saves work, but Koitsu doesn't like it that it's storing stuff that's not actually saved by the battery. The 32k database entry makes no sense at all; I mean it would work, but it's pointless.<br /><br /><br />The iNES 2 header is already being parsed, I think, (see <a href="https://github.com/rdanbrook/nestopia/blob/master/source/core/NstCartridgeInes.cpp" class="postlink">NstCartridgeInes.cpp</a> line 737) so it's really just a matter of having the save routine pay attention to it. (Having an iNES 2 solution also means romhacks and homebrew can work, which is a big plus, IMO.)<br /><br />I don't think the database has the a separate field for battery backed like iNES 2, but knowing that WRAM is 16k is enough to disambiguate the special case for MMC1. I don't think there's such thing as another MMC1 16k board that wants to save the other half, or the whole 16k, and at this point the discovery of such a thing should deserve a new mapper assignment.<br /><br />i.e. just add a Save function to Mmc1, that calls Board::Save unless it'a a 16k case. IMO you should <em>also</em> update the database to say 16k though, handle both the database and iNES 2.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p178516"></a>
				<b class="postauthor">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178516">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178516#p178516"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 8:22 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 3477<br /><b>Location:</b> Mountain View, CA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">This is going to take me some time to work out, mentally.  I've read your post 4 times now and there is just a lot to process/juggle, compounded by lack of code familiarity on my part.  This is even more compounded by the fact that these Koei games, even when shoved through present-day GoodNES, do not have NES 2.0 headers -- they have original NES.<br /><br />Okay, actually now I've gone over it 6 times, and have re-written my post 3 times over now.  :/<br /><br />Thus, unless I'm missing something here (which is extremely likely!), I'm not sure how to cleanly implement this.  The problem is not just with saving, it's also with loading.  For saving, this is the only thing I can think of (again: certain I'm missing something) that would work given the situation in my first paragraph:<br /><br />* Update NstDatabase.xml to force PRG-RAM of 16KB for these individual ROMs<br />* Modify NstBoardMmc1.cpp to detect if game PRG-RAM is 16KB.  If it is, figure out magic to only write the 2nd 8KB PRG-RAM page to disk (I say &quot;figure out magic&quot; because I haven't looked at this code or how any of these functions/methods are implemented in detail); if it isn't, just call Board::Save (which will allow 8KB PRG-RAM and 32KB SXROM games to work).<br /><br />What worries me also about the 2nd part is the &quot;keying off of 16KB PRG-RAM&quot; (setup.prgRam).  I don't know if this is truly safe or not for all games.<br /><br />For loading, the situation becomes unknown/precarious because I don't know what's going to happen if NstDatabase.xml has a PRG-RAM force size of 16KB for a game; it may attempt something like reading 16KB from the .sav, which could/might fail with I/O errors due to reading past EOF, or it might work but stick the 8KB in the first page rather than the 2nd.<br /><br />I believe NstDatabase.xml trumps whatever is in the NES ROM header, hence the logic/code in NstCartridgeInes.cpp would get overridden, which would matter for loading.<br /><br />I'm left thinking maybe review of the NstDatabase.xml capabilities is in order, possibly needing extended capabilities in that, e.g. for these particular Koei games, load/save 8KB PRG-RAM from the 2nd page.  I make it sound so easy, yet I know damn well it isn't going to be.  This makes me wonder: how does FCEUX deal with this?<br /><br />I think you get where I'm going with this... I hope.  Sorry if I'm not making sense in advance.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p178517"></a>
				<b class="postauthor">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178517">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178517#p178517"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 8:40 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 3477<br /><b>Location:</b> Mountain View, CA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I also just came across this -- specifically item 4: <!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/MMC1#Heuristic_disambiguation">http://wiki.nesdev.com/w/index.php/MMC1 ... mbiguation</a><!-- m --> -- which seems to imply 16KB .sav files (with redundant data in them) are perfectly OK, even though it talks about &quot;loading from an 8KB .sav&quot; (I assume this refers to &quot;old .sav files before this type of heuristic is put into place&quot;?):<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If the battery bit is present, only banks which are written to are saved to the disk when the game is quit.  When loading a game with the battery bit set, if a 8KB .sav file is present, it is repeated equally across all banks.  This will lead to data being saved when it wasn't supposed to for SOROM games, but 8KB of hard disk space isn't a problem, ...</div><br />At this point I'm utterly baffled.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p178518"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178518">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178518#p178518"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 9:04 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 6592<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">This is even more compounded by the fact that these Koei games, even when shoved through present-day GoodNES, do not have NES 2.0 headers -- they have original NES.</div><br />Almost nothing has iNES 2 headers. That's why the database exists (and why it's worth maintaining).<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">The problem is not just with saving, it's also with loading.</div><br />Yes, also override Load in a more or less identical way.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">* Update NstDatabase.xml to force PRG-RAM of 16KB for these individual ROMs</div><br />Yes, do this. This is actually more important than supporting iNES 2, because it will affect more people.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">I believe NstDatabase.xml trumps whatever is in the NES ROM header</div><br />An iNES 2 should <em>always</em> trump the database. If it doesn't, you haven't implemented iNES 2 properly. (The database, in turn, trumps iNES 1, which was incapable of describing 16k WRAM.) I can't say whether Nestopia UE implements iNES 2 properly, though. Follow the fields read from the header and see where they go. Possibly nowhere at the moment?<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">What worries me also about the 2nd part is the &quot;keying off of 16KB PRG-RAM&quot; (setup.prgRam). I don't know if this is truly safe or not for all games.</div><br />An Mmc1::Save only applies to MMC1 boards, and there's only one type of board with 16k WRAM. (SOROM) It should have no consequences outside of MMC1, and within MMC1 it should be safe.<br /><br />As for iNES 2, just make sure the values read from the WRAM field get summed and put into setup.prgRam, or wherever the database happens to stick it. Mmc1:Save doesn't need to know whether the info came from the database or iNES 2, it just needs to know the WRAM size.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">For loading, the situation becomes unknown/precarious because I don't know what's going to happen if NstDatabase.xml has a PRG-RAM force size of 16KB for a game; it may attempt something like reading 16KB from the .sav, which could/might fail with I/O errors due to reading past EOF, or it might work but stick the 8KB in the first page rather than the 2nd.</div><br />Board::Save is two lines long. It just retrieves a pointer to WRAM, and its size, and saves it to a file (if battery backing is detected). Board::Load is similar. I don't think there's much risk of mysterious problems here. They should both just do the same test.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">I'm left thinking maybe review of the NstDatabase.xml capabilities is in order, possibly needing extended capabilities in that, e.g. for these particular Koei games, load/save 8KB PRG-RAM from the 2nd page.  I make it sound so easy, yet I know damn well it isn't going to be.</div><br />Why would you need to extend the database capabilities? It can already specify 16k WRAM. You don't need anything else here.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">This makes me wonder: how does FCEUX deal with this?</div><br />It has an internal database and automatically assigns the WRAM size (look for DetectMMC1WRAMSize and GenMMC1Init in boards/mmc1.cpp).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p178520"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178520">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178520#p178520"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 9:08 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 6592<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">I also just came across this -- specifically item 4: <!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/MMC1#Heuristic_disambiguation">http://wiki.nesdev.com/w/index.php/MMC1 ... mbiguation</a><!-- m --> -- which seems to imply 16KB .sav files (with redundant data in them) are perfectly OK, even though it talks about &quot;loading from an 8KB .sav&quot; (I assume this refers to &quot;old .sav files before this type of heuristic is put into place&quot;?):<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If the battery bit is present, only banks which are written to are saved to the disk when the game is quit.  When loading a game with the battery bit set, if a 8KB .sav file is present, it is repeated equally across all banks.  This will lead to data being saved when it wasn't supposed to for SOROM games, but 8KB of hard disk space isn't a problem, ...</div><br />At this point I'm utterly baffled.</div><br />Saving and restoring the RAM that's not battery backed is harmless. It's not &quot;accurate&quot;, but it's harmless. If you remember the other thread about initializing RAM, it's the same deal, there's no &quot;accurate&quot; WRAM initialization either, so it doesn't matter if you fill it with saved data, or 0s, or 1s, or random values.<br /><br />The only problem with saving 16k is that you're saving 8k of usless information.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p178524"></a>
				<b class="postauthor">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178524">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178524#p178524"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 9:45 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 3477<br /><b>Location:</b> Mountain View, CA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The rabbit hole goes deeper, I'm afraid.<br /><br />NestopiaUE already thinks/knows the WRAM is 16KB.  <a href="http://forums.nesdev.com/viewtopic.php?p=170623#p170623" class="postlink">My second post</a> actually shows this.  That made me wonder how this all worked.  I made the mistake of looking at the code first -- I should have looked at NstDatabase.xml first -- so I'll post what I &quot;dug up&quot; about that.<br /><br />Looking through board/NstBoardMmc1.cpp showed me there's some routine called <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">GetWram&#40;&#41;</tt>, which is just a convenience routine for <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">GetSavableWram&#40;&#41; + GetNonSavableWram&#40;&#41;</tt>.  Those method names made me realise the emulator seems to have an internal delineation between what's battery-backed and what isn't.<br /><br />There's a whole ton of crazy in boards/NstBoard.cpp that I can't quite grasp.  The <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">GetSavableWram&#40;&#41;</tt> and <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">GetNonSavableWram&#40;&#41;</tt> routines are probably the most generic things I've seen in a while, with no real indication of what any of the <a href="https://en.wikipedia.org/wiki/Magic_number_(programming)" class="postlink">magic numbers</a> mean.  <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">id</tt> seems to be... board ID?  I'm not even sure.  It almost looks like C++ templating is used here.<br /><br />I decided to try another test: load up Genghis Khan, play the game for a season or so, choose Other -&gt; Save, then Soft Reset, then tried to Load Data -- it worked.  A Hard Reset (akin to a power-cycle) did not.  This obviously isn't testing .sav loading/saving (well, Hard Reset might be, I'm unsure), but it does seem to mean that emulation of SOROM with 16KB SRAM/WRAM/PRG-RAM is working in some regard.<br /><br />I was therefore left thinking that modifying NstDatabase.xml for these games, using <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&lt;wram size=&quot;16k&quot; /&gt;</tt> wouldn't fix anything, because it seems to already know that... so what gives?  That lead me to look in the actual database itself.  Lo and behold:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &lt;game&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;cartridge system=&quot;NES-NTSC&quot; dump=&quot;ok&quot; crc=&quot;2225C20F&quot; sha1=&quot;209911D7BD15ABB7BEF2E35A473DF725B6738CD7&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;board type=&quot;NES-SOROM&quot; mapper=&quot;1&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;prg size=&quot;256k&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;vram size=&quot;8k&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;wram size=&quot;8k&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;wram size=&quot;8k&quot; battery=&quot;1&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;chip type=&quot;MMC1B2&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/board&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/cartridge&gt;<br />&nbsp; &nbsp; &lt;/game&gt;<br /></div><br />Well that's quite interesting: here we can see the segmentation of the 16KB PRG-RAM into the battery-backed and non-battery-backed regions.  To verify that this is in fact what is causing the emulator to get the correct sizes/etc., I disabled use of the internal database in Nestopia (Options -&gt; Database -&gt; uncheck Internal) and loaded the ROM.<br /><br />Results are here -- note the Board and WRAM size being wrong:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">File:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Genghis Khan (U) &#91;!&#93;.nes<br />Directory:&nbsp; &nbsp; D:\Console\NES Games\USA\<br />Soft-patched: No<br />CRC:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2225C20F<br />SHA-1:&nbsp; &nbsp; &nbsp; &nbsp; 209911D7BD15ABB7BEF2E35A473DF725B6738CD7<br />System:&nbsp; &nbsp; &nbsp; &nbsp;NES-NTSC<br />Board:&nbsp; &nbsp; &nbsp; &nbsp; SNROM, Mapper 1<br />PRG-ROM:&nbsp; &nbsp; &nbsp; 256k<br />V-RAM:&nbsp; &nbsp; &nbsp; &nbsp; 8k<br />W-RAM:&nbsp; &nbsp; &nbsp; &nbsp; 8k<br />Solder Pad:&nbsp; &nbsp;H:0 V:1<br />Battery:&nbsp; &nbsp; &nbsp; Yes<br />File:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Genghis Khan (U) &#91;!&#93;.sav<br />Directory:&nbsp; &nbsp; D:\Console\NES\Nestopia\save\<br />Dump:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown<br /></div><br /><br />That left me wondering where the real problem was.  It was almost like the combination of two <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&lt;wram&gt;</tt> definitions doesn't work right somehow... except the 8KB Nestopia .sav DOES NOT work in FCEUX... so could it be that the wrong 8KB page is being written to disk?  Sure.  But there's also the evidence that using the .sav from FCEUX in Nestopia doesn't work either, so loading is busted too.<br /><br />As a final &quot;screw it, I'll just try this&quot; test, I decided to change the NstDatabase.xml for this game to say <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&lt;wram size=&quot;16k&quot; battery=&quot;1&quot; /&gt;</tt>, deleted any existing .sav, and go through the same procedure.  Results (for both re-opening the ROM, as well as Hard Reset) -- nada: Load Data still fails.  But... guess what size the .sav file was?  <span style="text-decoration: underline">8KBytes</span>.  So even &quot;crummy cheap workarounds&quot; to induce a larger .sav file won't work.<br /><br />Sorry if this seemed pointless or rambly, but this is an example of how convoluted this whole ordeal is (to me anyway).  I'm therefore in agreement: there is definitely something very broken about the saving/loading for SOROM, and fixing that up in NstBoardMmc1.cpp through overrides/etc. I think is the only way to get this to work.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p178525"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178525">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178525#p178525"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 10:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 6592<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Oh, if Board::GetWram already divides it like that then you probably don't need to add anything special in Mmc1 at all.<br /><br />Like it sounds more like everything was set up with the correct thing in mind, but somewhere in the chain the data is getting dropped.<br /><br />Adding a special case isn't going to help if the information isn't getting there. I guess following &quot;id&quot; around would be what you really need to do. With a debugger you could probably do it a lot faster, as opposed to trying to figuring out by reading the source. (Of course you'd need a debuggable build for that...)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p178530"></a>
				<b class="postauthor">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178530">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178530#p178530"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 11:11 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 3477<br /><b>Location:</b> Mountain View, CA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah, agreed.  This is complicated by the fact that the rdanbrook/nestopia repo doesn't include the Win32 GUI code/etc., so quite honestly I have no idea how to build NestopiaUE for Windows (with the standard GUI etc.) given what's there.  :\</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p178532"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178532">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178532#p178532"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Aug 28, 2016 11:15 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 6592<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'm surprised you haven't filed a &quot;windows build files missing&quot; issue. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />I'd actually have built it and taken a quick look by now if I could. The only windows build files I could find in there make a DLL for libretro.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p178540"></a>
				<b class="postauthor">koitsu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p178540">Re: SOROM and older emulators</a></div><div style="float: right;"><a href="./viewtopic.php?p=178540#p178540"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 29, 2016 2:00 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3.png" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 9:28 pm<br /><b>Posts:</b> 3477<br /><b>Location:</b> Mountain View, CA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah, rdanbrook semi-recently &quot;revamped&quot; it all so that it would be easier ported to other platforms; I believe he moved it to use SDL.  There's no GUI any more, except on *IX, where there's some GTK support I think.  Windows, OS X, etc. all have nothing, AFAIK.  The Win32 binaries for the SDL/libretro combo he calls &quot;winalpha&quot; here, while the original Win32 one we're all used to (DirectX + GUI) is just called &quot;win32&quot;: <!-- m --><a class="postlink" href="https://sourceforge.net/projects/nestopiaue/files/1.47/">https://sourceforge.net/projects/nestopiaue/files/1.47/</a><!-- m --><br /><br />Note that in that directory (nor in earlier versions on his Sourceforge site) there is no Win32 source.  AFAIK, that's in violation of GPL (Nestopia is GPLv2).  But because he's a good guy, I don't wanna push him on it.  But I really would like to see the current 1.47 Win32 code on github or somewhere like that, since it includes the Visual Studio projects and all the GUI bits.<br /><br />I think what he's doing is (manually) backporting fixes from GitHub into the original 1.40 Nestopia Win32 source, then build binaries of that on rare occasion.  We haven't had a Win32 build since January 2016.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=3&amp;t=14205&amp;start=15"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=3"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=3&amp;t=14205"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>2</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 25 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=3&amp;t=14205&amp;start=0">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=3&amp;t=14205">1</a><span class="page-sep">, </span><strong>2</strong></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=3">NESemdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 8 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="14205" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3" selected="selected">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
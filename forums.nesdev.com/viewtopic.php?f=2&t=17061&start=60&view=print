<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - What's the reason for the missing PPU cycle on even frames?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">What's the reason for the missing PPU cycle on even frames?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=17061">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=17061</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>5</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Mar 05, 2018 1:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">I find it pretty funny how a lot of Europeans online say that skin colors on NTSC appear as either green or purple, yet, I never seen it happen on any of the TVs I had.</div><br />I think this was common with VHS.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Mon Mar 05, 2018 1:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It might've happened with rabbit-ear antennas.  Those always had lousy reception.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>NewRisingSun</b> [ Mon Mar 05, 2018 2:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />NTSC does have far worse color fidelity than PAL because...<ul><li>... multipath reception in antennas and signal reflections in impedance-unmatched electrical connections will cause differential (brightness-dependent) phase shift. Differential phase errors cannot be removed by the viewer using the Hue control, as that one will only correct linear phase errors. The <a href="https://forums.nesdev.com/viewtopic.php?f=2&amp;t=13252&amp;start=90#p186297" class="postlink">beloved NES being a serious offender</a>. The PAL patent on the other hand explicitly mentions its ability to even remove differential phase errors, as my comparison of the PAL NES' output with Simple PAL versus Full PAL demonstrates.</li><li>... the very presence of a Hue knob not only in monitors but also in video production equipment meaning one more setting than can and will be improperly adjusted.</li><li>... a black level of 7.5 percent that was almost impossible to get right without an oscilloscope in the pre-digital days. Basically everyone else, including all PAL countries, use a black level of zero.</li><li>... RGB primaries that were obsolete almost immediately after the standard was adopted yet never formally changed, leading to confusion among everyone about what the correct colorimetry is, and strange correction matrices in production and consumer equipment. For PAL, the European Broadcasting Union simply said in 1970: here are new primaries based on current technology, and here are permissible deviations: use them and shut up. Worked so well that they were used with minimal changes in HDTV (as Rec. 709).</li><li>... generally much more lax broadcast and somewhat more lax equipment production standards in NTSC regions (although that's not the fault of the system itself)</li></ul>I would say though that the &quot;green and purple faces&quot; is mostly a stereotype, as none of the above points would distort the signal to such a great degree. And even if it did, the viewer would simply adjust his set.<br /><br />Then again, if I look at some YouTube videos...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Mon Mar 05, 2018 3:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">... RGB primaries that were obsolete almost immediately after the standard was adopted yet never formally changed, leading to confusion among everyone about what the correct colorimetry is, and strange correction matrices in production and consumer equipment.<br /></div><br /><br />I wonder how many people would notice if the colorimetry was different without the correction matrices.  If you can get a wider color gamut, you might as well show it off.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Oziphantom</b> [ Mon Mar 05, 2018 10:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What makes it worse is that NTSC 4.48 is valid for a direct signal and hence the NES and SNES could have given you NTSC 4.48 out of the back which would solve a lot of the problems XD Still won't get you a proper red that doesn't bleed everywhere but you can't have everything <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Tue Mar 06, 2018 6:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Would ntsc 4.48 work with every ntsc tv set?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Oziphantom</b> [ Tue Mar 06, 2018 7:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Don't know. I mean it in the Spec, and they are analogue devices, so if you change the chroma burst signal faster it should &quot;just work&quot;, as in its not digital and hence has a yes/no response to everything. I would think at worst if the internal switching can only handle 3.38 you would still get the same you got now, just the NES outputs more data. Might end up looking worse though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Mar 06, 2018 7:38 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />As I understand it, NTSC-only SDTVs are sensitive only to 3.58 MHz chroma.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Sun Mar 11, 2018 5:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">NewRisingSun wrote:</div><div class="quotecontent">RF video, overall 4.2 MHz bandwidth, equiband YUV decoding at 0.6 MHz.<br /><div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia1 -->RF-YUV0.6MHz.png<!-- ia1 --></div><br /><br />RF video, overall 4.2 MHz bandwidth, equiband YUV decoding at 1.5 MHz.<br /><div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia0 -->RF-YUV1.5MHz.png<!-- ia0 --></div><br /><br />RF video, overall 4.2 MHz bandwidth, 1953 NTSC YIQ decoding with I at 1.5 MHz and Q at 0.6 MHz. This one looks really weird in the yellow-green bushes, because the unequal bandwidths result in funky transitory colors that don't appear with equal bandwidths, even when they're low.<br /><div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia2 -->RF-YIQ.png<!-- ia2 --></div><br /><br />Baseband composite video, unrestricted overall bandwidth, equiband YUV decoding at 1.5 MHz:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia4 -->Composite-YUV1.5MHz.png<!-- ia4 --></div><br /><br />Baseband composite video, unrestricted overall bandwidth, equiband YUV decoding at 3.5 MHz:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia3 -->Composite-YUV3.58MHz.png<!-- ia3 --></div><br /><br />The last one is never used, because as you can see, the high chroma bandwidth basically steals all the luma detail, and so is pointless.</div><br /><br />Is the first one have a &quot;.6mhz&quot; filter on both the encoder and decoder side?  Also,  the last one DOES look familiar, like it's how my old tv looked like.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Thu Mar 15, 2018 12:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Does anybody know the formula to convert the original NTSC primaries to sRGB?  I remember someone showing a screenshot of the difference between the 2 standards, with the old format having boosted reds.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>NewRisingSun</b> [ Thu Mar 15, 2018 2:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The formula depends on whether you just want to convert RGB primaries or also from the original Illuminant &quot;C&quot; white point to D65. Use the attached Excel file to calculate from any color space to any other color space. Remarks:<ol style="list-style-type: decimal"><li>&quot;Linear light signals&quot; are the signals you get when you remove gamma-pre-correction, i.e. LinearR = R^2.2, 0.0 &lt;= R &lt;= 1.0.</li><li>&quot;Gamma pre-corrected signals&quot; are the normal RGB values you use. As the article referenced in the file explains, proper conversion requires linear light signals. When you use normal gamma pre-corrected signals, you must specify two chromaticity points for which the inevitably resulting errors will be minimized. </li><li>The &quot;Parker (original)&quot; and &quot;Parker (modified)&quot; sheets differ in how white point differences are treated.</li><li>The &quot;Common settings&quot; sheet contains a number of color spaces that the literature lists as being &quot;common&quot; for television sets of a particular era, as well as the color spaces defined by the various standards documents. &quot;sRGB&quot; uses &quot;CCIR Rec. 709&quot; primaries and white point D65.</li><li>The &quot;Gain/Angle&quot; are the result of folding the NTSC YUV-to-RGB* and &quot;Correction for gamma pre-corrected signals&quot; matrices into one matrix and are the values you would enter for example into Nestopia's NTSC palette generator under &quot;Advanced&quot; (Nestopia for some reason requires Gain to be entered divided by two). </li></ol><span style="font-size: 85%; line-height: normal">* NTSC is usually described as using YIQ rather than YUV, but it's just the same color space rotated by 33 degrees, and it's easier expressing things in terms of YUV because at least one value will at least nominally be at zero degrees.</span>

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=12180">NTSCPrimaries.7z</a> [11.7 KiB]
			</span><br />
			<span class="gensmall">Downloaded 58 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Thu Mar 15, 2018 2:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is this what I'm looking for?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Correction for gamma pre-corrected signals&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp;R's&nbsp; &nbsp;&nbsp; &nbsp;G's&nbsp; &nbsp;&nbsp; &nbsp; B's&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; V&nbsp; &nbsp;&nbsp; &nbsp; U&nbsp; &nbsp;&nbsp; &nbsp;Gain&nbsp; &nbsp; Angle&nbsp; &nbsp;<br />R't=&nbsp; &nbsp;1.2903&nbsp; &nbsp;-0.2705&nbsp; &nbsp;-0.0198&nbsp; &nbsp;R'-Y'=&nbsp; &nbsp;1.628&nbsp; &nbsp;0.066&nbsp; &nbsp;1.629&nbsp; &nbsp;87.7&nbsp; &nbsp;°<br />G't=&nbsp; &nbsp;-0.0037&nbsp; &nbsp;0.9516&nbsp; &nbsp;0.0521&nbsp; &nbsp;G'-Y'=&nbsp; &nbsp;-0.557&nbsp; &nbsp;-0.269&nbsp; &nbsp;0.618&nbsp; &nbsp;244.2&nbsp; &nbsp;°<br />B't=&nbsp; &nbsp;0.0317&nbsp; &nbsp;-0.1982&nbsp; &nbsp;1.1665&nbsp; &nbsp;B'-Y'=&nbsp; &nbsp;0.151&nbsp; &nbsp;2.445&nbsp; &nbsp;2.450&nbsp; &nbsp;3.5&nbsp; &nbsp;°<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>NewRisingSun</b> [ Sat Mar 17, 2018 2:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />No, you are converting approximately and not exactly. To convert exactly, convert to linear light signals and use the formula for linear signals:<div class="codetitle"><b>Code:</b></div><div class="codecontent">// Convert from 1953 NTSC (with D65 white point) to sRGB color space<br />float R = (r&gt;=0.0812)? pow((r+0.099)/1.099, 1.0/0.45): r/4.500;<br />float G = (g&gt;=0.0812)? pow((g+0.099)/1.099, 1.0/0.45): g/4.500;<br />float B = (b&gt;=0.0812)? pow((b+0.099)/1.099, 1.0/0.45): b/4.500;<br />float newR = 1.4607*R -0.3845*G -0.0761*B;<br />float newG =-0.0266*R +0.9654*G +0.0612*G;<br />float newB =-0.0264*R -0.0414*G +1.0678*B;<br />if (newR&lt;0.0) newR=0.0; if (newR&gt;1.0) newR=1.0;<br />if (newG&lt;0.0) newG=0.0; if (newG&gt;1.0) newG=1.0;<br />if (newB&lt;0.0) newB=0.0; if (newB&gt;1.0) newB=1.0;<br />r = (newR&gt;=0.018)? 1.099*pow(newR, 0.45)-0.099: 4.5*newR;<br />g = (newG&gt;=0.018)? 1.099*pow(newG, 0.45)-0.099: 4.5*newG;<br />b = (newB&gt;=0.018)? 1.099*pow(newB, 0.45)-0.099: 4.5*newB;</div>Notice the gamma conversion formula from SMPTE-170M in the first and last three lines. It is more involved than a standard power function.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Wed Mar 21, 2018 5:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was thinking today about what would be the easiest digital bandpass filter for a system like the NES to do, and I thought that {-1/4, 0, 1/2, 0, -1/4} BPF sampled at 14.32Mhz would be one of the easiest digital filters, so I calculated what would be the -3dB &quot;cutoff&quot; frequency with my calculator and I got:<br /><br />1.3031574 Mhz<br /><br /><img src="http://i0.kym-cdn.com/entries/icons/original/000/012/589/patrickstar.jpg" alt="Image" /><br /><br />This CAN'T be a coincidence that such a simple digital filter would hit the 1.3 Mhz bandwidth so closely.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Wed Mar 21, 2018 7:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: What's the reason for the missing PPU cycle on even fram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Uh.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>5</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
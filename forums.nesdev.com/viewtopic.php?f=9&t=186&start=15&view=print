<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NES co.. err, backup system...</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NES co.. err, backup system...</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=186">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=186</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>teaguecl</b> [ Tue Jul 19, 2005 11:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm using several of the Phillips CBTD16211 level shifters.  They're a little pricey, but I get lots of channels in a single chip.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Wed Jul 20, 2005 1:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ah, nice.  24 channels sounds pretty good, though it looks like the inputs and outputs are seperate.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Guest</b> [ Fri Jul 22, 2005 1:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I am an electronics engineer student and I'm also developing a flashcart for NES.
<br />
<br />Hardware:
<br />Xilinx XC95144 CPLD chip
<br />512 KB PRG FLASH
<br />32 KB PRG RAM (Battery backed with DS1210)
<br />512 KB CHR FLASH
<br />32 KB CHR RAM
<br />
<br />It should run commercial carts.
<br />I believe MMC5 is impossible to do with that chip, but almost any other mapper is (including MMC3 that I have done already and fills about 70% of the chip).
<br />The flashing software will read UNIF ROM files.
<br />(NES files should be converted to UNIF using UCON64 first)
<br />Flash and mapper programming will be done thru a simple parallel port cable, no external cart programming device needed.
<br />I'll get the prototype PCB in the mail next week and I'll put up the whole thing together and let u know if it works.
<br />
<br />Later (in september, I think) I'll have PCB's available for sale (for around 20 EUR shipped) for people who want to build one and by then I have several mappers finished. The only bitchy thing is the CPLD chip in a Quad Flat Package that is quite hard to solder, but not impossible.
<br />
<br />Xilinx, Digikey and Elfa in sweden sell those CPLD chips at least.
<br />
<br />I'll post a link to my webpage later.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Fri Jul 22, 2005 4:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The first guy to build a NES flash cart that supports the popular mappers will easily be able to sell them, even in kit form.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Jul 22, 2005 5:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Assembled?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Anonymous wrote:</div><div class="quotecontent">I am an electronics engineer student and I'm also developing a flashcart for NES.</div><br />Cool! MMC3 flash cart would be teh win.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Hardware:<br />Xilinx XC95144 CPLD chip<br />512 KB PRG FLASH<br />32 KB PRG RAM (Battery backed with DS1210)<br />512 KB CHR FLASH<br />32 KB CHR RAM</div><br />What kind of lockout defeat? Or will it require me to open my frontloader and cut pin 4? Will it be available in both 60 and 72 pin versions for those who own a Famicom or Dendy system?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Flash and mapper programming will be done thru a simple parallel port cable, no external cart programming device needed.</div><br />Will the PC-side software be free software, or will it be proprietary?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Later (in september, I think) I'll have PCB's available for sale (for around 20 EUR shipped) for people who want to build one and by then I have several mappers finished.</div>
<br />Will you also sell fully assembled pieces the way <a href="http://www.dspassme.com/" class="postlink">dspassme.com</a> does?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Jul 22, 2005 6:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sounds great.  I'd almost certainly order a PCB of that.  BTW man, register a name on the forum!  We don't spam your email here, heheh.
<br />
<br />How does the CPLD get reconfigured?  Through the same parallel cable, or a seperate JTAG cable or what?
<br />
<br />I haven't tried any Xilinx design tools yet.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Fri Jul 22, 2005 9:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What kind of lockout defeat? Or will it require me to open my frontloader and cut pin 4? Will it be available in both 60 and 72 pin versions for those who own a Famicom or Dendy system? </div><br /><br />No lockout defeat at all.. so it will require you to cut the pin 4 .. or get a lockout chip from some useless game/machine. The PCB had no room for a lockout chip so you'd need to wire wrap the chip to the pins <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> I might consider doing a Famicom version... though I think an adapter would be a better choice.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Will the PC-side software be free software, or will it be proprietary?</div><br /><br />Free software, with source.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Will you also sell fully assembled pieces the way dspassme.com does?</div><br /><br />Depends on the demand. I don't have much free time or money to buy the expensive components for several carts.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">How does the CPLD get reconfigured? Through the same parallel cable, or a seperate JTAG cable or what? </div>
<br />
<br />The CPLD gets reconfigured thru the JTAG port. The ROM-chips are also flashed thru the JTAG port, by forcing the CPLD chip to EXTEST mode (can control the outputs freely). The problem is the parallel port is so slow that it takes now an hour to transfer a 512KB game now. I'm thinking about a PIC cable that'd make things faster.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Sat Jul 23, 2005 8:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">artoh wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What kind of lockout defeat? Or will it require me to open my frontloader and cut pin 4? Will it be available in both 60 and 72 pin versions for those who own a Famicom or Dendy system? </div><br /><br />No lockout defeat at all.. so it will require you to cut the pin 4 .. or get a lockout chip from some useless game/machine. The PCB had no room for a lockout chip so you'd need to wire wrap the chip to the pins <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> I might consider doing a Famicom version... though I think an adapter would be a better choice.<br /></div><br /><br />How big is the PCB?  You couldn't find enough space for solder holes on a full sized NES cart PCB?  In my opinion, it is only complete if it runs in an un-modded NES <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Will you also sell fully assembled pieces the way dspassme.com does?</div><br /><br />Depends on the demand. I don't have much free time or money to buy the expensive components for several carts.<br /></div><br /><br />There will be plenty of demand for a fully assembled NES flash cart with a CPLD capable supporting most commercial mappers.  If you can do MMC3, then all of the other _popular_ mappers are a piece of cake, right?  It would be the first of its kind!<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">How does the CPLD get reconfigured? Through the same parallel cable, or a seperate JTAG cable or what? </div><br /><br />The CPLD gets reconfigured thru the JTAG port. The ROM-chips are also flashed thru the JTAG port, by forcing the CPLD chip to EXTEST mode (can control the outputs freely). The problem is the parallel port is so slow that it takes now an hour to transfer a 512KB game now. I'm thinking about a PIC cable that'd make things faster.</div>
<br />
<br />A PIC controlled MMC/SD flash card slot would be even more ideal.  You'd get good loading speed, and people wouldn't have to tether their cart to transfer games.  Also, you could switch to using volitile RAMs instead of flash, since MMC flash is used as non-volitile storage.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>drk421</b> [ Sat Jul 23, 2005 10:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you can get MMC1, MMC3, UNROM and CNROM going, that's about 75% of all NES games.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jul 23, 2005 11:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Jagasian wrote:</div><div class="quotecontent">How big is the PCB?  You couldn't find enough space for solder holes on a full sized NES cart PCB?  In my opinion, it is only complete if it runs in an un-modded NES <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br />Something with no lockout defeat would run in an unmodified toploader. Or are you claiming that something is only complete if somebody has taken a micro-X-ray of the lockout chip, transcribed its program, and created a lockout chip in some of the CPLD cells?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">There will be plenty of demand for a fully assembled NES flash cart with a CPLD capable supporting most commercial mappers.  If you can do MMC3, then all of the other _popular_ mappers are a piece of cake, right?</div><br />Even <a href="http://www.tripoint.org/kevtris/mappers/nes_custom/NES_BTR.html" class="postlink">Sunsoft's FME-7</a> used in <em>Batman: Return of the Joker</em> and several (J) titles?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">A PIC controlled MMC/SD flash card slot would be even more ideal.  You'd get good loading speed</div>
<br />But then you'd get connectors that wear down quickly as you take the card back and forth between the NES and the PC, and you'd run the risk of corrupting the card's file system when you write the contents of battery-backed SRAM out to the card unless you do rigorous validation of your FAT16 and FAT32 code. Is it even possible to fit working FAT16 and FAT32 drivers with VFAT into a PIC's ROM?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Sat Jul 23, 2005 12:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">How big is the PCB? You couldn't find enough space for solder holes on a full sized NES cart PCB? In my opinion, it is only complete if it runs in an un-modded NES <br /></div><br />The PCB is around 80x100mm and it's quite full packed already. There are so many NES consoles in the world that people could always get another one if they want to keep an unmodified console <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">A PIC controlled MMC/SD flash card slot would be even more ideal. You'd get good loading speed, and people wouldn't have to tether their cart to transfer games. Also, you could switch to using volitile RAMs instead of flash, since MMC flash is used as non-volitile storage.<br /></div><br />That would be too complex <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /> .. And using a PIC always involves CODING and that is something I deeply hate. I'll try to keep the device simple.<br />Now you could leave the cart in the console, just plug in the cable and load a new game.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Even Sunsoft's FME-7 used in Batman: Return of the Joker and several (J) titles?<br /></div>
<br />Might be possible.. I'll have to check it out.. it doesn't have that much registers over MMC3.. The sound wouldn't be simulated, though.
<br />Maybe even a limited MMC5 would be possible (a one that could run Castlevania 3)
<br />
<br />Right now I am discussing with myropcb... that would be a cheap place to get the final PCBs.. I can sell them for less price than the 20 EUR. And you can get the cool blue solder resist + golden connectors... Thank you, memblers <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Maybe I could make a few fully assemblied units (like 5 pieces) and see if people buy them.. After that I could make more..

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Guest</b> [ Sat Jul 23, 2005 2:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you can stick 6 fat vias on the left edge of the NES board (say holes for 0.1 in spaced pins), then someone can run wires to a CIC chip hanging loose or on a piece of perf (or PCB if you take it out of a MHROM cart) in the top half of the case.  You need a case to put your cart in, and why not make it a crappy sports game or a really common game and rip the CIC out while you're at it.  The lockout defeats aren't particularly complex (feed it -5V, either continously, or in short pulses under game control), but they aren't particularly good either, and can damage toploaders.
<br />
<br />Tepples: Working FAT32 drivers aren't that big, although they are a pain to write in asm, and 'connectors that wear down', won't wear down any faster than a camera with a socket or the socket in your PC reader.
<br />
<br />Jagsian, quite apart from the added complexity, you still need a boot ROM, unless he's got bus switches to isolate the NES from the cart while the RAM gets stuffed via jtag, and the user then resets the console (stupid nintendo and their stupid lack of /reset on the card edge, and while we're at it, lack of audio in/out, 2.5 mm instead of 2.54 mm pitch, and 0.047 instead of 0.062 board thickness, grr).
<br />
<br />109/MIMIC-1, FME-7, RAMBO-1, and MMC3 are all of similar complexity.  You need more register bits and irq bits for FME7 and rambo (well, in a different fusemap, you can use the latch as the top half of the counter instead), but if you can do one, you should probably be able to get them all (although perhaps not at the same time, with the additional mode bits and convoluted low CHR banking logic).  I can't fit MMC3 along with MMC1/discretes though, MMC3 barely fits on it's own into a 128 (although I don't have the A12 timeout/deglitching stuff done yet, but perhaps the external cap is enough), while all the rest fits happily into a 64 (which is what I'm using for now).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Guest</b> [ Sat Jul 23, 2005 2:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What about some Konami VRC? One of them has like 24 registers, of course all far more rudimentary than a MMC3 register but twenty-freaking-four of them, that seems a little out of a CPLD's scope.
<br />
<br />Due to the thing being CPLD based, I think PC configuration is the right way to go.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jul 23, 2005 2:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Anonymous wrote:</div><div class="quotecontent">'connectors that wear down', won't wear down any faster than a camera with a socket or the socket in your PC reader.</div>
<br />Cameras might be unloaded once or twice a day. A new build might be loaded once every five minutes during a 4 hour development session.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Sat Jul 23, 2005 3:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I should clarify.  By popular mappers, I mean the most used mappers, such as UNROM, CNROM, MMC1, and a few others.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
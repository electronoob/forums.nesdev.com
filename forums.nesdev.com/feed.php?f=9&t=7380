<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=9&amp;t=7380" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2012-02-24T23:04:27-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=9&amp;t=7380</id>
<entry>
<author><name><![CDATA[m00dawg]]></name></author>
<updated>2011-02-22T06:53:56-07:00</updated>
<published>2011-02-22T06:53:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74337#p74337</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74337#p74337"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74337#p74337"><![CDATA[
Only up to the sampling rate though - if I wanted to do a pathological study of noise I'd have to potentially go higher than that. But there really isn't much point there <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />The examples I have show a distinct audible difference in noise and, though I amplified both sources, they are both amplified by the same amount so you can still see the ratio.<br /><br />The PowerPak does add more than I would ideally like, but since it doesn't leak into the other channels I only use that when I need it. The end result has been pretty good. It didn't exceed my expectations perhaps but certainly met them.<br /><br />I will say I should have added a volume knob <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> When recording directly into my sound cards, the audio is too loud, so I have to use my mixer to bring it back down and avoid clipping. My sound cards don't have any volume controls over source inputs so I may have to add that if i don't want to use my mixer.<br /><br />The only reason the mixer gets in the way is that it prevents me from recording all 3 inputs at once (since I only have a 2-channel rec-out) whereas I can do 4 at a time directly into my sound-cards. Fortunately, it's not hard to add and doesn't change the original board design so just something I need to put together at some point.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4694">m00dawg</a> — Tue Feb 22, 2011 6:53 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2011-02-17T18:12:10-07:00</updated>
<published>2011-02-17T18:12:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74138#p74138</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74138#p74138"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74138#p74138"><![CDATA[
Don't worry too much about buying a scope. Anyone with a copy of Audacity can scope audio-frequency signals.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Thu Feb 17, 2011 6:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[m00dawg]]></name></author>
<updated>2011-02-17T18:05:45-07:00</updated>
<published>2011-02-17T18:05:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74137#p74137</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74137#p74137"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74137#p74137"><![CDATA[
<a href="http://www.moocowproductions.org/?page_id=1113#audiocomp" class="postlink">Here you go!</a><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4694">m00dawg</a> — Thu Feb 17, 2011 6:05 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[m00dawg]]></name></author>
<updated>2011-02-17T16:42:38-07:00</updated>
<published>2011-02-17T16:42:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74136#p74136</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74136#p74136"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74136#p74136"><![CDATA[
Yep I plan on adding some, specifically an example of emulation sounds like over the real thing. Just haven't gotten around to it yet. I'll also see about doing a noise comparison but that might not work out very well audibly and I don't have an oscope or anything to show it visually.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4694">m00dawg</a> — Thu Feb 17, 2011 4:42 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Jeroen]]></name></author>
<updated>2011-02-17T16:33:44-07:00</updated>
<published>2011-02-17T16:33:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74135#p74135</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74135#p74135"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=74135#p74135"><![CDATA[
Can we have some recordings?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3369">Jeroen</a> — Thu Feb 17, 2011 4:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[m00dawg]]></name></author>
<updated>2011-02-13T21:16:04-07:00</updated>
<published>2011-02-13T21:16:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73960#p73960</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73960#p73960"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73960#p73960"><![CDATA[
<a href="http://www.moocowproductions.org/?page_id=1113" class="postlink">Here it is</a>, as promised! I've included parts list, Eagle layouts and some pics. Thanks for all the help! Couldn't have done it without the help!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4694">m00dawg</a> — Sun Feb 13, 2011 9:16 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[m00dawg]]></name></author>
<updated>2011-02-11T23:04:08-07:00</updated>
<published>2011-02-11T23:04:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73878#p73878</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73878#p73878"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73878#p73878"><![CDATA[
W00! Finally it works!<br /><br />I'll post the working schematic and board tomorrow but I thought I would share my findings. The design is based upon the CMoy Amplifier, as noted previously. The difference is that I am using 3 channels so I can record the PowerPak output if I so desire.<br /><br />Turns out that the PowerPak is noisy as shit compared to the NES outputs which sound beautiful. So I'm not sure how feasible the PowerPak will be over using software emulation, but I do like the grungy sound of the PowerPak better than FamiTracker *shrug*<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4694">m00dawg</a> — Fri Feb 11, 2011 11:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[m00dawg]]></name></author>
<updated>2011-02-06T13:04:55-07:00</updated>
<published>2011-02-06T13:04:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73631#p73631</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73631#p73631"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73631#p73631"><![CDATA[
I finished my circuit as well and it sounds amazing! Come to find out, the PowerPak may be causing actually a good bit of noise by itself so it may not be suitable to record and I may just have to rely on software emulation for that.<br /><br />I haven't been able to really confirm that though since I killed 2 of my op-amp channels it looks like. I did that while trying to hook up all 3 channels and think it happened when I bridged pins 3 and 4 (accidentally) on the external connector. At least the CPU is still good.<br /><br />My first few board designs weren't perfect so I am going to give it another go with a brand new board and parts. Part of the problem was that my first design was double sided though I was able to make a single-sided board by being a bit creative (the two 4.7k resistors are bounded on the bottom of the board instead of the top and each straddle one of the filtering caps).<br /><br />One issue that would make this solution non desirable to many is that I needed to power the op-amp with batteries as the +5V off the regulator inside the NES is not enough to power the op-amp.<br /><br />So I am thinking about using a panel mounted power connector to rig up to the back of the NES (where the other audio-outs will go). I was also thinking about using my own transformer (18V CT) as well because then I could create a true bipolar power supply. If I built it correctly, it could power both the NES and the audio board. The only problem I see there is that the NES probably cannot handle half-phase by itself so I might need to pass it a clean 9VDC signal instead - or perhaps 5VDC directly and bypass the regulator on board.<br /><br />I think all that is a bit much so, for now, I think using 2 9V's should work well for my purposes. Ultimately the whole goal was good clean audio while also protecting the chip and I've done more than necessary already for that.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4694">m00dawg</a> — Sun Feb 06, 2011 1:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Super-Hampster]]></name></author>
<updated>2011-01-27T23:20:03-07:00</updated>
<published>2011-01-27T23:20:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73217#p73217</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73217#p73217"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=73217#p73217"><![CDATA[
I just finished the circuit you suggested and tested it out. It works perfectly. Sounds great.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=493">Super-Hampster</a> — Thu Jan 27, 2011 11:20 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Super-Hampster]]></name></author>
<updated>2011-01-21T20:49:14-07:00</updated>
<published>2011-01-21T20:49:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72987#p72987</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72987#p72987"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72987#p72987"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Try this- .... Maximum stereo separation is going to only be -20dB with 1k resistors and 10k pots, but everything I've read about it implies you don't want the NES outputs panned too hard left or right. Using 1k and 10k reflects expecting a 50k input impedance on the amp. This schematic will also let you put all three of the channels anywhere, left or right. Feel free to increase or omit the capacitors but not decrease.<br /><br /><span style="font-size: 59%; line-height: normal">It's disappointing that I can't use a data: URI for that image.</span><br /></div><br /><br />Perfect! I already have the resistors. I don't have any capacitors that small so not decreasing shouldn't be a problem. I just have to get some 10k pots because all I have are 2 50k pots and a 1k pot.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=493">Super-Hampster</a> — Fri Jan 21, 2011 8:49 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2012-02-24T23:04:27-07:00</updated>
<published>2011-01-21T20:07:28-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72984#p72984</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72984#p72984"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72984#p72984"><![CDATA[
<div class="quotetitle">m00dawg wrote:</div><div class="quotecontent"><br />Haha no I mean how do the diodes prevent the static form getting to the CPU if they are not in front of the pin directly? Like why does the electricity want to be fed through the resistors and diodes instead of just going back to the CPU pin?<br /></div>Well,  first off the resistor is physically in the way, so it's obvious why it has to go through the resistor. As to the diodes...<br /><br />There's no real place for an external voltage applied to the CPU pin to go. So if it's too high or too low, dielectric breakdown, magic smoke, suffering and woe. The diodes simply provide any path for the too-high voltage to go at all, rather than making a (tiny invisible) hole through your NES.<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Thanks again! I didn't see a "buy me a beer" link in your sig. You should add one :)<br /></div> :D<div class="quotetitle">Super-Hampster wrote:</div><div class="quotecontent"><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">But a bunch of sufficiently large resistors should have worked fine.<br /></div>I was thinking about that actually. [...]I left the values off because I was just trying to draw a quick diagram, and I'll have to play with the resistor values. I don't want them so large it's too quiet, but so small they don't prevent mixing. A little mixing would be ok though. My other option would be to simply mix it in with one of the left or right channels. </div> Try this- <img src="http://eamp.org/li/stereo.png" alt="Image" /> Maximum stereo separation is going to only be -20dB with 1k resistors and 10k pots, but everything I've read about it implies you don't want the NES outputs panned too hard left or right. Using 1k and 10k reflects expecting a 50k input impedance on the amp. This schematic will also let you put all three of the channels anywhere, left or right. Feel free to increase or omit the capacitors but not decrease.<br /><br /><span style="font-size: 59%; line-height: normal">It's disappointing that I can't use a data: URI for that image.</span><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Fri Jan 21, 2011 8:07 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Super-Hampster]]></name></author>
<updated>2011-01-21T18:14:38-07:00</updated>
<published>2011-01-21T18:14:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72982#p72982</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72982#p72982"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72982#p72982"><![CDATA[
<div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><br />One, you're assuming a circuit topology different than I specified above — I never wanted the audio to go through the diodes.<br /></div><br />Yeah, I though he was asking you why you didn't want the audio going through the diods. <br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />But a bunch of sufficiently large resistors should have worked fine.<br /></div><br />I was thinking about that actually. Maybe like this crudely drawn MS Paint diagram ?  :<br /><br /><img src="http://img.photobucket.com/albums/v107/super-hampster/nesstereomod.jpg" alt="Image" /><br /><br />I left the values off because I was just trying to draw a quick diagram, and I'll have to play with the resistor values. I don't want them so large it's too quite, but so small they don't prevent mixing. A little mixing would be ok though.<br />My other option would be to simply mix it in with one of the left or right channels. <br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Two, putting a diode in <em>series</em> likely won't work even out of the NES CPU itself, because most diodes have a minimum forward voltage of 0.6V and the NES audio is probably less than that.<br /></div> I figured this might also be an issue.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=493">Super-Hampster</a> — Fri Jan 21, 2011 6:14 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[m00dawg]]></name></author>
<updated>2011-01-21T17:44:45-07:00</updated>
<published>2011-01-21T17:44:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72981#p72981</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72981#p72981"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72981#p72981"><![CDATA[
I still have some things to think about (such as if this is all worth it over the simpler protection circuit that lidnariq specified. Or if I should add the hi-pass filter on either the protection or op-amp design, but wanted to share my work in case anyone found it useful.<br /><br />Here is a quad-op-amp design based off the Cmoy. I removed the volume pot from the schematic since this might be off board (I haven't found a 3-pole trim pot to easily mount on board for instance).<br /><br />Actually I am thinking I can probably omit it entirely since purpose is really for a pre-amp / protection circuit. Anyone have any thoughts on that?<br /><br />I tried to keep everything on a single layer, but realized I had a ground plane anyway so I have one wire run on the underside. I think I found a match for the phono plug specs provided by Eagle out of the box, but I may change that to pin headers and use panel mount. Oh and I also forgot to include screws but don't think that would make much sense inside an NES anyway.<br /><br />Anyways here there are:<br /><br /><a href="http://www.moocowproductions.org/tmp/cmoy-modified.png" class="postlink">board</a><br /><br /><a href="http://www.moocowproductions.org/tmp/cmoy-modified-nes.zip" class="postlink">Eagle files</a><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4694">m00dawg</a> — Fri Jan 21, 2011 5:44 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[m00dawg]]></name></author>
<updated>2011-01-21T12:47:26-07:00</updated>
<published>2011-01-21T12:47:26-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72975#p72975</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72975#p72975"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72975#p72975"><![CDATA[
<div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><br /><div class="quotetitle">m00dawg wrote:</div><div class="quotecontent">Electrically, I am not sure how large voltage goes to the resistors over the pin directly? I mean I understand the concept there just physically not why that's the case. But I'll take your word for it.<br /></div> You mean, what happens without the diode clamps? If there were static electricity, its discharge would cause dielectric breakdown of some part of the cpu. Try asking Youtube. <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div><br /><br />Haha no I mean how do the diodes prevent the static form getting to the CPU if they are not in front of the pin directly? Like why does the electricity want to be fed through the resistors and diodes instead of just going back to the CPU pin?<br /><br />As far as the other suggestions, those were great - thank you for that clarification! I'm not sure if I'm going to go for the op-amp or not but either way I assume I can apply the same hi-pass filter and looks like I have a few solutions in place, which is awesome!<br /><br />Thanks again! I didn't see a "buy me a beer" link in your sig. You should add one <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4694">m00dawg</a> — Fri Jan 21, 2011 12:47 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2011-01-21T12:42:51-07:00</updated>
<published>2011-01-21T12:42:51-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72974#p72974</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72974#p72974"/>
<title type="html"><![CDATA[Cleaning up NES audio output]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=7380&amp;p=72974#p72974"><![CDATA[
<div class="quotetitle">m00dawg wrote:</div><div class="quotecontent"><br />Electrically, I am not sure how large voltage goes to the resistors over the pin directly? I mean I understand the concept there just physically not why that's the case. But I'll take your word for it.<br /></div> You mean, what happens without the diode clamps? If there were static electricity, its discharge would cause dielectric breakdown of some part of the cpu. Try asking Youtube. :D<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I could add the protection circuit to the front of [the cmoy circuit]<br /></div> Shouldn't be necessary; the opamp will give its life to protect the cpu. <div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />That said, either way, should I also use DC blockers to bias the signal to 0V as well shouldn't I? I didn't notice any bias when recording off the pins directly so I did not think it was something to worry about, but given what you mentioned, I am wondering what to do there. I thought the CMoy might be good since it has a virtual ground thing which I assume would be seen by my sampler as 0V?<br /></div> Your sampler almost certainly also has a DC blocker on its input.  Adding another one wouldn't hurt. You could replace the 1kohm resistor I specified above with a 1uF  capacitor and 1.8kohm resistor — then that will recreate the 90Hz highpass in the normal NES audio path.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Fri Jan 21, 2011 12:42 pm</p><hr />
]]></content>
</entry>
</feed>
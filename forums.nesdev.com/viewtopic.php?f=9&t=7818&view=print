<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Rewriting Famicom Disks today</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Rewriting Famicom Disks today</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=7818">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=7818</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Jun 04, 2011 11:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Rewriting Famicom Disks today</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is it a possible thing to do ?
<br />I know about FDSLOADR but it was made ages ago with terribly slow computers, and even then everyone had issues with it.
<br />
<br />I ask because I find the FDS to be very a fascinating machine. I think it's a shame it never made it here <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> Damn Chinese pirates.
<br />
<br />Unfortunately, if I can only import disks from japan at a very expensive fee only to play games I could play emulated or with the PowerPak, there is only a very limited interest to me to buy a FDS.
<br />
<br />However if I'd somehow be able to rewrite disks and test sofware on it, it'd be a whole different story (or alternatively, emulate the disk drive and interface directly with the RAM adapter). Doing this sounds actually very fun.
<br />(I know the powerpak has support for FDS, but I'd bet it'd be funnier with the real thing.)
<br />
<br />Now I guess the only way to have an easy 5V interface with a PC is to use the parallel port... I'd be okay with it if it works on a recent (less than 10 years old) PC's parallel port and under Windows XP.
<br />
<br />A modern way to do would be to do a USB interface but it needs some kind of chip or board. (I remember I had to do something like that as a summerjob to "modernize" their systems some time ago).
<br />
<br />Another alternative that would be interesting would be to modify a "Twin Famicom", those systems made by sharp which are a compination of FDS + Famicom in a single unit.
<br />I guess there is a switch that can select between disk or cart. If you'd be somehow able to modify the console so that the disk unit is not completely disabled when switched on cart, and that I could use the PowerPak + a NES -&gt; FC adapter on the cart side, it *could* become possible to rewrite a disk from the cart. This is really theoretical it would surely be complicated !
<br />The Twin Famicom looks tremendously expensive on Ebay but if such a thing would be possible I might be ready to invest in  this.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>drk421</b> [ Sat Jun 04, 2011 12:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A while ago I started a project to use USB instead of a parallel port to to communicated with the FDS adapter/drive. I was going to use an AVR. Then later I found the V-USB library, and also when I moved, I lost a hard drive with some of the code on it... After I discovered that the PowerPak can play FDS games, I stopped working on it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sat Jun 04, 2011 12:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've gotten a simpler idea of doing a disk system: 
<br />
<br />a NES 3.5 inch (1.44 mb) floppy disk that is compatible with IBM that can be locked permenantly, via removal of the floppy's own lock switch, and can be processed via a modified IBM-compatible drive that fits via a NES Cartridge!
<br />
<br />a website such as EBAY still sells IBM Floppies for cheap, and there is also a certain website (forgot the URL, dangit!) that specializes in selling floppies along with USB compatible drives!
<br />
<br />EDIT: CDs can also be an alternate route, for NES, it's the matter of piracy, so it's out of the question

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Jun 04, 2011 12:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You can write FDS disks. One method is to use one of the copy programs like Disk Hacker II in combination with a modified FDS drive (they must be modified to rewrite the entire disk space) with FDSLoader. It works by swapping the RAM adapter's drive connector between your PC with FDSLoader and your modded FDS drive. 
<br />
<br />I believe it works like this.
<br />
<br />Load FDSLoader with an image of Disk Hacker II or other copy software and plug the RAM adapter into your PC. Start up the system and once at the menu, go to your PC and change the FDSLoader to the Disk image you want to write to disk. Now on the Famicom tell it to begin copying. It will load as much as it can into memory and then prompt you to change to the "target disk". At this point you will disconnect the RAM adapter from the PC and plug it into the modded FDS drive and then continue on the Famicom and it will write data and you will repeat this process of changing between the PC and the FDS drive until the entire disk is copied. You'll need to do this for both sides if applicable. 
<br />
<br />Ofcourse you could just use FDSLoader to emulate the Disk Drive. I hear you will want a fast PC with a parallel port and you'll want a Floppy, CD, or USB bootable DOS operating system to use with it as it doesn't work as well running under Windows. 
<br />
<br />I have never tried FDSLoader but I considered it since you can get the RAM adapter alone for much cheaper than with the Disk Drive. Be aware if you do import a Disk Drive you want to be sure it has a working belt and is calibrated properly. Otherwise you may have to change the belt and calibrate it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Jun 04, 2011 12:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It sounds like all you need then is a RAM Adapter and FDSLoader Cable. The Disk Drive itself is not very precise so no software shouldn't work when FDSLoader is properly emulating the Drive. And you'd be using a REAL FDS RAM Adapter.
<br />
<br />Edit: Where did your post after mine go?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 04, 2011 12:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hamtaro126: FDS is based on a Mitsumi Quick Disk mechanism, which writes in a spiral pattern rather than the track-and-sector pattern of almost all other floppy disk formats. Some people compare it to tape (especially the <a href="http://en.wikipedia.org/wiki/Exatron_Stringy_Floppy" class="postlink">Stringy Floppy</a>) more than to a traditional floppy disk. I can't see how any disk drive that isn't Quick Disk could be made compatible with the FDS RAM adapter.
<br />
<br />If you want to make a new, incompatible "disk system", I'd recommend using solid state media such as CF or SD cards. You could start by asking bunnyboy to document the CF file system facilities on the PowerPak.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Jun 04, 2011 12:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> Edit: Where did your post after mine go? </div>
<br />I removed it as your post slipped in between so what I said wasn't applicable. Anyway seeing tepple's answer I'll re-say it :
<br />
<br />No, I don't want to build any new system or wathever. This is completely off topic and I don't mention anything like that in my 1st post.
<br />
<br />That being said, the PC parallel port sound not very practical as you need :
<br />- TV
<br />- Famicom
<br />- FDS
<br />- Old PC with parallel port
<br />
<br />each next to eachother and powered simultaneously. The only PC I have which still have a LPT port is on floor B1, while my NES is on floor 1 and my room (where I have my actual PC) is on floor 2 but oh well. I'd probably find a way to make this work if I have too.
<br />
<br />The real problem is the "true DOS environment" part. Even my old crappy PC with parallel port is probably multiple orders of magnitudes faster than the one the guy designed FDSLoadr 20 years ago had. It probably has a way to do precise timing under Windows, doesn't it ?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>drk421</b> [ Sat Jun 04, 2011 1:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />With a little searching, I found a library for the AVR to use an SDCard with FAT,
<br />
<br /><!-- m --><a class="postlink" href="http://www.dharmanitech.com/2009/01/sd-card-interfacing-with-atmega8-fat32.html">http://www.dharmanitech.com/2009/01/sd- ... fat32.html</a><!-- m -->
<br />
<br />Just need the FDS drive emulation now...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Jun 04, 2011 1:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">The real problem is the "true DOS environment" part.</div>
<br />I'm pretty sure you can easily boot to DOS with a bootable CD, no matter what OS you have installed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Jun 04, 2011 3:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">- Old PC with parallel port</div>
<br />
<br />It doesn't have to be old, just have a parallel port. The Intel D525MW has one. You can put it in a Mini ITX case. But I do see your point that it is less than ideal for your arrangements. As tokumaru said you can just burn a bootable DOS OS on a CD.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 04, 2011 3:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">That being said, the PC parallel port sound not very practical as you need :<br />- TV<br />- Famicom<br />- FDS<br />- Old PC with parallel port<br /><br />each next to eachother and powered simultaneously.</div><br />I agree that it isn't practical for everyone. But someone determined to make this work could make it practical:<br /><ol style="list-style-type: decimal"><li>Buy a 23" 1080p LCD TV and put it on your computer desk. </li><li>Connect your PC's VGA output to the TV's VGA input. (Mainstream PCs with a parallel port are usually too old to have DVI-D or HDMI out. Some TVs made for the European market might have a SCART input and no VGA input, but I have evidence that the firmware treats VGA and SCART the same, in which case a pin adapter would suffice.) </li><li>Connect the Famicom to the RF input. </li><li>Turn on picture in picture, and it's not unlike running an emulator in an always-on-top window. </li></ol><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It probably has a way to do precise timing under Windows, doesn't it ?</div>
<br />Such timing would probably have to run at a kernel level, and that would involve buying a certificate so that you can sign your driver in a way that Windows Vista 64-bit and Windows 7 64-bit will accept it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat Jun 04, 2011 5:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The PowerPak could make a decent modern disksystem type thing, if the software wasn't proprietary.  AFAIK, the software that exists isn't able to create new files on the disk, but maybe you could get around that by using pre-made "blank" files that would be used for writing.  Like a disk image.  I guess loopy's FDS mapper might do that already, I don't know since I haven't tried it.
<br />
<br />What'd be cool is if we could come up with some kind of standard procedure for loading/saving.  I imagine just some calls to standard addresses, then a little code stub that would be replaced depending on what hardware it's supposed to work with.  Then some of the hardware I'm working on will be able to use that, and maybe eventually support could come around to the PowerPak also.
<br />
<br />Unfortunately I haven't found a source for FDS disks, that doesn't involve overwriting existing stuff (which is no fun, and expensive to import).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 04, 2011 7:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Unfortunately I haven't found a source for FDS disks</div>
<br />Smith-Corona word processors also use Quick Disk, though in a different case.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Jun 04, 2011 7:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you wanted to I imagine somewhere you could get some factory to produce for you, brand new Quick Disks in a shell compatible with the FDS.
<br />
<br />While we are thinking about outdated storage formats we might as well think about Cassette Tapes and the recorder for the Famicom. Just pair something like that with a Cartridge with RAM and a BIOS ROM and you could have some sort of cheap "disk" system. Ofcourse it wouldn't be as nice as Quick Disk since the data stream would be less automated.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Jun 05, 2011 2:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, the more I think about it the more I'm confused. I mean, f*** attaching disks to the NES sounds so amazingly cool, why do it have to be so complicated ?!? Damn you Nintendo ! Supposedly they gave up FDS because pirates could create disks too easily, well I wonder how comes the pirates were able to produce disks that much easily. Making a cartridge sure sounds a lot simpler to me !
<br />
<br />This is exactly like the C64, where I eventually gave up developing on that platform because it was literally impossible to rewrite disks and test your soft on real hardware. The tools to interact your disk drive with a parallel port dated from..... 1992. You needed true DOS environment as they used timed code on a PC (soooo retarded). Holy crap, no way this could still work, even by using Dosbox and all the crap there was absolutely NO way this could possibly work. And they never came up with anything else.
<br />There was a program that could convert your data to .wav and you could record it to a casette tape... but the datasette (casette tape of the C64) that came with my C64 is broken and only the disks still work.
<br />
<br />My last hope (back to the FDS) : Is there a way a USB copy NES could be installed in a Toploader (or Famicom) and that it could interact with the RAM adapter and disk system from here ? That would be pretty cool and practical. Unfortunatley, copyNES has been designed to work with frontloader NES, which can't accept the FDS RAM adapter... well crap again.
<br />The situation couldn't be worse. I guess I'd have to admit that buying a FDS would be useless unless I just want to play games with it. But again I can do that emulated/on powerpak so the interest is limited.
<br />
<br />PS : They say it can't be installed in a FC or Toploader without "extensive rewiring". So this means it's technically possible WITH extensive rewiring... But anyway you must remove the CPU from the board without damaging it which I'm completely unable to do. So I guess this is a no-no.
<br />
<br />Pehaps my real last hope is to : 
<br />1) Buy a "Docking station" for my laptop so that I get a parallel port to it (while still have it portable, so it'd be ok to put it next to the console+TV) (I'd be doomed to buy only levovo laptops for the rest of my life by the way)
<br />2) Get a bootable CD for the true DOS environment
<br />3) Buy a working FDS and a lot of disks, hopefully including some horrible ones ready for earasing
<br />4) Modify the FDS drive so that it can rewrite entiere disks (is there instructions about this somewhere ?)
<br />5) Then Maybe I have some possible hope that my dream would become true but no guarantee

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
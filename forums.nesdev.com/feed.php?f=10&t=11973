<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=11973" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2014-11-08T13:50:16-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=11973</id>
<entry>
<author><name><![CDATA[zzo38]]></name></author>
<updated>2014-11-08T13:50:16-07:00</updated>
<published>2014-11-08T13:50:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=136192#p136192</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=136192#p136192"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=136192#p136192"><![CDATA[
Just let it known that I personally happen to prefer the way NESASM does it; zero page addressing is marked explicitly.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4734">zzo38</a> — Sat Nov 08, 2014 1:50 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tomaitheous]]></name></author>
<updated>2014-11-08T09:25:56-07:00</updated>
<published>2014-11-08T09:25:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=136184#p136184</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=136184#p136184"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=136184#p136184"><![CDATA[
Doesn't ASM6 support macros? It shouldn't be too difficult to write macros for instructions that need to read/write full address or zp addressing.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3645">tomaitheous</a> — Sat Nov 08, 2014 9:25 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2014-11-01T19:13:08-07:00</updated>
<published>2014-11-01T19:13:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135865#p135865</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135865#p135865"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135865#p135865"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />In 68000 assembly, instructions use <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.W</tt> and the like to specify the size of the data (8, 16, or 32 bits), not the size of the address.<br /></div><br />If that's the case, then this really isn't the best option for 6502 assembly.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Sat Nov 01, 2014 7:13 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-11-01T19:01:38-07:00</updated>
<published>2014-11-01T19:01:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135863#p135863</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135863#p135863"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135863#p135863"><![CDATA[
In 68000 assembly, instructions use <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.W</tt> and the like to specify the size of the data (8, 16, or 32 bits), not the size of the address.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Nov 01, 2014 7:01 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2014-11-01T18:29:29-07:00</updated>
<published>2014-11-01T18:29:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135856#p135856</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135856#p135856"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135856#p135856"><![CDATA[
A modifier is certainly the best solution, because it can be applied to anything (hardcoded addresses, variables and expressions) but I never heard of this syntax before (a:). Is it common or just a CA65 thing? I've seen .w appended to the operator a few times before, so I'm not sure which is more common. When you force an addressing mode like this, you're in fact modifying both the operator (different opcode) and the operand (16 bits instead of 8), so both make sense to me.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Sat Nov 01, 2014 6:29 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-10-31T21:29:22-07:00</updated>
<published>2014-10-31T21:29:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135820#p135820</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135820#p135820"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135820#p135820"><![CDATA[
<tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">$</tt> is reserved for the hexadecimal constant prefix. I've seen that ca65 optimizes where possible (address is known to be less than $100 before it is used) unless <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">a:</tt> is specified.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Oct 31, 2014 9:29 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[3gengames]]></name></author>
<updated>2014-10-31T21:12:56-07:00</updated>
<published>2014-10-31T21:12:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135818#p135818</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135818#p135818"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135818#p135818"><![CDATA[
Would the preferred solution to be an assembler that optimizes all instructions for zeropage unless the object is denoted with a $ character preceding the object's name/value? <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4311">3gengames</a> — Fri Oct 31, 2014 9:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2014-10-31T18:53:42-07:00</updated>
<published>2014-10-31T18:53:42-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135811#p135811</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135811#p135811"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135811#p135811"><![CDATA[
Yes, this and other workarounds have been suggested. It's not like this is impossible to do, but the code is more readable if you don't have to do things like this, and not having to look up opcodes will save some time too.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Fri Oct 31, 2014 6:53 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2014-10-31T17:51:13-07:00</updated>
<published>2014-10-31T17:51:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135808#p135808</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135808#p135808"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135808#p135808"><![CDATA[
I don't think it really requires a special case for the assembler. You can just do it as data:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.byte $AD ; LDA absolute<br />.word foo</div><br />If needed frequently, it can become a macro very easily.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Fri Oct 31, 2014 5:51 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2014-10-31T17:42:18-07:00</updated>
<published>2014-10-31T17:42:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135805#p135805</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135805#p135805"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135805#p135805"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />If you happen to need that for timing reasons or something on the 2600, you'll either have to use .db (for the opcode) and .dw (for the address) or a mirror of ZP ($0100-$01FF, for example).<br /></div><br />Exactly, which is why I suggested the same be done the NES, if necessary. So far I've been using +$100 after variable names in my Atari 2600 programs, but I don't really like this.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Fri Oct 31, 2014 5:42 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2014-10-31T17:39:01-07:00</updated>
<published>2014-10-31T17:39:01-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135803#p135803</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135803#p135803"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135803#p135803"><![CDATA[
We're not supposed to used hardcoded addresses in instructions, so the solution has to be something that works well for variables and expressions too.<br /><br />being able to turn ZP addressing on and off is nice if for some reason you want this to affect several instructions, but you really need per instruction control in order to write timed code efficiently. <br /><br />Personally I'd go for the operator suffix (.w), because it doesn't mess with the operand. When I'm coding for the Atari 2600, I may need to write to the same address but using different addressing modes each time depending on how many cycles I want. If the solution was something about how many 0's the address has, would I have to define the same variable twice? Once as $07 and again as $0007, giving them different names? should I add $0000 to it to force absolute addressing? none of that makes any sense. Modifying the operator is much cleaner.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Fri Oct 31, 2014 5:39 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-10-31T17:33:14-07:00</updated>
<published>2014-10-31T17:33:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135802#p135802</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135802#p135802"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135802#p135802"><![CDATA[
<div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><br />I don't think I ever needed absolute addressing for $0000-$00FF on the NES, but it happens quite often when I'm programming kernels for Atari 2600 games.<br /></div><br />If you happen to need that for timing reasons or something on the 2600, you'll either have to use .db (for the opcode) and .dw (for the address) or a mirror of ZP ($0100-$01FF, for example).<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $00</tt> through <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $ff</tt> (more specifically: a 2-digit address, or an address that's less than 256 in value (in case some crazy decided to do <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda 257</tt>)) should get assembled as the zero page version.  Addresses $100 or larger should get assembled as 16-bit addresses.<br /></div><br />Unless the address is a label defined later or imported from another file. For the latter situation, ca65 has <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.globalzp</tt> vs. <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.global</tt>.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />For equates or mathematical operations, the equates or math should get expanded first (which has to be done anyways since they're assemble-time and not run-time generated) and the decision based off the calculated result.  If someone wants to force the 16-bit equivalent, then they should be able to do either a) <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $0000</tt> to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $00ff</tt><br /></div><br />$0000 to $00FF expands to $0 to $FF. I'd recommend things like <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">a:</tt> modifiers on an address expression to force its size.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda &gt;$00</tt> to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda &gt;$ff</tt> (use of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&gt;</tt> modifier).<br /></div><br />Where I come from, <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&gt;x</tt> means <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&#40;x &amp; $FF00&#41; &gt;&gt; 8</tt>, the &quot;high&quot; byte of a value.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Oct 31, 2014 5:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2014-10-31T16:38:53-07:00</updated>
<published>2014-10-31T16:38:53-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135796#p135796</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135796#p135796"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135796#p135796"><![CDATA[
Matter of opinion, but this is my take on it, with some actual historical assembler reference documentation to back it up:<br /><br /><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $00</tt> through <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $ff</tt> (more specifically: a 2-digit address, or an address that's less than 256 in value (in case some crazy decided to do <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda 257</tt>)) should get assembled as the zero page version.  Addresses $100 or larger should get assembled as 16-bit addresses.  For equates or mathematical operations, the equates or math should get expanded first (which has to be done anyways since they're assemble-time and not run-time generated) and the decision based off the calculated result.  If someone wants to force the 16-bit equivalent, then they should be able to do either a) <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $0000</tt> to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda $00ff</tt>, or, b) <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda &gt;$00</tt> to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda &gt;$ff</tt> (use of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&gt;</tt> modifier).  If you support things like <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.w</tt> pseudo-ops then that should also force 16-bit equivalents (e.g. <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda.w $ff</tt> would assemble to the 16-bit address).<br /><br />Justification for this stems from the model/methodology implemented by the Apple IIGS ORCA/M assembler.  <a href="https://www.dropbox.com/s/hmxff101y7ewop6/GS-04%20ORCA-M%202.0.pdf?dl=0" class="postlink">Here's the manual</a>.  The relevant section that describes the above is on PDF pages 335/336 (actual document pages 309/310).<br /><br />Likewise, the Apple II Merlin 8/16 assembler uses the same model but with a different syntax/modifier/methodology (and fairly risky/scary -- it's accomplished by adding any character to the end of the operand, other than &quot;D&quot; or &quot;L&quot;, i.e. <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">LDAq $ff</tt> would use 16-bit addressing, as would <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">LDA- $ff</tt> or <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">LDAq $ff</tt>.  I believe they did this to be compatible with other assemblers).  <a href="https://www.dropbox.com/s/c1kwfdoweetv9hf/merlin816.pdf?dl=0" class="postlink">Here's that manual</a>.  The relevant section is PDF page 97 (document page 85).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Fri Oct 31, 2014 4:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[loopy]]></name></author>
<updated>2014-10-31T16:46:36-07:00</updated>
<published>2014-10-31T16:02:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135795#p135795</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135795#p135795"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135795#p135795"><![CDATA[
It does make the parsing more tricky, I'd have to add some special cases.  15 = %1111 = $f = $00000f, they all just evaluate to a number.  What happens if you want to throw in arithmetic or labels?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4">loopy</a> — Fri Oct 31, 2014 4:02 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[freem]]></name></author>
<updated>2014-10-31T15:31:23-07:00</updated>
<published>2014-10-31T15:31:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135794#p135794</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135794#p135794"/>
<title type="html"><![CDATA[Re: NESASM forces absolute addressing in zero page]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11973&amp;p=135794#p135794"><![CDATA[
My preferences are unprefixed $00ff (which might not be simple/easy to handle; it's been a bit since I've looked at the code) or an a:$00ff prefix like ca65 supports. The former would be my preferred solution in a perfect world, and the latter would be my preferred solution in the real world <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5692">freem</a> — Fri Oct 31, 2014 3:31 pm</p><hr />
]]></content>
</entry>
</feed>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=1012" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2006-01-27T21:31:27-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=1012</id>
<entry>
<author><name><![CDATA[lynxsolaris]]></name></author>
<updated>2006-01-27T21:31:27-07:00</updated>
<published>2006-01-27T21:31:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8714#p8714</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8714#p8714"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8714#p8714"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br /><div class="quotetitle">lynxsolaris wrote:</div><div class="quotecontent">Good call.  Taking out that 1st write to $2000 did slow it down.<br /></div><br />Because you're no longer repeatedly triggering an NMI.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Also, was<br />moving the jsr controller stuff under the $2005 stuff in my NMI routine <br />correct?<br /></div><br />Yes. If you're using a structure similar to that of SMB1 (whole game runs as an NMI handler), put all game logic after all display logic.</div><br /><br />Thanks for the explaination.  I understand now.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=284">lynxsolaris</a> — Fri Jan 27, 2006 9:31 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-01-27T21:28:22-07:00</updated>
<published>2006-01-27T21:28:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8713#p8713</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8713#p8713"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8713#p8713"><![CDATA[
<div class="quotetitle">lynxsolaris wrote:</div><div class="quotecontent"><br />Good call.  Taking out that 1st write to $2000 did slow it down.<br /></div><br />Because you're no longer repeatedly triggering an NMI.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Also, was<br />moving the jsr controller stuff under the $2005 stuff in my NMI routine <br />correct?<br /></div><br />Yes. If you're using a structure similar to that of SMB1 (whole game runs as an NMI handler), put all game logic after all display logic.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Jan 27, 2006 9:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lynxsolaris]]></name></author>
<updated>2006-01-27T21:15:05-07:00</updated>
<published>2006-01-27T21:15:05-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8712#p8712</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8712#p8712"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8712#p8712"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Another thing that might be happening is that you don't need to write to $2000 twice.<br /></div><br /><br /><br />Good call.  Taking out that 1st write to $2000 did slow it down.  Also, was<br />moving the jsr controller stuff under the $2005 stuff in my NMI routine <br />correct?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=284">lynxsolaris</a> — Fri Jan 27, 2006 9:15 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-01-27T21:04:32-07:00</updated>
<published>2006-01-27T21:04:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8711#p8711</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8711#p8711"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8711#p8711"><![CDATA[
Another thing that might be happening is that you don't need to write to $2000 twice.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Jan 27, 2006 9:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lynxsolaris]]></name></author>
<updated>2006-01-27T20:38:54-07:00</updated>
<published>2006-01-27T20:38:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8710#p8710</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8710#p8710"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8710#p8710"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />I notice that you're not saving and restoring registers A and X around your NMI handler. Is your main thread doing anything other than 'loop: jmp loop'?<br /></div><br /><br />just the basic loop: jmp loop right now.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />And you should be reading the controller <em>after</em> you update the screen, not before; otherwise you stand a greater chance of overflowing vblank time as your engine grows more complex.<br /></div><br /><br />so like this?<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">nmi:<br /><br /> jsr dmatrans         ; where I do my spr dma stuff<br /> lda #$0<br /> sta $2000<br /> lda #%10001000<br /> sta $2000<br /> lda scrollPos<br /> ldx #$00<br /> sta $2005<br /> stx $2005 <br /> jsr controlStrobe   ; read controller after<br /></div><br /><br />tnx.[/code]<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=284">lynxsolaris</a> — Fri Jan 27, 2006 8:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-01-27T20:34:46-07:00</updated>
<published>2006-01-27T20:34:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8709#p8709</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8709#p8709"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8709#p8709"><![CDATA[
I notice that you're not saving and restoring registers A and X around your NMI handler. Is your main thread doing anything other than 'loop: jmp loop'?<br /><br />And you should be reading the controller <em>after</em> you update the screen, not before; otherwise you stand a greater chance of overflowing vblank time as your engine grows more complex.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Jan 27, 2006 8:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lynxsolaris]]></name></author>
<updated>2006-01-27T20:10:52-07:00</updated>
<published>2006-01-27T20:10:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8708#p8708</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8708#p8708"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8708#p8708"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />How fast is it going? One screenwidth per 4 seconds is one pixel per vblank. One screenwidth per half second is one <em>tile</em> per vblank. Could you paste the parts of your program that write to $2000, $2005, and $2006?<br /></div><br /><br />sure thing ... all I'm doing is reading the controller and if the user presses<br />left or right then I either increment / deincrement scrollPos (inside NMI)<br /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent"><br /> .zp<br />scrollPos = $00<br /><br />......<br /><br />main:<br /> sei         <br /> cld  <br /> lda #$00<br /> sta &lt;scrollPos<br /><br />.......<br /><br /><br />nmi:<br /> jsr controlStrobe   ; read controller    <br /> jsr dmatrans           ; where I do my spr dma stuff<br /> lda #$0<br /> sta $2000<br /> lda #%10001000<br /> sta $2000<br /> lda scrollPos<br /> ldx #$00<br /> sta $2005<br /> stx $2005<br />int:<br /> rti<br /><br /> <br />controlStrobe:<br /> lda #$01<br /> sta $4016<br /> lda #$00<br /> sta $4016<br /> <br /> lda $4016 ; A button .. nothing for now<br /> lda $4016 ; B button  ...<br /> lda $4016 ; Select<br /> lda $4016 ; Start<br /> lda $4016 ; Up<br /> lda $4016 ; down<br /> lda $4016 ; Left<br /> and #1<br /> beq Right_Press<br /> dec scrollPos<br />Right_Press: <br /> lda $4016 ; Right<br /> and #1<br /> beq stop_rts<br /> inc scrollPos<br />stop_rts:<br /> rts<br /><br />.....<br /><br /></div><br /><br /><br />"..." is, of course, removed code to save space.  I'm sure what I did<br />is really basic but is my first attempt at scrolling.  Thanks Tepples.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=284">lynxsolaris</a> — Fri Jan 27, 2006 8:10 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-01-27T19:07:58-07:00</updated>
<published>2006-01-27T19:07:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8705#p8705</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8705#p8705"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8705#p8705"><![CDATA[
<div class="quotetitle">lynxsolaris wrote:</div><div class="quotecontent"><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">How fast is it scrolling right now? Is it going about one screenwidth every 4 seconds, or is it going faster?<br /></div><br />Tepples, it seems to be faster than that.</div><br />How fast is it going? One screenwidth per 4 seconds is one pixel per vblank. One screenwidth per half second is one <em>tile</em> per vblank. Could you paste the parts of your program that write to $2000, $2005, and $2006?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Jan 27, 2006 7:07 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lynxsolaris]]></name></author>
<updated>2006-01-27T07:35:55-07:00</updated>
<published>2006-01-27T07:35:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8673#p8673</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8673#p8673"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8673#p8673"><![CDATA[
<div class="quotetitle">baisoku wrote:</div><div class="quotecontent"><br />if you are, please forgive my misinterpretation of your aptitude. <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":-D" title="Very Happy" /><br /></div><br /><br />No problem but I am familiar with fixed point math.  However, I'm still<br />learning how to implement fpm in 6502 asm.<br /><br />Thanks.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=284">lynxsolaris</a> — Fri Jan 27, 2006 7:35 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lynxsolaris]]></name></author>
<updated>2006-01-27T07:32:46-07:00</updated>
<published>2006-01-27T07:32:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8672#p8672</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8672#p8672"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8672#p8672"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />How fast is it scrolling right now? Is it going about one screenwidth every 4 seconds, or is it going faster?<br /></div><br /><br />Tepples, it seems to be faster than that.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=284">lynxsolaris</a> — Fri Jan 27, 2006 7:32 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[baisoku]]></name></author>
<updated>2006-01-27T01:09:48-07:00</updated>
<published>2006-01-27T01:09:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8667#p8667</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8667#p8667"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8667#p8667"><![CDATA[
Scroll rate is completely dependent on the game type, main character/sprite size, playfield layout, etc. Generally, with a console locked to ~60Hz, allowing for only 1 pixel or 2 pixel per frame velocity will be far too restrictive. I encourage you to research fixed point math operations. Using simple fixed point schemes, you can represent fractional velocities, distances, accelerations, etc. using the 8- and 16- bit values the 2a03 is comfortable with. In fact, many modern applications can benefit from fixed-point as opposed to floating-point operations, due to the fact that the resolution of the fractional components are always constant, unlike float/double math.<br /><br />if you're not familiar with the concept: <a href="http://www.google.com/url?sa=t&amp;ct=res&amp;cd=9&amp;url=http%3A//www.essentialmath.com/FixedFloat.pps&amp;ei=1dTZQ5bYFZT-qAKywpXECA&amp;sig2=fvf1mZaVwGxCayvYpOVsig" class="postlink">http://www.google.com/url?sa=t&amp;ct=res&amp;cd=9&amp;url=http%3A//www.essentialmath.com/FixedFloat.pps&amp;ei=1dTZQ5bYFZT-qAKywpXECA&amp;sig2=fvf1mZaVwGxCayvYpOVsig</a><br /><br />if you are, please forgive my misinterpretation of your aptitude. <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":-D" title="Very Happy" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=35">baisoku</a> — Fri Jan 27, 2006 1:09 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-01-26T22:08:59-07:00</updated>
<published>2006-01-26T22:08:59-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8656#p8656</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8656#p8656"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8656#p8656"><![CDATA[
How fast is it scrolling right now? Is it going about one screenwidth every 4 seconds, or is it going faster?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Thu Jan 26, 2006 10:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lynxsolaris]]></name></author>
<updated>2006-01-26T21:03:24-07:00</updated>
<published>2006-01-26T21:03:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8651#p8651</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8651#p8651"/>
<title type="html"><![CDATA[Scrolling]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1012&amp;p=8651#p8651"><![CDATA[
I've finally have my background to scroll left to right or right to left depending<br />on which direction the player has pressed the directional pad.  <br />However, it scrolls way to fast for my liking.  What are your ideas for <br />slowing the scroll speed down? Thanks in advance.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=284">lynxsolaris</a> — Thu Jan 26, 2006 9:03 pm</p><hr />
]]></content>
</entry>
</feed>
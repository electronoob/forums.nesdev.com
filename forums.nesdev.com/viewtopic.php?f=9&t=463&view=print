<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - FunkyFlashCart project</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">FunkyFlashCart project</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=463">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=463</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>9</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Tue Aug 02, 2005 10:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>FunkyFlashCart project</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Some update on my project...
<br />
<br />FunkyFlashCart that includes:
<br />
<br />Xilinx XC95144 CPLD chip
<br />512 KB PRG FLASH
<br />32 KB PRG RAM (Battery backed with DS1210)
<br />512 KB CHR FLASH
<br />32 KB CHR RAM
<br />
<br />-ROMs and the mapper can be flashed with a simple parallel port JTAG cable.
<br />-Can mimic many mappers, MMC3 &amp; downwards.
<br />
<br />--------
<br />
<br />My project can now run SMB3.. Also reading ROMs + SRAM to the computer works now, but writing isn't implemented yet, I'll do that next.
<br />
<br />The SMB3 title screen.
<br /><img src="http://img319.imageshack.us/img319/6407/ffcart22fx.th.jpg" alt="Image" />
<br /><a href="http://img319.imageshack.us/img319/6407/ffcart22fx.jpg" class="postlink">http://img319.imageshack.us/img319/6407/ffcart22fx.jpg</a>
<br />
<br />SMB3 running, the IRQs are a bit off now (by half a scanline).. Or is that normal when NTSC version of SMB3 runs on a PAL NES?
<br /><img src="http://img147.imageshack.us/img147/9371/ffcart30co.th.jpg" alt="Image" />
<br /><a href="http://img147.imageshack.us/img147/9371/ffcart30co.jpg" class="postlink">http://img147.imageshack.us/img147/9371/ffcart30co.jpg</a>
<br />
<br />Some levels have some glitch blocks, guess the SRAMs are too slow (-70).. The real carts have -10 ones <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />.. Also the IRQ glitch is in the middle, it should be in the left.
<br /><img src="http://img225.imageshack.us/img225/4363/ffcart43xv.th.jpg" alt="Image" />
<br /><a href="http://img225.imageshack.us/img225/4363/ffcart43xv.jpg" class="postlink">http://img225.imageshack.us/img225/4363/ffcart43xv.jpg</a>
<br />
<br />The Game Genie screen looks like this with my cart... any idea, why?
<br /><img src="http://img112.imageshack.us/img112/2720/ffcart16oy.th.jpg" alt="Image" />
<br /><a href="http://img112.imageshack.us/img112/2720/ffcart16oy.jpg" class="postlink">http://img112.imageshack.us/img112/2720/ffcart16oy.jpg</a>
<br />
<br />All the project files will be freely available once it's finished.. More updates coming later...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Wed Aug 03, 2005 7:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks good.  Are there faster SRAM chips available with the same pins?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Wed Aug 03, 2005 10:06 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Jagasian wrote:</div><div class="quotecontent">Looks good.  Are there faster SRAM chips available with the same pins?</div>
<br />
<br />Yes, and the new board will have holes for narrower SRAM chips aswell.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Guest</b> [ Wed Aug 03, 2005 11:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />-10 almost certainly means 100 ns, not 10 ns.  10 ns SRAM is still fairly expensive today, let alone 15 years ago.
<br />
<br />Dunno why you're getting glitchy blocks though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Aug 03, 2005 11:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: FunkyFlashCart project</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">artoh wrote:</div><div class="quotecontent">The SMB3 title screen.<br /><img src="http://img319.imageshack.us/img319/6407/ffcart22fx.th.jpg" alt="Image" /><br /><a href="http://img319.imageshack.us/img319/6407/ffcart22fx.jpg" class="postlink">http://img319.imageshack.us/img319/6407/ffcart22fx.jpg</a></div><br />Hmm... letterboxed... oh, you're in PAL Finland... Have you tested anything on an NTSC system yet?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The Game Genie screen looks like this with my cart... any idea, why?<br /><img src="http://img112.imageshack.us/img112/2720/ffcart16oy.th.jpg" alt="Image" /><br /><a href="http://img112.imageshack.us/img112/2720/ffcart16oy.jpg" class="postlink">http://img112.imageshack.us/img112/2720/ffcart16oy.jpg</a>[/img]</div>
<br />Are you making sure to swap in the correct CHR for the Game Genie menu?
<br />
<br />Good job so far.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Aug 03, 2005 12:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, I've to admit something, I'm a bit confused. They're currently a lot of different flash card project, and I don't understand that at all. I've heard that was impossible to do because of how NES mappers works and how different they are, and now, I see many different projects. Squeedo was supposed to be a customized flash card only for developpement purposes with its "own mapper". But there I understand really nothing, why is there sudently all theese projects, and how god does this works.
<br />Effectively, 512kb flash PRG and CHR can run all NES/FC games out there (exept pirate cards) and 32kb CHR RAM can do for all games, including Videomation that needs more that just 8kb (this is pretty useless, because this card isn't interessting, but because I've heard that 32kb chips are cheaper than 8kb chips, I aggree with that). But HOW do you programm the flash ? Is an usual EPROM programmer able to do that ? (I'm not much expericance yet about flash roms, but I hope I'll have somday).
<br />And HOW does works the logic behind that to simulate an actual mapper ? And HOW is it possible for the NES unit to be able to read/write on the flash cartidge to any location between CPU $4018-$ffff and PPU $0000-$1fff (and also $2000-$2fff for games with 4-Screen mirroring or using a N106 chip) to be able to simulate the mapper, and tell what bankswitching it has to do when you write something somewhere ?
<br />
<br />PS : I liked the background of your pictures, with a PS2 on a DVD player with the right corner on another machine (small PSX ? not sure 'bout that). On the right of the PS2 there is a stack of several DVD/PS2 games with Final Fantasy 10 on the top, next to the FF10 box there is a DVD/CD/Game that isn't in it's box (I hope this is not FF10 because that would be a shame to not tidy it correctly, it'll be covered of dust later, and I personally hate buying used game that aren't in good state), and just on the left of the TV is an yellow FC card (probabily pirate), and a PCB (probabily the one found on a NES/FC game, isn't it ? And we can see a wonderfull opened NES, with a nice cat watching all that stuff. It's right leg is just next to a TV adaptater, but unfortunately I can't see what I would see, i.e. the flash card itself. What a shame.
<br />PPS :That would be cool to organize a "how-do you tidy your games" competition someday.
<br />PPPS : Your pussy is really cool. Mine is a bit similar, but he's grey instead of brown, and also have a white neck and leg-end.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Wed Aug 03, 2005 4:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">They're currently a lot of different flash card project, and I don't understand that at all. I've heard that was impossible to do because of how NES mappers works and how different they are, and now, I see many different projects.</div><br />Nothing is impossible <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /> .. This project here is for playing commercial games, and it can already run one. The mapper chip can be programmed to be equivalent for almost any mapper. It is big enough to fit a MMC3-equivalent.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">But HOW do you programm the flash ? Is an usual EPROM programmer able to do that ? (I'm not much expericance yet about flash roms, but I hope I'll have somday).<br /></div><br />An usual EPROM programmer is able to program the flash chips - they are just normal flash chips, but an external programmer is not needed because you can connect the device into your pc with a simple cable and program the chips on the cart - without taking them off at all. This is possible, because the PC can force the CPLD chip into EXTEST mode, and it can control it's inputs/outputs freely. You don't even need to remove the cart from the console (i guess). <br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">And HOW does works the logic behind that to simulate an actual mapper ? And HOW is it possible for the NES unit to be able to read/write on the flash cartidge to any location between CPU $4018-$ffff and PPU $0000-$1fff (and also $2000-$2fff for games with 4-Screen mirroring or using a N106 chip) to be able to simulate the mapper, and tell what bankswitching it has to do when you write something somewhere ?<br /></div><br />After the game PRG and CHR ROM files are burned, the mapper for the game board is burned next (NES-TSROM is implemented so far). The NES itself doesn't write on the flash roms at all, but of course it reads them like a regular ROM. The CPLD chip has a total control over the NES memory space, it can map the FLASH and the SRAM to anywhere it's told it to map them.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">PS : I liked the background of your pictures, with a PS2 on a DVD player with the right corner on another machine (small PSX ? not sure 'bout that).<br /></div><br />That is S-CHI, my famiclone I bought from the philippines.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">... but unfortunately I can't see what I would see, i.e. the flash card itself. What a shame.<br /></div>
<br />I posted the picture of the cart in another topic, but here is the link again:
<br /><a href="http://img173.imageshack.us/img173/7741/device5hv.jpg" class="postlink">http://img173.imageshack.us/img173/7741/device5hv.jpg</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Wed Aug 03, 2005 4:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Guest wrote:</div><div class="quotecontent">-10 almost certainly means 100 ns, not 10 ns. 10 ns SRAM is still fairly expensive today, let alone 15 years ago.<br />Dunno why you're getting glitchy blocks though.<br /></div><br />Yep, that's what I thought too..<br />The glitchy blocks are always in the same places, i'll try to figure it out.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Hmm... letterboxed... oh, you're in PAL Finland... Have you tested anything on an NTSC system yet? <br /></div><br />Nope, not yet, because the only NTSC system I own is my famiclone and I'd need an adapter for it.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Are you making sure to swap in the correct CHR for the Game Genie menu? <br /></div>
<br />I don't really know how it works.. but it shows the same display with any real game, even when they have different ROMs or a RAM there... But not with my cart. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Wed Aug 03, 2005 4:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">artoh wrote:</div><div class="quotecontent"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Are you making sure to swap in the correct CHR for the Game Genie menu? <br /></div><br />I don't really know how it works.. but it shows the same display with any real game, even when they have different ROMs or a RAM there... But not with my cart. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
<br />
<br />I think tepples misunderstood the fact that you are not running the Game Genie from your flash cart, but are running your flash cart through a Game Genie.  Is that the misunderstanding?  The pics show you plugging your flash cart into a game genie which is then plugged into a NES.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Wed Aug 03, 2005 4:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Jagasian wrote:</div><div class="quotecontent">[I think tepples misunderstood the fact that you are not running the Game Genie from your flash cart, but are running your flash cart through a Game Genie.  Is that the misunderstanding?  The pics show you plugging your flash cart into a game genie which is then plugged into a NES.</div>
<br />Oh, right. It doesn't really show in the picture, but the cart has a real game genie attached. So the problem is that the real game genie screen looks bad.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Guest</b> [ Wed Aug 03, 2005 5:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Does the game genie work in your NES normally?  If not, then no worries, it's a known problem with them.
<br />
<br />Game Genie uses the NTSC blacker-than-black color (Palette $0D iirc), which can cause all sorts of sync issues on some TVs, since it's below true black, and close to the sync voltage.  I don't remember if PAL has the same issue with low voltages, but IIRC it does.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Thu Aug 04, 2005 1:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">artoh wrote:</div><div class="quotecontent">An usual EPROM programmer is able to program the flash chips - they are just normal flash chips, but an external programmer is not needed because you can connect the device into your pc with a simple cable and program the chips on the cart - without taking them off at all. This is possible, because the PC can force the CPLD chip into EXTEST mode, and it can control it's inputs/outputs freely. You don't even need to remove the cart from the console (i guess). </div><br />That's just what I suspected, but it sounds too confortable to me to be sure. How usefull to developp games and immediately test them on the real hardware ! So you just have to implement the good mapper on the card (by the way, is the think you call "PRG-RAM" the SRAM usually mapped at $6000-$7000 ?) and to burn your PRG/CHR and here you are, you can test it.<br />Maybe this is stupid, but how dou you burn this from a PC ? Does it needs any software ?<br />It's also easy to burn EEPROM, but it needs to destroy a real card (well, with bad games like Adventure Island or Ghostbusters II, it's no problem, but found a bad SNROM game, huh ?). Also, I don't have an EPROM eraser, so once burned, if I mess up, I have to desolder my eprom and trash them to input something else (stupid, but this didn't happen yet fortunately).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">After the game PRG and CHR ROM files are burned, the mapper for the game board is burned next (NES-TSROM is implemented so far). The NES itself doesn't write on the flash roms at all, but of course it reads them like a regular ROM. The CPLD chip has a total control over the NES memory space, it can map the FLASH and the SRAM to anywhere it's told it to map them.</div>
<br />Wow, you're sure a master if you were able to made it working. Do you think it would be possible with MMC5 with all it's particular graphic features like the split mode and the EXGraphix mode (I don't know at all how they work in hardware, but it needs a syncronous scanline counter to send palettes, and switch the CHROM banks very fastly in a scanlie). How about MMC4, scince no american or european card uses it, it would be cool to simulate one ? And does MMC1 work well ?
<br />The only problem I can see, it that the think is controlled by a MMC3 simulator, and not a real MMC3. If some info about the chip is misunderstood (for example the famous reversed mirroring about the MMC1 that caused so much problem), then it can work with emulators because all emulators writers does all the same thing wrong, work with the flash because it has be written to work, and don't work with the real mapper because it's different.
<br />I really should build something like this someday. Did you send the board to some factory to build it ? What's this enourmous capacity ? It that a lockout chip defather or is that needed for the CPLD chip ?
<br />At wich freqency does the CPLD runs ? It that fast enough to be able to swap data send to the PPU fast like MMC5 does ?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Thu Aug 04, 2005 9:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">So you just have to implement the good mapper on the card (by the way, is the think you call "PRG-RAM" the SRAM usually mapped at $6000-$7000 ?) and to burn your PRG/CHR and here you are, you can test it.<br /></div><br />Yep, that is what I meant. RAM that is in the PRG bus. That is the area for it normally, but if you burn a different file to the mapper chip, it can be mapped anywhere.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Maybe this is stupid, but how dou you burn this from a PC ? Does it needs any software ?<br /></div><br />Yep a software made by me, available for free later.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Do you think it would be possible with MMC5 with all it's particular graphic features like the split mode and the EXGraphix mode (I don't know at all how they work in hardware, but it needs a syncronous scanline counter to send palettes, and switch the CHROM banks very fastly in a scanlie). How about MMC4, scince no american or european card uses it, it would be cool to simulate one ? And does MMC1 work well ?<br /></div><br /><br />The problem with MMC5 is that it's too complex and it can't fit on the chip. <br />MMC4 should be possible and MMC1 is not implemented yet.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">The only problem I can see, it that the think is controlled by a MMC3 simulator, and not a real MMC3. <br /></div><br /><br />That is right.. but the MMC3 is a quite simple device after all, and Kevin Horton has documented it very well. But I still haven't got it quite right, because the only TSROM game working now is SMB3. Silver Surfer and SMB2 of the ones I tried, crash. The problem is I don't have any measuring equipment. Maybe when my school starts after a month, I'll have access to a logic analyzator.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">I really should build something like this someday. Did you send the board to some factory to build it ? What's this enourmous capacity ? It that a lockout chip defather or is that needed for the CPLD chip ?<br /></div><br /><br />The board is manufactured in a factory, yes.. But all the parts are solderable at home. The big cap is just there because I couldn't find a physically smaller one from my junkbox. Now it has a smaller one.<br />If you want to build one, you can order a PCB from me (LATER!)<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">At wich freqency does the CPLD runs ? It that fast enough to be able to swap data send to the PPU fast like MMC5 does ?<br /></div>
<br />
<br />The CPLD doesn't run internally on any frequency.. It's just pure logic.. so part of it runs at the PRG bus speed and part of it runs at te CHR bus speed. The MMC3 takes now 118/144 Macrocells (82% of the chip's capacity).
<br />
<br />
<br />Implemented UNROM board! 22/144 Macrocells (16%)
<br />Example of a schematic. <a href="http://ameba.lpt.fi/~hataarto/nes/unrom_example.pdf" class="postlink">http://ameba.lpt.fi/~hataarto/nes/unrom_example.pdf</a>
<br />Ducktales 2 running perfectly:
<br /><img src="http://img291.imageshack.us/img291/72/unrom10ei.jpg" alt="Image" /><img src="http://img86.imageshack.us/img86/1207/unrom25yh.jpg" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Thu Aug 04, 2005 12:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">That is right.. but the MMC3 is a quite simple device after all, and Kevin Horton has documented it very well. But I still haven't got it quite right, because the only TSROM game working now is SMB3. Silver Surfer and SMB2 of the ones I tried, crash. The problem is I don't have any measuring equipment. Maybe when my school starts after a month, I'll have access to a logic analyzator.</div><br />Ah, okay, it's not finished yet. It may be because of tons of different reasons, so good luck !<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The CPLD doesn't run internally on any frequency.. It's just pure logic.. so part of it runs at the PRG bus speed and part of it runs at te CHR bus speed. The MMC3 takes now 118/144 Macrocells (82% of the chip's capacity).</div><br />I really don't understand at all how does this CPLD works. I was thinking it was a variant of a PIC like Memblers used on his Squeedo card, but look like it's not. I think you can freely design the logic that's inside, you should design youreself tons of NAND connexions, right ? Do you setup that trough the PC cable, like the flash roms ?<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Implemented UNROM board! 22/144 Macrocells (16%)<br />Example of a schematic. <a href="http://ameba.lpt.fi/~hataarto/nes/unrom_example.pdf" class="postlink">http://ameba.lpt.fi/~hataarto/nes/unrom_example.pdf</a></div>
<br />I don't understand much that shematic (maybe because I'm more used to european than american shematics). UNROM is basically just a '161 chip used only to "memorize" the bankswitched bank, and a '32 chip to OR the current PRG-A12 with the latched value, so if the CPU reads the high 16k bank, the outpout will all be high so the bank value is $7 anyway.
<br />Also, another pin (I've forget its name) is connected to RPG-/RW so, when writing to it, a new value is taken into the '161 counter's latches (and the chip is never used as it was supposed to be, as a counter, that's pretty fun, there is also some quad-D flip flops in the 74 series, but I think they were more expensive, or had more pins ?)
<br />The only think I understand is the 3 OR gates on the right of the shematic, connected to PRG-A14, A15 and A16 (they're noted R instead, I think because how the flash chips are organized). Also
<br />I also think that the square named LD8 does the '161 job, becuase there is whre the PRG Data input comes, and the G pin is similar that the one I described above, exept that it's NANDed with PRG A15 (hum, can't get why, because PRG-A15 is rather an outpout than an input here).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>artoh</b> [ Thu Aug 04, 2005 12:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I really don't understand at all how does this CPLD works. I was thinking it was a variant of a PIC like Memblers used on his Squeedo card, but look like it's not. I think you can freely design the logic that's inside, you should design youreself tons of NAND connexions, right ? Do you setup that trough the PC cable, like the flash roms ?<br /></div>
<br />
<br />Yep, the CPLD setup is done thru the same cable as the flashing (takes around 30 seconds to program it). Using a PIC gives nice features like fast multiplying, which is uncomfortable to do with that CPLD and might take too much space.. The PIC on the Squeedo cart acts like a super mapper for own use, if I got it right... My thing can just run simple mappers that most of the commercial games have.
<br />
<br /><img src="http://img174.imageshack.us/img174/5166/videomation1pi.jpg" alt="Image" />
<br />Just got Videomation (CPROM board) to work! It bugs on my PAL NES, though (same way as an emulator if set to a PAL mode).

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>9</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
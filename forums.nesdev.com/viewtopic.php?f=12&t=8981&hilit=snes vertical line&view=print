<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - PVSnesLib for Snes 20th birthday :D !</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">PVSnesLib for Snes 20th birthday :D !</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=8981">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=8981</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>alekmaul</b> [ Wed Jun 06, 2012 12:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>PVSnesLib for <span class="posthilit">Snes</span> 20th birthday :D !</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello,
<br />I posted it on some others forums but I forgot to do a complete post here ...
<br />I want to share with you this new try to have a generic C lib for <span class="posthilit">Snes</span> (We need homebrew for this really nice console, it's its birthday <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />).
<br />It's based on <span class="posthilit">snes</span>-sdk, with help of tools from mic_, shiru , mukunda and others (just see thanks webpage on pvsneslib documentation).
<br />I know c source code from 816-tcc is nto really optimized and result are often slow with it, but it's a try, so why not <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> !
<br />There is now everything to do a project, even sound support, thanks of snesmod library (and Kung Fu Furby for help <img src="./images/smilies/icon_wink.gif" alt=";-)" title="Wink" /> ).
<br />Here is the wiki entry I made about it, of course **it far to be complete** and it really need more work to have something that be ok with all <span class="posthilit">Snes</span> functionnalities.
<br />
<br /><!-- m --><a class="postlink" href="http://www.portabledev.com/wiki/doku.php">http://www.portabledev.com/wiki/doku.php</a><!-- m -->
<br />
<br />You can download the last version from wiki here : <!-- m --><a class="postlink" href="http://www.portabledev.com/wiki/doku.php?id=currentversion_en">http://www.portabledev.com/wiki/doku.ph ... version_en</a><!-- m -->
<br />
<br />Google code entry : <!-- m --><a class="postlink" href="http://code.google.com/p/pvsneslib/">http://code.google.com/p/pvsneslib/</a><!-- m -->
<br />
<br />Here is a screen shot from something I ported from Shiru's source code :
<br />
<br />(image too huge, just the link)   <a href="http://www.portabledev.com/media/SNES/PVSnesLib/uwol_supaboy.jpg" class="postlink">http://www.portabledev.com/media/<span class="posthilit">SNES</span>/PVSnesLib/uwol_supaboy.jpg</a>
<br />
<br />I still have problem with speed and optimore (thanks mic_ <img src="./images/smilies/icon_wink.gif" alt=";-)" title="Wink" /> ) seems to have problem with the lib (no keypad support when I'm using it, don't know currently why).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>pichichi010</b> [ Fri Jun 08, 2012 12:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />hey Alekmaul! 
<br />
<br />Nice work!!!
<br />
<br />pm me whenever you have a chance! **URGENT**

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>juef</b> [ Sun Jun 10, 2012 4:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This does look very nice! I love how clean and structured the wiki looks. Definitely gonna try this next week!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>orwannon</b> [ Wed Jun 13, 2012 7:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hey, alekmaul,
<br />
<br />thanks a lot for this! I had been waiting/hoping for a toolchain like this for a very long time. Thanks to you, I might finally venture deep into the mysterious realm of <span class="posthilit">SNES</span> programming. <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> 
<br />
<br />After fiddling around a bit with pvsneslib, I think I've found a bug or two:
<br />
<br />
<br />KEY_X and KEY_Y refer to the Y button and the X button, respectively. This can be corrected by simply swapping around their BIT numbers in <strong>include/<span class="posthilit">snes</span>/pads.h</strong> like so:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; KEY_X&nbsp; &nbsp; &nbsp; = BIT&#40;6&#41;, //!&lt; pad X button.<br />&nbsp; KEY_Y&nbsp; &nbsp; &nbsp; = BIT&#40;14&#41;, //!&lt; pad Y button.<br /></div><br /><br /><br />Additionally, I couldn't get the following condition to behave correctly:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if &#40;joypad1 &amp; &#40;KEY_B | KEY_UP&#41;&#41; &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;// blah, blah<br />&nbsp; &nbsp; &nbsp;&#125;</div>
<br />
<br />Here, "blah, blah" happens when either B or up is pressed, not both at the same time as stated in the wiki.
<br />
<br />
<br />Haven't tried much more yet, but will definitely do so. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Thanks again!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Wed Jun 13, 2012 7:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />For both it should be if((joypad1&amp;KEY_B)&amp;&amp;(joypad1&amp;KEY_UP)) { }, or less obvious if(!(~joypad1&amp;(KEY_B|KEY_UP))) { }

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>alekmaul</b> [ Wed Jun 13, 2012 9:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks a lot for the bug about X &amp; Y buttons, fixed in next release (will be available at the end of this month with , of course, some new features).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>orwannon</b> [ Thu Jun 14, 2012 3:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Shiru wrote:</div><div class="quotecontent">if((joypad1&amp;KEY_B)&amp;&amp;(joypad1&amp;KEY_UP)) { }</div>
<br />
<br />That works, thanks! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />
<br />
<br />alekmaul, I've spotted another minor issue: The internal ROM name doesn't match whatever you put in the NAME section in <strong>hdr.asm</strong>, instead the project name (e.g. "hello_world") is used.
<br />
<br />Thanks again, and I'm looking forward to the next release! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>alekmaul</b> [ Thu Jun 14, 2012 4:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />About internal name, it is certainly because you have the following lines in your makefile (they are in each examples) :
<br />
<br /><strong>GTITLE 		:= -ht"$(TARGET)"</strong>
<br />
<br />#---------------------------------------------------------------------------------
<br />all	:	bitmaps $(OUTPUT).sfc
<br />	<strong>$(SNTOOLS) -hi! $(GTITLE) $(TARGET).sfc</strong>
<br />
<br />So, the internal name is changed with the current directory name $(TARGET) , as you can see for variable GTITLE.
<br />Use -ht option to change the name with snestool.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>EagleEye</b> [ Tue Jun 19, 2012 10:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Can someone help me? I want this demo to display all the colors in palette 0 (it shows most, but some are black instead(?)), and demonstrate layer 1 over layer 0 (or the reverse? I'm not sure). I can't quite figure out how to make it does these things.
<br />
<br /><a href="http://www.2shared.com/file/YLrCTSil/GenerateBackground.html" class="postlink">The demo</a>
<br />
<br />Thank you.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>juef</b> [ Tue Jun 19, 2012 10:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />EagleEye, I'm not quite there yet, but when I am I'll make sure to give it a try.
<br />
<br />alekmaul, thanks again for this project! I find it is much easier this way than learning about the <span class="posthilit">SNES</span> <strong>and</strong> assembly at the same time. I'm guessing assembly won't be avoidable in the end though, whether it's for speed or more advanced features. I'd love having a variable width font in my project, but looking at the PVSnesLib source gives me a headache for now, so I guess I'll stick to a constant width font until I'm more comfortable with the <span class="posthilit">SNES</span> as a whole <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>alekmaul</b> [ Tue Jun 19, 2012 9:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sorry juef, do not have time to take a complete look at the code but I see some things :
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;setMode&#40;BG_MODE1,0&#41;; bgSetDisable&#40;2&#41;; bgSetDisable&#40;1&#41;;<br /></div><br /><br />So you will only have BG0 enable, your BG1 will never be display.<br /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;bgInitMapSet&#40;0, &amp;map&#91;0&#93;, 64, SC_32x32, 0x0000&#41;;<br />&nbsp; &nbsp;bgInitMapSet&#40;1, &amp;map&#91;6&#93;,&nbsp; 6, SC_32x32, 0x0000&#41;;<br />&nbsp; &nbsp;bgInitMapSet&#40;0, &amp;map&#91;0&#93;, 64, SC_32x32, 0x0020&#41;;<br />&nbsp; &nbsp;bgInitMapSet&#40;0, &amp;map&#91;0&#93;, 64, SC_32x32, 0x0040&#41;;<br />&nbsp; &nbsp;bgInitMapSet&#40;0, &amp;map&#91;0&#93;, 64, SC_32x32, 0x0060&#41;;<br />...<br /></div>
<br />
<br />Why so much InitMapSet and an Init to BG1 (the second one), what do you really want to do ?
<br />
<br />You've got a tool named gfx2snes that can easily creates for you some map, tiles and palette, why do you not use it ?
<br />
<br />Take a look at <span class="posthilit">snes</span>-examples\graphics\Effects\Transparency project, there is a nice effect about a BG with another one just before it scrolling around the screen.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>EagleEye</b> [ Wed Jun 20, 2012 5:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't use gfx2snes because I'll need to dynamically load in maps into memory and I'm testing that out. Additionally, I need to generate my own palettes and graphics anyway. The idea is that each frame I'll upload the tilemap to VRAM after I've modified it to reflect the current map correctly. I had BG1 disabled because I couldn't get it to work right and I wanted it to look correct enough when run without modification.
<br />
<br />I'll look into Transparency's project. Thank you. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Combined Edit: I got layer 2 working using Transparency as an example, and then figured out how to use layer 1 instead. Unfortunately, it seems you can't call bgInitMapSet after you've called setMode. I have no clue how to switch out the tilemaps otherwise, so I guess I'll have to figure out how to turn off something, write to the tilemap, and turn that same something back on. In the meantime, I'm going to work on design, etc. I'll probably figure out what to do after a little break. (Here's my thing's mostly-fixed <a href="http://www.2shared.com/file/oVCGnOjd/GenerateBackground03.html" class="postlink">source</a>, for anyone interested.)
<br />
<br />P.S. scrY. pad0, and move are defined in the Transparency example, but never used.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>alekmaul</b> [ Wed Jun 20, 2012 9:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You need to be near VBL to change tile map.
<br />As you can see in google code of the lib, here is the code of initMapSet:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void bgInitMapSet&#40;u8 bgNumber, u8 *mapSource, u16 mapSize, u16 sizeMode, u16 address&#41; &#123;<br />&nbsp; &nbsp;setBrightness&#40;0&#41;;&nbsp; // Force VBlank Interrupt<br />&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;dmaCopyVram&#40;mapSource, address,mapSize&#41;;<br />&nbsp; &nbsp;if &#40;bgNumber != 0xff&#41;<br />&nbsp; &nbsp;&nbsp; &nbsp;bgSetMapPtr&#40;bgNumber, address, sizeMode&#41;;<br />&#125;<br /></div>
<br />So, if you only want to change tilemap,just use dmaCopyVram with correct parameters, just after VBL (wait for it with WaitForVBlank() for example)
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">P.S. scrY. pad0, and move are defined in the Transparency example, but never used.</div>
<br />Yep, will fix that for next release. You're right <img src="./images/smilies/icon_wink.gif" alt=";-)" title="Wink" />
<br />
<br />Also, I need help for doing something like pseudo3Dmode but i do not understand how matrix are working for <span class="posthilit">snes</span>, someone has a source code example like the squaresoft mode7 demo ? (<!-- m --><a class="postlink" href="http://www.unseen64.net/2010/10/28/squaresoft-mode-7-snes-tech-demo/">http://www.unseen64.net/2010/10/28/squa ... tech-demo/</a><!-- m -->)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>EagleEye</b> [ Wed Jun 20, 2012 11:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks. Now I'm pretty much set as far as <span class="posthilit">SNES</span> development. You've made this amazingly easy. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>juef</b> [ Mon Jul 16, 2012 1:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm having fun with this! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />
<br />
<br />So far, I've only completed the tutorials up to the animated sprites one. I managed to "merge" the previous input tutorial with the animated sprite, improved the display of input buttons, added a position display, and introduced acceleration and screen wrapping (is that the right word?) to the sprite.
<br />
<br />If anyone wants to see, download it <a href="http://goo.gl/abIh8" class="postlink">here</a>!
<br />
<br />The only thing I'm having trouble with so far is with the top and left side of the screen. There seems to be a "black bar" at the top, and the sprite disappears all at once on the left side of the screen, whereas it gradually hidden by the bottom and right side. I've tried toying with negative integer positions, alas with no success. Can anyone help?
<br />
<br />See <a href="http://www.youtube.com/watch?v=VwfGsrBaOvE" class="postlink">video</a> of the "game" in action!

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Intel Spectre bug?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Intel Spectre bug?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=5&amp;t=16978">http://forums.nesdev.com/viewtopic.php?f=5&amp;t=16978</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Jan 26, 2018 8:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If the supermajority of viewers <a href="https://pineight.com/mw/index.php?title=Ad_blocking" class="postlink">use this sort of security</a>, how are ad-supported websites supposed to stay in business? Credit card transaction fees are too high (starting at 30 cents) to make a separate transaction per page practical. Nor will people who discover an article through an inbound link (search, social media sharing, or a citation in another article) be willing to buy a month's unlimited reading or a 500-pack of page views on a site for $5 just to read one article. Or are web publishers supposed to go out of business, with their staff retraining for a completely unrelated industry, such as butchering as <a href="https://slashdot.org/comments.pl?sid=8593117&amp;cid=51271777" class="postlink">bingoUV on Slashdot cheekily suggested</a>?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Revenant</b> [ Fri Jan 26, 2018 8:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Run exclusively non-invasive (static image/text) ads or don't run ads at all. There's no third option that isn't actively hostile to users.<br /><br />(Despite what my last post probably suggested, I have no objection to turning off adblock selectively for sites such as NesDev which do this.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Jan 26, 2018 9:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I will consider continuing this discussion in a topic other than one about branch prediction side channels.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Sat Jan 27, 2018 1:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The modern computers designs are often too complicated and therefore it has all of these bugs, and also other problem too (such as too complicated).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Sat Jan 27, 2018 4:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Apologies in advance for semi-off-topic reply, but:<br /><br /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">I feel like Intel is about to have a very good sales year once they get a new CPU revision out. ;P</div><br />It depends on what you mean by &quot;CPU revision&quot;.  Quoting <a href="https://hardware.slashdot.org/story/18/01/26/1425245/intel-plans-to-release-chips-that-have-built-in-meltdown-and-spectre-protections-later-this-year" class="postlink">the source referenced within this link</a>, relevant part bolded/underlined:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The company has &quot;assigned some of our very best minds&quot; to work on addressing the vulnerability that's exploited by those attacks, Krzanich said on a conference call following Intel's quarterly earnings announcement. That will result in &quot;silicon-based&quot; changes to <strong><span style="text-decoration: underline">the company's future chips</span></strong>, he said.</div><br />What many folks (including me) expect is that &quot;future chips&quot; doesn't mean new steppings (&quot;new revisions&quot;) of existing CPUs, but rather a completely new CPU series.  In other words: &quot;yes, we acknowledge the problem, it is fixed in our Series 10 CPUs / Core i1337 Series, which will require you to buy a new CPU, a new motherboard, possibly new RAM, and possibly new software or OS license(s)&quot;.<br /><br />What many folks (including me) <strong><em>want</em></strong> are replacement CPUs with the bugs fixed in hardware (newer stepping), which is exactly what was done with <a href="https://en.wikipedia.org/wiki/Pentium_FDIV_bug" class="postlink">the FDIV bug</a> in late 1994 and <a href="https://en.wikipedia.org/wiki/Pentium_F00F_bug" class="postlink">the F00F bug</a> in late 1997 (the latter of which could be worked around in OSes fairly easily, but Intel would only send you a newer stepping if you actually contacted them/asked for it -- no recall was done).<br /><br />The severity of this problem strongly warrants either recalls or newer steppings released of existing Intel CPUs, and replacements offered for free.  But the flaws affect a large range of CPUs (i.e. models no longer manufactured / EOL'd), so there would need to be a limit.  My recommendation would be Ivy Bridge or newer, which is effectively 2012 and later.  Older CPUs could use software-based fixes (both OS and/or BIOS/UEFI), which would suck but be better than nothing.<br /><br />Fixing this problem in software is unacceptable as the performance impact is too severe: Intel's quoted numbers are substantially lower than what has been demonstrated in the real world.  Furthermore, Microsoft, Ubuntu Linux, HP, and Dell have already botched patches at least once (HP and Dell botched BIOS/UEFI updates, because understanding and solving this problem in software is stupidly complicated).<br /><br />Intel needs to bite the bullet and do what's right and most effective.<br /><br />For what CPUs are affected -- not just Intel -- <a href="https://en.wikipedia.org/wiki/Meltdown_(security_vulnerability)#Affected_hardware" class="postlink">the Wikipedia article</a> is pretty clear/thorough.  You may also want to update your GPU drivers (for example, NVIDIA pushed out GPU driver updates; their GPUs are not susceptible to Meltdown or Spectre, yet they <a href="https://techcrunch.com/2018/01/10/nvidia-ceo-clarifies-its-gpus-are-absolutely-immune-to-meltdown-and-spectre/" class="postlink">did something anyway</a> -- I still don't understand their statement).<br /><br />The approach I've advocated is simple: if you have a single-user system which you're extremely careful/safe with (software/application-wise), or you have servers in private/segregated environments (ex. corporate private network servers which only limited/trustworthy people in your IT department have access to), then the best choice right now is to do nothing.  If you run a hypervisor/HV, own/rent a VPS server/system (i.e. guest OS), have a server in the cloud (EC2, Google, Azure, etc.), have a multi-user server, or have a system where the software being used on the system cannot be trusted, or you're just simply &quot;extremely concerned&quot;, then you should patch and do BIOS/UEFI updates (the latter is for CPU microcode; this can be done at the OS level, but as Ubuntu Linux learned, botching this is worse than doing nothing) and pray nothing starts breaking.  <span style="text-decoration: underline">Have a rollback plan in place in case something goes awry</span> (use disk imaging software prior to OS updates, back up or download the prevision revision of BIOS/UEFI, etc.).<br /><br />Technology and computers are crap.  Let's go do something more useful and enjoyable, like, say, fishing.<br /><br />Edit: wanted to add clarification about how Meltdown and Spectre can be used in virtualised environments (i.e. VMs) and their relevant CVEs:<br /><br /><ul><li>Meltdown (CVE-2017-5754). VMs cannot exploit Meltdown to read memory of the hypervisor or other VMs. However, userspace processes in a VM can exploit Meltdown to read the VM kernel memory. Thus, patching Meltdown involves upgrading packages in your VM (yum update or apt-get update &amp;&amp; apt-get dist-upgrade, followed by a reboot), so that the Linux kernel is updated to one that enables page table isolation.</li><li>Spectre (CVE-2017-5753 and CVE-2017-5715). Both Spectre variants can theoretically be exploited by VMs to read hypervisor memory. Until security updates are applied, userspace processes in your VM will be able to read VM kernel memory even if software in the VM is patched, because the operating system updates depend on new CPU features that require CPU microcode and qemu/kvm/HV updates to be exposed to the VM.</li></ul>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Rahsennor</b> [ Sat Jan 27, 2018 6:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm sorry, but I don't understand the problem here. <em>The code segfaults.</em> Process dies, problem solved. If shared memory is the side-channel then the OS can just flush the cache or something when a program segfaults. What's the big deal?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>pubby</b> [ Sat Jan 27, 2018 6:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Speculatively executed code doesn't trigger segfaults. If it did, bounds checks would crash valid programs.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Jan 27, 2018 6:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The code <em>does not segfault</em> because the invalid access never isn't the path that ultimately is discovered to have been valid.<br /><br />It's something like:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if (thing_that_is_false_but_a_variable) {<br />&nbsp; &nbsp;putc(our_array&#91;evilptr&#91;0&#93;*0x1000&#93;);<br />}<br /></div><br /><br />The branch predictor is tricked into thinking that &quot;thing that is false but a variable&quot; is true, the read causes one slice of &quot;our array&quot; to be loaded into L1 cache, the branch predictor discovers that it predicted wrongly, but the L1 cache contents have already been filled from the invalid fetch.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sat Jan 27, 2018 7:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">What many folks (including me) <strong><em>want</em></strong> are replacement CPUs with the bugs fixed in hardware (newer stepping), which is exactly what was done with <a href="https://en.wikipedia.org/wiki/Pentium_FDIV_bug" class="postlink">the FDIV bug</a> in late 1994 and <a href="https://en.wikipedia.org/wiki/Pentium_F00F_bug" class="postlink">the F00F bug</a> in late 1997 (the latter of which could be worked around in OSes fairly easily, but Intel would only send you a newer stepping if you actually contacted them/asked for it -- no recall was done).</div><br />Both of those cases were much smaller in scope, a lot more practical to recall or replace.<br /><br />I mean, a recall would be nice but I really don't predict one happening. I'm sure there's already class action lawsuits begun for this, but I still wouldn't expect a recall to be the end result of them.<br /><br />What I do expect is a decade of leaks and patches and pain while the world slowly upgrades.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Sat Jan 27, 2018 11:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">I mean, a recall would be nice but I really don't predict one happening. I'm sure there's already class action lawsuits begun for this, but I still wouldn't expect a recall to be the end result of them.</div><br />I would be willing to compromise with Intel by saying: fine, don't issue a recall, instead for CPUs actively on the market/non-EOL'd, push to market new steppings that have these problems fixed at the silicon level -- and offer the ability for a customer to exchange/replace an existing CPU with a newer stepping.<br /><br />A lot of people *won't* return/exchange their CPUs due to the hassle and/or accept software patches (performance hits).  I learned that from the F00F bug, where Intel would allow you to exchange your F00F-susceptible CPU stepping but only if you contacted them and requested it (while simultaneously releasing a newer stepping that fixed the bug), they tended to try and &quot;offload&quot; the fix responsibility onto the OSes (proof of that <a href="https://www.itwire.com/security/81328-when-f00f-bug-hit-20-years-ago,-intel-reacted-the-same-way.html" class="postlink">is here</a>), which is what a lot of people did (a lot less hassle than pulling a CPU out + doing an RMA).  FDIV actually resulted in Intel issuing a full-on recall -- where (I suspect) most customers didn't bother.<br /><br />So yeah, I agree Meltdown/Spectre is a very different and much more impactful/serious issue given its scope and impact.  Though I would point out it's somewhat subjective.  For example, the F00F bug was less of a concern for single-user computers/systems, but was catastrophic for multi-user servers.  All it took was a single customer assembling/compiling + running <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">LOCK CMPXCHG8B EAX</tt> and they could hard-lock the entire server.  For me as a sysadmin working at ISPs providing shell accounts/other user-accessible services with hundreds of accounts per server, F00F was one of those the-shit-just-hit-the-fan nightmares.  (We did end up replacing our CPUs with new stepping versions bought fresh, exchanging the old, and then selling the Intel-provided replacements)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Rahsennor</b> [ Sun Jan 28, 2018 4:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">The code <em>does not segfault</em> because the invalid access never isn't the path that ultimately is discovered to have been valid.<br /><br />It's something like:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if (thing_that_is_false_but_a_variable) {<br />&nbsp; &nbsp;putc(our_array&#91;evilptr&#91;0&#93;*0x1000&#93;);<br />}<br /></div><br /><br />The branch predictor is tricked into thinking that &quot;thing that is false but a variable&quot; is true, the read causes one slice of &quot;our array&quot; to be loaded into L1 cache, the branch predictor discovers that it predicted wrongly, but the L1 cache contents have already been filled from the invalid fetch.</div><br /><br />D'oh. Okay, I'm with the program now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Sun Jan 28, 2018 5:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Intel Spectre bug?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />By the way, this just got announced, further supporting my recommendation to avoid patching for the time being (unless applicable to your environment), and push hard on getting Intel to do silicon-level fixes with updated CPU steppings.  Emphasis my own: <!-- m --><a class="postlink" href="https://tech.slashdot.org/story/18/01/28/213222/microsoft-issues-windows-out-of-band-update-that-disables-spectre-mitigations">https://tech.slashdot.org/story/18/01/2 ... itigations</a><!-- m --><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Microsoft has issued on Saturday an emergency out-of-band Windows update that disables patches for the Spectre Variant 2 bug (CVE-2017-5715). The update -- KB4078130 -- targets Windows 7 (SP1), Windows 8.1, all versions of Windows 10, and all supported Windows Server distributions. Microsoft shipped mitigations for the Meltdown and Spectre bugs on January 3. <span style="color: #00FF00"><strong>The company said it decided to disable mitigations for the Spectre Variant 2 bug after Intel publicly admitted that the microcode updates it developed for this bug caused &quot;higher than expected reboots and other unpredictable system behavior&quot; that led to &quot;data loss or corruption.&quot;</strong></span></div>

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
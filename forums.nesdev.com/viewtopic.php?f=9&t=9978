<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - MMC1 versions, WRAM disabling, and save 'durability'</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NES Hardware and Flash Equipment" href="http://forums.nesdev.com/feed.php?f=9" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - MMC1 versions, WRAM disabling, and save 'durability'" href="http://forums.nesdev.com/feed.php?f=9&amp;t=9978" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sat Sep 20, 2014 4:16 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=9">NES Hardware and Flash Equipment</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=9&amp;t=9978">MMC1 versions, WRAM disabling, and save 'durability'</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=9"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=9&amp;t=9978"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 13 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=9&amp;t=9978&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=9&amp;t=9978&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=9&amp;t=9978&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p110432"></a>
				<b class="postauthor">infiniteneslives</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110432">MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110432#p110432"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 01, 2013 12:27 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4832_1403414291.jpg" width="100" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Apr 04, 2011 11:49 am<br /><b>Posts:</b> 1593<br /><b>Location:</b> Boise, Idaho
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">So I've found what appears to be conflicting data on this dang old 'R' WRAM enable bit that was implemented in later versions of the MMC1.  What follows is a regurgitation of what I've seen in our various sources, and what I've found in experiment sorry if it's tough to read, but I don't know how to present it much better than what follows.  Fair warning, the text below is a bit of me rambling on... <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />  If you go to the end you'll see where I'm looking for input from the community on the best solution on how to implement the various behaviors on a single design.<br /><br />All sources I've found claim that the<a href="http://wiki.nesdev.com/w/index.php/MMC1#PRG_bank_.28internal.2C_.24E000-.24FFFF.29" class="postlink">'R' bit</a> exists on MMC1B and later.   I have found that the MMC1 is much more 'durable' to abusive power cycling when this 'R' bit is in place while testing on by CPLD boards.   The value of start up on MMC1B's is a separate debate, but I don't think it matters much.  The value at start up doesn't seem to affect save 'durability' much.  So it makes sense that Nintendo implemented this bit later in life. <br /><br />Additionally I found that my saves were fairly susceptible  I to data loss from abusive power cycling, measurably worse than the original carts even when I had this 'R' bit in place.  I tried several things to improve my boards so they were at least comparable to Nintendo's.  I deviated slightly from Nintendo's design and gave WRAM /WE signal to the mapper's control, vice directly wiring it to PRG R/W.  So my design will take /WE high whenever the /CE pin is high, and only passes through PRG R/W to /WE when /CE is low.  This appeared to significantly improve the save durability during abusive power cycling.<br /><br />Note,  I am working with SNROM and it's <a href="http://wiki.nesdev.com/w/index.php/MMC1#SNROM" class="postlink">'E' bits</a> which are implemented on all SNROM boards AFAIK, even on early mmc1 versions without the 'R' bit.  My E bits are internal to the CPLD since the SRAM I typically use only has a single chip enable (/CE).<br /><br />The issue/surprising thing I found was when testing the game 'Sweet Home'.  I don't have access to bootgod's DB at the moment, but from what I recall the cart there has a MMC1B2.  Which according to all sources should have the 'R' bit implemented.  But I found when playing this game is that the attribute tables appeared messed up after the opening title scene.  I haven't gone as far as dissecting the ROM and probably should have, but it appears that this game is relying on the 'R' bit to not exist.  And yes it works just fine with the 'E' bits fully operational.<br /><br />So a few questions come to mind.  Are there any emulators that implement the 'R' bit?  I know most don't implement the 'E' bits.  Does any one know of a game that relies on the later version of MMC1 with the 'R' bit?  I'm guessing that most emulators don't even bother with the 'R' bit since there isn't much function other than to improve save durability from what I can tell.<br /><br />So I've got a plan on how to implement things that is a sort of hybrid of early and late versions of the MMC1 and curious what people think about it.  Since the 'R' bit does improve save durability I'd like to keep it in my design.  While it is still decent without the 'R' bit, it only takes a min or two of heavy power cycling to loose a save slot or two on Zelda.  But from what I've found some games apparently rely on this bit to not exist during operation.  So I'm thinking about implementing the 'R' bit from start-up until the MMC1 is reset via 'PRG D7'.  At which point the 'R' bit would cease to have any effect.  In doing this I figure I'll have the most durable saves I can make (given the hardware limitations of my current design which I don't see reason to change), and also have the added compatibility since my small sampling of games only found titles that relied on the 'R' bit to not exist (I'm unaware of any titles that rely on it's existence).<br /><br />Thoughts?  Criticisms? Questions?<br /><br />All though now that I put all of this to words, I'm realizing that I may have a better logic saving alternative which is kind of already in-place with the 'E' bits.  If the 'R' bit improves the durability regardless of startup value, then why doesn't the 'E' bits themselves give me the same durability.  Perhaps there's power in numbers and the combo of all 3 logic bits gives me better chances of keeping /CE high during undefined power cycling.  One idea might be to just do away with the 'R' bit all together, and have the two separate E bits with the CHR in 4KB mode at s/u.  My CPLD actually starts up in 8KB mode  at the moment, so I've really only got the effect of one 'E' bit at power on.  Although I can't control that the rom most likely uses 8KB mode leaving me with effectively only one 'E' bit at power down either way.  I'd expect that saves are generally lost at power down and not power on.</div>

					
						<div class="postbody"><br />_________________<br />If you're gonna play the Game Boy, you gotta learn to play it right.  -Kenny Rogers</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4832"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p110435"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110435">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110435#p110435"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 01, 2013 12:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 12423<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">When a save is destroyed, how many bytes does it spray over?<br /><br />Has anyone here managed to implement Reed-Solomon coding on a 6502?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p110437"></a>
				<b class="postauthor">blargg</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110437">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110437#p110437"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 01, 2013 12:43 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=17.gif" width="60" height="69" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 27, 2004 8:33 am<br /><b>Posts:</b> 3711<br /><b>Location:</b> Central Texas, USA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I seem to remember finding that the first few bytes of SRAM were most susceptible to corruption. I did some kind of hardware patch to my devcart to make basically unaffected by the most vigorous power on/off I could abuse it with. OK, looks like I put a 100 ohm resistor in parallel with the 10K resistor that goes from the SRAM's GND to pin 6 on the MMC1. I do remember experimenting with various values and abusing the power switch until I found one that was ironclad.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=17"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p110438"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110438">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110438#p110438"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 01, 2013 12:48 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 2348<br /><b>Location:</b> seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"> I don't have access to bootgod's DB at the moment, but from what I recall the cart there has a MMC1B2</div> You recall correctly.<br /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">So a few questions come to mind. Are there any emulators that implement the 'R' bit? </div> Nestopia-1.4.0h does. I don't see the corruption you describe, though.<div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">why doesn't the 'E' bits themselves give me the same durability</div>In an authentic MMC1, the E bit goes to the 6264's /CE pin, and the CHR bits are believed to be random on power up (and so there's a 50% chance of not being protected). Obviously you could do differently...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p110442"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110442">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110442#p110442"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 01, 2013 2:37 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38.jpg" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 6040<br /><b>Location:</b> Jongny, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">In an authentic MMC1, the E bit goes to the 6264's /CE pin, and the CHR bits are believed to be random on power up (and so there's a 50% chance of not being protected). Obviously you could do differently...</div><br />As already discussed in the SRAM initialisation thread, undefined and random are very different.<br />When powered up an uninitialized flip flot will randomly pick a '1' or a '0', but from personal experience I can tell the same flip flop will likely always pick the same value.<br /><br />So your sentence would rather be : With a given MMC1 you have 50% of chances of being protected (always), and 50% of chances of not being protected (always).<br />However those probabilities are probably not 50% and 50%. This could be easily tested with a program that resides in main RAM and reads the data from various cartridges with MMC1s in them that are inserted (a very clever trick invented by Blargg).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p110458"></a>
				<b class="postauthor">3gengames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110458">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110458#p110458"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 01, 2013 6:43 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly 65024U</td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Mar 27, 2010 12:57 pm<br /><b>Posts:</b> 2132
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">SNROM for me disabled WRAM on the PRG-register bit, not the CHR-bit? At least thats what I wrote my program to use...and that's what it reported. Disableable:Yes. It was an MMC1B2 from Open Golf.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4311"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p110462"></a>
				<b class="postauthor">infiniteneslives</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110462">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110462#p110462"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Apr 01, 2013 11:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4832_1403414291.jpg" width="100" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Apr 04, 2011 11:49 am<br /><b>Posts:</b> 1593<br /><b>Location:</b> Boise, Idaho
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">When a save is destroyed, how many bytes does it spray over?</div><br />Not sure, my testing was pretty simple.  I just filled all three save slots of Zelda and power cycled repetitively.  It seemed like the last slot was usually the first to go, then the second, then the first.  I'm not sure if that's how they were arranged in actual addressing though.<br /><br /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">OK, looks like I put a 100 ohm resistor in parallel with the 10K resistor that goes from the SRAM's GND to pin 6 on the MMC1.</div><br />Effectively a 100 ohm then, (10k &amp; 100ohm in parallel = 99 ohms)   I'm using a 10k because that's what Nintendo did and it's a nice large value that still works.  100 ohms is actually pretty small when the MMC1 outputs a high ~4.5v on your 99ohm pull down you're drawing (I = V/R, 4.5v/100ohm = ~45mA)  That's quite a bit of current...  It probably can't actually supply that much current because your stressing that line driver pretty hard only a matter of time before it gives out I'd guess.  (I'd also guess the mmc1 gets warm to the touch)  It would pull down a lot quicker though, and might be why you saw improved 'save' durability.  A 10k gives you 0.5mA which is a lot safer current for a unknown digital IC driver.<br /><br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">So a few questions come to mind. Are there any emulators that implement the 'R' bit? </div> Nestopia-1.4.0h does. I don't see the corruption you describe, though.</div><br />Interesting, wonder if I have some other bug going on...  I'll have to dissect the rom and try to figure out what's triggering the issue. I'm literally removing comments to select the 'R' (aka 'B' per kevtris) in my implementation and confirmed I can remove and re-insert the issue in sweet home, for anyone curious:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;//MMC1A has no B bit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp;//if ((prg_addr == 2'b11) &amp; (prg_ce == 1) &amp; (m2 == 1))&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;//MMC1B su low -&gt; 0 enabled&nbsp; 'B'&nbsp; (Deemed best saves surprisingly)<br />&nbsp; &nbsp;if ((B == 0) &amp; (prg_addr == 2'b11) &amp; (prg_ce == 1) &amp; (m2 == 1))&nbsp; &nbsp;&nbsp; &nbsp;<br /><br />&nbsp; &nbsp;//MMC1C su low -&gt; 0 disabled 'Bn' (probably just as good as B, hard to tell)<br />&nbsp; &nbsp;//if ((Bn == 1) &amp; (prg_addr == 2'b11) &amp; (prg_ce == 1) &amp; (m2 == 1))&nbsp; &nbsp;<br />&nbsp; &nbsp;begin //enabled <br />&nbsp; &nbsp;&nbsp; &nbsp;//w_ce_n = 1'b0; //raw signal to WRAM on non-SNROM boards<br />&nbsp; &nbsp;&nbsp; &nbsp;w_ce_int = 1;&nbsp; &nbsp; //used for SNROM anding CHR A16 signal<br />&nbsp; &nbsp;&nbsp; &nbsp;w_we = prg_rw;&nbsp; &nbsp;//allows for PCB simplification and possibly better save protection<br />&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;else <br /><br />&nbsp; &nbsp;begin //disabled<br />&nbsp; &nbsp;&nbsp; &nbsp;//w_ce_n = 1'b1; //raw signal to WRAM on non-SNROM boards<br />&nbsp; &nbsp;&nbsp; &nbsp;w_ce_int = 0;&nbsp; &nbsp; //used for SNROM anding CHR A16 signal<br />&nbsp; &nbsp;&nbsp; &nbsp;w_we = &nbsp; &nbsp;&nbsp; 1;<br />&nbsp; &nbsp;&nbsp; &nbsp;end<br /><br />...<br /><br />always @ (w_ce_int)&nbsp; <br />begin<br />&nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;//combine w_ce signal and ca16 signal to create a single WRAM /CE output<br />&nbsp; &nbsp;if ((w_ce_int == 1) &amp; (ca16 == 0))&nbsp; //&nbsp; &nbsp; CE==1 and /CE==0<br />&nbsp; &nbsp;&nbsp; &nbsp;begin //enabled<br />&nbsp; &nbsp;&nbsp; &nbsp;w_ce_n = 0;&nbsp; &nbsp; &nbsp; //my SRAM only has one chip enable<br />&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;else<br />&nbsp; &nbsp;&nbsp; &nbsp;begin //disabled<br />&nbsp; &nbsp;&nbsp; &nbsp;w_ce_n = 1;<br />&nbsp; &nbsp;&nbsp; &nbsp;end<br /><br /></div><br /><br />Here's what I'm seeing:<br /><img src="https://dl.dropbox.com/u/18341918/IMG_4885.jpg" alt="Image" /><br /><br /><img src="https://dl.dropbox.com/u/18341918/IMG_4887.jpg" alt="Image" /><br />The opening scene is fine, and the 'door' scene is good.  Since Nestopia doesn't see the issue I'm guessing I have something else going on...<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">why doesn't the 'E' bits themselves give me the same durability</div>In an authentic MMC1, the E bit goes to the 6264's /CE pin, and the CHR bits are believed to be random on power up (and so there's a 50% chance of not being protected). Obviously you could do differently...</div><br />Yeah that's what I'm thinking mine's defaulting to E bits enabled in 8KB.  But I may try s/u E bits disabled and test each CHR mode although I'm guessing I won't be able to easily measure the difference by my current testing means.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">So your sentence would rather be : With a given MMC1 you have 50% of chances of being protected (always), and 50% of chances of not being protected (always).  However those probabilities are probably not 50% and 50%. This could be easily tested with a program that resides in main RAM and reads the data from various cartridges with MMC1s in them that are inserted (a very clever trick invented by Blargg).</div><br />Relying on the 50% is basically asking for failure...  There's no need to measure the exact amount of failure <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />   Either way I don't intend to exactly emulate the MMC1's and variants including it's random unknowns between one chip and another due to fabrication process variations.  I can control register start up low or high in a CPLD, so I'm trying to use that to my advantage.<br /><br /><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">SNROM for me disabled WRAM on the PRG-register bit, not the CHR-bit? At least thats what I wrote my program to use...and that's what it reported. Disableable:Yes. It was an MMC1B2 from Open Golf.</div><br />Indeed there are two separate enables for SNROM boards.  MMC1 pin6 controls CE, address decoding of WRAM and the 'R' bit depending on the revision.  On SNROM the CHR A16 line *always* controls the WRAM /CE for 'software disabling' of WRAM even on mmc1 variants without the 'R' bit.<br /><br />So your test rom is only verifing one of the chip enables (/CE to be specific).  You're getting what you expect though because BOTH chip enable pins must be enabled to activate the SRAM.  So you're really only testing one disable method.  If you additionally tested the 'R' bit separately then you'd determine whether or not the mmc1 was 'old' (without the 'R' bit) or 'new' (with the 'R' bit).  Either way the CHR A16 enable bits 'E' exist, it's not an either/or situation.</div>

					
						<div class="postbody"><br />_________________<br />If you're gonna play the Game Boy, you gotta learn to play it right.  -Kenny Rogers</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4832"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p110464"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110464">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110464#p110464"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Apr 02, 2013 1:22 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 2348<br /><b>Location:</b> seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">For curiosity's sake, I looked at an execution trace. Before it ever touches WRAM, Sweet Home writes the following registers: <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">$A000←$00 $C000←$00 $8000←$0E $8000←$0E $E000←$0B $E000←$00 $E000←$0A $E000←$0A</tt>. So I'm hard pressed to see how it would be different from any other MMC1B game.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p110466"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110466">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110466#p110466"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Apr 02, 2013 2:02 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38.jpg" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 6040<br /><b>Location:</b> Jongny, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Relying on the 50% is basically asking for failure... There's no need to measure the exact amount of failure  Either way I don't intend to exactly emulate the MMC1's and variants including it's random unknowns between one chip and another due to fabrication process variations. I can control register start up low or high in a CPLD, so I'm trying to use that to my advantage.</div><br /><br />We can't know if we don't measure it. Pehaps those flip flops are made in a way so they always start in a &quot;set&quot; state, which means you'd always be protected.<br /><br />Another option could be that Nintendo tests their chips, and chips with an initial &quot;1&quot; state would be soldered on SNROM carts while chips with an initial &quot;0&quot; state would be attributed to other carts... while for some reason I'm myself not very convinced with this theory...<br /><br />I could write such a test (it would only work with SNROM boards and with MMC1 games with 128kb of CHR unfortunately) but I don't have loads of carts to test it on (5-6 at the very most). Someone that owns &gt;30 of such games (such as bootgod) should do the test instead.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p110468"></a>
				<b class="postauthor">Quietust</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110468">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110468#p110468"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Apr 02, 2013 6:21 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 10:59 pm<br /><b>Posts:</b> 1188
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Pehaps those flip flops are made in a way so they always start in a &quot;set&quot; state, which means you'd always be protected.</div><br />And that would actually be rather simple to do in NMOS - a flip-flop is just two cross-coupled inverters, and since NMOS inverters are just a pull-down transistor and a pull-up resistor, giving one of those resistors a lower resistance would cause that side to go high before the other one does, forcing a particular power-on state.</div>

					
						<div class="postbody"><br />_________________<br />Quietust, QMT Productions
<br />P.S. If you don't get this note, let me know and I'll write you another.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p110470"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110470">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110470#p110470"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Apr 02, 2013 7:47 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38.jpg" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 6040<br /><b>Location:</b> Jongny, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Are the MMC1 made with NMOS or CMOS technology ?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p110680"></a>
				<b class="postauthor">blargg</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110680">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110680#p110680"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 07, 2013 9:50 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=17.gif" width="60" height="69" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 27, 2004 8:33 am<br /><b>Posts:</b> 3711<br /><b>Location:</b> Central Texas, USA
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">blargg wrote:</div><div class="quotecontent">OK, looks like I put a 100 ohm resistor in parallel with the 10K resistor that goes from the SRAM's GND to pin 6 on the MMC1.</div><br />Effectively a 100 ohm then, (10k &amp; 100ohm in parallel = 99 ohms)   I'm using a 10k because that's what Nintendo did and it's a nice large value that still works.  100 ohms is actually pretty small when the MMC1 outputs a high ~4.5v on your 99ohm pull down you're drawing (I = V/R, 4.5v/100ohm = ~45mA)  That's quite a bit of current...  It probably can't actually supply that much current because your stressing that line driver pretty hard only a matter of time before it gives out I'd guess.  (I'd also guess the mmc1 gets warm to the touch)  It would pull down a lot quicker though, and might be why you saw improved 'save' durability.  A 10k gives you 0.5mA which is a lot safer current for a unknown digital IC driver.</div><br />Looked at this on a scope and you're right; the CE to the SRAM only goes to about 2.1V. I'd have left just the 10K in there except the SRAM would get corrupt often. With the 100 ohm it works and doesn't get corrupt when powering off/on. MMC1 isn't hot. It's only driving this on SRAM accesses. Anyway, you're right, it is a hack, but might be useful for someone who wants to make the tradeoff.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=17"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p110681"></a>
				<b class="postauthor">infiniteneslives</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p110681">Re: MMC1 versions, WRAM disabling, and save 'durability'</a></div><div style="float: right;"><a href="./viewtopic.php?p=110681#p110681"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Apr 07, 2013 10:20 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4832_1403414291.jpg" width="100" height="52" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Apr 04, 2011 11:49 am<br /><b>Posts:</b> 1593<br /><b>Location:</b> Boise, Idaho
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">So it looks like the MMC1's capable of about 20mA max.  Did you ever try something like a 500ohm resistor?  That should still pull down quickly and put a 10ma load on the MMC1.  A 1k with ~5ma sounds better, but might not be as quick to give you more durable saves.<br /><br />I'm surprised you didn't get good saves with the 10k though.  Nintendo used 10k's after all and there are no issues. Did you use your own diodes?  Or were they already on the board?  You NEED to use Schottky diodes.  Standard rectifier diodes aren't fast enough, plus they have a larger foward biased voltage drop ~0.7v compared to ~0.2v.  I tried a standard diode before for saves and it failed often, Schottky's are key.</div>

					
						<div class="postbody"><br />_________________<br />If you're gonna play the Game Boy, you gotta learn to play it right.  -Kenny Rogers</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4832"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=9&amp;t=9978"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=9"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=9&amp;t=9978"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 13 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=9">NES Hardware and Flash Equipment</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="9978" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9" selected="selected">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
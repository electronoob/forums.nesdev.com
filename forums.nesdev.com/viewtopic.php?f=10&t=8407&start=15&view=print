<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Convert IPS patch for (J) release to (E) possible?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Convert IPS patch for (J) release to (E) possible?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=8407">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=8407</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jpx72</b> [ Thu Dec 22, 2011 6:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Isn't Megaman 3 (E) the one with lots of bad screen splitting? Like, with parts that jump like crazy?</div>
<br />I don't remember anything like that when I played it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Thu Dec 22, 2011 7:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />He's talking about what can be seen at 44:02-44:16 of this video: 
<br /><!-- m --><a class="postlink" href="http://www.archive.org/details/MegaMan3_eu_SS_4508">http://www.archive.org/details/MegaMan3_eu_SS_4508</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Thu Dec 22, 2011 10:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yes there is crazy buggy screen split during the last boss, but I'm pretty sure those were fixed in the REV-A version of the game.
<br />I think the common Mega Man 3 (E) rom floating arround comes from the (PRG1) / REV-A version of the game, but the cart I have is a (PRG0) game with the bug.
<br />
<br />Also, if you play Mega Man 6 (U) on a PAL NES, there will be several bugs, such as the sun in Tomahawk Man's stage not staying in place as it's supposed to.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jpx72</b> [ Tue Jan 03, 2012 3:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The Megaman 2 MMC3 hack Kasumi did works perfectly. Any chance of making the Megaman 1 in the near future too? 
<br />...bump

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Tue Jan 03, 2012 4:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If that's to me, probably not anytime soon like I said earlier. The stars were aligned perfectly for you when I ported the patch. I had nothing to do, was frustrated with my game but still wanted to code, and couldn't sleep.
<br />
<br />It's not hard, just time consuming. Detailed instructions in case anyone else feels like trying:
<br />
<br />Compare patched jp rom to unpatched jp rom. Find what was changed. I used a program for this. Alternatively, just learn the IPS file format which will tell you exactly what was changed and where.
<br />
<br />Say this string of bytes at $0100
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$40 $50 $30 $51 $80 $87;&#40;not real code obviously&#41;<br /></div><br />was changed to this <br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$30 $80 $80 $51 $80 $87;&#40;Not real code&#41;<br /></div>
<br />You search for that EXACT unchanged string in the Megaman Pal rom. (Make sure to put enough of the byte stream that there is exactly one result. Also, don't worry if it's in a slightly different location.) If it is identical for all the bytes that were changed in the jp rom, change those bytes to the ones in the patched jp rom. If you cannot find an identical string in the PAL rom,  you'll need to do the reset vector update and compare debug logging as described below.
<br />
<br />Do this for all changes made by the patch. 
<br />
<br />Then run the patched jp rom in Nintendulator's debugger. Step, and reset. The first address is the reset vector. Search for the byte stream starting there. 
<br />
<br />Then try to find that byte stream it in the PAL rom. Replace the reset vector's address to the address of that byte stream.
<br />
<br />If all goes well, it'll just work. If not, run the patched JP rom in PAL mode. Run the PAL rom in PAL mode. Log both from reset for around two frames. 
<br />
<br />Compare the debug output. The code run should be more or less identical. If the patched PAL rom, ends up someplace with a lot of breaks, look at the patched jp rom's output. Look for what should have happened. Search for the byte stream where it should have ended up. Fix the address in the PAL rom, or fix what it was supposed to do right before.
<br />
<br />I don't remember ever having to do that for the MM2 rom, but in case you need it, it's there.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Sun Jan 22, 2012 8:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Happy New Year!
<br />
<br />Here's Megaman (E) to MMC3: <!-- m --><a class="postlink" href="http://www.mediafire.com/?3jr4g1rxrbvecav">http://www.mediafire.com/?3jr4g1rxrbvecav</a><!-- m -->
<br />
<br />Test this one <strong><em>VERY</em></strong> thoroughly. There were some bytes changed from the original Rockman rom in the patch where I could not find the corresponding bytes in the (E) rom. So I didn't make those changes at all. It <em>seems</em> to work fine, but I have done very little testing.
<br />
<br />Should you encounter a bug/crash, what would be really helpful is a Nintendulator movie file that does all the necessary actions to cause the crash. Then I can probably find those bytes in the (E) rom, and hopefully it will work then or I'll be stumped.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jpx72</b> [ Mon Jan 23, 2012 10:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's a wonderfull New Year's gift! THANK YOU! I already started testing the Rom and I'll report back immediately after I encounter any weird behavior! 
<br />Thank you so much for your work!

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
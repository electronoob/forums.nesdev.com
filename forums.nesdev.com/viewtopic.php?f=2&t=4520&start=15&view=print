<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - My first foray into making cinema displays</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">My first foray into making cinema displays</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4520">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4520</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Fri Oct 31, 2008 2:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think it's pretty cool! Although I'd add more to it, and like you said, explain what's happening a little more. But pretty cool!
<br />
<br />I like the parallax, and it does remind me of Ninja Gaiden. But really the only thing that reminds me of Ninja Gaiden is the fact that it's a cutscene with parallax effects. It's not like a huge rip-off or anything because the content really isn't really Ninja Gaiden-esque at all.
<br />
<br />I'll be having two kinds of sequences in my game. One kind is polygon based (Both BG and Sprites) with support for 60- pre-defined tiles for sprites, but I could probably do it for BG too (I have quite a bit of work to do to support pre-defined tiles and for sprites in general, but the polygonal BG part works). The other kind is all pre-defined, like yours is. This works better for story parts than the 3D does.
<br />
<br />However, when the game play stops for characters to speak to each other, it remains with in-game graphics and a text box with their portrait comes up. So I guess that counts as like 3 types of cutscenes. I like having them all together and not just one type of cutscene.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>strangenesfreak</b> [ Fri Oct 31, 2008 5:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks like a nice start.  :)  However, I think the main character looks a bit too cartoony for what I assume to be a survival horror game, especially if you compare it to the zombie in the title screen.  A pen on his shirt appears when he calls his cell phone, but it's not there in his other poses.  The cell phone is hard to see, and I think it should be a different color, maybe by using an extra sprite.
<br />
<br />It looks like you used color $18 for the guy's skin tone, but I don't think that's a good color, especially since it could either be biased towards orange or green depending on the palette or TV.  If I were you, I'd use either colors $17, $06, or $07, which are all decent African skin tones, but $17 can be a bit too red in some palettes.
<br />
<br />But considering the impressive zombie in the title screen, I'm sure you guys could touch it up a bit.  It looks really promising so far.  :D  Just curious, but have you ever thought about the gameplay yet?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Fri Oct 31, 2008 6:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@Banshaku:
<br />They're really fun to make, because there are always ideas that can come to your head for them.
<br />
<br />@Bregalad:
<br />Yeah, I had to upgrade my mapper. Luckily it was only going from NROM to CNROM though, so it wasn't a headache hehe Can't wait to see what kind of ideas you have for a cinema system : )
<br />
<br />@noattack:
<br />That's a good thing though, it's always nice to have some people that will give some different ideas that I may have never thought of.
<br />
<br />@Celius:
<br />Dude, that sounds really cool to have all those different means of propelling a story forward! If I could code more tightly, I would probably think of employing something like that sometime. Maybe one of these days ; )
<br />
<br />@strangenesfreak:
<br />Thanks for the suggestions on the palettes! I really don't want him to be so light skinned, and be more of a dark skin color. I'll fiddle with the colors that you recommended for sure. 
<br />
<br />As for gameplay, it is an overhead game. Basically on every screen two zombies will pop up from the ground and break out after you. As the clock counts down further to the time that your friend picks you up, the zombies will gain more speed. It's not going to be an incredibly long game, but there will be things like real-time item selection via the menu at the top of the screen. There's not alot to it honestly, but it's the most complex game I've been working on so far hehe We'll see how this turns out : )
<br />
<br />Thanks for all the really great comments guys. It's appreciated.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>smkd</b> [ Fri Oct 31, 2008 8:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Seconding the cool zombie comment.  It works pretty well with the palette transition.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>SecretServiceDude</b> [ Fri Oct 31, 2008 10:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The cardinal rule of having a token black guy in a story is that he can do anything except survive all the way to the end. To do otherwise would be most <em>avant-garde</em>. <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />
<br />
<br />And please, please, please have a scene where all the zombies bust out the <em>Thriller</em> dance as they come to eat your brains. That would take your game way over the top and make it the stuff of legend.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Nov 01, 2008 2:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Yeah, I had to upgrade my mapper. Luckily it was only going from NROM to CNROM though, so it wasn't a headache hehe Can't wait to see what kind of ideas you have for a cinema system : ) </div>
<br />I didn't say I have ideas, I said I'd like to have ideas ! That's not the same thing.
<br />It's good you get cinema cutscenes with only CNROM. My game uses CNROM, I've planned to take 3 CHR banks for gameplay, and one for title screen. The second half for title screen is still free, so maybe I could come with some really basic cinama cutscenes if I can get economical in tiles enough for them to fit, but I don't think this will happen unless I really have a lot of free space when the game is completed. I'll probably use that space for a map that shows between levels instead, or just for the ending.
<br />My game won't have that much story exept textboxes with the portrait, which is already good, considering most NES games doesn't have that. Even RPGs often have textboxes without the portrait !
<br />
<br />PS : About cutscenes, I was saying I wondered if there is another way than the "horizontal blue band" thing. Doing them fullscreen waste tiles, and doing a blue horizontal blue bar is too much Ninga Gaiden like.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Sat Nov 01, 2008 7:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Roth wrote:</div><div class="quotecontent">@Banshaku:<br />They're really fun to make, because there are always ideas that can come to your head for them.</div>
<br />
<br />Yeah, I know.  The last time I did something similar was while I was still learning programming, under dos while coding in pascal.  That was 15 years ago. Since then, I didn't do much game programming.  
<br />
<br />Now I'm restarting to do programming at home so I hope to make something interesting again.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Sat Nov 01, 2008 3:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Firstly, it seems that palette color $07 is <em>exactly</em> what I was wanting, so thanks a ton for the recommendation strangenesfreak : )
<br />
<br />The main problem I'm running into now is this: Is there a way to completely destroy sprites so they are no longer needed? I have some strays that appear because the amount of sprites used in the cutscene are greater than those going on during initial gameplay. Any advice would be awesome.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>SecretServiceDude</b> [ Sat Nov 01, 2008 4:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Roth wrote:</div><div class="quotecontent">The main problem I'm running into now is this: Is there a way to completely destroy sprites so they are no longer needed? I have some strays that appear because the amount of sprites used in the cutscene are greater than those going on during initial gameplay. Any advice would be awesome.</div>
<br />Can you set their y-positions to some value that puts them below the visible display area, such as $FE?
<br />
<br />EDIT: The y-position stored in sprite RAM is actually one less than the y-position displayed onscreen. That's why I suggested $FE instead of $FF. If you set the y-position to $FF in sprite RAM, the sprite will actually be displayed at y=0. This shouldn't matter on NTSC because the first 8 scanlines aren't displayed anyway, but using $FE strikes me as a better way to ensure the sprite is <em>completely</em> offscreen.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Sat Nov 01, 2008 5:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, the problem with that solution is that there are some sprites that will already be residing in that position, as well as up at 00,00. I suppose I can just find a way to throw them somewhere, though I would rather be able to just get rid of all that are able to be seen. It seems even if I try something like this first:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;tax<br />:&nbsp; &nbsp;sta left_p_head,x<br />&nbsp; &nbsp;inx<br />&nbsp; &nbsp;cpx #$00<br />&nbsp; &nbsp;bne :-<br /></div>
<br />
<br />... it doesn't do much good either. So I don't even know if it's possible to do something 'destroying' sprites, but it would be nice if there were a way.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>smkd</b> [ Sat Nov 01, 2008 5:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Lots of games do something like this at the end of the frame to 'destroy' all sprite tiles.  If they can't be seen that's all that matters.
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">SpriteOff:<br />&nbsp; &nbsp;LDA #$EF&nbsp; &nbsp;;to store<br />&nbsp; &nbsp;LDY #$00<br />@loop:<br />&nbsp; &nbsp;STA OAM_YPOS,y&nbsp; &nbsp;;store offscreen<br />&nbsp; &nbsp;INY&nbsp; &nbsp;&nbsp; &nbsp;;next sprite<br />&nbsp; &nbsp;INY<br />&nbsp; &nbsp;INY<br />&nbsp; &nbsp;INY<br />&nbsp; &nbsp;BNE @loop<br /><br />&nbsp; &nbsp;RTS</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Sat Nov 01, 2008 6:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So is your problem that some sprites during the cutscenes are carried over to gameplay because there aren't enough ones used during gameplay to completely overwrite the ones from the cutscenes? If so, that sounds like you're not clearing the sprite page before you write to it, which would be wise to do when switching "modes". Also, you should use the concept of "objects" to draw sprites on the screen every frame, overwriting all 256 bytes of the sprite page each frame. If you use this, you can have a list of all the objects that will be drawn on screen, and once they're drawn, clear out the rest with $FF. Sorry if that doesn't make any sense.
<br />
<br />EDIT: smkd, that seems like a pretty wasteful way to do it. Why not overwrite the sprites previously displayed during the sprite drawing routine and when all that are meant to be displayed are drawn, then clear the remainder?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Nov 01, 2008 6:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The MSX has an interesting sprite feature: When a sprite is placed at a certain coordinate, all sprites after it are ignored. The NES doesn't have such a feature, so you have to manually hide all the sprites you're not using, preferably at the bottom of the screen.
<br />
<br />Now, I'm not sure I got what your sprite problem is, but it seems to me like you are using them in a very hardcoded way. Most games have dynamic ways of drawing sprites (routines to draw them based on coordinates of objects and sprite definitions), because of sprite cycling and many other reasons, and they are rendered every frame, even if they didn't change since the last frame. Just look at the OAM area of any game in FCEUXD and you'll see how crazy that part of the memory is.
<br />
<br />Anyway, a quick fix for you would probably be to clear all the sprites before using them, with code similar to what smkd suggested. However, as Celius observed, the optimal solution would be to use all the sprites you want and only clear the remaining ones, but that may require you to do heavier changes to your program.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Sat Nov 01, 2008 6:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Alright, thanks for the input guys. I was able to get it to work by just clearing the ones that aren't going to be used at the time. Though, I'm still unsure of what you guys mean by 'objects' in this case.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>smkd</b> [ Sat Nov 01, 2008 6:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's wasteful, sure.  In my game I take the current 'OAMINDEX' (next available tile) and work backwards so that only used sprites get cleared.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
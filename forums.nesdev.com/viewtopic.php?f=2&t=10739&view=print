<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NES Zelda Multicart</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NES Zelda Multicart</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=10739">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=10739</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tormenter</b> [ Fri Nov 29, 2013 7:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>NES Zelda Multicart</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Interested in doing something like this game I found on eBay.  Not to sell, I just like making my own reproductions so that I do not have to pay crazy prices for them.  He created 4 of the Zelda hacks into a single cart, with a menu or something so that you can switch between games.  Any idea how this was done??<br /><br />Edit:  Actually he stated that you can hit the reset button, and then it switches to a different rom on the cart somehow?<br /><br /><img src="http://i.ebayimg.com/t/NEW-NES-The-Legend-Of-Zelda-4-In-1-Multicart-One-Of-A-Kind-Check-It-Out-/00/s/MTAwMFg3NTA=/z/JXAAAOxy4jxSLRSE/$(KGrHqRHJDoFIpwEbVObBSLRSDnJ6g~~60_57.JPG" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Nov 29, 2013 8:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The cartridge probably <a href="http://forums.nesdev.com/viewtopic.php?p=99137#p99137" class="postlink">detects reset by loss of oscillation on the M2 (CPU clock) pin</a>, and this feeds a counter that controls the upper address lines. Standard operating procedure for pirate multis.<br /><br />What I want to see is The Legend of Zelda/The Legend of Bagger Vance/The Legend of Korra/The Legend of Sleepy Hollow multi, with hidden extras <a href="https://www.youtube.com/watch?v=dAc-Cw8G7UE" class="postlink">The Legend of Max</a>, <a href="http://pics.pineight.com/dwi/The%20legend%20of%20BAG.zip" class="postlink">The Legend of Bag</a>, and <a href="https://www.youtube.com/watch?v=jwbH0zbkUK0" class="postlink">The Legend of Art (NSFW)</a>. (<a href="https://www.youtube.com/watch?v=nJEJ5n0z73k" class="postlink">period</a>)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>NESHomebrew</b> [ Fri Nov 29, 2013 8:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This triggered my memory of a post I saw on hackaday. <a href="http://hackaday.com/2011/05/19/nes-multi-cartridge/#more-43216" class="postlink">http://hackaday.com/2011/05/19/nes-multi-cartridge/#more-43216</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Nov 30, 2013 10:04 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The cartridge probably <a href="http://forums.nesdev.com/viewtopic.php?p=99137#p99137" class="postlink">detects reset by loss of oscillation on the M2 (CPU clock) pin</a>, and this feeds a counter that controls the upper address lines. Standard operating procedure for pirate multis.</div><br />I wonder how they do it in Atari 2600 cartridges, since the cartridge connector in that system doesn't provide any fancy signals... It has 8 data lines, 13 address lines, GND and +5V (plus a &quot;shield ground&quot; which I have no idea what it's used for). How do you detect a reset with that? I don't have any carts that do this with me anymore, but I know for a fact they exist because I had a couple of them when I was a kid.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Sat Nov 30, 2013 10:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Note that you can detect a reset in software pretty easily. The OP is talking about detecting a reset in hardware only so you can bank between multiple unmodified ROM images within a single cart. I'm not 100% sure what you are referring to with the 2600 carts.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Nov 30, 2013 11:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">I wonder how they do it in Atari 2600 cartridges, since the cartridge connector in that system doesn't provide any fancy signals... It has 8 data lines, 13 address lines, GND and +5V (plus a &quot;shield ground&quot; which I have no idea what it's used for). How do you detect a reset with that? I don't have any carts that do this with me anymore, but I know for a fact they exist because I had a couple of them when I was a kid.<br /></div>I took an Argentinian pirate multicart for the 2600 apart earlier this year: <!-- l --><a class="postlink-local" href="http://forums.nesdev.com/viewtopic.php?p=107406#p107406">viewtopic.php?p=107406#p107406</a><!-- l --><br />(They use Vcc to clock the counter, and use a diode-capacitor to make a &quot;UPS&quot;-ed supply for the counter). My 2600 doesn't have a reset button, per se...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Nov 30, 2013 4:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">The OP is talking about detecting a reset in hardware</div><br />tepples did suggest a hardware solution.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I'm not 100% sure what you are referring to with the 2600 carts.</div><br />tepples' solution might work on an NES, but since the 2600 doesn't make the same signals available to the cartridge, I was wondering how they handled the same situation in multicarts for that system that require power cycles to select games. BTW, thanks lidnariq for the explanation.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Nov 30, 2013 8:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Couldn't the hardware just watch the CPU's A0 line? It would be oscillating whenever it was running, but I'm pretty sure stopped when held in reset.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Nov 30, 2013 9:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, <a href="http://forums.nesdev.com/viewtopic.php?p=99436#p99436" class="postlink">A0 would be fine</a> too, <a href="http://bootgod.dyndns.org:7777/profile.php?id=1362" class="postlink">Maxi 15</a> uses that.<br />You'd need to use a lowpass that was at most 1/4 the frequency as the one for M2, because A0 could remain low for two full instruction cycles in a row.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Dec 01, 2013 1:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The worst case I can think of for A0 is oscillating at 1/8 of M2. Consider instruction $23 <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">RLA &#40;d,X&#41;</tt>, which takes 8 cycles:<br /><ol style="list-style-type: decimal"><li>RLA </li><li>operand d </li><li>Internal operation: Add X to d </li><li>Retrieve indirect address low byte </li><li>Retrieve indirect address high byte </li><li>Read from address </li><li>Write unmodified value </li><li>Write modified value</li></ol>Now consider a case where the instruction begins on an odd address, the operand is even, X is even, and the indirect address is odd. This produces the following for A0:<br /><ol style="list-style-type: decimal"><li>RLA: Odd </li><li>d: Even </li><li>IO: Even (I think) </li><li>Low byte: Even </li><li>High byte: Odd </li><li>Read: Odd </li><li>Modify: Odd </li><li>Write: Odd</li></ol>Repeat this process and A0 ends up dividing M2 by almost eight.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">entry_C000:<br />&nbsp; ldx #$01<br />&nbsp; stx $FE<br />&nbsp; stx $FF<br />&nbsp; dex<br />&nbsp; ; PC is now $C007<br />rlaloop:<br />&nbsp; rla ($FE,x)&nbsp; ; A0: 10001111<br />&nbsp; rla ($FE,x)&nbsp; ; A0: 10001111<br />&nbsp; rla ($FE,x)&nbsp; ; A0: 10001111<br />&nbsp; rla ($FE,x)&nbsp; ; A0: 10001111<br />&nbsp; ; repeat this several times<br />&nbsp; jmp rlaloop&nbsp; ; A0: 101<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tormenter</b> [ Mon Dec 09, 2013 11:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well I found this link that is done by the same person as the link above:<br /><br /><!-- m --><a class="postlink" href="http://callanbrown.com/index.php/super-mario-all-stars-nes-multicart">http://callanbrown.com/index.php/super- ... -multicart</a><!-- m --><br /><br /><br />I wired up the multi cart with all the zeldas, just like the link above, minus the wires to the chr, since the zeldas only use prg replacement.  Game boots, but does not switch games when you h it reset?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Dec 09, 2013 1:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Reset to switch game + Compiling roms to 1 file?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Make sure you've wired the '161 correctly: specifically pins 1,2,7,9, and 10.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tormenter</b> [ Sun Feb 02, 2014 9:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES Zelda Multicart</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yep everything was wired correct as far as I can see.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Feb 02, 2014 9:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES Zelda Multicart</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are you using a top-loader, or equivalently have you disabled your NES's CIC?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Tormenter</b> [ Mon Feb 03, 2014 3:02 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES Zelda Multicart</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I tried on toaster as well as toploader.  All standard, unaltered equipment.  Not sure if that would matter, as regular repros work fine.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
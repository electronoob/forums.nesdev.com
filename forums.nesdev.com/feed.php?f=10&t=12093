<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=12093" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2014-12-08T09:46:56-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=12093</id>
<entry>
<author><name><![CDATA[Tsutarja]]></name></author>
<updated>2014-12-08T09:46:56-07:00</updated>
<published>2014-12-08T09:46:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137396#p137396</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137396#p137396"/>
<title type="html"><![CDATA[Re: Help with a map system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137396#p137396"><![CDATA[
I guess I have to put this project (which I mentioned in the first post) on hold for some time because trying to make two games at the same time is too much for me. But I guess it's not bad idea to learn stuff beforehand you feel like are going to give you trouble when you get there. Thanks for the help anyway <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6724">Tsutarja</a> — Mon Dec 08, 2014 9:46 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-12-08T09:35:51-07:00</updated>
<published>2014-12-08T09:35:51-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137395#p137395</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137395#p137395"/>
<title type="html"><![CDATA[Re: Help with a map system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137395#p137395"><![CDATA[
To put it in perspective, <em>Sonic the Hedgehog 3</em> levels are about 12,000 to 20,000 pixels wide and 3,000 to 4,000 pixels tall, if the maps at <a href="http://www.soniccenter.org/maps/sonic_3" class="postlink">this page</a> are half scale as I assume.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Dec 08, 2014 9:35 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2014-12-08T09:16:12-07:00</updated>
<published>2014-12-08T09:16:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137394#p137394</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137394#p137394"/>
<title type="html"><![CDATA[Re: Help with a map system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137394#p137394"><![CDATA[
<div class="quotetitle">Tsutarja wrote:</div><div class="quotecontent"><br />-8x8 tiles form metatiles<br />-metatiles form screens<br />-screens form stages<br /></div><br />A LOT of games handle map compression like this, so yeah, this is proven to work very well.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I haven't figured out a good way of decompressing the map data yet<br /></div><br />You do it by processing each compression layer at a time until you reach the final entity (tile). Kinda like this:<br /><br />1- use level coordinates to find the position of the screen in the level map;<br />2- read the index of the screen at that position;<br />3- use this index to form a pointer or as an offset into the table of screen definitions;<br />4- use level coordinates to find the position of the metatile in the screen;<br />5- read the index of the metatile at that position;<br />6- use this index to form a pointer or as an offset into the table of metatile definitions;<br />7- use the level coordinates to find the position of the tile in the metatile;<br />8- read the index of the tile at that position;<br /><br />You can optimize this in different ways depending on how the data is stored and how often you have to perform the steps above. Some unrolling will allow you to read levels compressed like this in real time, without having to decompress them to RAM first, but most people find it easier to decompress larger portions of the level beforehand.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Also, would it be a good idea to make a coordinate system that counts pixels, blocks, screens and regions/sectors (only if screens go over 255)?<br /></div><br />256 screens would make a level 65536 pixels wide. Even a character as fast as Sonic would need around 3 minutes to run this distance in a straight line (without speed shoes). I don't think you'd ever need a level this big! =)<br /><br />Anyway, you don't need to have separate coordinates for the different entities that form the level, because you can extract them all from a single set of coordinates with a few bitwise operations, as long as all the entities are sized in powers of 2. Take my word: it's much safer to maintain less state and extract more state from that than to keep track of more state. The more things you have to update in sync, the bigger the chance of screwing something up losing that sync. Redundancy should be avoided whenever possible.<br /><br />For example, if you use 16x16-pixel metatiles, the 16-bit coordinates can be broken down like this:<br /><br />16-bit coordinate: ssssssss mmmmtppp<br /><br />ssssssss: screen within the level (0 to 255);<br />mmmm: metatile within the screen (0 to 15);<br />t: tile within the metatile (0 to 1);<br />ppp: pixel within the tile (0 to 7);<br /><br />This is the same coordinate you use for physics, collisions, everything, and you can easily extract the coordinates of level entities from it with a bit of bitshifting.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Mon Dec 08, 2014 9:16 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Tsutarja]]></name></author>
<updated>2014-12-08T04:02:11-07:00</updated>
<published>2014-12-08T04:02:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137390#p137390</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137390#p137390"/>
<title type="html"><![CDATA[Re: Help with a map system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137390#p137390"><![CDATA[
I've been thinking about a map system for a while now and I want to know if this is a good way of doing it:<br />-8x8 tiles form metatiles<br />-metatiles form screens<br />-screens form stages<br /><br />I haven't figured out a good way of decompressing the map data yet, but this feel like a good way of compressing it.<br /><br />Also, would it be a good idea to make a coordinate system that counts pixels, blocks, screens and regions/sectors (only if screens go over 255)?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6724">Tsutarja</a> — Mon Dec 08, 2014 4:02 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[DoNotWant]]></name></author>
<updated>2014-12-01T14:13:30-07:00</updated>
<published>2014-12-01T14:13:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137175#p137175</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137175#p137175"/>
<title type="html"><![CDATA[Re: Help with a map system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137175#p137175"><![CDATA[
<!-- m --><a class="postlink" href="http://www.nintendoage.com/forum/messageview.cfm?catid=22&amp;threadid=33287">http://www.nintendoage.com/forum/messag ... adid=33287</a><!-- m --><br /><br />For meta-tiles, check the &quot;Background Compression&quot; tutorial.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5690">DoNotWant</a> — Mon Dec 01, 2014 2:13 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2014-12-01T07:25:50-07:00</updated>
<published>2014-12-01T07:25:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137157#p137157</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137157#p137157"/>
<title type="html"><![CDATA[Re: Help with a map system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137157#p137157"><![CDATA[
Metatiles have been discussed to death in these forums, I'm sure you can find something nearly as good as a tutorial if you look around. The basic idea behind metatiles is that they're an extra layer that sits between the game code and the name/attribute tables. When rendering maps to the screen, instead of reading tile indices from PRG-ROM and writing them to VRAM, you read metatile indices, which you use to look tiles up in a set of tables so you can send those to VRAM. The specifics can surely be found in past threads, with lots of source code examples.<br /><br />As for collisions, metatiles often have collision data attached to them as well, in addition to tile and palette information. Often a single byte can indicate the type of the metatile, such as ground, air, water, hazard, and so on. In order for characters to collide with the background you have to check a few key points around them against the level map, and take action depending on the types of the blocks the characters are touching. This has also been discussed a lot, I'm sure you can find some useful info if you look.<br /><br />Sorry if my answer is a little vague, it's just that these are 2 of the most complex aspects of making a game (the other ones being scrolling and A.I.), so it would be hard to summarize everything about them in a single easy to follow post. Like I said, there are plenty of past threads on these subjects, so you really should take a look at them fist and come back here with more specific questions about things you didn't understand.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Mon Dec 01, 2014 7:25 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Tsutarja]]></name></author>
<updated>2014-12-01T01:35:34-07:00</updated>
<published>2014-12-01T01:35:34-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137142#p137142</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137142#p137142"/>
<title type="html"><![CDATA[Help with a map system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12093&amp;p=137142#p137142"><![CDATA[
This one is related to another side project (aside the arcade type shooter that I'm making).<br /><br />How do I make a map system that:<br />-Specific collision/function data is assigned to specific tiles<br />-Map consists of &quot;screens&quot; which are build out of metatiles<br /><br />The only problem is that I don't know how to create metatiles and collision data (because there is no metatile tutorial anywhere). Once I learn this, I think I can figure out the rest.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6724">Tsutarja</a> — Mon Dec 01, 2014 1:35 am</p><hr />
]]></content>
</entry>
</feed>
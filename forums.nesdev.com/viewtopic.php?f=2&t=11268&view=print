<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Need help making an nes ROM similar to MOON8</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Need help making an nes ROM similar to MOON8</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=11268">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=11268</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elsh</b> [ Fri May 23, 2014 8:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />hello,<br /><br />I’m writing to ask for some help building a basic nes ROM almost identical to rain warriors <a href="http://rainwarrior.ca/music/moon8.html" class="postlink">MOON8</a> rom, but with a few tweaks.<br /><br />i will try and keep this as brief and detailed as i can, understanding that i have no knowledge of mappers, banking, nesASM, or 6502 assembly. i am musician who loves composing for the NES using famitracker, and I’m looking for help from an experienced nes coder/developer.<br /><br />i am looking to make a re-usable ROM identical to moon8, but using my own original compositions, to compile “gapless” albums using multiple BIN files.<br /><br />much in the same way rain warrior made moon8 as a ROM cover of pink floyds “dark side of the moon” album. i would like to have a ROM similar to make my own albums and play them off an NES.<br /><br />for years I’ve been using the powerpak with separate nsf files for my live shows. having to load and re-load single nsfs will no longer do as my live shows advance and ideally,  id like to eliminate having to touch a controller more than once to play my songs sequentially.<br /><br />most of my songs have upwards of 20 instruments, and can vary in length from 4 to 8 minutes. i have several different .ftm files i would be using to make these albums.<br /><br />first and probably most important, is that i use vrc6 expansion, and the ROM would need to built for mapper 24. most of my songs do not use DPCM, although some of my songs do have it occasionally.<br /><br />i don’t need an “interface&quot; as detailed as moon8’s either. if you look at this video <a href="https://www.youtube.com/watch?v=KQtzaED5moA" class="postlink">https://www.youtube.com/watch?v=KQtzaED5moA</a> you’ll see rain warrior included album artwork and some really cool visuals for the different channels. i dont have any album artwork and ideally i am only looking to have a basic track list, timer, and arrow icon to indicate looping or sequential playback.<br /><br />I’ve been wanting to do something like this for a long time, but need someone to dedicate time and knowledge to it. because my knowledge is so limited, I’m hoping i can find someone to make the ROM, and then teach me how to compile, order, and place BIN files into the ROM. either writing the ROM from scratch or re-using the source files available for moon 8 <a href="http://rainwarrior.ca/music/moon8src.zip" class="postlink">http://rainwarrior.ca/music/moon8src.zip</a><br /><br />I’ve followed rain warriors BIN export guide: <a href="http://famitracker.com/forum/posts.php?page=1&amp;id=3681&amp;sort=" class="postlink">http://famitracker.com/forum/posts.php?page=1&amp;id=3681&amp;sort=</a>, and while he’s provided a lot of feedback and help, its gotten to a point where some of the more advanced aspects of building the ROM are too time consuming to write a tutorial for (using multiple BIN files, knowledge of mappers and banking), thus I’m asking anyone who is interested for help.<br /><br />im confident that if someone were to walk me through the process I’m describing that i would be able to pick it up and eventually do what i need to on my own.<br /><br />my band is going on tour this summer and ideally id like to have this ROM finished by early-mid july. i would be willing to reasonably compensate anyone for time spent creating this and teaching me how to use it.<br /><br />if this sounds like something you could help me with please reply here or PM me. i would be willing go into more detail over Skype, PM or email about this if need be.<br /><br />tl;dr i need to make a ROM identical to rain warriors moon8 to create and play my own original albums off an nes.<br /><br />thanks for reading and i hope this interests you!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elsh</b> [ Thu May 29, 2014 6:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />117 views and no interest?   <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />  I hope I'm not asking too much, but I'm not really sure what kind of time/resources something like this would take, maybe someone can enlighten me?<br /><br />I could <em>really</em> use help with this project. If there are any freelance NES developers interested please email me at: <!-- e --><a href="mailto:noisewaves@gmail.com">noisewaves@gmail.com</a><!-- e -->. or reply here. <br /><br />Thanks!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri May 30, 2014 3:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What you're asking for is indeed fairly involved.<br /><br />Just throwing this out there: it might make more sense to modify the PowerPak software to play multiple NSF files in sequence. That said, this is not a trivial task, either (but not impossible).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri May 30, 2014 4:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A Famitracker NSF has a memory location that can be tested for the C00 event. Unfortunately, it also clears $4015, which will lead to a pop between tracks, though there is likely a $4011 = 0 in the init code somewhere as well. Though, I suppose that wouldn't be the hard part. Probably harder getting back to the ROM BIOS and finding the next file.<br /><br />Using Famitracker's BIN export and rebuilding the player code from source is way easier, especially if you cut your tracks into segments that don't have to bankswitch.<br /><br />The VRC6 requirement means you have to deal with the VRC6 banking scheme, but that's not really that tough.<br /><br />I presume learning to program, and also learning to program on the NES, are going to be the sticking points. You can do both of these things, but there is a large time commitment. Get started right now. If you get to work on it, and start asking specific questions, a lot of people here would be happy to answer and help you through.<br /><br /><br />Anyhow, posts that are essentially &quot;can somebody make something for me&quot; don't tend to get a lot of response here. If you want us to be excited about it, maybe you should try to give us a reason to be excited for it. What are you making? You haven't shared anything about it at all. Alternatively, if you are looking to hire someone, this isn't a good job posting board in general, but even so, you haven't made any offer in that respect. Do you expect there to be a bunch of pro NES developers here who will chase down every possible job lead? That's not really what this scene is made of. It's amateurs having fun trying things out in their free time. There are small handfull here that could do it, maybe, but you haven't put anything on the table.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elsh</b> [ Fri May 30, 2014 4:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">I presume learning to program, and also learning to program on the NES, are going to be the sticking points. You can do both of these things, but there is a large time commitment. Get started right now. If you get to work on it, and start asking specific questions, a lot of people here would be happy to answer and help you through.</div><br /><br />While this is definitely my intention in the future, unfortunately right now I simply don't have the time to dedicate to it. Between a full time job, freelance work, and writing music, my time is pretty limited to dedicate to learning a new programming language. I'd be starting from square one and don't have the confidence that I could finish something like this before we leave for our tour next month.<br /><br />With my bands new album coming out at the beginning of next month, and a tour following shortly thereafter, my main concern is writing and perfecting our live show. This is where my request for help with the rom really stems from. <br /><br />Again, while I'm sure that saying &quot;im a musician first&quot; seems like a bit of a cop-out to some, please understand that its not meant as an blatant excuse or slight to those who do spend time doing this. I've been composing music for the NES using famitracker since early 2008, and in that time using separate .nsfs has sufficed for our live shows. However the first real need for a rom like the one im asking for has only come up recently as the songs I write have been getting lengthier and include interludes.  I've really only realized that it is possible to make a sort of &quot;gapless&quot; album ROM after seeing rainwarriors work with MOON8 and more recently with the 2a03Puritains cart. Seeing these in action have really made it clear that it can be done. <br /><br /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">Anyhow, posts that are essentially &quot;can somebody make something for me&quot; don't tend to get a lot of response here. If you want us to be excited about it, maybe you should try to give us a reason to be excited for it. What are you making? You haven't shared anything about it at all. Alternatively, if you are looking to hire someone, this isn't a good job posting board in general, but even so, you haven't made any offer in that respect. Do you expect there to be a bunch of pro NES developers here who will chase down every possible job lead? That's not really what this scene is made of. It's amateurs having fun trying things out in their free time. There are small handfull here that could do it, maybe, but you haven't put anything on the table.</div><br /><br />I guess I might not have been as clear as i could have in my initial post. So ill try my best to elaborate on it more. But first maybe I'd do well to talk a little bit about why I need it.<br /><br />I'm in a band called <a href="https://www.facebook.com/pages/Noisewaves/102269456516354" class="postlink">Noisewaves</a>. We've been involved in the chipmusic scene since early 2008 and have been playing live at events like Magfest, Blipfest, 8static, and Rochester Chip Fest since early 2011.<br /><br />For the past three years I’ve been composing our newest album, which in my personal experience, has pushed the limits of what I’ve done so far with the NES musically and sonically. <br /><br />In a way, our newest album is similar to Pink Floyd’s “Dark Side of the Moon” in that it’s almost one continuous piece of music. Intended to be listened to sequentially. <br /><br />The reason for my request is that when we play live, we would like our set to be one continuous piece… e.g: no pauses in between songs. Just one long gapless set. However, the current (and only) way i know how to play my songs off an NES involve the use of separate .nsf files, which as you all know require loading and reloading, therefore causing pauses as well as an audible clicking. I would like to eliminate this entirely, and i know its possible after seeing rain warriors work.<br /><br />I’ve tried using various other techniques involving programs like Vegaplay, as well as trying to combine ftm files in famitracker..however no matter what i try, i have never achieved the outcome I truly wanted. <br /><br />I would also like to (once we have money) invest in releasing our album on actual NES carts as well.<br /><br />This rom would serve a dual purpose:<br /><br />It would allow me to construct various live set lists now and in the future<br />It would allow me to release this music on an actual cart<br /><br /><br />I hope that paints a better picture of what Im trying to do with this. <br /><br />I reached out to this community because I honestly felt that it was something I could find help with here.<br /><br />I’m not sure what else I can put on the table other than the fact that you would be helping a person who is passionate about how the NES can be used musically, achieve something that could change the way people look at chip music and variants.<br /><br />I definitely don’t expect this type of work to be taken lightly and that is why I offered compensation, not because its a means to end, but because I honestly would want to pay someone for their time and tutoring. You have knowledge and skills that I don’t, but we are both passionate about the NES and what its capable of, therefore i figured it might be something the community could help me with.<br /><br />That being said, i hope this clears things up. Please let me know if you can help, I would really appreciate it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccovell</b> [ Fri May 30, 2014 4:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This comes up so much, I made a re-usable chart:<br /><br /><img src="http://www.chrismcovell.com/images/VennDiagram.png" alt="Image" /><br /><br />I do (non-sarcastically) wish you the best of luck with your project, and also think that learning 6502 asm is the quickest way to achieve something like this that you have complete control over.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri May 30, 2014 5:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'll try to help you find a solution involving combining multiple NSFs into one &quot;multicart&quot; of NSFs that you can play with the PowerPak's NSF player. But it'll work on a PowerPak only if two things are true: the NSFs are smaller than about 250,000 bytes put together, and no individual NSF needs bank switching.<br /><br />Make NSFs of all the songs in your set. How big (in bytes) are all the NSFs put together? Is any of the NSFs bigger than 32000 bytes?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat May 31, 2014 12:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />In the past I've modified Famitracker's replay code to play multiple modules instead of sub-songs.  It was for an older version (2.1), but probably works the same way.  I could take a few minutes to do the same with the newest version.<br /><br />OK, for whatever reason every NSF I build with v2.9 is silent (even before modifying it).  Maybe it's my ca65 version (v2.13.9), I don't know.  This is where a 5 minute project becomes a trip down the rabbit hole.  But totally untested, here's the patch:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">in driver.s, before this line:<br />; End of variable space<br />put:<br />ft_music_addr:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .res 2<br /><br />in driver.s, after this part:<br />;ft_music_addr:<br />;&nbsp; &nbsp;.word * + 2<br />;&nbsp; &nbsp;.incbin &quot;music.bin&quot;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; Music data<br /><br />comment it out, and put this:<br />ftsong0:&nbsp; .incbin &quot;potential.bin&quot;<br />ftsong1:&nbsp; ;<br />ftsong2:&nbsp; ;<br />ftsong3:&nbsp; ;<br />ftsong4:&nbsp; ;<br />ftsong5:<br />ftsong6:<br />ftsong7:<br />ftsong8:<br /><br />ft_music_table:<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong0<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong1<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong2<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong3<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong4<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong5<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong6<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong7<br />&nbsp; &nbsp; &nbsp; &nbsp; .word ftsong8<br /><br />in init.s, after this:<br />ft_load_song:<br />&nbsp; &nbsp; &nbsp; &nbsp; pha<br /><br />put this:<br />&nbsp; &nbsp; &nbsp; &nbsp; tay<br />&nbsp; &nbsp; &nbsp; &nbsp; lda ft_music_table,y<br />&nbsp; &nbsp; &nbsp; &nbsp; sta ft_music_addr<br />&nbsp; &nbsp; &nbsp; &nbsp; lda ft_music_table+1,y<br />&nbsp; &nbsp; &nbsp; &nbsp; sta ft_music_addr+1<br /><br /><br />- edit -<br /><br />in nsf_wrap.s, at the top, add this:<br />RELOCATE_MUSIC = 1<br /><br />in init.s, before this:<br />jsr ft_load_track<br /><br />put this:<br />ldy #0<br /><br /></div><br /><br />This is untested, it's a little cleaner than the mod I previously did to v2.1. (edit - tested now for v2.9, it works)<br /><br />As for song changing, in player.s you could put the code in the ft_cmd_halt: routine, to increment the song on the halt command.  Load the new number in A, be sure to set X to 0 or 1 (for NTSC/PAL), then JMP (not JSR) to the init routine.  A while back I did hack just like that with Nerdtracker2, for Chibi-Tech, who used more patterns than it supported.<br /><br />And obviously, you pretty quickly need bankswitching.  Just add another table and use it like ft_music_table.  I know this info isn't a lot of help to a non-programmer, but I'm kinda stuck since I can't test it.<br /><br />edit: Added a couple more changes so the patch works properly.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sat May 31, 2014 5:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">OK, for whatever reason every NSF I build with v2.9 is silent (even before modifying it).  Maybe it's my ca65 version (v2.13.9), I don't know.  This is where a 5 minute project becomes a trip down the rabbit hole.  But totally untested, here's the patch:</div><br />If you haven't, try defining this before the inclusion of driver.s:<br />RELOCATE_MUSIC = 1

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat May 31, 2014 10:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Aha, thanks!  I added that at the top of nsf_wrap.s, and that fixed it.  Now it works.<br /><br />I have to run now, later tonight I'll try out the song auto-switching, should take just a few minutes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elsh</b> [ Sat May 31, 2014 12:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">I'll try to help you find a solution involving combining multiple NSFs into one &quot;multicart&quot; of NSFs that you can play with the PowerPak's NSF player. But it'll work on a PowerPak only if two things are true: the NSFs are smaller than about 250,000 bytes put together, and no individual NSF needs bank switching.<br /><br />Make NSFs of all the songs in your set. How big (in bytes) are all the NSFs put together? Is any of the NSFs bigger than 32000 bytes?</div><br /><br />there are two nsfs that are bigger than 32000 bytes. combined my full nsf set is 261120 bytes. some of have bankswitching (according to the nsf export in famitracker) im not quite sure what causes bankswitching in the context of exporting nsf files.<br /><br />im going to attach a zip file of my nsfs and ftm files for reference.<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1589">noisewaves_src_files.zip</a> [179.41 KiB]
			</span><br />
			<span class="gensmall">Downloaded 18 times</span>
		

		<br />
	</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Jun 01, 2014 8:18 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If the target is just gapless playback on the PowerPak, probably the easiest thing to do would be combine your NSFs into a bigger one. The recent <a href="http://rainwarrior.ca/projects/nes/2a03puritans.html" class="postlink">2A03 Puritans</a> release has some source code demonstrating how this can work. Place a player stub in RAM, and all you really need to do to the included NSFs is patch the bank switch writes to a new routine that adds an offset to the intended bank number. Just have your player stub watch for the halt variable set by C00 to switch tracks (and you probably want to patch out the $4015 write in the C00 code).<br /><br />NSF would be easier because it supports the normal bank switching methods your NSFs are already using.<br /><br />You're likely going to have to split this into two ROMs to get it to fit on a PowerPak (the PowerPak's NSF limit is less than 256k, and its VRC6 limit might be 256k unless it's implemented as oversize). Do you have a place for an intermission in the middle? This is another reason to use NSF instead of NES; you can back out of the NSF player and go to a new NSF without a reset.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>elsh</b> [ Sun Jun 01, 2014 10:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">If the target is just gapless playback on the PowerPak, probably the easiest thing to do would be combine your NSFs into a bigger one. The recent <a href="http://rainwarrior.ca/projects/nes/2a03puritans.html" class="postlink">2A03 Puritans</a> release has some source code demonstrating how this can work. Place a player stub in RAM, and all you really need to do to the included NSFs is patch the bank switch writes to a new routine that adds an offset to the intended bank number. Just have your player stub watch for the halt variable set by C00 to switch tracks (and you probably want to patch out the $4015 write in the C00 code).<br /><br />NSF would be easier because it supports the normal bank switching methods your NSFs are already using.<br /><br />You're likely going to have to split this into two ROMs to get it to fit on a PowerPak (the PowerPak's NSF limit is less than 256k, and its VRC6 limit might be 256k unless it's implemented as oversize). Do you have a place for an intermission in the middle? This is another reason to use NSF instead of NES; you can back out of the NSF player and go to a new NSF without a reset.</div><br /><br />this sounds like a viable option, and i have experimented with this type of method as a workaround using NSFImport. <br /><br />but looking at the source for 2a03puritains it looks like you combined seperate nsfs into one from their source ftm files.<br /><br />my method to achieve the &quot;gapless&quot; playback i want, would go something like this:<br /><br />create ftm &gt; export to nsf &gt; use NSFimport to create new ftm &gt; combine ftms in famitracker &gt; export to nsf <br /><br />it seems a bit convoluted to do this though and due to the nsf size limit, and instrument limit, i usually am only able to get around 4 songs to a given nsf file.<br /><br />i see what youre saying though, for our live show it would more than likely have to be two seperate nsfs, with around 4-5 songs in each one. which isnt the biggest deal, however i would still like to work towards a rom.<br /><br />would the source code from the 2a03puritains cart eliminate having to use NSFimport? that could be a big help.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Jun 01, 2014 11:07 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />No, 2A03 Puritans did not merge FTMs. It merges NSFs.<br /><br />I wouldn't recommend trying NSFImport to merge things. Your file size will bloat and you'll exceed your 256k limit very quickly.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sun Jun 01, 2014 10:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Need help making an nes ROM similar to MOON8</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I updated my post so the patch actually works now.  I forgot to force the modules to play the first track.<br /><br />But I can't finish the job, because Famitracker won't create a .BIN file for songs that use bankswitching.  The code now, using NSF bankswitching unfortunately, according the comments is paging pattern data at $B000-$BFFF.  VRC6 pages $8000-$BFFF all together.  Of course it's always still doable, it just means more changes are needed.<br /><br />I could make one that plays all the non-bankswitched tracks, if that helps.  I would need to know what order to put them in, unless you're wanting to build from the source.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
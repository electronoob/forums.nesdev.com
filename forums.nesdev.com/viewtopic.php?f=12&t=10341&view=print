<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Tile reduction</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Tile reduction</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=10341">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=10341</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>giles</b> [ Fri Aug 02, 2013 9:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are there any programs that do tile reduction of similar tiles?  Even better if one could set a threshold for how aggressive the matching is.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>djcouchycouch</b> [ Fri Aug 02, 2013 9:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I asked a similar question a while ago, so this thread might be useful to you.<br /><br /> <a href="http://forums.nesdev.com/viewtopic.php?f=21&amp;t=9586" class="postlink">http://forums.nesdev.com/viewtopic.php?f=21&amp;t=9586</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>giles</b> [ Fri Aug 02, 2013 10:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yes, I saw that, and I use grit to remove duplicate tiles and for compression.<br /><br />As a way to save further space I looked for tiles that were similar and removed them by hand.  It didn't seem like it was taking a long time but of course a couple of hours went by.<br /><br />This freed up a lot of space in the rom (21AC2) and the images look just as good as they did before.<br /><br />This seems like something somebody would have done already.  If not I'll add it to my todo list.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Fri Aug 02, 2013 12:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><a href="http://jiggawatt.org/badc0de/sixpack/" class="postlink">Sixpack</a>?<br /><br />I personally use my own custom tools, either writing them from scratch for a particular case, or modyfing old ones if they are close enough to requirements. Writing a tool from scratch is definitely faster than sorting out tiles manually.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Aug 02, 2013 3:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Define &quot;similar tiles&quot; and I'll get to work.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikejmoffitt</b> [ Sat Aug 03, 2013 7:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Tepples, I have thought of a simple architecture for such a program:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">prompt user for difference tolerance, n (how many pixels must be mis-matched in an 8x8 tile to be considered different)<br />create new tile buffer for export<br />load tiles<br />for tile in tiles:<br />&nbsp; &nbsp; store tile reference for comparison<br />&nbsp; &nbsp; for tile in tiles:<br />&nbsp; &nbsp; &nbsp; &nbsp; check for differences against stored tile reference ( in complete pixels )<br />&nbsp; &nbsp; &nbsp; &nbsp; if there are equal to n or less differences:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; copy user's choice of one or the other to the new tile buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; else:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; copy to new buffer (this will also handle the comparison of a tile to itself without issues)<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Aug 03, 2013 7:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's a bit harder when you consider that a similarity metric based on counting equal pixels isn't transitive. Consider the case where both A and B are similar to a later tile C, but A isn't similar to B. And even the algorithm you suggest is O(n^2), meaning it might work for a single 256-tile scene at a time but I'm not sure how tractable it stays for the 16384-tile banks of, say, MMC5 ExGrafix.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Aug 03, 2013 12:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">And even the algorithm you suggest is O(n^2), meaning it might work for a single 256-tile scene at a time but I'm not sure how tractable it stays for the 16384-tile banks of, say, MMC5 ExGrafix.</div><br />Well, this is the SNESdev forum, so he probably expects to use this on chunks larger than 256 tiles.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Aug 03, 2013 1:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />On the one hand, that's a good thing, as 1024 tiles (Super NES limit per plane) is a lot closer to 256 (NES/GB limit) than to 16K (ExGrafix limit). But flipping would complicate things, as each tile would need to be compared to flipped versions of all other tiles.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikejmoffitt</b> [ Sun Aug 04, 2013 3:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It wasn't a very deeply thought-out algorithm - that's why I wanted it to prompt the user to choose between tiles in question and to be able to adjust the threshold where it considers them different.<br /><br />A better, more advanced algorithm would want to consider adjacency of different pixels.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>giles</b> [ Wed Aug 21, 2013 10:02 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The way sixpack handles color reduction to 16 colors looks better than the results from png-nq or gimp.  I like the way it handles dithering too.<br /><br />What I was thinking of was a program that would take an image (png/bmp/whatever) and just match similar tiles; anything like the attached image.  Then it would just save it in the same format so that it could be used with grit/sixpack/gfx2snes.   I use grit because I'm using sneskit.  So in this case I'd just let grit deal with exact duplicate tiles and flipped tiles.<br /><br />This is assuming that this is not massively more trouble than it's worth.  Another route, I suppose, would be to use ExHiRom.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<img src="./download/file.php?id=795" alt="tiles.png" /><br />
			<span class="gensmall">tiles.png [ 265 Bytes | Viewed 679 times ]</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Wed Aug 21, 2013 11:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The way sixpack handles color reduction to 16 colors looks better than the results from png-nq or gimp. I like the way it handles dithering too.</div><br />Sixpack uses the NeuQuant algorithm for color quantization. I've been thinking of integrating support for scolorq, since it supposedly performs better for very small number of colors (like 2bpp tiles). I also did some experiments with k-h-means quantization, but it was quite slow, and didn't yield any results worth writing home about.<br /><br />The dithering algorithm is the simplest possible; select either a darker color or a lighter color based on (row ^ column) &amp; 1.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>giles</b> [ Fri Sep 06, 2013 10:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tile reduction</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I replaced 4 1/2 4bpp images  with images processed with sixpack and it saved me ~1500 bytes.  (The half image I used half of the image from sixpack and half from gimp.)<br /><br />I still need to work on better tile reduction for 8bpp images.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Feedback wanted on Visual 6502/2A03/2C02 circuit tutorial</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Feedback wanted on Visual 6502/2A03/2C02 circuit tutorial</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=10119">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=10119</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Fri May 24, 2013 12:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Feedback wanted on Visual 6502/2A03/2C02 circuit tutorial</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Cross-posting since I realized people with more relevant experience might hang out here after posting; see <!-- l --><a class="postlink-local" href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=10118">viewtopic.php?f=3&amp;t=10118</a><!-- l --> . Corrections and suggestions for improvements would be appreciated.<br /><br />Excuse the spam. <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Fri May 24, 2013 1:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I mentioned this on its talk page, but I tentatively think you've called a &quot;cross-coupled inverter&quot; might actually be a NOR-based S-R latch.<span style="font-size: 50%; line-height: normal">edit: typo</span>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Fri May 24, 2013 2:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">I mentioned this on its talk page, but I tentatively thing you've called a &quot;cross-coupled inverter&quot; might actually be a NOR-based S-R latch.</div><br /><br />Seems to match, with e.g. Set and one of the white gates forming one of the NORs. It's possible that I'm missing common terminology in other places too. <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /><br /><br />I'll wait for someone else to confirm before changing it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Fri May 24, 2013 4:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There's some value to explaining these things in terms of what someone not experienced with them thinks of them as. I hope this aspect is preserved.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Fri May 24, 2013 4:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">There's some value to explaining these things in terms of what someone not experienced with them thinks of them as. I hope this aspect is preserved.</div><br /><br />Yeah, I agree. If I change/add stuff, I'll at least try to do so without requiring more prerequisite knowledge.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Fri May 24, 2013 5:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">I mentioned this on its talk page, but I tentatively think you've called a &quot;cross-coupled inverter&quot; might actually be a NOR-based S-R latch.<span style="font-size: 50%; line-height: normal">edit: typo</span></div><br /><br />Seems pretty clear that SR Latch is the right term at least, so I added that and the NOR interpretation separately. Please scream if anything seems off. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Quietust</b> [ Fri May 24, 2013 8:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Technically, the term &quot;cross-coupled inverter&quot; is probably a better description of the dynamic latch, since that actually <em>is</em> just a pair of inverters connected to each other in a circle (except with some pass transistors at one of the junctions).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Sun May 26, 2013 10:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've started adding information on clock signals to <!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/Visual_circuit_tutorial#Clocks">http://wiki.nesdev.com/w/index.php/Visu ... ial#Clocks</a><!-- m --> .<br /><br />I remember seeing some nice-looking ASCII waveform displays somewhere on the wiki, but can't find them anymore. Anyone knows where they are?<br /><br />Some details on the following APU and PPU clock signals and nodes would be nice too: apu_clk2a, apu_clk2b, apu_clk2c, apu_clk2d, pclk0, pclk1, pclk0_en, pclk1_en (guessing the PPU ones are related to video output).<br /><br />Edit: Seems clk0/_clk0 would be used for the video and pclk is the internal divide-by-4 clock. Still unsure about those _en nodes though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun May 26, 2013 7:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's some bits that might be useful—or maybe it's too advanced. It's hard for me to tell.<br /><br /><a href="http://wiki.nesdev.com/w/index.php/Visual_circuit_tutorial#Inverters" class="postlink">The section on inverters</a> is a good example of combining both of the previous images. But it's also a good illustration about about gate <em>size</em>: a wide gate (as in <a href="http://wiki.nesdev.com/w/index.php/File:Vis_transistor.png" class="postlink">Vis_transistor.png</a>) can pass a lot of current, while a long gate (as in the pull-up in <a href="http://wiki.nesdev.com/w/index.php/File:Vis_inverter.png" class="postlink">Vis_inverter.png</a>) has a much larger on-state resistance. Either way, the capacitance of the gate is proportionate to the gate's area, so the latter pull-up represents a larger capacitive load on the output.<br /><br /><a href="http://wiki.nesdev.com/w/index.php/File:Vis_da_conversion.png" class="postlink">Vis_da_conversion.png</a> shows an entertaining lack of understanding about the point on gate width by the relevant designers: rather than using a single gate with width 8x, they used eight 1x wide gates.<br /><br />At some point I'd like to redraw some of the images to get rid of the big chunky no-longer-antialiasing pixels (e.g. in <a href="http://wiki.nesdev.com/w/index.php/File:Vis_power.png" class="postlink">Vis_power.png</a>), but I don't want to get underfoot.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Sun May 26, 2013 7:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Here's some bits that might be useful—or maybe it's too advanced. It's hard for me to tell.<br /><br /><a href="http://wiki.nesdev.com/w/index.php/Visual_circuit_tutorial#Inverters" class="postlink">The section on inverters</a> is a good example of combining both of the previous images. But it's also a good illustration about about gate <em>size</em>: a wide gate (as in <a href="http://wiki.nesdev.com/w/index.php/File:Vis_transistor.png" class="postlink">Vis_transistor.png</a>) can pass a lot of current, while a long gate (as in the pull-up in <a href="http://wiki.nesdev.com/w/index.php/File:Vis_inverter.png" class="postlink">Vis_inverter.png</a>) has a much larger on-state resistance. Either way, the capacitance of the gate is proportionate to the gate's area, so the latter pull-up represents a larger capacitive load on the output.<br /><br /><a href="http://wiki.nesdev.com/w/index.php/File:Vis_da_conversion.png" class="postlink">Vis_da_conversion.png</a> shows an entertaining lack of understanding about the point on gate width by the relevant designers: rather than using a single gate with width 8x, they used eight 1x wide gates.<br /><br />At some point I'd like to redraw some of the images to get rid of the big chunky no-longer-antialiasing pixels (e.g. in <a href="http://wiki.nesdev.com/w/index.php/File:Vis_power.png" class="postlink">Vis_power.png</a>), but I don't want to get underfoot.</div><br /><br />Adding information like that in a separate &quot;gate sizing&quot; section might be a good idea (prolly towards the end of the article). I'm afraid that mixing it in with the rest might lead to a bit of information overload given the target audience. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Mon May 27, 2013 1:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I wouldn't mind the page having lots of detailed information btw. (That way I might learn some things too <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />.) It should probably be added incrementally in new sections though, so that the amount of new information to absorb in each section is small.<br /><br />Edit: Linking the same image multiple times, to avoid backlinks, shouldn't make the page any heavier either.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Mon May 27, 2013 1:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I want to cover memory arrays and PLAs (I hope that's the correct term - the &quot;decoding&quot; logic you see in various places) too.<br /><br />I still haven't wrapped my head around exactly how the OAM memory works though, and I'm not even sure what type of memory it is. Here's a picture of the right edge of OAM:<br /><br /><img src="http://s14.postimg.org/tae58nudd/oam.png" alt="Image" /><br /><br />It seems to use cross-coupled inverters like the SR latch example (one side is highlighted in the picture), which according to Wikipedia would make it SRAM (DRAM uses capacitors instead). Various places on the nesdev wiki call it dynamic memory though. Is that &quot;dynamic&quot; in a different sense, or is it some special DRAM variant like <a href="http://en.wikipedia.org/wiki/Dynamic_random-access_memory#1T_DRAM" class="postlink">1T DRAM</a>? (The description doesn't seem to match though.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Quietust</b> [ Mon May 27, 2013 2:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sprite RAM cells don't actually have complete inverters on them - all they have is the pulldown transistors, relying entirely on wire capacitance to keep one of the two sides of the cell high (rather than having a pull-up resistor to do that) and drive the other side low. When the chip reads from a memory cell (actually from an entire row), it precharges the bus and then connects it to the cell, so the high side gets reinforced and the low side just gets drained away.<br /><br />For more information, look up &quot;4-transistor DRAM&quot;.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Mon May 27, 2013 2:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are things flipped 90 degrees w.r.t. &quot;rows&quot; and &quot;columns&quot; in Visual 2C02 ? The spr_rowx signals seem to open up a column to the precharged lines, not a row, unless I'm missing something.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ulfalizer</b> [ Mon May 27, 2013 9:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Feedback wanted on Visual 6502/2A03/2C02 circuit tutoria</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm getting some rough idea of how the OAM DRAM works (for reads anyway). Does the following sound correct?<br /><br /><ol style="list-style-type: decimal"><li> During the first phase, the bitlines are charged by opening up the transistors on the right-hand side to current using pclk0. At the end of this phase, pclk0 goes low, disconnecting power, but the bitlines remain charged through capacitance.</li><li> During the second phase, the now-charged bitlines are connected to the row of memory cells holding the bits to be read by opening up the corresponding spr_rowx line. Additionally, the spr_colx line corresponding to the bits to be read is open at this point, and the value that's let through is the value returned by the read.</li></ol><br />Additionally, the charged bitlines will help charge up the memory cells on the row that was &quot;opened&quot; (connected to the bitlines), preventing them from fading. This works by charging up the side of the memory cell that was high, while current on the other side will just drain to ground (since the high side will open up a pull-down transistor for the other side).<br /><br />(Things get a bit confusing since a &quot;row&quot; in Visual 2C02 actually has vertical orientation <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />)<br /><br />Edit: Looks like the pclk0 connection on the right isn't actually used in the simulator, so that no &quot;pre-charging&quot; of the bitlines happens. Clicking on the gates shows that there's no transistors there (though the visual display when nothing is selected is as-if there would be transistors there). Then the following comments on IRC make sense:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01:45 &lt; _Q&gt; in visual2c02, the bus precharge lines aren't actually connected<br />01:45 &lt; _Q&gt; I manually deleted all of the transistors<br />01:45 &lt; _Q&gt; in the real chip, they're necessary<br />01:45 &lt; _Q&gt; but in the simulator, they cause timing glitches that destroy the data in the DRAM</div>

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
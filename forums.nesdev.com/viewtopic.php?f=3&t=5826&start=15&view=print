<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NES -&gt; SNES ROM convertor?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NES -&gt; SNES ROM convertor?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=5826">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=5826</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Dec 12, 2009 12:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Download the emulator yourself. byuu doesn't have to "prove" anything to you. He said Super Sleuth plays SMB and it took me a whole 10 seconds to try running it myself.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Sat Dec 12, 2009 4:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />He's right. Every NES game that I tried works sucessfully.
<br />
<br />So the interesting thing to me is now, can the same thing be done in the ROM itself rather than in the emulator?
<br />
<br />This might be interesting...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>LocalH</b> [ Sat Dec 12, 2009 6:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't think it'd be feasible except by hacking the ROM itself. Disassemble it, replace NES register writes with equivalent SNES ones, and then rebuild the ROM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Dec 12, 2009 6:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">emu_enthusiast wrote:</div><div class="quotecontent">So the interesting thing to me is now, can the same thing be done in the ROM itself rather than in the emulator?</div>
<br />
<br />No. Getting a NROM game to work with an automatic patcher may work. But ultimately you can't automate a process to get the vast majority of NES games to run on SNES. The reason being mappers. That's why all the AS NES hacks are of NROM games. 
<br />
<br />You could probably adapter any NES game to SNES if you do it by hand though. If you have both the skills and alot of time.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Sat Dec 12, 2009 8:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well getting an NROM game to patch would be my first objective.
<br />
<br />But surely with a bit of work it could also be done for games with different mappers?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Sat Dec 12, 2009 8:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />NROM games are not as easy as you think.
<br />
<br />Identifying register reads/writes is easy for an emulator like Super Sleuth to do because it can do it while it emulates the game.  For a program like a disassembler or NES-&gt;SNES converter, identifying which bytes in the ROM are actually register accesses is somewhat of a challenge.  The only real way to do it is to step through the code, and even then it's hard to get it all (things like indirect jumps really complicate it).
<br />
<br />And that's only the start of it.
<br />
<br />I was going to get into the reasons why this is so complicated and throw out some possible ideas -- but before I do all that, let me ask you this:
<br />
<br />How much about the NES / SNES do you really know?
<br />
<br />
<br />EDIT:
<br />
<br />Here's some stuff I as thinking about.  This is assuming you can identify all register reads/writes in the original ROM.
<br />
<br /><span style="text-decoration: underline">Register changes</span>
<br />
<br />Since NES regs don't translate directly to SNES regs, it seems to me the way to approach the situation would be to replace register writes with JSRs  That way you could emualte the NES registers inside the ROM.
<br />
<br />The problem with this is space.  LDA absolute is only 3 bytes, but JSL long is 4 bytes.  This can be gotten around by "hijacking" the following instruction and placing it in the new subroutine (a trick I employed in my ROM hacking days).
<br />
<br />For example:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">STA $2001&nbsp; ; original game code<br />LDA #$00<br />STA $6000<br /></div><br /><br />could be translated to:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">JSL write_2001_lda0<br />NOP<br />STA $6000<br /><br />;--------------- in another bank<br />write_2001_lda0:<br />&nbsp; JSR write_2001_common ; a routine to emulate a 2001 write on the SNES<br />&nbsp; LDA #$00<br />&nbsp; RTL<br /></div>
<br />
<br />ROM space in other banks isn't really an issues because SNES allows for games to be much, much larger than most NES roms.
<br />
<br /><span style="text-decoration: underline">Sprite 0 hit</span>
<br />
<br />Sprite 0 hit doesn't really have any equivilent on the SNES... so this presents it own challenge.
<br />
<br />The SNES <em>does</em> let you fire an IRQ at a specific X,Y point on the screen though.  So it makes sense that you could try the following:
<br />
<br />- identify sprite 0 hit loops (not that hard if you can identify reg reads)
<br />- replace sprite 0 hit loops with code that sets up an IRQ, CLI's, then WAI's
<br />
<br />This complicates other things though:
<br />
<br />- What do you do about other IRQs?  SMB does use any other IRQs, but other games use DMC IRQs along with sprite 0.  I suppose your SNES code could just figure out which IRQ is next -- like an emulator.
<br />
<br />- How do you find out where sprite 0 would hit?  I guess you'd have to keep track of sprite 0 information when you catch $2004 and $4014 writes so that you can know what sprite 0 is at all time.  You could also read from VRAM to find out where the first opaque pixel is (without doing that, sprite 0 hit would trip several scanline too high in a lot of cases).  Ensuring the BG pixel is opaque as well is pretty much out of the question, though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Sat Dec 12, 2009 9:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><strong>@Disch</strong>
<br />
<br />Not a lot yet, but:
<br />
<br />1. There are plenty of technical docs available explain what things are and how they work.
<br />2. There are also plenty tools to help decpiher whats going on.
<br />3. There are even rom maps available for a number of games to aid the process.
<br />
<br />The fact that there is already hardware available to plug a NES game into a SNES gives me hope that this is actually achievable. Although perhaps somewhat difficult.
<br />
<br />The biggest problems that I can see I would have are:
<br />
<br />1. The mapper situation.
<br />2. The special chips that certain games contain
<br />
<br />I'd love to hear any thought/ideas you have about how I could go about tackling this.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Sat Dec 12, 2009 9:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">emu_enthusiast wrote:</div><div class="quotecontent">The fact that there is already hardware available to plug a NES game into a SNES gives me hope that this is actually achievable.</div><br /><br />The thing is... the hardware can just catch and readdress register accesses.<br /><br />For the whole ROM to be converted you have lots of concerns apart from that, such as addressing and spacing issues.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The biggest problems that I can see I would have are:<br /><br />1. The mapper situation.<br />2. The special chips that certain games contain<br /></div><br /><br />Those are the same thing  =P.  The special chips you're referring to are typically the mapper.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I'd love to hear any thought/ideas you have about how I could go about tackling this.  :)</div>
<br />
<br />I don't mean to be a big pessamist.  I'm all for a challenge.  Admittedly, this is an interesting topic, and it would be neat if it ever came about.  I'd be happy to contribute in any way I can.
<br />
<br />But I don't have my hopes up.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Sat Dec 12, 2009 10:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, I can't promise that anything will ever come of this idea either.
<br />
<br />The whole concept of it is interesting though. Being able to play a previous generation's game on a console in a non-emulated form.
<br />
<br />I'll be back with more questions, if it gets off of the ground.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Dec 12, 2009 10:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">emu_enthusiast wrote:</div><div class="quotecontent">The whole concept of it is interesting though. Being able to play a previous generation's game on a console in a non-emulated form.</div>
<br />It's not that new: Sega had Power Base Converter, Sony has PS1 discs in PS2 and PS3, and Nintendo has GameCube compatibility in non-Korean Wii consoles. The "hardware trickery" of this emulator is ample evidence that Nintendo at least tried for back-compat in the Super NES, but because games for earlier consoles used stuff not well documented in the official manual (like $2005/$2006 behavior), it was more difficult to revise those behaviors in the new platform.
<br />
<br />AOROM, BNROM? Try identifying mapper writes and changing to another bank. It might not work so easily for CNROM because games are more likely to expect to read back.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Dec 12, 2009 10:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">emu_enthusiast wrote:</div><div class="quotecontent">The fact that there is already hardware available to plug a NES game into a SNES gives me hope that this is actually achievable. Although perhaps somewhat difficult.</div>
<br />
<br />I do not see how this helps you. The Super-8 aka Tristar contains a NOAC like all NES clones. It does not utilize the SNES CPU or PPU. 
<br />
<br />What you want to do works in theory so much as you could certainly port any NES game to SNES given you have the skills and the time to do it, by hand. There is no magic bullet to automate the process. Before you can even begin to attempt this process you should probably first understand your source system, the NES. If you don't understand it your chances of success or any noticable progress are none. Once you know enough about the NES you'll have to learn about the SNES and then you'll begin to understand the challenges involved in running a NES game on the SNES.
<br />
<br />However once you understand these things it is certainly possible to target a game and hack it up to run it on SNES. Obviously the AS NES hacks do this. 
<br />
<br />I agree with Disch that it's an interesting concept to talk about. But I don't think you have a chance at doing anything automated. Manually you can do but you need to do alot of research. It's not as simple as clicking the right things on your computer.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Sat Dec 12, 2009 10:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@tepples 
<br />The systems that are already directly backwards compatible don't interest me so much. Eg. PS1 on PS2, or GC games on a Wii. These systems don't really need to be re-emulated or converted anyway.
<br />
<br />I wonder though more about things like turning a .nes into a .wad, for example. Not to play through emulation of the console, but turning it into a native playable game. Epecially for the old cartridge based systems that don't use the DVD/mini-DVD/Blueray formats.
<br />
<br />Of course that is very far-fetched. And I am starting with a simple console, because this is easier to do and learn.
<br />
<br />@MottZilla
<br />I did not realise that the tristar did not utilise the SNES CPU/PPU. I just assumed it allowed a different cartridge shape to be used with the SNES console. That combined with the SNES CPU's "compatability mode."
<br />
<br />Anyway I understand that the whole undertaking would be a HUGE, non-trivial task, and possibly even impossible.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Sun Dec 13, 2009 6:23 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />- It's an awesome programming exercise, challenger... but I don't see a solid point of making such thing. It's much interesting, no doubt... but is worth the effort? <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Sun Dec 13, 2009 7:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Fx3 wrote:</div><div class="quotecontent">- It's an awesome programming exercise, challenger... but I don't see a solid point of making such thing. It's much interesting, no doubt... but is worth the effort? <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div>
<br />I agree, interesting but not worth the effort, especially since I don't think anybody can say at this point how good a result can be expected. Of course I'm going to follow the progress eagerly though if somebody decides to undertake a project like this.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Sun Dec 13, 2009 7:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@Zepper
<br />Why does anybody attempt to make an emulator?
<br />And why do people continue to make emulators of consoles that are often already perfect or near perfectly emulated?
<br />
<br />Is it because it is necessary? No.
<br />
<br />It's the personal challenge, the learning experience, the inquistive nature of wanting to know how something ticks, the tinkerer, the hobbyist having fun. 
<br />
<br />Face it there's not really any bragging rights left in reproducing an old dead console. And gawd knows there's no money in it either. 
<br />
<br />So yes, its completely unnecessary. It's also completely self-indulgient. But also totally worth it.  <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
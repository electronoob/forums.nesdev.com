<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Another Universal Flash Cart</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Another Universal Flash Cart</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=5036">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=5036</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kathaku</b> [ Wed Apr 08, 2009 10:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Another Universal Flash Cart</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm new to the forum but I've been working on this project for about a year and a half now.  This is my take on a universal flash cart (called UNES) which is similar to the Funky Flash Cart in that it utilizes a CPLD for a mapper, and contains both SRAM and FLASH ROM.
<br />
<br />There's a lot of major differences though.  The main idea was to have something like 'on the fly' programming where nothing would need to be removed from the NES.  In fact, the intent of this project is to modify a NES to use only this flash cart - where through an LCD / button interface the cart will have full control over the NES power and reset, as well as game selection and whatever else.
<br />
<br />So far I have only been able to develop 3 mappers for the prototype - just as a proof of concept.  The goal is to stick all the mappers possible onto the CPLD at the same time.  The mappers working so far are NROM, CNROM, and UNROM.  As you can see below is an image of the machine playing Contra.  Next on the list is MMC1, then MMC3, etc.  It can only be programmed presently via a PC's seral port and my own software, though an SD slot will be fully implemented in the final.
<br />
<br /><img src="http://img259.imageshack.us/img259/1417/pic1copy.jpg" alt="Image" />
<br />The prototype.
<br /><img src="http://img117.imageshack.us/img117/4961/1003086.jpg" alt="Image" />
<br />The prototype playing Contra.
<br /><img src="http://img213.imageshack.us/img213/1531/1003082.jpg" alt="Image" />
<br />LCD interface.
<br /><img src="http://img219.imageshack.us/img219/2199/unesfinal1.jpg" alt="Image" />
<br />Final PCB (just placed the order).
<br />
<br />Comments, anyone?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jarhmander</b> [ Wed Apr 08, 2009 12:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Do you use KiCAD?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kathaku</b> [ Wed Apr 08, 2009 12:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That last picture was a screenshot from Ultiboard, which is what's available at my school.  It has a spiffy 'view 3D' option that I used to get the picture.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cybertron</b> [ Wed Apr 08, 2009 8:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Whoa Sweet
<br />
<br />It uses flash memory right? And the little MCU can remember the settings.
<br />
<br />Good job with the prototype! I usually just order the boards and they work <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kathaku</b> [ Thu Apr 09, 2009 7:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, specifically I am using SST39SF040 flash ROMs.  The MCU stores the iNes header into it's own EEPROM on every program and sends info to the PLD to tell it how to operate.
<br />
<br />And thanks.  I don't think I can even roughly guess how much work this has been for me so far.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Thu Apr 09, 2009 3:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Nice, very nice!
<br />
<br />I'm glad you went with the 'on-the-fly' programming, that's the way to go.  I guess the upload speed is limited to the flash, I wonder what speeds you're getting.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kathaku</b> [ Thu Apr 09, 2009 4:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The prototype itself is actually limited by the serial port speeds.  Running at 57k6 baud I'm getting roughly 200uS per byte.  The ROM chips themselves are rated for a max of 20uS per byte, so hopefully by using an SD card I can improve my upload speeds by a factor of 10.
<br />
<br />I've also got some 4Mb SRAM chips that I wanted to try on one of the boards when I get them.  You'd have to reprogram each time you turned the system on but it would allow the fastest possible program times.
<br />
<br />A large game can program in roughly 1.5 to 2 minutes, a small one (NROM) is obviously much faster.  It was a big goal of mine to achieve the fastest program speeds possible so I'm excited to get working on the SD interface. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>bunnyboy</b> [ Thu Apr 09, 2009 4:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You should be able to replace your current serial interface with an FTDI USB serial chip really easy.  That would gain a large speed advantage with few or no software changes.  Changing to one of their parallel USB chips would be another speed bump, again with little or no changes on the PC side.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cd_vision</b> [ Fri Apr 10, 2009 7:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Always good to hear from Bunnyboy. We do love the Powerpak here at home. 
<br />
<br />Neoflash seems to have dropped off the map, is anyone in the world working on a flash cart for the SNES? I like Tototek's a whole lot, but that Parallel port programmer just fails on my new PC. Suckage.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cybertron</b> [ Fri Apr 10, 2009 11:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />cd_vision, I developed a SNES flash cart and USB programmer. Its going to be on sale real soon now! I will make an announcement in the SNES forum when it is.
<br />
<br />I love FTDI chips! I always use the parallel version, you can connect it to a data bus and have the MCU control it. With this you should be able to get your 10x speedup.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cd_vision</b> [ Sat Apr 11, 2009 9:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">cybertron wrote:</div><div class="quotecontent">cd_vision, I developed a SNES flash cart and USB programmer. Its going to be on sale real soon now! I will make an announcement in the SNES forum when it is.</div>
<br />
<br />I love you, make babies with me. I don't care if we're both men.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kathaku</b> [ Sat Apr 11, 2009 11:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'll have to look into those FTDI chips, the reason I initially went with serial is because this is a thesis for school with deadlines, etc. so I wanted to keep it simple (well, at least the parts that could be).  As well, I'm relatively new to the field (in the 2nd year of my course) and I haven't been familiarized with USB options.
<br />
<br />A parallel version that can work on a data bus would actually work really well.  I could use the LCD data bus and share that again with the FTDI.  Thanks <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Mike</b> [ Sat Apr 11, 2009 6:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The fact that you're making schematics readily available, makes you worthy of great respect.
<br />
<br />Well played!
<br />
<br />Mike

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kathaku</b> [ Mon Apr 13, 2009 4:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well the software is where all the real work is, especially that for the CPLD.  If they are of interest, I could post a schematic.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Mike</b> [ Tue Apr 14, 2009 9:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The main reasons why Flash Carts aren't popular as of yet is that... oh, you already know. Greed and all that <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />
<br />
<br />Schematics would be awesome. Even a how-to instructable would greatly widen the variety of people who can achieve something like this, as such multiplying the amount of people who can work with NES Dev.
<br />
<br />Math plus good human nature... it's a Canadian thing

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
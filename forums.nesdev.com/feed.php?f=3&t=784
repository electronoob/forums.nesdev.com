<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=784" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2005-11-28T00:55:26-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=784</id>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-11-28T00:55:26-07:00</updated>
<published>2005-11-28T00:55:26-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7041#p7041</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7041#p7041"/>
<title type="html"><![CDATA[Changes in fine horizontal scroll during scanline rendering]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7041#p7041"><![CDATA[
<div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />its working but i use precalculated AT BYTE location and SHR amount.<br /></div><br />Define "precalculated". The real PPU 'calculates' the attribute byte address/shift based on the nametable address it fetched from immediately prior.<br />(when I say 'calculates' I mean 'takes certain groups of bits from the VRAM address and rearranges them')<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Mon Nov 28, 2005 12:55 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2005-11-27T22:36:31-07:00</updated>
<published>2005-11-27T22:36:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7037#p7037</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7037#p7037"/>
<title type="html"><![CDATA[Changes in fine horizontal scroll during scanline rendering]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7037#p7037"><![CDATA[
its working but i use precalculated AT BYTE location and SHR amount.<br />That's why i was asking.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sun Nov 27, 2005 10:36 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-11-27T13:15:04-07:00</updated>
<published>2005-11-27T13:15:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7019#p7019</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7019#p7019"/>
<title type="html"><![CDATA[Changes in fine horizontal scroll during scanline rendering]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7019#p7019"><![CDATA[
The upper 2 bits of each pixel come from the Attribute Table - if your emulator has working video then you should already know where to get it from.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Sun Nov 27, 2005 1:15 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2005-11-26T21:23:49-07:00</updated>
<published>2005-11-26T21:23:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7000#p7000</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7000#p7000"/>
<title type="html"><![CDATA[Changes in fine horizontal scroll during scanline rendering]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=7000#p7000"><![CDATA[
Quietust i have just implemented the pixel processing in that way, but i still dont figure out how the 2 upper bits of the pixel (AT) are fetched.<br />Any help?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sat Nov 26, 2005 9:23 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-11-24T22:16:06-07:00</updated>
<published>2005-11-24T22:16:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6959#p6959</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6959#p6959"/>
<title type="html"><![CDATA[Changes in fine horizontal scroll during scanline rendering]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6959#p6959"><![CDATA[
I still haven't implemented low-level sprite evaluation (I've got some partial code, but it needs some significant changes before it'll work properly) and my audio core is nowhere near perfect - once I get a CopyNES, though, I'll be able to check things more easily.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Thu Nov 24, 2005 10:16 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anonymous]]></name></author>
<updated>2005-11-24T20:20:03-07:00</updated>
<published>2005-11-24T20:20:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6956#p6956</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6956#p6956"/>
<title type="html"><![CDATA[Changes in fine horizontal scroll during scanline rendering]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6956#p6956"><![CDATA[
Thanks! I had to mull over your diagram for about 15 minutes before it all clicked, but I think I get it now.<br /><br />So... what (if any) aspects of the NES hardware *aren't* currently supported by Nintendulator? Have you reached absolute perfection (in terms of basic CPU/PPU/APU emulation, not weird mappers) yet? It seems like you're getting pretty close.<p>Statistics: Posted by Guest — Thu Nov 24, 2005 8:20 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-11-23T23:15:07-07:00</updated>
<published>2005-11-23T23:15:07-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6936#p6936</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6936#p6936"/>
<title type="html"><![CDATA[Re: Changes in fine horizontal scroll during scanline render]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6936#p6936"><![CDATA[
<div class="quotetitle">Josh G. wrote:</div><div class="quotecontent"><br />Would the PPU render the same pixels from a tile twice if it were decremented?<br /></div><br /><br />Yes.<br /><br /><div class="quotetitle">Josh G. wrote:</div><div class="quotecontent"><br />I thought the shift register only worked 1 way. I initially assumed that the fine X scroll just told the PPU how many bits to throw away from the left edge of the first tile rendered, but apparently that's not the case.<br /></div><br /><br />When the PPU renders, it uses a series of 16-bit shift registers with 8-bit parallel inputs at the beginning and 8-bit parallel outputs at the end. The fine X scroll simply selects which of the 8 output bit sets to feed to the sprite unit. This also explains why the PPU must fetch TWO tiles in advance at the end of each scanline before it can start rendering - it takes that much data to "prime" the shift register so it can output valid data.<br /><br />And now, a diagram to attempt to illustrate what's going on:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">                  Input bits, coming from the logic that fetches tiles<br />                  * * * * * * * *<br />                  | | | | | | | |<br />===============   =============== parallel load happens every 8 pixels<br />== Shift Reg ==&lt;--== Shift Reg == serial shift happens every 1 pixel<br />===============   =============== there are 4 of these &#40;tile and attrib bits&#41;<br />| | | | | | | |    ***<br />* * * * * * * *    \|/ fine horizontal scroll, selects one of those 8 bits<br />|_|_|_|_|_|_|_|_____|____<br />                         |<br />                         |<br />                         Output to sprite comparitor</div><br /><br />I do not know for a fact that this is the way that the PPU works, but, given all current evidence, it is extremely likely that it does work this way.<br /><br /><div class="quotetitle">Josh G. wrote:</div><div class="quotecontent"><br />It was stated that some games (e.g. SMB3 during the matching subgame) rely upon this behavior.<br /></div><br /><br />It does not rely on this behavior, but correct behavior will produce a characteristic graphical glitch at the edge of each scrolling area (which is visible on a real NES).<br /><br /><div class="quotetitle">Josh G. wrote:</div><div class="quotecontent"><br />Does Nintendulator currently emulate this?<br /></div><br /><br />It does.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Wed Nov 23, 2005 11:15 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anonymous]]></name></author>
<updated>2005-11-23T21:45:10-07:00</updated>
<published>2005-11-23T21:45:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6934#p6934</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6934#p6934"/>
<title type="html"><![CDATA[Changes in fine horizontal scroll during scanline rendering]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=784&amp;p=6934#p6934"><![CDATA[
Quietust posted here previously that changes in the fine horizontal scroll value via $2005 (low 3 bits) take effect immediately, even in the middle of a scanline. The coarse scroll value (high 5 bits) would obviously not be implemented until the next scanline when the tile index would be reloaded. I'm having trouble understanding how changing the fine X scroll value in mid-scanline would work. Would the PPU render the same pixels from a tile twice if it were decremented? I thought the shift register only worked 1 way. I initially assumed that the fine X scroll just told the PPU how many bits to throw away from the left edge of the first tile rendered, but apparently that's not the case. Can anyone shed some light on how this would actually work? It was stated that some games (e.g. SMB3 during the matching subgame) rely upon this behavior. Does Nintendulator currently emulate this?<p>Statistics: Posted by Guest — Wed Nov 23, 2005 9:45 pm</p><hr />
]]></content>
</entry>
</feed>
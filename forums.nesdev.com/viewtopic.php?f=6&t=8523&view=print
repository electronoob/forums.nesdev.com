<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Extended MML - MMLX</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Extended MML - MMLX</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=8523">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=8523</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccampbell</b> [ Sun Jan 15, 2012 9:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Extended MML - MMLX</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm new here, but I wanted to share a little project I've been working on for the last few weeks.  It is called MMLX which stands for MML Extended.  
<br />
<br />I only recently started getting into chiptune composing.  Since I'm a programmer MML feels more natural to me than using a tracker, but in some ways it is limiting, and there is not a whole lot of easy to find examples/documentation.  
<br />
<br />I decided to try writing my own language to make some things easier to do using MML.
<br />
<br />Essentially MMLX is a superset of MML.  It offers a bunch of features that MML on its own does not support including:
<br />
<br />- Defining instruments
<br />- Portamento
<br />- ADSR Envelopes
<br />- Using variables
<br />- Transposing
<br />
<br />You can check out the project at:
<br /><!-- m --><a class="postlink" href="https://github.com/ccampbell/mmlx">https://github.com/ccampbell/mmlx</a><!-- m -->
<br />
<br />Getting started guide:
<br /><!-- m --><a class="postlink" href="https://github.com/ccampbell/mmlx/wiki/Getting-Started">https://github.com/ccampbell/mmlx/wiki/Getting-Started</a><!-- m -->
<br />
<br />Documentation:
<br /><!-- m --><a class="postlink" href="https://github.com/ccampbell/mmlx/wiki/Documentation">https://github.com/ccampbell/mmlx/wiki/Documentation</a><!-- m -->
<br />
<br />I should point out that I have only tested it using Python 2.6 on Mac OS 10.6 and only using the default 5 NES voices A-E.  I believe it should run on Linux as well.  I don't have a windows machine to test on so if anyone is interested feel free to fork the project on GitHub and add Windows support.
<br />
<br />I also have included a TextMate/Sublime Text 2 bundle with syntax highlighting that looks like this:
<br /><!-- m --><a class="postlink" href="http://f.cl.ly/items/3B2B2R12303j0E283E3b/mmlx.html">http://f.cl.ly/items/3B2B2R12303j0E283E3b/mmlx.html</a><!-- m -->
<br />
<br />I also hope that someone else might find this useful.
<br />
<br />I look forward to hearing feedback.  
<br />
<br />Please report bugs and feature requests on GitHub: 
<br /><!-- m --><a class="postlink" href="https://github.com/ccampbell/mmlx/issues">https://github.com/ccampbell/mmlx/issues</a><!-- m -->
<br />
<br />Craig

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Mon Jan 16, 2012 3:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sounds great !
<br />
<br />I agree MML feels more natural than using a tracker. What I hate so much about trackers is that you have to remember all sort of key combinations to do every single thing, and you have to remember all effects code. Quite annoying if you ask me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Mon Jan 16, 2012 1:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Extended MML - MMLX</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I like it. Here are my suggestions:<ul><li>Non-layout mode for instrument definitions (like how Haskell supports layout and non-layout modes)</li><li>Allow blocks of commands defined in a variable to take parameters</li><li>Include arithmetic macros</li><li>Feature for custom temperament (instead of being limited to 12-TET, you could have Bohlen-Pierce, etc)</li><li>In PPMCK, I have seen some of the assembly code is not well optimized; you could replace a subroutine call followed by return from current subroutine, with just a unconditional jump. I have fixed it in my computer, but it is probably a good idea to correct MMLX too</li></ul>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Mon Jan 16, 2012 2:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The worst unoptimised thing in PPMCK is how it stores sequence data !
<br />
<br />For example [c c d d]4 would be stored as : ccddccddccddccdd instead of being effectively stored like you type it which would save a lot of bytes !
<br />
<br />But this is the fault of the compiler/replay engine, not the language.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jarhmander</b> [ Mon Jan 16, 2012 7:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">The worst unoptimised thing in PPMCK is how it stores sequence data !<br /><br />For example [c c d d]4 would be stored as : ccddccddccddccdd instead of being effectively stored like you type it which would save a lot of bytes !<br /><br />But this is the fault of the compiler/replay engine, not the language.</div>
<br />
<br />The [ ~ ] command is a kind of  <span style="text-decoration: underline">unrolled</span> loop. If you want it to really repeat &lt;num&gt; times without unrolling, use |: ~ :|.
<br />But it's a fact that PPMCK store its data rather unoptimised; every command occupy a byte. At least, it has one advantage, it's easier to extend its capability (it's simpler that, say, a rather compressed one)
<br />
<br />EDIT: Disabled a smiley.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Mon Jan 16, 2012 9:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">But this is the fault of the compiler/replay engine, not the language.</div>I was refering to the codes built in to the replay engine (where call followed by return is used where jump could be used instead; this is a kind of tail calls optimization), although your points are something too.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>RushJet1</b> [ Mon Jan 16, 2012 11:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Actually PPMCK does support transposing with the "K" command.  K&lt;num&gt; transposes &lt;num&gt; semitones.
<br />
<br />I did something like this awhile ago in vb.net that basically reads in a NSF file, separates the channels and makes each note/command an object, so it's possible to do whatever you want.  The first thing I did was portamento, and it works well enough but I am lazy and never finished it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccampbell</b> [ Tue Jan 17, 2012 6:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">RushJet1 wrote:</div><div class="quotecontent">Actually PPMCK does support transposing with the "K" command.  K&lt;num&gt; transposes &lt;num&gt; semitones.</div>
<br />
<br />Thanks, I totally did not realize this.  I guess I can take out that feature <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccampbell</b> [ Tue Jan 17, 2012 6:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">~J-@D!~ wrote:</div><div class="quotecontent"><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">The worst unoptimised thing in PPMCK is how it stores sequence data !<br /><br />For example [c c d d]4 would be stored as : ccddccddccddccdd instead of being effectively stored like you type it which would save a lot of bytes !<br /><br />But this is the fault of the compiler/replay engine, not the language.</div><br /><br />The [ ~ ] command is a kind of  <span style="text-decoration: underline">unrolled</span> loop. If you want it to really repeat &lt;num&gt; times without unrolling, use |: ~ :|.<br />But it's a fact that PPMCK store its data rather unoptimised; every command occupy a byte. At least, it has one advantage, it's easier to extend its capability (it's simpler that, say, a rather compressed one)<br /><br />EDIT: Disabled a smiley.</div>
<br />
<br />This is a good point.  It seems to me that the [] notation allows for nested loops where the |: :| does not.  I could add an optimization so that if you write a loop such as [c c d d]4 and it is not nested it rewrites it as |: c c d d :|4 when it generates the MML.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Jan 18, 2012 1:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I never knew about the |: :¦ notation. It seems absent from the tutorials/docs I've used, although this symbol looks very like music sheet repeat symbol. I'll have to give it a try.
<br />
<br />I think I know why [] does allow nested repeats and not |: :|
<br />I assumes |: :| stores the location in ROM of the sequence data where |: is located, and when they met the :| it decrease a counter and go back to |:
<br />Of course if you place two |: before one :|, the second will override the first, and this won't work as supposed.
<br />
<br />On the other side it would have been possible to reserve memory for a repeat location stack, so you can repeat repeats, as many times as the stack allows it. But it'll quickly take a lot of memory if you have to do it for all channels.
<br />I remember Secret of Mana's sound engine did something like that (I've fully disassembled it).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Wed Jan 18, 2012 2:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">On the other side it would have been possible to reserve memory for a repeat location stack, so you can repeat repeats, as many times as the stack allows it. But it'll quickly take a lot of memory if you have to do it for all channels. </div>
<br />
<br />XPMCK does that, but it only allows up to two levels.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cak</b> [ Wed Jan 18, 2012 7:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Extended MML - MMLX</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">zzo38 wrote:</div><div class="quotecontent">Feature for custom temperament (instead of being limited to 12-TET, you could have Bohlen-Pierce, etc)</div>
<br />I quite like this idea. Ideally, you should be able to make your own scales by assigning custom frequencies to note letters. In the case of scales with more than 12 notes per octave, perhaps you could use extra flats/sharps (ex: c c+ c++), similar to microtonal sheet music. Also, you should be able to switch scales during a song.
<br />
<br />It would also be nice to be able to use ties when defining note length with the "l" command. (ex: l4^7)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ionustron</b> [ Thu Jan 19, 2012 1:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">mic_ wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">On the other side it would have been possible to reserve memory for a repeat location stack, so you can repeat repeats, as many times as the stack allows it. But it'll quickly take a lot of memory if you have to do it for all channels. </div><br /><br />XPMCK does that, but it only allows up to two levels.</div>
<br />
<br />I noticed this too when I played with XPMCK and've been dieing for it in PPMCK ever since.
<br />
<br />I've felt discouraged to ask this for some time feeling it to be a dumb question, but I must ask; as I like to double up channel voices together, knowing it's rather inefficient, is it possible in nes standards to point one channel to the playback data of another channel, have both play simultaneously and perhaps save some space?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Thu Jan 19, 2012 5:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">is it possible in nes standards to point one channel to the playback data of another channel, have both play simultaneously and perhaps save some space?</div>
<br />The way I solved that was to implement what I call <a href="http://jiggawatt.org/muzak/xpmck/manual.html#pattern" class="postlink">patterns</a> (kind of like subroutines).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ionustron</b> [ Thu Jan 19, 2012 10:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />haven't checked xpmck in a while, very happy to see updates=)

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=4376" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2008-09-12T11:47:40-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=4376</id>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2008-09-12T11:47:40-07:00</updated>
<published>2008-09-12T11:47:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37061#p37061</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37061#p37061"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37061#p37061"><![CDATA[
Well, that an VBLANK time is very long on the GBA.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Fri Sep 12, 2008 11:47 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-09-12T04:17:47-07:00</updated>
<published>2008-09-12T04:17:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37044#p37044</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37044#p37044"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37044#p37044"><![CDATA[
<div class="quotetitle">MottZilla wrote:</div><div class="quotecontent"><br /><div class="quotetitle">pizzach wrote:</div><div class="quotecontent">The NES really isn't that forgiving of mistakes.<br /></div><br />I think you mean, Computers aren't forgiving of mistakes.</div><br />Unless pizzach meant "compared to something like the GBA". On the GBA, you usually don't have to worry about exceeding vblank time because the VRAM is dual-ported and everything else (HDMA, audio) can be double-buffered.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Sep 12, 2008 4:17 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[MottZilla]]></name></author>
<updated>2008-09-11T17:20:18-07:00</updated>
<published>2008-09-11T17:20:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37025#p37025</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37025#p37025"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37025#p37025"><![CDATA[
<div class="quotetitle">pizzach wrote:</div><div class="quotecontent"><br />The NES really isn't that forgiving of mistakes.  <img src="http://forums.nesdev.com/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /></div><br /><br />I think you mean, Computers aren't forgiving of mistakes. They only do what you are telling them to do, it's your job not to tell them to drive off a cliff. <img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=";)" title="Wink" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1726">MottZilla</a> — Thu Sep 11, 2008 5:20 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2008-09-11T07:10:49-07:00</updated>
<published>2008-09-11T07:10:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37003#p37003</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37003#p37003"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37003#p37003"><![CDATA[
Sprite zero hit is bit 6  (%01000000).  You're checking bit 5 (%00100000) which is sprite overflow.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Thu Sep 11, 2008 7:10 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pizzach]]></name></author>
<updated>2008-09-11T03:30:12-07:00</updated>
<published>2008-09-11T03:30:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37000#p37000</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37000#p37000"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=37000#p37000"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Anywho yeah sometimes what seems like at the time the weirdest writes can cause graphical glitches. I once accidentally got this waterfall effect on my background from what seemed at the time a perfectly logical $2007/$2008 write<br /></div><br />I know what you mean atari2600a.   <img src="http://forums.nesdev.com/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> Fighting to get backgrounds working and then getting them to scroll and split correctly took a lot of trial and error.   The NES really isn't that forgiving of mistakes.  <img src="http://forums.nesdev.com/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> <br /><br />Anywho, thanks for the quick reply Jeroen and tepples!  I currently use the old perl version of p65 and test using fceu. (p65 gave me the least problems on my linux box.)  I am not sure if it's a vblank problem or not in my code.  I did some code cleaning/optimization and bought myself some more time before problems started again.  Now if I add another line, in stead of the screen glitching, the collision logic starts acting funky.<br /><br />I made a small effort to make sure the important graphical updates come first in my vblank loop. It seems like adding code to the start/reset function is asking for threading type problems so I have avoided it.  Im going to post the main code for my vblank loop (it isn't too long)<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">      lda busy ;skip if the previous vblank didn't complete &#40;frame dropping&#41;<br />      bne irq<br /><br /><br />      lda #$01<br />      sta busy<br /><br />         ;set tile loading vertical &#40;increment of 32&#41;<br />         lda #%10001100<br />         sta $2000<br />            ldy column'pointer   ;column<br />            ldx #0   ;screen<br />            stx target'viewport<br />            jsr load'tile'column<br />      <br />            ldx #4   ;screen<br />            stx target'viewport<br />            jsr load'tile'column<br />         lda #%10001000<br />         sta $2000<br /><br />         inc timer<br />         jsr scroll'screen<br />         jsr update'sprite<br />         jsr react'to'input<br /><br />         ;Split the screen for a non-scrolling section<br />   *      lda $2002  ; wait for sprite 0 collision<br />         cmp #%00100000<br />         beq -<br />         lda #$00 <br />         sta $2006  ; Reset VRAM<br />            sta $2006<br />         sta $2005  ; Scroll X<br />         sta $2005  ; Scroll Y<br /><br />         jsr detect'collision;<br /><br />      lda #$00<br />      sta busy</div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3670">pizzach</a> — Thu Sep 11, 2008 3:30 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[atari2600a]]></name></author>
<updated>2008-09-10T15:08:33-07:00</updated>
<published>2008-09-10T15:08:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36980#p36980</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36980#p36980"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36980#p36980"><![CDATA[
<div class="quotetitle">Jeroen wrote:</div><div class="quotecontent"><br />Ya cause really your compiler usually tellls you when you exeed program size. AND most emulators do this to. So ya you're probably exeeding vblank.<br /></div><br /><br />Compiler?<br /><br />Anywho yeah sometimes what seems like at the time the weirdest writes can cause graphical glitches.  I once accidentally got this waterfall effect on my background from what seemed at the time a perfectly logical $2007/$2008 write! <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br /><br />(I forget the details)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3367">atari2600a</a> — Wed Sep 10, 2008 3:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Jeroen]]></name></author>
<updated>2008-09-10T09:49:26-07:00</updated>
<published>2008-09-10T09:49:26-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36966#p36966</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36966#p36966"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36966#p36966"><![CDATA[
Ya cause really your compiler usually tellls you when you exeed program size. AND most emulators do this to. So ya you're probably exeeding vblank.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3369">Jeroen</a> — Wed Sep 10, 2008 9:49 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-09-10T09:40:23-07:00</updated>
<published>2008-09-10T09:40:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36965#p36965</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36965#p36965"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36965#p36965"><![CDATA[
If your code is updating the VRAM, then a glitch as you add lines of code might mean you're exceeding the vertical blanking interval. Does the problem disappear if you change your NES emulator to PAL mode?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Sep 10, 2008 9:40 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[pizzach]]></name></author>
<updated>2008-09-10T08:55:55-07:00</updated>
<published>2008-09-10T08:55:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36964#p36964</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36964#p36964"/>
<title type="html"><![CDATA[is the program program rom really that small?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4376&amp;p=36964#p36964"><![CDATA[
Hi guys!  I'm new here!<br /><br />I have been poking around NES programming for the first time this last week.  Mapper 0 has been nice because it is so simple.  Today my graphics started glitching if I add around two to three new lines of code.  I know haven't been especially careful about optimization yet, but still I was a bit surprised it was so fast hitting the limit in program size.  <img src="http://forums.nesdev.com/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> <br /><br />Super Mario Bros must have been using some mad optimization right? I managed to implement left/right scrolling, left/right movement/ and hit detection for the right side.  I'm a bit baffled how Nintendo managed to stick so much into such a small cart.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3670">pizzach</a> — Wed Sep 10, 2008 8:55 am</p><hr />
]]></content>
</entry>
</feed>
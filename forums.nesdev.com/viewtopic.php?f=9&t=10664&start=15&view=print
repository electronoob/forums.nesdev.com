<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Weirdest cartridge ever?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Weirdest cartridge ever?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=10664">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=10664</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Mon Dec 23, 2013 4:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cardtridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, as the proverb says, &quot;if you want something well done, do it yourself&quot;. So that's what I have done  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> <br /><br />I've coded a dirty PHP script (who needs Python?) which decodes a FSK encoded WAV. Here's the decoded checksum wave file:<br /><br /><strong>LOWER BANK</strong> ($8000-$BFFF):<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF,<br />C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000,<br />A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF,<br />C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000,<br />A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF,<br />6695, 94AA, FCBD, B9AE, 11F5, 7A9E, 5766, 9FD3, E710, 82B1, 3CCA, C51F, 76B0, 6BD3, 832A, 680F,<br />A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF,<br />6695, 94AA, FCBD, B9AE, 11F5, 7A9E, 5766, 9FD3, E710, 82B1, 3CCA, C51F, 76B0, 6BD3, 832A, 680F,<br />-----------------------------------------------------------------------------------------------<br />A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF,<br />C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000,<br />A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF,<br />C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000,<br />A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF,<br />6695, 94AA, FCBD, B9AE, 11F5, 7A9E, 5766, 9FD3, E710, 82B1, 3CCA, C51F, 76B0, 6BD3, 832A, 680F,<br />A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF, A1EC, 7894, 2D1C, 1ABF,<br />6695, 94AA, FCBD, B9AE, 11F5, 7A9E, 5766, 9FD3, E710, 82B1, 3CCA, C51F, 76B0, 6BD3, 832A, 680F,<br /></div><br /><strong>UPPER BANK</strong> ($C000-$FFFF):<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF,<br />C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000,<br />1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF,<br />C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000,<br />2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C,<br />6695, 94AA, FCBD, B9AE, 11F5, 7A9E, 5766, 9FD3, E710, 82B1, 3CCA, C51F, 76B0, 6BD3, 832A, 680F,<br />2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, A1EC, A1EC, A1EC, A1EC,<br />680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F,<br />-----------------------------------------------------------------------------------------------<br />1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF,<br />C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000,<br />1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF, 1ABF,<br />C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000, C000,<br />2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C,<br />6695, 94AA, FCBD, B9AE, 11F5, 7A9E, 5766, 9FD3, E710, 82B1, 3CCA, C51F, 76B0, 6BD3, 832A, 680F,<br />2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, 2D1C, A1EC, A1EC, A1EC, A1EC,<br />680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F, 680F,<br /></div><br /><br />If we take each checksum and build a map of those with the same checksum we get:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101,<br />0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404,<br />0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101,<br />0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404,<br />0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103,<br />0505, 0606, 0707, 0808, 0909, 0a0a, 0b0b, 0c0c, 0d0d, 0e0e, 0f0f, 1010, 1111, 1212, 1313, 1414,<br />0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103, 0000, 0200, 0300, 0100,<br />0514, 0614, 0714, 0814, 0914, 0a14, 0b14, 0c14, 0d14, 0e14, 0f14, 1014, 1114, 1214, 1314, 1414,<br />-----------------------------------------------------------------------------------------------<br />0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101,<br />0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404,<br />0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101, 0001, 0201, 0301, 0101,<br />0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404, 0404,<br />0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103,<br />0505, 0606, 0707, 0808, 0909, 0a0a, 0b0b, 0c0c, 0d0d, 0e0e, 0f0f, 1010, 1111, 1212, 1313, 1414,<br />0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103, 0003, 0203, 0303, 0103, 0000, 0200, 0300, 0100,<br />0514, 0614, 0714, 0814, 0914, 0a14, 0b14, 0c14, 0d14, 0e14, 0f14, 1014, 1114, 1214, 1314, 1414,<br /></div><br />First byte is lower bank, second byte is upper bank.<br /><br />Finally, here's the quick'n'dirty PHP script&#058;<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&lt;?php<br /><br />function dat_read($f) {<br />&nbsp; &nbsp;do {<br />&nbsp; &nbsp;&nbsp; &nbsp;$line = fgets($f);<br />&nbsp; &nbsp;&nbsp; &nbsp;if ($line === false)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;<br />&nbsp; &nbsp;} while (substr($line, 0, 1) == &quot;;&quot;);<br /><br />&nbsp; &nbsp;return array(<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;time&quot; =&gt; floatval(substr($line, 0, 16)),<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;value&quot; =&gt; floatval(substr($line, 17, 16))<br />&nbsp; &nbsp;);<br />}<br /><br />function get_sign($sample) {<br />&nbsp; &nbsp;$min = 0.3;<br />&nbsp; &nbsp;if ($sample &gt;= $min)<br />&nbsp; &nbsp;&nbsp; &nbsp;return 1;<br />&nbsp; &nbsp;if ($sample &lt;= -$min)<br />&nbsp; &nbsp;&nbsp; &nbsp;return -1;<br />&nbsp; &nbsp;return 0;<br />}<br /><br />function sign_read($f) {<br />&nbsp; &nbsp;$t = dat_read($f);<br />&nbsp; &nbsp;if ($t === false)<br />&nbsp; &nbsp;&nbsp; &nbsp;return false;<br />&nbsp; &nbsp;return array(<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;time&quot; =&gt; $t&#91;&quot;time&quot;&#93;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;sign&quot; =&gt; get_sign($t&#91;&quot;value&quot;&#93;)<br />&nbsp; &nbsp;);<br />}<br /><br />function is_transition($old, $new) {<br />&nbsp; &nbsp;if ($old&#91;&quot;sign&quot;&#93; == -1 &amp;&amp; $new&#91;&quot;sign&quot;&#93; == 1)<br />&nbsp; &nbsp;&nbsp; &nbsp;return true;<br />&nbsp; &nbsp;if ($old&#91;&quot;sign&quot;&#93; == 1 &amp;&amp; $new&#91;&quot;sign&quot;&#93; == -1)<br />&nbsp; &nbsp;&nbsp; &nbsp;return true;<br />&nbsp; &nbsp;return false;<br />}<br /><br />function read_freq($f) {<br />&nbsp; &nbsp;do {<br />&nbsp; &nbsp;&nbsp; &nbsp;$a = sign_read($f);<br />&nbsp; &nbsp;&nbsp; &nbsp;if ($a === false)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;<br />&nbsp; &nbsp;} while ($a&#91;&quot;sign&quot;&#93; == 0);<br /><br />&nbsp; &nbsp;do {<br />&nbsp; &nbsp;&nbsp; &nbsp;$b = sign_read($f);<br />&nbsp; &nbsp;&nbsp; &nbsp;if ($b === false)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;<br />&nbsp; &nbsp;} while (!is_transition($a, $b));<br /><br />&nbsp; &nbsp;do {<br />&nbsp; &nbsp;&nbsp; &nbsp;$c = sign_read($f);<br />&nbsp; &nbsp;&nbsp; &nbsp;if ($c === false)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;<br />&nbsp; &nbsp;} while ($c&#91;&quot;sign&quot;&#93; == $b&#91;&quot;sign&quot;&#93;);<br /><br />&nbsp; &nbsp;return 1 / ($c&#91;&quot;time&quot;&#93; - $a&#91;&quot;time&quot;&#93;);<br />}<br /><br />function read_bit($f) {<br />&nbsp; &nbsp;$freqerr = 1000;<br /><br />&nbsp; &nbsp;$freq = read_freq($f);<br />&nbsp; &nbsp;if ($freq === false)<br />&nbsp; &nbsp;&nbsp; &nbsp;return false;<br /><br />&nbsp; &nbsp;if (abs($freq - 1200) &lt; $freqerr)<br />&nbsp; &nbsp;&nbsp; &nbsp;return 0;<br />&nbsp; &nbsp;if (abs($freq - 2400) &lt; $freqerr) {<br />&nbsp; &nbsp;&nbsp; &nbsp;$freq = read_freq($f);<br />&nbsp; &nbsp;&nbsp; &nbsp;if ($freq == false)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;<br />&nbsp; &nbsp;&nbsp; &nbsp;if (abs($freq - 2400) &lt; $freqerr)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return 1;<br />&nbsp; &nbsp;}<br /><br />&nbsp; &nbsp;return false;<br />}<br />&nbsp; &nbsp;<br />function read_byte($f) {<br />&nbsp; &nbsp;do {<br />&nbsp; &nbsp;&nbsp; &nbsp;$start = read_bit($f);<br />&nbsp; &nbsp;&nbsp; &nbsp;if ($start === false)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;<br />&nbsp; &nbsp;} while ($start == 1);<br /><br />&nbsp; &nbsp;$byte = 0;<br />&nbsp; &nbsp;for ($i = 0; $i &lt; 8; $i++) {<br />&nbsp; &nbsp;&nbsp; &nbsp;$bit = read_bit($f);<br />&nbsp; &nbsp;&nbsp; &nbsp;if ($bit === false)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;<br />&nbsp; &nbsp;&nbsp; &nbsp;$byte = $byte &gt;&gt; 1 | $bit &lt;&lt; 7;<br />&nbsp; &nbsp;}<br /><br />&nbsp; &nbsp;if (read_bit($f) !== 1)<br />&nbsp; &nbsp;&nbsp; &nbsp;return false;<br /><br />&nbsp; &nbsp;return chr($byte);<br />}<br />&nbsp; &nbsp;<br />$f = fopen(&quot;checksum.dat&quot;, &quot;r&quot;);<br />$fout = fopen(&quot;checksum.bin&quot;, &quot;wb&quot;);<br /><br />while (!feof($f)) {<br />&nbsp; &nbsp;echo read_byte($f);<br />}<br /></div><br />The .dat file is generated using SOX (&quot;sox input.wav -t dat output.dat&quot;).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Dec 23, 2013 12:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cardtridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's really weird. Assuming no collisions, and actually 16k-at-a-time banking (and no 8k banking, as FCEUX thinks), I see the following two intended modes:<br /><br />if <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">[$5000] &amp; $70 == $70</tt>, UNROM-style banking on the lower nybble from one 256k slice<br />if <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">[$5000] &amp; $50 == $00</tt>, UNROM-style banking on the lowest two bits from a disjoint 64k slice<br /><br />There's also a lot of abnormal things that show up, too. I tentatively think they're accidental? e.g. maybe the two modes where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">[$5000] &amp; $50 == $10</tt> are open-bus?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Mon Dec 23, 2013 1:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cardtridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've attached two files:<br />FULLNH.BIN is the dump of all banks according to the map in my previous post. First $4000 (16384) bytes is bank 0, then bank 1, bank 2, and so on.<br />MENU.NES (rename it to .UNF) is the game menu. Start splash displays ok but the menu is apparently not working correctly in FCEUX 2.2.1.<br /><br />EDIT: Here is the TapeDump plugin I've coded for the checksums:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">inesHDR&nbsp; &nbsp;.equ 0060h&nbsp; &nbsp;;$60-$6F is the iNES header for sending<br />inesPRG&nbsp; &nbsp;&nbsp; &nbsp;.equ inesHDR+4&nbsp; &nbsp;;Num of 16K banks in iNES header<br />send_hdr:&nbsp; &nbsp; .equ 01FAh&nbsp; &nbsp;;Send iNES header as audio<br />send_ldr:&nbsp; &nbsp; .equ 01FDh&nbsp; &nbsp;&nbsp; &nbsp;;Send 5 sec tone (for CopyNES to use)<br />send_byte:&nbsp; &nbsp;.equ 0200h<br /><br />bank:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e0h<br />bank_l:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e0h<br />bank_h:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e1h<br />bank_target:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e2h<br /><br />checksum_l:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e3h<br />checksum_h:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e4h<br /><br />&nbsp; &nbsp;.org 0400h<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;all_dump&nbsp; &nbsp;;All dumping start<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;hdr_dump&nbsp; &nbsp;;send iNES header<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;prg_dump&nbsp; &nbsp;;send PRG only<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;;send CHR only<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;&nbsp; &nbsp;;A basic SRAM dumper<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;&nbsp; &nbsp;;set PRG bank<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;&nbsp; &nbsp;;set CHR bank<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;&nbsp; &nbsp;;send CRCs???<br /><br /><br />all_dump:&nbsp; &nbsp; ;Send ALL data!&nbsp; (Fairly short for NROM)<br />&nbsp; &nbsp;jsr hdr_dump&nbsp; &nbsp;;Determine header &amp; send it!<br />&nbsp; &nbsp;jsr Send_PRG<br /><br />mpr_end:<br />&nbsp; &nbsp;rts&nbsp; &nbsp;;done<br /><br />hdr_dump:&nbsp; &nbsp; ;Determine info in the header and dump it.<br />&nbsp; &nbsp;jsr send_ldr&nbsp; &nbsp;;5-second minimum lead-in<br />&nbsp; &nbsp;jsr send_hdr&nbsp; &nbsp;;Send iNES header<br />&nbsp; &nbsp;rts<br />&nbsp; &nbsp;<br />prg_dump:&nbsp; &nbsp; ;Send the PRG data only.<br />&nbsp; &nbsp;jsr send_ldr&nbsp; &nbsp;;5-second minimum lead-in<br />&nbsp; &nbsp;jsr Send_PRG<br />&nbsp; &nbsp;rts<br /><br />;----------------------<br />Send_PRG:<br />&nbsp; &nbsp;ldx #0&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; Load page<br /><br />dumploop:<br />&nbsp; &nbsp;stx 05000h<br /><br />&nbsp; &nbsp;lda #080h<br />&nbsp; &nbsp;jsr dumpbank<br /><br />&nbsp; &nbsp;lda #0C0h<br />&nbsp; &nbsp;jsr dumpbank<br /><br />&nbsp; &nbsp;inx<br />&nbsp; &nbsp;bne&nbsp; &nbsp;dumploop<br /><br />&nbsp; &nbsp;rts<br />;----------------------<br />dumpbank:<br />&nbsp; &nbsp;sta bank_h<br />&nbsp; &nbsp;clc<br />&nbsp; &nbsp;adc #040h<br />&nbsp; &nbsp;sta bank_target<br /><br />&nbsp; &nbsp;ldy #0<br />&nbsp; &nbsp;sty bank_l<br />&nbsp; &nbsp;sty checksum_h<br />&nbsp; &nbsp;sty checksum_l<br /><br />sumbyte:<br />&nbsp; &nbsp;lda (bank),y<br /><br />&nbsp; &nbsp;clc<br />&nbsp; &nbsp;adc checksum_l<br />&nbsp; &nbsp;sta checksum_l<br />&nbsp; &nbsp;bcc&nbsp; &nbsp;noincreaseh<br />&nbsp; &nbsp;inc&nbsp; &nbsp;checksum_h<br /><br />noincreaseh:<br />&nbsp; &nbsp;iny<br />&nbsp; &nbsp;bne&nbsp; &nbsp;sumbyte<br /><br />&nbsp; &nbsp;inc bank_h<br />&nbsp; &nbsp;lda bank_h<br />&nbsp; &nbsp;cmp bank_target<br />&nbsp; &nbsp;bne sumbyte<br /><br />&nbsp; &nbsp;lda checksum_l<br />&nbsp; &nbsp;jsr&nbsp; &nbsp;send_byte<br /><br />&nbsp; &nbsp;lda checksum_h<br />&nbsp; &nbsp;jsr send_byte<br /><br />&nbsp; &nbsp;rts<br />&nbsp; &nbsp;;----------<br /><br />&nbsp; &nbsp;.end<br /></div><br />And this is the one I've coded to dump the banks in order:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;;vectors for standard system calls<br /><br />inesHDR&nbsp; &nbsp;.equ 0060h&nbsp; &nbsp;;$60-$6F is the iNES header for sending<br />inesPRG&nbsp; &nbsp;&nbsp; &nbsp;.equ inesHDR+4&nbsp; &nbsp;;Num of 16K banks in iNES header<br />send_hdr:&nbsp; &nbsp; .equ 01FAh&nbsp; &nbsp;;Send iNES header as audio<br />send_ldr:&nbsp; &nbsp; .equ 01FDh&nbsp; &nbsp;&nbsp; &nbsp;;Send 5 sec tone (for CopyNES to use)<br />send_byte:&nbsp; &nbsp;.equ 0200h<br /><br />bank:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e0h<br />bank_l:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e0h<br />bank_h:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e1h<br />bank_target:&nbsp; &nbsp;.equ&nbsp; &nbsp;00e2h<br /><br />&nbsp; &nbsp;.org 0400h<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;all_dump&nbsp; &nbsp;;All dumping start<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;hdr_dump&nbsp; &nbsp;;send iNES header<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;prg_dump&nbsp; &nbsp;;send PRG only<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;;send CHR only<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;&nbsp; &nbsp;;A basic SRAM dumper<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;&nbsp; &nbsp;;set PRG bank<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;&nbsp; &nbsp;;set CHR bank<br />&nbsp; &nbsp;jmp&nbsp; &nbsp;mpr_end&nbsp; &nbsp;&nbsp; &nbsp;;send CRCs???<br /><br /><br />all_dump:&nbsp; &nbsp; ;Send ALL data!&nbsp; (Fairly short for NROM)<br />&nbsp; &nbsp;jsr hdr_dump&nbsp; &nbsp;;Determine header &amp; send it!<br />&nbsp; &nbsp;jsr Send_PRG<br /><br />mpr_end:<br />&nbsp; &nbsp;rts&nbsp; &nbsp;;done<br /><br />hdr_dump:&nbsp; &nbsp; ;Determine info in the header and dump it.<br />&nbsp; &nbsp;jsr send_ldr&nbsp; &nbsp;;5-second minimum lead-in<br />&nbsp; &nbsp;jsr send_hdr&nbsp; &nbsp;;Send iNES header<br />&nbsp; &nbsp;rts<br />&nbsp; &nbsp;<br />prg_dump:&nbsp; &nbsp; ;Send the PRG data only.<br />&nbsp; &nbsp;jsr send_ldr&nbsp; &nbsp;;5-second minimum lead-in<br />&nbsp; &nbsp;jsr Send_PRG<br />&nbsp; &nbsp;rts<br /><br />;----------------------<br />Send_PRG:<br />&nbsp; &nbsp;ldx #000h<br />&nbsp; &nbsp;jsr dump_bank<br /><br />&nbsp; &nbsp;ldx #003h<br />&nbsp; &nbsp;jsr dump_bank<br /><br />&nbsp; &nbsp;ldx #001h<br />&nbsp; &nbsp;jsr dump_bank<br /><br />&nbsp; &nbsp;ldx #002h<br />&nbsp; &nbsp;jsr dump_bank<br /><br />&nbsp; &nbsp;ldx #010h<br />&nbsp; &nbsp;jsr dump_bank<br /><br />&nbsp; &nbsp;ldx #050h<br />dump_50h:<br />&nbsp; &nbsp;jsr dump_bank<br /><br />&nbsp; &nbsp;inx<br />&nbsp; &nbsp;cpx #060h<br />&nbsp; &nbsp;bne dump_50h<br /><br />&nbsp; &nbsp;rts<br />;----------------------<br />dump_bank:<br />&nbsp; &nbsp;stx 05000h<br />&nbsp; &nbsp;lda #080h<br />&nbsp; &nbsp;sta bank_h<br /><br />&nbsp; &nbsp;ldy #0<br />&nbsp; &nbsp;sty bank_l<br /><br />dump_byte:<br />&nbsp; &nbsp;lda (bank),y<br />&nbsp; &nbsp;jsr send_byte<br /><br />&nbsp; &nbsp;iny<br />&nbsp; &nbsp;bne&nbsp; &nbsp;dump_byte<br /><br />&nbsp; &nbsp;inc bank_h<br />&nbsp; &nbsp;lda bank_h<br />&nbsp; &nbsp;cmp #0C0h<br />&nbsp; &nbsp;bne dump_byte<br /><br />&nbsp; &nbsp;rts<br />&nbsp; &nbsp;;----------<br /><br />&nbsp; &nbsp;.end<br /></div><br /><br />DEC.BIN is the decoded output of the checksum plugin.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1064">DEC.BIN</a> [1 KiB]
			</span><br />
			<span class="gensmall">Downloaded 14 times</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1063">FULLNH.BIN</a> [336 KiB]
			</span><br />
			<span class="gensmall">Downloaded 16 times</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1062">MENU.NES</a> [64.05 KiB]
			</span><br />
			<span class="gensmall">Downloaded 17 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Mon Dec 23, 2013 2:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cardtridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">That's really weird. Assuming no collisions, and actually 16k-at-a-time banking (and no 8k banking, as FCEUX thinks), I see the following two intended modes:<br /><br />if <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">[$5000] &amp; $70 == $70</tt>, UNROM-style banking on the lower nybble from one 256k slice<br />if <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">[$5000] &amp; $50 == $00</tt>, UNROM-style banking on the lowest two bits from a disjoint 64k slice<br /><br />There's also a lot of abnormal things that show up, too. I tentatively think they're accidental? e.g. maybe the two modes where <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">[$5000] &amp; $50 == $10</tt> are open-bus?</div><br />Those chunks whose checksum is $C000 are indeed full of $FF. I don't know if that's open bus or not, because unless the card has some sorta of pull-up resistors embedded on the mapper, or the NOAC I'm using has, I think it should read the last byte from the current instruction rather than $#FF.<br /><br />By the way I've fixed the checksum, which were wrong. The mapping was ok, though.<br /><br />EDIT: There is apparently an additional write to $5400 before the menu starts. Maybe modifies in some way the 8KB CHR-RAM, and that's why the menu doesn't display well on a emulator?<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;:031C:A9 70&nbsp; &nbsp; &nbsp;LDA #$70<br />&nbsp; &nbsp;:031E:8D 00 50&nbsp; STA $5000 = #$50<br />&nbsp; &nbsp;:0321:8D 00 54&nbsp; STA $5400 = #$50<br />&nbsp; &nbsp;:0324:A9 00&nbsp; &nbsp; &nbsp;LDA #$00<br />&nbsp; &nbsp;:0326:8D 00 50&nbsp; STA $5000 = #$50<br />&nbsp; &nbsp;:0329:A9 10&nbsp; &nbsp; &nbsp;LDA #$10<br />&nbsp; &nbsp;:032B:8D 00 54&nbsp; STA $5400 = #$50<br />&nbsp; &nbsp;:032E:A9 F0&nbsp; &nbsp; &nbsp;LDA #$F0<br />&nbsp; &nbsp;:0330:8D 00 54&nbsp; STA $5400 = #$50<br />&nbsp; &nbsp;:0333:A9 80&nbsp; &nbsp; &nbsp;LDA #$80<br />&nbsp; &nbsp;:0335:8D 00 54&nbsp; STA $5400 = #$50<br />&nbsp; &nbsp;:0338:A9 C0&nbsp; &nbsp; &nbsp;LDA #$C0<br />&nbsp; &nbsp;:033A:8D 00 54&nbsp; STA $5400 = #$50</div><br /><br />EDIT2: I've been peeking with a multimeter and this is the connections the mapper has with the CHR part of the cart:<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">PPU A12 -&gt; MAPPER<br />MAPPER -&gt; CHR-RAM A12<br />PPU /A13 -&gt; CHR-RAM /CE + MAPPER<br />PPU A10 -&gt; CHR-RAM A10 + MAPPER<br />PPU A11 -&gt; CHR-RAM A11 + MAPPER<br />MAPPER -&gt; CIRAM A10</div><br />Notice that the A12 from the NES has no direct electronic connection with the A12 on the CHR-RAM. Doesn't the MMC1 has a configuration like this?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Wed Dec 25, 2013 6:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cartridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So I've finally moved my lazy ass off, desoldered the EPROMs using my crappy solder pump, and dumped them.<br /><br />Apparently the smaller EPROM contains the menu (and maybe other stuff), because the cart was still working after removing the large one, which contains some copyrighted games by Namcot and Konami.<br /><br />Because of the copyrighted games, I'm hosting the link to the file in the space my ISP provides, which is based in Spain, where is legal to link to files as long as you're not the one hosting it: <!-- m --><a class="postlink" href="http://webs.ono.com/socram8888/file/">http://webs.ono.com/socram8888/file/</a><!-- m --><br /><br />I've dumped it as .UNF because the total program size isn't a power of two. The .UNF contains the program as two different program chunks, being PRG0 the smaller EPROM (which contains, at least, the menu) and PRG1 the large EPROM (which contains the games, apparently)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Joe</b> [ Wed Dec 25, 2013 4:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cartridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've compared the ROM you dumped with the checksums, and none of them match the first half of PRG1. Is there another bankswitch register that you might have missed?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Wed Dec 25, 2013 6:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cardtridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">socram8888 wrote:</div><div class="quotecontent">EDIT2: I've been peeking with a multimeter and this is the connections the mapper has with the CHR part of the cart:<br />[...]<br />Notice that the A12 from the NES has no direct electronic connection with the A12 on the CHR-RAM. Doesn't the MMC1 has a configuration like this?<br /></div>MMC1 and VRC1. Also the MMC2 and MMC4 if you disable the tile-triggered banking.<br /><br />May as well check CPU/PRG A13, too, to see if it really is only 16+16 banking.<br /><br />Regarding the printer port, the standard printer port has 8 unidirectional data lines (pins 2-9), 4 bidirectional open-collector control lines (pins 1,14,16,17), and 5 unidirectional status lines (pins 10-13,15). The rest (pins 18-25) are ground. Are all connected?<br /><br /><div class="quotetitle">Joe wrote:</div><div class="quotecontent">I've compared the ROM you dumped with the checksums, and none of them match the first half of PRG1.<br /></div>I'm getting off-by-ones, but otherwise they match.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$ dd if=FULLNH.BIN bs=16k count=1 | gccrun 'int sum=0; while (!feof(stdin)) { sum+=fgetc(stdin); } printf(&quot;%X&quot;,sum);'<br />1CA1EB<br />$ dd if=FULLNH.BIN bs=16k count=1 skip=1 | gccrun 'int sum=0; while (!feof(stdin)) { sum+=fgetc(stdin); } printf(&quot;%X&quot;,sum);'<br />1F1ABE</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Joe</b> [ Wed Dec 25, 2013 6:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cardtridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">I'm getting off-by-ones, but otherwise they match.</div>I'm referring to PRG1 in the UNIF dump; it is 512KB but only the second half matches any of the checksums.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Wed Dec 25, 2013 8:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cartridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh! Yes, sorry, misread. That's consistent: he (we?) was only able to find 64KiB+256KiB of banks using only the register at $5000. So yeah, there's probably another register hidden somewhere.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Wed Dec 25, 2013 9:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cardtridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">I'm getting off-by-ones, but otherwise they match.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$ dd if=FULLNH.BIN bs=16k count=1 | gccrun 'int sum=0; while (!feof(stdin)) { sum+=fgetc(stdin); } printf(&quot;%X&quot;,sum);'<br />1CA1EB<br />$ dd if=FULLNH.BIN bs=16k count=1 skip=1 | gccrun 'int sum=0; while (!feof(stdin)) { sum+=fgetc(stdin); } printf(&quot;%X&quot;,sum);'<br />1F1ABE</div></div><br />Isn't the off-by-one due to processing the EOF at the end? You don't get EOF until *after* you've done an fgetc() that fails and returns EOF.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Thu Dec 26, 2013 3:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cartridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've traced the mapper pinout using a multimeter:<br /><img src="http://i.imgur.com/TH2WtwQ.jpg" alt="Image" /><br /><br />Weird stuff:<br /><ul><li>PPU A12 is gated, and there is no direct electrical connection from the PPU A12 and the CHR-RAM. That signal (AFAIK) is used to count scanlines, but there is no /IRQ output.</li><li>PPU A3 is also gated. I can't guess what this could be used for.</li><li>PPU A0 and PPU A9 are connected the mapper and the CHR-RAM. Dunno what their purpouse could be.</li><li>One of the unmarked pins goes directly to a single 100nF capacitor. The other goes to a (unexistant) LED cathode.</li><li>PRG-ROM A18 isn't next to PRG-ROM A17, so that might suggest it is in another register.</li></ul><br />Incorrect stuff:<br /><ul><li>PROM-A13 is also connected to the cart edge, so it should be labeled &quot;CPU-A13&quot; instead.</li></ul>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Thu Dec 26, 2013 12:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cartridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">socram8888 wrote:</div><div class="quotecontent">PPU A12 is gated, and there is no direct electrical connection from the PPU A12 and the CHR-RAM. That signal (AFAIK) is used to count scanlines, but there is no /IRQ output.<br /></div><a href="http://wiki.nesdev.com/w/index.php/INES_Mapper_163" class="postlink">A mapper</a> with a vaguely similar set of registers has a mode where it explicitly counts scanlines and can be to configured to automatically forces nametables AND sprites to both be from PPU $0000 before the split or PPU $1000 after the split…Then again, it could also <strong>just</strong> be 4+4 banking, like VRC1.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><ul><li>PPU A0 and PPU A9 are connected the mapper and the CHR-RAM. Dunno what their purpose could be.</li><li>PPU A3 is also gated. I can't guess what this could be used for.</li></ul></div>Just a guess: It could be a 1bpp mode. If you had some places you only wanted 1bpp for tiles, the 32KiB CHR RAM would provide up to 4096 tiles instead of just 2048. In that case, the connection to PPU A11..A4 would allow you to switch whether any given tile was 1bpp or 2bpp. (Connecting to PPU A2..A0 lets you change whether any given <em>scanline</em> was 1bpp or 2bpp, but that doesn't seem useful to me.)<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">One of the unmarked pins goes directly to a single 100nF capacitor.<br /></div>Could be a power-on reset sorta thing?<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The other goes to a (nonexistent) LED cathode.<br /></div>Maybe intended as a &quot;recording now&quot; light?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Thu Dec 26, 2013 3:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cartridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, the 1bpp mode is feasible. In the main menu, if you look at the nametables text tiles overlap.<br /><br />I am aware of the 163 mapper: I a proud owner of an original Lei Di Huan Bi Ka Qiu Chuan Shuo cartridge. Probably the best pirate original ever, both in terms of complexity and quality <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />However AFAIK it has been used only by Shenzhen Nanjing, and these Pyramid keyboards are also older, so it is very unlikely that these could be based on mapper 163.<br /><br />Well, on the software side, I am attempting to implement the keyboard on FCEUX. Apparently it is a 13*8 matrix, and its protocol it's quite simple:<br /> - Write $#02 to $4016 to reset row index<br /> - Write $#01 to $4016 to latch current row button values<br /> - Read $4017 bit D1 eight times. If a key is pressed it will be one, or zero otherwise.<br /><br />I don't know the distribution of the matrix yet, but I am working on it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Fri Dec 27, 2013 12:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cartridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><img src="http://i.imgur.com/v9H8KNt.png" alt="Image" /><br /> <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Fri Dec 27, 2013 2:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Weirdest cartridge ever?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />And here's the patch for FCEUX 2.2.2. Apply using <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">patch -u -p1 &lt; fceux2.2.2-pec586.patch</tt>.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1076">fceux2.2.2-pec586.patch.txt</a> [13.55 KiB]
			</span><br />
			<span class="gensmall">Downloaded 22 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
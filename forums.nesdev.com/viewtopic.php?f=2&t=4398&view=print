<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Pegs - ROM and Source</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Pegs - ROM and Source</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4398">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4398</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Sat Sep 20, 2008 1:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Pegs - ROM and Source</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hey guys. I've finally finished Pegs. I've got the source up for download now, and a label that my friend made for me for those people that like to make their own carts.
<br />
<br />Anyway, what I hope to accomplish out of releasing the source is your feedback! Note that there are a couple of spots where I was getting towards the end of the project, and I threw in some quick code that looks nasty, but whatever. I'm just ready to move on haha
<br />
<br />So, if you guys check out the source, I would like feedback on how you might have done things differently in certain spots, etc. Remember, I'm not too great at this kind of thing, so words of wisdom are always awesome. Also, sorry it is all in one .asm file. I was going to do some .includes and the like towards the end, but like I said, I just want to move on.
<br />
<br /><!-- m --><a class="postlink" href="http://robertlbryant.com/gaming/download/pegs_source.7z">http://robertlbryant.com/gaming/download/pegs_source.7z</a><!-- m -->
<br />
<br />Thanks for your time!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Sat Sep 20, 2008 3:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Great game! I played about 4 rounds. The highest rank I got was "Meh...", haha. Very nice coding, and nice DMC samples. Oh, and also, the music is really good too.
<br />
<br />I'll get around to looking at the code. I just wanted to say that first! Great job!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Laserbeak43</b> [ Sat Sep 20, 2008 5:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />congrats!!
<br />good to see this one working. cant wait to load it up and play it on the TV  <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MetalSlime</b> [ Sat Sep 20, 2008 7:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Awesome!  Congrats on finishing your game and thanks a lot for sharing the source code! How long did it take you from start to finish?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Sat Sep 20, 2008 8:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for the comments guys : ) 
<br />
<br />I know it's a small game and all, but I've been learning stuff and then trying to apply as much of one thing to a program as I can. This way I feel like I'm accomplishing something, and at the same time I am making a bunch of routines that I can port to other programs, which hopefully those will be more ambitious in the future. But hey, whatever works!
<br />
<br />MetalSlime: I just checked my instant messaging logs, and it appears I started developing this on July 31st. So, about 1 1/2 months, along with the proper amount of procrastination thrown in, of course ; )

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Sep 21, 2008 1:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You did a good job, and I hope your son will agree to have his voice and face spreaded arround the world in a video game.
<br />
<br />Like I said before it would be great if you use $4011 for voices instead of just $4010/$4012/$4013 (since there is no action during voice samples). I can rewrite my encoder into jave so that it should be easier to use. Also I'm eventually taking C++ courses this year so I will <em>eventually</em> be able to write fully functional PC programms that doesn't require JRE, and why not move onto GBA dev and DSdev ? (don't worry I won't leave NESdev like that)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Sun Sep 21, 2008 2:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Roth wrote:</div><div class="quotecontent">MetalSlime: I just checked my instant messaging logs, and it appears I started developing this on July 31st. So, about 1 1/2 months, along with the proper amount of procrastination thrown in, of course ; )</div>
<br />
<br />Ha! 1 1/2 months? That's a really short amount of time compared to my stuff. I mean, I made The Game in like 3 days, but anything else I haven't finished/put off for a very long time. Even my music engine/polygon engine I put off for a while. If you had a time machine, you could go back and sell this and make real money off of it! Hold onto it for when they make one =D.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Sun Sep 21, 2008 7:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@Bregalad:
<br />
<br />You better not leave nesdev like that! haha Don't worry, there are plenty of people around here that have done some of the other systems and still do nesdev, so it's all good : ) As for the $4011 thing, I followed <a href="http://nesdev.com/bbs/viewtopic.php?t=3706&amp;start=0" class="postlink">the thread Celius started</a> pretty much to a tee, so I'm hoping the $4011 I did helped it some.
<br />
<br />Oh, yeah, my son is a bit of a ham (a show-off), so he likes stuff like seeing himself on video, and all that jazz. I'm thinking I should get him to start taking vocal lessons, because at this rate I think he would make a great lead vocalist in a band just on the basis of how he likes to show-off haha
<br />
<br />@Celius:
<br />
<br />Well, I really wanted to get this done rather quickly, because I had no idea when GC2 was supposed to start. So I made sure to grind on it as much as I could. Also, I have lots of spare time, so I'm sure that really helps.
<br />
<br />Thanks again, guys!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun Sep 21, 2008 12:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />My first try, And I won it. One peg was left.
<br />
<br />BTW: good use of DPCM!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>d4s</b> [ Tue Sep 23, 2008 3:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Very cool, I really like the music!
<br />I'm not very good at this type of game, though...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Tue Sep 23, 2008 8:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Good job! you finished your game.  As for myself, I'm still in the planning (i.e. a little bit procrastinating) phase so it won't comes out anytime soon.  If I can find more time for it I will be happy.
<br />
<br />I had a quick glance at the code and for now, the only thing I would suggest is if you have a chance, you should:
<br />
<br />- separate the code by module (but that you already know)
<br />- Use symbolic constants for register and other number/strings that doesn't change
<br />
<br />As for 6502 coding, I cannot give much comment yet since I'm still learning it so it would be unwise to do so.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Wed Sep 24, 2008 5:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for your recommendations Banshaku!
<br />
<br />Yeah, my next project is definitely going to be more broken down in the source. I get tired of scrolling up and down so much haha A tab-based text editor will work wonders!
<br />
<br />As for the registers thing, well, that's something I just can't get used to. I find it easier to remember what a register is and what it does by it's number rather than a name. For example, when I hear PPUADDR or PPUMASK, I think... umm, what is that? I can never remember what it's (usual) associative name is. I got used to just using the numbers and not worrying about learning what others call them, or coming up with names for what I could call them. This only applies with those certain spots in the NES, though. I make sure to give names to sprites that I use regularly, and the buttons. I will probably have others that I will be declaring in bigger projects.
<br />
<br />Thanks for scoping out the source, it's exactly what I wanted  : )

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Wed Sep 24, 2008 7:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Roth wrote:</div><div class="quotecontent">Thanks for your recommendations Banshaku!<br /><br />Yeah, my next project is definitely going to be more broken down in the source. I get tired of scrolling up and down so much haha A tab-based text editor will work wonders!</div><br /><br />You're welcome.  <br /><br />This will be very important in your next project that you separate by modules if you want to be able to spot bugs more easily or reuse code.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">As for the registers thing, well, that's something I just can't get used to. I find it easier to remember what a register is and what it does by it's number rather than a name.</div><br /><br />I guess everyone as his own preference on how to do things. The problem is, like you said, everyone call it a different name, which make things harder to memorize.  If we could come up with a standard list of name for the nes community and everyone would use them, then it would be very easy to use.<br /><br />Here's an example on how I started to use them and may make you realize how useful they can be:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; Those constants are defined in an external file<br />PPU_CTRL&nbsp; &nbsp;= $2000<br /><br />; Flags for PPU<br />PPU_CTRL_ADR_NT0&nbsp; &nbsp; = %00000000 ; Select name table 0<br />PPU_CTRL_ADR_NT1&nbsp; &nbsp; = %00000001 ; Select name table 1<br />PPU_CTRL_ADR_NT2&nbsp; &nbsp; = %00000010 ; Select name table 2<br />PPU_CTRL_ADR_NT3&nbsp; &nbsp; = %00000011 ; Select name table 3<br />PPU_CTRL_INC32&nbsp; &nbsp; &nbsp; = %00000100 ; Increment PPU address by 32 bytes, going down<br />PPU_CTRL_SPR_PT1&nbsp; &nbsp; = %00001000 ; Sprite pattern table 1<br />PPU_CTRL_BG_PT1&nbsp; &nbsp; &nbsp;= %00010000 ; Background pattern table 1<br />PPU_CTRL_SPR_8x16&nbsp; &nbsp;= %00100000 ; Sprites are 8x16<br />PPU_CTRL_NMI&nbsp; &nbsp; &nbsp; &nbsp; = %10000000 ; write this value to PPUCTRL to enable NMI<br /><br />...<br />; Somewhere else in my code<br /><br />&nbsp; &nbsp;; init default value for ppu_crtl flags<br />&nbsp; &nbsp;lda #PPU_CTRL_NMI + PPU_CTRL_BG_PT1 + PPU_CTRL_ADR_NT1&nbsp; + PPU_CTRL_INC32 <br />&nbsp; &nbsp;sta zpPpuCtrlFlags&nbsp; &nbsp;; Store state of PPU_CTRL flags<br />&nbsp; &nbsp;sta PPU_CTRL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Then update it<br /></div><br /><br />So if you start to read my code, even thought you may not know by heart the value of very bit flags for the PPU_CTRL, you may be able to figure out (from the include file) that I tried to :<br /><ul>- Activate the NMI<br />- Want to use the pattern table 1 for background<br />- set increment 32 for addressing <br /></ul><br />If it was only bit flags, you would have seen %10011001, which doesn't tell you much what I tried to do, unless you have a hell of a memory about every bit flags of a specific register <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />  And if you look at the way I named my variable, you may realize that it's a zero page one because of the prefix at the beginning. This will help you for the variable scope.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Thanks for scoping out the source, it's exactly what I wanted</div>
<br />
<br />I didn't have a chance to read you code completely, I just parsed very fast and gave you my first impression. If I do have chance, I will let you know if I find something. But like I said, since I consider myself a beginner in 6502, I may not comment much on the coding itself because I'm concerned that I may induce you into error instead of helping you.
<br />
<br />Some of my own testing with CA65 are starting to do more interesting results. Not much but still interesting. At less than 1h per day during lunch time for a month, you cannot do much when you have to learn everything about the nes.  I may be able to post it soon once I find a way to host the file. You may find the files interesting for the way I structured them, maybe not for the 6502 code thought <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roth</b> [ Wed Sep 24, 2008 8:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Banshaku wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #PPU_CTRL_NMI + PPU_CTRL_BG_PT1 + PPU_CTRL_ADR_NT1&nbsp; + PPU_CTRL_INC32</div></div>
<br />
<br />Hey, that's a pretty interesting way of doing it! If I can break my old habits, I may think about trying something like that with the declarations. Pretty cool, actually! I was confused at how that would work at first because I didn't notice the pound sign at the beginning of it. Thanks for the tip : )

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Wed Sep 24, 2008 11:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Banshaku wrote:</div><div class="quotecontent">So if you start to read my code, even thought you may not know by heart the value of very bit flags for the PPU_CTRL, you may be able to figure out (from the include file) that I tried to :<br /><ul>- Activate the NMI<br />- Want to use the pattern table 1 for background<br />- set increment 32 for addressing <br /></ul></div>
<br />That's what comments are for; you could explain what's going on with shorter mnemonics in even less space than your definitions and it doesn't require a preprocessor.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
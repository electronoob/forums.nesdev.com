<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Complete U-force documentation</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Complete U-force documentation</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3564">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3564</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kevtris</b> [ Sat Sep 01, 2007 11:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Complete U-force documentation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, I have finally finished documenting the U-Force!   I took it apart, traced the circuit out, marvelled at how terribly it was built and designed, then documented the hell out of it.
<br />
<br />The mysterious analog mode is mysterious no more.  Long story short, the analog mode outputs a 5 bit value for each of the sensors (8) depending on how close/far away your hands are from it.
<br />
<br />The other 7 modes are digital, and are meant to be used with regular games.
<br />
<br />Here's the documentation of doom:
<br />
<br /><!-- m --><a class="postlink" href="http://tripoint.org/kevtris/mappers/incoming/uforce.txt">http://tripoint.org/kevtris/mappers/incoming/uforce.txt</a><!-- m -->
<br />
<br />Enjoy.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Sep 02, 2007 8:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What combination of HTTP proxy servers should someone on Comcast High Speed Internet use to reach tripoint.org?
<br />
<br />And would this be useful for DS style games with touch control? Or is it too rare?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>drk421</b> [ Sun Sep 02, 2007 10:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I can't connect to tripoint.org either.
<br />
<br />I get a DNS lookup, but can't make a socket connection.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kevtris</b> [ Sun Sep 02, 2007 4:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">drk421 wrote:</div><div class="quotecontent">I can't connect to tripoint.org either.<br /><br />I get a DNS lookup, but can't make a socket connection.</div>
<br />
<br />Sorry about this-  tripoint is hosted on a friend's DSL and he likes to unplug it when he plays online games.  I'm working on getting a real web host so this doesn't happen in the future.
<br />
<br />I have the domain name, I just have to find a good webhost that I can run PHP/mysql on.  Any ideas? <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Sep 02, 2007 4:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">kevtris wrote:</div><div class="quotecontent">I have the domain name, I just have to find a good webhost that I can run PHP/mysql on.  Any ideas? <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" /></div>
<br />Go Daddy works for me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gannon</b> [ Sun Sep 02, 2007 6:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you want, I can set you up an account on my shared host at DH, IIRC I still have 1.5 years on the account.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>drk421</b> [ Sun Sep 02, 2007 8:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I highly recommend icdsoft.com.
<br />
<br />Fast servers, PHP, Perl, Python, etc. They have excellent support too.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Skrybe</b> [ Mon Sep 03, 2007 3:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Oh, cool!  I was just thinking about getting in touch with you to see if you'd gotten into that U-Force I sent you.
<br />
<br />FYI, Broderbund created an official <a href="http://www.skrybe.net/stuff/ufdiag.zip" class="postlink">U-Force test cartridge</a> which, I'm assuming, uses the analog mode too.  I haven't messed with the rom much at all, though, so I might be wrong.
<br />
<br />Have you gotten to those last few weird Fami carts and pirates that I sent?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kevtris</b> [ Tue Sep 04, 2007 12:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Skrybe wrote:</div><div class="quotecontent">Oh, cool!  I was just thinking about getting in touch with you to see if you'd gotten into that U-Force I sent you.<br /><br />FYI, Broderbund created an official <a href="http://www.skrybe.net/stuff/ufdiag.zip" class="postlink">U-Force test cartridge</a> which, I'm assuming, uses the analog mode too.  I haven't messed with the rom much at all, though, so I might be wrong.<br /><br />Have you gotten to those last few weird Fami carts and pirates that I sent?</div>
<br />
<br />Haha funny you should ask, I was seeing if you were on IRC.  I dumped all the carts except two.  That dragon fighter and the funky study game one.  Both use weird MMC3 variants.  All others are dumped and processed, and the u-farce is 100% figured out.  I can send the stuff back soon.  I want to figure out these two carts though.    BTW what is the name of that taito game with the dood that is standing in front of a microphone when you fire it up?  The game then plays like a board game.  Setup screen has that red/white checkerboard like a picnic tablecloth.
<br />
<br />Oh yeah, the study/learn cart has a speech synthesizer chip on it.  It seems to make random gibberish noises though when the game runs normally so maybe it's not working right or something.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rbudrick</b> [ Tue Sep 04, 2007 3:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you use an NES to PC controller adapter, would the uforce work on the uforce test rom correctly?
<br />
<br />Did any other games (planned or released) use the uforce specifically?
<br />
<br />-Rob

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>peppers</b> [ Tue Sep 04, 2007 5:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The uforce was a third party controller it came with a special mirror bar to play mike tyson's super punch out as well as a airplane type clip witch was a T shaped thingy with two red buttons on each side (I know I am rambling) ofcourse it also plays with hand waveing there were no games made for it but it was made with some games in mind

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Skrybe</b> [ Wed Sep 05, 2007 5:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">kevtris wrote:</div><div class="quotecontent">I can send the stuff back soon.</div><br />Take your time, I'm in no hurry.<br /><br />That Taito game, according to GoodNES, is called Takeshi no Sengoku Fuuunji.<br /><br />I dunno what the deal is with the study cartridge.  I think it's supposed to be used with one of those "PC style" NES clones, with the keyboard and mouse and stuff.  Maybe there's something unique about the system it's supposed to go with that allows the voice chip to work?<br /><br />I'll catch you on IRC sometime soon, once my schedule is a little more forgiving.<br /><br /><div class="quotetitle">rbudrick wrote:</div><div class="quotecontent">Did any other games (planned or released) use the uforce specifically?</div>
<br />There's a collector that has a proto of the unreleased game Shufflepuck Cafe (an air hockey game, essentially.)  According to the label, it was designed for the U-Force, but I dunno if it uses the analog mode.  Shufflepuck Cafe was released in Japan, and there it just used the regular controller.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kevtris</b> [ Sat Sep 08, 2007 6:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Skrybe wrote:</div><div class="quotecontent"><div class="quotetitle">kevtris wrote:</div><div class="quotecontent">I can send the stuff back soon.</div><br />Take your time, I'm in no hurry.<br /><br />That Taito game, according to GoodNES, is called Takeshi no Sengoku Fuuunji.<br /><br />I dunno what the deal is with the study cartridge.  I think it's supposed to be used with one of those "PC style" NES clones, with the keyboard and mouse and stuff.  Maybe there's something unique about the system it's supposed to go with that allows the voice chip to work?<br /><br />I'll catch you on IRC sometime soon, once my schedule is a little more forgiving.<br /><br /><div class="quotetitle">rbudrick wrote:</div><div class="quotecontent">Did any other games (planned or released) use the uforce specifically?</div><br />There's a collector that has a proto of the unreleased game Shufflepuck Cafe (an air hockey game, essentially.)  According to the label, it was designed for the U-Force, but I dunno if it uses the analog mode.  Shufflepuck Cafe was released in Japan, and there it just used the regular controller.</div>
<br />
<br />It'd probably be trivial to make it use the u-force vs. a regular controller, be it in analog mode or not.  Thanks for the info btw.  I will change the name of that one.
<br />
<br />Since people were having trouble reading my document, I will post it here for funzies.
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">The U-force!<br />------------<br /><br />090107<br />K.Horton<br />--<br /><br /><br /><br /><br />Aah the U-Force.&nbsp; I called it the U-Farce.&nbsp; This piece of hardware was a fairly<br />unique infra-red &#40;IR&#41; controller that opens up like a book.&nbsp; On it are no less than<br />9 IR emitter detector pairs!&nbsp; Inside it, however, the thing is a freaking mess.<br />It is composed of 4 PCB's, one large board that takes up the entire bottom half of the<br />case, and three smaller boards in the top portion, all connected via a ton of ribbon<br />cables.&nbsp; There's bunches of hot melt glue holding the wiring in place.<br /><br />To &quot;calibrate&quot; the sensors, they had groups of no less than 8 resistors in parallel.<br />To perform the &quot;calibration&quot;, they would cut out some of the resistors!&nbsp; As you can<br />imagine, this is a mess.&nbsp; Some of the resistors had been re-soldered and re-cut in<br />cases to make it operate properly.&nbsp; &nbsp;I fully traced the circuitry of this thing out<br />and I cannot believe it functions.&nbsp; The design is pretty terrible and needed alot of<br />hand tweaking to make it function, as evidenced by capacitors &#40;up to three&#41; paralleled<br />in places.&nbsp; The caps range in value from 50 to 100 pf or so.&nbsp; These things must have<br />been a nightmare to make in any kind of production volumes due to all this hand<br />tweaking required.<br /><br />There's a COP320 microcontroller made by National Semi that runs at 20MHz.&nbsp; Also<br />included is a 74HC373 octal latch, feeding the 4021 like you'd find on any normal<br />NES controller.&nbsp; There is also an LM324 quad op-amp to amplify the analog feedback<br />from the sensors, which is then fed into an 8 pin ADC0831 made by National Semiconductor<br />also.&nbsp; Without further ado, let's get on with the show!<br /><br /><br />On the front are 6 slide switches and 2 pushbuttons.&nbsp; &nbsp;<br /><br />&#40;top&#41;<br />/------sensor 1-------\<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|sens. 2&nbsp; &nbsp; &nbsp; &nbsp;sens. 3|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|sens. 4&nbsp; &nbsp; &nbsp; &nbsp;sens. 5|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />***********************<br />***********************<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|sens. 6&nbsp; &nbsp; &nbsp; &nbsp; dummy |<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|sens. 7&nbsp; &nbsp; &nbsp; &nbsp;sens. 8|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switches |<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />\------sensor 9-------/<br />&#40;bottom&#41;<br /><br /><br />Here's my poor rendering of the sensor locations.&nbsp; The 9 sensors are listed.&nbsp; The<br />position marked &quot;dummy&quot; does not have a sensor present.<br /><br /><br />Switches:&nbsp; Included on the unit are 6 slide switches marked &quot;Turbo A&quot; &quot;Turbo B&quot;<br />and &quot;Game switches 1 through 4&quot;.&nbsp; Also included are two push buttons marked &quot;Start&quot;<br />and &quot;Select&quot;.<br /><br />Game switches 1 through 3 being in the down position puts the device into analog<br />mode.&nbsp; Any other combination results in a digital mode.<br /><br />The digital modes are the only modes that got used on games, as far as I know,<br />except for the &quot;U-Force Power Games&quot; prototype cart.<br /><br />Game switch 4 selects between two of the sensors.&nbsp; Sensor 5 &#40;up&#41; and 9 &#40;down&#41;.<br />Sensors 5 and 9 are mutually exclusive- only one can be used at a time, and it varies<br />depending on which position it is in.<br /><br />---<br /><br />In the following explaination, the first 4 digit number is the switch positions.<br />1 = up, 0 = down for switches 1 through 4, respectively.&nbsp; Below that are the 9<br />sensors, and what function on the standard controller they perform.<br /><br />If there's more than 1 entry for a sensor, that means distance plays a role in<br />how it functions.<br /><br />i.e. if there are three values marked 9.0 through 9.2:<br /><br />9.0 = farthest away<br />9.1 = closer<br />9.2 = closest<br /><br />0010<br />----<br />1 - start<br />2.0 - up + down + left <br />2.1 - up + down<br />2.2 - up + down + right<br />3.0 - up + down + left <br />3.1 - up + down<br />3.2 - up + down + right<br />4 - <br />5 - <br />6 - <br />7 - B &#40;only works if sensor 8 is covered&#41;<br />8 - A<br />9 - <br /><br />st- start<br />sl - select<br /><br />Note:&nbsp; Sensors 2 and 3 have an effect on each other.&nbsp; Below are all the interactions<br />that can occur.<br /><br />2.0 + 3.0 - left<br />2.0 + 3.1 - nothing<br />2.0 + 3.2 - nothing<br />2.1 + 3.0 - left<br />2.1 + 3.1 - nothing<br />2.1 + 3.2 - right<br />2.2 + 3.0 - nothing<br />2.2 + 3.1 - nothing<br />2.2 + 3.2 - right<br /><br /><br />0100<br />----<br />1 - up + down<br />2 - left<br />3 -<br />4 - right &#40;note: left/right are mutually exclusive&#41;<br />5 - <br />6 - B<br />7 - A<br />8 - <br />9 - up + down<br /><br />st- start<br />sl- select<br /><br />0110<br />----<br />1 - start<br />2 - B + up + down<br />3 - A + up + down<br />4 - B<br />5 - <br />6 - <br />7 - left &#40;note: left/right are mutually exclusive&#41;<br />8 - right<br />9 - A<br /><br />st- start<br />sl- select + up + down<br /><br />1000<br />----<br />1 - <br />2 - start<br />3 - start<br />4.0 - B + up + down<br />4.1 - B<br />5 - <br />6 - <br />7 - left<br />8 - right&nbsp; <br />9.0 - A + up + down<br />9.1 - A<br />9.2 - A + up + down<br /><br />st- start<br />sl- select + up + down<br /><br />Note: left/right are mutually exclusive.<br /><br /><br />1010<br />----<br />1 - up + down<br />2.0 - right <br />2.1 - up + down + right<br />3.0 - left <br />3.1 - up + down + left<br />4 - <br />5 - <br />6 - <br />7 - B &#40;only works if sensor 8 is covered&#41;<br />8 - A<br />9 - <br /><br />st- start<br />sl- select<br /><br /><br />1100 &amp; 1110<br />-----------<br />1 - start<br />2 - up + down + left<br />3 - up + down + right<br />4 - <br />5 - <br />6 - <br />7 - B &#40;only works if sensor 8 is covered&#41;<br />8 - A<br />9 - <br /><br />st- start<br />sl- select<br /><br />Note: if both sensors 2 and 3 are covered, output is up + down only<br /><br /><br />----------<br /><br />The two turbo switches control turbo for A and B like you'd suspect.&nbsp; They appear<br />to toggle at around a 10Hz rate when enabled.<br /><br /><br /><br />-----------<br /><br />U-force analog mode<br />-------------------<br /><br />clicking the first 3 game select switches down puts it into analog mode.&nbsp; In this<br />special mode, the controller will spit out the analog results of reading the sensors.<br />It only seems to update around 10Hz or so, and you must poll it and wait until it's<br />ready to give you results.<br /><br />The controller returns to you 9 bytes of data in this form:<br /><br />00: synch/start/select buttons &#40;bit0 = start, bit1 = select&#41; <br />01: sensor 7<br />02: sensor 8<br />03: sensor 5 / 9 &#40;depends on switch 4 position as noted above&#41;<br />04: sensor 6<br />05: sensor 4<br />06: sensor 2<br />07: sensor 3<br />08: sensor 1<br /><br /><br />To read the device, you first must read bytes from the controller port until<br />a value between 00h and 03h is received.&nbsp; If the value is greater than this,<br />discard it and continue to poll.<br /><br />Once a value of 00h to 03h is received, save it.&nbsp; The lower two bits contain<br />the start &#40;bit 0&#41; and select &#40;bit 1&#41; button states.<br /><br />Now, read 8 more bytes from the controller port.&nbsp; These 8 bytes will reflect <br />the analog readings of the 8 sensors.<br /><br />The analog output values are 5 bits long, with a &quot;presence&quot; bit.&nbsp; The presence<br />bit goes low when the sensor is being covered by the user.&nbsp; It goes high when<br />the sensor is uncovered.<br /><br />7&nbsp; bit&nbsp; 0<br />AAAA xxP0<br />---------<br /><br />A: upper 4 analog data bits<br />x: lower analog data bit &#40;both are the same value at all times&#41;<br />P: presence bit. 1 = sensor fully uncovered, 0 = sensor covered<br />0: always 0.<br /><br />The 5 bit analog output is in 2's complement form-&nbsp; 11111b is the lowest reading,<br />while 00001b is the highest.&nbsp; A reading of 00000b is not possible because it would<br />be seen as a synchronization byte.&nbsp; Moving your hand closer to the sensor results in<br />a LOWER reading.<br /><br />The game ROM inverts the bits before storing them, which is a good idea.&nbsp; It properly<br />inverts the readings so they read &quot;true&quot;.<br /><br />If you invert the bits, they become:<br /><br />7&nbsp; bit&nbsp; 0<br />AAAA AxP0<br />---------<br /><br />A: analog value &#40;varies between 00h and 1eh.&nbsp; closer = higher number&#41;.<br />P: presence bit.&nbsp; 1 = sensor covered, 0 = sensor uncovered.<br /><br /><br />-----<br /><br />Here is my U-force reading routine.&nbsp; It is shorter and more efficient than<br />theirs.&nbsp; Because of this, I had to add delays into the code so that the<br />device would function properly.&nbsp; This code returns the start/select state<br />in ufdat+00h, and then the 8 sensors in ufdat+01h through ufdat+08h.<br />Note that they are read last to first, sensor 1 appears at ufdat+01h.<br /><br /><br />readuf2:&nbsp; &nbsp; &nbsp; jsr readit<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta ufdat+00h&nbsp; ;store the start/select button here<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clc<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; adc #0fch<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bcs readuf2&nbsp; &nbsp; ;wait for FCh-FFh<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ldy #07h&nbsp; &nbsp; &nbsp; &nbsp;;8 bytes of data<br /><br />rloop2:&nbsp; &nbsp; &nbsp; &nbsp;jsr readit<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eor #0ffh<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta ufdat+01h,y<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dey<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bpl rloop2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br />readit:&nbsp; &nbsp; &nbsp; &nbsp;ldx #009h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stx 04016h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;required<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dex<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stx 04016h<br /><br />rloop1:&nbsp; &nbsp; &nbsp; &nbsp;lda 04016h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lsr a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rol ufdat+09h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; php&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;these two instructions waste alot of cycles<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; plp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;they are required also<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dex<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bne rloop1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lda ufdat+09h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br />----------<br /><br />And this is the routine that the U-force power games&#40;tm&#41; prototype cart uses.<br />It stores the results into a buffer in memory.<br /><br />ufdat+00h holds the state of the start/select buttons &#40;1 = pushed&#41;<br />ufdat+01h through 08h hold the analog values of the sensor readings.<br /><br /><br />readuf:&nbsp; &nbsp; &nbsp; &nbsp;jsr read1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;synch up with u-force &amp; read start/select<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsr read2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;read analog values from u-force<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br />read1:&nbsp; &nbsp; &nbsp; &nbsp; ldy #08h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - lda ufdat+00h,y&nbsp; &nbsp;;copy previous bytes to secondary memory<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta ufdat+0bh,y<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dey<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bpl -<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - jsr read3<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmp #0fch&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;read until byte &gt; FBh<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bcc -<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eor #0ffh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;invert<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta ufdat+00h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eor ufdat+0bh<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; and ufdat+00h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta ufdat+0bh&nbsp; &nbsp; &nbsp;;store changed buttons only<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br />read2:&nbsp; &nbsp; &nbsp; &nbsp; ldy #07h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;read 8 bytes worth of data<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - jsr read3<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta ufdat+01h,y<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dey<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bpl -<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br />;reads 1 byte from controller port &amp; inverts result&#40;very poorly&#41;<br />read3:&nbsp; &nbsp; &nbsp; &nbsp; lda #001h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta 04016h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lda #000h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta 04016h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsr read4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lda ufdat+09h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br />read4:&nbsp; &nbsp; &nbsp; &nbsp; lda #000h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta ufdat+09h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ldx #008h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clc<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - lda 04016h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eor #0ffh<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; and #001h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ora ufdat+09h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sta ufdat+09h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; asl ufdat+09h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dex<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bne -<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ror ufdat+09h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br /></div>

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
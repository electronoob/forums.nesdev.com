<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=8499" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2012-01-09T19:53:49-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=8499</id>
<entry>
<author><name><![CDATA[BMF54123]]></name></author>
<updated>2012-01-09T19:53:49-07:00</updated>
<published>2012-01-09T19:53:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88705#p88705</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88705#p88705"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88705#p88705"><![CDATA[
In my Star Soldier competition hack, I run all of my custom code from WRAM to avoid bankswitching issues (the original game only had 32 KB of PRG ROM). At reset, I swap in the 8 KB bank containing my code, copy the whole thing to $6000-$7FFF, and then swap in the original bank, never touching it again. It feels like cheating, but it works... <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=935">BMF54123</a> — Mon Jan 09, 2012 7:53 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2012-01-09T17:47:09-07:00</updated>
<published>2012-01-09T17:47:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88704#p88704</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88704#p88704"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88704#p88704"><![CDATA[
<div class="quotetitle">cpow wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Zepper wrote:</div><div class="quotecontent">an <em><strong>invalid address</strong></em> range is any greater than $FFFF, or bigger than a WORD (2 bytes).<br /></div><br /><br />In the 6502 that is an impossible scenario.</div><br /><br /><strong>True</strong>, since it uses a 16-bit bus. I've read somewhere and in the Nintendulator source about invalid cases for PC address. *One* specific case is about the DMC address increment. Of course, you might say "it's $FFFF and will wrap to zero", but take the emulation case of having PC as unsigned int (4 bytes) instead of short (2 bytes). <br /><br />In short words, take the emulation side of it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Mon Jan 09, 2012 5:47 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cpow]]></name></author>
<updated>2012-01-09T08:11:49-07:00</updated>
<published>2012-01-09T08:11:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88679#p88679</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88679#p88679"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88679#p88679"><![CDATA[
<div class="quotetitle">Zepper wrote:</div><div class="quotecontent"><br />an <em><strong>invalid address</strong></em> range is any greater than $FFFF, or bigger than a WORD (2 bytes).<br /></div><br /><br />In the 6502 that is an impossible scenario.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3705">cpow</a> — Mon Jan 09, 2012 8:11 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2012-01-09T07:02:31-07:00</updated>
<published>2012-01-09T07:02:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88671#p88671</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88671#p88671"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88671#p88671"><![CDATA[
So the oversights in Mario Adventure go all the way back to first-party games, I take it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Jan 09, 2012 7:02 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[miker00lz]]></name></author>
<updated>2012-01-08T22:37:40-07:00</updated>
<published>2012-01-08T22:37:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88666#p88666</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88666#p88666"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88666#p88666"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">CHR-RAM actually is uninitialized when you boot a NES game.<br />And it's common for operating systems to set all variables to zero when the program reserves memory.<br />So I'd bet it was the opposite : Metroid didn't boot beacuse the CHR-RAM was cleared and it was supposed to be uninitialized.<br /></div><br /><br />You might think the opposite, but Metroid booted successfully with zeroed-out CHR-RAM, and failed to boot with uninitialized RAM.</div><br /><br />i was about to say the same time. that happened in my experience too!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4572">miker00lz</a> — Sun Jan 08, 2012 10:37 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Gilbert]]></name></author>
<updated>2012-01-08T18:35:39-07:00</updated>
<published>2012-01-08T18:35:39-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88661#p88661</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88661#p88661"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88661#p88661"><![CDATA[
Could this be a side-effect from it being ported from FDS?<br /><br />I think (but I'm not sure) the FDS BIOS has already cleared all the memory after booting so memory initialisation is not required for games. In fact, you should not even initialise (all) the memory yourself as you may have wiped clean some of the addresses reserved by the BIOS.<br /><br />Possibly the porters forgot about this when they adapt the game to cartridge format.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4653">Gilbert</a> — Sun Jan 08, 2012 6:35 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2012-01-08T16:39:38-07:00</updated>
<published>2012-01-08T16:39:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88657#p88657</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88657#p88657"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88657#p88657"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />CHR-RAM actually is uninitialized when you boot a NES game.<br />And it's common for operating systems to set all variables to zero when the program reserves memory.<br />So I'd bet it was the opposite : Metroid didn't boot beacuse the CHR-RAM was cleared and it was supposed to be uninitialized.<br /></div><br /><br />You might think the opposite, but Metroid booted successfully with zeroed-out CHR-RAM, and failed to boot with uninitialized RAM.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Sun Jan 08, 2012 4:39 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[runaway pancake]]></name></author>
<updated>2012-01-08T15:50:33-07:00</updated>
<published>2012-01-08T15:50:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88652#p88652</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88652#p88652"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88652#p88652"><![CDATA[
<div class="quotetitle">Zepper wrote:</div><div class="quotecontent"><br />It's odd. Your emulator should fetch the next opcode from any CPU address. I can tell you that an <em><strong>invalid address</strong></em> range is any greater than $FFFF, or bigger than a WORD (2 bytes).<br /></div><br /><br />Yup, that would be ideal!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5146">runaway pancake</a> — Sun Jan 08, 2012 3:50 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[runaway pancake]]></name></author>
<updated>2012-01-08T15:39:29-07:00</updated>
<published>2012-01-08T15:39:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88651#p88651</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88651#p88651"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88651#p88651"><![CDATA[
<div class="quotetitle">miker00lz wrote:</div><div class="quotecontent"><br />man you've got a serious task ahead of you if you want to emulate a NES at full speed on that CPU, it might be not possible honestly. the guy who did flea86 also wants to do a NES emulator now, you guys should compare notes... he hangs out on my IRC server most nights. the address is irc.rubbermallet.org channel #wtfpwnt<br /><br />his nick there is usually Flea86 or Valentin.<br /></div><br /><br />It's definitely possible, although not on an 8-bit micro like the flea86 (very cool btw) <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> The main constraint is RAM size, so I have two options really. Either add external memory and use an AVR32 (or ARM, but that's sorta been done with pocketnes), or have limited game support (&lt;=96k) and use a PIC32 or dsPIC (mapper 0 only). I'm using the 8052 board for the moment cause I have a video controller on it I can play with that I may end up having to use on the real board.<br /><br />Here's a prototype of an <a href="http://www.azosoft.com/armtendo.jpg" class="postlink">ARM+CPLD</a>board I made like 5 years ago but never wrote the emulator for. Depending on how portable the code turns out I may go back and finish that one too <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5146">runaway pancake</a> — Sun Jan 08, 2012 3:39 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2012-01-08T14:49:50-07:00</updated>
<published>2012-01-08T14:49:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88647#p88647</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88647#p88647"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88647#p88647"><![CDATA[
CHR-RAM actually is uninitialized when you boot a NES game.<br />And it's common for operating systems to set all variables to zero when the program reserves memory.<br />So I'd bet it was the opposite : Metroid didn't boot beacuse the CHR-RAM was cleared and it was supposed to be uninitialized.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Jan 08, 2012 2:49 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[miker00lz]]></name></author>
<updated>2012-01-08T13:34:48-07:00</updated>
<published>2012-01-08T13:34:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88644#p88644</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88644#p88644"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88644#p88644"><![CDATA[
<div class="quotetitle">3gengames wrote:</div><div class="quotecontent"><br />Here's an MMC1 test ROM. It tests to disable of the WRAM I believe as a mechanism to check if there's any extra hardware for external devices like copiers.<br /><br /><!-- m --><a class="postlink" href="http://www.mediafire.com/?549a755cdpr89dt">http://www.mediafire.com/?549a755cdpr89dt</a><!-- m --><br /><br />I'm going to guess that it says "Disabled writes:Accepted" which is what Metroid (I'm guessing) locks up or something on since it should be able to disable it with the MMC1.<br /></div><br /><br />for a brief period i had the WRAM always accessible even if MMC1 tries to disable it, but metroid still worked just fine.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4572">miker00lz</a> — Sun Jan 08, 2012 1:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2012-01-08T13:14:00-07:00</updated>
<published>2012-01-08T13:14:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88642#p88642</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88642#p88642"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88642#p88642"><![CDATA[
Metroid also sometimes refuses to boot if the initial state of CHR-RAM is bad.  FCEUX had problems with Metroid for a while, because CHR-RAM was some uninitialized memory from your PC, and not cleared or initialized to anything.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Sun Jan 08, 2012 1:14 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[3gengames]]></name></author>
<updated>2012-01-08T13:19:48-07:00</updated>
<published>2012-01-08T13:10:02-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88641#p88641</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88641#p88641"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88641#p88641"><![CDATA[
Here's an MMC1 test ROM. It tests to disable of the WRAM I believe as a mechanism to check if there's any extra hardware for external devices like copiers.<br /><br /><!-- m --><a class="postlink" href="http://www.mediafire.com/?549a755cdpr89dt">http://www.mediafire.com/?549a755cdpr89dt</a><!-- m --><br /><br />I'm going to guess that it says "Disabled writes:Accepted" which is what Metroid (I'm guessing) locks up or something on since it should be able to disable it with the MMC1.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4311">3gengames</a> — Sun Jan 08, 2012 1:10 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[miker00lz]]></name></author>
<updated>2012-01-08T13:06:51-07:00</updated>
<published>2012-01-08T13:06:51-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88640#p88640</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88640#p88640"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88640#p88640"><![CDATA[
<div class="quotetitle">foobaz wrote:</div><div class="quotecontent"><br /><div class="quotetitle">miker00lz wrote:</div><div class="quotecontent"><div class="quotetitle">beannaich wrote:</div><div class="quotecontent"><div class="quotetitle">miker00lz wrote:</div><div class="quotecontent">metroid seems to execute out of SRAM too.<br /></div><br />This was one of the first bugs I ran into with my emulator. I wasn't handling  $E000.4 properly, and the game is unplayable because the screen is covered in background tiles <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />EDIT: Just tested this and it turns out that wasn't what was causing it, could have sworn that was the problem. Oh well.</div><br /><br />yeah, i had the same problem with the background tiles until i emulated the SRAM. i thought it was a CPU bug at first, and that made me a sad panda.</div><br /><br />I don't have Metroid running right now, (though it's probably some other problem - fails on undoc opcode). What does the disable prg-ram bit actually do? Right now I always map in 8k of "ram" at $6000. I don't understand what the alternative is.</div><br /><br />always mapping it in shouldnt hurt anything afaik, but the disable PRG-RAM does what it sounds like. it makes it so there is no RAM accessable at $6000. it just makes $6000-$7FFF open bus.<br /><br />just ignore writes to there, and read is undefined. in my emulator it just read zeros from there when it's disabled.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4572">miker00lz</a> — Sun Jan 08, 2012 1:06 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[foobaz]]></name></author>
<updated>2012-01-08T13:03:03-07:00</updated>
<published>2012-01-08T13:03:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88639#p88639</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88639#p88639"/>
<title type="html"><![CDATA[Valid addresses for program execution?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=8499&amp;p=88639#p88639"><![CDATA[
<div class="quotetitle">miker00lz wrote:</div><div class="quotecontent"><br /><div class="quotetitle">beannaich wrote:</div><div class="quotecontent"><div class="quotetitle">miker00lz wrote:</div><div class="quotecontent">metroid seems to execute out of SRAM too.<br /></div><br />This was one of the first bugs I ran into with my emulator. I wasn't handling  $E000.4 properly, and the game is unplayable because the screen is covered in background tiles <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />EDIT: Just tested this and it turns out that wasn't what was causing it, could have sworn that was the problem. Oh well.</div><br /><br />yeah, i had the same problem with the background tiles until i emulated the SRAM. i thought it was a CPU bug at first, and that made me a sad panda.</div><br /><br />I don't have Metroid running right now, (though it's probably some other problem - fails on undoc opcode). What does the disable prg-ram bit actually do? Right now I always map in 8k of "ram" at $6000. I don't understand what the alternative is.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5126">foobaz</a> — Sun Jan 08, 2012 1:03 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Crackles on FCEUX emulator</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Crackles on FCEUX emulator</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=17083">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=17083</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Little Bitboy</b> [ Thu Feb 22, 2018 9:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello there,<br />I'm new to the forum so please be gentle. I'm using the NES tracker, NTRQ on FCEUX emulator and I'm experiencing some sound issues. I get some tiny little crackles and pops that seem to be coming from the DPCM channel. I'm running it on a PC laptop with Windows 10 64bit. I've tried all sorts of settings such as reducing screen reseloution, reducing and increasing sample rate, Vsync, Hardware acceleration, etc. Has anybody experienced a similar problem and fixed it? Am I being completely stupid and missing something very obvious?<br />Cheers

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dougeff</b> [ Thu Feb 22, 2018 10:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What version of FCEUX ?<br /><br />Are you trying to record ?<br /><br />Does it happen at the exact beginning of a sample ?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Feb 22, 2018 11:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I get this whenever I use vsync in FCEUX. I only really use FCEUX as a debugger so I've never needed to have vsync on for that, but normally for playing stuff i think vsync is pretty critical. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Little Bitboy</b> [ Fri Feb 23, 2018 2:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">dougeff wrote:</div><div class="quotecontent">What version of FCEUX ?<br /><br />Are you trying to record ?<br /><br />Does it happen at the exact beginning of a sample ?</div><br /><br /><br />It's version 2.2.3. I do record with it but it still crackles even when I'm not. It doesn't seem to happen at any specific point of the sample. Seems quite random.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FrankenGraphics</b> [ Fri Feb 23, 2018 3:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Fceux audio tends to crackle when the computer is under enough load to not be able to run the emulation time consistently. It used to happen a lot on my older computers, but not so much now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Little Bitboy</b> [ Fri Feb 23, 2018 3:06 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I see. Anything I can do to reduce the load? Would running it on a different operating system help?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FrankenGraphics</b> [ Fri Feb 23, 2018 3:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Wouldn't surprise me if it did matter a bit. <br /><br />As for windows, it's the usual:<br />-remove redundant background services and applications, if any, from autostart<br />-don't run too many applications at the same time, also including any browser tabs that might tax the cpu.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri Feb 23, 2018 4:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The crackling issue I get is whenever vsync is used, not related to CPU at all, but I'm not sure if I have the same problem as OP. (Or perhaps they are symptoms of the same cause... some bad synchronization with audio?)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Fri Feb 23, 2018 6:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Random comments from me in passing:<br /><br />* I've seen/experienced this myself many times over the years, but I have it under control for the most part at this point<br />* What video card model you're using matters.  AMD vs. nVidia vs. Intel all play a role.  Different video cards' drivers implement Vsync differently (and some even override it to be disabled no matter what the application wants)<br />* Fullscreen vs. windowed also seems to matter (or at least it did when I was using Windows XP; not sure about 7 now -- people tell me it's less of a problem on 7 in general, but I've found plenty of games which behave differently in windowed vs. fullscreen on 7)<br />* The Sound Latency slider under Config -&gt; Sound is also relevant -- if the buffer is too small crackling can happen.  The behaviour of this seems to vary per soundcard too<br />* I still don't know what &quot;Use Global Focus&quot; does<br />* I also get brief crackling/desynced audio when the application loses and regains focus, but this is pretty common in a lot of emulators (IIRC, Mesen is one which doesn't do this, probably because of how Sour implemented everything)<br />* Hardware timers matter greatly when it comes to proper A/V sync and audio buffering in general.  Windows is a notorious jerk about providing insights into what hardware timer it's using.  There is a tool called <a href="http://www.thesycon.de/eng/latency_check.shtml" class="postlink">DPC Latency Checker</a> that can help see if you're having high latency which can cause crackling or oddities in audio especially.<br /><br />In general, <span style="text-decoration: underline">I DO NOT use FCEUX to <em>play</em> NES games</span>.  I use Nestopia or Mesen or BizHawk for that.  Those three offer a better overall experience.  Like rainwarrior, I primarily use FCEUX for debugging/development/hacking.<br /><br />My settings, just for the record, for Windows 7 Ultimate SP1 x64 with an nVidia GTX1060 and on-board sound (Realtek ALC887 using Realtek driver version r281 (r282 has all sorts of systray problems)):<br /><br />* I use windowed mode exclusively<br />* Config -&gt; PPU -&gt; New PPU (I'm unsure if this has relevancy; I assume New PPU takes up more CPU time emulation-wise but I'm out of my element)<br />* Config -&gt; Video -&gt; Windowed Settings -&gt; Special filter: none<br />* Config -&gt; Video -&gt; Windowed Settings -&gt; Sync method: Wait for VBlank<br />* Config -&gt; Video -&gt; Windowed Settings -&gt; DirectDraw: No hardware acceleration<br />* Config -&gt; Video -&gt; Sound -&gt; Buffering -&gt; [x] Use Global Focus<br />* Config -&gt; Video -&gt; Sound -&gt; Buffering -&gt; Sound Latency -&gt; 48 (see below)<br />* Config -&gt; Timing -&gt; [x] Set high-priority thread<br /><br />You can't see the exact number for Sound Latency in the UI (sigh), you have to open up fceux.cfg in Notepad -- and it's a very wonky/unique file format -- but search for soundbuftime and look at the number right after.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Little Bitboy</b> [ Sat Feb 24, 2018 2:01 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Crackles on FCEUX emulator</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's really helpful. Thank you. I'll check my specs, give it a go and report back. Thanks everyone for your help.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
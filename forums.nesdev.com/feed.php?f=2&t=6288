<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=6288" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2010-05-02T19:05:38-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=6288</id>
<entry>
<author><name><![CDATA[nathanpc]]></name></author>
<updated>2010-05-02T19:05:38-07:00</updated>
<published>2010-05-02T19:05:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=60758#p60758</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=60758#p60758"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=60758#p60758"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">don't people read README files any more?  I guess not...)<br /></div><br /><br />Did they ever?<br /><br />XD</div><br />Normal people(like me) never read a README file! <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br /><br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><br />nathanpc, did you look at the <a href="http://nesdev.com/bbs/viewtopic.php?t=6160" class="postlink">ASM6 templates</a> I posted? There you can see how to make the header. These ".inesprg", ".ineschr" and such directives are exclusive to NESASM, they won't work in any other assembler. But as you can see in my templates setting up a header with ".db" statements is not hard at all.<br /><br />Another obvious difference is the lack of ".bank" directives. In ASM6 you simply don't need them, just use ".org" and ".base" appropriately to organize your banks as necessary.<br /></div><br />Thanks mate, I've followed it, done all that you've said and now all is working. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4288">nathanpc</a> — Sun May 02, 2010 7:05 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[doppelganger]]></name></author>
<updated>2010-04-12T02:14:37-07:00</updated>
<published>2010-04-12T02:14:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59973#p59973</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59973#p59973"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59973#p59973"><![CDATA[
<div class="quotetitle">nathanpc wrote:</div><div class="quotecontent"><br />Inside which bank(or place) I need to put the iNES headers?<br /></div><br /><br />iNES headers, being what they are, go at the beginning of the .nes file.  The easiest way to do this is to insert the header before any .org or .base directives.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=119">doppelganger</a> — Mon Apr 12, 2010 2:14 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2010-04-11T15:02:56-07:00</updated>
<published>2010-04-11T15:02:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59972#p59972</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59972#p59972"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59972#p59972"><![CDATA[
nathanpc, did you look at the <a href="http://nesdev.com/bbs/viewtopic.php?t=6160" class="postlink">ASM6 templates</a> I posted? There you can see how to make the header. These ".inesprg", ".ineschr" and such directives are exclusive to NESASM, they won't work in any other assembler. But as you can see in my templates setting up a header with ".db" statements is not hard at all.<br /><br />Another obvious difference is the lack of ".bank" directives. In ASM6 you simply don't need them, just use ".org" and ".base" appropriately to organize your banks as necessary.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Sun Apr 11, 2010 3:02 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2010-04-11T12:32:33-07:00</updated>
<published>2010-04-11T12:32:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59969#p59969</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59969#p59969"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59969#p59969"><![CDATA[
<div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br />don't people read README files any more?  I guess not...)<br /></div><br /><br />Did they ever?<br /><br />XD<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Sun Apr 11, 2010 12:32 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2010-04-11T11:34:58-07:00</updated>
<published>2010-04-11T11:34:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59968#p59968</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59968#p59968"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59968#p59968"><![CDATA[
Usually an assembler is intended for certain architectures or platforms (for example, x816) -- and because of that, offers pseudo-ops (ex: .ineschr) which control platform-specific details.<br /><br />This really isn't a downside or a negative.  asm6 chooses to remain a generic 6502 assembler, which means it lacks such psuedo-ops.  A NES developer would consider this a negative/fault, while someone working on, say, the Apple II would consider this a plus/feature.<br /><br />The method I described is how most things got done "back in the day" -- given that this is discussing development on hardware from "back in the day", I don't see the problem with using the same methods.  :)<br /><br />Bregalad's comments regarding how different assemblers behave differently is absolutely correct -- it's the responsibility of the developer to learn and become familiar with their assembler.  (That said, I do find it amazing how many people are attempting to develop "NES stuff" yet aren't familiar with the tools they're using -- don't people read README files any more?  I guess not...)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Sun Apr 11, 2010 11:34 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2010-04-11T09:54:07-07:00</updated>
<published>2010-04-11T09:54:07-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59964#p59964</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59964#p59964"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59964#p59964"><![CDATA[
Nope, all assemblers handles labels, local labels and unlabeled labels differently. Without counting that many "forces you to do weird things in your code".<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Apr 11, 2010 9:54 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-04-11T09:28:35-07:00</updated>
<published>2010-04-11T09:28:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59963#p59963</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59963#p59963"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59963#p59963"><![CDATA[
Write a file that you include at the top of all your programs, which sets up the assembler-specific things. This of course fails for assemblers like wla that force you to do weird things all throughout your code. But for ones like ca65, nesasm, asm6, etc., it should work well.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Sun Apr 11, 2010 9:28 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2010-04-11T08:05:34-07:00</updated>
<published>2010-04-11T08:05:34-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59962#p59962</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59962#p59962"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59962#p59962"><![CDATA[
You hit the biggest issue with assembly : There is no standard way to give commands to the assembler. The only "semi-standard" are directive like .db, .include, .incbin but even then not all assemblers have them.<br /><br />You'll have to change a lot of things in your source so that ASM6 takes it, and whenever you decide to change again to yet another assembler, you'll have to do a lot of changes again. This is really terrible so you'd better be sure of you choice when you pick an assembler and be sure it has all features you 'd like it to do, and be prepared for a few boring weekends to change syntax of your code whenever you decide to change which assembler you use.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Apr 11, 2010 8:05 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2010-04-11T08:03:13-07:00</updated>
<published>2010-04-11T08:03:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59961#p59961</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59961#p59961"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59961#p59961"><![CDATA[
Usually people set .org $7FF0 and then use .db statements to represent each of the 16 bytes of the iNES header.<br /><br />So you'd probably want to do this after the .org $0000 / .db section, but before the .org $8000 section.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Sun Apr 11, 2010 8:03 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[nathanpc]]></name></author>
<updated>2010-04-11T06:07:13-07:00</updated>
<published>2010-04-11T06:07:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59959#p59959</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59959#p59959"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59959#p59959"><![CDATA[
Inside which bank(or place) I need to put the iNES headers?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4288">nathanpc</a> — Sun Apr 11, 2010 6:07 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-04-11T06:05:18-07:00</updated>
<published>2010-04-11T06:05:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59957#p59957</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59957#p59957"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59957#p59957"><![CDATA[
If you're not using an NES-specific assembler, you'll need to make the iNES header and set memory areas (your .bank) a different way.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Apr 11, 2010 6:05 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[nathanpc]]></name></author>
<updated>2010-04-11T05:16:00-07:00</updated>
<published>2010-04-11T05:16:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59950#p59950</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59950#p59950"/>
<title type="html"><![CDATA[asm6 Errors That Don't Occur On NESASM]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6288&amp;p=59950#p59950"><![CDATA[
Hello,<br /> As many people suggested me to change from NESASM to asm6, but now I'm getting errors. My code is like this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   .inesprg 1   ; 1 bank of code<br />   .ineschr 1   ; 1 bank of spr/bkg data<br />   .inesmir 1   ; something always 1<br />   .inesmap 0   ; we use mapper 0<br /><br />   .bank 0   ; bank 0 - our place for code.<br />   .org $0000<br />addrLO = $10 <br />addrHI = $11<br />Sprite1_X   .db 50       ; a X position for our sprite, start at 20<br />Sprite1_Y   .db 20       ; a Y position for our sprite, start at 20<br />;Sprite2_X   .db 50       ; a X position for our sprite, start at 20<br />;Sprite2_Y   .db 20       ; a Y position for our sprite, start at 20<br />   .org $8000  ; code starts at $8000<br />   <br />Start:  <br />   lda #%10001000  ; do the setup of PPU<br />   sta $2000       ; that we<br /><br />   ldx #$00    ; clear X<br /><br />   ;set the destination address for sprite palettes &#40;$3F10&#41; <br />   lda #$3F <br />   sta $2006 <br />   lda #$10 <br />   sta $2006 <br /><br />   ;copy 16 colors <br />   ldx #$00 <br />LoadSpritePalette: <br />      lda tilepal, x <br />      sta $2007 <br />      inx <br />      cpx #16 <br />      bne LoadSpritePalette <br /><br />      ;set the destination address for background palettes &#40;$3F00&#41; <br />      lda #$3F <br />      sta $2006 <br />      lda #$00 <br />      sta $2006 <br /><br />      ;copy 16 colors <br />      ldx #$00 <br />LoadBackgroundPalette: <br />     lda bkgpal, x <br />     sta $2007 <br />     inx <br />     cpx #16 <br />     bne LoadBackgroundPalette<br /><br />Map_Load: <br />     lda $2002             ; read PPU status to reset the high/low latch <br />     lda #$20 <br />     sta $2006             ; write the high byte of $2000 address <br />     lda #$00 <br />     sta $2006             ; write the low byte of $2000 address <br />     lda #low&#40;ourMap&#41; <br />     sta addrLO <br />     lda #high&#40;ourMap&#41;              ; start out at 0 <br />     sta addrHI <br /><br />     ldx #4 <br />     ldy #0 <br /><br />Map_Load_loop: <br />     LDA &#91;addrLO&#93;, y     ; load data from address &#40;background + the value in x&#41; <br />     STA $2007             ; write to PPU <br />     INy                   ; X = X + 1 <br />     BNE Map_Load_loop  ; Branch to LoadBackgroundLoop if compare was Not Equal to <br /><br />zero <br />     inc addrHI <br />     dex <br />     bne Map_Load_loop <br /><br />waitblank1:         <br />   lda $2002  ; these 3 lines wait for VBlank, this loop will actually miss <br /><br />VBlank<br />   bpl waitblank1 ; alot, in a later Day, I'll give a better way<br />   txa <br />clrmem: <br />   sta $000,x <br />   sta $100,x <br />   sta $200,x <br />   sta $300,x <br />   sta $400,x <br />   sta $500,x <br />   sta $600,x <br />   sta $700,x  ; Remove this if you're storing reset-persistent data <br />   inx <br />   bne clrmem<br />   <br />waitblank2:         <br />   lda $2002  ; these 3 lines wait for VBlank, this loop will actually miss <br /><br />VBlank<br />   bpl waitblank2 ; alot, in a later Day, I'll give a better way<br />   lda #%00011110<br />   sta $2001<br />   <br />loop:<br />   jmp loop<br />   <br />infinite:  ; a label to start our infinite loop<br />nmi:<br /><br />   ; Load Sprite1<br />   lda Sprite1_Y<br />   sta $0300<br />   lda #$11<br />   sta $0301<br />   lda #$00<br />   sta $0302<br />   lda Sprite1_X<br />   sta $0303<br />   <br />   ; Load Sprite2<br />   ;lda Sprite2_Y<br />   ;sta $0304<br />   ;lda #$12<br />   ;sta $0305<br />   ;lda #$00<br />   ;sta $0306<br />   ;lda Sprite2_X<br />   ;sta $0307<br />   <br />   lda #$01   ; these<br />   sta $4016  ; lines<br />   lda #$00   ; setup/strobe the <br />   sta $4016  ; keypad.<br /><br />   lda $4016  ; load Abutton Status ; note that whatever we ain't interested<br />   lda $4016  ; load Bbutton Status ; in we just load so it'll go to the next <br /><br />one.<br />   lda $4016  ; load Select button status<br />   lda $4016  ; load Start button status<br />   lda $4016  ; load UP button status<br />   and #1     ; AND status with #1<br />   bne UPKEYdown  ; for some reason &#40;not gonna reveal yet&#41;, need to use NotEquals<br />   ;with ANDs. So it'll jump &#40;branch&#41; if key was down.<br />   <br />   lda $4016  ; load DOWN button status<br />   and #1     ; AND status with #1<br />   bne DOWNKEYdown<br /><br />   lda $4016  ; load LEFT button status<br />   and #1     ; AND status with #1<br />   bne LEFTKEYdown<br /><br />   lda $4016  ; load RIGHT button status<br />   and #1     ; AND status with #1<br />   bne RIGHTKEYdown<br />   jmp NOTHINGdown  ; if nothing was down, we just jump &#40;no check for conditions&#41;<br />   ; down past the rest of everything.<br /><br />UPKEYdown:<br />   lda Sprite1_Y ; load A with Y position<br />   sbc #1  ; subtract 1 from A. Only can do math on A register. SBC &#40;Subtract <br /><br />with Borrow&#41;<br />   sta Sprite1_Y ; store back to memory<br />   ;lda Sprite2_Y ; load A with Y position<br />   ;sbc #1  ; subtract 1 from A. Only can do math on A register. SBC &#40;Subtract <br /><br />with Borrow&#41;<br />   ;sta Sprite2_Y ; store back to memory<br />   jmp NOTHINGdown  ; jump over the rest of the handling code.<br /><br />DOWNKEYdown:<br />   lda Sprite1_Y <br />   adc #1  ; add 1 to A. ADC &#40;Add with Carry&#41;&#40;&#40;to A register&#41;&#41;<br />   sta Sprite1_Y<br />   jmp NOTHINGdown ; jump over the rest of handling code.<br /><br />LEFTKEYdown:<br />   lda Sprite1_X<br />   sbc #1  <br />   sta Sprite1_X<br />   jmp NOTHINGdown <br />;the left and right handling code does the same as UP and Down except.. well.. with<br />; left and right. :&#41;<br /><br />RIGHTKEYdown:<br />   lda Sprite1_X<br />   adc #1<br />   sta Sprite1_X<br />   ; don't need to jump to NOTHINGdown, it's right below. Saved several bytes of<br />   ; PRG-Bank space! :&#41;<br />   <br />NOTHINGdown:<br />   lda #$03<br />   sta $4014<br />   rti<br /><br />tilepal:<br />   .incbin &quot;our.pal&quot; ; include and label our sprite pallete<br />   <br />bkgpal:<br />   .incbin &quot;bkg.pal&quot; ; include and label our background pallete<br />   <br />ourMap:<br />   .incbin &quot;our.map&quot; ; assuming our.map is the binary map file.<br />   .bank 1   ; following goes in bank 1<br />   .org $FFFA  ; start at $FFFA<br />   .dw nmi    ; dw stands for Define Word and we give 0 as address for NMI <br /><br />routine<br />   .dw Start ; give address of start of our code for execution on reset of NES.<br />   .dw 0   ; give 0 for address of VBlank interrupt handler, we tell PPU not to<br />   ; make an interrupt for VBlank.<br />   <br />   .bank 2   ; switch to bank 2<br />   .org $0000  ; start at $0000<br />   .incbin &quot;our.bkg&quot;  ; background data<br />   .incbin &quot;our.spr&quot;  ; our sprite pic data</div><br /><br />But when I try to compile it I got this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&#91;~/NES&#93;$ asm6 our.asm<br /><br />pass 1..<br />our.asm&#40;1&#41;: Illegal instruction.<br />our.asm&#40;2&#41;: Illegal instruction.<br />our.asm&#40;3&#41;: Illegal instruction.<br />our.asm&#40;4&#41;: Illegal instruction.<br />our.asm&#40;6&#41;: Illegal instruction.<br />our.asm&#40;58&#41;: Illegal instruction.<br />our.asm&#40;60&#41;: Illegal instruction.<br />our.asm&#40;194&#41;: Illegal instruction.<br />our.asm&#40;201&#41;: Illegal instruction.<br /><br />&#91;~/NES&#93;$ </div><br />What can I do?<br /><br />Best Regards,<br /> Nathan Paulino Campos<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4288">nathanpc</a> — Sun Apr 11, 2010 5:16 am</p><hr />
]]></content>
</entry>
</feed>
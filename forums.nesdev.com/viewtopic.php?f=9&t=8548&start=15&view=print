<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">[Request] Pokemon Yellow Mapper 163 to MMC3 Patch</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=8548">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=8548</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Mar 29, 2013 7:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks 80sFREAK, for yet another empty message that implies that you know how to do things but doesn't provide any actual information. Why bump the thread if you're not going to provide any new information? Your message basically means &quot;Hi, I'm awesome and I know how to replicate this mapper, but I'm not gonna tell you guys because you suck. Bye.&quot;... it doesn't help anyone!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Fri Mar 29, 2013 9:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">80sFREAK wrote:</div><div class="quotecontent">Just someone pointed me to this thread, so bump. No need patch, when possible to make mapper. It's not that complicated.</div><br />Both are viable. A patch would allow others to also more easily play this on better-available hardware. It would be more appropriate for someone who lacks experience making custom mappers. Building the mapper would allow playing the game unchanged, which might be more reliable and wouldn't need someone to do to the patching.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>80sFREAK</b> [ Mon Apr 08, 2013 2:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@tokumaru a bit weird way to ask for info, but i can accept it. Look, it's possible to make things, but motivation.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Fri Apr 26, 2013 3:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you're going to implement the mapper using discrete logic, you're going to have a rough time designing the scanline counter. AFAIK it does not use the classic PPU A12.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Apr 26, 2013 3:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Didn't see this before...<br /><br /><div class="quotetitle">80sFREAK wrote:</div><div class="quotecontent">@tokumaru a bit weird way to ask for info, but i can accept it.</div><br />Asking for info? I couldn't care less about a mapper used in a shitty pirate game. I simply despise the way you act, like you know more than everyone else without even providing some info to back you up or help other people.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Look, it's possible to make things, but motivation.</div><br />I don't doubt you, I just think you brag too much and help too little.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Sun Apr 28, 2013 9:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">socram8888 wrote:</div><div class="quotecontent">If you're going to implement the mapper using discrete logic, you're going to have a rough time designing the scanline counter. AFAIK it does not use the classic PPU A12.</div><br />80'sFREAK can do anything with discrete logic.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Apr 28, 2013 11:27 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />INL might be right. I can think of at least six ways to wait for a split point in the background, and two of them are known to be used in NES or Famicom games using a discrete logic mapper.<br /><br />These methods assume a fixed ratio of CPU cycles to scanlines.<br /><ul><li>CPU cycle counting (used in VRC, FDS, and FME-7): If M2 rises 341 times, 3 scanlines have been drawn. This works on NTSC, RGB, and Dendy, but needs adjusted for PAL NES versions. </li><li>DMC sample counting (used in Codemasters and the discrete mapper AOROM): Coarse approximation of CPU cycle counting, requires no mapper support, but automatic sample playback is not possible. </li></ul><br />These methods count events that happen once per scanline.<br /><ul><li>PA12 (used in MMC3 and RAMBO-1): If PA12 stays low for at least four M2 cycles and then goes high, sprite fetch has started. Imposes minor limits on 8x16 pixel sprite use. </li><li>PA13 (used in MMC5): If PA13 stays low for at least three M2 cycles, the third nametable entry on the row is being fetched. </li></ul><br />These methods watch which part of the background plane is being rendered.<br /><ul><li>Tile FD/FE (used in MMC2 and MMC4): Watch PA13-4. Whenever the address changes to $0FD0-$0FEF or $1FD0-$1FEF, trigger a bank switch. </li><li>Nametable page (used in the discrete mapper of Oeka Kids): If the high nibble of the PPU address (PA13-12) changes from anything else to 2, background fetch has begun. Read the CHR bank number from PA11-10. </li></ul><br />Anyone willing to code a test ROM that runs from RAM with cassette swapping? Disabling rendering will instantly distinguish once-per-scanline and background following methods, and playing with 8x16 sprite patterns, scrolling, and CHR readback should distinguish the rest.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Apr 28, 2013 12:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Tile FD/FE (used in MMC2 and MMC4): Watch PA13-4. Whenever the address changes to $0FD0-$0FEF or $1FD0-$1FEF, trigger a bank switch.</div>Briefly being pedantic, and without being able to verify against a copy of PunchOut!: I think they're paying attention to PPU A3 also (requiring it to be 1) and changing the latch on rising PPU /RD, rather than delaying after both pattern table fetches.<br /><br />I'm pretty certain the easiest discrete logic scanline interrupt source would be to use the MMC3-style A12 counting with a large binary counter (e.g. 74'4040). Downsides are that it would only be configurable to produce an interrupt after one fixed 2‚Åø scanlines without a lot more logic, and you need a separate latch bit to serve as acknowledge+disable interrupts.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Sun Apr 28, 2013 10:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Tile FD/FE (used in MMC2 and MMC4): Watch PA13-4. Whenever the address changes to $0FD0-$0FEF or $1FD0-$1FEF, trigger a bank switch.</div>Briefly being pedantic, and without being able to verify against a copy of PunchOut!: I think they're paying attention to PPU A3 also (requiring it to be 1) and changing the latch on rising PPU /RD, rather than delaying after both pattern table fetches.</div><br /><br />I believe you're correct about the watching PPU A3 = 1 for second PT byte fetch.  Although MMC2 has the entire PPU address bus as inputs, not sure if it's actually using A2-A0 though... (I recall some discussion that the patent docs may have gave reason why it was included in the design but then dropped.)  MMC4 only has A13-A3, which is what you need. <br /><br />For what it's worth I've have issues using the Rising edge of CHR /RD because PPU A12 didn't always happen to be valid at that point depending upon how fast your logic is.  I had some glitching using CHR /RD rising edge alone.  I ended up latching the address bits on the falling edge which is when they're actually supposed to be valid, and then bankswitching at the rising edge.  I haven't taken the time to verify that's how the actual MMC2/4 works, but that's what I had to do to get it to work <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>socram8888</b> [ Mon May 06, 2013 2:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I have this cart, and I have a NROM cart with EEPROMs. I don't mind running a test program on my console.<br /><br />I think it can't be a CPU-based counter, because this is designed to run on NTSC consoles, yet it works well on every PAL console I have. I know it's technically possible to make a code able to detect and run on both frequencies, but being a card made by some chinese guys (with very good programmers, tough, because it is quite neat for a bootleg) to play on crappy famiclones with PAL, NTSC, PAL60... speeds, I think it's unlikely.<br /><br />AFAIK the CHR-swap is only used on the title screen to display that big Pikachu, and not in-game. It should be possible to modify a bit the title screen to make it simple enough not to need to swap banks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon May 06, 2013 2:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: [Request] Pokemon Yellow Mapper 163 to MMC3 Patch</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">socram8888 wrote:</div><div class="quotecontent">It should be possible to modify a bit the title screen to make it simple enough not to need to swap banks.</div><br />That or just do the swap manually with sprite 0.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
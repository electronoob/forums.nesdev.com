<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Various questions about the color palette and emulators</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Various questions about the color palette and emulators</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=9027">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=9027</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JimDaBim</b> [ Wed Jun 20, 2012 6:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Various questions about the color palette and emulators</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello,
<br />I've got some questions about the NES and since they're rather technical, I guess this forum here is the right one for me.
<br />
<br />OK, here are my questions:
<br />
<br />
<br />Why does every NES emulator have a different color palette?
<br />Isn't it possible to design <em>the</em> definite palette? I understand that different TVs have different color adjustments and therefore look differently. But that's the same with computer screens and still, every picture file, be it BMP, JPG, GIF or PNG etc. has definite, "objetive" color values. Yet, all NES emulators define their colors individually.
<br />Why is that the case? How were the colors transferred from the NES to the TV?
<br />
<br />Wouldn't the following be possible:
<br />Take an NES ROM that displays all the various colors.
<br />Copy it on a cardridge.
<br />Put it into a real NES.
<br />Show that demo NES game on a TV.
<br />On the same TV, show a PC bitmap file that includes various colors.
<br />Look which of the bitmap colors look identical to the NES colors.
<br />And so, you have the RGB value for the NES colors.
<br />
<br />
<br />Is there any color palette that comes closest to the display of an actual NTSC TV screen as it "usually" looks like?
<br />
<br />
<br />Where did they get the colors from when they published some of the NES classics for the Game Boy Advance for Game Cube or the Wii Virtual Console? And do these games even have the same color palette among each other? So, does "The Legend of Zelda" for the Game Boy Advance has the same colors as "The Legend of Zelda" for Game Cube?
<br />
<br />
<br />I've heard that Nestopia is cycle-accurate? What's the practical difference to emulators that are not cycle-accurate? For example, I never hear about FCEUX being cycle-accurate, so what is it instead?
<br />
<br />
<br />What would you say is the best/most popular emulator for the NES?
<br />
<br />
<br />In FCEUX, there is an option called "NTSC Color Emulation". If you check it, the colors change from the default palette. So, does that mean that the default palette in FCEUX is based on a PAL TV? That wouldn't really make sense to me. Isn't FCEUX an American product? The default screen resolution is the NTSC one, the default speed is the one from NTSC as well. If you want PAL resolution or speed, you have to explicitly check it. So, why aren't the NTSC colors chosen by default?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jun 20, 2012 7:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Various questions about the color palette and emulators</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JimDaBim wrote:</div><div class="quotecontent">Why does every NES emulator have a different color palette?</div><br />Because everybody's TV is calibrated differently. Do you know what the brightness, contrast, color, and tint knobs do on a TV?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But that's the same with computer screens and still, every picture file, be it BMP, JPG, GIF or PNG etc. has definite, "objetive" color values.</div><br />At what color temperature? With yellow boost on or off? Sure, there's an "objective" standard to which studio monitors are calibrated, but various "image enhancement" methods implemented in TVs sold to the public make live-action footage look "better" at the cost of deviating from this standard. Should an emulator be emulating an NES connected to a studio monitor or an NES connected to a home TV?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> Wouldn't the following be possible:<br />Take an NES ROM that displays all the various colors.<br />Copy it on a cardridge.<br />Put it into a real NES.<br />Show that demo NES game on a TV.</div><br />So far, you've described running Loopy's palette demo on a PowerPak.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">On the same TV, show a PC bitmap file</div><br />For one thing, most PCs can't output video to a standard-definition television. A <a href="http://pineight.com/mw/index.php?title=Cable_finder#SDTV" class="postlink">scan converter</a> adds its own coloration to the signal. But what I have done is run my PowerPak and Nestopia side-by-side using picture-in-picture on a Vizio VX32L.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Where did they get the colors from when they published some of the NES classics for the Game Boy Advance for Game Cube or the Wii Virtual Console? And do these games even have the same color palette among each other? So, does "The Legend of Zelda" for the Game Boy Advance has the same colors as "The Legend of Zelda" for Game Cube?</div><br />The gamma of the display of the original Game Boy Advance system is very, very dark, much darker than that of a TV or a PC monitor.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I've heard that Nestopia is cycle-accurate? What's the practical difference to emulators that are not cycle-accurate? For example, I never hear about FCEUX being cycle-accurate, so what is it instead?</div><br />An emulator is cycle-accurate if all operations on the CPU, PPU, and APU take exactly the same number of cycles that they take on an NES. Pretty much all popular emulators have a cycle-accurate CPU, but the PPU and APU aren't quite as accurate in every emulator. There are corner cases of timing that are still being figured out, such as what happens if the CPU and PPU start a fraction of a cycle out of sync, or what happens when sprites are being moved at the same time sampled sound is being played.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">In FCEUX, there is an option called "NTSC Color Emulation". If you check it, the colors change from the default palette. So, does that mean that the default palette in FCEUX is based on a PAL TV?</div>
<br />A lot of the default color palettes shipped with emulators are based on old guesses that happened to look good at the time, not based on any theory of how the NES generates its signal. The NTSC NES picture contains artifacts on fine details, which may color the player's perception of particular colors.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JimDaBim</b> [ Wed Jun 20, 2012 8:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for the answers.
<br />
<br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Should an emulator be emulating an NES connected to a studio monitor or an NES connected to a home TV?</div><br />I would say the emulator should emulate the NES in a way that the image on the screen looks exactly like if you connect an actual NES to that same screen.<br />Sure, a TV screen has brightness and all that stuff. But those things are there anyway. If you connect a PC to a screen, you still could adjust the screen. But the thing that I don't understand about emulators: Why do two emulators look differently, even on the same screen? Why is the hardware-related issue of screen adjustment even a topic in the emulator software? Doesn't the NES send its color information as RGB values, just like a computer or a DVD player also sends them as RGB values?<br />Sorry if I sound naive. I don't really know how anything of that works. I just write those things to understand it better.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">So far, you've described running Loopy's palette demo on a PowerPak.</div><br />So, do you have an actual palette file with the results that can be loaded into an emulator?<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">An emulator is cycle-accurate if all operations on the CPU, PPU, and APU take exactly the same number of cycles that they take on an NES. Pretty much all popular emulators have a cycle-accurate CPU, but the PPU and APU aren't quite as accurate in every emulator.</div><br />So, Nestopia is an emulator that actually <em>does</em> the PPU and APU accurately?<br /><br />By the way, this is a bit off-topic, but do you know if MAME is cycle-accurate in CPU, PPU and APU?<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The NTSC NES picture contains artifacts on fine details, which may color the player's perception of particular colors.</div>
<br />I guess you just described the NTSC <em>filter</em>, that option where you can make the image look like on an old TV. The option that is choosable next to special effects like HQ2x and Scale2X. But I was just talking about the option that can be found in the menu under "Config", "Palette", not the one in "Config", "Video", "Special Scaler".
<br />If you check it, the colors slightly change. But I would have assumed that the default colors are for NTSC anyway.
<br />
<br />By the way, do you know why waiting for VBlank and double buffering doesn't work in FCEUX when you disable the hardware acceleration (which is necessary so that the image looks pixelated and not blurry), but VSync works fine in Nestopia, even without bilinear filtering? With the default settings, I just don't get FCEUX to scroll smoothly. (It always looks as if a horizontal line is moving from bottom to top.) I would need one of those sync methods, but they are completely ignored as soon as I disable hardware acceleration.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Wed Jun 20, 2012 8:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Doesn't the NES send its color information as RGB values, just like a computer or a DVD player also sends them as RGB values? </div><br /><br />No.  Not at all.  Nothing on the NES is RGB.  This is probably what is leading to your confusion.<br /><br />This is what it sends to the TV:<br /><!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/NTSC_video">http://wiki.nesdev.com/w/index.php/NTSC_video</a><!-- m --><br /><br />Understand it?  Me neither.  Neither do most other emu authors.  Hence the inconsistency.  Emulating output with an RGB palette (while inaccurate), is easy and works well enough.  Which is why so many emus do it.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So, do you have an actual palette file with the results that can be loaded into an emulator? </div><br /><br />Many people have done the whole "take a screenshot of the video from a TV and make a palette off of it" to get a "100% accurate" palette.<br /><br />The problem is:<br /><br />1)  output on everyone's TV is different, so any RGB value you pull from a screen capture is going to be wrong.<br />2)  The signal the NES sends to the TV "blends" nearby colors.  So a gray pixel isn't always gray if it's drawn next to a different colored pixel.<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So, Nestopia is an emulator that actually does the PPU and APU accurately? </div><br /><br />There are several accurate emus, but NEStopia and Nintendulator are generally considered to be the most accurate.  Although no emu will ever be 100% accurate.<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I guess you just described the NTSC filter,</div>
<br />
<br />That's the thing.. NTSC isn't really a filter, it's an output signal. The NTSC "filter" is actually emulating how the video signal gets sent from the NES to the TV.  It's not just blurring the image to make it look like a TV.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jun 20, 2012 8:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JimDaBim wrote:</div><div class="quotecontent">If you connect a PC to a screen, you still could adjust the screen.</div><br />The "color" and "tint" are actually controlling the conversion from composite to RGB and thus don't apply to a PC. As Disch said, the NES generates the signal directly in the composite domain.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Doesn't the NES send its color information as RGB values</div><br />The PlayChoice does; the NES doesn't.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">An emulator is cycle-accurate if all operations on the CPU, PPU, and APU take exactly the same number of cycles that they take on an NES. Pretty much all popular emulators have a cycle-accurate CPU, but the PPU and APU aren't quite as accurate in every emulator.</div><br />So, Nestopia is an emulator that actually <em>does</em> the PPU and APU accurately?</div><br />Nestopia and Nintendulator have more accurate timing than a lot of other emulators. But there's a reason I still use FCEUX on my 10" laptop: it's accurate enough for making game logic, and it runs at full speed even on an Atom CPU.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">do you know if MAME is cycle-accurate in CPU, PPU and APU?</div><br />MAME isn't one emulator; it's several hundred emulators, one for each supported arcade system board. Are you asking whether the PlayChoice driver in MAME is accurate?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I guess you just described the NTSC <em>filter</em>, that option where you can make the image look like on an old TV.</div><br />The NTSC filter simulates an NES; everything else simulates a PlayChoice. A PlayChoice has a 52-entry lookup table from NES color numbers to RGB values, which it sends through three DACs to a standard-definition RGB monitor. An NES has only one DAC, and it generates a composite signal directly by rapidly alternating between the signal level for $00, $10, $20, or $30 and the signal level for $0D, $1D, $2D, or $3D. And as Disch pointed out, different TVs decode them differently.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But I was just talking about the option that can be found in the menu under "Config", "Palette"</div>
<br />Those are theoretically the color in the middle of a flat area. Different people eyeball the colors differently.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JimDaBim</b> [ Wed Jun 20, 2012 12:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, the whole color topic seems very complicated, but thanks for your help.
<br />Is this only an issue on the NES? Or are the color palettes like for the Super Nintendo or other consoles that non-definite too?
<br />
<br />
<br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The PlayChoice does; the NES doesn't.</div><br />So, shouldn't the colors of the PlayChoice be the basis for any emulator since those are basically the same games?<br /><br />Since you use FCEUX, how do you make it scroll smootly? If I don't use any sync method, it will update the screen in a way that I always see a horizontal line going from bottom to top. But for some reason, the sync methods only work with enabled hardware acceleration (which I don't want since in this case, modern graphic cards use bilinear filter for stretching).<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Are you asking whether the PlayChoice driver in MAME is accurate?</div><br />No, that was a completely unrelated question from the NES. I thought that cycle-related stuff works equally in every game in MAME. In my case, the original "Street Fighter II" would be of interest here.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Those are theoretically the color in the middle of a flat area. Different people eyeball the colors differently.</div><br />Sorry, I still don't get it. Especially the relation between the two palettes:<br /><br />This the default palette in FCEUX:<br /><img src="http://i50.tinypic.com/iclohl.png" alt="Image" /><br /><br />And this is the "NTSC Color Emulation" palette:<br /><img src="http://i46.tinypic.com/4pxfnl.png" alt="Image" /><br /><br />If the second image is NTSC color emulation, what is the first image then? PAL color emulation? Unlikely, since it's an American emulator and all other options are by default set on NTSC, not on PAL. So, how can the first palette be called? And why isn't the NTSC color emulation enabled by default?<br /><br />Last time, you said:<div class="quotetitle">tepples wrote:</div><div class="quotecontent">But what I have done is run my PowerPak and Nestopia side-by-side using picture-in-picture on a Vizio VX32L.</div>Did you save the color palette you devised with that method?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jun 20, 2012 12:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JimDaBim wrote:</div><div class="quotecontent">Is this only an issue on the NES? Or are the color palettes like for the Super Nintendo or other consoles that non-definite too?</div><br />It's mostly a problem with consoles from the NES era and earlier. Every console video chip since the Genesis has generated an RGB signal and encoded that to composite, though the encoding has its own artifacts, especially on the TG16 and Genesis.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So, shouldn't the colors of the PlayChoice be the basis for any emulator since those are basically the same games?</div><br />There are a couple browns that are noticeably wrong on the PlayChoice compared to how TVs interpret them, but yes, emulators should have a PlayChoice palette as one choice.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Since you use FCEUX, how do you make it scroll smootly?</div><br />By putting the ROM on a CF card and inserting it into a PowerPak. I use FCEUX for developing and an NES for play-testing.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But for some reason, the sync methods only work with enabled hardware acceleration (which I don't want since in this case, modern graphic cards use bilinear filter for stretching).</div><br />Perhaps you can tell your video card to use a different kind of filtering. Or perhaps you can enable software pre-filtering. I know VisualBoyAdvance has the "Simple 2x" filter that can be applied before the texture is sent to the video card.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I thought that cycle-related stuff works equally in every game in MAME.</div><br />Different boards are understood to different degrees.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Sorry, I still don't get it. Especially the relation between the two palettes</div><br />I'd bet a single TV could display both the "NTSC Color Emulation" palette and something close to the default palette simply by turning the color, brightness, and contrast knobs. The default palette is darker and more saturated, which would mean the "Color" knob is cranked up and "Brightness" and "Contrast" down somewhat. <br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Did you save the color palette you devised with that method?</div>
<br />No. It was years ago, and the computer with which I did that has long since been totaled. My TV isn't even on the same floor as a computer capable of running Nestopia.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drag</b> [ Wed Jun 20, 2012 1:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><img src="http://drag.wootest.net/misc/nespalette.png" alt="Image" />
<br />This is what I use, and it's the result of me having Loopy's palette demo on my PowerPak, plugged into my Panasonic CRT television, while twiddling around in Nestopia's NTSC palette generator until I came up with something that looked as close as I could get.
<br />
<br />Believe me, I've <em>tried</em>, I've looked at literature, written scripts, messed with matrices, played with clipping, but the simple fact is that YIQ isn't the same as RGB, and CRTs that use YIQ are capable of displaying colors that are actually <em>outside</em> of the RGB range. For example, I can't get color 22 to look correct, no matter what I do, because it uses a blue value that is brighter than what's possible with RGB, so no matter what, it's going to look washed out and dull. <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />
<br />
<br />However, designing NES graphics, I've been able to use this palette, and the results on the NES, using my specific television, are extremely close.
<br />
<br />And yes, color 08 is that dark on my TV, it's darker than the darkest gray, but lighter than black. Most LCD tvs won't display it correctly unless I play with the settings.
<br />
<br />Color xC is really strange, it's cyan, but as you get darker, it gets more blue, and again, I tried to match it as close as I could with the generator.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Wed Jun 20, 2012 1:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />In general MAME drivers can be considered some of the <em>least</em> accurate emulators. Almost all video hardware is "high-level" emulated, and the titles with line interrupts instead of a foreground layer are emulated with pseudo-line accuracy at best. I understand that some drivers are receiving more modern emulation treatment, but as a general rule MAME developers are working "blind", they have ROM dumps that they have to make run, but don't have access to the hardware to perform tests so they reverse engineer the hardware via the game code. MAME is a very helpful tool when you need to see a rough implementation of a system, but I do not trust even the tiniest details to be completely correct.
<br />
<br />Fortunately with most arcade hardware there is little consequence of inaccurate video or audio emulation because they are often separate subsystems which under no circumstances influence the state of the CPU/game.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JimDaBim</b> [ Wed Jun 20, 2012 2:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Since you use FCEUX, how do you make it scroll smootly?</div><br />By putting the ROM on a CF card and inserting it into a PowerPak. I use FCEUX for developing and an NES for play-testing.</div><br />I was actually talking about the scrolling when you play a game, not about programming the scrolling in a self-made game. The way the image refreshes in an emulator looks faulty unless you use back buffering or vsync.<br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Perhaps you can tell your video card to use a different kind of filtering. Or perhaps you can enable software pre-filtering.</div>
<br />Neither the graphic card, nor FCEUX seems to offer something like that. And I can't believe that this issue never came up during the development process of the emulator. I mean, what does double buffering and vsync have to do with hardware acceleration anyway? Maybe I should ask one of the developers for that.
<br />
<br />I've got two more specific questions:
<br />
<br />I've often read about the fact that the NES doesn't have a proper yellow in its palette. When I saw the FCEUX palette, I thought that the value at (9,3) looks quite alright:
<br /><img src="http://i47.tinypic.com/17cmm8.png" alt="Image" />
<br />
<br />Sure, it's not perfect, but it's good enough to display for example blond hair. Then I saw this, the Nestopia palette:
<br /><img src="http://i50.tinypic.com/2yxrmkj.png" alt="Image" />
<br />
<br />And here, this color is actually green. Which would also explain why they used the color at (8,3) for Pac-Man and not the one at (9,3).
<br />
<br />So, I know that this all has to do with color adjustment, but how would the color at (9,3) "usually" look on an NTSC screen? Is it yellowish or really a lemon-like green?
<br />(Interestingly, both "Ms. Pac-Man" games use the color at (9,3) which means that Ms. Pac-Man looks greenish on Nestopia.)
<br />
<br />The title screen of "Metroid": Again, on a "normal" NTSC TV screen: Is the ground supposed to look more like brown or more like green?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Wed Jun 20, 2012 3:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JimDaBim wrote:</div><div class="quotecontent">So, I know that this all has to do with color adjustment, but how would the color at (9,3) &quot;usually&quot; look on an NTSC screen? Is it yellowish or really a lemon-like green?<br />(Interestingly, both &quot;Ms. Pac-Man&quot; games use the color at (9,3) which means that Ms. Pac-Man looks greenish on Nestopia.)<br /><br />The title screen of &quot;Metroid&quot;: Again, on a &quot;normal&quot; NTSC TV screen: Is the ground supposed to look more like brown or more like green?</div>PAL aficionados, back in the day, would joke that NTSC stood for &quot;never the same color&quot;. Please take that to heart â€” there <strong>isn't</strong> a single normal or correct color for any given output from a NES. Different TVs will reproduce those colors in all different ways.<br /><br />Theoretically, the 8s column of the screen is the color of the NTSC colorburst, and should be pure color -U in the <a href="http://en.wikipedia.org/wiki/YUV" class="postlink">YUV colorspace</a>. I made a graphic a few years ago of the NTSC colorwheel superimposed on NTSC's YIQ color axes on a vectorscope with the NES colors called out:<div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=1939&amp;sid=d303a1e2685dbf5a73e365f7326a8ec7&amp;mode=view"><img src="./download/file.php?id=1939&amp;t=1&amp;sid=d303a1e2685dbf5a73e365f7326a8ec7" alt="SMPTE_color_bars_on_NTSC_vectorscope_w_nes.jpg" /></a><br />
			<span class="gensmall">SMPTE_color_bars_on_NTSC_vectorscope_w_nes.jpg [ 49.26 KiB | Viewed 4786 times ]</span>
		

		<br />
	</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Jun 20, 2012 3:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JimDaBim wrote:</div><div class="quotecontent">I was actually talking about the scrolling when you play a game, not about programming the scrolling in a self-made game. The way the image refreshes in an emulator looks faulty unless you use back buffering or vsync.</div><br />I think tepples meant he doesn't care about the tearing because he doesn't use FCEUX for playing, just for debugging. By playing on on an actual console he doesn't get any tearing.<br /><br /><div class="quotetitle">JimDaBim wrote:</div><div class="quotecontent">And here, this color is actually green.</div><br />I guess this is just a side effect of the YIQ (or similar) color representation. The hue can easily shift depending on the monitor/TV.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">(Interestingly, both "Ms. Pac-Man" games use the color at (9,3) which means that Ms. Pac-Man looks greenish on Nestopia.)</div>
<br />This just comes to show that developers back then also suffered with the way the colors change from TV to TV. They were as clueless as we are concerning how each color should actually look.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JimDaBim</b> [ Wed Jun 20, 2012 3:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks a lot for all your help. I guess, after reading all this, that Nestopia, and not FCEUX, will be the correct choice for me when it comes to playing NES games.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Wed Jun 20, 2012 4:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />FCEUX has the best looking colors compared to my flat screen to me for sure. Nestopia is WAYYYYY too bright, at least the one I use. 1.39 is my nestopia version.
<br />
<br />ETA:Just tried 1.40, the colors are darker, but they just look a little off. I don't think NESTOPIA is that good of a emulator for color accuracy. Like how vNES went with the "100% right" colors and made it look like complete shit.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccovell</b> [ Wed Jun 20, 2012 7:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JimDaBim wrote:</div><div class="quotecontent">So, shouldn't the colors of the PlayChoice be the basis for any emulator since those are basically the same games?</div>
<br />You would think, but the RGB PPU (Playchoice one) likely was produced after the original composite one.  They also are a bit different in some areas, so a few Famicom and NES games actually will display <em>worse</em> on an RGB PPU:
<br />
<br /><img src="http://www.chrismcovell.com/images/Fami_Comp_RGB_Difference.jpg" alt="Image" />

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
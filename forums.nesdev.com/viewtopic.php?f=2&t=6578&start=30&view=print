<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Looking For Inspiration</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Looking For Inspiration</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=6578">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=6578</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Jul 12, 2010 5:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">So how does that game bank-switch the RAM?</div>
<br />The CHR switching is used for the SRAM instead, since it would be pointless in a CHR-RAM cart.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jul 12, 2010 7:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">The CHR switching [...] would be pointless in a CHR-RAM cart.</div><br />Not always. Sometimes the player needs the extra RAM in the <a href="http://en.wikipedia.org/wiki/Videomation" class="postlink">only game</a> that uses <a href="http://wiki.nesdev.com/w/index.php/CPROM" class="postlink">CPROM</a> to draw the various <a href="http://encyclopediadramatica.es/CP#THEY.27RE_REQUESTING_CP.2C_WHAT_DO.3F" class="postlink">forms of CP</a>.<br /><br /><br /><span style="font-size: 84%; line-height: normal">Sometimes thinking about the exceptions to a rule helps people understand the rationale behind the rule. It certainly helps me like that.</span>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Jul 12, 2010 8:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />But that game has more CHR memory than what the NES can address, so bankswitching is needed. I admit that even with only 8KB of CHR bankswitching can sometimes be useful (not with the 4KB banks of the MMC1, since you can use $2000 to simulate that kind of bankswitching, but with 1KB banks it could be), but hardly practical for most types of games.
<br />
<br />Is Videomation the prequel to Art Alive? And what does CP have to do with anything?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Tue Jul 13, 2010 4:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I only found one emulator, Nintendulator, that's explicitly supposed to support SXROM.
<br />
<br />However, yet again, it seems impossible to create a .sav file larger than the standard 8kb.
<br />
<br />I'm desperate now, is there anyone who knows how to get an emulator to save a 16kb .sav file?
<br />
<br />My current project is pretty much dead in the water if I can't find a solution <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Tue Jul 13, 2010 9:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I guess no one emulates SXROM because the only cart using it (AFAIK) already exists as 2 separate games (Final Fantasy 1 and 2).
<br />
<br />Well I finally tried messing with Nestopia source and unfortunately it's a VC++ setup and I have no idea how to deal with that.  Since VC++ Express 10.0 is the only version I could find to download, it has to "convert" it which results it craploads of warnings and failure to build.  I guess I'm stuck without having the exactly right version..  (Seriously, what the hell kind of software/version scheme goes up to v10.0?)
<br />
<br />I'll have to try again with another emu that works with gcc/mingw maybe, but won't be able to try it for another week or so.  Does anyone want to help out adding by mapper #124 (Squeedo mapper number) with extra RAM to any emulator?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Tue Jul 13, 2010 10:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There is another game that use 32k of ram, <a href="http://nesdev.com/bbs/viewtopic.php?t=4596" class="postlink">the best play baseball special</a> but it came out in japan only.  Maybe this game support 32k properly or the game is not emulated completely, good question.
<br />
<br />As for the squeedo mapper, now that I have a netbook I could always check how to implement it but my time is quite limited. VS is not an issue for me but I don't know how long it would take to understand how the emulator works and how to implement it after.  I cannot promise anything.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Jul 14, 2010 1:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">but it came out in japan only</div>
<br />In fact FF1&amp;2 also come out in japan only. Only FF1 standalone made it to america (if you don't count the FF2 prototype).
<br />
<br />Neil, I don't think you could get a 16kb sav file, but a 32kb. SOROM has 16kb RAM, but only 8k can be battery-ied.
<br />
<br />I guess I have found the problem. Nestopia only accepts to do a 32kb file if you have a iNES2 header, and if your PRG-ROM is at least 128kb. You probably tried with a smaller PRG-ROM, and that's why it still made you a 8kb file. I don't know WHY, it's probably a bug/error in Nestopia, but anyway it's there. The SOROM/SXROM boards effectively only accepts 128-256kb (and 512kb for SXROM obviously) so that might be the reason - although iNES was made to make ALL possibilities of boards, not only the ones commercial games used so I think Nestopia should honnor this but oh well.
<br />
<br />
<br />Your header should look like this (for 128kb PRG-ROM) :
<br />$4e, $45, $53, $1a, $08, $00, $12, $08, $00, $00, $90, $07
<br />
<br />However, I think all other emus will ignore it and Nestopia have no debugger so good luck... the only other option is to have your ROM have the same CRC-32 as Final Fantasy 1+2 or that obscure Basball game.... insane I know. It might work surprisingly well though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Wed Jul 14, 2010 1:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">but it came out in japan only</div><br />In fact FF1&amp;2 also come out in japan only. Only FF1 standalone made it to america (if you don't count the FF2 prototype).<br /><br />Neil, I don't think you could get a 16kb sav file, but a 32kb. SOROM has 16kb RAM, but only 8k can be battery-ied.<br /><br />I guess I have found the problem. Nestopia only accepts to do a 32kb file if you have a iNES2 header, and if your PRG-ROM is at least 128kb. You probably tried with a smaller PRG-ROM, and that's why it still made you a 8kb file. I don't know WHY, it's probably a bug/error in Nestopia, but anyway it's there. The SOROM/SXROM boards effectively only accepts 128-256kb (and 512kb for SXROM obviously) so that might be the reason - although iNES was made to make ALL possibilities of boards, not only the ones commercial games used so I think Nestopia should honnor this but oh well.<br /><br /><br />Your header should look like this (for 128kb PRG-ROM) :<br />$4e, $45, $53, $1a, $08, $00, $12, $08, $00, $00, $90, $07<br /><br />However, I think all other emus will ignore it and Nestopia have no debugger so good luck... the only other option is to have your ROM have the same CRC-32 as Final Fantasy 1+2 or that obscure Basball game.... insane I know. It might work surprisingly well though.</div>
<br />
<br />Thank you so much Bregalad <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />
<br />
<br />Seriously, this is the kind of answer I was needing and couldn't get to myself. Really appreciate the effort.
<br />
<br />The CRC trick sounds interesting - how does one go about finding that and where does it go in the ROM (that's probably a daft question <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />)?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jul 14, 2010 5:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><a href="http://en.wikipedia.org/wiki/Cyclic_redundancy_check" class="postlink">Cyclic Redundancy Check</a> is a hash function built around a polynomial counter. If you read the description on Wikipedia and find it strangely familiar from having hacked ROMs, consider that a lot of games use things like CRC as a pseudorandom number generator. 
<br />
<br />Unlike later secure hash functions such as MD5 and the SHA series, CRC is intended only to detect noise in transmission channels. It's straightforward to "forge a CRC", or find a message with a given CRC value that differs from your original message by fewer than 32 bits.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Jul 14, 2010 5:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> It's straightforward to "forge a CRC", or find a message with a given CRC value that differs from your original message by fewer than 32 bits.</div>
<br />Then it might be possible to have a program that "hacks" a few unused bytes at the end of your ROM so that it has the same CRC as a SXROM commercial ROM, and include it in the compilation process and emulator will be tricked by thinking it's the other game. I have no idea if this would work and how much it would slow down the compilation.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Wed Jul 14, 2010 5:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />As for the SXROM/32KB setup - works like a charm. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> Apart from the slight issue that I now have no text on screen - is that SXROM configuration for CHR RAM? I'm probably not setting it up right, just hacked it together to make the .sav file work.
<br />
<br />But, as you suggested, only in Nestopia (so far from the ones I've tested). <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />
<br />
<br />Really need to try it on my PowerPak when I get home as that's probably the most important test for me right now.
<br />
<br />Does anyone know the authors of FCEUX enough to convince them to support this stuff? That would be brilliant if it could happen.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jul 14, 2010 6:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />SUROM, SOROM, and SXROM all extend SNROM, a CHR RAM board. They pretty much have to use 8 KiB CHR RAM (or 8 KiB CHR ROM) because they repurpose the CHR ROM bank bits to switch PRG ROM and PRG RAM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Wed Jul 14, 2010 6:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">SUROM, SOROM, and SXROM all extend SNROM, a CHR RAM board. They pretty much have to use 8 KiB CHR RAM (or 8 KiB CHR ROM) because they repurpose the CHR ROM bank bits to switch PRG ROM and PRG RAM.</div>
<br />
<br />Of course, thanks tepples.
<br />
<br />*wanders off to read about CHR RAM*

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Wed Jul 14, 2010 10:23 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">*wanders off to read about CHR RAM*</div>
<br />There is no mystery here. The difference is that with CHR-ROM the tiles are "magically" in place for you to use, but with CHR-RAM you have to populate the pattern tables yourself (using $2006 and $2007, like with other kinds of VRAM updates) before using the tiles.
<br />
<br />Also, since there is no bankswitching, if you need to change tiles you have to manually rewrite them byte by byte, something that obviously takes longer than bankswitching.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neilbaldwin</b> [ Wed Jul 14, 2010 4:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">neilbaldwin wrote:</div><div class="quotecontent">*wanders off to read about CHR RAM*</div><br />There is no mystery here. The difference is that with CHR-ROM the tiles are "magically" in place for you to use, but with CHR-RAM you have to populate the pattern tables yourself (using $2006 and $2007, like with other kinds of VRAM updates) before using the tiles.<br /><br />Also, since there is no bankswitching, if you need to change tiles you have to manually rewrite them byte by byte, something that obviously takes longer than bankswitching.</div>
<br />
<br />Yep, got it <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Works fine. Need to test on PowerPak now.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
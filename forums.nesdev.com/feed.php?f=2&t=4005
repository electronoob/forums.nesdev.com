<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=4005" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2008-08-24T05:59:47-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=4005</id>
<entry>
<author><name><![CDATA[Celius]]></name></author>
<updated>2008-08-24T05:59:47-07:00</updated>
<published>2008-08-24T05:59:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=36322#p36322</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=36322#p36322"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=36322#p36322"><![CDATA[
Sorry to dig this old thread up, but it's relevant, and there's no point starting another one.<br /><br />So I have a line routine, and I've made a wireframe model. I've also made my line routine XOR-fill friendly, so there aren't terrible errors in attempting to fill the polygons. However, there is a problem I'm having.<br /><br />When there are two or more polygons stacked on top of each other, the XOR Fill colors every other one. I see why this is, I'm just not sure how to avoid this. If I could somehow fill each polygon separately, then my question would be answered. The only thing is, I'm not sure how I'd go about doing that. Thoughts?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=138">Celius</a> — Sun Aug 24, 2008 5:59 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anders_A]]></name></author>
<updated>2008-04-29T05:48:32-07:00</updated>
<published>2008-04-29T05:48:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33114#p33114</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33114#p33114"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33114#p33114"><![CDATA[
Found it!<br /><br />I had a vague recollection of <a href="http://nesdev.com/bbs/viewtopic.php?t=729#10104" class="postlink">this</a> thread yesterday when I wrote the above but couldn't find it.<br /><br />Aslong as all opcodes you use are the ones marked XX or uu in the matrix they are tested on the real NES by Kevin and should work as expected.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1601">Anders_A</a> — Tue Apr 29, 2008 5:48 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2008-04-29T04:02:17-07:00</updated>
<published>2008-04-29T04:02:17-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33113#p33113</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33113#p33113"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33113#p33113"><![CDATA[
I seem to remember reading that the only modification from the original 6502 to the 2A03's CPU core was erasing the part of the chip that had the decimal mode circuitry, as Ricoh couldn't afford to license that from MOS Technology. That wouldn't have changed the values of the don't cares in the decoder gate array, which is where most of the extra instructions come from. But anything that involves $EE or $EF or $11 or other values where bit 4 is prominent might have changed behavior, as those values seem to originate from decimal mode.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Apr 29, 2008 4:02 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anders_A]]></name></author>
<updated>2008-04-28T17:08:22-07:00</updated>
<published>2008-04-28T17:08:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33105#p33105</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33105#p33105"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33105#p33105"><![CDATA[
<div class="quotetitle">doynax wrote:</div><div class="quotecontent"><br />The annoying part is that Nestopia and Nintendulator set the sprite overflow flag at very different parts of the scanline (and I wouldn't be the least bit surprised if real hardware is different still),<br /></div><br />You really need to test on the real NES as there are no emulators as accurate as those for the C64. I have my copynes stashed away at the moment, as I didn't want to have an extra computer set up just for the compatible parallell port, but I just ordered an USB copynes. I'll be glad to help you test stuff out when I get it. It'll be PAL only though.<br /><br /><div class="quotetitle">doynax wrote:</div><div class="quotecontent"><br />Sometimes I wonder whether at some stage the NES design team sat down and brainstormed how to create the nastiest, most insidious system ever for writing raster code..<br /></div><br />Yeah, that truly sucks. You can't do much more then scrolling or changing the color emphasis bits. <img src="http://forums.nesdev.com/images/smilies/icon_sad.gif" alt=":(" title="Sad" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Lets see.. There's LAX, SAX, SBX, DCP, ISC, ASR, ARR, ANC and a few illegal NOPs. That ought to about cover it I think, but I wouldn't be too surprised if an immediate LAX or SLO/SRE/RLA/RRA instruction snuck in there as well. Plus the halt instructions for debugging of course but that doesn't really count.<br />If you're trying to decide which instructions to implement in your emulator then I suggest supporting everything except perhaps for the unstable ones (though even those have occasional uses). With some decent documentation and a good sample implementation (VICE for instance) it shouldn't take too long.<br /></div><br />Are you certain all of these work on the NES? the NES cpu is a <em>modified</em> 6502 after all. Couldn't those modifications alter the behaviour of the undocumented opcodes?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1601">Anders_A</a> — Mon Apr 28, 2008 5:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[doynax]]></name></author>
<updated>2008-04-28T15:58:03-07:00</updated>
<published>2008-04-28T15:58:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33101#p33101</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33101#p33101"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33101#p33101"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />And yeah palette have to be uploaded during VBlank. Memblers and I tried to upload it during HBlank, but even for changing only color 0, this is a lot of bothering and while it's fun to deal with this, in the best case you see glitches on the rightmost 16 pixels or so.<br /></div>I only need to update three colors, and it did seem to work fairly well for me. By initially placing the PPU address at $3f00 and then writing the other three entries in rapid succession (i.e. preloading values into A/X/Y and using an indexed dummy read to skip over the background color) the "buggy" span is reduced to nine clocks plus whatever variance you've got in your synchronization method. The annoying part is that Nestopia and Nintendulator set the sprite overflow flag at very different parts of the scanline (and I wouldn't be the least bit surprised if real hardware is different still), so I'd have to use some other timing mechanism to get hblank uploads to work.<br />At any rate I figure it just isn't worth the compatibility nightmare since splitting up the character upload loop and inserting the palette code somewhere in the middle would work nicely, it'll just mean a shitload of extra work for me..<br /><br /><div class="quotetitle">Celius wrote:</div><div class="quotecontent"><br />Yes this looks very good. However, there's still some weird distortion for the triangle faced ones.<br /></div>I know.. I'll just have to tweak the tetrahedron and octahedron someone without sacrificing the depth for the rest of the models. Not that there's anything wrong with it per se, the objects are just very large and/or very close to the viewer.<br /><br /><div class="quotetitle">Celius wrote:</div><div class="quotecontent"><br />And I didn't know you couldn't update the palette in a blanked period of the screen. What happens if you do?<br /></div>When you point the PPU at the palette RAM it decides to render the palette entry it's currently hovering over for some reason.<br />Sometimes I wonder whether at some stage the NES design team sat down and brainstormed how to create the nastiest, most insidious system ever for writing raster code..<br /><br /><div class="quotetitle">Fx3 wrote:</div><div class="quotecontent"><br />By the way, what unofficial opcodes do you use?<br /></div>Lets see.. There's LAX, SAX, SBX, DCP, ISC, ASR, ARR, ANC and a few illegal NOPs. That ought to about cover it I think, but I wouldn't be too surprised if an immediate LAX or SLO/SRE/RLA/RRA instruction snuck in there as well. Plus the halt instructions for debugging of course but that doesn't really count.<br />If you're trying to decide which instructions to implement in your emulator then I suggest supporting everything except perhaps for the unstable ones (though even those have occasional uses). With some decent documentation and a good sample implementation (VICE for instance) it shouldn't take too long.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=56">doynax</a> — Mon Apr 28, 2008 3:58 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Zepper]]></name></author>
<updated>2008-04-28T15:08:29-07:00</updated>
<published>2008-04-28T15:08:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33099#p33099</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33099#p33099"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33099#p33099"><![CDATA[
<strong>doynax</strong>, you're pretty impressive, my congrats dude! Awesome work, it's a cool 3D demo! <br /><br />By the way, what unofficial opcodes do you use?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=39">Zepper</a> — Mon Apr 28, 2008 3:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Celius]]></name></author>
<updated>2008-04-28T15:00:32-07:00</updated>
<published>2008-04-28T15:00:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33097#p33097</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33097#p33097"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33097#p33097"><![CDATA[
Yes this looks very good. However, there's still some weird distortion for the triangle faced ones.<br /><br />And I didn't know you couldn't update the palette in a blanked period of the screen. What happens if you do?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=138">Celius</a> — Mon Apr 28, 2008 3:00 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[hap]]></name></author>
<updated>2008-04-28T14:01:13-07:00</updated>
<published>2008-04-28T14:01:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33095#p33095</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33095#p33095"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33095#p33095"><![CDATA[
Yeah, looks good <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />as for the music, you could ask on the NES Music subforum.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=115">hap</a> — Mon Apr 28, 2008 2:01 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2008-04-28T09:35:45-07:00</updated>
<published>2008-04-28T09:35:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33083#p33083</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33083#p33083"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33083#p33083"><![CDATA[
Honestly, your third demo is amazing, way better than the other 2. Seeing all regular polygons fitting a simple demo like this is amazing, and it actually looks 3D unlike the other two.<br /><br />And yeah palette have to be uploaded during VBlank. Memblers and I tried to upload it during HBlank, but even for changing only color 0, this is a lot of bothering and while it's fun to deal with this, in the best case you see glitches on the rightmost 16 pixels or so.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Mon Apr 28, 2008 9:35 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[doynax]]></name></author>
<updated>2008-04-28T07:55:32-07:00</updated>
<published>2008-04-28T07:55:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33080#p33080</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33080#p33080"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33080#p33080"><![CDATA[
Here's a new demo: <a href="http://doynax.googlepages.com/polynes3.nes" class="postlink">http://doynax.googlepages.com/polynes3.nes</a><br />Lately I haven't been working as much as I might have on this. But at least I've reworked the transformation code for better precision, added a couple models and fixed a few bugs.<br /><br /><div class="quotetitle">Anders_A wrote:</div><div class="quotecontent"><br />I'd love to see a version with one palette entry reserved for each of the visible faces of the cube and a nice color ramp for shading.<br /></div>I'm working on it but updating the NES palette wasn't as easy as I thought it'd be. Apparently it has to be written during hblank or the true vblank period, not just in a blanked part of the screen.<br /><br /><div class="quotetitle">Anders_A wrote:</div><div class="quotecontent"><br />I've been thinking about doing something like this, but considering all the tricks you've mentioned in this thread I never thought of and the speed you got it running at there is no chance in hell I would have been able to pull it off.<br /></div>I may have made it seem harder than it really is, you know.. ;)<br /><br /><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><br />If you need help debugging it so it works on the real deal, I might be able to help (I have a PowerPak and decent amount of NES development experience).<br /></div>I'd love to have your help with testing it on hardware. There's still a quadrillion emulator-visible bugs left to deal with but I'll send you a PM (or something) when I get around to writing some test ROMs.<br /><br />I'm still searching for a musician by the way, or just a donation of an unreleased tune for that matter. Any ideas where I might find such a creature?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=56">doynax</a> — Mon Apr 28, 2008 7:55 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jargon]]></name></author>
<updated>2008-04-27T19:03:43-07:00</updated>
<published>2008-04-27T19:03:43-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33074#p33074</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33074#p33074"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33074#p33074"><![CDATA[
this is my goal with my game engine:<br /><br /><img src="http://mediaplague.com//projects/jargon/Realm%20of%20Existence%20iii%20(NES)/roe%20iii%20devshot%2020080105-155221-000d.png" alt="Image" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3449">jargon</a> — Sun Apr 27, 2008 7:03 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2008-04-27T17:30:41-07:00</updated>
<published>2008-04-27T17:30:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33070#p33070</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33070#p33070"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33070#p33070"><![CDATA[
Very cool! Nice to finally see some real progress in the NES demo department <img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=";)" title="Wink" /> If you need help debugging it so it works on the real deal, I might be able to help (I have a PowerPak and decent amount of NES development experience).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Sun Apr 27, 2008 5:30 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anders_A]]></name></author>
<updated>2008-04-27T15:05:19-07:00</updated>
<published>2008-04-27T15:05:19-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33065#p33065</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33065#p33065"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=33065#p33065"><![CDATA[
<div class="quotetitle">doynax wrote:</div><div class="quotecontent"><br /><a href="http://doynax.googlepages.com/polynes2.nes" class="postlink">Behold!</a><br /></div><br /><br />Wow! That's amazing. If you get that thing to run on a real NES it'll be the coolest thing made for the NES to date.<br /><br />I find the distorted perspective cool. 3D on retro machines is usually very "vanilla", and it adds a bit of flavour. I'd love to see a version with one palette entry reserved for each of the visible faces of the cube and a nice color ramp for shading.<br /><br />I've been thinking about doing something like this, but considering all the tricks you've mentioned in this thread I never thought of and the speed you got it running at there is no chance in hell I would have been able to pull it off.<br /><br />Kudos!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1601">Anders_A</a> — Sun Apr 27, 2008 3:05 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2008-04-16T13:06:53-07:00</updated>
<published>2008-04-16T13:06:53-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=32759#p32759</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=32759#p32759"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=32759#p32759"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I'm just surprised that I've never seen that trick before, but presumably everyone is using floating point these days so the multiplications don't matter.<br /></div><br />Yeah, but one day will come where the power of consummer electronics will stop to double each year, but the demand will continue to increase as usual, and this may happen sooner than what some belive. That day, people that know little dirty tricks will be able to survive fine, but people who grown used to apparently-clean-but-in-reality-dirty very high level language will be screwed and will break down.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Another neat application of the same identities is to easily generate sines waves of different amplitudes from a single table. It's the sort of trick that might save you some ROM space if you're working on a 32k game <img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /></div><br />Yeah, if I were to do such a trick the first idea I'd have would be to use shift instructions to get multiple of the table entries.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Wed Apr 16, 2008 1:06 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[doynax]]></name></author>
<updated>2008-04-16T11:00:16-07:00</updated>
<published>2008-04-16T11:00:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=32752#p32752</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=32752#p32752"/>
<title type="html"><![CDATA[Polygon filling..]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4005&amp;p=32752#p32752"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />There is just one thing with XOR flling... The way you described it at least :<br />- Two vertical consecutive pixels should never be both set, as it would normally be with all lines where dy&gt;dx<br />- All hidden lines should effectively be hidden, else they'll affect the filling<br />- No polygon should be on the top of the screen else the whole culumn will be inverted.<br /><br />Did I get it right ?<br /></div>Yeah, that's pretty much it =)<br />The top edge is usually handled by drawing a horizontal line along the clipped part of the polygon. Naturally you wouldn't draw anything when clipping the sides or bottom though.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I'm not the one using it anyway, but I guess it's kind interesting. And congratulations for your multiplication matrix. Mastering trigonometric identities (there is hundred of them !) is necessary to speed things up.<br /></div>I'm just surprised that I've never seen that trick before, but presumably everyone is using floating point these days so the multiplications don't matter.<br />Another neat application of the same identities is to easily generate sines waves of different amplitudes from a single table. It's the sort of trick that might save you some ROM space if you're working on a 32k game ;)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=56">doynax</a> — Wed Apr 16, 2008 11:00 am</p><hr />
]]></content>
</entry>
</feed>
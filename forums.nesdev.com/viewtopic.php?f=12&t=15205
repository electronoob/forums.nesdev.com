<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Fast 2D blitting on Super FX</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Fast 2D blitting on Super FX" href="http://forums.nesdev.com/feed.php?f=12&amp;t=15205" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=15205';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:28 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />

	<div class="forumrules">
		
			<h3>Forum rules</h3><br />
			Related:<br /><ul><li>For making cartridges of your Super NES games, see <a href="http://forums.nesdev.com/viewforum.php?f=28" class="postlink">Reproduction</a>.</li></ul>
		
	</div>

	<br clear="all" />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=15205">Fast 2D blitting on Super FX</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=15205"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 19 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=15205&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=15205&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=15205&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=15205&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=15205&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p184043"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p184043">Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=184043#p184043"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Dec 05, 2016 8:51 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I've been messing with some conceptual codes for high-speed drawing of untransformed 2D graphics.  They require specialized graphics formats which are not interoperable; I'm thinking I'd test for speed beforehand and use whichever one was fastest for a given object - as long as all the code can fit in the instruction cache at the same time...<br /><br />Of course, these codes are probably not final.  I'm still not very good at Super FX.<br /><br />I had also considered using a sort of data-as-code format for large quantities of small identical objects.  The entire graphic would be hardcoded and require no ROM access, metadata handling, or branching.  But I haven't written anything like that yet.<br /><br />I've got to say, I find the 8-bit busing to be far more aggravating in the case of the Super FX than in the case of the S-CPU.  What they were trying to do with the Super FX really needed more bits per word than they had...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; SINGLE-PIXEL BLITTING (slowest and most general):<br /><br />&nbsp; &nbsp;to R12&nbsp; &nbsp;&nbsp; &nbsp; ; pixel count goes in the LOOP index register<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get pixel count for first line<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address, triggering a buffer load<br /><br />Start:<br />&nbsp; &nbsp;getc&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get pixel data (one byte per pixel) from ROM buffer<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; and increment ROM address<br />&nbsp; &nbsp;loop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel count; if not zero, go to address in R13, ie: &quot;Start&quot;<br />&nbsp; &nbsp;plot&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; plot pixel and increment X-counter in R1 (since the GSU is pipelined, this byte gets executed regardless)<br /><br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get carriage return X-component (goes in R0)<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;with R1&nbsp; &nbsp;&nbsp; &nbsp;; update X-coordinate<br />&nbsp; &nbsp;sub R0&nbsp; &nbsp;&nbsp; &nbsp; ; by subtracting carriage return X-component<br />&nbsp; &nbsp;inc R2&nbsp; &nbsp;&nbsp; &nbsp; ; increment Y-coordinate<br />&nbsp; &nbsp;to R12&nbsp; &nbsp;&nbsp; &nbsp; ; update LOOP index register<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; with pixel count for next line<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;loop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel count and branch to Start if not zero<br />&nbsp; &nbsp;nop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; dummy fill pipeline (nothing else to do before GETC, and the ROM buffer isn't ready anyway)<br /><br />; The main loop has only two bytes between INC R14 and GETC, so in high-speed mode it's probably 6 cycles rather than 4.<br />; Blitting a sliver in 4bpp is probably at least 40 cycles, but that's still only 5 cycles per pixel, so this method is<br />; bottlenecked by code unless you're drawing in 8bpp.</div><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; DUAL-PIXEL BLITTING (faster for long solid runs, slower for short runs, doesn't support gaps):<br /><br />&nbsp; &nbsp;to R12&nbsp; &nbsp;&nbsp; &nbsp; ; pixel count goes in the LOOP index register<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get pixel count for first line, plus two if odd<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address, triggering a buffer load<br />&nbsp; &nbsp;with R12&nbsp; &nbsp;&nbsp; ; operate on pixel count<br />SStart:<br />&nbsp; &nbsp;lsr&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; turn pixel count into pixel pair count<br />&nbsp; &nbsp;bcc DStart&nbsp; &nbsp;; if the pixel count was even, go to dual-pixel blitting<br />&nbsp; &nbsp;nop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; waste a cycle, because it's better than wasting 5 cycles at the end of the loop<br />&nbsp; &nbsp;getc&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; fetch the first pixel from the ROM buffer<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment the ROM address<br />&nbsp; &nbsp;loop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel pair count (hence the +2 for odd pixel counts) and go to DStart if nonzero<br />&nbsp; &nbsp;plot&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; plot first pixel to buffer and increment X-coordinate (happens regardless of LOOP result)<br /><br />&nbsp; &nbsp;bra EndL&nbsp; &nbsp;&nbsp; ; go to end of line (at this point it's been determined that the line was only one pixel long)<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get carriage return X-component in R0 (happens after branch)<br />DStart:<br />&nbsp; &nbsp;getc&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get pixel pair<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;plot&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; plot pixel to buffer and increment X-coordinate<br />&nbsp; &nbsp;loop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel pair count and go to DStart if nonzero<br />&nbsp; &nbsp;plot&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; plot pixel to buffer (relying on dither flag to switch colours) and increment X-coordinate<br /><br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get carriage return X-component in R0<br />EndL:<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;with R1&nbsp; &nbsp;&nbsp; &nbsp;; update X-coordinate<br />&nbsp; &nbsp;sub R0&nbsp; &nbsp;&nbsp; &nbsp; ; with carriage return value<br />&nbsp; &nbsp;inc R2&nbsp; &nbsp;&nbsp; &nbsp; ; increment Y-coordinate<br />&nbsp; &nbsp;to R12&nbsp; &nbsp;&nbsp; &nbsp; ; refresh pixel counter<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; with next line's pixel count, plus three if odd and one if even<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;dec R12&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel count (hence the +1 for lines other than the first)<br />&nbsp; &nbsp;bne SStart&nbsp; &nbsp;; branch to SStart if pixel count is nonzero<br />&nbsp; &nbsp;with R12&nbsp; &nbsp;&nbsp; ; set up for right shift of pixel count<br /><br />; This one uses the dither functionality to plot two pixels per byte fetched from ROM.&nbsp; Naturally this means all the<br />; graphics have to be duplicated in ROM so there's a version for each value of the dither bit (XOR of the X and Y<br />; bottom bits).&nbsp; Also, since dither can't plot transparent with non-transparent (it always checks the bottom of the<br />; colour register for colour #0, because it's checking the dither bit at the same time and doesn't yet know which half<br />; to use), this method does not support gaps in a line.</div><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; DUAL-PIXEL WITH GAPS (a bit slower than basic dual-pixel blitting, but more flexible):<br /><br />&nbsp; &nbsp;to R12&nbsp; &nbsp;&nbsp; &nbsp; ; pixel count goes in the LOOP index register<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get pixel count for first line, plus two if odd<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address, triggering a buffer load<br />&nbsp; &nbsp;with R12&nbsp; &nbsp;&nbsp; ; operate on pixel count<br />SStart:<br />&nbsp; &nbsp;lsr&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; turn pixel count into pixel pair count<br />&nbsp; &nbsp;bcc DStart&nbsp; &nbsp;; if the pixel count was even, go to dual-pixel blitting<br />&nbsp; &nbsp;nop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; waste a cycle, because it's better than wasting 5 cycles at the end of the loop<br />&nbsp; &nbsp;getc&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; fetch the first pixel from the ROM buffer<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment the ROM address<br />&nbsp; &nbsp;loop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel pair count (hence the +2 for odd pixel counts) and go to DStart if nonzero<br />&nbsp; &nbsp;plot&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; plot first pixel to buffer and increment X-coordinate (happens regardless of LOOP result)<br /><br />&nbsp; &nbsp;bra EndL&nbsp; &nbsp;&nbsp; ; go to end of line (at this point it's been determined that the line was only one pixel long)<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get X increment in R0, shifted left and added to the Y increment bit<br />DStart:<br />&nbsp; &nbsp;getc&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get pixel pair<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;plot&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; plot pixel to buffer and increment X-coordinate<br />&nbsp; &nbsp;loop&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel pair count and go to DStart if nonzero<br />&nbsp; &nbsp;plot&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; plot pixel to buffer (relying on dither flag to switch colours) and increment X-coordinate<br /><br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; get X increment in R0, shifted left and added to the Y increment bit<br />EndL:<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;sex&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; ensure that negative X increments remain negative when shifted<br />&nbsp; &nbsp;lsr&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; shift X increment into position, pushing the Y increment out into the carry flag<br />&nbsp; &nbsp;bcs NewLine&nbsp; ; if the Y increment was one, go to NewLine (duplicated code for speed)<br />&nbsp; &nbsp;with R1&nbsp; &nbsp;&nbsp; &nbsp;; update X-coordinate<br />&nbsp; &nbsp;sub R0&nbsp; &nbsp;&nbsp; &nbsp; ; with X increment<br />&nbsp; &nbsp;to R12&nbsp; &nbsp;&nbsp; &nbsp; ; refresh pixel counter<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; with next run's pixel count, plus three if odd and one if even<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;dec R12&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel count (hence the +1 for runs other than the first)<br />&nbsp; &nbsp;bne SStart&nbsp; &nbsp;; branch to SStart if pixel count is nonzero<br />&nbsp; &nbsp;with R12&nbsp; &nbsp;&nbsp; ; set up for right shift of pixel count<br />&nbsp; &nbsp;bra EndBlit&nbsp; ; branch past duplicated code<br />NewLine:<br />&nbsp; &nbsp;sub R0&nbsp; &nbsp;&nbsp; &nbsp; ; update X-coordinate with X increment<br />&nbsp; &nbsp;to R12&nbsp; &nbsp;&nbsp; &nbsp; ; refresh pixel counter<br />&nbsp; &nbsp;getb&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; with next line's pixel count, plus three if odd and one if even<br />&nbsp; &nbsp;inc R14&nbsp; &nbsp;&nbsp; &nbsp;; increment ROM address<br />&nbsp; &nbsp;inc R2&nbsp; &nbsp;&nbsp; &nbsp; ; increment Y-coordinate<br />&nbsp; &nbsp;dec R12&nbsp; &nbsp;&nbsp; &nbsp;; decrement pixel count<br />&nbsp; &nbsp;bne SStart&nbsp; &nbsp;; branch to SStart if pixel count is nonzero<br />&nbsp; &nbsp;with R12&nbsp; &nbsp;&nbsp; ; set up for right shift of pixel count<br />EndBlit:<br /><br />; This one encodes the X-coordinate carriage return value shifted left with a Y-increment bit shoved in on the right, so<br />; as to allow the algorithm to jump across gaps in a line without jumping down.&nbsp; This limits the size of the object<br />; somewhat, since there are now only 7 bits for the X-increment value, but I'm not too worried about that. I could<br />; encode TWO Y-increment bits this way, so as to allow vertical gaps in the object, but with what most of the graphics<br />; in my game look like, I doubt plotting a transparent pixel now and then is less efficient than doing a bunch of extra<br />; maneuvering at the end of every single run of solid pixels...<br /></div><br />Thoughts?  Have I made any obvious mistakes like misunderstanding how to use an instruction?<br /><br />I suppose dumps of untested code aren't especially useful or interesting, since there's no indication of what might or might not be wrong...<br /><br /><br /><br />EDIT:  Just had an idea:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;getb<br />&nbsp; &nbsp;inc R14<br />&nbsp; &nbsp;color<br />&nbsp; &nbsp;plot<br />&nbsp; &nbsp;mult R3&nbsp; &nbsp;; where R3 contains 0010h<br />&nbsp; &nbsp;swap<br />&nbsp; &nbsp;color<br />&nbsp; &nbsp;loop<br />&nbsp; &nbsp;plot<br /></div><br /><br />Okay, never mind; that's a bit slow.  It handles gaps fine, but it can just barely keep up with 4bpp blitting, which means that with metadata handling between lines, this method is probably bottlenecked by code.  For some reason I was thinking SWAP was like XCN on the SPC700; it's actually more like XBA on the 65C816, which means you can't use it to flip the colours in a byte.<br /><br />On the other hand, my single-pixel blit routine is even slower, and the extra pixel this method tacks onto odd-sized lines is transparent and can't cause a sliver overflow, so it might actually be better...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p184267"></a>
				<b class="postauthor">psycopathicteen</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p184267">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=184267#p184267"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 08, 2016 3:18 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed May 19, 2010 6:12 pm<br /><b>Posts:</b> 2730
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here's a question.  Does the Super FX chip <em>really</em> read the instruction &quot;to&quot; before it reads &quot;get&quot; or does it get assembled into a single instructions?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4383"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p184268"></a>
				<b class="postauthor">ikari_01</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p184268">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=184268#p184268"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 08, 2016 4:33 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3966.png" width="32" height="28" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 04, 2009 2:28 pm<br /><b>Posts:</b> 140<br /><b>Location:</b> Wunstorf, Germany
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">It's two instructions. The RISC is strong with this one.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3966"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p184269"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p184269">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=184269#p184269"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 08, 2016 4:39 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Z80 and HuC6280 also have prefix instructions that modify the following instruction.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p184273"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p184273">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=184273#p184273"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Dec 08, 2016 5:29 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The problem is the 8-bit ROM bus.  If you want single-cycle execution, you need single-cycle load, and if you want single-cycle load you need single-word instructions.  With 16 general-purpose registers and 8 bits per instruction, there's only so much you can do without prefixes, and even some unary operations aren't necessarily important enough to burn 1/16 of the opcode matrix on.<br /><br />At least it defaults to using R0 if you don't specify.  It's a bit like having an accumulator.  (But then, I had never programmed anything in assembly that <em>wasn't</em> accumulator-based before this, so for all I know this sort of 'preferred' register thing is common...)<br /><br />...<br /><br />It's an interesting chip.  It seems to have specific support for texture mapping, via the MERGE opcode - the idea is apparently that R7 and R8 are 8.8 subtexel representations of the texture indices, which can be updated easily by the rasterization code, and MERGE takes the high byte of each one and sticks them together into a single 16-bit index, which can be then used to pick a texel out of the ROM buffer.<br /><br />Yes, this means that the addressable texture memory on the Super FX is 16 times as large as on the Nintendo 64...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p186418"></a>
				<b class="postauthor">ARM9</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p186418">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=186418#p186418"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jan 11, 2017 8:52 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Aug 11, 2013 6:07 am<br /><b>Posts:</b> 57
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">93143 wrote:</div><div class="quotecontent">EDIT:  Just had an idea:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;getb<br />&nbsp; &nbsp;inc R14<br />&nbsp; &nbsp;color<br />&nbsp; &nbsp;plot<br />&nbsp; &nbsp;mult R3&nbsp; &nbsp;; where R3 contains 0010h<br />&nbsp; &nbsp;swap<br />&nbsp; &nbsp;color<br />&nbsp; &nbsp;loop<br />&nbsp; &nbsp;plot<br /></div><br /><br />Okay, never mind; that's a bit slow.  It handles gaps fine, but it can just barely keep up with 4bpp blitting, which means that with metadata handling between lines, this method is probably bottlenecked by code.  For some reason I was thinking SWAP was like XCN on the SPC700; it's actually more like XBA on the 65C816, which means you can't use it to flip the colours in a byte.</div><br /><br />I'm not sure what your idea was but it looks like you're trying to do what the dither flag already does in hardware (doesn't work in 8bpp screen mode).<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">ibt r0, #%00010 ; \<br />cmode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; / set flag 1 (enable dither) in color mode register<br />ibt r0, #$21&nbsp; &nbsp; ; \<br />color&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; / alternate between color 1 and 2<br />ibt r12, #16&nbsp; &nbsp; ; draw 16 pixels<br />move r13, r15&nbsp; &nbsp;; set loop point to next instruction<br />loop<br />plot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; color plotted = (r1^r2)&amp;1 ? high 4 bits : low 4 bits<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6115"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p186435"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p186435">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=186435#p186435"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Jan 11, 2017 7:31 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah, but according to the manual, dither doesn't handle transparent pixels properly, because it determines which nibble to use in parallel with checking whether the bottom nibble is zero.<br /><br />I want to be able to blit objects with gaps and/or odd numbers of pixels in a run without accidentally erasing part of what's underneath them.  At the same time, I want to keep the RAM buffer more or less saturated, which should be easier if I can pull two pixels with a single ROM buffer cycle.  Two of the three methods I posted (not counting the snippet you quoted) use dither for this, but with safeguards to prevent zero overwrites and missed pixels.<br /><br />(There's admittedly not a lot of context for those methods; just assume that dither has been turned on for the &quot;dual-pixel&quot; ones...)<br /><br />...<br /><br />I've just noticed something, and tried it out.  Bit 2 of the plot mode register is supposed to switch between lower and upper nibbles for COLOR or GETC, but...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;getb<br />&nbsp; &nbsp;inc R14<br />&nbsp; &nbsp;from R3<br />&nbsp; &nbsp;cmode&nbsp; &nbsp;; set bit 2 to 0<br />&nbsp; &nbsp;color<br />&nbsp; &nbsp;plot<br />&nbsp; &nbsp;from R4<br />&nbsp; &nbsp;cmode&nbsp; &nbsp;; set bit 2 to 1<br />&nbsp; &nbsp;color<br />&nbsp; &nbsp;loop<br />&nbsp; &nbsp;plot<br /></div><br />That's <em>way slower</em> than the one where I used multiplication to do the bit shift.  Heck, it's slower than just using LSR four times.  What have I missed?<br /><br />...I guess it was intended for accessing compressed source graphics for transforms or texture mapping, not speeding up 1:1 pixel copying.  In that context, you can just use GETC instead of GETB followed by COLOR.  But it still seems hardly worth it compared to MULT+SWAP, considering it needs to be done every time instead of just on even-numbered texels...<br /><br />It would have been nice to have an instruction to directly flip the nibbles in the color register.<br /><br />(Also, it turns out there is no ASL instruction.  They decided to burn an opcode on a sign-preserving ASR instead...)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p186779"></a>
				<b class="postauthor">ARM9</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p186779">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=186779#p186779"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jan 15, 2017 2:52 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Aug 11, 2013 6:07 am<br /><b>Posts:</b> 57
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">93143 wrote:</div><div class="quotecontent">Yeah, but according to the manual, dither doesn't handle transparent pixels properly, because it determines which nibble to use in parallel with checking whether the bottom nibble is zero.</div><br />That's right, reminds me of a test rom that seems to indicate emulators get this wrong, which is understandable assuming no licensed game uses this incorrectly.<br /><!-- m --><a class="postlink" href="http://imgur.com/a/FZCgX">http://imgur.com/a/FZCgX</a><!-- m --> (higan 101 has the old behaviour)<br />The white blocks behind the background are sprites, black is cgram entry 0.<br />I don't have anything to test on so I can't confirm that the patched version is the correct behaviour.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">(Also, it turns out there is no ASL instruction.  They decided to burn an opcode on a sign-preserving ASR instead...)</div><br />Due to the lack of barrel shifter asl/lsl is basically just add, except it affects the overflow flag.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">add r0; add r0; add r0 // r0 &lt;&lt; 3<br />with r2; add r2 // r2 &lt;&lt; 1<br />to r1; from r3; add r3 // r1 = r3 &lt;&lt; 1<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6115"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p189780"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p189780">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=189780#p189780"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Feb 23, 2017 3:49 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, now I'm annoyed.<br /><br />I should have paid more attention to the calculation method for plot addresses.  Apparently you can't plot off the edges of the screen, even though the screen is less than 256 pixels high.  Nor does it wrap intelligently - if you plot a pixel at Y=192 in 192-line mode, it ends up on line 0 in the next column over.  If you plot a pixel at Y = -1 (ie: 255), it ends up on line <em>63</em>.<br /><br />Now I have to choose between drawing to sprite tables all the time (and having to rearrange the data before downloading to VRAM) and putting checks before and/or <em>in</em> the main drawing loop to handle partially offscreen bullets.  At least the X coordinate works fine, since I'm not using the full width...<br /><br /><div class="quotetitle">ARM9 wrote:</div><div class="quotecontent">emulators get this wrong</div><br />Well, it's a good thing I checked, then...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Due to the lack of barrel shifter asl/lsl is basically just add</div><br />That is an excellent point.  I'm not used to being able to add a register to itself.  (At least, I wasn't before I marathoned a nontrivial Super FX program this past weekend - writing 65816 code felt weird after that...)<br /><br />Speaking of shifting, I found that using a table of random numbers was (in my application, which required simultaneous access to a sine table in a different bank) not dramatically faster than just running <a href="http://b2d-f9r.blogspot.ca/2010/08/16-bit-xorshift-rng.html" class="postlink">xorshift16</a>:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;move R0, R1&nbsp; &nbsp;; copy random number into accumulator<br />&nbsp; &nbsp;add R0&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; shift left 4 bits<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;xor R1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; exclusive-OR with old value<br />&nbsp; &nbsp;move R1, R0&nbsp; &nbsp;; copy result to R1<br />&nbsp; &nbsp;lsr&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; shift right 3 bits<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;xor R1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; exclusive-OR with old value<br />&nbsp; &nbsp;move R1, R0&nbsp; &nbsp;; copy result to R1<br />&nbsp; &nbsp;add R0&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; shift left 7 bits<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;xor R1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; exclusive-OR with old value<br />&nbsp; &nbsp;move R1, R0&nbsp; &nbsp;; copy result to R1</div><br />Actually, my initial attempt at a table of rands was <em>slower</em> than the above algorithm, but I'm getting better at this quickly...<br /><br />Fun fact: in high-speed mode, this PRNG executes in the same amount of time it takes an S-CPU in FastROM to load a 16-bit number from direct page...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p189869"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p189869">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=189869#p189869"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Feb 23, 2017 11:43 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, yeah, I think I can do better than that:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;move R0, R1&nbsp; &nbsp;; copy random number into accumulator<br />&nbsp; &nbsp;add R0&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; shift left 5 bits<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;add R0<br />&nbsp; &nbsp;xor R1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; exclusive-OR with old value<br />&nbsp; &nbsp;move R1, R0&nbsp; &nbsp;; copy result to R1<br />&nbsp; &nbsp;hib&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; shift right 9 bits<br />&nbsp; &nbsp;lsr<br />&nbsp; &nbsp;xor R1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; exclusive-OR with old value<br />&nbsp; &nbsp;move R1, R0&nbsp; &nbsp;; copy result to R1<br />&nbsp; &nbsp;lob&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; shift left 8 bits<br />&nbsp; &nbsp;swap<br />&nbsp; &nbsp;xor R1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ; exclusive-OR with old value<br />&nbsp; &nbsp;move R1, R0&nbsp; &nbsp;; copy result to R1</div><br />23 cycles instead of 28.  Nipping at the heels of a reasonable table load algorithm (repeated bankswitching is surprisingly expensive if you don't have registers to burn, and of course memory access itself is painful at five cycles per byte)...<br /><br />...<br /><br />If my math is correct, which it may very well not be, my bullet drawing loop seems to be maximally inefficient.  I added up the cycles it would take to run if it wasn't held up by RAM buffer wait states, and the difference between that and the number of cycles it's actually taking seems to be roughly equal to the average number of cycles it should take to flush the pixel caches for all of the necessary sliver blit operations.  In other words, there seems to be no parallel processing advantage showing up at all.<br /><br />I'm hoping I did something stupid somewhere that's eating a ton of cycles to no purpose...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p190917"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p190917">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=190917#p190917"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 11, 2017 12:06 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Dodge this.<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=8293">FXtest1.sfc</a> [128 KiB]
			</span><br />
			<span class="gensmall">Downloaded 102 times</span>
		

		<br />
	</div><br />640 bullets at 60 fps in 224x192.  The screen flashes red if it drops a frame, but you shouldn't ever see that happen.  With 656 bullets I get the occasional flash, but 640 runs perfectly in higan for over two minutes, which is longer than the period of the PRNG.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p190938"></a>
				<b class="postauthor">psycopathicteen</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p190938">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=190938#p190938"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 11, 2017 2:32 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed May 19, 2010 6:12 pm<br /><b>Posts:</b> 2730
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Is this using 2bpp 8x8 bullets?, but damn 640 is a lot.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4383"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p191009"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p191009">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=191009#p191009"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 12, 2017 12:18 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 960
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yes, it's 2bpp.  The bullets are actually 6x7, which is closer to the size (and shape, with the SNES PAR) of this type of bullet in the original game, and is moreover slightly quicker to draw.<br /><br />I couldn't do 640 bullets under these constraints with a dither-based general-purpose drawing routine; there was too much overhead, and it topped out near 500.  To get to 640 I had to forget about loading from the ROM buffer and just unroll the whole bullet in code.  All the parts that need to be fast still fit in the cache, and my bullet list format allows multiple lists with dedicated handling loops to exist under a common bullet cap, so I think it's a legitimate approach for a number of pattern types.<br /><br />I also didn't bother checking for collision with the player, but I imagine it wouldn't be all that onerous as I can simply leave the player's position in a pair of registers without adding more than a couple of cycles to the drawing code.  Actually checking for collision shouldn't take as long as pulling the position from RAM would...<br /><br />The actual game will have a 144-pixel-wide playfield, which gains me about 50,000 cycles, or roughly 25% extra compute time per frame, since I won't need to spend so much time waiting for DMA and clearing the framebuffer.  And a lot of the bullet patterns need to be 4bpp and hence 30 fps, which should allow me to get much closer to the theoretical pixel buffer flush time, particularly with larger bullets.  For really big ones, if the background isn't Mode 7 I can reserve part of OAM for the GSU and just use real sprites...<br /><br />...<br /><br />Just noting here that I was wrong about &quot;maximally inefficient&quot;.  I just didn't count the cycles carefully enough.  There <em>is</em> a significant parallel processing bonus; it's just not as large as I was hoping, probably because the lines I'm blitting are so short...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p191069"></a>
				<b class="postauthor">Stef</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p191069">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=191069#p191069"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 13, 2017 3:14 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 01, 2013 11:25 am<br /><b>Posts:</b> 248
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Wow, that is really impressive <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />I think it's kind of bullet benchmarking... I guess you are using the SFX to draw the bullet, i wonder how much you can do without the SFX <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> Something i wonder, do you have any kind of double buffering with the SFX memory ? So you can use one bank to work with while you are DMAing the other bank to VRAM ? If that is the case you can really maximum usage of the SFX chip.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6058"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p191113"></a>
				<b class="postauthor">psycopathicteen</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p191113">Re: Fast 2D blitting on Super FX</a></div><div style="float: right;"><a href="./viewtopic.php?p=191113#p191113"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 13, 2017 2:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed May 19, 2010 6:12 pm<br /><b>Posts:</b> 2730
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I did a demo like this a while ago and I got 256 bullets at 30fps, though I had to make the bullets really small like 5x5.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4383"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=15205"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=15205"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 19 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=15205&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=15205&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="15205" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
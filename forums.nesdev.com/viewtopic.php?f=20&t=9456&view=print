<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - EMS 64MB usb cart multiple saves?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">EMS 64MB usb cart multiple saves?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=20&amp;t=9456">http://forums.nesdev.com/viewtopic.php?f=20&amp;t=9456</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>reprep</b> [ Thu Nov 01, 2012 2:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />While looking for a way to make full use of 128 kilobyte SRAM of an EMS 64MB cart for multiple saves (most games have 8 kb save and some 32 kb), i found an old program which does exactly the thing i want.<br /><br />The program is called EMSMenu. it stores the saves into the last 96 kb of SRAM, and copies the save of the game you want to play into the first 32 kb of SRAM, so the game sees the save. So you can use 3 saves on one cart even more in version 2.1 as it takes into account which games use 8 kb.<br /><br />it additionally lets to choose custom pallettes for bw gameboy games.<br /><br />Unfortunately this program is written for old versions of EMS carts and it doesn't work on new EMS 64MB cart. The source code is released too. so i thought posting it here might be a good idea, in hope that it might get someone's attention, as it is a too good project to let die.<br /><br />the main page is here. <br /><br /><!-- m --><a class="postlink" href="http://www.personal.triticom.com/~erm/flavor.8k.com/GameBoy/">http://www.personal.triticom.com/~erm/f ... m/GameBoy/</a><!-- m --><br /><br />some more info from the author about the project:<br /><br /><!-- m --><a class="postlink" href="http://www.personal.triticom.com/~erm/flavor.8k.com/GameBoy/How_Flavors_EMS_SRAM_Works.txt">http://www.personal.triticom.com/~erm/f ... _Works.txt</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Flavor</b> [ Sat Nov 03, 2012 7:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I approve of this message.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sun Nov 04, 2012 9:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I did some research and multiple game saves on the cartridge at the same time will be possible with some restrictions. I patched the menu program to be able to do this. Details should follow in the future. All I will say for now (as I am in a hurry) is that during my testing I was able to have Final Fantasy Adventure, Kirby's Dreamland 2, and Mega Man Xtreme all have their saves maintained on the cartridge at the same time. I can switch between the games as I please and their save data is never bothered by any other game. Details on what the restrictions will be explained when the menu patch is released.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Flavor</b> [ Sun Nov 04, 2012 9:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Nice work, MottZilla.  Let me know if there's anything I can do, but I haven't done GB dev in many years.  When it's done, I can put it up on that <!-- m --><a class="postlink" href="http://www.personal.triticom.com/~erm/flavor.8k.com/GameBoy/">http://www.personal.triticom.com/~erm/f ... m/GameBoy/</a><!-- m --> page.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Nov 05, 2012 6:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />How hard would it be to compress the saves with run-length encoding or Huffman or the like?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Mon Nov 05, 2012 2:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I haven't a clue. The cartridge contains 128 Kbytes of SRAM which is enough for 13 games the way I have it setup. Given the limit of how much ROM you have to store games and even though you have two 4 megabyte pages the SRAM is shared and there is no software way to detect which page you are on so I don't think compression is worth looking into for me personally. But if you want to give it a shot feel free. You might need to poke around to find free room in the 32kbyte menu program.<br /><br />So far testing has gone well. As I mentioned there are restrictions with what games you can put on the cartridge at once. First, you can only have 1 game that uses 32 kbytes of SRAM at a time, for example Pokemon. You can have 12 other games that use 8 kbytes of SRAM. However some games, probably mostly newer MBC5 games that use 8 kbytes may initialize the RAM Bank Register and end up using the same SRAM that 32Kbyte games use. These will have to be avoided being used together or a patch can be made for the 8kbyte game.<br /><br />If anyone can think of various Gameboy games that use SRAM data backup please mention them in a list. I know of these so far.<br /><br />Super Mario Land 2: 6 Golden Coins<br />Super Mario Land 3: Wario Land<br />Wario Land 2<br />Metroid II<br />Mega Man Xtreme<br />Mega Man Xtreme 2<br />Final Fantasy Adventure<br />Kirby's Dreamland 2<br />Crystalis<br />Kaeruno Tameni<br />Pokemon - Series<br />Legend of Zelda - Link's Awakening + DX Version<br />Legend of Zelda - Oracle of Ages &amp; Seasons<br /><br /><br />I can't test them all but a variety is good.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>reprep</b> [ Mon Nov 05, 2012 2:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />thanks for the research. Some more SRAM gameboy games (i am not including GBC games, there are a lot of GBC sram games)<br /><br />Mario's Picross<br />Mario's Picross 2<br />Sword of Hope 2

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Nov 05, 2012 3:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Game Boy Camera (but that probably doesn't count because its mapper has a sensor)<br />LSDJ<br />Tetris DX<br />Donkey Kong (1994)<br />Donkey Kong Land series<br />Kirby Star Stacker

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Tue Nov 06, 2012 1:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for the mentions so far. Some games will need <em>save fix</em> patches for the multi sram menu to work with them. Older games tend not to interfere with the menu but newer games sometimes do, and all greater than 8Kbyte games will. Mario Picross for example is only 8K save but it sets the RAM Bank to 0, which I suspect a number of games will. Basically games that write to the RAM bank register but only have 8K of SRAM will all work with the menu's multi sram feature as long as we patch them. So it should be possible to have 1 32kb save game + 12 8kb save games on the cart at once. Either way it is an improvement.<br /><br />Testing continues.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikeryan</b> [ Wed Nov 07, 2012 12:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Game Boy Camera (but that probably doesn't count because its mapper has a sensor)</div><br />Not to mention that it has 1 Mbit SRAM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Wed Nov 07, 2012 5:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I have updated my <a href="http://thegaminguniverse.org/ninjagaiden4/mottzilla/" class="postlink">website</a> with the MultiSRAM menu and some new fixes and some save game fixes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>reprep</b> [ Thu Nov 08, 2012 12:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />the link doesn't work unfortunately. 404 error.<br /><br />edit: i meant the file link, sc_flasher.zip gives error, not the homepage.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>reprep</b> [ Thu Nov 08, 2012 1:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />few  more battery save games (again only bw gb games):<br /><br />final fantasy legend i and ii<br />golf<br />F-1 race<br />Nobunaga's ambition<br />personal organizer<br />torpedo range<br />ultima:the runes of virtue

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Thu Nov 08, 2012 2:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sorry about that. Somehow the file didn't get uploaded. It's there now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nitro2k01</b> [ Thu Nov 08, 2012 10:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: EMS 64MB usb cart multiple saves?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I had a look at the patch. So, the patch is removing the code which calculates a value to be written as the upper nibble of the value that is being written to $7000. The lower nibble apparently limits the ROM size that's visible to the program, whereas the upper nibble is probably meant to limit the visible size of RAM. Your patch makes it always write 0 as the upper nibble which would make all 128 kB of RAM always visible. Did you research this and conclude that this functionality is broken in the FPGA?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
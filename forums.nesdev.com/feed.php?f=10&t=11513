<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=11513" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2014-08-12T18:13:14-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=11513</id>
<entry>
<author><name><![CDATA[zzo38]]></name></author>
<updated>2014-08-12T18:13:14-07:00</updated>
<published>2014-08-12T18:13:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132465#p132465</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132465#p132465"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132465#p132465"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Let me sum up: Should ROM developers go out of their way to support NESticle?<br /></div>If they want to check for (or even workaround) incorrect implementations, they can if they want to, but I think it should not be necessary. At least I prefer to write the program such that it is designed for a &quot;correct implementation of the Famicom VM&quot; (of which the RF Famicom, and several mapper ASICs (even those used only on NES), are mostly what is defining it (and are considered as a correct implementation); I also consider that unofficial opcodes were not a part of the &quot;Famicom VM&quot; until the Super Famicom and SNES came out; some things do actually have undefined behavior though, such as unstable opcodes). (I do the same with Z-machine programs, although in this case very few programs that implement the Z-machine actually do it correctly even for the required subset. Therefore, it isn't specific to NES/Famicom programming at all!)<br /><br /><div class="quotetitle">Kasumi wrote:</div><div class="quotecontent"><br />I haven't yet used such opcodes, only because I fear some revision of NES somewhere doesn't do what's expected with them.<br /></div>I don't think any official revisions of NES or Famicom is, although I would believe that any that don't are probably incorrect implementations.<br /><br /><div class="quotetitle">Kasumi wrote:</div><div class="quotecontent"><br />I probably should start using them. My game optimizes for speed to nearly every extreme, sacrificing readability and code size for it. My excuse for not using these isn't that great.<br /></div>I agree (although they can sometimes help improve size as well as (or instead of) speed). Use comments if you need to; after all they don't affect it at runtime!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4734">zzo38</a> — Tue Aug 12, 2014 6:13 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Kasumi]]></name></author>
<updated>2014-08-12T10:58:43-07:00</updated>
<published>2014-08-12T10:58:43-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132451#p132451</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132451#p132451"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132451#p132451"><![CDATA[
I haven't yet used such opcodes, only because I fear some revision of NES somewhere doesn't do what's expected with them.<br /><br /><a href="http://forums.nesdev.com/viewtopic.php?p=121040#p121040" class="postlink">This is still really sexy.</a> <br /><br />I probably should start using them. My game optimizes for speed to nearly every extreme, sacrificing readability and code size for it. My excuse for not using these isn't that great.<br /><br />More on topic, I definitely liked the explanations of the KIL opcodes. <a href="http://forums.nesdev.com/viewtopic.php?p=132268#p132268" class="postlink">Especially this post.</a> I was aware of why the illegal/undocumented/what-have-you opcodes are usually combinations of other ones, but that was neat to read.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3504">Kasumi</a> — Tue Aug 12, 2014 10:58 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Drag]]></name></author>
<updated>2014-08-12T10:28:41-07:00</updated>
<published>2014-08-12T10:28:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132450#p132450</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132450#p132450"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132450#p132450"><![CDATA[
I agree that emulators should support the undocumented opcodes (especially since the NES only used the one 6502 revision throughout its lifespan), but I think games doing opcode checks is a bit unnecessary. Of course, I also think using the undocumented opcodes in the first place is unnecessary, so I'm biased.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=21">Drag</a> — Tue Aug 12, 2014 10:28 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2014-08-12T08:42:15-07:00</updated>
<published>2014-08-12T08:42:15-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132447#p132447</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132447#p132447"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132447#p132447"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Let me sum up: Should ROM developers go out of their way to support NESticle?<br /></div><br /><br />There are plenty of modern systems that don't require licensing, e.g. Android, but this also includes any cracked system that people like to run homebrew on. I've run NES emulators on PC, Mac, Linux, DOS, Android, PS3, XBox, and PS1, personally (probably a few more I'm forgetting). People will run an NES emulator on just about anything that will support it. I don't know why you keep trying to restrict this to &quot;modern&quot; or &quot;licensed&quot; or &quot;legal&quot; or things that are currently under development. NES emulation is largely illegal, and the majority of it is done with non-commercial software.<br /><br />What is out of your way?<br /><br />In my view, using an illegal opcode is an optimization of either space or speed, and it comes at a small expense of portability and possibly code readability/maintainability. In most cases, I consider an act of optimization to be out of my way. Writing straightforward, simple code is what I prefer to keep in my way. The thing is, if you've sacrificed anything for size/space that you don't actually need in the end, it's been a net loss for you. This is why I suggested a few posts back that I would normally save optimizations like this for the end of the project when I am already sure I need them. In very specific cases, you <em>need</em> what these opcodes provide, but in the majority of cases you do not.<br /><br />NES emulation in particular has a wider range of well-used emulators than any other system. Wide compatibility is difficult, and yes, I definitely think it's worth avoiding illegal opcodes for this sake. NESticle is an unfair example because it's not well-used, but there are definitely cases in ones that are (I pointed out two in NSF players). I'd have to do a large survey to find out which, and I'm not prepared to do so, but you seem to be taking a position that none of them matter for ideological reasons, I guess. I think they do matter, because people are using them.<br /><br />I also think people should improve their emulators and get the proper support for these opcodes in, but I like to treat that as a separate issue.<br /><br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />If VirtuaNES uses the same 6502 core<br /></div><br />VirtuaNSF does not use the same CPU (or APU) code as VirtuaNES, or at least, doesn't appear to. I tried looking at the VirtuaNES source to gain insight into VirtuaNSF at one point, but it became clear it was pointless because they didn't match at all for what I was testing.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Aug 12, 2014 8:42 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-08-12T08:11:55-07:00</updated>
<published>2014-08-12T08:11:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132445#p132445</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132445#p132445"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132445#p132445"><![CDATA[
@mikaelmoizt In some of my productions, you'll see the carry flag used to switch on which button was pressed.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">  lda new_keys  ; each bit here represents a button pressed this frame but not the previous<br />  lsr a<br />  bcc not_right<br />  ; omitted: handle right press<br />  rts<br />not_right:<br />  lsr a<br />  bcc not_left<br />  ; omitted: handle left press<br />  rts<br />not_left:<br />  ; etc.<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Aug 12, 2014 8:11 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-08-12T08:07:59-07:00</updated>
<published>2014-08-12T08:07:59-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132444#p132444</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132444#p132444"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132444#p132444"><![CDATA[
<div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"><br />VirtuaNSF just increments the PC on an illegal opcode<br /></div><br />If VirtuaNES uses the same 6502 core, <a href="http://tasvideos.org/forum/viewtopic.php?p=306559#306559" class="postlink"><em>Puzznic</em> will shake</a>. <em>Puzznic</em> uses $89 $00, which is BIT #$00 on 65C02 and NOP #$00 on 6502. Here's an object-detect:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; The code<br />  CLC<br />  .byte $89<br />  SEC<br />  BCS fail<br /><br />; How a conforming 6502 emulator sees it<br />  CLC<br />  SKB #$38<br />  BCS fail<br /><br />; How a conforming 65C02 emulator sees it<br />  CLC<br />  BIT #$38  ; BIT modifies NVZ, but not C<br />  BCS fail<br /><br />; How VirtuaNES might see it<br />  CLC<br />  NOP<br />  SEC<br />  BCS fail<br /></div><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I'm talking about someone running a homebrew ROM here.<br /></div><br />I thought modern consoles didn't support sideloading. How would the developer of an emulator that runs on a modern video game console get the emulator past the console's digital signature validation in the first place?<br /><br /><strong>Edit conflict 1 while trying to post this reply:</strong><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Bug reports are good only when:<br />1. users actually submit them<br />2. to somebody who will actually do something about them<br /></div><br />Are you referring to bug reports by users of a ROM to the ROM's author, or bug reports by users of an emulator to the emulator's author? Because how failure to submit them or failure to handle them differs between the two simulations. Or should I explain fully for both situations?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Furthermore, there are lots of popular emulators that have long been abandoned<br /></div><br />And there are lots of popular web browsers that have long been abandoned, such as Internet Explorer for Windows XP. IE/XP hasn't had any substantial updates for five years since XP went into extended support.<br /><br />Let me sum up: Should ROM developers go out of their way to support NESticle?<br /><br /><strong>Edit conflict 2:</strong> I will double post because mikaelmoizt's comment is unrelated.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Aug 12, 2014 8:07 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mikaelmoizt]]></name></author>
<updated>2014-08-12T08:06:33-07:00</updated>
<published>2014-08-12T08:06:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132443#p132443</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132443#p132443"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132443#p132443"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />LDX $blabla,X<br />LDY $blabla,Y<br /><br />I don't know what's wrong in indexing with a register, and then scrapping the index with a new value. Apparently, MOSTEC decided it was worthless  ...<br /></div><br /><br />Agreed. This would be a nice way of doing things. <br /><br />Also, it would be nice if I had a set of logical operations to be &quot;non destructive&quot; to acc. and just result in a flag. <br />But that might only be an unexperienced coder issue <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />So far, I am forced to do stupid things like this when checking joypad input because A gets changed when ANDed.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">LDA somewhere<br />TAX<br />AND #something<br />BNE go some place<br />TXA <br />AND #something 2<br />BNE go somewhere else<br />TXA<br />AND #something 3<br />...<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6478">mikaelmoizt</a> — Tue Aug 12, 2014 8:06 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2014-08-12T07:54:50-07:00</updated>
<published>2014-08-12T07:54:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132441#p132441</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132441#p132441"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132441#p132441"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />If a publisher has the resources to become a licensed developer for a video game console, it probably has the resources to improve an emulator to support the opcodes that nestest tests.<br /><br />...<br /><br />Someone who receives a bug report about a game not running on a particular emulator could have the user try running nestest on the same emulator and reporting the bug to the emulator's developer.<br /></div><br /><br />I'm talking about someone running a homebrew ROM here. I think most NES emulators that can run a user's ROMs aren't going to be licensed, and there are plenty of platforms where licensing isn't a requirement either.<br /><br />Bug reports are good only when:<br />1. users actually submit them<br />2. to somebody who will actually do something about them<br /><br />I love to get bug reports, and I try to submit them when I can, but I think people that do so are in the vast minority, unfortunately. Furthermore, there are lots of popular emulators that have long been abandoned, and there's nobody there to listen to bug reports anyway.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Aug 12, 2014 7:54 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2014-08-12T07:45:04-07:00</updated>
<published>2014-08-12T07:45:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132440#p132440</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132440#p132440"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132440#p132440"><![CDATA[
VirtuaNSF just increments the PC on an illegal opcode, as I recall, but its been a while since I tested it, and it's not open source.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Aug 12, 2014 7:45 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-08-12T07:35:24-07:00</updated>
<published>2014-08-12T07:35:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132439#p132439</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132439#p132439"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132439#p132439"><![CDATA[
<div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"><br />VirtuaNSF doesn't support illegal opcodes and it's one of the most popular NSF players.<br /></div><br />What does it do when an unofficial opcode is executed, so that it can be detected?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I would bet there's more than one popular NES emulator on more obscure targets (e.g. video game consoles, cell phones) that doesn't support them.<br /></div><br />If a publisher has the resources to become a licensed developer for a video game console, it probably has the resources to improve an emulator to support the opcodes that nestest tests. For cell phones, I'm not aware of any that ship with a gamepad, and I had no end of problems trying to control a platformer with a virtual gamepad on my Nexus 7 tablet. Xperia Play is outdated and discontinued.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I'm not too concerned about Windows users, but even still, when a ROM doesn't run, <em>especially</em> a homebrew, users are very likely to blame the ROM before they blame their emulator.<br /></div><br />To continue the web JavaScript analogy: &quot;object detection&quot; and other forms of behavior detection are best practice there. A game that uses unofficial opcodes for speed could show a copyright notice for a couple seconds while testing the behavior of the opcodes it uses, but I grant that that doesn't work for space.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Sometimes you don't have much of a choice on which emulator to use, and a lot of times the choice is made for other reasons (nicest interface) than accuracy (why aren't we all playing games on nintendulator?).<br /></div><br />Someone who receives a bug report about a game not running on a particular emulator could have the user try running nestest on the same emulator and reporting the bug to the emulator's developer.<br /><br />But at some point you have to give up. There are emulators that can't run a very simple UNROM, as <a href="http://forums.nesdev.com/viewtopic.php?t=1179" class="postlink">I discovered in 2006</a> when I was developing an e-book reader to run on a DVD player.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Aug 12, 2014 7:35 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2014-08-12T07:07:30-07:00</updated>
<published>2014-08-12T07:07:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132437#p132437</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132437#p132437"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132437#p132437"><![CDATA[
Neither VirtuaNSF nor NEZPlug++ supports illegal opcodes and they are two of the most popular NSF players.<br /><br />I would bet there's more than one popular NES emulator on more obscure targets (e.g. video game consoles, cell phones) that doesn't support them.<br /><br />I'm not too concerned about Windows users, but even still, when a ROM doesn't run, <em>especially</em> a homebrew, users are very likely to blame the ROM before they blame their emulator.<br /><br />Sometimes you don't have much of a choice on which emulator to use, and a lot of times the choice is made for other reasons (nicest interface) than accuracy (why aren't we all playing games on nintendulator?).<br /><br />So, what I'm saying is that if I can spare, say, 150 bytes to avoid the issue, I am likely to do so. Or, more practically, I code first without considering fussy optimizations like this. When I run out of space/performance, then I start considering these tradeoffs. This often leaves me a nice buffer to work with when a project becomes tight near its conclusion, and at this point the design is very stable, so the maintainability issue becomes less important. On the other hand, if it never becomes tight, then it was never an issue and I didn't have to trade anything for it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Aug 12, 2014 7:07 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-08-12T06:39:01-07:00</updated>
<published>2014-08-12T06:39:01-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132436#p132436</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132436#p132436"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132436#p132436"><![CDATA[
Nestest tests the most useful unofficial opcodes. Avoiding known capabilities of the NES hardware for the sake of compatibility with emulators that don't even pass nestest is like avoiding HTML capabilities for the sake of compatibility with Internet Explorer 8. Everybody who owns a computer running supported Windows is eligible for an upgrade to at least IE 9, and everybody who owns a computer running even the most recently end-of-lifed Windows (that is, Windows XP) still has access to Firefox and Chr...oh wait this isn't Slashdot. Let me just say that any platform with FCEUX should be able to run it, and any platform with support for USB joysticks has FCEUX.<br /><br />Saving bytes can help a great deal when trying to pack the last few features into NROM, especially if you can find several dozen places where you can LAX or AXS.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Aug 12, 2014 6:39 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2014-08-12T06:17:43-07:00</updated>
<published>2014-08-12T06:17:43-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132435#p132435</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132435#p132435"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132435#p132435"><![CDATA[
Yes of course there is indexed STX/STY on the zeropage, but obviously that's not what I wish for. <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br /><br />In general I try not to make a habit of assuming the state of a flag, mainly for the reason you mentioned. I need to push things around now and then, and it's easy to lose track of this kind of thing. When I do feel the need, I try to comment it something like: <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">;clc ; already clear</tt><br /><br />Most of the code I write might run once or twice per frame at most. Saving two cycles isn't much of an issue. Saving a byte could be, though. As such I would usually reserve the use of illegal opcodes and assumed flags for inner loops and very often called code, or for when I've actually identified a performance problem. The rest of the time I'd rather have code that's easy to read/edit.<br /><br />Though, illegal opcodes don't really hinder readability, just portability. Would you rather your code run on more obscure emulators that haven't implemented these opcodes, or save a few bytes/cycles? I could go either way on this decision, depending on the situation.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Aug 12, 2014 6:17 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2014-08-12T02:19:02-07:00</updated>
<published>2014-08-12T02:19:02-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132433#p132433</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132433#p132433"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132433#p132433"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Most often I want an indexed STX/STY<br /></div><br />This exists, but only on zero-page.<br /><br />For branch always, in 80% of the cases there is another flag that you can know it's state and do a &quot;fake&quot; conditional branching (i.e. BCC with carry always = 0, etc..). However, it's very vulnerable to problems with former modification of the code.<br /><br />Same with INC A, you can often use simply use ADC #$01 or ADC #$00 if you know the state of the carry.<br /><br />Opcodes I've also been wishing (but that unofficial opcodes doesn't help with unfortunately) : <strong>LDX/LDY indexed with the same register, and NEG A</strong>.<br /><br />LDX $blabla,X<br />LDY $blabla,Y<br /><br />I don't know what's wrong in indexing with a register, and then scrapping the index with a new value. Apparently, MOSTEC decided it was worthless, but I find myself always doing a<br /><br />LDA $blabla,X<br />TAX<br /><br />As for <strong>NEG A</strong> (two's complement A), doing this :<br /><br />EOR #$ff<br />CLC<br />ADC #$01<br /><br />is tedious and wastes 5 bytes (and overwrites the carry) for a very simple operation.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Tue Aug 12, 2014 2:19 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Drag]]></name></author>
<updated>2014-08-11T17:01:40-07:00</updated>
<published>2014-08-11T17:01:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132423#p132423</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132423#p132423"/>
<title type="html"><![CDATA[Re: KIL opcodes and such]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11513&amp;p=132423#p132423"><![CDATA[
I see how undocumented opcodes can be useful, but unless I'm doing some kind of demoscene-esque demo, I prefer to code the &quot;correct&quot; way and rely on other tricks instead, especially because I'm more concerned with the code <em>working</em> than I am with saving a byte in a potentially dangerous way.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=21">Drag</a> — Mon Aug 11, 2014 5:01 pm</p><hr />
]]></content>
</entry>
</feed>
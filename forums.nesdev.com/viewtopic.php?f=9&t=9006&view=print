<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - ENIO - NES Ethernet &amp; USB KB Adapter</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">ENIO - NES Ethernet &amp; USB KB Adapter</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9006">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9006</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>chykn</b> [ Tue Jun 12, 2012 12:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>ENIO - NES Ethernet &amp; USB KB Adapter</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />As I used to hear so often in my childhood, it's time to poop or get off the pot.  I'm ready to put together a few ENIO boards for those who are interested in adding ethernet/USB KB capabilities to their game.  It consists of two boards.  The first is the EXP adapter board which contains the 3.3v regulator and the CPLD.  The second is the CPU board which contains the PIC32, USB and ethernet components.  It adds a few bucks to the design, but this way it's easier to connect the ethernet/USB cables and see the ethernet lights.  The CPU board could also be attached to a custom cart for those who use a toploader or NES clone.
<br />
<br /><a href="http://www.chykn.com/ENIOEXPBoard-Small.jpg" class="postlink">The EXP Adapter board</a>
<br /><a href="http://www.chykn.com/ENIOMainBoard-Small.jpg" class="postlink">The CPU board</a>
<br />
<br />The cost will be $50 plus shipping.  This includes both boards and the 26-pin IDC cable connecting them.  The first couple users will be beta testers and will need to have a Pickit3 programmer.  The SD card bootloader has not been rolled into the firmware yet.  The board in the picture does not have the micro SD slot, but the next couple will.  As you can tell from the picture, I'm etching the boards myself right now.  I'll have a batch fabbed after getting input from the beta testers.
<br />
<br />If anyone is interested in paying to be a guinea pig, let me know so I can get the necessary parts on the next Digikey order.
<br />
<br />Thanks!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Tue Jun 12, 2012 5:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Nice work!
<br />
<br />I'd like to pick one up from you.  I'm not much of a pic guy so I have to ask, why won't my pickit2 work for programming it?
<br />
<br />How soon do you plan to implement the sd card bootloader?  I'd like to avoid buying a pickit3 if I can, not a deal breaker just preferred.
<br />
<br />I know you've covered somethings in other posts and such but will you provide schematics and such for aid in interfacing and such?  Also what's it's current state of operation?  Any sort of demo or anything that can be run currently assuming the user has a devcart?  Also curious what code you'll be sharing (nes, firmware, etc).
<br />
<br />EDIT: also curious what the EXP connector looks like.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Tue Jun 12, 2012 5:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Super, SUPER awesome.  :D

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>chykn</b> [ Tue Jun 12, 2012 8:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks guys!  Let's see...
<br />
<br /><strong>Bootloader</strong> - I'll try to get the SD bootloader done in the next two weeks.  That would be enough time to get the next batch of parts in and build another couple boards.  I say the Pickit3 because the Pickit2 does not support the PIC32 chips.  But hopefully I'll get the bootloader working and it will be a moot point.
<br />
<br /><strong>Schematics</strong> - Not sure about the schematics, but I'lll definitely provide a pinout of the connectors, description of the signals and a general diagram showing the functions of each piece.  I could see someone using the EXP Adapter to interface the NES with their own device.  Or use the CPU board to give network capabilities to another legacy system.
<br />
<br /><strong>Operation &amp; Code</strong> - Right now there is a basic command set that the cart can use to tell the ENIO to open up a channel to an IP host.  It's barebones but functional.  You specify the IP to connect to, TCP or UDP, the port number and the virtual channel ID you want to give the connection.  I'll provide the command set as well as ASM usage examples.  The command set will be refined as beta testers provide feedback.
<br />
<br /><strong>Demo</strong> - The demo I came up with is a guy walking around the DW1 overworld.  Which is trivial except for the fact that the map data is not stored on the cart.  It's streamed from a map server on a Linux box as the player walks around.  Player moves up, map server sends another row of map tiles.  Someone mentioned making a Google Maps 8-bit edition and I thought "what a waste of time!"  Then I saw the Google April Fools joke they were referring to and started wondering if they had an ASCII rendering API I could integrate into the map server.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br /><strong>Connector</strong> - The EXP connector itself is the exact same as the one I used on earlier boards.  I received a package yesterday with enough parts to make at least another 100 EXP connectors, so no worries there.
<br /><a href="http://www.chykn.com/ENIO-Rev1.jpg" class="postlink">Early ENIO Board - Bottom</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Wed Jun 13, 2012 3:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Alright well if you can count me in.  I'm more than willing to do some beta testing and look forward to it.  Fair warning though, I'm no guru when it comes to networking.  I know the difference between TCP/UDP and what ports are and such but don't have enough experience to be too savvy with it.  Perhaps that's a good thing though, I can follow directions and provide somewhat novice problems/feedback from a networking perspective.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>noattack</b> [ Wed Jun 13, 2012 4:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I am REALLY happy to see this project revived.
<br />
<br />So how would the adapter work with a game programmed to interface with it? (Sorry for the basic question, but I don't quite understand how it works.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>chykn</b> [ Wed Jun 13, 2012 11:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Good question.  Think of the ENIO as broker.  It does all the heavy lifting as far as IP communications and USB input.  The NES simply tells it where to connect and how to connect to it.  The NES talks directly to the ENIO over a command channel, VCID x01.  USB KB data is input from VCID x02.  IP sessions are dynamically assigned x10 and above.  These numbers are subject to change, but the idea will stay the same.
<br />
<br />A sample session goes like this...
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">--- Session Startup ---<br />NES -&gt; ENIO &#40;VCID x01&#41; HELLO<br />ENIO -&gt; NES &#40;VCID x01&#41; HELLO<br /><br />--- Check for valid DHCP or Static IP ---<br />NES -&gt; ENIO &#40;VCID x01&#41; Have an IP?<br />ENIO -&gt; NES &#40;VCID x01&#41; YES/NO<br /><br />--- If we have a valid IP, let's connect to a server ---<br />NES -&gt; ENIO &#40;VCID x01&#41; Connect to 192.168.1.10 on TCP port 10101<br />ENIO -&gt; NES &#40;VCID x01&#41; Established, use VCID x10<br />NES -&gt; ENIO &#40;VCID x01&#41; Switch input to VCID x10<br /><br />--- NES sends data to server and gets reply ---<br />NES -&gt; ENIO &#40;VCID x10&#41; &lt;some data to server&gt;<br />ENIO -&gt; NES &#40;VCID x10&#41; &lt;reply from server&gt;<br /><br />--- NES tells ENIO to close IP session&nbsp; ---<br />NES -&gt; ENIO &#40;VCID x01&#41; Close session on channel x10<br /><br />--- Input some data from the keyboard ---<br />NES -&gt; ENIO &#40;VCID x01&#41; Switch input to VCID x02<br />ENIO -&gt; NES &#40;VCID x02&#41; 'A'&nbsp; &nbsp;&lt;-- User pressed 'A' last<br /></div>
<br />
<br />This is a simplified version of course, but it should give you an idea of what a conversation between the NES and ENIO looks like.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Thu Jun 14, 2012 12:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Any docs on the NES &lt;-&gt; ENIO communication protocol itself, aside from the simplified version?  I'm looking for register interface details, packet formulation for things like src/dst IP address, IP vs. ICMP, IP protocol (TCP or UDP), port numbers, etc...  :-)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>chykn</b> [ Sat Jun 16, 2012 3:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Right now everything is in an Excel spreadsheet, but I'll put it up on a wiki before I send out any boards.  I had it in Mediawiki on my site at one point but it got so much spam I took it down.  Have to work on those security settings.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 16, 2012 4:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">chykn wrote:</div><div class="quotecontent">I had it in Mediawiki on my site at one point but it got so much spam I took it down.  Have to work on those security settings.</div>
<br />These steps have ended up working for preventing spam on <a href="http://pineight.com/mw/" class="postlink">my own wiki</a>:
<br /><ul><li>Leave talk pages open to anons and new users, but require e-mail confirmation or autoconfirmed (two edits and four days) to edit pages in non-talk namespaces. </li><li>Use the QuestyCaptcha plug-in for ConfirmEdit and come up with questions that are relevant to the subject matter of your wiki. QuestyCaptcha has been far more effective for me than Google reCAPTCHA was. </li><li>Make Talk:Main Page a <a href="http://en.wikipedia.org/wiki/Wikipedia:Soft_redirect" class="postlink">soft redirect</a> to some other talk page and protect it. </li><li>Optionally, if you know regex, install AntiSpoof and AbuseFilter for any spam that makes it past these measures. </li></ul>
<br />If you need help with setting them up in your LocalSettings.php, PM me or start a topic in General Stuff.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>chykn</b> [ Tue Jun 19, 2012 1:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">These steps have ended up working for preventing spam on my own wiki:</div><br />Thanks a bunch for the advice.  I tightened things up a bit and re-enabled the site.  I'll send you my settings file if I run into any more issues.<br /><br /><div class="quotetitle">koitsu wrote:</div><div class="quotecontent">Any docs on the NES &lt;-&gt; ENIO communication protocol itself, aside from the simplified version?</div>
<br />This should get things started.  I updated the basic project info and added more details on the CGP protocol.  Still need to put up a section on buffering, though.  Look for the CGP link at the bottom of the ENIO wiki...
<br /><a href="http://enio.chykn.com" class="postlink">http://enio.chykn.com</a>
<br />
<br />I etched and assembled another set of boards yesterday.  The new CPU board has the MicroSD slot to test the bootloader.  Will be working on getting that rolled into the firmware this week.  A pic of the new CPU board is on the wiki under "ENIO CPU Board".

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>chykn</b> [ Sat Aug 25, 2012 10:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: ENIO - NES Ethernet &amp; USB KB Adapter</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Posted a video on Youtube giving an initial look at the production EXP and CPU boards.  Will try to post another in the next week or so with a more detailed look at the CPU board.  Mostly information that's already on the project page, but presented with a twinge of southern drawl.<br /><br /><a href="http://www.youtube.com/watch?v=KBSdktDG_tk" class="postlink">http://www.youtube.com/watch?v=KBSdktDG_tk</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Sat Aug 25, 2012 11:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: ENIO - NES Ethernet &amp; USB KB Adapter</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />very NICE!<br /><br />The cases and everything looks really good, I wasn't expecting that much polish originally.  Good luck with the final touches!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>noattack</b> [ Sat Aug 25, 2012 3:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: ENIO - NES Ethernet &amp; USB KB Adapter</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Awesome work. Can't wait to see software up and running.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>chykn</b> [ Sun Aug 26, 2012 11:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: ENIO - NES Ethernet &amp; USB KB Adapter</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The SD bootloader is now functioning.  Still need to update the code to rename or remove the image.hex file after flashing.  But, I was able to flash a fresh board with the bootloader, put in the MicroSD card with the image.hex file and within a few seconds the CPU board was up and running.  Will add the cleanup code and test it out some more tomorrow.  For those who wanted one of the first couple, I should be able to have them in the mail Tuesday.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
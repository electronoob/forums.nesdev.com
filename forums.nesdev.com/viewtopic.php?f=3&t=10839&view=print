<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - About glitches</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">About glitches</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=10839">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=10839</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Thu Jan 02, 2014 8:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello,everyone!  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br />I have a problem on my emulator. My emulator use loopy's <em>The skinny on NES scrolling</em><br />The graphics generate glitches, some games at scanline 0 , and some demos at every visible scanline.(scanline scope is -1 ~ 260, -1 represents pre-renderline, 0 ~ 239 represents visible scanlines, 240  represents post-renderline, 241 ~ 260 represents vblank stuff)<br /><br />Here are some pictures<br /><br /><img src="http://bwrfb.img38.wal8.com/img38/398295_20140102232408/138867630955.bmp" alt="Image" /><br /><img src="http://bwrfb.img38.wal8.com/img38/398295_20140102232408/138867632378.bmp" alt="Image" /><br /><img src="http://bwrfb.img38.wal8.com/img38/398295_20140102232408/138867631925.bmp" alt="Image" /><br /><img src="http://bwrfb.img38.wal8.com/img38/398295_20140102232408/13886763147.bmp" alt="Image" /><br /><img src="http://bwrfb.img38.wal8.com/img38/398295_20140102232408/138867632989.bmp" alt="Image" /><br /><img src="http://bwrfb.img38.wal8.com/img38/398295_20140102232408/138867630442.bmp" alt="Image" /><br /><br />What's wrong?<br /><br />I guess the reasion maybe $2005 write

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Thu Jan 02, 2014 9:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />who can help me? <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Quietust</b> [ Thu Jan 02, 2014 9:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />1. Expecting a reply within 1 hour of your initial post is unreasonable - some of us only check this forum once per <strong>day</strong>, often even less frequently.<br /><br />2. Do <strong>not</strong> expect older demo ROMs to work correctly, since most of them were designed to work on emulators and were never verified to work correctly on real hardware. It's entirely possible that those glitches are <strong>supposed</strong> to appear. Similarly, always check <a href="http://wiki.nesdev.com/w/index.php/Game_bugs" class="postlink">this list</a> before trying to &quot;fix&quot; graphical glitches in a particular game.<br /><br />3. It looks like you're using an outdated version of scanline.nes (the 2nd-last picture) - use <a href="http://www.qmtpro.com/~nes/demos/scanline.zip" class="postlink">this one</a> instead.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu Jan 02, 2014 11:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Some games (mostly early ones) set the vertical scroll to -1 in order to compensate for the 1 scanline delay in sprite coordinates. This may cause attribute table data to be rendered as name table data in the first scanline of the screen, which most of the time will look like garbage. Since this isn't visible in most TVs, the problem was never detected by the developers. You should check each game (in other emulators and possibly a real console though video capture) to verify whether it's supposed to have those glitches before trying to fix them.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu Jan 02, 2014 12:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />CMCWavy and Soccer look correct on Nintendulator, so the roms probably aren't the problem here.  Try posting a screenshot of Slalom, that game uses both negative scroll and lots of horizontal scroll changes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Thu Jan 02, 2014 7:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">CMCWavy and Soccer look correct on Nintendulator, so the roms probably aren't the problem here.  Try posting a screenshot of Slalom, that game uses both negative scroll and lots of horizontal scroll changes.</div><br /><br /><img src="http://bwrfb.img38.wal8.com/img38/398295_20140102232408/138871608932.bmp" alt="Image" /><br /><br /><strong>Slalom</strong> has glitches too. The same problem occured in <strong>F1 Race</strong><br /><br />Somehow, I always think the reason is that I didn't properly deal with first write to $2005 to change coarse X(Tile Number) and find x.<br />Do you agree with me?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Thu Jan 02, 2014 7:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Some games (mostly early ones) set the vertical scroll to -1 in order to compensate for the 1 scanline delay in sprite coordinates. This may cause attribute table data to be rendered as name table data in the first scanline of the screen, which most of the time will look like garbage. Since this isn't visible in most TVs, the problem was never detected by the developers. You should check each game (in other emulators and possibly a real console though video capture) to verify whether it's supposed to have those glitches before trying to fix them.</div><br /><br />I will disassemble the ROM to verify it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Thu Jan 02, 2014 7:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Quietust wrote:</div><div class="quotecontent">1. Expecting a reply within 1 hour of your initial post is unreasonable - some of us only check this forum once per <strong>day</strong>, often even less frequently.<br /><br />2. Do <strong>not</strong> expect older demo ROMs to work correctly, since most of them were designed to work on emulators and were never verified to work correctly on real hardware. It's entirely possible that those glitches are <strong>supposed</strong> to appear. Similarly, always check <a href="http://wiki.nesdev.com/w/index.php/Game_bugs" class="postlink">this list</a> before trying to &quot;fix&quot; graphical glitches in a particular game.<br /><br />3. It looks like you're using an outdated version of scanline.nes (the 2nd-last picture) - use <a href="http://www.qmtpro.com/~nes/demos/scanline.zip" class="postlink">this one</a> instead.</div><br /><br />1. You are right, but I am a bit hurry. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br />2. Yeah. The page I accessed frequently. It's very useful to me. Simultaneously, <a href="http://wiki.nesdev.com/w/index.php/Tricky-to-emulate_games" class="postlink">Tricky-to-emulate games</a> also important.<br /><br />3. I am trying to understand your scanline.asm's every instruction

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>WedNESday</b> [ Fri Jan 03, 2014 4:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Looks like a timing error to me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Fri Jan 03, 2014 8:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">WedNESday wrote:</div><div class="quotecontent">Looks like a timing error to me.</div><br />Maybe, but I couldn't find the actual reason.<br />I guess sprite hit should be OK, because <strong>Battletoads</strong> could be run properly.<br />Do you know any test ROM for accurate timing?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ArsonIzer</b> [ Fri Jan 03, 2014 9:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Boolean wrote:</div><div class="quotecontent">Do you know any test ROM for accurate timing?</div><br />CPOW once posted a link to the collection of test ROMs he had accumulated when I was having trouble with my CPU/PPU, and they helped a lot: <a href="https://github.com/christopherpow/nes-test-roms" class="postlink">https://github.com/christopherpow/nes-test-roms</a><br /><br />Some of these are timing-related test ROMs. Maybe they will prove to be useful.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Fri Jan 03, 2014 9:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">ArsonIzer wrote:</div><div class="quotecontent"><div class="quotetitle">Boolean wrote:</div><div class="quotecontent">Do you know any test ROM for accurate timing?</div><br />CPOW once posted a link to the collection of test ROMs he had accumulated when I was having trouble with my CPU/PPU, and they helped a lot: <a href="https://github.com/christopherpow/nes-test-roms" class="postlink">https://github.com/christopherpow/nes-test-roms</a><br /><br />Some of these are timing-related test ROMs. Maybe they will prove to be useful.</div><br /><br />Yeah!<br />Those ROMs were downloaded by me last year, and I did some tests.<br />Now, I think I should test ROMs about timing carefully.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Sun Jan 05, 2014 7:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=1110&amp;mode=view"><img src="./download/file.php?id=1110&amp;t=1" alt="apocalypse.png" /></a><br />
			<span class="gensmall">apocalypse.png [ 298.79 KiB | Viewed 613 times ]</span>
		

		<br />
	</div><br /><br />I test a rom called apocalypse.nes.<br />Nametable window is ok, but FC87 main window is error.<br />It seems that nametable switch not properly.<br />I need to check <strong>The skinny on NES scrolling</strong> implementation in my emulator.<br /><br />The demo apocalypse downloaded from <a href="https://github.com/christopherpow/nes-test-roms" class="postlink">https://github.com/christopherpow/nes-test-roms</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Boolean</b> [ Wed Jul 16, 2014 8:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: About glitches</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I find a reason about horizon shaking. The reason is that my cpu's crossing page implementation<br />is wrong, and I no longer judge crossing page the video is better than ever.<br /><br />for example<br />boing.png:<br />Judging crossing page left is shaking and right is shaking too.<br />Don't judge crossing page right is shaking only.<br />scanline.png:<br />Judging crossing page left is shaking and right is shaking too.<br />Don't judge crossing page neither left nor right is shaking.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=1745&amp;mode=view"><img src="./download/file.php?id=1745&amp;t=1" alt="boing.png" /></a><br />
			<span class="gensmall">boing.png [ 17.87 KiB | Viewed 246 times ]</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=1744&amp;mode=view"><img src="./download/file.php?id=1744&amp;t=1" alt="scanline.png" /></a><br />
			<span class="gensmall">scanline.png [ 16.28 KiB | Viewed 246 times ]</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
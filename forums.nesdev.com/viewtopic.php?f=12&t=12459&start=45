<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - SNES Programing Help 2</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - SNES Programing Help 2" href="http://forums.nesdev.com/feed.php?f=12&amp;t=12459" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '4');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=12459';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Mar 20, 2015 6:51 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=12459&amp;start=45">SNES Programing Help 2</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=12459"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>4</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 80 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=12&amp;t=12459&amp;start=30">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=12&amp;t=12459">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12459&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12459&amp;start=30">3</a><span class="page-sep">, </span><strong>4</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12459&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12459&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=12459&amp;start=60">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=12459&amp;start=45&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=12459&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=12459&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p142859"></a>
				<b class="postauthor">Sik</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142859">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142859#p142859"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 12, 2015 11:36 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Aug 12, 2010 3:43 am<br /><b>Posts:</b> 695
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">But then you create a lot of other problems in the code as you need to account for the wrapping.<br /><br />It'd be probably better to store coordinates as 16-bit integer (no fractional part) and speeds as 8.8 fixed point, then when applying the momentum fake the subpixel accuracy through dithering over time.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4526"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p142864"></a>
				<b class="postauthor">psycopathicteen</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142864">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142864#p142864"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 12, 2015 12:44 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed May 19, 2010 6:12 pm<br /><b>Posts:</b> 987
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I guess it depends how much continuity you want.  If you're okay with objects resetting themselves, or doing one way scrolling, you could do it this way, but if you need to come back to objects later, then it doesn't work as well.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4383"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p142878"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142878">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142878#p142878"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 12, 2015 5:59 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 514<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, you know, I tried to start working on using direct page, but just after writing<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda ObjectOffset&nbsp; &nbsp; ;make sure you're in 16-bit A mode<br />tcd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;set direct page (D) register to address of current object slot</div><br />It glitched up, and I didn't even write lda.b for anything yet, so I don't get it. I have two files, one called Metasprite and Metasprite Bad. (The sprite flipping isn't completed yet, so it looks really weird, but that isn't the problem.) Metasprite Bad is obviously the one that causes it to get jacked up. (It works fine until a bullet gets spawned by pressing B.) Game is using Metasprite, while Game Bad is using Metasprite Bad. I really don't have a clue what the problem is, because I've never done anything with direct page. I'd say look at bullet in Objects, and see Metasprite Bad.<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=2815">MetaspriteDemoKoitsu.rar</a> [305.75 KiB]
			</span><br />
			<span class="gensmall">Downloaded 6 times</span>
		

		<br />
	</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p142880"></a>
				<b class="postauthor">Sik</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142880">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142880#p142880"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 12, 2015 7:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Aug 12, 2010 3:43 am<br /><b>Posts:</b> 695
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">I guess it depends how much continuity you want.  If you're okay with objects resetting themselves, or doing one way scrolling, you could do it this way, but if you need to come back to objects later, then it doesn't work as well.</div><br />I was actually thinking more about what would happen when a moving object crosses a boundary (which will inevitably happen).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4526"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p142906"></a>
				<b class="postauthor">Khaz</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142906">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142906#p142906"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 13, 2015 9:01 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6817_1419571666.gif" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Dec 25, 2014 10:26 pm<br /><b>Posts:</b> 53<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Espozo wrote:</div><div class="quotecontent">Okay, you know, I tried to start working on using direct page, but just after writing<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda ObjectOffset&nbsp; &nbsp; ;make sure you're in 16-bit A mode<br />tcd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;set direct page (D) register to address of current object slot</div><br />It glitched up, and I didn't even write lda.b for anything yet, so I don't get it. I have two files, one called Metasprite and Metasprite Bad. (The sprite flipping isn't completed yet, so it looks really weird, but that isn't the problem.) Metasprite Bad is obviously the one that causes it to get jacked up. (It works fine until a bullet gets spawned by pressing B.) Game is using Metasprite, while Game Bad is using Metasprite Bad. I really don't have a clue what the problem is, because I've never done anything with direct page. I'd say look at bullet in Objects, and see Metasprite Bad.<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia0 -->MetaspriteDemoKoitsu.rar<!-- ia0 --></div></div><br />Okay, I have to leave for the weekend here and I'm not sure I have either the time or motivation to go through your code and actually find your problem for you, but I do have some suggestions:<br /><br />When you start using Direct Page for the first time, it will probably cause a bunch of problems if your assembler is anything like WLA.  I don't know if that's the case, but with WLA, I had to add a &quot;.b&quot; on every single instruction referencing an address less than $0100, because WLA just assumed that a LDA $0050 meant LDA $50 from direct page.  If you have ANY other instructions anywhere in your code that are being interpreted as a direct-page instruction incorrectly, they would have worked just fine before but will screw things up now that you start moving the direct page register.  That might not be a problem for you in ca65.<br /><br />So what to do?  Very first idea is simply preserve the D register before and after your object routine.  If you PHD at the very beginning of it, and PLD at the end, then whatever you do inside the routine the D register will be restored (presumably to 0000) by the end and stop screwing up the rest of your code.  You can tighten this up to just one instruction for testing.  Say,<br /><br />phd<br />lda objectOffset<br />tcd<br />lda.b objectXPosition<br />pld<br /><br />And then see if that one lda.b instruction was being carried out correctly.  If you can get one to work you can get them all to work.<br /><br />FFFFFFFFFFFF OH WAIT I JUST REMEMBERED doesn't ca65 have some kind of CRIPPLING bug with direct page where you have to compensate for how stupidly it interprets it?  I completely forgot about that and I virtually guarantee there's your problem.  I'm afraid you'll have to ask somebody who actually uses ca65 about that...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6817"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p142914"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142914">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142914#p142914"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 13, 2015 10:15 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=9_1426464006.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 13502<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">In ca65, you can use direct page addressing for any instruction that supports it with the &lt; (low byte) operator. You just have to watch out for instructions that don't support direct page addressing, such as d,y (direct page indexed with Y) with anything other than STX or LDX.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; phd<br />&nbsp; lda objectOffset<br />&nbsp; tcd<br />&nbsp; lda &lt;objectXPosition<br />&nbsp; pld<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p142924"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142924">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142924#p142924"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 13, 2015 11:33 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 514<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">In ca65, you can use direct page addressing for any instruction that supports it with the &lt; (low byte) operator. You just have to watch out for instructions that don't support direct page addressing, such as d,y (direct page indexed with Y) with anything other than STX or LDX.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; phd<br />&nbsp; lda objectOffset<br />&nbsp; tcd<br />&nbsp; lda &lt;objectXPosition<br />&nbsp; pld<br /></div></div><br />Yeah, that fixed it. (I haven't actually tried using it yet, I'm just saying I put it in and the game acts normally.) The thing is though, every time I want to load something using direct page, I have to use phd and pld? Isn't that not very efficient? I look at the object's x position, y position, and the several tile numbers for each sprite on a loop, all using direct page, so that's a problem.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p142926"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142926">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142926#p142926"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 13, 2015 11:52 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=9_1426464006.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 13502<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">You only have to push and pull D if you're returning to a routine that expects D not to have changed. And even then, you only need to push at the start and pull at the end.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; phd<br />&nbsp; lda #0<br />loop:<br />&nbsp; tcd<br />&nbsp; ; OMITTED: bunch of stuff<br />&nbsp; tdc<br />&nbsp; clc<br />&nbsp; adc #SIZEOF_OBJECT<br />&nbsp; cmp #SIZEOF_OBJECT * MAX_OBJECTS<br />&nbsp; bcc loop<br />&nbsp; pld<br /></div><br />Thus D is really just another indexing register. But if you're using D as the base pointer for an index into an array of structures in this manner, and you want to access variables in your actual zero page inside this loop, you'll need to make sure to use absolute mode (in ca65, <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">a:some_label</tt>) or absolute long mode (<tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">f:some_label</tt>) for those variables, depending on where the data bank register B points.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p142932"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142932">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142932#p142932"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 13, 2015 12:55 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_online.gif" alt="Online" title="Online" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 160
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Khaz wrote:</div><div class="quotecontent">doesn't ca65 have some kind of CRIPPLING bug with direct page</div><br />I don't know if it qualifies as either crippling or a bug, but you do apparently have to pay attention because the memory segment feature is 6502-centric and only knows about zero page.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p142955"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p142955">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=142955#p142955"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Mar 13, 2015 3:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 514<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ugg, Good Lord, what's wrong now? I tried to make object x and y positions use direct page, but it appears direct page is being loaded from the wrong location or something, because the values are 0 when they shouldn't be. There is now Game Bad or anything, I just have it to where Metasprite the sfc file is the messed up ones. Bullets don't spawn for some reason. (The code pretty much follows the players in terms of how it's set up, so I have no idea.)<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=2817">MetaspriteDemoKoitsu.rar</a> [291.67 KiB]
			</span><br />
			<span class="gensmall">Downloaded 4 times</span>
		

		<br />
	</div><br />(Random, but I can't help but find the opcode phd a little funny.)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p143042"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p143042">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=143042#p143042"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Mar 14, 2015 4:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 514<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Wait, I looked at my code and it makes no sense. Just to get this straight, does direct page act exactly like x and y? I adjusted my code to where I wrote<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; lda ObjectOffset<br />&nbsp; tcd</div><br />and did<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; adc &lt;ObjectTable+YPosition</div><br />Later and it <em>still</em> doesn't work. (Man, why isn't there just a &quot;z&quot;. <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> ) I think I sort of know the reason only the player had worked and not the bullets though. The player is the first object.<br /><br />Seriously, what is wrong with this?<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.setcpu &quot;65816&quot;<br />.smart<br /><br />; See Game.asm<br />.importzp Empty<br />.importzp MetaspriteTableOffset<br />.importzp MetaspriteDirection<br />.importzp MetaspritePalette<br />.importzp MetaspriteCharacterOffset<br />.importzp MetaspriteCount<br />.importzp HFlipMask<br />.importzp VFlipMask<br />.importzp SpriteCount<br />.importzp ObjectOffset<br />.import SpriteBuf1<br />.import SpriteBuf3<br />.import MetaspriteTable<br />.import ObjectTable<br /><br />Identity = 0<br />XPosition = 2<br />YPosition = 4<br />XVelocity = 6<br />YVelocity = 8<br />Atributes = 10<br /><br />; Used by Game.asm<br />.export start_metasprite<br /><br />.segment &quot;CODE&quot;<br /><br />;<br />; start_metasprite<br />;<br />; Upon entry:<br />;&nbsp; &nbsp;X register = offset into MetaspriteTable to start at<br />;&nbsp; &nbsp;Y register = offset to start writing at in SpriteBuf1<br />; <br />.proc start_metasprite<br />&nbsp; phd<br />&nbsp; rep #$30&nbsp; &nbsp; ; A=16, X/Y=16<br />&nbsp; ldy SpriteCount<br />&nbsp; ldx MetaspriteTableOffset<br /><br />&nbsp; lda ObjectOffset<br />&nbsp; tcd<br /><br />&nbsp; stz HFlipMask<br />&nbsp; lda MetaspriteDirection<br />&nbsp; bit #$0001<br />&nbsp; beq metasprite_loop<br />&nbsp; lda #$FFFF<br />&nbsp; sta HFlipMask<br /><br />metasprite_loop:<br />&nbsp; cpy #$0200&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ; sees if all 128 sprites are used up<br />&nbsp; beq done<br />&nbsp; and #$00FF<br />&nbsp; sta SpriteBuf1+1,y&nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite Y position in SpriteBuf1+1,y<br />&nbsp; lda MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; If MetaspriteCount is zero, then we're done.&nbsp; Otherwise we have<br />&nbsp; beq done&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; metasprites to iterate over and populate for DMA (see VBlank)<br /><br /><br />&nbsp; lda Empty,x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 1st byte = sprite X position (value 0-255)<br />&nbsp; eor HFlipMask<br />&nbsp; clc<br />&nbsp; adc &lt;ObjectTable+XPosition<br />&nbsp; cmp #256<br />&nbsp; bcc sprite_x_not_out_of_bounds<br />&nbsp; cmp #65504<br />&nbsp; bcs sprite_x_not_out_of_bounds<br />&nbsp; bra sprite_out_of_bounds<br /><br />sprite_x_not_out_of_bounds:<br />&nbsp; and #$01FF<br />&nbsp; sta SpriteBuf3,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite X position SpriteBuf1+y<br />&nbsp; and #$00FF<br />&nbsp; sta SpriteBuf1,y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Store sprite X position SpriteBuf1+y<br />&nbsp; lda Empty+2,x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; 1st byte = sprite X position (value 0-255)<br />&nbsp; eor VFlipMask<br />&nbsp; clc<br />&nbsp; adc &lt;ObjectTable+YPosition<br />&nbsp; cmp #224<br />&nbsp; bcc sprite_y_not_out_of_bounds<br />&nbsp; cmp #65504<br />&nbsp; bcs sprite_y_not_out_of_bounds<br />&nbsp; bra sprite_out_of_bounds<br /><br />sprite_y_not_out_of_bounds:<br />&nbsp; sta SpriteBuf1+1,y<br />&nbsp; lda Empty+4,x<br />&nbsp; sta SpriteBuf3+2,y&nbsp; &nbsp; &nbsp; &nbsp; ; Sprite size<br />&nbsp; lda Empty+6,x<br />&nbsp; clc<br />&nbsp; adc MetaspritePalette<br />&nbsp; clc<br />&nbsp; adc MetaspriteCharacterOffset<br />&nbsp; sta SpriteBuf1+2,y&nbsp; &nbsp; &nbsp; &nbsp; ; Palette/Character word<br />&nbsp; txa<br />&nbsp; clc<br />&nbsp; adc #$0008<br />&nbsp; tax<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; iny<br />&nbsp; dec MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; Decrement MetaspriteCount by 1<br />&nbsp; bra metasprite_loop&nbsp; &nbsp; &nbsp; &nbsp;; Back to the loop...<br /><br />sprite_out_of_bounds:<br />&nbsp; txa<br />&nbsp; clc<br />&nbsp; adc #$0008<br />&nbsp; tax<br />&nbsp; dec MetaspriteCount&nbsp; &nbsp; &nbsp; &nbsp;; Decrement MetaspriteCount by 1<br />&nbsp; bra metasprite_loop&nbsp; &nbsp; &nbsp; &nbsp;; Back to the loop...<br /><br />done:<br />&nbsp; sty SpriteCount&nbsp; &nbsp;&nbsp; &nbsp; ; Says how many sprites have been made<br />&nbsp; pld<br />&nbsp; rts<br /><br />.endproc</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p143079"></a>
				<b class="postauthor">UnDisbeliever</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p143079">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=143079#p143079"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 15, 2015 12:58 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="http://undisbeliever.net/avatar64.png" width="64" height="64" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 02, 2015 1:11 am<br /><b>Posts:</b> 12<br /><b>Location:</b> Australia (PAL)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Khaz wrote:</div><div class="quotecontent">FFFFFFFFFFFF OH WAIT I JUST REMEMBERED doesn't ca65 have some kind of CRIPPLING bug with direct page where you have to compensate for how stupidly it interprets it?  I completely forgot about that and I virtually guarantee there's your problem.  I'm afraid you'll have to ask somebody who actually uses ca65 about that...</div><br /><br />ca65 uses 1 byte addressing (direct page) if either:<br /><ul><li>The address is a zeropage variable (in a <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.zeropage</tt> segment or marked zp with <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.globalzp</tt> or <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.importzp</tt>), or</li><li><tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">.lobyte</tt> or <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&lt;</tt> function is used, or</li><li>The variable is a constant and &lt; $100, or</li><li>The variable is part of a struct and its address is &lt; $100</li></ul><br /><br />What I do is <a href="https://github.com/undisbeliever/elevator-madness-dx/blob/version-02/src/npcs.s#L16" class="postlink">define all of an object's variables in a struct</a><br /><br />Header:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.struct NpcStruct<br />&nbsp; &nbsp; state .addr<br /><br />&nbsp; &nbsp; xPos&nbsp; .res 3<br />&nbsp; &nbsp; yPos&nbsp; .res 3<br /><br />&nbsp; &nbsp; ; ... etc ...<br />.endstruct<br /><br />N_NPCS = 12<br /><br />.global npcs<br /><br /><br />.segment &quot;SHADOW&quot;<br />&nbsp; &nbsp; npcs:&nbsp; &nbsp;.res .sizeof(NpcStruct) * N_NPCS<br /></div><br /><br /><br />And access the fields through the struct, because they resolve to a constant &lt; $100 they are in DP.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; ; DP = a NpcStruct object<br />&nbsp; &nbsp; LDX NpcStruct::state<br /><br />&nbsp; &nbsp; LDA NpcStruct::xPos + 2<br />&nbsp; &nbsp; BMI NegativeX<br /><br />&nbsp; &nbsp; ; ... etc ...<br /></div><br /><br /><br />Also writing up a game loop <br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">ProcessNpcs:<br /><br />&nbsp; &nbsp; PHD<br />&nbsp; &nbsp; REP #$30<br />.A16<br />.I16<br />&nbsp; &nbsp; LDA #npcs<br /><br />@Loop:<br />&nbsp; &nbsp; &nbsp; &nbsp; TCD<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; LDX NpcStruct::state<br />&nbsp; &nbsp; &nbsp; &nbsp; BEQ @Skip<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; ; code to process NPCs<br /><br />@Skip:<br />&nbsp; &nbsp; &nbsp; &nbsp; TDC<br />&nbsp; &nbsp; &nbsp; &nbsp; ADD #.sizeof(NpcStruct)<br />&nbsp; &nbsp; &nbsp; &nbsp; CMP #npcs + N_NPCS * .sizeof(NpcStruct)<br />&nbsp; &nbsp; &nbsp; &nbsp; BLT @Loop<br /><br />&nbsp; &nbsp; PLD<br />&nbsp; &nbsp; RTS<br /></div><br /><br /> (NOTE: you cannot nest structs if you use this pattern)<br /><br /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent">Wait, I looked at my code and it makes no sense. Just to get this straight, does direct page act exactly like x and y? I adjusted my code to where I wrote<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; lda ObjectOffset<br />&nbsp; tcd</div><br />and did<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; adc &lt;ObjectTable+YPosition</div><br />Later and it <em>still</em> doesn't work. (Man, why isn't there just a &quot;z&quot;. <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> ) I think I sort of know the reason only the player had worked and not the bullets though. The player is the first object.<br /><br />Seriously, what is wrong with this?<br /></div><br /><br />I think your problem is that your trying to access the Metasprite* variables (by .importzp) and the objects as a 1 byte address at the same time. When you set the DP register <strong>all 1 byte addresses</strong> will be added to DP to form the effective address.<br /><br />Secondly, the value of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">ObjectTable</tt>is <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">$0620</tt> according to <em>map.txt</em>. Masking it to a 1 byte addresses will not work as you anticipate. What I think you are after is <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">adc &lt;YPosition</tt> after setting DP to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">#ObjectTable</tt>.<br /><br />Lastly, by running the code through a trace logger it appears the value of ObjectOffset is 0, not $0620 (#ObjectTable) so there isn't any DP offsetting anyway.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6909"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p143086"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p143086">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=143086#p143086"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 15, 2015 7:14 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 514<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">UnDisbeliever wrote:</div><div class="quotecontent">I think your problem is that your trying to access the Metasprite* variables (by .importzp) and the objects as a 1 byte address at the same time. When you set the DP register all 1 byte addresses will be added to DP to form the effective address.</div><br />What? <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /> What do you mean by &quot;When you set the DP register all 1 byte addresses will be added to DP to form the effective address.&quot;? What are the &quot;1 byte addresses?&quot; How do I fix this particular problem?<br /><br /><div class="quotetitle">UnDisbeliever wrote:</div><div class="quotecontent">Secondly, the value of ObjectTableis $0620 according to map.txt. Masking it to a 1 byte addresses will not work as you anticipate. What I think you are after is adc &lt;YPosition after setting DP to #ObjectTable.</div><br />Again, what?<br /><br /><div class="quotetitle">UnDisbeliever wrote:</div><div class="quotecontent">Lastly, by running the code through a trace logger it appears the value of ObjectOffset is 0, not $0620 (#ObjectTable) so there isn't any DP offsetting anyway.</div><br />If you're looking at the first code, I severely jacked it up. #ObjectTable is the offset of where the object table starts, and ObjectOffset is the offset that says what object we're on in the object table. (Sorry if the names weren't very clear...) Should I do<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #ObjectTable<br />clc<br />adc ObjectOffset<br />tcd</div><br />and then just do something like<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">adc &lt;YPosition</div><br />Latter?<br /><br />Edit: I tried what I just suggested, and it still doesn't work. <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /><br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=2828">MetaspriteDemoKoitsu.rar</a> [291.7 KiB]
			</span><br />
			<span class="gensmall">Downloaded 3 times</span>
		

		<br />
	</div><br />I guess it still doesn't work because of problems #1 and #2 you said?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p143089"></a>
				<b class="postauthor" style="color: #AA0000">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p143089">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=143089#p143089"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 15, 2015 8:25 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=9_1426464006.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 13502<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Espozo wrote:</div><div class="quotecontent"><div class="quotetitle">UnDisbeliever wrote:</div><div class="quotecontent">I think your problem is that your trying to access the Metasprite* variables (by .importzp) and the objects as a 1 byte address at the same time. When you set the DP register all 1 byte addresses will be added to DP to form the effective address.</div><br />What? <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /> What do you mean by &quot;When you set the DP register all 1 byte addresses will be added to DP to form the effective address.&quot;? What are the &quot;1 byte addresses?&quot;</div><br />It might be easier to understand with a concrete example. Assume D = $0880 and the CPU is executing the instruction <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">adc $23</tt>. The &quot;1-byte address&quot; is $23. The CPU adds the value 35 ($23) to the current value of D ($0880), producing $08A3, and then uses $0008A3 as the address of the operand of <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">adc</tt>.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p143093"></a>
				<b class="postauthor">Espozo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p143093">Re: SNES Programing Help 2</a></div><div style="float: right;"><a href="./viewtopic.php?p=143093#p143093"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Mar 15, 2015 8:45 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1410824489.gif" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 514<br /><b>Location:</b> Nacogdoches, Texas
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">So what's wrong then? Isn't what I've done correct? XPosition is 2, and I am adding 2 to the table offset + the object's offset.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=12459&amp;start=45"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=12459"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>4</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 80 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=12&amp;t=12459&amp;start=30">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=12&amp;t=12459">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12459&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12459&amp;start=30">3</a><span class="page-sep">, </span><strong>4</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12459&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=12459&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=12459&amp;start=60">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="12459" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;Reproduction</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - WIP - Falling Blocks game</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">WIP - Falling Blocks game</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=22&amp;t=14530">http://forums.nesdev.com/viewtopic.php?f=22&amp;t=14530</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>soiaf</b> [ Wed Jul 13, 2016 1:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I thought I'd share my progress with my first game for the NES, Falling Blocks.<br />This is a port of my game that I wrote for the ZX Spectrum - see here if you want to try that version out: <!-- m --><a class="postlink" href="https://github.com/soiaf/FallingBlocks">https://github.com/soiaf/FallingBlocks</a><!-- m --><br /><br />I plan on adding some extra levels/challenges that weren't in the ZX Spectrum version.<br />The game itself is essentially a variant of Tetris, but I'm adding some features which hopefully should make it interesting to people.<br />I only started learning 6502/NES programming last month, but as I've done assembly programming I had no issues with 6502, the fun has been learning how to interact with the NES.<br /><br />Attached is an early alpha of my game - just one level, with no special features - I guess it's really just to show that I've started  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br />Some notes about the controls:<br />Pressing Start in-game will switch on/off a ghost - this shows where the shape would end up if you were to drop.<br />Pressing B will swap the shape with the saved shape. You can't swap again till you have placed the shape and are on a new shape.<br />Tapping A quickly will drop the shape to the bottom (though you then have a brief moment of time to move it left or right). Holding A will make the shape move quicker down the screen.<br /><br />In the final version I will have a settings menu where, for example, the user can choice their preferred default behaviour for the drop button (always drop, fall faster while held, or mixture). <br /><br />The one concern I have about the game right now is sound/music. I made a test version where I integrated GGSound into my code, but I have no talent for producing music myself, so I guess I'm going to have to look around for suitable music that I'm allowed use. If anyone has any suggestions here I'd love to hear them.<br /><br />When I'm finished the game (or close to being finished at least) I plan on putting the source code up on my GitHub account.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="gensmall"><b>File comment:</b> Very early (alpha), one level only, version of Falling Blocks</span><br />
		
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=6249">fallingblocks_v43.nes</a> [24.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 227 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dougeff</b> [ Wed Jul 13, 2016 1:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I spent much of my teen years playing a similar 'falling block game'. And, I'm so used to the button choices of that game, that playing your game is like trying to ride a bicycle backwards, while using my hands to pedal.<br /><br />Specifically.<br />A - rotate clockwise<br />B - rotate counter-clockwise<br />Down - place the block quickly

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>soiaf</b> [ Wed Jul 13, 2016 2:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">dougeff wrote:</div><div class="quotecontent">I spent much of my teen years playing a similar 'falling block game'. And, I'm so used to the button choices of that game, that playing your game is like trying to ride a bicycle backwards, while using my hands to pedal.</div><br /><br />You'll really like level 3 of the game then  <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /> <br /><br />But seriously - in the ZX Spectrum version I allow people to define their own keys. In theory I could add the same functionality to the version (so for example people could choose to press down for drop), but I'm not sure if it would be worth the effort. Would people like having the ability to define the buttons?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikejmoffitt</b> [ Wed Jul 13, 2016 2:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Defining buttons would be a nice feature, but above all else I think dougeff's suggestion makes for a more sane default.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Jul 13, 2016 2:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I agree with dougeff. Using the standard keys used by <em>Dr. Mario</em> and other popular falling block games is like gas on the right, brake on the left.<br /><br /><strong>DAS</strong><br />Left: shift left 1 cell<br />hold Left longer than about 12 frames: rapid shift left<br />Right: shift right 1 cell<br />hold Right longer than about 12 frames: rapid shift left<br /><br /><strong>Gravity control</strong><br />Down: rapid shift down<br />Up: move directly on top of ghost<br /><br /><strong>Rotation</strong><br />B: rotate left<br />A: rotate right<br /><br /><em>Dr. Mario</em> didn't have anything for hold piece. In the past, B+A has been suggested, or Select if you're not worried about 2-player on an RF Famicom.<br /><br />How did you decide what set of pieces to use?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Kasumi</b> [ Wed Jul 13, 2016 2:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's probably worth looking at Tepples' LJ65: <!-- m --><a class="postlink" href="https://github.com/bfirsh/jsnes/blob/master/roms/lj65/lj65.nes">https://github.com/bfirsh/jsnes/blob/ma ... 5/lj65.nes</a><!-- m --><br /><br />For what it's worth, <a href="https://www.youtube.com/watch?v=C6uLLUfvqEA" class="postlink">I play TGM</a> and could write you a book about Tetris design, rotation systems, wall kicks. But... you're probably not interested if you're aiming for a more classic Tetris. (LJ65 is quite modern in gameplay.)<br /><br />So... instead I'll mirror the others in saying reconsider your default controls. There's a lot of Tetris games for a d-pad, A, B, Start, Select button layout. Tetris (GB), Tetris (NES), Tetris DX, Tetris Plus and many moreâ„¢ and most of them do what dougeff suggested. Considering most people that will play this have probably played one of those games, it's worth following suit to not turn off players of those games.<br /><br />Also, I found a bug. You can fast drop the next piece before it comes out. This seems like it'd be a neat feature, but it's hard enough to do consistently that I'd bet it's a bug: <br /><br /><img src="http://i.imgur.com/akUtK0Z.gif" alt="Image" /><br />Input display on the bottom left. I press A way before the other piece enters the well.<br /><br />Edit: Maybe tick your randomizer on the press start screen so the piece sequence isn't always exactly the same?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>soiaf</b> [ Thu Jul 14, 2016 11:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ok, I'll definitely change the keys to that selection, so that'll be in my next alpha release.<br />For that I'm planning on showing a different level, this one will be a bit more difficult, but should be a good demonstration of what I'm planning on adding to the game.<br /><br />Thanks for the feedback everyone, I really appreciate it.<br /><br />@Kasumi - I'll definitely give LJ65 a look!<br />The plan is to link the randomisation to when the user clicks on Start from the main screen, right now having predictable patterns makes it easier for me to debug. But I'll definitely consider making the next alpha release more random. <br />Thanks for the bug report, I'll have a look at that over the weekend and see if I can work out what's happening there.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Jul 14, 2016 12:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Someone wrote the book: <a href="http://harddrop.com/wiki/Tetris_Wiki" class="postlink">Hard Drop Wiki</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>soiaf</b> [ Wed Jul 20, 2016 12:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here is my latest version of the code.<br />Hopefully this should give a better idea of what I'm trying to do with the game - in this level you have an expanded list of dropping shapes and random blocks appear every few turns, sometimes helping, sometimes causing frustration <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />The main things I've worked on since the last version are<br /><br />*Modified the game controls<br />*Added extra shapes<br />*Added one of the difficulty factors (random blocks appearing every few turns)<br />*Tidied up some of the code<br />*Added most of the high score code (not fully working yet though)<br /><br /><br />Two known issues with this release<br />High score not always recognising a high score (and sometimes setting the high score to a score that is not)<br />If a random block completes a line it will not be recognised as a winning line till the next shape has been played

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="gensmall"><b>File comment:</b> v48 of Falling Blocks game. One level only, alpha version of game.</span><br />
		
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=6312">fallingblocks_v48.nes</a> [24.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 107 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>na_th_an</b> [ Thu Jul 21, 2016 5:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The DOWN key should make blocks fall faster, it still takes ages for them to get to the bottom of the pit. Besides (maybe it's my emulator) I've had some debouncing problems with the DOWN key.<br /><br />I've noticed that sometimes you can't rotate the block in tight spaces even though the &quot;destination&quot; orientation would fit.  I don't know if this is intentional.<br /><br />Appart from that, looking promising.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>soiaf</b> [ Tue Aug 02, 2016 11:04 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@Kasumi<br />Thanks a lot for the animated gif/bug report. I was able to replicate it fairly easily thanks to your report, though it took me a while to figure out what was going wrong!<br />But I've fixed that and have been tidying up the code and adding some new features, hoping to have a new testable version in the next couple of weeks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Estlib</b> [ Sun Aug 07, 2016 1:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This would my ideal control scheme to play with:<br /><br />*tengen version of tetris*<br /><br />that version did almost everything right. it even had 2 player and vs com.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>soiaf</b> [ Tue Aug 09, 2016 12:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Latest WIP version attached. This has a few bug fixes, but also has a lot of extras the previous versions didn't have, scoring, lines completed etc.<br />Lots of work still to go, but I'm happy that this is beginning to come together.<br />This version still only has 1 level to play, but is a different level from the other versions, with a new challenge for players.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="gensmall"><b>File comment:</b> Version 60 of Falling Blocks game. Still alpha. Only 1 playable level (level 8)</span><br />
		
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=6436">fallingblocks_v60.nes</a> [24.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 118 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>soiaf</b> [ Thu Aug 25, 2016 1:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Since my last update I've found someone to compose music for the game, which is great!<br />I've integrated ggsound into the code.<br />I've added a couple of settings on the title screen, you can now choose your preferred drop method and choose the difficulty level.<br />I've also started tidying up the code, some of the code I wrote at the beginning is very wasteful of memory and I now need that space <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>soiaf</b> [ Sun Sep 04, 2016 11:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: WIP - Falling Blocks game</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've now finished the game <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />The official title for the game is now DÃºshlÃ¡n. <br />DÃºshlÃ¡n is the Irish for challenge and would be roughly pronounced as do-lawn.<br /><br />The game and all its source code is available on my GitHub page <br /><br /><!-- m --><a class="postlink" href="https://github.com/soiaf/Dushlan">https://github.com/soiaf/Dushlan</a><!-- m --><br /><br />Thanks to everyone here for their feedback and  I'd especially like to thank Teuthida for the music and sound effects, Derek Andrews for the ggsound sound engine and help fixing issues.<br />Thanks also to Shiru, Drag, Damian Yerrick and Joe Granato for some code snippets used.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
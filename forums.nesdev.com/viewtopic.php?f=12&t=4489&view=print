<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - DSP3/DSP4/ST0XX Reverse Engineering</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">DSP3/DSP4/ST0XX Reverse Engineering</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=4489">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=4489</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FitzRoy</b> [ Wed Oct 22, 2008 11:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>DSP3/DSP4/ST0XX Reverse Engineering</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />First of all, I want to thank everyone who worked on the SPC7110. It's the unexpected success of that thread that led me to post this one.
<br />
<br />The SNES was a classic console, but an underpowered one that featured an unusually large amount of coprocessors. I hope that one day all licensed games from this system are historically understood and playable without issue in emulators. There are still a few obscure SNES coprocessors that have not been entirely reverse engineered, the DSP3, DSP4, and some Seta chips. They're not too glamorous, only a single game uses each one.
<br />
<br />Overload was mostly who worked on these back in the day. Not sure what motivated him or if it was his style to work with others, but developments were fairly rapid until ending abruptly.
<br /><!-- m --><a class="postlink" href="http://users.tpg.com.au/advlink/dsp/">http://users.tpg.com.au/advlink/dsp/</a><!-- m -->
<br />
<br /><div class="quotetitle">Andreas Naive wrote:</div><div class="quotecontent">I love to reverse engineer stuff, and most of my hobby time goes to such activities... the challenge itself that makes it fun.</div>
<br />
<br />Neviksti said something similar, and it's obvious to me that this is the only kind of attitude that could possibly choose to work on these chips. Because the work involved just doesn't promise much in terms of gameplay. So yeah, if anyone is looking to gang up on something again, I recommend one of these.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Thu Oct 23, 2008 11:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I like DSP3 cause I'm a fan of the SD Gundam games on SNES. No idea if ZSNES emulates it very accurately but ZSNES does have some support for it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Ver Greeneyes</b> [ Sat Oct 25, 2008 9:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It does, but there are still problems with it as "Gundam GX still buys the farm despite most of the registers being bit perfect," to quote FitzRoy. Is it known what could be causing these problems?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>precisedix</b> [ Wed Mar 25, 2009 12:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Ver Greeneyes wrote:</div><div class="quotecontent">It does, but there are still problems with it as "Gundam GX still buys the farm despite most of the registers being bit perfect," to quote FitzRoy. Is it known what could be causing these problems?</div>
<br />
<br />How is the "Gundam GX" now? are they still buys the farm??
<br />
<br />
<br />
<br />
<br />_________________
<br /><a href="http://www.preciseplate.com" class="postlink">aluminum plate</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Wed Mar 25, 2009 12:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Uh, SD Gundam GX is SA-1, not DSP3. SD Gundam X is DSP3.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>neviksti</b> [ Sun Mar 29, 2009 9:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I helped with some of the DSP-1 reverse engineering, and briefly with DSP-4 decoding.  It was fun figuring out a bunch of the details, but that fun quickly wears off for some of the truely complicated calculations .. the reason is that these are (usually) lossy calculations, so even after you make the break-through of realizing what the calculation is, it takes forever to figure out the precise software algorithm they chose (silly things like order of operation suddenly matter if you want bit perfect responses).
<br />
<br />That being said.  The processor is known for the DSP-# chips.  If we could figure out how to stain NAND rom, we could just read out the data directly.  I always thought that would be fun.
<br />
<br />Another option, is some dopant profiling technique.  Many large universities have a facility that users can pay for equipment training and time.  Would anyone be interested in learning how to use one of those machines?  It could be a really fun learning experience, and we'd all get something productive out of it as well.
<br />
<br />I've used an AFM setup before.  They are usually quite user friendly and easy learn.  One technique called "scanning capacitance microscopy" allows for, effectively, taking a 2-D image of dopant levels on the surface.  You'll see the data pop right out on the screen!
<br />
<br />I'd be willing to chip in some money for that.
<br />FitzRoy, do you live near any large universities?
<br />Anyone else?
<br />
<br />
<br />Also, if someone knows (or can ask around for) people that could explain how to stain the ROM, that would work too.  (I can stain NOR rom, and have successfully read out the data on a chip this way before, but I have never been able to stain NAND rom ... I'm not sure why.  I even bought a silicon processing book to read up on it, but I clearly need help from someone knowledgeable about possible problems/pitfalls as I can't get it to work myself.)
<br />----------------
<br />
<br />Oh, and for those wanting to do software reverse engineering, to answer Fitzroy's implied question of "what gets these things rolling?" ... the answer is usually data.  SDD1 cracking didn't get rolling until TheDumper built a hardware setup, and released data and custom tests.  DSP-1 really got rolling when Overload supplied lots of data for everyone to play with.  SPC7110 wouldn't have been cracked unless someone built a way to access the real hardware (in this case, me) so we could get our hands on custom data sets.  And so on and so forth.
<br />
<br />I don't have a cartridge with a DSP-3.  A hardware setup doesn't even need to be built for DSP tests, we just need a good SNES copier with an external cartridge slot. (I believe Overload used a SWC DX2.  I found that a GameDoctor SF7 can't respond fast enough, but an SF3 _almost_ responds quick enough (I can play MarioKart in the external slot, but there are occasional graphics glitches).  Caitsith2 got his to work reliably after some good cleaning ... although this is a timing issue, so it may be just that his responds slightly faster).
<br />
<br />Anyway, the point is, the hardware barrier for this one is not very large.  If someone starts running tests, and sharing data along with some summaries to attract interest ... you'll probably have people fiddling with the fun puzzle on their free time.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jbo_85</b> [ Wed Apr 01, 2009 1:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The $1E command is still not bit perfect to Overload's DSP3 log. Some commands that are used during battles don't show up in the log. I fixed $1E in the current ZSNES tree, so it doesn't crash when the computer does a turn but it's still not bit perfect. I uploaded the current dsp3 source code to rapidshare.
<br />
<br />Download it here: <!-- m --><a class="postlink" href="http://rapidshare.com/files/216279520/dsp3.zip.html">http://rapidshare.com/files/216279520/dsp3.zip.html</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MatthewCallis</b> [ Wed Apr 01, 2009 4:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If anyone ever bothers to look into the Seta DSP like ST010 (ie Exhaust Heat 2) I have a development cart for this and one for GSU1A (Power Slide SFX). They are real socketed development boards so if anyone wants to put something on EEPROM and test it, let me know.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Thu Apr 09, 2009 10:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jbo_85 wrote:</div><div class="quotecontent">The $1E command is still not bit perfect to Overload's DSP3 log. Some commands that are used during battles don't show up in the log. I fixed $1E in the current ZSNES tree, so it doesn't crash when the computer does a turn but it's still not bit perfect. I uploaded the current dsp3 source code to rapidshare.</div><br /><br />Wow, that's really amazing! Thanks a million for doing this.<br />I don't suppose you'd mind if I used your fixes eventually? I'll wait for ZSNES v2.0 before-hand, as you guys certainly deserve the full credit for playable DSP-3.<br /><br />If you decide to research this further (not asking you to if you don't want to), do you have access to a copier to test on hardware? If not let me know, and I'll see what I can arrange.<br /><br /><div class="quotetitle">MatthewCallis wrote:</div><div class="quotecontent">If anyone ever bothers to look into the Seta DSP like ST010 (ie Exhaust Heat 2) I have a development cart for this and one for GSU1A (Power Slide SFX). They are real socketed development boards so if anyone wants to put something on EEPROM and test it, let me know.</div>
<br />
<br />Thanks, I just got your e-mail.
<br />
<br />The ST010 should be easy enough with a copier to run our own tests. The SFX chip could be interesting though.
<br />
<br />The SFX and SA-1 allow execution from the cart-side (ROM+RAM), and we have no easy way to time code running from ROM without hardware mods. But I believe we can infer most ROM timings from observing how things work with RAM, so I* should be okay hopefully.
<br />
<br />(* will let you know if not.)
<br />
<br />You certainly find some neat hardware though :D
<br />Awesome with sockets, the only kind of IC I can replace, heh.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jbo_85</b> [ Thu Apr 09, 2009 1:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">byuu wrote:</div><div class="quotecontent"><div class="quotetitle">jbo_85 wrote:</div><div class="quotecontent">The $1E command is still not bit perfect to Overload's DSP3 log. Some commands that are used during battles don't show up in the log. I fixed $1E in the current ZSNES tree, so it doesn't crash when the computer does a turn but it's still not bit perfect. I uploaded the current dsp3 source code to rapidshare.</div><br /><br />Wow, that's really amazing! Thanks a million for doing this.<br />I don't suppose you'd mind if I used your fixes eventually? I'll wait for ZSNES v2.0 before-hand, as you guys certainly deserve the full credit for playable DSP-3.<br /><br />If you decide to research this further (not asking you to if you don't want to), do you have access to a copier to test on hardware? If not let me know, and I'll see what I can arrange.</div>
<br />I don't mind if you use the fixes. I don't have a copier but it would certainly be nice to get some battle logs to get the remaining commands implemented so the game doesn't crash in a battle. I don't want to get $1E bit perfect right now. You can get less errors by changing the end of DSP3_OP1E_B to <div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;int i=16;<br />&nbsp; &nbsp;while&#40;i--&#41; &#123;<br />&nbsp; &nbsp;op1e_x = op3e_x;<br />&nbsp; &nbsp;op1e_y = op3e_y;<br />&nbsp; &nbsp;op1e_lcv_radius = 1;<br /><br />&nbsp; &nbsp;op1e_search = 0;<br /><br />&nbsp; &nbsp;DSP3_OP1E_B1&#40;&#41;;<br />&nbsp; &nbsp;&#125;<br /><br />&nbsp; &nbsp;SetDSP3 = &amp;DSP3_OP1E_C;<br />&#125;<br /></div>
<br />The game appears to be using a non-optimal algorithm to get the smallest weights for the cells. We would need some special data sets to get this bit perfect.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Lord Nightmare</b> [ Sun Apr 19, 2009 12:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">Uh, SD Gundam GX is SA-1, not DSP3. SD Gundam X is DSP3.</div>
<br />
<br />Uh, no. I have an SD Gundam GX cart right here next to me (scored it for $20 from a japanese import store at vgxpo '07), and it most definitely has a DSP-3 in it.
<br />
<br />Chip is marked:
<br />Nintendo
<br />DSP3
<br />013
<br />9423A3001
<br />
<br />If anyone wants to make a rom which runs on the GDSF7 and sends commands to and logs data from the cart, I can run tests like that. Be warned: the top-cart-port dsp-x access on the gdsf7 has 'issues'; mario kart for instance will run for a bit, go all unstable/wacky and unplayable after a while when running the code from copier and dsp-1 from a cart stuck on top (it works fine with the "blue passthrough" between gdsf7 and snes, which has a die-cloned dsp1b on it); similarly, if i read sd gundam gx into the copier and stick the cart in the top slot, it runs for a bit but gfx end up getting corrupt and the game crashes during the setup phase.
<br />There may be some hardware mod i need to do to the gdsf7 (perhaps reconnect a disconnectted clock line somewhere?) but I don't know where/how to do that.
<br />
<br />LN

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FitzRoy</b> [ Thu May 14, 2009 3:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I appreciate the continued interest in this. I wouldn't know the first thing about where or how to stain chips. It seems that more RE work could be sufficient before resorting to that. These will eventually become the most important things yet done, but they're not today.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Mon May 18, 2009 11:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Heh, I don't know whether it will be a positive or negative thing when getting Quick-move Shogi Match with Nidan Rank-holder Morita 2 perfected is the most pressing concern in SNES emulation.
<br />
<br />Still, that only two games hold us back from full 100% commercial software compatibility is quite annoying.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Mon May 18, 2009 6:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Lord Nightmare wrote:</div><div class="quotecontent"><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">Uh, SD Gundam GX is SA-1, not DSP3. SD Gundam X is DSP3.</div><br /><br />Uh, no. I have an SD Gundam GX cart right here next to me (scored it for $20 from a japanese import store at vgxpo '07), and it most definitely has a DSP-3 in it.<br /></div>
<br />
<br />Sorry about that. I got that mixed up. SD Gundam X is regular, SD Gundam GX is DSP3, SD Gundam G-Next is SA-1 I think. Easy to get confused when they aren't really named very imaginatively.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>stuuv</b> [ Mon Jul 13, 2009 6:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />DSP-3 OP1E:
<br />I know I've heard awhile back that it uses the SD Gundam X path-finding algorithm (exactly) to bit-match Overload's logs.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
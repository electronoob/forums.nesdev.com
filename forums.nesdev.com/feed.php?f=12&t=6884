<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=12&amp;t=6884" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2010-09-01T16:11:29-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=12&amp;t=6884</id>
<entry>
<author><name><![CDATA[counterp]]></name></author>
<updated>2010-09-01T16:11:29-07:00</updated>
<published>2010-09-01T16:11:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67100#p67100</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67100#p67100"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67100#p67100"><![CDATA[
I just play it for 1 ms but now I'm gonna set the volume to 0 anyways thanks. (Assuming using arguments causes problems)<br /><br />EDIT: Hmm this small fix doesn't seem to work when doing any heavy operations, not just starting up the jvm...<br /><br />EDIT2: cool, found using a bigger buffer fixed problem (you set to 8192 bytes in the run method of SPCPlayer class or whatever it is called).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4545">counterp</a> — Wed Sep 01, 2010 4:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-09-01T15:40:20-07:00</updated>
<published>2010-09-01T15:40:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67097#p67097</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67097#p67097"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67097#p67097"><![CDATA[
Nifty solution! I'll have to remember that. You could set the volume to zero and load an SPC and play it for a moment. Maybe that's what you meant.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Wed Sep 01, 2010 3:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[counterp]]></name></author>
<updated>2010-09-01T14:42:59-07:00</updated>
<published>2010-09-01T14:42:59-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67093#p67093</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67093#p67093"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67093#p67093"><![CDATA[
I just run a sound first and cut it off before it actually makes a sound to load all the variables and instantiate classes etc...<br /><br />EDIT: Using Xcomp argument to fix. So yeah, I was right, it probably just took a bit to load everything. Let me see how this works out later, might switch to Xint or some other method to fix the slow compiling.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4545">counterp</a> — Wed Sep 01, 2010 2:42 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-09-01T14:23:13-07:00</updated>
<published>2010-09-01T14:23:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67089#p67089</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67089#p67089"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67089#p67089"><![CDATA[
Sound messes up at the beginning, I'm curious. Was it some Java sound driver issue? Java was always fairly glitchy on my machine. I ran tests where I fed it a pure sine wave, where my code was almost surely bug-free, yet I still got glitches when starting, sometimes repeated buffers etc.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Wed Sep 01, 2010 2:23 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[counterp]]></name></author>
<updated>2010-09-01T05:32:16-07:00</updated>
<published>2010-09-01T05:32:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67055#p67055</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67055#p67055"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67055#p67055"><![CDATA[
Hmm yeah it does...<br /><br />EDIT: Used your method of loading from DataReader class.<br /><br />Now it works, thanks <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />Only problem is most of the time the sound messes up in the beginning. (Occasionally it doesn't)<br /><br />EDIT: Sorted that out... Thanks a bunch!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4545">counterp</a> — Wed Sep 01, 2010 5:32 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-08-31T20:18:45-07:00</updated>
<published>2010-08-31T20:18:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67036#p67036</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67036#p67036"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67036#p67036"><![CDATA[
Does the original code play the same SPC file correctly? I think you should be able to give it a URL to the file, of the form file:/// or something like that.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Aug 31, 2010 8:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[counterp]]></name></author>
<updated>2010-08-31T19:38:20-07:00</updated>
<published>2010-08-31T19:38:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67032#p67032</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67032#p67032"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67032#p67032"><![CDATA[
HOLD ON A DAMN SECOND.<br /><br />It appears I was reading them the wrong way. I set the buffer size to each spc's compressed file size instead of actual size....  <img src="http://forums.nesdev.com/images/smilies/icon_confused.gif" alt=":?" title="Confused" /> <br /><br />But now i just get 'emulation error' when I try to play a spc file.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   protected int play_&#40; byte out &#91;&#93;, int count &#41;<br />   &#123;<br />      dsp.setOutput&#40; out &#41;;<br />      <br />      // Run for count/2*32 clocks + extra to get DSP time half-way between samples,<br />      // since CPU might run for slightly less than requested<br />      int clockCount = count * &#40;32 / 2&#41; + 16 - &#40;&#40;time - dspTime&#41; &amp; 31&#41;;<br />      time            -= clockCount;<br />      dspTime         -= clockCount;<br />      timers &#91;0&#93;.time -= clockCount;<br />      timers &#91;1&#93;.time -= clockCount;<br />      timers &#91;2&#93;.time -= clockCount;<br />      runCpu&#40;&#41;;<br />      <br />      if &#40; time &lt; 0 &#41; // emulation error<br />      &#123;<br />         logError&#40;&#41;;<br />         return 0;<br />      &#125;<br />      <br />      // Catch up to CPU<br />      runTimer&#40; timers &#91;0&#93;, time &#41;;<br />      runTimer&#40; timers &#91;1&#93;, time &#41;;<br />      runTimer&#40; timers &#91;2&#93;, time &#41;;<br />      <br />      // Run DSP to present<br />      int delta;<br />      if &#40; &#40;delta = time - dspTime&#41; &gt;= 0 &#41;<br />      &#123;<br />         delta = &#40;delta &gt;&gt; 5&#41; + 1;<br />         dspTime += delta &lt;&lt; 5;<br />         dsp.run&#40; delta &#41;;<br />      &#125;<br />      <br />      assert dsp.sampleCount&#40;&#41; == count;<br />      return dsp.sampleCount&#40;&#41;;<br />   &#125;</div><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   public void run&#40;&#41;<br />   &#123;<br />      line.start&#40;&#41;;<br />      <br />      // play track until stop signal<br />      byte &#91;&#93; buf = new byte &#91;8192&#93;;<br />      while &#40; playing_ &amp;&amp; !emu.trackEnded&#40;&#41; &#41;<br />      &#123;<br />         int count = emu.play&#40; buf, buf.length / 2 &#41;;<br />         line.write&#40; buf, 0, count * 2 &#41;;<br />         idle&#40;&#41;;<br />      &#125;<br />      <br />      playing_ = false;<br />      line.stop&#40;&#41;;<br />   &#125;</div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4545">counterp</a> — Tue Aug 31, 2010 7:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-08-31T18:57:58-07:00</updated>
<published>2010-08-31T18:57:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67026#p67026</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67026#p67026"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67026#p67026"><![CDATA[
Could you check, before I spend a lot of time examining your source? Be sure the header looks right, AND please report back the file length. I'm also wondering whether the original unmodified source worked for playing a SPC. That is, where you pass it the path to the file.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Aug 31, 2010 6:57 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[counterp]]></name></author>
<updated>2010-08-31T18:04:28-07:00</updated>
<published>2010-08-31T18:04:28-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67022#p67022</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67022#p67022"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67022#p67022"><![CDATA[
Yeah I'm pretty sure it is.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4545">counterp</a> — Tue Aug 31, 2010 6:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-08-31T13:34:31-07:00</updated>
<published>2010-08-31T13:34:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67010#p67010</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67010#p67010"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=67010#p67010"><![CDATA[
Have you verified that the data array you're passing to useSpcFile is a valid SPC file? If you're still having trouble, you can send me your full Java source and I'll figure out what's going on.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Aug 31, 2010 1:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[counterp]]></name></author>
<updated>2010-08-31T06:21:02-07:00</updated>
<published>2010-08-31T06:21:02-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66998#p66998</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66998#p66998"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66998#p66998"><![CDATA[
Hmm I changed back to original class then added your SPCPlayer class but I still get the same error.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">java.lang.ArrayIndexOutOfBoundsException<br />        at java.lang.System.arraycopy&#40;Native Method&#41;<br />        at src.sounds.emu.SpcEmu.startTrack&#40;SpcEmu.java:147&#41;<br />        at src.sounds.EmuPlayer.startTrack&#40;SPCPlayer.java:45&#41;<br />        at src.sounds.SoundManager.play&#40;SoundManager.java:43&#41;<br />        at src.Client.&lt;init&gt;&#40;Client.java:30&#41;<br />        at src.Client.main&#40;Client.java:15&#41;<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4545">counterp</a> — Tue Aug 31, 2010 6:21 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-08-30T19:30:03-07:00</updated>
<published>2010-08-30T19:30:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66974#p66974</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66974#p66974"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66974#p66974"><![CDATA[
Your changes removed essential things. I don't have any Java compiler handy, but try the following class in your own code (revert back to the unmodified GME sources; I don't think you need to modify them):<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">class SPCPlayer extends EmuPlayer<br />&#123;<br />   public void useSpcFile&#40; byte &#91;&#93; data, int sampleRate &#41; throws Exception &#123;<br />      stop&#40;&#41;;<br />      <br />      MusicEmu emu = new SpcEmu&#40;&#41;;<br />      int actualSampleRate = emu.setSampleRate&#40;sampleRate&#41;;<br />      emu.loadFile&#40;data&#41;;<br />      setEmu&#40;emu, actualSampleRate&#41;;<br />   &#125;<br />   <br />   void closeFile&#40;&#41; throws Exception  &#123;<br />      stop&#40;&#41;;<br />      setEmu&#40;null, 0&#41;;<br />   &#125;<br />&#125;</div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Mon Aug 30, 2010 7:30 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[counterp]]></name></author>
<updated>2010-08-30T18:26:20-07:00</updated>
<published>2010-08-30T18:26:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66971#p66971</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66971#p66971"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66971#p66971"><![CDATA[
Can't seem to get it working.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">java.lang.ArrayIndexOutOfBoundsException<br />        at java.lang.System.arraycopy&#40;Native Method&#41;<br />        at src.sounds.emu.SpcEmu.startTrack&#40;SpcEmu.java:147&#41;<br />        at src.sounds.EmuPlayer.startTrack&#40;VGMPlayer.java:44&#41;<br />        at src.sounds.SoundManager.play&#40;SoundManager.java:42&#41;<br />        at src.Client.&lt;init&gt;&#40;Client.java:30&#41;<br />        at src.Client.main&#40;Client.java:15&#41;</div><br /><br /><br />sounds.zip is zip archive holding 62 spc files. I load all of them to a byte array..<br /><br />However I get an error when I call the play method.<br /><br />The only file I have modified is VGMPlayer<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">package src.sounds;<br /><br />import java.io.*;<br />import java.util.zip.*;<br />import javax.sound.sampled.*;<br /><br />import src.sounds.emu.*;<br /><br />public class SoundManager &#123;<br /><br /><br />   private static final SoundManager instance = new SoundManager&#40;&#41;;<br /><br />   public static final SoundManager getInstance&#40;&#41; &#123;<br />      return instance;<br />   &#125;<br /><br />   private SoundManager&#40;&#41; &#123;<br />      try &#123;<br />         player = new VGMPlayer&#40;44100&#41;;<br />         ZipInputStream in = new ZipInputStream&#40;new FileInputStream&#40;&quot;data/sounds.zip&quot;&#41;&#41;;<br />         ZipEntry clip = null;<br />         int i = 0;<br />         byte&#91;&#93; buf;<br />         while &#40;&#40;clip = in.getNextEntry&#40;&#41;&#41; != null&#41; &#123;<br />            buf = new byte&#91;&#40;int&#41; clip.getCompressedSize&#40;&#41;&#93;;<br />            in.read&#40;buf&#41;;<br />            sound&#91;i++&#93; = buf;<br />         &#125;<br />         in.close&#40;&#41;;<br />      &#125; catch &#40;Exception e&#41; &#123;<br />         System.exit&#40;1&#41;;<br />      &#125;<br />   &#125;<br /><br />   private byte&#91;&#93;&#91;&#93; sound = new byte&#91;62&#93;&#91;&#93;;<br />   private VGMPlayer player;<br /><br />   public void play&#40;int id, int time&#41; &#123;<br />      try &#123;<br />         player.loadFile&#40;sound&#91;id&#93;&#41;;<br />         player.startTrack&#40;0, time&#41;;<br />      &#125; catch &#40;Exception e&#41; &#123;<br />         e.printStackTrace&#40;&#41;;<br />      &#125;<br />   &#125;<br /><br />&#125;</div><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">package src.sounds;<br /><br />import javax.sound.sampled.*;<br />import java.io.*;<br /><br /><br />import src.sounds.emu.*;<br /><br />/* Copyright &#40;C&#41; 2007-2008 Shay Green. This module is free software; you<br />can redistribute it and/or modify it under the terms of the GNU Lesser<br />General Public License as published by the Free Software Foundation; either<br />version 2.1 of the License, or &#40;at your option&#41; any later version. This<br />module is distributed in the hope that it will be useful, but WITHOUT ANY<br />WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS<br />FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more<br />details. You should have received a copy of the GNU Lesser General Public<br />License along with this module; if not, write to the Free Software Foundation,<br />Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA */<br /><br />class EmuPlayer implements Runnable &#123;<br /><br />   public int getTrackCount&#40;&#41; &#123;<br />      return emu.trackCount&#40;&#41;;<br />   &#125;<br /><br />   public void startTrack&#40;int track, int time&#41; throws Exception &#123;<br />      pause&#40;&#41;;<br />      if &#40;line != null&#41;<br />         line.flush&#40;&#41;;<br />      emu.startTrack&#40;track&#41;;<br />      emu.setFade&#40;time, 6&#41;;<br />      play&#40;&#41;;<br />   &#125;<br /><br />   public int getCurrentTrack&#40;&#41; &#123;<br />      return emu.currentTrack&#40;&#41;;<br />   &#125;<br /><br />   public int getCurrentTime&#40;&#41; &#123;<br />      return &#40;emu == null ? 0 : emu.currentTime&#40;&#41;&#41;;<br />   &#125;<br /><br />   public void setVolume&#40;double v&#41; &#123;<br />      volume_ = v;<br /><br />      if &#40;line != null&#41; &#123;<br />         FloatControl mg = &#40;FloatControl&#41; line.getControl&#40;FloatControl.Type.MASTER_GAIN&#41;;<br />         if &#40;mg != null&#41;<br />            mg.setValue&#40;&#40;float&#41; &#40;Math.log&#40; v &#41; / Math.log&#40; 10.0 &#41; * 20.0&#41;&#41;;<br />      &#125;<br />   &#125;<br /><br />   public double getVolume&#40;&#41; &#123;<br />      return volume_;<br />   &#125;<br /><br />   public void pause&#40;&#41; throws Exception &#123;<br />      if &#40;thread != null&#41; &#123;<br />         playing_ = false;<br />         thread.join&#40;&#41;;<br />         thread = null;<br />      &#125;<br />   &#125;<br /><br />   public boolean isPlaying&#40;&#41; &#123;<br />      return playing_;<br />   &#125;<br /><br />   public void play&#40;&#41; throws Exception &#123;<br />      if &#40;line == null&#41; &#123;<br />         line = &#40;SourceDataLine&#41; AudioSystem.getLine&#40;lineInfo&#41;;<br />         line.open&#40;audioFormat&#41;;<br />         setVolume&#40;volume_&#41;;<br />      &#125;<br />      thread = new Thread&#40;this&#41;;<br />      playing_ = true;<br />      thread.start&#40;&#41;;<br />   &#125;<br /><br />   public void stop&#40;&#41; throws Exception &#123;<br />      pause&#40;&#41;;<br />      <br />      if &#40;line != null&#41; &#123;<br />         line.close&#40;&#41;;<br />         line = null;<br />      &#125;<br />   &#125;<br /><br />   protected void idle&#40;&#41; &#123; &#125;<br /><br />   private int sampleRate = 0;<br />   AudioFormat audioFormat;<br />   DataLine.Info lineInfo;<br />   MusicEmu emu = new SpcEmu&#40;&#41;;<br />   Thread thread;<br />   volatile boolean playing_;<br />   SourceDataLine line;<br />   double volume_ = 1.0;<br />   <br />   public void run&#40;&#41; &#123;<br />      line.start&#40;&#41;;<br /><br />      byte &#91;&#93; buf = new byte &#91;66092&#93;;<br />      while &#40;playing_ &amp;&amp; !emu.trackEnded&#40;&#41;&#41; &#123;<br />         int count = emu.play&#40;buf, buf.length / 2&#41;;<br />         line.write&#40;buf, 0, count * 2&#41;;<br />         idle&#40;&#41;;<br />      &#125;<br />      playing_ = false;<br />      line.stop&#40;&#41;;<br />   &#125;<br />&#125;<br /><br />class VGMPlayer extends EmuPlayer &#123;<br /><br />   int sampleRate;<br />   <br />   public VGMPlayer&#40;int sampleRate&#41; &#123;<br />      this.sampleRate = sampleRate;<br />   &#125;<br /><br />   public void loadFile&#40;byte&#91;&#93; data&#41; throws Exception &#123;<br />      stop&#40;&#41;;<br /><br />      int actualSampleRate = emu.setSampleRate&#40; sampleRate &#41;;<br />      emu.loadFile&#40;data&#41;;<br />   &#125;<br /><br />   void closeFile&#40;&#41; throws Exception &#123;<br />      stop&#40;&#41;;<br />   &#125;<br /><br />&#125;<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4545">counterp</a> — Mon Aug 30, 2010 6:26 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-08-24T06:38:52-07:00</updated>
<published>2010-08-24T06:38:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66645#p66645</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66645#p66645"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66645#p66645"><![CDATA[
Here's the main class:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">class VGMPlayer implements Runnable<br />&#123;<br />    // Establishes sample rate<br />    public VGMPlayer&#40; int sampleRate &#41;<br />    <br />    // Stops playback and loads file from given URL &#40;HTTP only&#41;.<br />    // If it's an archive &#40;.zip&#41; then path specifies the file within<br />    // the archive.<br />    public void loadFile&#40; String url, String path &#41; throws Exception<br />    <br />    // Stops and closes current file and unloads things from memory<br />    void closeFile&#40;&#41; throws Exception<br />    <br />    // Number of tracks<br />    public int getTrackCount&#40;&#41;<br />    <br />    // Starts new track playing, where 0 is the first track.<br />    // After time seconds, the track starts fading.<br />    public void startTrack&#40; int track, int time &#41; throws Exception<br />    <br />    // Currently playing track<br />    public int getCurrentTrack&#40;&#41;<br />    <br />    // Number of seconds played since last startTrack&#40;&#41; call<br />    public int getCurrentTime&#40;&#41;<br />    <br />    // Sets playback volume, where 1.0 is normal, 2.0 is twice as loud.<br />    // Can be changed while track is playing.<br />    public void setVolume&#40; double v &#41;<br />    <br />    // Current playback volume<br />    public double getVolume&#40;&#41;<br />    <br />    // Pauses if track was playing.<br />    public void pause&#40;&#41; throws Exception<br />    <br />    // True if track is currently playing<br />    public boolean isPlaying&#40;&#41;<br />    <br />    // Resumes playback where it was paused<br />    public void play&#40;&#41; throws Exception<br />    <br />    // Stops playback and closes audio<br />    public void stop&#40;&#41; throws Exception<br />    <br />    // Called periodically when a track is playing<br />    protected void idle&#40;&#41;<br />&#125;<br /><br />// example of use<br /><br />VGMPlayer player = new VGMPlayer&#40; 44100 &#41;;<br /><br />// Open a file, or a file in a zip archive<br />player.loadFile&#40; &quot;file.spc&quot;, &quot;&quot; &#41;;<br />player.loadFile&#40; &quot;archive.zip&quot;, &quot;file.spc&quot; &#41;;<br /><br />// Play for 4 minutes, then fade<br />player.startTrack&#40; 0, 240 &#41;;<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Aug 24, 2010 6:38 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Banshaku]]></name></author>
<updated>2010-08-24T05:48:12-07:00</updated>
<published>2010-08-24T05:48:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66638#p66638</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66638#p66638"/>
<title type="html"><![CDATA[SPC player in java help?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6884&amp;p=66638#p66638"><![CDATA[
I guess the question is: I want to use the code as my music driver for my java game but I don't know how (i.e. like using famitracker driver in a nes game).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3559">Banshaku</a> — Tue Aug 24, 2010 5:48 am</p><hr />
]]></content>
</entry>
</feed>
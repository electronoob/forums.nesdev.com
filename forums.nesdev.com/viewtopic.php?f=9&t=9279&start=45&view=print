<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Proof that pin #4 mod does not work</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Proof that pin #4 mod does not work</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9279">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9279</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>5</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sun Sep 09, 2012 12:23 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">&quot;kyousuke&quot;? Sounds an awful lot like <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=20" class="postlink">kyuusaku</a>.</div><br />Maybe it's because I'm used to reading and listening a lot of japanese, but I really don't think the 2 names are that similar. Sure, the consonants are all in the exact same positions, but &quot;suke&quot; and &quot;saku&quot; sound too different from each other to cause any sort of confusion IMO.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Sep 09, 2012 8:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />But then again, none of <a href="http://forums.nesdev.com/search.php?keywords=&amp;terms=all&amp;author=teppic&amp;sc=1&amp;sf=all&amp;sk=t&amp;sd=d&amp;sr=posts&amp;st=0&amp;ch=300&amp;t=0&amp;submit=Search" class="postlink">these posts</a> are mine.<br /><br />And to add to what tokumaru said, it's like the difference between Kyose-keh and Cusack.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyousuke</b> [ Sun Sep 09, 2012 10:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jims cool wrote:</div><div class="quotecontent">reset button should work.. i believe your chip may be damaged.. i've seen that happen to people<br />heres a diagram of how you can fix it.. i posted a photo of a patched board in this thread already<br /><br />(snip image)<br /><br /></div><br /><br />Excellent, I will follow this diagram (and the actual photo you posted earlier) and do the mod to the yardsale NES.  Thanks!<br /><br /><div class="quotetitle">jims cool wrote:</div><div class="quotecontent">what does the chip say on it?<br /></div><br /><br />3193A<br />(c) 1985 Nintendo<br />8944 A<br /><br /><div class="quotetitle">jims cool wrote:</div><div class="quotecontent">EDIT: if your reset button doesn't work (power light turns off when the button is pushed) it's not likely the connector.. and if you're not very good at clipping pins i could add an alternative that requires one less jumper and only one pin 1 of the inverter chip to be lifted and the circuit would still be electronically correct.. just not &quot;perfect&quot; wouldn't hurt anything still.. if you would rather that i will need some time... finishing up the JCIC and times short =)<br /><br />EDIT2: you need the reset button for some good games that have battery backed ram or you'll loose your save data... also noticed in the instructions i left out that pin 4 of the inverter should be lifted it's an output that goes to the keys clock pin.. not a big deal though because it would output ground so i don't think anything would care.. should also note the little green jumper in the wiring diagrams explained in the schematic <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br /><br />Yeah, I should probably rule out the board/traces as the issue too, the solder where the power / reset buttons connect to the mainboard is very corroded and looks terrible.. I've seen much better looking joints fail on arcade boards, so I will touch these up and do some continuity testing on the board to make sure it's getting to the proper pins. <br /><br /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">&quot;kyousuke&quot;? Sounds an awful lot like <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=20" class="postlink">kyuusaku</a>. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> Might want to consider changing your name to avoid confusion if you decide to keep on posting on this forum.</div><br /><br />Sure, if you want I can switch to my backup name, &quot;james cool&quot;.<br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><div class="quotetitle">kyousuke wrote:</div><div class="quotecontent">I could probably swap the new connector onto my stock NES and see how it behaves...</div><br />That would be a great plan.<br /><br />I <strong>really</strong> don't think the CIC is what's wrong here. If you <span style="text-decoration: underline">do</span> go through with that plan, please read my suggestions <a href="http://forums.nesdev.com/viewtopic.php?p=98891#p98891" class="postlink">here</a> and <a href="http://forums.nesdev.com/viewtopic.php?p=98997#p98997" class="postlink">here</a>â€”it's a far easier modification than the one jims suggested.</div><br /><br />I put the NEW 72 pin connector into my stock NES and games weren't booting..  I put the crappy 72 pin connector from the yardsale NES into my stock NES (after cleaning &amp; bending the pins upward slightly) and had about a 75% success rate with the same carts.  I'd say the NEW connector is crap and will be returned.  <br /><br />So, right now my plan is to do a bunch of soldering work on the yardsale mainboard and wait for my replacement 72 pin connector.   If I have anything further to post on the subject, I will plan to start a new thread to not further derail this one... sorry for the tons of posts that really don't have anything to do with the subject at hand, everyone.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jims cool</b> [ Sun Sep 09, 2012 11:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />james cool <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> that's not my real name btw.. just a tag.. the reset trace goes to pin 7 of the cic.. not sure if you missed that but will be useful for testing (+5 volts is reset on that pin)... if it's that bad inside you can also try replacing the capacitor C8 as you probably know from arcades they don't like getting wet or damp so your problem could be the reset pulse is too short .. bad cap could be the problem.. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyousuke</b> [ Sun Sep 09, 2012 1:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jims cool wrote:</div><div class="quotecontent">james cool <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> that's not my real name btw.. just a tag.. the reset trace goes to pin 7 of the cic.. not sure if you missed that but will be useful for testing (+5 volts is reset on that pin)... if it's that bad inside you can also try replacing the capacitor C8 as you probably know from arcades they don't like getting wet or damp so your problem could be the reset pulse is too short .. bad cap could be the problem.. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br /><br />You speak the truth, my friend.  Another thing capacitors don't like is having their traces cut, and I found 4 traces cut suspiciously close to pin#4 on the CIC.  While I don't have any recollection of this, the most logical explanation is I messed up and cut some traces while trying to cut pin#4 (I do not remember at all slipping/gouging the board/etc, but the evidence is there that it happened)... I got some wrapping wire and patched the traces up, put on my stock 72 pin connector, and the yardsale NES was booting up with a 100% success rate. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />    Then I put the new connector back on and games were booting with about 12.5% success rate... this piece of junk is going back for sure. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />The moral of the story here is:  don't be lazy and cut pins with a boxcutter even though the guy on youtube did it that way.  Get out the desoldering iron, or at least use the cutters you own that have proven themselves to be safe/handy for cutting pins in the past...<br /><br />Edited to add: Not only did repairing these traces cause unbootable games to boot properly, the reset button works again.   I'm surprised ANY games were booting at all, considering the damage that had been done to the board...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Sep 09, 2012 1:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">kyousuke wrote:</div><div class="quotecontent">and I found 4 traces cut suspiciously close to pin#4 on the CIC.  While I don't have any recollection of this, the most logical explanation is I messed up and cut some traces while trying to cut pin#4 (I do not remember at all slipping/gouging the board/etc, but the evidence is there that it happened)... <br />[...]<br />Edited to add: Not only did repairing these traces cause unbootable games to boot properly, the reset button works again.   I'm surprised ANY games were booting at all, considering the damage that had been done to the board...</div><br /><br />And I suspect one of the traces you cut is the one for the 0.1ÂµF capacitor which makes the power-on delay for the CIC, which is necessary to get the machine to boot.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyousuke</b> [ Sun Sep 09, 2012 1:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">And I suspect one of the traces you cut is the one for the 0.1ÂµF capacitor which makes the power-on delay for the CIC, which is necessary to get the machine to boot.</div><br /><br />Could be, but would that explain the intermittent booting?  Need to remember, a good handful (maybe even the majority of the games I tried) would indeed boot up, even with the cut traces.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Sep 09, 2012 2:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Power load, possibly? I admit it's just a guess, but maybe the ones that wouldn't reliably boot were the ones with more ICs and so a larger surge current?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Sun Sep 09, 2012 2:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Maybe the lockouts are fried by carts that have the CIC stunning circuitry? That could be possible.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyousuke</b> [ Sun Sep 09, 2012 7:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I just wanted to clarify, when I say &quot;won't boot&quot;, I mean &quot;I get a gray screen as if the cart was not properly read and loaded&quot;, and not the typical CIC lockout &quot;game boots but resets every second&quot; error.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jims cool</b> [ Sun Sep 09, 2012 8:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">kyousuke wrote:</div><div class="quotecontent">I just wanted to clarify, when I say &quot;won't boot&quot;, I mean &quot;I get a gray screen as if the cart was not properly read and loaded&quot;, and not the typical CIC lockout &quot;game boots but resets every second&quot; error.</div><br /><br />nice! glad we got it all worked out for you <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> welcome to nesdev!<br /><br />C8 is the 0.1uf capacitor lidnariq is talking about.. it's the power on reset capacitor for the CIC<br /><br />the CIC outputs CPU's reset after sometime and you are right &quot;brown out&quot; conditions / surge current will reset the CIC and/or CPU.. the capacitance of the circuit effects that a lot too.. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />doesn't surprise me that it booted some games all the traces in the pin #4 area have to do with the security circuit.. it's still a fluke though <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br /><br />EDIT: fixed typo

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyousuke</b> [ Tue Sep 11, 2012 7:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jims cool wrote:</div><div class="quotecontent"><div class="quotetitle">kyousuke wrote:</div><div class="quotecontent">I just wanted to clarify, when I say &quot;won't boot&quot;, I mean &quot;I get a gray screen as if the cart was not properly read and loaded&quot;, and not the typical CIC lockout &quot;game boots but resets every second&quot; error.</div><br /><br />nice! glad we got it all worked out for you <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> welcome to nesdev!<br /><br />C8 is the 0.1uf capacitor lidnariq is talking about.. it's the power on reset capacitor for the CIC<br /><br />the CIC outputs CPU's reset after sometime and you are right &quot;brown out&quot; conditions / surge current will reset the CIC and/or CPU.. the capacitance of the circuit effects that a lot too.. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />doesn't surprise me that it booted some games all the traces in the pin #4 area have to do with the security circuit.. it's still a fluke though <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br /><br />EDIT: fixed typo</div><br /><br />Yeah, thanks everyone for the help, I'm sorry to crap up your thread with unrelated technical support.  I learned a ton, though, so thanks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>jims cool</b> [ Tue Sep 11, 2012 8:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />no sweat, seemed on topic to me <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br /><br />you should checkout the main <a href="http://forums.nesdev.com/viewforum.php?f=2" class="postlink">NESdev</a> forum lots of fun stuff happening  <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyousuke</b> [ Sat Sep 15, 2012 9:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jims cool wrote:</div><div class="quotecontent">no sweat, seemed on topic to me <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br /><br />you should checkout the main <a href="http://forums.nesdev.com/viewforum.php?f=2" class="postlink">NESdev</a> forum lots of fun stuff happening  <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div><br /><br />For sure I will do that when I've got more free time, working a lot of overtime right now.  Looks like some pretty cool stuff in there.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>pemdawg</b> [ Mon Dec 10, 2012 6:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Proof that pin #4 mod does not work</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">jims cool wrote:</div><div class="quotecontent">alright i've said it doesn't work a couple of times.. even before the code was dumped i tested and found it not to work... so now here is why the pin #4 to ground CIC fix doesn't work and locks the system<br /><br /><span style="color: #FFFF00">turns out not all 3193A's are the same.. although they are labeled the same &quot;some&quot; don't work with the pin #4 mod and lockout</span><br /><br />from my post below<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">alright i just couldnt help myself it turns out the pin #4 mod is a backdoor put in by a programmer.. maybe it was fixed maybe it was added in later i don't know<br /><br /> literately when it would write the reset pin i see a &quot;nop&quot;<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; KILL_KEY:<br />010: 21&nbsp; &nbsp; &nbsp; lbli 1&nbsp; &nbsp; &nbsp;; B = x0001 <br />048: 30&nbsp; &nbsp; &nbsp; ldi 0&nbsp; &nbsp; &nbsp; ; A = 0x0 <br />; DIE:<br />064: 00&nbsp; &nbsp; &nbsp; nop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; &lt;--- oops instruction removed! =)<br />072: e4&nbsp; &nbsp; &nbsp; t 064&nbsp; &nbsp; &nbsp; ; jmp DIE</div><br />anyway wish i had more time for this.. but i need to get back to work.. i'll check back later..</div><br /><br />this is the original code i posted<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; RESET_HOST_IF_KEY:<br />100:&nbsp; &nbsp;7c 83&nbsp; &nbsp;tml 103&nbsp; &nbsp;&nbsp; &nbsp;; call SKIP_NEXT_IF_LOCK<br />160:&nbsp; &nbsp;ef&nbsp; &nbsp;&nbsp; &nbsp;t 16f&nbsp; &nbsp;&nbsp; &nbsp;; jmp SET_RESET<br />170:&nbsp; &nbsp;31&nbsp; &nbsp;&nbsp; &nbsp;ldi 1&nbsp; &nbsp;&nbsp; &nbsp;; A = 0x1<br />178:&nbsp; &nbsp;21&nbsp; &nbsp;&nbsp; &nbsp;lbli 1&nbsp; &nbsp;&nbsp; &nbsp;; B = x0001<br />17c:&nbsp; &nbsp;00&nbsp; &nbsp;&nbsp; &nbsp;nop<br />17e:&nbsp; &nbsp;00&nbsp; &nbsp;&nbsp; &nbsp;nop<br />13f:&nbsp; &nbsp;00&nbsp; &nbsp;&nbsp; &nbsp;nop<br />15f:&nbsp; &nbsp;cf&nbsp; &nbsp;&nbsp; &nbsp;t 14f&nbsp; &nbsp;&nbsp; &nbsp;; jmp CLEAR_RESET<br /><br />SET_RESET:<br />16f: 30&nbsp; &nbsp;&nbsp; &nbsp;ldi 0&nbsp; &nbsp;&nbsp; &nbsp;; A = 0x0<br />177: 21&nbsp; &nbsp;&nbsp; &nbsp;lbli 1&nbsp; &nbsp;&nbsp; &nbsp;; B = x0001<br />17b: 46&nbsp; &nbsp;&nbsp; &nbsp;out&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; if key port1.0 = 00 (A)&nbsp; &nbsp; &nbsp; ; reset<br />17d: 00&nbsp; &nbsp;&nbsp; &nbsp;nop<br />13e: 00&nbsp; &nbsp;&nbsp; &nbsp;nop<br />11f: 00&nbsp; &nbsp;&nbsp; &nbsp;nop<br />CLEAR_RESET:<br />14f: 46&nbsp; &nbsp;&nbsp; &nbsp;out&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; if lock port1.0 = 01 (A)&nbsp; &nbsp; &nbsp; ; clear reset if lock<br />167: 4c&nbsp; &nbsp;&nbsp; &nbsp;rit&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; return<br /><br />; SKIP_NEXT_IF_LOCK:<br />103: 20&nbsp; &nbsp; &nbsp; lbli 0&nbsp; &nbsp; &nbsp; ; B = x0000<br />141: 55&nbsp; &nbsp; &nbsp; in&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; A = port0<br />120: 67&nbsp; &nbsp; &nbsp; ska 3&nbsp; &nbsp; &nbsp; &nbsp;; skip if A.3 = 1<br />150: 8f&nbsp; &nbsp; &nbsp; t 10f&nbsp; &nbsp; &nbsp; &nbsp;; jmp DONTSKIP<br />168: 4d&nbsp; &nbsp; &nbsp; ritsk&nbsp; &nbsp; &nbsp; &nbsp;; return and skip next instruction<br /><br />; DONTSKIP:<br />10f: 4c&nbsp; &nbsp; &nbsp; rit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; return</div><br />NOTE: BL sets the output port<br /><br />this function is called just before it recalculates the seeds<br /><br /><strong>EDIT2: as requested by tepples for anyone who doesn't understand 4-bit sharp assembly code <br /><br />&quot;ldi&quot; loads 4-bit's (1-nibble) into the (A)ccumulator  <br />&quot;lbli&quot; loads the lower nibble of the B register called BL this selects what port the &quot;out&quot; instuction writes (A) to<br /><br />the &quot;tml&quot; instructions call's the code block SKIP_NEXT_IF_LOCK..<br />this skips the next instruction on return if pin #4 is high (1) making the &quot;lock out&quot; go high and your game boot up<br /><br />when pin #4 is low (0) it's in key mode the code jumps to SET_RESET and writes 0 to the &quot;lock out&quot; pin.. this is the same as holding reset for ever<br /><br />this is how the lockout pin is wired<br />&quot;lockout&quot;----(CPU/PPU)---|&gt;o---220ohm---LED---(+)<br /><br />if you float pin 4 it's possible that it could work.. but i haven't had it work reliably.. i'll test later if this only effects some regions but i can't see sharp removing this part of the CIC code because it's also part of the CPU reset signal (clears reset after 15 bit transfers between lock and key)</strong><br /><br />almost finished coding my &quot;TENNIS&quot; firmware for the universal JCIC.. it's in the SNES section of the forum.. <br /><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=5676&amp;p=99001#p99001" class="postlink">here's the link to the relevant thread</a><br /><strong><span style="color: #FF0000">PLEASE DO NOT POST IN THIS THREAD ABOUT THE ABOVE LINKED THREAD</span></strong><br /><br />EDIT: tepples could you sticky this this thread?</div><br /><br />Just ran into this the other day while modding a stack of NESes. Wired pin 4 to GND, and it wouldn't even give a red power light. Removed jumper wire, and left it floating. All is well. WTF? Anyway, it was a REV 07 board I believe. Only decks I have here now are 07s and 10s. Haven't had any others to test it on.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>5</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
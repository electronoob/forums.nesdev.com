<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="https://forums.nesdev.com/feed.php?f=9&amp;t=9406" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="https://forums.nesdev.com/index.php" />
<updated>2018-03-15T20:05:59-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>https://forums.nesdev.com/feed.php?f=9&amp;t=9406</id>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2018-03-15T20:05:59-07:00</updated>
<published>2018-03-15T20:05:59-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=215345#p215345</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=215345#p215345"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=215345#p215345"><![CDATA[
On that note, I've made a few small changes to the test ROM.<br /><br />0.04 (2018-03-15)<br /><ul><li>compatibility with newer versions of ca65 </li><li>tools: upgrade to Python 3 </li><li>makefile: use py.exe of Python 3.3 and later for Windows </li><li>README: convert to Markdown and expand some things </li><li>Brighter shade of green </li><li>Builds both 4 Mbit and 8 Mbit versions </li></ul><p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Thu Mar 15, 2018 8:05 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2017-01-31T19:40:15-07:00</updated>
<published>2017-01-31T19:40:15-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188182#p188182</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188182#p188182"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188182#p188182"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Is the new description any better?<br /></div><br />Yes, I think so.<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Jan 31, 2017 7:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[glutock]]></name></author>
<updated>2017-01-31T16:11:36-07:00</updated>
<published>2017-01-31T16:11:36-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188168#p188168</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188168#p188168"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188168#p188168"><![CDATA[
<div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"><br />The Twin Dragons ROM from here produces a blank screen (but otherwise functional) on Nintendulator. Does the Nintendulator version of the mapper only support CHR-RAM?<br /><a href="https://forums.nesdev.com/viewtopic.php?f=32&amp;t=15193" class="postlink">https://forums.nesdev.com/viewtopic.php?f=32&amp;t=15193</a><br /><br /><br />I'm wondering what the 8k version of the PowerPak mapper is for, as well. Is that just for some historical record? Why would anyone want to use that one instead of the 32k version?<br /></div><br />I don't know if it helps, but my ROM wasn't correct. It uses CHR-ROM instead of CHR-RAM ... I corrected it today and updated my <a href="http://forums.nesdev.com/viewtopic.php?p=183905#p183905" class="postlink">post</a>. Sorry about that.<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7155">glutock</a> — Tue Jan 31, 2017 4:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2017-01-31T14:39:57-07:00</updated>
<published>2017-01-31T14:39:57-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188153#p188153</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188153#p188153"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188153#p188153"><![CDATA[
Is the new description any better?<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Jan 31, 2017 2:39 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2017-01-31T10:52:27-07:00</updated>
<published>2017-01-31T10:52:27-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188123#p188123</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188123#p188123"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188123#p188123"><![CDATA[
Okay, well the <a href="https://forums.nesdev.com/viewtopic.php?p=102718#p102718" class="postlink">description here</a> specifically says 6264 and 62256, so you might understand why I would make this assumption about the implementation.<br /><br /><br />What I was trying to suggest, though, in the form of an oblique question, is that having two versions, and only explaining their difference by means of this very technical distinction is probably confusing for the majority of users. I'm talking about people that just want to download &quot;the thing that will work&quot; so they can play the ROM they have.<br /><br />One has general purpose (compatible with all extant ROMS?), and the other is really a single purpose test for developers only, right? Wouldn't it be helpful to say this in that post?<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Jan 31, 2017 10:52 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2017-01-31T10:33:10-07:00</updated>
<published>2017-01-31T10:33:10-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188122#p188122</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188122#p188122"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188122#p188122"><![CDATA[
Let me try again:<br /><br />The 32K version corresponds to a board where A13 and A14 on the CHR memory are connected to the mapper. The 8K version corresponds to a board that grounds CHR A13 and A14 because the reduced-functionality CPLD does not output those signals in order to save two macrocells and two outputs. I seem to remember Action 53 volume 1 and 2 using the 8K version and the implementation in non-NES 2.0 emulators (such as FCEUX 2.2.2, still the latest in Ubuntu's repo) also being the 8K version.<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Jan 31, 2017 10:33 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2017-01-31T10:20:41-07:00</updated>
<published>2017-01-31T10:20:41-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188121#p188121</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188121#p188121"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188121#p188121"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />...ensuring that games that will eventually be distributed on a cart with 8 KiB of CHR RAM don't depend on more than that.<br /></div><br />By &quot;eventually&quot; do you mean that no games exist that require it? Is it a forseeable eventuality? I was under the impression that 256 kbit SRAM is cheaper than 64 kbit...<br /><br />(Perhaps what I'm recommending here is that you might edit the post to explain that the 32k version is the one people should normally want to use, to avoid confusion.)<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Jan 31, 2017 10:20 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2017-01-31T08:57:24-07:00</updated>
<published>2017-01-31T08:57:24-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188119#p188119</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188119#p188119"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188119#p188119"><![CDATA[
Mostly it's about making test and production as similar as possible, ensuring that games that will eventually be distributed on a cart with 8 KiB of CHR RAM don't depend on more than that. If the PowerPak mappers supported NES 2.0's RAM size field, there would need to be only one mapper file.<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Jan 31, 2017 8:57 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[rainwarrior]]></name></author>
<updated>2017-01-31T19:32:57-07:00</updated>
<published>2017-01-31T08:38:37-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188116#p188116</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188116#p188116"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=188116#p188116"><![CDATA[
<s>The Twin Dragons ROM from here produces a blank screen &#40;but otherwise functional&#41; on Nintendulator. Does the Nintendulator version of the mapper only support CHR-RAM?<br /><a href="https://forums.nesdev.com/viewtopic.php?f=32&amp;t=15193" class="postlink">https://forums.nesdev.com/viewtopic.php?f=32&amp;t=15193</a></s><br /><br />Edit: Never mind, glutock said it was a problem with the ROM.<br /><br /><br />I'm wondering what the 8k version of the PowerPak mapper is for, as well. Is that just for some historical record? Why would anyone want to use that one instead of the 32k version?<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5165">rainwarrior</a> — Tue Jan 31, 2017 8:38 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[SkinnyV]]></name></author>
<updated>2013-03-04T02:05:46-07:00</updated>
<published>2013-03-04T02:05:46-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108745#p108745</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108745#p108745"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108745#p108745"><![CDATA[
I'll try to mention it to Krikzz, thanks. But I guess he'll start by fixing the MMC3 logic before taking a look at implementing homebrew mapper  <img src="https://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4859">SkinnyV</a> — Mon Mar 04, 2013 2:05 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[infiniteneslives]]></name></author>
<updated>2013-03-04T01:25:18-07:00</updated>
<published>2013-03-04T01:25:18-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108744#p108744</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108744#p108744"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108744#p108744"><![CDATA[
<div class="quotetitle">SkinnyV wrote:</div><div class="quotecontent"><br />Any plan to bring this mapper to the Everdrive N8?<br /></div><br /><br />It's fully defined on the <a href="http://wiki.nesdev.com/w/index.php/User:Tepples/Multi-discrete_mapper#Verilog_Code" class="postlink">wiki</a> including two forms of the <a href="http://wiki.nesdev.com/w/index.php/User:Tepples/Multi-discrete_mapper/Verilog" class="postlink">source code</a>.  <br /><br />I'm guessing there isn't anyone on here who's dabbled with making their own everdrive mappers yet.  I'd suggest talking to the developer and pointing out this info to them asking for support.  The availability of source code should make it fairly painless for them.<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4832">infiniteneslives</a> — Mon Mar 04, 2013 1:25 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[SkinnyV]]></name></author>
<updated>2013-03-04T01:06:35-07:00</updated>
<published>2013-03-04T01:06:35-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108743#p108743</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108743#p108743"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=108743#p108743"><![CDATA[
Any plan to bring this mapper to the Everdrive N8?<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4859">SkinnyV</a> — Mon Mar 04, 2013 1:06 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[infiniteneslives]]></name></author>
<updated>2013-01-21T13:28:48-07:00</updated>
<published>2013-01-21T13:28:48-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=106587#p106587</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=106587#p106587"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=106587#p106587"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />I just realized something. I may need to add a test of writing to $D000-$DFFF to make sure that writes to $D000-$DFFF go only to the register value and not to register select. Because PRG /CE changes several nanoseconds later than M2, the decoding function might confuse $5000-$5FFF with $D000-$DFFF.<br /></div><br /><br />So I've confirmed that the whole /M2 to PRG /CE delay can cause issues in practice.  I noticed I was having issues with loopy's mmc3 version of  SMB2j with my usual decoding of A13,14,PRG/CE,M2 for $6000-$7FFF.  Digging a little into the ROM I realized during start up it copies a bank of PRG ROM into WRAM and then operates from WRAM for the most part (including the potentially trouble some writes to the scanline counter)  I don't know where it was getting tripped up exactly, either the coping massive block to WRAM or operating from WRAM.  But either way I was getting 20nsec glitches on WRAM /CE due to the PRG/CE delay from M2.<br /><br />I was able to resolve everything by placing a 1nF cap on WRAM /CE line to filter out the glitch.  Kind of a hassle to resolve this problem though, because the best solution would be to delay M2 far enough to remove the glitch, I'm guessing that's what Nintendo does in it's ASIC mappers. In an asic you can just add a series of slow inverters to give a good amount of delay, but in a (simple) CPLD like the Xlinix 9500XL series you don't have tools like this available to you.<br /><br />Just speculation: but this may also be part of the reason that you're able to disable writes to WRAM on the MMC3.  I don't know what most games' practice is for when they disable writes to WRAM and how many games actually operate/execute from WRAM.<br /><br />The only good way to delay M2 that I could come up with is to add some external gates which is kinda a pain/expensive...  I tried a few RC filters on M2 but the few combos I tried were affecting M2 on the mobo which in turn delayed PRG/CE further and never really got rid of the glitch...  Or the resistor was too big and the cap would charge up but never discharge.  Thinking about it now, perhaps adding a capacitor discharge resistor to ground would work out.  Kinda like having a voltage divider with a filter cap in parallel with the 'bottom' resistor.  One other thing I didn't consider was trying to make use of the CPLD's input capacitance by just putting a large resistor on the input.<br /><br />In any event I thought I'd share my related findings thus far, perhaps writing that test wouldn't be a bad idea.  And see if you can break it for register writes...  <img src="https://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4832">infiniteneslives</a> — Mon Jan 21, 2013 1:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[infiniteneslives]]></name></author>
<updated>2012-11-24T12:22:41-07:00</updated>
<published>2012-11-24T12:22:41-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=103440#p103440</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=103440#p103440"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=103440#p103440"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />I just realized something. I may need to add a test of writing to $D000-$DFFF to make sure that writes to $D000-$DFFF go only to the register value and not to register select. Because PRG /CE changes several nanoseconds later than M2, the decoding function might confuse $5000-$5FFF with $D000-$DFFF.<br /></div><br /><br />Probably a good idea to check out.  Although if the Game never writes to $D000-DFFF it shouldn't be a problem, but you can't really guarantee that from your end.  I wouldn't expect it to be an issue because decoding WRAM has the same issue with $6000-7FFF vs $C000-FFFF.  When writing to $C000-FFFF A13,14,/CE,&amp;M2 are all high for the couple nanoseconds you're talking about.  This could cause obvious issues especially with mappers such as MMC3.  I think the think that's preventing the issue is the minimum pulse width of the WRAM.  A quick look shows it's somewhere around 15nsec, which is quite a bit longer than the M2/CE decoding glitch.  <br /><br />I actually did see this decoding glitch propagating to the /CE pin on the WRAM at one point when I was debugging early on with this multi-discrete mapper.  Probably worth going back and trying to measure the width just for reference, although my 30+yr old scope might be a little slow to accurately measure such small pulses...<br /><br />I can't really figure out what the minimum pulse width is on the XC9500XL series CPLDs from datasheets...  Running the low slew rate setting should help out for these things.  I'd guess we're okay but can't be 100% sure without actually testing it.<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4832">infiniteneslives</a> — Sat Nov 24, 2012 12:22 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2012-11-23T09:54:03-07:00</updated>
<published>2012-11-23T09:54:03-07:00</published>
<id>https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=103397#p103397</id>
<link href="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=103397#p103397"/>
<title type="html"><![CDATA[Re: Multi-discrete mapper]]></title>

<content type="html" xml:base="https://forums.nesdev.com/viewtopic.php?t=9406&amp;p=103397#p103397"><![CDATA[
I just realized something. I may need to add a test of writing to $D000-$DFFF to make sure that writes to $D000-$DFFF go only to the register value and not to register select. Because PRG /CE changes several nanoseconds later than M2, the decoding function might confuse $5000-$5FFF with $D000-$DFFF.<p>Statistics: Posted by <a href="https://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Nov 23, 2012 9:54 am</p><hr />
]]></content>
</entry>
</feed>
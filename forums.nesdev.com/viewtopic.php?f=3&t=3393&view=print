<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NTSC emulation test?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NTSC emulation test?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=3393">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=3393</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Fri Jun 01, 2007 6:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I should write a "TV colors" test which displays checkerboards of particular colors that will appear identical to another solid color on an NTSC TV, but not on an emulator that only does RGB. It'd display images that you couldn't make out unless you have proper NTSC emulation. Then you wouldn't be able to claim you pass all my tests unless you do NTSC too. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Fri Jun 01, 2007 6:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><em>The quick brown Fox jumps over the lazy dog!</em>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Jun 01, 2007 10:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">I should write a "TV colors" test which displays checkerboards of particular colors that will appear identical to another solid color on an NTSC TV, but not on an emulator that only does RGB. It'd display images that you couldn't make out unless you have proper NTSC emulation. Then you wouldn't be able to claim you pass all my tests unless you do NTSC too. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
<br />Unless the emulator author adds support for the PlayChoice's second screen. Then the author has an excuse for why the emulated PPU is RGB. Are you planning on making tests for that?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Fri Jun 01, 2007 11:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">I should write a "TV colors" test which displays checkerboards of particular colors that will appear identical to another solid color on an NTSC TV, but not on an emulator that only does RGB. It'd display images that you couldn't make out unless you have proper NTSC emulation. Then you wouldn't be able to claim you pass all my tests unless you do NTSC too. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>
<br />
<br />That would be a really cool test ROM if the image it displayed read "TV Colors Test: PASSED" under an NTSC display and "TV Colors Test: FAILED" on an emulator that only does RGB.  But would that be possible?  For example, have both messages displayed on the screen, but each message is displayed in a different color pattern, so that under NTSC, "TV Colors Test: PASSED" was readable and "TV Colors Test: FAILED" was not readable.
<br />
<br />A similar thing has been done before.  There are tests for seeing if a human is color blind, where the person will see a "5" if they are not color blind and a "2" if they are color blind, even though it is the same static image.  An example exists at the bottom of this page:
<br /><!-- m --><a class="postlink" href="http://www.toledo-bend.com/colorblind/Ishihara.html">http://www.toledo-bend.com/colorblind/Ishihara.html</a><!-- m -->
<br />
<br />Anyway, that would get my vote for most creative test ROM for the NES <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 02, 2007 7:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Someone please test this on an NTSC NES and tell me what you see:
<br /><a href="http://pics.pineight.com/nes/tvpassfail.zip" class="postlink">http://pics.pineight.com/nes/tvpassfail.zip</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Sat Jun 02, 2007 9:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Someone please test this on an NTSC NES and tell me what you see:<br /><a href="http://pics.pineight.com/nes/tvpassfail.zip" class="postlink">http://pics.pineight.com/nes/tvpassfail.zip</a></div>
<br />
<br />I don't have a dev cart to load the ROM on, but I was testing it out under Nestopia.  Its pretty cool how well it works.  The interesting thing about this kind of test ROM is that, unlike other kinds of tests, the test ROM doesn't know the difference, but the observer definitely knows the difference.
<br />
<br />Can you make an image that is visible with RGB, invisible with NTSC?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>hap</b> [ Sat Jun 02, 2007 10:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Can you make an image that is visible with RGB, invisible with NTSC?</div>To output "failed" if that test is ran with RGB? If it's not possible, it could just output "tv test failed", and add a "not" for NTSC.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Jun 02, 2007 10:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This is pretty amazing. I wonder how it looks on a PAL TV, but I guess it'd be pretty much the same, only slightly different.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 02, 2007 10:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This test relies on the 3:2 exact relationship between NES pixels and NTSC color subcarrier cycles. There are 3 non-transparent colors per tile on an NES; this ROM uses a 3-color pattern to trigger luma/chroma crosstalk. PAL, on the other hand, uses a 6:5 relationship, which makes it a bit harder to trigger crosstalk, and emulators tend not to have a PAL mode.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Sat Jun 02, 2007 12:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">This is pretty amazing. I wonder how it looks on a PAL TV, but I guess it'd be pretty much the same, only slightly different.</div>
<br />
<br />Maybe a similar thing could be done so that it only says "PASS" on a PAL NES?  It would be cool if emulators supported emulation of specific NES, Famicom, and arcade systems... warts and all.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Sat Jun 02, 2007 1:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Detecting whether a game is being run on an NTSC or PAL system is very easy.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 02, 2007 1:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Jagasian wrote:</div><div class="quotecontent">Maybe a similar thing could be done so that it only says "PASS" on a PAL NES?</div><br />It'd be more difficult to make a screen pattern that exploits luma/chroma crosstalk for PAL because each pixel covers more of a color subcarrier cycle (5/6 of one rather than 2/3), and because no emulator supports PAL yet.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It would be cool if emulators supported emulation of specific NES, Famicom, and arcade systems... warts and all.</div><br />Wouldn't this require emulation of the lockout chip? <img src="./images/smilies/icon_twisted.gif" alt=":twisted:" title="Twisted Evil" /><br /><br /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">Detecting whether a game is being run on an NTSC or PAL system is very easy.</div>
<br />But what about distinguishing a PAL PPU from a hypothetical SCART (RGB) PPU?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Sat Jun 02, 2007 3:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What other observation based NES tests are there?  That is, tests where the ROM itself can't tell the difference between the real system and inaccurate emulation, but the user can easily observe the difference?  Maybe some sound test?  Maybe an input latency test?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 02, 2007 4:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Jagasian wrote:</div><div class="quotecontent">What other observation based NES tests are there?  That is, tests where the ROM itself can't tell the difference between the real system and inaccurate emulation, but the user can easily observe the difference?  Maybe some sound test?</div><br />Like the swapping of 25% and 50% duty pulse waves found in too many famiclones, right? What about an aliasing test, which would play a high-frequency 12.5% duty pulse wave at high frequencies? What about some tests about the resetting of the various APU counters other than the linear or length counter, such as the period counter? Or maybe some test of APU DAC nonlinearity?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Maybe an input latency test?</div>
<br />Input latency is tricky to measure without taking the human brain's reaction time into account. But making sure that the buttons don't always change state on the same scanline might be a good idea.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sat Jun 02, 2007 4:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I love tvpassfail! Here's what it displays running on my NTSC NES (as opposed to an RGB emulator, shown on right):
<br /><img src="http://www.io.com/~greens/temp/tvpassfail.png" alt="Image" /> <img src="http://www.io.com/~greens/temp/tvpassfail_rgb.png" alt="Image" />
<br />
<br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Unless the emulator author adds support for the PlayChoice's second screen.</div><br />Sure, if you're testing PlayChoice support, you'll get RGB, but if you're testing NES support, it had better do composite NTSC/RF in its accurate mode.<br /><br /><div class="quotetitle">Jagasian wrote:</div><div class="quotecontent">What other observation based NES tests are there? That is, tests where the ROM itself can't tell the difference between the real system and inaccurate emulation, but the user can easily observe the difference? Maybe some sound test? Maybe an input latency test?</div>
<br />Yes. Several aspects of the APU, like the triangle's length counter, aren't reflected in the status register. You can probably think of many: proper frequency of waveforms, DAC volume levels, DMC sample playing. Same for controller input as you say. Interestingly, most aspects of the PPU can be verified by using sprite #0 hit. Theoretically you could read the entire screen in terms of transparent/not transparent, though only one pixel per frame, so it'd take most of a day to do so.
<br />
<br />There are plenty more tests like this that could be written. They can still be automated in an emulator by having a human verify that they pass, saving the emulator's output (audio/video), then having your test script compare to that in the future.
<br />
<br />Time for a thread split it seems.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Jailbars on a front loader - help required</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Jailbars on a front loader - help required</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=16607">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=16607</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>romibraman</b> [ Sun Oct 29, 2017 3:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ok latest (last) update from me.<br /><br />Adding capacitors to my external supply did help me to achieve the exact same quality as when my PPU is powered directly through the PCB.<br /><br />But those vertical jail bars are silll here... exactly the same intensity as before, no variation at all.<br /><br />It's making me absolutely crazy...<br /><br />at this point I feel we've tried everything.<br /><br />I feel we've missed something somewhere... but I just don't know what. I've even tried changing the Xtal...yeah... <br /><br />Obviously if you have new idea, don't hesitate, and thanks for everything you did to this point.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Oct 29, 2017 4:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You said that desoldering PPU A13 got rid of the bars? (Although it also kept anything sensible from displaying, of course. Do you think you can tell whether they were present when the screen is filled with garbage?)<br /><br />Does it happen regardless of what cartridge you're using?<br /><br />For &quot;just randomly trying things&quot;, what happens if you connect PPU A13 to its trace via a 300Ω resistor?<br /><br />... What happens if you connect PPU A13 (or maybe NOT(PPU A13) out of the inverter) to the video pin via a huge resistor, say 100kΩ? (I don't actually know what's the right resistance)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Fisher</b> [ Sun Oct 29, 2017 4:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I have make the jailbars almost disappear on a NES clone by shielding the PPU and rebuilding the amplification circuit outside the board.<br />I also used a small coaxial cable I got from the wifi antenna of an old notebook:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=10592&amp;mode=view"><img src="./download/file.php?id=10592&amp;t=1" alt="20171029_211538.jpg" /></a><br />
			<span class="gensmall">20171029_211538.jpg [ 1.83 MiB | Viewed 1256 times ]</span>
		

		<br />
	</div><br />The result was not perfect, but was enough to me. They almost vanished completly. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br />I also was told that for maximum eficiency the PPU should be carefully shielded with copper tape, and the shield connected to GND.<br />I think the amplificator circuit can be assembled over the PPU in this case.<br />For the output, be sure to use a nice shielded cable.<br />Hope this helps you. Good luck!! <img src="./images/smilies/Mfr_icon_homebrew.png" alt=":beer:" title="Beer" /><br /><br />Edit: fixed some typos.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>romibraman</b> [ Sun Oct 29, 2017 4:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Lidnariq , what I like about you is that you’re always give me back hope before I go to sleep <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" /><br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">You said that desoldering PPU A13 got rid of the bars? (Although it also kept anything sensible from displaying, of course. Do you think you can tell whether they were present when the screen is filled with garbage)</div><br />In my memory there were no sign of bars whatsoever . I will try again tomorrow and take pictures<br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Does it happen regardless of what cartridge you're using?</div><br /><br />Yes. If anything some games looks worse. Mario Bros 2 looks absolutely awfull.<br /><br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><br />... What happens if you connect PPU A13 (or maybe NOT(PPU A13) out of the inverter) to the video pin via a huge resistor, say 100kΩ? (I don't actually know what's the right resistance)</div><br /><br />Im not sure I understand this one. What do you mean by « or maybe NOT(PPU A13) out of the inverter

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Oct 29, 2017 4:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So, the reason I suggested replacing the 74HCU04 is that, on the NES, PPU A13 connects to the cartridge, and to an inverter in the 74HCU04.<br /><br />The inverted form then goes to the cartridge, where it's usually (but not always) connected to the enable pin on the 2KiB of PPU RAM inside the NES.<br /><br />So, if the signal is due to some kind of coupling with PPU A13 ... then by padding a little bit of a signal that's the opposite (NOT(PPU A13) out of the inverter), then maybe you can cancel out the jailbars?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>romibraman</b> [ Sun Oct 29, 2017 4:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">So, the reason I suggested replacing the 74HCU04 is that, on the NES, PPU A13 connects to the cartridge, and to an inverter in the 74HCU04.<br /><br />The inverted form then goes to the cartridge, where it's usually (but not always) connected to the enable pin on the 2KiB of PPU RAM inside the NES.<br /><br />So, if the signal is due to some kind of coupling with PPU A13 ... then by padding a little bit of a signal that's the opposite (NOT(PPU A13) out of the inverter), then maybe you can cancel out the jailbars?</div><br /><br /><br />Interesting i had absolutely no idea. Do you know which pin on 74HCU04 Is the right inverter ?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Oct 29, 2017 5:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><!-- m --><a class="postlink" href="https://console5.com/wiki/File:NES-001-Schematic---CPU,-PPU,-RAM,-CIC.png">https://console5.com/wiki/File:NES-001- ... M,-CIC.png</a><!-- m --><br />Looks like pins 5 (PPUA13) and 6 (NOT PPUA13)?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>romibraman</b> [ Mon Oct 30, 2017 11:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">https://console5.com/wiki/File:NES-001-Schematic---CPU,-PPU,-RAM,-CIC.png<br />Looks like pins 5 (PPUA13) and 6 (NOT PPUA13)?</div><br /><br /><br />You crazy SOB it worked.... it freaking worked ...<br /><br />First I tried pulling PPUA13 to make sure I was not crazy and it was absolutely clear there was no jailbars at all.<br /><br />So first I tried to add a resistance between the pin and its trace and it did nothing.<br /><br />So I’ve tried you re crazy Inverter idea with a 83k resistance and ... it worked.<br /><br />The jailbars are still visible but barely.  I cut the resistance to make sure it was not just my hopeful eyes and BANG the jailbars were back.<br /><br />But I know I can make it perfect. So just to be clear I need to add more « Not PPU A13 » signal , so a smaller resistance right ?<br /><br />Man thanks so much. This experience has been frustrating but also incredibly rewarding. Your knowledge of the NES is absolutely mind blowing.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Oct 30, 2017 11:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />To be honest, mixing in a little bit of &quot;NOT PPU A13&quot; is a dirty hack, but I'm glad it's working for you.<br /><br />The problem is that both sides of &quot;too much&quot; or &quot;too little&quot; being mixed in will look very similar—the only difference being it moving by 4 pixels left/right.<br /><br />If, as you say, they don't move left/right when you add/remove the 82kΩ resistor, then, yes, you want to move towards a smaller value. You might be well served with a small (1k? 10k?) potentiometer for fine tuning.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>romibraman</b> [ Mon Oct 30, 2017 1:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">To be honest, mixing in a little bit of &quot;NOT PPU A13&quot; is a dirty hack, but I'm glad it's working for you.<br /><br />The problem is that both sides of &quot;too much&quot; or &quot;too little&quot; being mixed in will look very similar—the only difference being it moving by 4 pixels left/right.<br /><br />If, as you say, they don't move left/right when you add/remove the 82kΩ resistor, then, yes, you want to move towards a smaller value. You might be well served with a small (1k? 10k?) potentiometer for fine tuning.</div><br /><br /><br />I've tried with a 10k potentiometer and it seems it's not strong enough. and in fact you were right, it seems the bars were deported to a few piwels with an 83 Ko<br /><br />The interference I get is so strong that I seem to get the best results around the 200k. Does it sound possible to you ?<br /><br />Also It seems that depending on the game, the interference will be more or less strong. For exemple it's absolutely atrocious on Super Mario Bros 2. Bad on Super Mario Bros 3 and light on Megaman 2.<br /><br />I guess I need a bigger potentiometer to find the right value but I'm not sure there will be one working for all games / Situations.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Oct 30, 2017 2:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">romibraman wrote:</div><div class="quotecontent">The interference I get is so strong that I seem to get the best results around the 200k. Does it sound possible to you ?<br /></div>I don't even have a guess. You could say almost any value in the range of 10k to 10M and I'd believe it.<br /><br />I meant to suggest a fixed resistor *and* a potentiometer, so that the minimum resistance is in a useful place<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also It seems that depending on the game, the interference will be more or less strong. For exemple it's absolutely atrocious on Super Mario Bros 2. Bad on Super Mario Bros 3 and light on Megaman 2.<br /></div>To me, that strongly implies that it's still a problem with the power regulation.<br /><br />I dunno, have you tried to externally providing 5V to the board using a USB cable or something, skipping the regulator altogether?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I guess I need a bigger potentiometer to find the right value but I'm not sure there will be one working for all games / Situations.<br /></div>Yeah, the change from game to game does strongly imply that <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>romibraman</b> [ Mon Oct 30, 2017 3:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><div class="quotetitle">romibraman wrote:</div><div class="quotecontent">The interference I get is so strong that I seem to get the best results around the 200k. Does it sound possible to you ?<br /></div>I don't even have a guess. You could say almost any value in the range of 10k to 10M and I'd believe it.<br /><br />I meant to suggest a fixed resistor *and* a potentiometer, so that the minimum resistance is in a useful place<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also It seems that depending on the game, the interference will be more or less strong. For exemple it's absolutely atrocious on Super Mario Bros 2. Bad on Super Mario Bros 3 and light on Megaman 2.<br /></div>To me, that strongly implies that it's still a problem with the power regulation.<br /><br />I dunno, have you tried to externally providing 5V to the board using a USB cable or something, skipping the regulator altogether?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I guess I need a bigger potentiometer to find the right value but I'm not sure there will be one working for all games / Situations.<br /></div>Yeah, the change from game to game does strongly imply that <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /></div><br /><br />Not through usb but when I was powering the PPU it was a totally different regulator .<br /><br />Anyway I spent the last few hours testing different values and the results were puzzling. <br />First there is clearly a discrepancy between games. <br />Second, and this one is almost more annoying. There is also a discrepancy between colors. Remember  this blue and red intro screen on SMB2. Without a resistance I had jailbars everywhere. Now with the resistance I get either a perfect red but strong jailbars on blue or much better blue but strong jailbars on red depending on the resistance value.<br /><br />It means that even with a potentiometer  I won’t get a perfect result.<br /><br />I would need to entirely filter the PPu A13 signal and I’m not even sure it’s possible.<br /><br />One thing to note, I’m not sure if it can give you ideas. To do my resistance test I had to run a wire from the inverter pin 6. Just touching the other end of this wire with my finger was amplifying the jailbars. I guess I was acting as a capacitor ? Remember at this point it was not even connected to the v signal.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Oct 30, 2017 4:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">romibraman wrote:</div><div class="quotecontent">Second, and this one is almost more annoying. There is also a discrepancy between colors. Remember  this blue and red intro screen on SMB2. Without a resistance I had jailbars everywhere. Now with the resistance I get either a perfect red but strong jailbars on blue or much better blue but strong jailbars on red depending on the resistance value.<br /></div>I ... don't even know.<br /><br />Maybe a picture?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Just touching the other end of this wire with my finger was amplifying the jailbars. I guess I was acting as a capacitor ? Remember at this point it was not even connected to the v signal.<br /></div>*that's* going to be you acting as an antenna, and parts of the video pathway receiving that and amplifying it.<br /><br />I don't suppose you know anyone with an oscilloscope?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>romibraman</b> [ Mon Oct 30, 2017 4:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><div class="quotetitle">romibraman wrote:</div><div class="quotecontent"><br />Maybe a picture?<br /><br />I don't suppose you know anyone with an oscilloscope?</div></div><br /><br />I have ordered new bigger potentiometer. It will make make much better test, I’ll send a picture then, probably even a video.<br /><br /><br />I can try to find an oscilloscope , what test do you have in mind?<br /><br />Thanks again for your help .

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Oct 30, 2017 4:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Jailbars on a front loader - help required</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I guess I'd like to look at PPU A13, video out of the PPU, and +5V (AC coupled, DC block) at the same time? Each two pairwise would also be fine.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
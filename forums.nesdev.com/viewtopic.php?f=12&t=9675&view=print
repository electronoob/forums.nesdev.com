<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Flashing the cart in-circuit</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Flashing the cart in-circuit</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=9675">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=9675</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sat Jan 05, 2013 11:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I plan on designing a Snes dev. Cart and one idea I have is to be able to re-flash the roms on board. But, my programmer won't erase and reprogram if the rom is in circuit.   Is there a way to isolate the rom electronically so there aren't any programmer conflicts?  I'm not smart enough to design a USB Hi tech micro thing-a-ma-jig cpld, etc.. (wish I was that smart).   I'm going for a pretty simple approach with more modern parts.  It would be nice to be able to reflash on board with out removing the ic.<br />So any direction I can investigate would be greatly appreciated. <br /><br />Mark<br /><br /><strong>[Subject Fairy was here --MOD]</strong>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Jan 06, 2013 10:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Technical advice please</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You could try making an adapter from the programmer's connector to the Game Pak's edge connector.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sun Jan 06, 2013 11:18 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Technical advice please</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thank you for the reply.  If the flash rom is still connected to the rest of the cart circuitry, then it won't work (I tried but I didn't try using the cart edge connector).   Maybe because it's connected to the SRAM, could that be the issue??   And thinking about it a little more, the WE  line would be an issue using just the cart edge connector.  Are there any unused pins on the edge connector?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sun Jan 06, 2013 11:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Technical advice please</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'd start with a better thread title <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sun Jan 06, 2013 11:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Technical advice please</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ah, yes... Hindsight does seem to work better.   I might start a new thread.  Thanks

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ngevan2k</b> [ Sun Jan 06, 2013 1:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What part are you using ? There are flashroms that can be written in-circuit and some that can't. So my guess is switching to a part that can. I know a good one which is available in 32/64-Mbit sizes. It supports CFI (Common Flash Interface) so it's really easy to programm.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sun Jan 06, 2013 1:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The flash I tried was the AM29F032B part that is so popular. But I haven't tried any new ones yet.  IS the flash part you are referring to parallel or serial?<br />I'd like to know the parts you are referring to.    I plan on using level translators in the design because of the lower voltage flash roms that are only available now.  Which brings me to a new question (one which I can't answer myself since I don't have a proto to tinker with yet) .. will the level translators be a problem too?<br />I REALLY liked a previous posts' idea about reflashing it using the card-edge connector so you don't even have to take it out of the case.  That would require making a SNES socket adapter for my programmer which I would no problem to make.  Finding a line to piggyback the WE on might be an issue though..<br /><br />Thanks for all and any help.<br /><br />Mark

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ngevan2k</b> [ Sun Jan 06, 2013 5:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />They're called 28F320J5 and 28F640J5. They're both 5V parts and parallel. The 64-MBit version is available for $5. For programming it, you could use a Blackcat USB. We could also use a small ATMEGA to programm it over the CFI. Wouldn't it be nice to have a small USB-Plug on the side of your cart and being able to programm it directly over USB from your PC ?<br /><br />And about SNES cart slots ... I'm going to purchase a lot of 300 brand new slots in May and I'm willing to share some.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sun Jan 06, 2013 7:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Count me in.  Thanks for the offer!<br /><br />I thought those intel parts were out of production..<br /><br />.[quote=&quot;ngevan2k&quot;] For programming it, you could use a Blackcat USB. We could also use a small ATMEGA to programm it over the CFI. Wouldn't it be nice to have a small USB-Plug on the side of your cart and being able to programm it directly over USB from your PC ?<br /><br />How much more complexity would it add to the design?  Remember, I'm not that smart. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Programming it and reprogramming would be very nice from USB.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Mark

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ngevan2k</b> [ Sun Jan 06, 2013 7:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've been working on my own flashcart for some time now. I'm still gathering ideas and information. The USB flashable cart was an idea I once had, but I already found a very cheap USB-Stick/SD-Card interface which easily hooks up to any 8-Bit CPU and does FAT32 in hardware. So that would be a much better solution, being able to flash the rom with only using the SNES.<br /><br />Programming an ATMEGA would be a lot of work for someone who hasn't done anything like it. There have been some people who already have done this. They could be asked to give some source code. Perhaps there already exists a free solution somewhere. I would have to check the net for more info. In the end, I could do this myself if I had to.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Mon Jan 07, 2013 11:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've been looking at the blackcat USB device and my question is ... What additional parts are needed on the cartridge to connect to the flash device?  Since the parts we are using are parallel, I am wondering how that would work and then how the device parts would interfere with the Snes normal operation.<br /><br />I am also wondering if there has been a mad-1 logic replacement.  I suppose a duplicate of how the pre-mad-1 carts did it... Like super Mario world or early sim city carts....

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Mon Jan 07, 2013 11:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />[quote=&quot;ngevan2k&quot;]I've been working on my own flashcart for some time now. I'm still gathering ideas and information. The USB flashable cart was an idea I once had, but I already found a very cheap USB-Stick/SD-Card interface which easily hooks up to any 8-Bit CPU and does FAT32 in hardware. So that would be a much better solution, being able to flash the rom with only <br /><br />???  What is this?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qwertymodo</b> [ Tue Jan 08, 2013 2:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's entirely possible to do it in-circuit with the 29F032B, you just have to find a way to attach directly to the ROM pins, as well as the WE pin, which isn't broken out to a pin on the adapter board (though it should go to one of the resistor pads, which is large enough to attach a wire).  <a href="http://electrifiedfoolingmachine.co/?page_id=633" class="postlink">Check out this project</a> for an idea of one way that you could do it.  If you wanted to go through the cart edge connector, you'd need to write your own software to handle the address decoding, as well as you'd need to wire up the WE pin from the Flash ROM to the cart edge (Flash ROMs require an unlock sequence in order to begin programming, so you wouldn't have to worry about an errant write command overwriting your ROM).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Tue Jan 08, 2013 5:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qwertymodo wrote:</div><div class="quotecontent">It's entirely possible to do it in-circuit with the 29F032B, you just have to find a way to attach directly to the ROM pins, as well as the WE pin, which isn't broken out to a pin on the adapter board (though it should go to one of the resistor pads, which is large enough to attach a wire).  <a href="http://electrifiedfoolingmachine.co/?page_id=633" class="postlink">Check out this project</a> for an idea of one way that you could do it.  If you wanted to go through the cart edge connector, you'd need to write your own software to handle the address decoding, as well as you'd need to wire up the WE pin from the Flash ROM to the cart edge (Flash ROMs require an unlock sequence in order to begin programming, so you wouldn't have to worry about an errant write command overwriting your ROM).</div><br /><br />I have looked at that project closely...... I sent an email to the person who made that asking if his setup could be used with LV roms and if the rom coud be larger in size.   Haven't heard back from him.....   In reading about that project, I'm wondering if I could use his circuits to isolate the rom from the rest of the cartridge without all the USB stuff.  My mind is mush right now... Way too many ideas floating around....

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ngevan2k</b> [ Tue Jan 08, 2013 6:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Flashing the cart in-circuit</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">I've been looking at the blackcat USB device and my question is ... What additional parts are needed on the cartridge to connect to the flash device?  Since the parts we are using are parallel, I am wondering how that would work and then how the device parts would interfere with the Snes normal operation.<br /><br />I am also wondering if there has been a mad-1 logic replacement.  I suppose a duplicate of how the pre-mad-1 carts did it... Like super Mario world or early sim city carts....</div><br /><br />You connect the blackcat directly to the flashrom and it programms it over SPI, you don't need any additional parts.<br /><br />Yeah, I think someone could figure out a MAD-1 replacement by looking at older carts. I put aside some of these for further investigation which use a LS139, some diodes and a transistor instead of the MAD-1. For now, I got hundreds of donor carts to get MAD-1's from, so I won't be working on this.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
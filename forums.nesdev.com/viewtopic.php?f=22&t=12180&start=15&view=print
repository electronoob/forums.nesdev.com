<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Another Raycasting Demo</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Another Raycasting Demo</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=22&amp;t=12180">http://forums.nesdev.com/viewtopic.php?f=22&amp;t=12180</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Wed Dec 31, 2014 12:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Now please don't hate me for this I was just trying to be realistic. For a tech demo this is awesome, in a game it'd be really terrible.</div><br /><br />I definitely understand. Come to think of it, I had a hard enough time playing Doom 1, and that was on PC, and went way beyond normal raycasting. Perhaps it'd be entertaining for like 1 level, but sitting down to a full blown game could be exhausting. Probably the only people that would want to play it are really hard core, old school FPS players. And masochistic gamers who like to be tortured by insanely hard games.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">...or that 3D train minigame in Final Fantasy 6 when exiting the magitek factory, that also looked absolutely terrible</div><br /><br />OK now, both of our demos look <em>way</em> better than that piece of shit! =) The game had no excuse displaying something that awful; they could have done much better.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Fri Jan 02, 2015 12:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">None of us expects to make the ultimate NES game, but bringing something new to the platform is always fun, even if it's not perfect.</div><br />I absolutely agree with you. It's really great you guys can bring something new, I am not denying that. I'd just that that the idea to base an entiere game in those graphics mode would be a terrible idea.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">OK now, both of our demos look way better than that piece of shit! =) The game had no excuse displaying something that awful; they could have done much better.</div><br />Well I don't remember exactly but I remember it was looking absolutely terrible. Even back in 1994 it would not have been impressive I think.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Probably the only people that would want to play it are really hard core, old school FPS players. And masochistic gamers who like to be tortured by insanely hard games.</div><br />I don't think the usage of such a pseudo-3D raycasting is automatically restricted to FPS. Think how it could just be that &quot;different&quot; level in an otherwise 2D game. Even if it was just a room to explore or something. It could suit lots of different games, RPG, platformers or even investigation games.<br /><br />In Portopia (that investigation game Enix made before Dragon Quest) there is a giant 3D maze, and you have to traverse it at least once entirely to beat the game. Because you can only advance one &quot;section&quot; at once and do 90Â° turns, this part has aged extremely badly and looks terrible. However, if it was remade with a raycaster, this part of the game would be much better.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Jan 02, 2015 1:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Or do outdoor scenes in an overhead view and indoor scenes with the raycaster, like in <em>Phantasy Star</em> for Sega Master System or <em>Jurassic Park</em> for Super NES.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Fri Jan 02, 2015 3:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">I don't think the usage of such a pseudo-3D raycasting is automatically restricted to FPS. Think how it could just be that &quot;different&quot; level in an otherwise 2D game. Even if it was just a room to explore or something. It could suit lots of different games, RPG, platformers or even investigation games.</div><br /><br />You know, this could make a lot of sense in something like my Castlevania style game (not yet in development). While it's normally a platformer, it could be cool for the player to have to go through some catacomb style maze to get to another area. I had wanted to put some other fake 3D effects in the game, so it would lend itself well to this.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Fri Jan 02, 2015 3:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I really want to play that game, even if you didn't start yet to develop it <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tomaitheous</b> [ Mon Jan 05, 2015 3:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I saw this in the side link bar: <!-- m --><a class="postlink" href="https://www.youtube.com/watch?v=ZQRFBmGdvUQ">https://www.youtube.com/watch?v=ZQRFBmGdvUQ</a><!-- m --><br />Might be able to do something like that (an adventure game or 3D town for an RPG, etc).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Jan 05, 2015 4:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tomaitheous wrote:</div><div class="quotecontent">I saw this in the side link bar: <!-- m --><a class="postlink" href="https://www.youtube.com/watch?v=ZQRFBmGdvUQ">https://www.youtube.com/watch?v=ZQRFBmGdvUQ</a><!-- m --></div><br />This looks surprisingly good... I'd expect the cardboard cutout effect to be more distracting, but it actually feels like you're walking around in a town. What is distracting though is that it feels like you're a giant, because the textures are all centered on the horizon. I know it needs more computation, but the walls really need to be shifted up according to their distance so that the player doesn't appear to be so tall.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jan 05, 2015 6:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What takes more CPU time: casting the ray for each pixel column or drawing the textures? Because if the ray casting itself takes a lot of time, I think I know how to speed it up with a run-length technique related to portal engines. Ray casting itself is just a special case of portal casting.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Jan 05, 2015 7:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">What takes more CPU time: casting the ray for each pixel column or drawing the textures?</div><br />From my own experience, scaling the textures is slightly slower, but the 2 tasks were balanced enough that casting a long ray and drawing a small wall wasn't that much different than casting a short ray and drawing a big wall, which kept the performance somewhat constant.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Because if the ray casting itself takes a lot of time, I think I know how to speed it up with portals.</div><br />I guess it's still worth speeding up, even if it's not the slowest task. I remember reading about how Doom used BSP (binary space partitioning) for rendering its graphics but I never really understood how that worked. What's the portals approach like?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jan 05, 2015 8:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />RLE ray casting starts with a visible sector with a left and right side. You scan the visible sector in strips from nearest to farthest. When you hit a wall, you schedule the wall to be drawn, and then you divide the visible sector into the interval to the left of the tile and the interval to its right. After you've finished enumerating all walls in this strip, you scan the next farther strip. Repeat until all visible sectors have been cleared.<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<img src="./download/file.php?id=2388" alt="portalcasting.png" /><br />
			<span class="gensmall">portalcasting.png [ 1.74 KiB | Viewed 3053 times ]</span>
		

		<br />
	</div><br /><ul><li>Orange: Sides of initial visible sector </li><li>Green: Visible wall segments </li><li>Blue: Floor within visible area </li><li>Light gray: Sides of subsectors </li><li>Light blue: Subsector sides extended toward camera origin </li><li>Black: Floor areas that are skipped </li></ul><br />The difference here is that each cell in the map is visited once, not once for each pixel column that intersects it. And for the typical 90 degree FOV, you'll never have more intervals active at once than max(width, height) of your map.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Jan 05, 2015 9:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sounds interesting, but I didn't quite understand it yet. I'm a little confused when you talk about nearest and farthest strips... Is a &quot;strip&quot; in this case the same as a wall strip, which is painted with a scaled texture in the end? How do I know which one is the nearest before casting a ray? And how would I go about deciding which texture column to use for each screen column if I don't have rays hitting them at coordinates I can check?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tomaitheous</b> [ Tue Jan 06, 2015 3:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">RLE ray casting starts with a visible sector with a left and right side. You scan the visible sector in strips from nearest to farthest. When you hit a wall, you schedule the wall to be drawn, and then you divide the visible sector into the interval to the left of the tile and the interval to its right. After you've finished enumerating all walls in this strip, you scan the next farther strip. Repeat until all visible sectors have been cleared.<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent"><!-- ia0 -->portalcasting.png<!-- ia0 --></div><br /><ul><li>Orange: Sides of initial visible sector </li><li>Green: Visible wall segments </li><li>Blue: Floor within visible area </li><li>Light gray: Sides of subsectors </li><li>Light blue: Subsector sides extended toward camera origin </li><li>Black: Floor areas that are skipped </li></ul><br />The difference here is that each cell in the map is visited once, not once for each pixel column that intersects it. And for the typical 90 degree FOV, you'll never have more intervals active at once than max(width, height) of your map.</div><br /><br />I think I follow you. But I'm not sure how to implement that, exactly. So once the ray hits that tiled block (wall/edge/whatever), you calculate angle of the wall, and render out that tile for that angle, then proceed to the next tiled block/wall the ray hits? Or at least, something along those lines? I wonder if that's what <a href="https://www.youtube.com/watch?v=WBMsjAAgPO0gasega68k" class="postlink">gasega68k</a> did for his Wolfenstein 3D port for the Genesis.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Jan 06, 2015 4:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />By &quot;strips&quot;, I was referring to horizontal strips of potentially visible tiles in the map, colored dark blue in the illustration. &quot;Nearest&quot; is such a strip of tiles that is closest to the camera position (the intersection of the orange line segments). When facing north, the closest strip is the southernmost strip. The left and right side of each strip is determined by projecting the rays at the corners of already-drawn map tiles backward. When the camera is facing west or east more than north or south, use vertical strips in the map instead of horizontal strips in the map.<br /><br />The procedure is sort of a hybrid between the ray casting of Wolf3D and the arbitrarily shaped sectors of Build, the Duke 3D engine.<br /><br />Do I need to expand the illustration to an animated GIF of the entire rendering process, or produce a renderer myself in Python?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drag</b> [ Tue Jan 06, 2015 7:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was wondering about the effectiveness of simplifying calculations by restricting angles?<br /><br />For instance, a 90-degree restriction is fairly straightforward; all walls are box-shaped and you rotate at 90-degree angles. What if we did it at 30 degrees? Everything would turn at 30 degree increments, and all walls could only be at a 30 degree angle.<br /><br />Maybe this offers no improvements, but it feels like you'd be able to calculate things a little faster and have smaller tables, or higher resolution tables.<br /><br />Also, an animation would be helpful, Tepples. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Jan 06, 2015 8:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Another Raycasting Demo</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Do I need to expand the illustration to an animated GIF of the entire rendering process, or produce a renderer myself in Python?</div><br />Coding an example seems overkill if you don't plan on using it for a project of your own... but I'll definitely take you up on that GIF! =)

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
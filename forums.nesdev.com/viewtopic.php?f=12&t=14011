<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - SPC File Format looks like S***</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="https://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="https://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="https://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="https://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="https://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - SPC File Format looks like S***" href="https://forums.nesdev.com/feed.php?f=12&amp;t=14011" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en&amp;sid=9a8847afd770cea942164eb41ea242ae" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php?sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php?sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php?sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Tue Feb 05, 2019 4:08 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered&amp;sid=9a8847afd770cea942164eb41ea242ae">View unanswered posts</a> | <a href="./search.php?search_id=active_topics&amp;sid=9a8847afd770cea942164eb41ea242ae">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=9a8847afd770cea942164eb41ea242ae">Board index</a> &#187; <a href="./viewforum.php?f=25&amp;sid=9a8847afd770cea942164eb41ea242ae">Other</a> &#187; <a href="./viewforum.php?f=23&amp;sid=9a8847afd770cea942164eb41ea242ae">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12&amp;sid=9a8847afd770cea942164eb41ea242ae">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />

	<div class="forumrules">
		
			<h3>Forum rules</h3><br />
			<ul><li>For making cartridges of your Super NES games, see <a href="http://forums.nesdev.com/viewforum.php?f=28" class="postlink">Reproduction</a>.</li></ul>
		
	</div>

	<br clear="all" />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae">SPC File Format looks like S***</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320&amp;sid=9a8847afd770cea942164eb41ea242ae">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>4</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 51 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;start=45">4</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=14011&amp;view=previous&amp;sid=9a8847afd770cea942164eb41ea242ae">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=14011&amp;view=next&amp;sid=9a8847afd770cea942164eb41ea242ae">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p167093"></a>
				<b class="postauthor">bazz</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167093">SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167093&amp;sid=9a8847afd770cea942164eb41ea242ae#p167093"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 7:43 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4992_1376957212.gif" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Sep 02, 2011 8:34 pm<br /><b>Posts:</b> 476
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">*From my perspective* - I am adding a new feature to <a href="http://snestracker.club/" class="postlink">SNES Tracker Debugger</a> (STD) today, and it's <strong>SPC Export</strong>. Now, some of you might know I'm using my own modified version of Blargg's GameMusicEmu (GME) called <a href="https://github.com/bazzinotti/libGME_M" class="postlink">libgme_M</a> for this. Blargg has some funny comments in his code for &quot;decoding&quot; SPC fields -- and <a href="https://github.com/bazzinotti/libGME_M/blob/master/gme/Spc_Emu.cpp#L173" class="postlink">his frustration with the format is evident.</a> (multiple comments)<br /><br />Let's refer to some of the &quot;best&quot; SPC documentation I could ever find<br /><br /><ul><li> (older) <!-- m --><a class="postlink" href="http://vspcplay.raphnet.net/spc_file_format.txt">http://vspcplay.raphnet.net/spc_file_format.txt</a><!-- m --></li><li> (newer) <!-- m --><a class="postlink" href="http://translate.google.com/translate?hl=en&amp;sl=ja&amp;u=http://dgrfactory.jp/spcplay/id666.html&amp;prev=search">http://translate.google.com/translate?h ... rev=search</a><!-- m --></li></ul><br />I'm assuming this is the end-all be-all for SPC documentation. Someone please comment if you know better.<br /><br />One of the most obvious issues with the SPC format is an unclear distinction between a &quot;text&quot; SPC and a &quot;binary&quot; SPC -- why there exists both a text and binary form in the first place is beyond me.<br /><br />Then there's the actual string fields, which are &quot;text&quot; in both the &quot;text&quot; and binary versions of the SPC format -- is this ASCII text only? Do people stick Unicode-16 in there? Should I support that? But since I only plan on supporting ASCII in the first release anyways, that's all I'll do.<br /><br />Continuing on the text-fields -- I suppose it's unsafe to assume they are null-terminated.. (Duh! *slap* goes the professional). I'm not sure if GME makes this assumption or not, yet!<br /><br />Another issue is the &quot;emulator&quot; field -- which takes of all things, a number! But, only a few emulator indices were ever documented, and since this format is not at all regularly updated or kept standardized -- it's a crapshoot whether numbers are overlapping or not, or what owns which number. In this kind of non-standardized environment, a text field would have probably been best for this.<br /><br />---------<br /><br />If anyone has an SPC they know is distinctly a text one, or a binary one, I'd like your sample please.<br /><br />Didn't Kevtris make some kind of new format that *might* be related to this?<br /><br />Can I just go ahead and make a new format that is less difficult to work with?<br /><br />---------<br /><br />To the creator of SPC file format - I know how it is. We live and learn. Sometimes, looking back, we see what we've created and go *facepalm*</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://wiki.superfamicom.org/snes/show/HomePage#bazzs_tutorials_10" class="postlink">SNES Tutorials (WLA DX)</a><br /><a href="http://www.cs.umb.edu/~bazz/snes/cartridges/lorom.html#intro" class="postlink">SNES Memory Mapping Tutorial</a> (Universal / LoROM) -- By Universal I introduce how memory mapping works, rather than just provide a LoROM map.<br /><a href="http://snestracker.club/" class="postlink">SNES Tracker (WIP)</a> - Music/SFX composition tool / SPC Debugger</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4992&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p167094"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167094">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167094&amp;sid=9a8847afd770cea942164eb41ea242ae#p167094"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 8:20 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1400
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">SPC is complete and utter shit. But it was the first out the gate, and no amount of improvements will ever convince anyone to switch. See: IPS, CHT, SMC, ZIP, WLA-DX, etc.<br /><br />&gt; Can I just go ahead and make a new format that is less difficult to work with?<br /><br />I made a vastly superior format named SFM (Super Famicom Music), but we got bogged down because a true state capture has internal variables, and different emulators will want to name those fields differently (they definitely don't have official names.) Some emulators won't even support certain state fields, others may require new ones not yet known for a perfect capture. Forking the format with emulator-specific sections is the worst possible thing you can do.<br /><br />SPC can't handle streaming audio (Tales of Phantasia opening, etc) because it's merely a snapshot of the SMP+DSP; and SNSF requires ROM hackers to create because they're literally butchered SNES ROMs that try to remove as much as possible except for the music code (and this forces you to emulate the CPU and possibly PPU just to play music.)<br /><br />So here's the key to a much better format: when ripping the music track, log all the values read from $f4-f7 on the SMP to the end of the file. Remove the data for non-streaming tracks if you want (it'll compress down to nothing anyway), and leave it for streaming tracks. Timing of the accesses doesn't need to be logged, nor does the addresses. Just a linear stream of all bytes read, and then play back those accesses sequentially when playing the music. This can easily result in consistent playback because we have cycle-perfect timing of the SMP and DSP now. We ripped Tales' opening song in like 200KiB, whereas regular songs were the same ~68KiB of regular SPCs.<br /><br />But good luck with the bike-shedding on how to store the internal state of the SMP/DSP. And enjoy the frustration as you spend the next ten years trying to convince everyone to use your much better format to absolutely no avail because &quot;SPC is good enough.&quot;</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p167096"></a>
				<b class="postauthor">Drew Sebastino</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167096">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167096&amp;sid=9a8847afd770cea942164eb41ea242ae#p167096"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 8:40 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly Espozo</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1462234663.png" width="64" height="66" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 3428<br /><b>Location:</b> Richmond, Virginia
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">bazz wrote:</div><div class="quotecontent">(STD)</div><br /> <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p167098"></a>
				<b class="postauthor">bazz</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167098">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167098&amp;sid=9a8847afd770cea942164eb41ea242ae#p167098"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 8:58 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4992_1376957212.gif" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Sep 02, 2011 8:34 pm<br /><b>Posts:</b> 476
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">SPC is complete and utter shit. But it was the first out the gate, and no amount of improvements will ever convince anyone to switch. See: IPS, CHT, SMC, ZIP, WLA-DX, etc.<br /></div><br /><br />It's funny you mentioned WLA-DX .. I even switched once to ca65 and then *went back* to WLA DX. I think I am masochistic these days, which could probably be why I'm good at any of this stuff.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I made a vastly superior format named SFM (Super Famicom Music), but we got bogged down because a true state capture has internal variables, and different emulators will want to name those fields differently (they definitely don't have official names.) <br /></div><br /><br />Who is &quot;we&quot;?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">SPC can't handle streaming audio. So here's the key to a much better format</div><br /><br />I love that you considered streaming audio in your format.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But good luck with the bike-shedding on how to store the internal state of the SMP/DSP. And enjoy the frustration as you spend the next ten years trying to convince everyone to use your much better format to absolutely no avail because &quot;SPC is good enough.&quot;</div><br /><br />I feel your personal pain (ie .sfc).<br /><br />Now I could get into further details of why I feel your better file format(s) or tool(s) did not gain popularity, or why I want to know why no timing info was needed to log the CPU-&gt;SPC writes, but I already have a super-high pile of issues I'm sorting through. If anything, I learned that I am probably *not* the guy to introduce a new SPC format, because you've shown me the 2 crucial changes it should require: <br /><br /><ul><li> Streaming Support</li><li> Some sort of *new* internal state issue you've mentioned (which I don't see how the traditional SPC logging of this information doesn't already have this covered). I know some emu's can have *better* state recording but the minimum that SPC already provides seems sufficient and relieves us of additional complexity to the format.</li></ul><br />Unfortunately, since I don't give a damn about streaming -- only because the rest of the tracker software isn't written -- I'm already flawed to write a good new format... <br /><br />But damn, I'm intrigued, and I think I could do it -- so please, byuu, answer these questions:<br /><br />for Streaming -- Why is it safe to assume no timing info needs to be logged? Isn't that making an assumption that all data being written is at the earliest possible moment? The assumption might suit a lot of test cases, or all of them, but this is definitely an assumption! Unless you school me.<br /><br />Can you agree with me to leave out emulator-specific state and just leave in traditional SPC state, namely DSP vals, CPU reg vals, and RAM snapshot.<br /><br />Of course, even if I/we make a new format, SNES Tracker will support SPC as well!<br /><br />Even if we *can* agree on the basis for a new format, I will probably want to concentrate on SPC support and the rest of my tracker software first just to get it up and running!<br /><br />This has been a really helpful topic so far! Thanks for getting involved!</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://wiki.superfamicom.org/snes/show/HomePage#bazzs_tutorials_10" class="postlink">SNES Tutorials (WLA DX)</a><br /><a href="http://www.cs.umb.edu/~bazz/snes/cartridges/lorom.html#intro" class="postlink">SNES Memory Mapping Tutorial</a> (Universal / LoROM) -- By Universal I introduce how memory mapping works, rather than just provide a LoROM map.<br /><a href="http://snestracker.club/" class="postlink">SNES Tracker (WIP)</a> - Music/SFX composition tool / SPC Debugger</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4992&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p167099"></a>
				<b class="postauthor">Drew Sebastino</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167099">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167099&amp;sid=9a8847afd770cea942164eb41ea242ae#p167099"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 9:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly Espozo</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6683_1462234663.png" width="64" height="66" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 15, 2014 4:35 pm<br /><b>Posts:</b> 3428<br /><b>Location:</b> Richmond, Virginia
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Well, if you're making the tracker software, what do you really need to worry about streaming for? Assuming you're streaming to replace instruments mid song or something, when designing the song in the tracker, you'd have it play the incorrect instruments but they're in the right spot to where they're going to be overwritten in the actual game. If the APU can't do anything about it because it's the CPU's job, (like streaming) then why would it have to be in the tracker? It might sound weird in the tracker, but it'll work fine. I guess you could create a &quot;stream&quot; function in the tracker that just changes instrument data for the sake of hearing how it sounds, but it won't affect the final output.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6683&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p167100"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167100">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167100&amp;sid=9a8847afd770cea942164eb41ea242ae#p167100"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 9:15 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 1011
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">bazz wrote:</div><div class="quotecontent">I want to know why no timing info was needed to log the CPU-&gt;SPC writes</div><br />Because it's not logging writes.  It's logging reads.  They happen when they happen.<br /><br />I didn't know SNSF required a whole-system emulation.  I kinda thought it must be logging timestamped writes, but I didn't think of the above idea because I didn't think it through.<br /><br />I do wonder if it would take more or less space to log timestamped writes instead of bare reads (one imagines that reads outnumber writes), but the emulation requirements would then be more finicky.  Logging reads dispenses with the need to care about timing at all.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p167105"></a>
				<b class="postauthor">bazz</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167105">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167105&amp;sid=9a8847afd770cea942164eb41ea242ae#p167105"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 10:13 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4992_1376957212.gif" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Sep 02, 2011 8:34 pm<br /><b>Posts:</b> 476
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Espozo wrote:</div><div class="quotecontent"><div class="quotetitle">bazz wrote:</div><div class="quotecontent">(STD)</div><br /> <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /></div><br /><br />Yeah, I planned that.<br /><br /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent">Well, if you're making the tracker software, what do you really need to worry about streaming for?</div><br /><br />Creating a new SPC file format transcends SNES Tracker. I would be foolish to create a new SPC file format that does not address these general needs that the first format did not live up to.<br /><br />SNES Tracker doesn't appear to require streaming support - most general streaming situations will not require direct involvement with the tracker -- but even if a situation were dreamt up, I would not support it in the first release.<br /><br />The SPC debugger *should* support streaming. Any supporting APU emulator would also require the following additions: <br /><br /><ul><li> APU &quot;stream playback&quot; feature - stream the new file-format's &quot;stream content&quot; as SPC reads from $f4-$f7.</li></ul><br />Of course, after a format is defined, someone like Byuu would be most fit for writing in the new SPC export feature, while someone like me could write the new SPC Import feature, and then we'd have a working prototype.<br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent"><div class="quotetitle">bazz wrote:</div><div class="quotecontent">I want to know why no timing info was needed to log the CPU-&gt;SPC writes</div><br />Because it's not logging writes.  It's logging reads.  They happen when they happen.</div><br /><br />Ohhhhhh! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">I do wonder if it would take more or less space to log timestamped writes instead of bare reads (one imagines that reads outnumber writes), but the emulation requirements would then be more finicky. Logging reads dispenses with the need to care about timing at all.</div><br /><br />In the read strategy, depending on the regular amount of consecutive repeated values  - doing a &quot;value,repetitions&quot; pattern could be efficient. But compared to real compression solutions, this might be a joke. I'm not well educated in compression. Please someone school me.<br /><br />But, even if there were better compression algorithms, organizing the data as it's being processed in a &quot;value,repetitions&quot; structure could save a lot of memory. Again, depending if the data-set experiences high sequential repetitions.</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://wiki.superfamicom.org/snes/show/HomePage#bazzs_tutorials_10" class="postlink">SNES Tutorials (WLA DX)</a><br /><a href="http://www.cs.umb.edu/~bazz/snes/cartridges/lorom.html#intro" class="postlink">SNES Memory Mapping Tutorial</a> (Universal / LoROM) -- By Universal I introduce how memory mapping works, rather than just provide a LoROM map.<br /><a href="http://snestracker.club/" class="postlink">SNES Tracker (WIP)</a> - Music/SFX composition tool / SPC Debugger</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4992&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p167107"></a>
				<b class="postauthor">93143</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167107">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167107&amp;sid=9a8847afd770cea942164eb41ea242ae#p167107"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 10:20 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Jul 04, 2014 9:31 pm<br /><b>Posts:</b> 1011
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">bazz wrote:</div><div class="quotecontent">a &quot;value,repetitions&quot; pattern</div><br />RLE, basically.  Exquisitely suited to this situation (even if an advanced method could do better).  Yeah, I guess that makes that entire paragraph of mine look a bit silly...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6595&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p167111"></a>
				<b class="postauthor">bazz</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167111">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167111&amp;sid=9a8847afd770cea942164eb41ea242ae#p167111"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2016 10:53 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4992_1376957212.gif" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Sep 02, 2011 8:34 pm<br /><b>Posts:</b> 476
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">So, in order to keep this thread well-focused on the new format as a whole and NOT just the streaming component, let's start talking about the overall format.<br /><br />==== RIFF Chunk Format<br />I've been well-advised on #botb by blaze_pascal to incorporate a <strong>RIFF chunk format</strong> for easy parsing and modularity. <br /><br />ie &quot;you can regard chunks that you aren't interested in as black boxes&quot;<br />'to get &quot;past&quot; a riff chunk you just need to read the header and then jump &lt;length&gt; bytes'<br /><br />I've also been told to include <strong>version info</strong> for obvious reasons, and in the decoding code to &quot;upscale&quot; old versions to newer versions like so:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">switch (version)<br />{<br />&nbsp; case VERSION1: &lt;convert version 1 to version 2&gt;;<br />&nbsp; case VERSION2: &lt;convert version 2 to version 3&gt;;<br />&nbsp; case &#91;...&#93;<br />}<br /><br />// notice there is no break statement.<br /></div><br /><br />I can agree with that. <br /><br />I'd like to further document the different chunks briefly. Let me just summarize what I think a bare-bones necessity would be:<br /><ul><li> Dump Info (title, name, etc. -- fields similarly found in <a href="http://vspcplay.raphnet.net/spc_file_format.txt" class="postlink">orig. SPC format</a>) The &quot;what-dumped-me&quot; AKA emulator field would now be a string for <a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=14011#p167093" class="postlink">aforementioned reasons</a>. Also considering supporting Unicode, and unicode-16 at that, because I find it easiest / most well-supported.</li><li> SPC State (same fields as found in orig. SPC format)</li><li> Stream data (if present) - in <a href="https://en.wikipedia.org/wiki/Run-length_encoding" class="postlink">RLE</a> if applicable.</li></ul><br />==== Regarding Stream &quot;Export&quot;<br /><br />now regarding stream data -- let us briefly concern ourselves with the possibility that the &quot;stream log&quot; could contain non-brr-stream data (bad example: &quot;change song&quot; engine command) -- Or perhaps there are other commands being sent on non-brr-streaming songs that had never been recorded! This sounds like a rare but possible exception.<br /><br />Because of this potential issue, my paranoia, perhaps credibly so - I believe the SPC Exporter should have a &quot;stream-dumping&quot; boolean. It's simply user-configurable -- IMO with a default of &quot;always-off&quot;  -- I'm just afraid of seeing auxiliary data &quot;streamed&quot; that's misc. engine commands.. Although this could be at times desired to be streaming.<br /><br />====<br /><br />I hope y'all like what I'm cooking!</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://wiki.superfamicom.org/snes/show/HomePage#bazzs_tutorials_10" class="postlink">SNES Tutorials (WLA DX)</a><br /><a href="http://www.cs.umb.edu/~bazz/snes/cartridges/lorom.html#intro" class="postlink">SNES Memory Mapping Tutorial</a> (Universal / LoROM) -- By Universal I introduce how memory mapping works, rather than just provide a LoROM map.<br /><a href="http://snestracker.club/" class="postlink">SNES Tracker (WIP)</a> - Music/SFX composition tool / SPC Debugger</div>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=4992&amp;sid=9a8847afd770cea942164eb41ea242ae">bazz</a> on Tue Mar 29, 2016 9:08 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4992&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p167124"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167124">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167124&amp;sid=9a8847afd770cea942164eb41ea242ae#p167124"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2016 2:00 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38_1542836384.png" width="60" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 7656<br /><b>Location:</b> Chexbres, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">So here's the key to a much better format: when ripping the music track, log all the values read from $f4-f7 on the SMP to the end of the file. Remove the data for non-streaming tracks if you want (it'll compress down to nothing anyway), and leave it for streaming tracks. Timing of the accesses doesn't need to be logged, nor does the addresses. Just a linear stream of all bytes read, and then play back those accesses sequentially when playing the music. This can easily result in consistent playback because we have cycle-perfect timing of the SMP and DSP now. We ripped Tales' opening song in like 200KiB, whereas regular songs were the same ~68KiB of regular SPCs.</div><br />Very clever indeed! But how do you support infinite playback?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p167132"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167132">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167132&amp;sid=9a8847afd770cea942164eb41ea242ae#p167132"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2016 3:47 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1400
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; It's funny you mentioned WLA-DX .. I even switched once to ca65 and then *went back* to WLA DX. I think I am masochistic these days, which could probably be why I'm good at any of this stuff.<br /><br />You'd kind of have to be, yeah :P<br /><br />In bass:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">macro seek(offset) {<br />&nbsp; origin {offset}&amp;$3fffff&nbsp; //hirom<br />//origin ({offset}&amp;$7f0000) &gt;&gt; 1 | ({offset}&amp;$7fff)&nbsp; //lorom<br />&nbsp; base {offset}<br />}<br />seek($c00000)</div><br /><br />98% of mappings described in literally two lines of code in a macro. Yet you have the flexibility to implement vastly more complex mappers if you wanted (64MiB ROMs, MMC-based ROMs, etc.)<br /><br />I will never understand (nor want to) the complexity of mapping in WLA-DX.<br /><br />&gt; Who is &quot;we&quot;?<br /><br />The people on my forum that are heavily into SNES dev.<br /><br />&gt; Now I could get into further details of why I feel your better file format(s) or tool(s) did not gain popularity<br /><br />You don't have to, I already know the reason.<br /><br />&gt; for Streaming -- Why is it safe to assume no timing info needs to be logged? Isn't that making an assumption that all data being written is at the earliest possible moment? The assumption might suit a lot of test cases, or all of them, but this is definitely an assumption! Unless you school me.<br /><br />When you are emulating the SFM file, you're producing the timing and adressing information again. The bytes written to $f4-f7 that are logged act like an assembly line. It doesn't matter how fast or slow that line moves, so long as the bytes come out the other end in the same order, and they will as long as both the recorder and player have correct timing.<br /><br />Emulator movie files work on the same principle: they are only a linear stream of 1 = pressed / 0 = clear bits recorded for each time the emulator polls input. So you can record a movie file that can be used to perfectly play back a video game with only 12-bits per frame, or 90-bytes a second, provided you have the original ROM for playback. SFM is the same, SFM is effectively the &quot;original ROM for music playback.&quot;<br /><br />&gt; I don't see how the traditional SPC logging of this information doesn't already have this covered<br /><br />SPC didn't know about the required state in the beginning. The existing rips are missing the information. Adding a new emulator-specific section to log new fields is not a solution. That's basically making another new format and calling it SPC still. You'll spend the rest of time trying to replace older SPC rips with better, newer ones; and trying to get people to use newer SPC players that support the new state.<br /><br />&gt; the minimum that SPC already provides seems sufficient and relieves us of additional complexity to the format.<br />&gt; Can you agree with me to leave out emulator-specific state and just leave in traditional SPC state, namely DSP vals, CPU reg vals, and RAM snapshot.<br /><br />It's not sufficient. It's not a full state capture. It may not cause any bugs in playback, but it might. It might not result in two different players producing different output (because they assume different values for the undefined state), but it might.<br /><br />&gt; Of course, even if I/we make a new format, SNES Tracker will support SPC as well!<br /><br />Right, everyone will support SPC because that's the format that everything's already in.<br /><br />And that's why everyone will keep using SPC.<br /><br />And that's why iNES 1.0 will still be the predominant file format in 2116 for NES ROMs.<br /><br />See? I told you I understood this :)<br /><br />&gt; I didn't know SNSF required a whole-system emulation.<br /><br />It's basically the original SNES ROM. They just go in and hack out as much as humanly possible, and patch some of the code. So the reset vector jumps to the song player as soon as possible with a small patch. Then they kill out everything not used.<br /><br />It's clever, but SFM is a much better way of doing it. Especially because it doesn't require someone with ROM hacking skills to create. And because you don't have to emulate the SNES CPU as well.<br /><br />&gt; I do wonder if it would take more or less space to log timestamped writes instead of bare reads<br /><br />No matter the case, timestamps wouldn't save you at all. If the ripper and player don't have the same opcode timing, it will fall apart during playback. But again, it's a non-issue. We know the exact cycle timing of every instruction on the SMP and DSP, thanks to blargg. It has all been verified (although blargg's SMP core has errors, so you'd not want to use that.)<br /><br />&gt; Yeah, I planned that.<br /><br />I was going to point out that it seemed a bit immature to associate your software with venereal diseases, but then it dawned on me that the C++ standard library's namespace is &quot;std&quot;, so ...<br /><br />&gt; Of course, after a format is defined, someone like Byuu would be most fit for writing in the new SPC export feature, while someone like me could write the new SPC Import feature, and then we'd have a working prototype.<br /><br />I gave up on it over the internal state serialization issue.<br /><br />They say perfection is the enemy of good, but that's what got us iNES, IPS, SPC, etc in the first place.<br /><br />I don't want to be the guy responsible for over-looking some detail that ends up requiring everyone to replace SFM with some newer, better format ten years down the line. Or much, much worse ... the format everyone says is &quot;good enough&quot; and just groans about the problem(s) it has.<br /><br />&gt; doing a &quot;value,repetitions&quot; pattern could be efficient. But compared to real compression solutions, this might be a joke.<br /><br />Correct. The data will be very highly repetitive. Even in the case of ripping Tales' streaming opening song, compression helps immensely. Amateur hour compression like RLE won't hold a candle to even something as simple as ZIP.<br /><br />And the biggest space savings in SNES music is that the sound player engine and samples are 95% identical between songs. This is why they use solid archivers like RAR for SPCs. It's better to just leave compression to better tools for the job. And when an even better compression comes along, you can switch to it without having to throw out your existing format.<br /><br />&gt; I hope y'all like what I'm cooking!<br /><br />I don't mind you playing around with the idea. Maybe you'll come up with some new ideas I like :)<br /><br />But I want to stress two things. First, my original warning: you will <em>never</em> gain any kind of serious adoption of your format, no matter how amazingly awesome it is. Second, I'm not planning to work on this now, so you would have to patch bsnes yourself to rip into your format, sorry. I am totally swamped with work as always.<br /><br />&gt; Very clever indeed! But how do you support infinite playback?<br /><br />I've never seen a streaming game that has infinite playback.<br /><br />Non-streaming games won't need it. Just like how infinite playback SPCs right now work, you'd return #$00 from reads from $f4-f7 once the stream log runs out (in this case, it wouldn't exist, so that'd be immediately.)<br /><br />But even if we contrived some example of an infinite streaming song, it would eventually loop, so the format could encode its own &quot;after X samples are decoded, seek back to sample Y&quot; to form a perfect, clean loop just like MSU1 PCM files do.<br /><br />The only way you could intentionally break this would be to create a truly irrational format (pardon the pun ... you'll see) by doing something like streaming the computed bits of pi on an endless loop. Which, I don't really care about silly cases that don't exist, and won't exist outside of intentionally trying to break the format :P</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p167134"></a>
				<b class="postauthor">Ramsis</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167134">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167134&amp;sid=9a8847afd770cea942164eb41ea242ae#p167134"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2016 4:31 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5345_1429818722.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jul 01, 2012 6:44 am<br /><b>Posts:</b> 341<br /><b>Location:</b> Lion's den :3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">SPC is complete and utter shit. But it was the first out the gate, and no amount of improvements will ever convince anyone to switch. See: IPS, CHT, SMC, ZIP, WLA-DX, etc.</div><br />The overall implication of this statement is simply not true. I know a lot of ROM hackers (myself included) who were early adopters of UPS/BPS, headerless ROM images, game folders etc. I admit those people may still be a minority to this day, but the numbers are clearly increasing.<br /><br />As for the constant bashing of WLA DX, though I won't even bother defending it, I want to say that for my needs as a SNES developer, there's just no alternative at the current time. Also, if you don't like any of WLA DX's features and/or the current implementation of a given feature, head over <a href="https://github.com/vhelin/wla-dx" class="postlink">here</a> and file an issue, please. Constant bitching about it won't help improve the software, anyway. <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Some of my projects:<br /><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=12317" class="postlink">Furry RPG!</a><br /><a href="http://www.manuloewe.de/main/index.php?/pages/snespowerpak.html" class="postlink">Unofficial SNES PowerPak firmware</a><br />(See my <a href="https://github.com/Ramsis-SNES/" class="postlink">GitHub profile</a> for more)<br /></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5345&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p167153"></a>
				<b class="postauthor">bazz</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167153">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167153&amp;sid=9a8847afd770cea942164eb41ea242ae#p167153"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2016 7:44 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4992_1376957212.gif" width="100" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Sep 02, 2011 8:34 pm<br /><b>Posts:</b> 476
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">Adding a new emulator-specific section to log new fields is not a solution.<br /></div><br /><br />Maybe not, but I'm not done assessing the situation.<br /><br />This is undoubtedly less efficient than standardizing the new state fields -- BUT let's talk about if we didn't -- I can see a major emulator coming out with their own RIFF-chunk (optional) to convey their emulator-specific SPC state information. Any player's that don't recognize it can simply skip over it. That would leave us with &quot;current-spc-playback&quot; functionality or better playback for players that can recognize and import the emulator-specific data. And, since it's completely optional to include - if this turns out to be useless or not well-implemented, people can leave it out of the file anyways! That would still give us a better organized SPC file format.<br /><br />Now this would be a BAD solution because that means any emulator needs to know about all these different-emulator-specific RIFF chunks if they want to gain the added state-info. Obviously, standardizing the fields would be the REAL solution -- but who's going to get all the SNES APU emulator developoopers together to conform on that level?<br /><br /><br /><br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">but we got bogged down because a true state capture has internal variables, and different emulators will want to name those fields differently (they definitely don't have official names.) <br /></div><br /><br />How many different major APU emulators in use are there? I expect the answer to be very small, and let's also talk about how many are cycle-accurate.<br /><br />Could you imagine getting these developers to discuss together the kinds of additional state their emulators would use for a proper SPC save-state? It is possible we could identify similar components and then give them official names to include in a newer format.<br /><br />But that sounds like so much work, while at the same time - all of these emulators seem to play regular SPC without the additional state just fine.<br /><br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">Some emulators won't even support certain state fields.<br /></div><br /><br />That's normal. No problem, no harm done.<br /><br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">others may require new ones not yet known for a perfect capture.<br /></div><br /><br />well if that happened, they wouldn't be able to play any regular SPC file either (or at least not perfectly), so no harm done. -- this new format would at least give them A CHANCE to play perfectly:<br /><br />so you come up with a new version with the new field. if this &quot;emulator-that-requires-new-field&quot; is used to open a new-style SPC, it would simply be able to perfectly play the version that includes the new field, or play imperfectly (or not play) the older versions of the format (including current SPC format). Again, this is a BETTER compatibility situation than simply using the old SPC-format.<br /><br /><br />and yet, standardization in the SNES community?!?! haha -- yeah right. I mean, it's do-able. But not on my watch.<br /><br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">We know the exact cycle timing of every instruction on the SMP and DSP, thanks to blargg. It has all been verified (although blargg's SMP core has errors, so you'd not want to use that.)<br /></div><br /><br />Are the errors you talk about in Blargg's core documented? Can you provide reference to an error free core. The thing I like about Blargg's core is that it also has a &quot;Fast&quot; aka &quot;good-for-slower-computers&quot; implementation - I would hope a referenced core does as well.<br /><br />The reason I want reference(s) is because I DO use Blargg's core in Snes Tracker currently, and it's doing great I have no complaints. I feel it's good enough. But it would nice to know where the next step forward might be in case I need to ditch this emulator for a better one. Ideally, SNES Tracker will have APU emulator abstraction anyways, so that drivers for different APU emulators can be made.<br /><br />One of the concerns is that I require a lot of read/write access to a lot of emulator internals, and generally modifications to the emulator itself are required to generate the product I'm interested in. For instance, to Blargg's APU emulator, I added code to use libgme_M's new &quot;report&quot; facility to indicate all locations of read/write/execute/echo region/BRR reads -- that's how the memory window is generated. I'm not sure how best to &quot;take in&quot; new APU emulators and add these features as transparently as possible, so that I could keep up with version improvements potentially.<br /><br />Then there's the fact that SNES Tracker (Debugger) may arbitrarily modify any RAM / DSP etc -- I seem to have been able to pull this off (lol) in a multi-threaded environment, but I'm not sure how that worked out.... I'm using SDL which is calling the APU emulator to produce new samples from an audio thread, and yet I'm somehow able to *I ASSUME, without error* modify freely!! At the very least, I am HAPPY with the results. lol &lt;--&gt; I am sure I spawned death in the eyes of certain engineers at my lack of attention to the cross-thread activity, but I'm HAPPY -- let's see how this pans out.<br /><br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">you will <em>never</em> gain any kind of serious adoption of your format, no matter how amazingly awesome it is. <br /></div><br /><br />I don't care if anyone adopts my format. Having created an answer to &quot;SPC is crap&quot; is enough for me.<br /><br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">you would have to patch bsnes yourself to rip into your format.<br /></div><br /><br />What is the minimum version of bsnes I can work with?? As you know, I have my fork that I'm curious I can use -- based off  v073u1. I'd rather not use if the APU emu is outdated. <!-- m --><a class="postlink" href="https://github.com/bazzinotti/bsnes-classic">https://github.com/bazzinotti/bsnes-classic</a><!-- m --><br /><br />Having said that, I'm probably *NOT* going to implement stream dumping to an emulator, since that goes way-off-track for my main goal, creating SNES Tracker!! If some other people get involved, I'm more likely to help with a new format.<br /><br />Yeah, I'm definitely not going to do it. If someone else were to do it, they could get in touch with me and we could put it all together - but my program *does* use Blargg's SMP core which Byuu already stated has errors -- meaning that if it's truly not fit for streaming (which honestly, it MIGHT still be) -- it would mean that I couldn't use STD to test the SPC's that stream anyways, until incorporating a more accurate SPC emu into it. And of course, I mean as a driver!!<br /><br />EDIT:<br /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">&gt; doing a &quot;value,repetitions&quot; pattern could be efficient. But compared to real compression solutions, this might be a joke.<br /><br />Correct. The data will be very highly repetitive. Even in the case of ripping Tales' streaming opening song, compression helps immensely. Amateur hour compression like RLE won't hold a candle to even something as simple as ZIP.<br /><br />And the biggest space savings in SNES music is that the sound player engine and samples are 95% identical between songs. This is why they use solid archivers like RAR for SPCs. It's better to just leave compression to better tools for the job. And when an even better compression comes along, you can switch to it without having to throw out your existing format.<br /></div><br /><br />I understand why &quot;they&quot; compress whole SPC archives -- but what are you suggesting for a single SPC file. You can't be suggesting to compress single files as zip as well? I'm thinking to use RLE for single files, and RAR for archives like they are already. Don't you agree?</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<span class="gensmall"><b>File comment:</b> SNES Tracker Debugger (STD) memory window</span><br />
		
			<a href="./download/file.php?id=5348&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;mode=view"><img src="./download/file.php?id=5348&amp;t=1&amp;sid=9a8847afd770cea942164eb41ea242ae" alt="Screenshot_2016-03-29_10-29-17.png" /></a><br />
			<span class="gensmall">Screenshot_2016-03-29_10-29-17.png [ 27.45 KiB | Viewed 3688 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					
						<div class="postbody"><br />_________________<br /><a href="http://wiki.superfamicom.org/snes/show/HomePage#bazzs_tutorials_10" class="postlink">SNES Tutorials (WLA DX)</a><br /><a href="http://www.cs.umb.edu/~bazz/snes/cartridges/lorom.html#intro" class="postlink">SNES Memory Mapping Tutorial</a> (Universal / LoROM) -- By Universal I introduce how memory mapping works, rather than just provide a LoROM map.<br /><a href="http://snestracker.club/" class="postlink">SNES Tracker (WIP)</a> - Music/SFX composition tool / SPC Debugger</div>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4992&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p167168"></a>
				<b class="postauthor">Ramsis</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167168">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167168&amp;sid=9a8847afd770cea942164eb41ea242ae#p167168"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2016 11:28 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5345_1429818722.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jul 01, 2012 6:44 am<br /><b>Posts:</b> 341<br /><b>Location:</b> Lion's den :3
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">bazz wrote:</div><div class="quotecontent">I don't care if anyone adopts my format. Having created an answer to &quot;SPC is crap&quot; is enough for me.</div><br />Good on you. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Some of my projects:<br /><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=12317" class="postlink">Furry RPG!</a><br /><a href="http://www.manuloewe.de/main/index.php?/pages/snespowerpak.html" class="postlink">Unofficial SNES PowerPak firmware</a><br />(See my <a href="https://github.com/Ramsis-SNES/" class="postlink">GitHub profile</a> for more)<br /></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5345&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p167169"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p167169">Re: SPC File Format looks like S***</a></div><div style="float: right;"><a href="./viewtopic.php?p=167169&amp;sid=9a8847afd770cea942164eb41ea242ae#p167169"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2016 11:46 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1400
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; I know a lot of ROM hackers (myself included) who were early adopters of UPS/BPS, headerless ROM images, game folders etc. I admit those people may still be a minority to this day, but the numbers are clearly increasing.<br /><br />Not the ones I've seen. I won't name the person, but I even once had a person I helped out probably a half-dozen times with rather significant tasks say to me, &quot;if you help me hack this next game, then I'll use BPS for the patch format instead of IPS!&quot;, which I found quite crass. Especially considering I've never asked that person for anything in return before.<br /><br />I am hopeful that you're right though and that BPS picks up more steam. It's already five years old. RHDN still hosts beat v01 despite that being ancient. And see for example this from two months ago:<br /><!-- m --><a class="postlink" href="http://www.insanedifficulty.com/board/index.php?/topic/7296-bps-and-you-a-superior-patching-experience/">http://www.insanedifficulty.com/board/i ... xperience/</a><!-- m --><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">All I'll say is that oftentimes when I see stuff like this, it amounts to little more than a sales pitch. It could be that BPS is indeed better, but the way I -- and a lot of people, really -- look at this is like so: Everyone uses IPS. No one has switched. IPS remains (to my knowledge) the most used patching method for mods right now. If there really is a better alternative, why isn't it used? Most likely because there isn't a problem with IPS, and until there is, any other &quot;new&quot; or &quot;improved&quot; patching methods are just about pointless.</div><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I've never had a problem with IPS. So i'm going to continue using it.</div><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I've used IPS and never had trouble with it. I won't be switching anytime soon. Begone, peasant.</div><br /><br />And that's after repeated attempts to explain the benefits. People don't <em>want</em> better tools.<br /><br />And then:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So if you want to use a 6-letter name patch for Chrono Trigger on top of another ROM mod (translation or difficulty mod) then you can't do that if both patches are BPS-only.</div><br /><br />Which is definitely wrong. You can stack BPS patches just like IPS, you just have to ignore the checksums when you do because it's not possible to store a checksum for a file in an unknown state.<br /><br />&gt; As for the constant bashing of WLA DX, though I won't even bother defending it, I want to say that for my needs as a SNES developer, there's just no alternative at the current time.<br /><br />I've no interest in trying to convert people to a different assembler. Basically, nine out of every ten people who write large amounts of SNES ASM end up writing their own SNES assemblers anyway.<br /><br />&gt; Also, if you don't like any of WLA DX's features and/or the current implementation of a given feature, head over here and file an issue, please.<br /><br />I wrote my own instead. I do that a lot. See: bsnes, BPS, SFM, etc ;)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>4</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 51 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;start=45">4</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=14011&amp;sid=9a8847afd770cea942164eb41ea242ae&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=9a8847afd770cea942164eb41ea242ae">Board index</a> &#187; <a href="./viewforum.php?f=25&amp;sid=9a8847afd770cea942164eb41ea242ae">Other</a> &#187; <a href="./viewforum.php?f=23&amp;sid=9a8847afd770cea942164eb41ea242ae">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12&amp;sid=9a8847afd770cea942164eb41ea242ae">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php?sid=9a8847afd770cea942164eb41ea242ae"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="14011" />
<input type="hidden" name="sf" value="msgonly" />
<input type="hidden" name="sid" value="9a8847afd770cea942164eb41ea242ae" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php?sid=9a8847afd770cea942164eb41ea242ae" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Multi-Cart Commission ?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Multi-Cart Commission ?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=7184">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=7184</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Outinthedark</b> [ Mon Nov 22, 2010 1:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Multi-Cart Commission ?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I was directed here thanks to NA. I am looking for someone to put together a one off personal use multi cart. If this is something anyone can do here please let me know. Turn around time would be before Christmas.
<br />
<br />If I am barking up the wrong tree please let me know too so I can figure out another solution.
<br />
<br />Thanks in advance!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Nov 22, 2010 1:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You need the software, the hardware (cart), or both?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Nov 22, 2010 5:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What games are they? Are they games from the launch era, 24-40 KiB in size (easy), or are they newer games?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Outinthedark</b> [ Mon Nov 22, 2010 10:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Not sure what you mean about software, but the games are licensed MM games I own. I would want a complete cart with a launcher for all 6 of the games.
<br />
<br />According to just a quick search on a rom site the smallest one is 78k and the largest is 255k. I'm guessing that will be a problem.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Nov 22, 2010 10:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />tl;dr: Not easy.
<br />
<br />Zipped size doesn't count; unzipped size counts. The games you name are 128 KiB to 512 KiB in size. Because the NES can't directly use this much memory, the games contain mapper circuitry to "turn the page", so to speak. A <a href="http://wiki.nesdev.com/w/index.php/Mapper" class="postlink">mapper</a> translates addresses between the CPU and PPU on one side and the ROM chips on the other. The six Mega Man games have essentially four different mappers:
<br /><ul><li>UNROM (Mega Man) </li><li>MMC1 with CHR RAM (Mega Man 2) </li><li>MMC3 with CHR ROM (Mega Man 3 and 5) </li><li>MMC3 with CHR RAM (Mega Man 4 and 6) </li></ul>
<br />Making a multicart of these would require the circuitry for UNROM, MMC1, MMC3, and additional circuitry to switch among the games. Or it would require reprogramming all the games to use MMC3 instead of what they currently use, and it would still need additional circuitry to switch from one game to the next.
<br />
<br />What "thefox" meant by "software" is the program that takes several ROMs, adds a launcher, and outputs a multicart ROM. For example, if you were trying to make a multicart of The Legend of Zelda plus three early-NES-era games, you'd use <a href="http://wiki.nesdev.com/w/index.php/Forbidden_Four" class="postlink">Forbidden Four</a>. But if you <em>really</em> want to make a multicart of these, make it for Game Boy Advance using <a href="http://www.pocketnes.org/" class="postlink">PocketNES</a>, an NES emulator for GBA. Such a multicart will play on GBA, GBA SP, GameCube, Game Boy micro, DS, and DS Lite.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Mon Nov 22, 2010 10:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm afraid it's going to be quite hard. Megaman 1 is UNROM, Megaman 2 is MMC1, and the rest of the games are MMC3. Some of them use CHR-RAM, some use CHR-ROM. The combined size of the ROMs is over 2MB.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Outinthedark</b> [ Mon Nov 22, 2010 11:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think I gathered about half what you guys said. I have not looked into it much at all so a majority went over my head but the consensus is it wont work.
<br />
<br />In my thread on NA this auction was mentioned...
<br />
<br /><!-- m --><a class="postlink" href="http://cgi.ebay.com/ws/eBayISAPI.dll?ViewItem&amp;hash=item415438559c%3D&amp;item=280585852316&amp;nma=true&amp;pt=LH_DefaultDomain_0&amp;rt=nc&amp;si=TBedCwjLOOdwUrJ2afBILDhqrbo%253D">http://cgi.ebay.com/ws/eBayISAPI.dll?Vi ... hqrbo%253D</a><!-- m -->
<br />
<br />Are the Japanese roms any different?
<br />
<br />And this multicart needs to be for NES, unless the other solution you mentioned for GBA would somehow work on the NES.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Nov 22, 2010 12:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Outinthedark wrote:</div><div class="quotecontent">In my thread on NA this auction was mentioned...<br /><br />[eBay listing for "Rockman 6-in-1"]<br /><br />Are the Japanese roms any different?</div>
<br />Not really; Capcom used Nintendo's mappers, unlike some other Famicom game developers that used their own. But Chinese pirates have the time to mapper-hack UNROM and MMC1 games to work on MMC3 (which is straightforward yet time-consuming), and they have the resources to produce the circuitry (called the "submapper") that switches between games.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Nov 22, 2010 3:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />After mapper-hacking Mega Man 1 and 2 to work with the MMC3 (tedious, but definitely possible), wouldn't it be possible to use something simple like a 74161 for selecting the games?
<br />
<br />Here are the ROM sizes for each game:
<br />
<br />Mega Man 1: 128KB PRG, 0KB CHR;
<br />Mega Man 2: 256KB PRG, 0KB CHR;
<br />Mega Man 3: 256KB PRG, 128KB CHR;
<br />Mega Man 4: 512KB PRG, 0KB CHR;
<br />Mega Man 5: 256KB PRG, 256KB CHR;
<br />Mega Man 6: 512KB PRG, 0KB CHR;
<br />
<br />You could use 2 1MB EPROMs for the PRGs, one for Mega Man 4 and 6, and the other for 1 (shares the 256KB with the menu), 2, 3 and 5. The 4 bits that a 74161 can store are enough to select between the two chips (1 bit), a bank within that chip (2 bits) and between the CHR-ROM and CHR-RAM chips. Maybe the selection between CHR-ROM and CHR-RAM won't even need a dedicated bit if the games ordered in a certain way, so there will still be 1 free bit.
<br />
<br />A 512KB EPROM could be used for CHR-ROM, and since only 2 games use it and each one is in a different PRG EPROM, the bit that selects between those can be used to select this too.
<br />
<br />The problem would be booting up to a known state (so that the menu is the first thing to run) and preventing the games from overwriting the 74161 settings once they start making mapper writes. I figured that since there are revisions of the MMC3 that boot up to known states, and since none of the Mega Man games have extra RAM, the PRG-RAM protect bits of the MMC3 could be used to force the initial state of the 74161 and to prevent future writes to it.
<br />
<br />I know that there are a lot of details missing, but this might actually be doable, don't you think?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Mon Nov 22, 2010 3:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">I know that there are a lot of details missing, but this might actually be doable, don't you think?</div>
<br />
<br />Yeah, quite a substantial amount of work for a one-off item though.
<br />
<br />I have a solution that is easier, but you're looking at $145+ in parts costs alone.  Take a PowerPak, hack the boot ROM so it doesn't look as ugly, put it in a new case with the label you want.  Done.
<br />
<br />I've been kinda wanting to make a better PowerPak system ROM, but my time for hobbies is all used up by my own stuff.  I'd do it professionally maybe, but it might not be all that cheap.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Tue Nov 23, 2010 5:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent"><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">I know that there are a lot of details missing, but this might actually be doable, don't you think?</div><br /><br />Yeah, quite a substantial amount of work for a one-off item though.<br /><br />I have a solution that is easier, but you're looking at $145+ in parts costs alone.  Take a PowerPak, hack the boot ROM so it doesn't look as ugly, put it in a new case with the label you want.  Done.<br /><br />I've been kinda wanting to make a better PowerPak system ROM, but my time for hobbies is all used up by my own stuff.  I'd do it professionally maybe, but it might not be all that cheap.</div>
<br />Yeah, you wouldn't even need to flash the bootrom really, since most of the magic happens in the 1K modules that are loaded from CF. Unfortunately it would show a POWERPAK text very briefly because that's included in the default bootrom (at least 1.0).
<br />
<br />As for replacing the system ROM, if you mean replacing the menu system etc, yeah that would be cool. Like I said it's also possible to do it with just new files on the CF. I have most of that stuff reverse engineered, although I'm not sure if bunnyboy would want me to release it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Nov 23, 2010 5:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">I have most of that stuff reverse engineered, although I'm not sure if bunnyboy would want me to release it.</div>
<br />Bunnyboy has benefited from work other people have done for the PowerPak, like mappers that were even included in the official package. I don't think he has anything to lose if a better menu is made.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Tue Nov 23, 2010 8:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">I have most of that stuff reverse engineered, although I'm not sure if bunnyboy would want me to release it.</div><br />Bunnyboy has benefited from work other people have done for the PowerPak, like mappers that were even included in the official package. I don't think he has anything to lose if a better menu is made.</div>
<br />
<br />I guess for me, one issue I see is that essentially would be a hack, and I like to write code I can reuse.  With no sources, no developer docs, no clear software license, sorta implies it's proprietary.  I don't know if software can be retroactively licensed, but if so then I guess that could affect how I'm able to reuse my own code later.
<br />
<br />thefox: One thing that I was curious to look into was to get actual file creation/saving to work.  Probably not worth my time though since I don't particularly want to use CompactFlash in my own stuff, using SD instead where the NES doesn't even access it directly.  On the easier side of things, it definitely could use a lot of menu improvements.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Tue Nov 23, 2010 9:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">thefox: One thing that I was curious to look into was to get actual file creation/saving to work.  Probably not worth my time though since I don't particularly want to use CompactFlash in my own stuff, using SD instead where the NES doesn't even access it directly.  On the easier side of things, it definitely could use a lot of menu improvements.</div>
<br />The FAT32 part is quite messy, I can tell you that much. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> If I was to add file creation I would probably write it from scratch... would probably take less time than reverse engineering the existing code AND adding those features in it. I actually tried to use some C FAT32 library with PowerPak just for the heck of it, but couldn't get it to work and stopped trying after a while since debugging was a pain.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Tue Nov 23, 2010 10:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />FAT32 sounds like a huge kludge in general.  I thought of a hack of my own to get around it (what I planned to resort to if I have trouble with FAT in my design) - custom file system.  Portable software used with a transfer cable would be able to translate it to whatever filesystem is native, (relatively) effortlessly during normal transfer operations.
<br />
<br />And I think the same theory of operation should work with the PowerPak - however you would want to make a blank file to use a disk image, rather than using the whole memory card in the custom format.  If that would work OK.  I kinda wondered myself once I found out that PowerPak can't create save files, why there isn't just a large "saves.bin" file or something that it would use for that purpose.  It wouldn't be too hard then to have a C program to run on PC, to extract/add files/format/resize the disk image.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
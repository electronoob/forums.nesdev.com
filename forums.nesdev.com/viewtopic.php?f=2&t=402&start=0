<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Split-Screen Scrolling on the MMC3</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NESdev" href="http://forums.nesdev.com/feed.php?f=2" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Split-Screen Scrolling on the MMC3" href="http://forums.nesdev.com/feed.php?f=2&amp;t=402" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=2&amp;t=402';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sun Sep 21, 2014 3:20 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=2&amp;t=402">Split-Screen Scrolling on the MMC3</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=402"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 23 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=402&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=2&amp;t=402&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=2&amp;t=402&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=2&amp;t=402&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=2&amp;t=402&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p2728"></a>
				<b class="postauthor">beneficii</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2728">Split-Screen Scrolling on the MMC3</a></div><div style="float: right;"><a href="./viewtopic.php?p=2728#p2728"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Jul 11, 2005 11:30 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">How exactly is split-screen scrolling done on the MMC3?  I have tried out some code:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;NMI<br />nmi:<br />&nbsp; &nbsp;sei<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;txa<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;tya<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta $2006<br />&nbsp; &nbsp;sta $2006<br />&nbsp; &nbsp;lda #$01<br />&nbsp; &nbsp;sta &lt;$80<br />&nbsp; &nbsp;jsr text_code<br />&nbsp; &nbsp;lda &lt;$1a<br />&nbsp; &nbsp;bne scroll<br /><br />endnmi:<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta &lt;$80<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;tay<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;rti<br /><br />scroll:<br />&nbsp; &nbsp;lda &lt;$1b<br />&nbsp; &nbsp;ora &lt;$17<br />&nbsp; &nbsp;beq goone<br />&nbsp; &nbsp;jmp endnmi<br /><br />goone:<br />&nbsp; &nbsp;lda &lt;$82<br />&nbsp; &nbsp;bne endnmi<br />&nbsp; &nbsp;lda #$c1<br />&nbsp; &nbsp;sta $c000<br />&nbsp; &nbsp;sta $c001<br />&nbsp; &nbsp;sta $e001<br />&nbsp; &nbsp;lda #$01<br />&nbsp; &nbsp;sta &lt;$81<br />&nbsp; &nbsp;sta &lt;$82<br />&nbsp; &nbsp;cli<br />&nbsp; &nbsp;jmp endnmi<br /><br />;IRQ/BRK<br />irq:<br />&nbsp; &nbsp;sei<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;tya<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;txa<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;lda &lt;$81<br />&nbsp; &nbsp;beq endirq<br />&nbsp; &nbsp;sta $e001<br />&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;lda #00<br />&nbsp; &nbsp;sta $2006<br />&nbsp; &nbsp;sta $2006<br />&nbsp; &nbsp;inc &lt;$30<br />&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;lda &lt;$30<br />&nbsp; &nbsp;sta $2005<br />&nbsp; &nbsp;sta $2005<br />&nbsp; &nbsp;sta $e000<br />&nbsp; &nbsp;lda #00<br />&nbsp; &nbsp;sta &lt;$81<br />&nbsp; &nbsp;sta &lt;$82<br /><br />endirq:<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;tay<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;rti</div>
<br />
<br />Now, the screen <em>does</em> scroll properly, so I know the IRQ is executing, but the scrolling does not split-screen.  Now I did read Kevin's document on the MMC3, but that only talks about the IRQ and not how it relates to scrolling.  Right here:
<br />
<br /><!-- m --><a class="postlink" href="http://www.tripoint.org/kevtris/mappers/mmc3/">http://www.tripoint.org/kevtris/mappers/mmc3/</a><!-- m -->
<br />
<br />Perhaps somebody could tell me what I'm doing wrong and perhaps point me in the right direction?  Even better, could they correct my code?
<br />
<br />Thanks. ^_^</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p2736"></a>
				<b class="postauthor">Disch</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2736"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2736#p2736"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 8:56 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=33.png" width="65" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 10, 2004 6:47 pm<br /><b>Posts:</b> 1694
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Doesn't look like you're doing anything wrong as far as MMC3 IRQs go.  Although I don't know why you're writing to $E001 in the IRQ routine (since you write to $E000 right after it)
<br />
<br />I'd assume you want to put a status bar or something at the bottom (something that doesn't scroll) based on your dual $2006 writes of 0.  So whatever you're scrolling to in the bottom half of the screen would be at the top of the nametable.  If that's the case, I would do something simple like this:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">LDA #$00<br />STA $2005&nbsp; ; clear fine X scroll<br />BIT $2002&nbsp; ; reset flip-flop &#40;another $2005 write would work too&#41;<br />STA $2006<br />STA $2006&nbsp; ; clear loopy_t and loopy_v&nbsp; &#40;start drawing at very top of nametable at ppu$2000&#41;<br /></div>
<br />
<br />Unless you time that to fit in HBlank, the first scanline will be distorted -- so probably have at least a scanline or two which is blank to prevent that disortion from being visible.
<br />
<br />Remember that dual $2005 writes WILL NOT change any vertical scrolling (except at frame start)-- you NEED to write to $2006 for split screen vertical scroll changes.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=33"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p2737"></a>
				<b class="postauthor">Guest</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2737"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2737#p2737"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 9:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah, I removed that part.  Still, I can't seem to get it to work.  I think one of my problems is that I don't really know how these IRQs cause split-screen scrolling, because of that, I really don't know what to do.  I'm just grasping at straws.
<br />
<br />Perhaps you could explain it or perhaps you could link me to a document on it?  I tried Kevin's document, which is recommended on this forum, but it does not really explain how to utilize the IRQs to cause split-screen scrolling.
<br />
<br />Thanks!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p2738"></a>
				<b class="postauthor">Disch</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2738"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2738#p2738"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 9:45 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=33.png" width="65" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 10, 2004 6:47 pm<br /><b>Posts:</b> 1694
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">well I could be more help if I knew what you were trying to do =P.  I mean you already are splitting the screen -- it just sounds like you're not scrolling like you want to (so this is more of a scroll question than an MMC3 question).
<br />
<br />The IRQs themselves don't cause the screen to split -- they just trigger an IRQ at the end of the desired scanline.  You still have to change the scroll values in your code by manipulating $2005/2006.
<br />
<br />Your code IS splitting the screen -- maybe it's not noticable because of how your nametables are set up, but it should be happening:
<br />
<br />- You're setting your screen to draw from ppu$2000 in your NMI routine (by the dual $2006 writes of 0)
<br />
<br />- You set up the MMC3 to trigger an IRQ at the end of scanline 194 (by writing $C1 to the IRQ reload)
<br />
<br />- Then in your IRQ routine, you reset the scroll so that it starts drawing at ppu$2000 again (by the dual $2006 writes of 0)
<br />
<br />- You scroll the bottom of the screen horizontally (but not vertically) by writing to $2005  (however you never seem to reset the fine scroll for the top half of the screen, so does the top half jitter?  Or do you write to $2005 elsewhere (like in text_code)?)
<br />
<br />I don't have any docs to recommend on the subject other than loopy's scrolling doc -- although I don't know if it'd be helpful for you.  Like I said if I knew what you were going for I might be able to help more.  But yeah -- it looks like you are splittnig the screen just fine.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=33"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p2740"></a>
				<b class="postauthor">Guest</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2740"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2740#p2740"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 10:02 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">- You scroll the bottom of the screen horizontally (but not vertically) by writing to $2005 (however you never seem to reset the fine scroll for the top half of the screen, so does the top half jitter? Or do you write to $2005 elsewhere (like in text_code)?) 
<br />
<br />What do you mean resetting the fine scroll for the top half of the screen?  In my latest code, I do write the scrolling I want for outside the status bar in the NMI, then in the IRQ I simply write zeroes to 2005 twice (so it won't scroll).  It still doesn't work.  When I run it in FCEUXD and open up the Name Table window, I see that the whole screen scrolls to the zero position.  Am I close to what I need to do?
<br />
<br />Also, how do I know how many scanlines I need to start at a particular location?  The IRQ can go up to FF, indicating that it will go through 256 scanlines, but I don't see how there can be that many scanlines.  Each screen has only 30 lines right?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p2743"></a>
				<b class="postauthor">Disch</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2743"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2743#p2743"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 10:41 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=33.png" width="65" height="75" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 10, 2004 6:47 pm<br /><b>Posts:</b> 1694
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Anonymous wrote:</div><div class="quotecontent">What do you mean resetting the fine scroll for the top half of the screen?</div><br /><br />The first $2005 write sets the fine horizontal scroll.  That is the <em>only</em> way to set the fine horizontal scroll.  If you change the fine H scroll for the bottom half of the screen, it will affect the top half of the screen in the next frame unless you do another $2005 write at the start of the frame to reset the fine H scroll.  I didn't see you doing that in the code you pasted.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">In my latest code, I do write the scrolling I want for outside the status bar in the NMI, then in the IRQ I simply write zeroes to 2005 twice (so it won't scroll).  It still doesn't work.</div><br /><br />If you want to scroll vertically, that won't work -- you'd need to write to $2006.  If you want to scroll horizontally, then $2005 writes alone should suffice.  But it sounds to me like you're just punching in random values and seeing what will work.<br /><br />Basically... how it works is like this:<br /><br />$2005 is used for scrolling.  You write to it in pairs of two... the first write sets the horizontal scroll (in pixels).  The second write sets the vertical scroll (in pixels).  Note that writes to $2005 do not actually change the PPU address (therefore coarse horizontal scroll effects do not appear until the start of the next scanline -- and vertical scroll effects do not appear until the start of the next frame).<br /><br />The second $2006 write actually sets the PPU address (it's commonly used for setting the address before writing to $2007, but that same address also determines scroll position).  If you want to change vertical scrolling mid-frame, you will NEED to manipulate $2006.  However if you don't want to disturb V scroll and just want to change H scroll midscreen (for example, like Super Mario Bros, or Castlevania, or Excitebike), then you should be just fine with only $2005 writes.<br /><br />How $2006 affects scrolling is kind of weird to explain -- if you want to know check out loopy's scrolling doc, as it lays it out fairly well (although it's somewhat weird to understand at first)<br /><br />Again... I could give you a more specific explaination if I knew what you were trying to do  :P.  All I know is that you want to split the screen and it's not working the way you want -- but your code IS splitting the screen so I can't tell you how to fix it unless you tell me what you're going for.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also, how do I know how many scanlines I need to start at a particular location?  The IRQ can go up to FF, indicating that it will go through 256 scanlines, but I don't see how there can be that many scanlines.  Each screen has only 30 lines right?</div>
<br />
<br />1 scanline = 1 row of pixels.  There are 240 visible scanlines per frame (although the top and bottom 8 are usually hidden on NTSC displays).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=33"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p2746"></a>
				<b class="postauthor">beneficii</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2746"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2746#p2746"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 10:58 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Disch wrote:</div><div class="quotecontent"><div class="quotetitle">Anonymous wrote:</div><div class="quotecontent">What do you mean resetting the fine scroll for the top half of the screen?</div><br /><br />The first $2005 write sets the fine horizontal scroll.  That is the <em>only</em> way to set the fine horizontal scroll.  If you change the fine H scroll for the bottom half of the screen, it will affect the top half of the screen in the next frame unless you do another $2005 write at the start of the frame to reset the fine H scroll.  I didn't see you doing that in the code you pasted.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">In my latest code, I do write the scrolling I want for outside the status bar in the NMI, then in the IRQ I simply write zeroes to 2005 twice (so it won't scroll).  It still doesn't work.</div><br /><br />If you want to scroll vertically, that won't work -- you'd need to write to $2006.  If you want to scroll horizontally, then $2005 writes alone should suffice.  But it sounds to me like you're just punching in random values and seeing what will work.<br /><br />Basically... how it works is like this:<br /><br />$2005 is used for scrolling.  You write to it in pairs of two... the first write sets the horizontal scroll (in pixels).  The second write sets the vertical scroll (in pixels).  Note that writes to $2005 do not actually change the PPU address (therefore coarse horizontal scroll effects do not appear until the start of the next scanline -- and vertical scroll effects do not appear until the start of the next frame).<br /><br />The second $2006 write actually sets the PPU address (it's commonly used for setting the address before writing to $2007, but that same address also determines scroll position).  If you want to change vertical scrolling mid-frame, you will NEED to manipulate $2006.  However if you don't want to disturb V scroll and just want to change H scroll midscreen (for example, like Super Mario Bros, or Castlevania, or Excitebike), then you should be just fine with only $2005 writes.<br /><br />How $2006 affects scrolling is kind of weird to explain -- if you want to know check out loopy's scrolling doc, as it lays it out fairly well (although it's somewhat weird to understand at first)<br /><br />Again... I could give you a more specific explaination if I knew what you were trying to do  <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />.  All I know is that you want to split the screen and it's not working the way you want -- but your code IS splitting the screen so I can't tell you how to fix it unless you tell me what you're going for.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also, how do I know how many scanlines I need to start at a particular location?  The IRQ can go up to FF, indicating that it will go through 256 scanlines, but I don't see how there can be that many scanlines.  Each screen has only 30 lines right?</div><br /><br />1 scanline = 1 row of pixels.  There are 240 visible scanlines per frame (although the top and bottom 8 are usually hidden on NTSC displays).</div>
<br />
<br />I have read loopy's document, but the way it's written just doesn't make much sense to me.  All it shows is a bunch of register writes that are mostly meaningless to me.  Perhaps it could explain why it's making those register writes, perhaps it can explain exactly what it's doing with each register writes, but the way it's doing it just isn't cutting it for me.
<br />
<br />Oh, by pixel!  Thanks!
<br />
<br />Here's what I'm trying to do:
<br />
<br />The picture I'm scrolling starts at 2800 (lower left nametable) and I'll just scroll it diagonally.  I then want a picture starting at 2000 (upper left nametable) and 6 tiles tall to be at the bottom 6 tiles of the display and not scrolling while the rest of the display (again, starting at 2800) does.  Perhaps through an example of implementing this I can come to understand.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p2752"></a>
				<b class="postauthor">beneficii</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2752"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2752#p2752"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 12:34 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Now don't get me wrong, I <em>can</em> implement basic scrolling.  I know to write the horz. byte first then the vert. byte second to 2005, etc.  What I don't understand very well is Loopy's document.
<br />
<br />I sorta know how 2006 fits in with the NMI, you write the address of the nametable you want to display minus 2000 into 2006.  Doing that also sets the origin for the scroll.  You gotta read from 2002 again to reset the bytes for 2005.
<br />
<br />But some things you mention, like coarse and fine scrolling and stuff like that, and also what exactly the IRQ does to prevent a whole part of the display from scrolling, is what's so confusing.  I mean, to do what I stated here:
<br />
<br />The picture I'm scrolling starts at 2800 (lower left nametable) and I'll just scroll it diagonally. I then want a picture starting at 2000 (upper left nametable) and 6 tiles tall to be at the bottom 6 tiles of the display and not scrolling while the rest of the display (again, starting at 2800) does. Perhaps through an example of implementing this I can come to understand.
<br />
<br />What do I need to do in the NMI (should I set the values of the part I want to scroll here to 2005/2006?  I know to set the MMC3 stuff here) <em>and</em> the IRQ (should I set the part I don't want to scroll here to 2005/2006?))?  What you've shown me does not seem to be enough information.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p2762"></a>
				<b class="postauthor" style="color: #AA0000">Memblers</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2762"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2762#p2762"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 2:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Site Admin</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=10.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 20, 2004 6:04 am<br /><b>Posts:</b> 2865<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">You may need to write in the order of $2006, $2005, $2005, $2006 to get the vertical scrolling set correctly after the screen splits.  Keep in mind that'd make the first $2005 write vertical.
<br />
<br />And also, the CPU disables IRQs automatically while the IRQ/NMI is being run.  So the SEI instruction can be dropped there.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=10" style="color: #AA0000;" class="username-coloured">Memblers</a> on Tue Jul 12, 2005 2:28 pm, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=10"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p2763"></a>
				<b class="postauthor">Guest</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2763"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2763#p2763"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 2:25 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, I wrote a simpler piece of code (in a new program).  Here it is:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">nmi:<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;txa<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;tya<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta $2006<br />&nbsp; &nbsp;sta $2006<br />&nbsp; &nbsp;inc &lt;$30<br />&nbsp; &nbsp;lda &lt;$30<br />&nbsp; &nbsp;cmp #$C0<br />&nbsp; &nbsp;bcs reset<br /><br />finishnmi:<br />&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta $2005<br />&nbsp; &nbsp;lda &lt;$30<br />&nbsp; &nbsp;sta $2005<br />&nbsp; &nbsp;lda #$c0<br />&nbsp; &nbsp;sta $c000<br />&nbsp; &nbsp;sta $c001<br />&nbsp; &nbsp;sta $e001<br />&nbsp; &nbsp;cli<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;tay<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;tax<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;rti<br /><br />reset:<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta &lt;$30<br />&nbsp; &nbsp;jmp finishnmi<br /><br />irq:<br />&nbsp; &nbsp;sei<br />&nbsp; &nbsp;sta $e000<br />&nbsp; &nbsp;pha<br />&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta $2005<br />&nbsp; &nbsp;sta $2005<br />&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;lda #$08<br />&nbsp; &nbsp;sta $2006<br />&nbsp; &nbsp;lda #$00<br />&nbsp; &nbsp;sta $2006<br />&nbsp; &nbsp;pla<br />&nbsp; &nbsp;rti</div>
<br />
<br />The problem is that it sets the whole display to what is specified in the IRQ.  It's like the IRQ takes precedence over the NMI for the whole screen.  Here's a download of the NES file so that you guys can take a look at it:
<br />
<br /><!-- m --><a class="postlink" href="http://www.freewebs.com/beneficii/scroll.nes">http://www.freewebs.com/beneficii/scroll.nes</a><!-- m -->
<br />
<br />The image that gets loaded into the $2000 name table is the one I want to scroll, and the one I load into the $2800 name table is the one I don't want to.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p2765"></a>
				<b class="postauthor">beneficii</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2765"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2765#p2765"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 2:43 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I ran a trace of the code. Almost immediately after CLI'ing (after one instruction after), the IRQ was executed 6 times in rapid succession, with only one instruction being executed at a time between IRQs.
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$E117:48&nbsp; &nbsp; &nbsp; &nbsp; PHA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:0A X:00 Y:C0 P:nvubdIzc&nbsp; &nbsp;;;;start of NMI<br />$E118:8A&nbsp; &nbsp; &nbsp; &nbsp; TXA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:0A X:00 Y:C0 P:nvubdIzc<br />$E119:48&nbsp; &nbsp; &nbsp; &nbsp; PHA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:00 X:00 Y:C0 P:nvubdIZc<br />$E11A:98&nbsp; &nbsp; &nbsp; &nbsp; TYA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:00 X:00 Y:C0 P:nvubdIZc<br />$E11B:48&nbsp; &nbsp; &nbsp; &nbsp; PHA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvubdIzc<br />$E11C:AD 02 20&nbsp; LDA $2002 = #$AA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:C0 X:00 Y:C0 P:NvubdIzc<br />$E11F:A9 00&nbsp; &nbsp; &nbsp;LDA #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:AA X:00 Y:C0 P:NvubdIzc<br />$E121:8D 06 20&nbsp; STA $2006 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E124:8D 06 20&nbsp; STA $2006 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E127:E6 30&nbsp; &nbsp; &nbsp;INC $30 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E129:A5 30&nbsp; &nbsp; &nbsp;LDA $30 = #$01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIzc<br />$E12B:C9 C0&nbsp; &nbsp; &nbsp;CMP #$C0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:01 X:00 Y:C0 P:nvubdIzc<br />$E12D:B0 1F&nbsp; &nbsp; &nbsp;BCS $E14E&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:01 X:00 Y:C0 P:nvubdIzc<br />$E12F:AD 02 20&nbsp; LDA $2002 = #$20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:01 X:00 Y:C0 P:nvubdIzc<br />$E132:A9 00&nbsp; &nbsp; &nbsp;LDA #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:20 X:00 Y:C0 P:nvubdIzc<br />$E134:8D 05 20&nbsp; STA $2005 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E137:A5 30&nbsp; &nbsp; &nbsp;LDA $30 = #$01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E139:8D 05 20&nbsp; STA $2005 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:01 X:00 Y:C0 P:nvubdIzc<br />$E13C:A9 C0&nbsp; &nbsp; &nbsp;LDA #$C0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:01 X:00 Y:C0 P:nvubdIzc<br />$E13E:8D 00 C0&nbsp; STA $C000 = #$FF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:C0 X:00 Y:C0 P:NvubdIzc<br />$E141:8D 01 C0&nbsp; STA $C001 = #$FF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:C0 X:00 Y:C0 P:NvubdIzc<br />$E144:8D 01 E0&nbsp; STA $E001 = #$02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:C0 X:00 Y:C0 P:NvubdIzc<br />$E147:58&nbsp; &nbsp; &nbsp; &nbsp; CLI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvubdIzc<br />$E148:68&nbsp; &nbsp; &nbsp; &nbsp; PLA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:Nvubdizc&nbsp; &nbsp;;;; not the end of the NMI!<br />$E155:78&nbsp; &nbsp; &nbsp; &nbsp; SEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvubdIzc&nbsp; &nbsp; ;;; start of IRQ<br />$E156:8D 00 E0&nbsp; STA $E000 = #$0F&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:C0 X:00 Y:C0 P:NvubdIzc<br />$E159:48&nbsp; &nbsp; &nbsp; &nbsp; PHA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvubdIzc<br />$E15A:AD 02 20&nbsp; LDA $2002 = #$21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:C0 X:00 Y:C0 P:NvubdIzc<br />$E15D:A9 00&nbsp; &nbsp; &nbsp;LDA #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:21 X:00 Y:C0 P:nvubdIzc<br />$E15F:8D 05 20&nbsp; STA $2005 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E162:8D 05 20&nbsp; STA $2005 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E165:AD 02 20&nbsp; LDA $2002 = #$20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E168:A9 08&nbsp; &nbsp; &nbsp;LDA #$08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:20 X:00 Y:C0 P:nvubdIzc<br />$E16A:8D 06 20&nbsp; STA $2006 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:08 X:00 Y:C0 P:nvubdIzc<br />$E16D:A9 00&nbsp; &nbsp; &nbsp;LDA #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:08 X:00 Y:C0 P:nvubdIzc<br />$E16F:8D 06 20&nbsp; STA $2006 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvubdIZc<br />$E172:68&nbsp; &nbsp; &nbsp; &nbsp; PLA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:00 X:00 Y:C0 P:nvubdIZc<br />$E173:40&nbsp; &nbsp; &nbsp; &nbsp; RTI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvubdIzc<br />$E149:A8&nbsp; &nbsp; &nbsp; &nbsp; TAY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvUbdizc<br />$E155:78&nbsp; &nbsp; &nbsp; &nbsp; SEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvUbdIzc&nbsp; &nbsp;;;;start of IRQ &#40;again&#41;<br />$E156:8D 00 E0&nbsp; STA $E000 = #$0F&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:C0 X:00 Y:C0 P:NvUbdIzc<br />$E159:48&nbsp; &nbsp; &nbsp; &nbsp; PHA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvUbdIzc<br />$E15A:AD 02 20&nbsp; LDA $2002 = #$20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:C0 X:00 Y:C0 P:NvUbdIzc<br />$E15D:A9 00&nbsp; &nbsp; &nbsp;LDA #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:20 X:00 Y:C0 P:nvUbdIzc<br />$E15F:8D 05 20&nbsp; STA $2005 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvUbdIZc<br />$E162:8D 05 20&nbsp; STA $2005 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvUbdIZc<br />$E165:AD 02 20&nbsp; LDA $2002 = #$20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvUbdIZc<br />$E168:A9 08&nbsp; &nbsp; &nbsp;LDA #$08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:20 X:00 Y:C0 P:nvUbdIzc<br />$E16A:8D 06 20&nbsp; STA $2006 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:08 X:00 Y:C0 P:nvUbdIzc<br />$E16D:A9 00&nbsp; &nbsp; &nbsp;LDA #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:08 X:00 Y:C0 P:nvUbdIzc<br />$E16F:8D 06 20&nbsp; STA $2006 = #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A:00 X:00 Y:C0 P:nvUbdIZc<br />$E172:68&nbsp; &nbsp; &nbsp; &nbsp; PLA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:00 X:00 Y:C0 P:nvUbdIZc<br />$E173:40&nbsp; &nbsp; &nbsp; &nbsp; RTI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvUbdIzc<br />$E14A:68&nbsp; &nbsp; &nbsp; &nbsp; PLA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A:C0 X:00 Y:C0 P:NvUbdizc</div>
<br />
<br />I think I'm doing something wrong.  Perhaps people can finally look at it.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p2766"></a>
				<b class="postauthor">Guest</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2766"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2766#p2766"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 2:44 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">^ Note that I did not show all the instances of the IRQs, which all did the same thing.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p2767"></a>
				<b class="postauthor">Quietust</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2767"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2767#p2767"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 2:48 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 10:59 pm<br /><b>Posts:</b> 1188
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The problem is that you are never clearing the I flag <strong>outside of NMI</strong> - when you do CLI at the end of your NMI routine, the RTI shortly afterwards <strong>sets the I flag again</strong>. As such, IRQs will ONLY be serviced at the end of your NMI routine (when the I flag is briefly cleared).
<br />
<br />If your NMI routine is short, you shouldn't even be doing CLI inside in the first place - you should be doing it at the end of your initialization code, right after you enable NMIs (and be sure to write to $E000 before doing CLI, otherwise an unacknowledged MMC3 IRQ might go off).
<br />
<br />The fact that your IRQ handler is being called 6 times in a row means there is probably a flaw in your MMC3 IRQ implementation, since writing to $E000 should acknowledge any pending MMC3 IRQs.</div>

					
						<div class="postbody"><br />_________________<br />Quietust, QMT Productions
<br />P.S. If you don't get this note, let me know and I'll write you another.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p2768"></a>
				<b class="postauthor">Guest</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2768"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2768#p2768"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 3:13 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Quietust wrote:</div><div class="quotecontent">The problem is that you are never clearing the I flag <strong>outside of NMI</strong> - when you do CLI at the end of your NMI routine, the RTI shortly afterwards <strong>sets the I flag again</strong>. As such, IRQs will ONLY be serviced at the end of your NMI routine (when the I flag is briefly cleared).<br /><br />If your NMI routine is short, you shouldn't even be doing CLI inside in the first place - you should be doing it at the end of your initialization code, right after you enable NMIs (and be sure to write to $E000 before doing CLI, otherwise an unacknowledged MMC3 IRQ might go off).<br /><br />The fact that your IRQ handler is being called 6 times in a row means there is probably a flaw in your MMC3 IRQ implementation, since writing to $E000 should acknowledge any pending MMC3 IRQs.</div>
<br />
<br />Dur,  <img src="./images/smilies/icon_idea.gif" alt=":idea:" title="Idea" /> I knew that.  Thanks for that info.  I can't believe I missed that.  LOL.
<br />
<br />Still, I'm missing something.  I do have one good piece of news, since fixing that interrupt flag thing, the whole screen is now black.  Now that may not sound so good to you, but if you look at the name tables in the ROM, you'll see that there is no way the whole screen can be black without split-screen scrolling.  So I have implemented it; now I need to figure out how to set the right value.
<br />
<br />Uh, in some experimenation, I ran into some problems.  The display got weird.  Because of that, I'll go ahead and include the source files with the ROM so perhaps you can look at it and tell me how I'm implementing the IRQs wrongly:
<br />
<br /><!-- m --><a class="postlink" href="http://www.freewebs.com/beneficii/scroll.zip">http://www.freewebs.com/beneficii/scroll.zip</a><!-- m --></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p2769"></a>
				<b class="postauthor">Quietust</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p2769"></a></div><div style="float: right;"><a href="./viewtopic.php?p=2769#p2769"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Jul 12, 2005 3:18 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 10:59 pm<br /><b>Posts:</b> 1188
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Your IRQ code is pointing the screen at the FIRST nametable and is trying to set vertical scroll via $2005, which <strong>cannot be done mid-frame</strong>. If you want a setup similar to what SMB3 does, you should be writing $0B,$00 to $2006 and $00 <strong>once</strong> to $2005.</div>

					
						<div class="postbody"><br />_________________<br />Quietust, QMT Productions
<br />P.S. If you don't get this note, let me know and I'll write you another.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=2&amp;t=402"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=2"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=2&amp;t=402"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 23 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=2&amp;t=402&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=2&amp;t=402&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=2">NESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing [Bot]</span> and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="402" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2" selected="selected">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
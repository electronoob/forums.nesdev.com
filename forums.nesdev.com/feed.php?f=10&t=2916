<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=2916" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2008-08-20T11:16:49-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=2916</id>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2007-01-31T14:29:57-07:00</updated>
<published>2007-01-31T14:29:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21739#p21739</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21739#p21739"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21739#p21739"><![CDATA[
<div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><br />Doesn't this limit have to do with time rather than bytes? Isn't it like this because the PPU is not fast enough to fetch more than 8 rows of patterns?<br /></div><br />It's like this so that the PPU can reuse its pattern table fetch circuitry for both the sprites and the background. The PPU could have supported up to 16 sprites per scanline with the existing amount of hblank time, but Nintendo and Ricoh chose to have it make garbage nametable fetches instead to save gates.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Jan 31, 2007 2:29 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2007-01-31T13:53:32-07:00</updated>
<published>2007-01-31T13:53:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21737#p21737</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21737#p21737"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21737#p21737"><![CDATA[
Yep, I think the issue is one of VRAM bandwidth. If so, then it would have required faster, more-expensive video RAM, possibly in the cartridge as well. This would probably have required a faster master clock. And having a faster clock might have required faster logic, increasing cost more.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Wed Jan 31, 2007 1:53 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2007-01-31T13:25:20-07:00</updated>
<published>2007-01-31T13:25:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21736#p21736</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21736#p21736"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21736#p21736"><![CDATA[
Doesn't this limit have to do with time rather than bytes? Isn't it like this because the PPU is not fast enough to fetch more than 8 rows of patterns? Maybe I'm stupid, but this just went through my mind.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Wed Jan 31, 2007 1:25 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2007-01-31T12:49:13-07:00</updated>
<published>2007-01-31T12:49:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21735#p21735</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21735#p21735"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21735#p21735"><![CDATA[
<div class="quotetitle">kyuusaku wrote:</div><div class="quotecontent"><br />Because CPU WRAM isn't on the PPU die like OAM.<br /></div><br /><br />I aint stupid. That aint what I meant. Never mind, bless.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I suppose that's where emulators really do shine, as we can support as many sprites as we like!<br /></div><br />No, because you cannot have more than 64 sprites overall regardless where they are on screen, and some games still suffer from this (but far less than the 8 sprites per scaline limit).</div><br /><br />Again! That is not what I meant, what I mean is if we were to put 64 sprites on a scanline we could render each one (obviously this would means just 4 pixels per sprite, MAX). And I also know that the programmer limits the amount of sprites that it puts on a scanline anyway.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Wed Jan 31, 2007 12:49 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2007-01-31T11:08:59-07:00</updated>
<published>2007-01-31T11:08:59-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21732#p21732</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21732#p21732"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21732#p21732"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I suppose that's where emulators really do shine, as we can support as many sprites as we like!<br /></div><br />No, because you cannot have more than 64 sprites overall regardless where they are on screen, and some games still suffer from this (but far less than the 8 sprites per scaline limit).<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Can you imagine if we could have just ten sprites per scanline?<br /></div><br />That's just what the Gameboy and Gameboy Color have.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Wed Jan 31, 2007 11:08 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[kyuusaku]]></name></author>
<updated>2007-01-31T10:36:39-07:00</updated>
<published>2007-01-31T10:36:39-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21731#p21731</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21731#p21731"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21731#p21731"><![CDATA[
Because CPU WRAM isn't on the PPU die like OAM.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=20">kyuusaku</a> — Wed Jan 31, 2007 10:36 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2007-01-31T10:29:32-07:00</updated>
<published>2007-01-31T10:29:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21730#p21730</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21730#p21730"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21730#p21730"><![CDATA[
Can you imagine if we could have just <em>ten</em> sprites per scanline? Why were Nintendo so tight when it came to temporary sprite memory, what would an extra 8 bytes (32 + 8 = 40) have cost when it would have prevented so much flickering and we could have expanded the graphics a little. If it were down to cost, then why not allocate less CPU RAM, and give it to the temporary sprite memory. I mean, sixteen sprites per scanline would just be fantastic, I suppose that's where emulators really do shine, as we can support as many sprites as we like!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Wed Jan 31, 2007 10:29 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Cypherr]]></name></author>
<updated>2007-01-31T07:20:58-07:00</updated>
<published>2007-01-31T07:20:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21725#p21725</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21725#p21725"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21725#p21725"><![CDATA[
Ahhh, I seem to have it working now. Thanks to everyone who offered help. <br /> <br />I was not writing to $2005 and that was causing the shift in the background. <br /><br />I <em>should</em> be good to go now, at least until the next stumbling block <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=710">Cypherr</a> — Wed Jan 31, 2007 7:20 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2007-01-31T06:24:18-07:00</updated>
<published>2007-01-31T06:24:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21724#p21724</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21724#p21724"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21724#p21724"><![CDATA[
Be sure to mess with $2006 and $2007 <strong>only</strong> during vblank. So do it as the very first thing in your NMI routine. And after you're done with them, be sure to set the scroll correctly by writing the proper values to $2000 and $2005 before vblank ends. Do anything differently than that and you get the effect you described.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Wed Jan 31, 2007 6:24 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[loopy]]></name></author>
<updated>2008-08-20T11:16:49-07:00</updated>
<published>2007-01-31T05:39:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21723#p21723</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21723#p21723"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21723#p21723"><![CDATA[
<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4">loopy</a> — Wed Jan 31, 2007 5:39 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Cypherr]]></name></author>
<updated>2007-01-30T23:17:16-07:00</updated>
<published>2007-01-30T23:17:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21722#p21722</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21722#p21722"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21722#p21722"><![CDATA[
thanks again for the replies. <br /><br />i had previously tried to write to $2006 the position that i wanted to start updating backgrounds tiles to as i thought this should work, and according to you both it should.<br /><br />however, when i try to have $2006 point to a a tile other than the first one for example doing as tepples showed in his example<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #$21<br />sta $2006<br />lda #$26<br />sta $2006</div><br /><br />the background jumps to another position. if i set $2006 to #$2040 for example, the whole background moves up vertically.<br /><br />Obviously i am doing something wrong, but i am not quite sure what would cause this. As a worse case, I suppose I could post my code, or parts at least, but I don't want to trouble anyone with trying to read through all of that code.<br /><br />Is there anyone obvious that i could be doing - or not doing - that would cause this behavior?<br /><br />Thanks again.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=710">Cypherr</a> — Tue Jan 30, 2007 11:17 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2007-01-30T22:56:41-07:00</updated>
<published>2007-01-30T22:56:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21721#p21721</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21721#p21721"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21721#p21721"><![CDATA[
<div class="quotetitle">Cypherr wrote:</div><div class="quotecontent"><br />Is there a way to update only a single tile in the background, without having to reload the whole background into $2007?<br /></div><br />Of course there is!<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />If so can someone please explain it, in a decent amount of detail as I am not as knowledgeable about some of this stuff as I would like to be.<br /></div><br />I'm guessing that you are writing the full background at one and that's itm right? If so, you're probably setting $2006 to point to the start of the name table, and then dumping all the tiles through $2007.<br /><br />To update just a few tiles all you have to do is have $2006 point to the tile you want to change, and then write the new tile values to $2007.<br /><br />There is a simple formula to convert X and Y tile coordinates into the exact address of the tile: BASE + Y * 32 + X<br /><br />BASE is the base address of the name table, so if it is the first one this is $2000. X should be in the range 0 to 31 and Y should be between 0 and 29.<br /><br />So, after having $2006 point to the first tile you want to change, you can start writing the tile values to $2007. Since burger parts seem to be wider than taller, it would be smart to set the PPU increment value to 1 (instead of 32), to draw the new tiles in rows. You have to set the address again for each row of tiles you need to update.<br /><br />If your burger parts use different palettes, you'll also have to mess with the attribute tables. This is a bit harder. You can also use a formula to find the address of interest, but since a byte is used to define the attributes of many tiles, you'd have to also calculate some sort of mask to clear only the bits you want to change, change the bits and write the value back.<br /><br />Of course, depending on what you have in mind it can be simpler. I never really played this game, and probably some of it's characteristics can be taken into account for making the background updates easier. If all burger parts used the same palette that sure would make things easier, but also uglier.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Tue Jan 30, 2007 10:56 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2007-01-30T22:49:12-07:00</updated>
<published>2007-01-30T22:49:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21719#p21719</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21719#p21719"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21719#p21719"><![CDATA[
<div class="quotetitle">Cypherr wrote:</div><div class="quotecontent"><br />Is there a way to update only a single tile in the background, without having to reload the whole background into $2007?<br /></div><br />Yes. You seek to one part of the map in VRAM using PPUADDR ($2006), and then you rewrite tiles using PPUDATA ($2007). For example, <em>Super Mario Bros.</em> does this every time you bash a <img src="http://pics.pineight.com/prtlg/qblk.png" alt="Image" />.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />If so can someone please explain it, in a decent amount of detail as I am not as knowledgeable about some of this stuff as I would like to be.<br /></div><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; Seek to VRAM $2136, or x=22 y=9<br />  lda #$21<br />  sta PPUADDR<br />  lda #$36<br />  sta PPUADDR<br />; Rewrite a row of tiles<br />  ldx #BURGER_TOP_LEFT_TILE<br />  stx PPUDATA<br />  ldx #BURGER_TOP_LEFT_CENTER_TILE<br />  stx PPUDATA<br />  ldx #BURGER_TOP_RIGHT_CENTER_TILE<br />  stx PPUDATA<br />  ldx #BURGER_TOP_RIGHT_TILE<br />  stx PPUDATA<br /></div><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Sorry for not posting this in the newbie section, I actually thought I was in there so any admin can feel free to move this thread.<br /></div><br />Done.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue Jan 30, 2007 10:49 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Cypherr]]></name></author>
<updated>2007-01-30T22:07:48-07:00</updated>
<published>2007-01-30T22:07:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21718#p21718</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21718#p21718"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21718#p21718"><![CDATA[
Thank you for the replies. I assumed  I would have to put the burger parts into the background but I just wanted to make sure. <br /><br />Just need a little clarification on dealing with the background.<br /><br />Is there a way to update only a single tile in the background, without having to reload the whole background into $2007? If so can someone please explain it, in a decent amount of detail as I am not as knowledgeable about some of this stuff as I would like to be.<br /><br />Sorry for not posting this in the newbie section, I actually thought I was in there so any admin can feel free to move this thread.<br /><br />Thanks again for any additional help.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=710">Cypherr</a> — Tue Jan 30, 2007 10:07 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2007-01-30T17:52:25-07:00</updated>
<published>2007-01-30T17:52:25-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21713#p21713</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21713#p21713"/>
<title type="html"><![CDATA[Too many spirtes - overcoming sprite scanline limitations]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=2916&amp;p=21713#p21713"><![CDATA[
There is no way to have more than 8 sprites on a line, so the burger parts will probably have to be part of the background. To move them in the background, have different sets of tiles for each vertical position they can be in, with respect to the tile size. As I remember the game, the food items can either be sitting on a platform, partially "flattened", or falling. You could handle the first two states using two sets of tiles (for each type), and sprites when one is falling to a lower platform.<br /><br />BTW, if you think you do have a newbie question, post to the newbie forum (though some retard(s) will still sometimes complain).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Jan 30, 2007 5:52 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - WIP: Wizard of Wor</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Homebrew Projects" href="http://forums.nesdev.com/feed.php?f=22" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - WIP: Wizard of Wor" href="http://forums.nesdev.com/feed.php?f=22&amp;t=16172" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '8');
	var per_page = '15';
	var base_url = './viewtopic.php?f=22&amp;t=16172';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 1:52 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=22">Homebrew Projects</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=22&amp;t=16172&amp;start=105">WIP: Wizard of Wor</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=22"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=22&amp;t=16172"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>8</strong> of <strong>12</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 166 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=22&amp;t=16172&amp;start=90">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=22&amp;t=16172">1</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=90">7</a><span class="page-sep">, </span><strong>8</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=120">9</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=135">10</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=150">11</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=165">12</a> &nbsp;<a href="./viewtopic.php?f=22&amp;t=16172&amp;start=120">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=22&amp;t=16172&amp;start=105&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=22&amp;t=16172&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=22&amp;t=16172&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p203984"></a>
				<b class="postauthor">Myask</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203984">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203984#p203984"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 9:37 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6603_1469162638.png" width="32" height="40" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 12, 2014 3:04 pm<br /><b>Posts:</b> 958
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">How is it generating <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">stamps[STAMP_Y&#40;i&#41;]</tt>? The thing I suspect is happening is that that equality stops being true after a WORRIOR has moved one pixel up, so it tries to handle their movement as though normally in-bounds instead of walking into the playfield, and says &quot;hey you're outside where you should be&quot; and clips the WORRIOR's Y, causing the other 23 to happen all at once.<br /><br />This would happen if you're doing a modulo-24 to get &quot;what's the current cell&quot;, as one guess.<br /><br /><div class="quotetitle">rainWORRIOR wrote:</div><div class="quotecontent">The only thing that's maybe weird to me is if I press up just a little bit then stop, now pressing either left or right will move me upwards until the next grid, which feels a little weird, but maybe not something that needs to be addressed at all. (It's easy to learn this quirk, and it resolves itself pretty quickly anyway.)</div> I guess he took my suggestion.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=6603">Myask</a> on Tue Sep 05, 2017 10:25 pm, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6603"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p203989"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203989">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203989#p203989"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 10:20 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The macros that generate the appropriate data are here:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/**<br />&nbsp;* 8 objects on screen, two players and 6 enemies.<br />&nbsp;*/<br />#define STAMP_NUM_FIELDS&nbsp; &nbsp; &nbsp;9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Number of fields in each stamp slot<br />#define STAMP_NUM_SLOTS&nbsp; &nbsp; &nbsp; 8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Number of slots in stamp structure<br />#define STAMP_CENTER_BIAS_X&nbsp; 12&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Offset to apply to box multiply to center sprite (X)<br />#define STAMP_CENTER_BIAS_Y&nbsp; 10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Offset to apply to box multiply to center sprite (Y)<br /><br />#define RADAR_SPR_OFFSET_X&nbsp; &nbsp;88&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Radar sprite top-left offset X<br />#define RADAR_SPR_OFFSET_Y&nbsp; &nbsp;176&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Radar sprite top-left offset Y<br /><br />#define STAMP_NUM(x)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(x*STAMP_NUM_FIELDS) // Stamp Number<br />#define STAMP_X(x)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(STAMP_NUM(x)+0)&nbsp; &nbsp; &nbsp;// Stamp Field: X pixel position<br />#define STAMP_Y(x)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(STAMP_NUM(x)+1)&nbsp; &nbsp; &nbsp;// Stamp Field: Y pixel position<br />#define STAMP_TYPE(x)&nbsp; &nbsp; &nbsp; &nbsp; (STAMP_NUM(x)+2)&nbsp; &nbsp; &nbsp;// Stamp Field: Type<br />#define STAMP_STATE(x)&nbsp; &nbsp; &nbsp; &nbsp;(STAMP_NUM(x)+3)&nbsp; &nbsp; &nbsp;// Stamp Field: state (which frames to use).<br />#define STAMP_LAST_STATE(x)&nbsp; (STAMP_NUM(x)+4)<br />#define STAMP_FRAME(x)&nbsp; &nbsp; &nbsp; &nbsp;(STAMP_NUM(x)+5)&nbsp; &nbsp; &nbsp;// Stamp Field: Current frame<br />#define STAMP_DELAY(x)&nbsp; &nbsp; &nbsp; &nbsp;(STAMP_NUM(x)+6)&nbsp; &nbsp; &nbsp;// Stamp Field: Delay<br />#define STAMP_XTRA_A(x)&nbsp; &nbsp; &nbsp; (STAMP_NUM(x)+7)&nbsp; &nbsp; &nbsp;// Stamp Field: Extra A (Player Timer)<br />#define STAMP_XTRA_B(x)&nbsp; &nbsp; &nbsp; (STAMP_NUM(x)+8)&nbsp; &nbsp; &nbsp;// Stamp Field: Extra B (Player Pad Data)<br /><br />#define PLAYER_PAD(x)&nbsp; &nbsp; &nbsp; &nbsp; (stamps&#91;STAMP_XTRA_B(x)&#93;)&nbsp; &nbsp; // Alias for reading stored player pad value.<br />#define PLAYER_PAD_RIGHT(x)&nbsp; (PLAYER_PAD(x)&amp;1&lt;&lt;0) // is player pressing right?<br />#define PLAYER_PAD_LEFT(x)&nbsp; &nbsp;(PLAYER_PAD(x)&amp;1&lt;&lt;1) // is player pressing left?<br />#define PLAYER_PAD_DOWN(x)&nbsp; &nbsp;(PLAYER_PAD(x)&amp;1&lt;&lt;2) // is player pressing down?<br />#define PLAYER_PAD_UP(x)&nbsp; &nbsp; &nbsp;(PLAYER_PAD(x)&amp;1&lt;&lt;3) // is player pressing up?<br />#define PLAYER_PAD_IDLE(x)&nbsp; &nbsp;(PLAYER_PAD(x)==0x00)&nbsp; &nbsp; &nbsp; // is player idle?<br /><br />#define PIXEL_BOX_X(x)&nbsp; &nbsp; &nbsp; &nbsp;((x*24)+STAMP_CENTER_BIAS_X)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Convert Box X coordinates to pixels<br />#define PIXEL_BOX_Y(x)&nbsp; &nbsp; &nbsp; &nbsp;((x*24)+STAMP_CENTER_BIAS_Y)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Convert Box Y coordinates to pixels<br />#define BOX_PIXEL_X(x)&nbsp; &nbsp; &nbsp; &nbsp;(div24(x-STAMP_CENTER_BIAS_X))&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Convert Stamp X coordinates to Box X<br />#define BOX_PIXEL_Y(x)&nbsp; &nbsp; &nbsp; &nbsp;(div24(x-STAMP_CENTER_BIAS_Y))&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Convert Stamp Y coordinates to Box Y<br /><br />#define STAMP_X_TO_RADAR(x)&nbsp; RADAR_SPR_OFFSET_X+BOX_PIXEL_X(x)*8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Convert box position to radar sprite position<br />#define STAMP_Y_TO_RADAR(x)&nbsp; RADAR_SPR_OFFSET_Y+BOX_PIXEL_Y(x)*8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Convert box position to radar sprite position<br /><br />#define BOX_WALL_RIGHT(x)&nbsp; &nbsp; (x&amp;1&lt;&lt;4)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Box has right wall<br />#define BOX_WALL_DOWN(x)&nbsp; &nbsp; &nbsp;(x&amp;1&lt;&lt;5)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Box has down wall<br />#define BOX_WALL_LEFT(x)&nbsp; &nbsp; &nbsp;(x&amp;1&lt;&lt;6)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Box has left wall<br />#define BOX_WALL_UP(x)&nbsp; &nbsp; &nbsp; &nbsp;(x&amp;1&lt;&lt;7)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Box has up wall<br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p203990"></a>
				<b class="postauthor">Myask</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203990">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203990#p203990"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 10:30 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6603_1469162638.png" width="32" height="40" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 12, 2014 3:04 pm<br /><b>Posts:</b> 958
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">if <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">handle_player_in_box&#40;&#41;;</tt> is supposed to handle the entire walk out of the box, it's not got the right condition on it; it should be something more like <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">if &#40;stamps[STAMP_Y&#40;i&#41;]&gt;PIXEL_BOX_Y&#40;5&#41;&#41;</tt> (with a +1 in there on the RHS if ejection is how you handle walls rather than prevention)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6603"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p203991"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203991">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203991#p203991"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 10:32 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">handle_player_in_box is the routine that handles when the player is about to be ejected onto the playfield (with the countdown).<br /><br />handle_player_in_field is used for everything else.<br /><br />I may rename the former routine, if I can think of a better name for it... I was thinking &quot;penalty box&quot; like hockey <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /> <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p203995"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203995">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203995#p203995"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 10:39 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">to expand a bit, the macro PIXEL_BOX_Y takes a box # and converts it to a pixel offset (for sprite coordinates). Y=6 is a special box location that is only shared by the two penalty boxes.<br /><br />STAMP_X and STAMP_Y are sprite pixel coordinates.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p203996"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203996">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203996#p203996"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 10:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">other bits of interesting code, handle_pad_idle() which handles when player motion stops:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/**<br />&nbsp;* handle_pad_idle()<br />&nbsp;*/<br />void handle_pad_idle(void)<br />{<br />&nbsp; // Change to idle state if pad is idle.<br />&nbsp; switch(stamps&#91;STAMP_LAST_STATE(i)&#93;)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; case STATE_PLAYER_RIGHT:<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_RIGHT_IDLE;<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; case STATE_PLAYER_LEFT:<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_LEFT_IDLE;<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; case STATE_PLAYER_UP:<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_UP_IDLE;<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; case STATE_PLAYER_DOWN:<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_STATE(i)&#93;=STATE_PLAYER_DOWN_IDLE;<br />&nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; }<br />}<br /></div><br /><br />and handle_player_in_box():<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/**<br />&nbsp;* handle_player_in_box()<br />&nbsp;* Handle when player is in box.<br />&nbsp;*/<br />void handle_player_in_box(void)<br />{<br />&nbsp; if (stamps&#91;STAMP_XTRA_A(i)&#93;&gt;0)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; if (stamps&#91;STAMP_XTRA_B(i)&#93; != 0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_XTRA_A(i)&#93;=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_Y(i)&#93;=PIXEL_BOX_Y(6)-1; // 6 is the Y for the box.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (sec==0) // 0 means approximately 1 second elapsed.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stamps&#91;STAMP_XTRA_A(i)&#93;--;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Decrement timer<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; else<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; stamps&#91;STAMP_Y(i)&#93;=PIXEL_BOX_Y(5); // Pop out of box.<br />&nbsp; &nbsp; &nbsp; if (i==0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yellow_door_state=CLOSED;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blue_door_state=CLOSED;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />}<br /></div><br /><br />sec is a variable that simply counts from 49 to 0 (I am using shiru's drop-frame consistent PAL tick rate).<br /><br />get_current_box() is a function that sets a quad of variables, a,b,c,d:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/**<br />&nbsp;* get_current_box()<br />&nbsp;* Get the current dungeon box for player<br />&nbsp;* i = the stamp to return in a,b,c,d<br />&nbsp;* a = the X box<br />&nbsp;* b = the Y box<br />&nbsp;* c = the dungeon box #<br />&nbsp;* d = the box data.<br />&nbsp;*/<br />void get_current_box(void)<br />{<br />&nbsp; a=div24(stamps&#91;STAMP_X(i)&#93;+8);<br />&nbsp; b=div24(stamps&#91;STAMP_Y(i)&#93;+8);<br />&nbsp; c=(b*10)+a; // C is now the box #<br />&nbsp; d=dungeon&#91;c&#93;;<br />&nbsp; score1&#91;0&#93;=div24(stamps&#91;STAMP_X(0)&#93;+8)+1;<br />&nbsp; score1&#91;1&#93;=div24(stamps&#91;STAMP_Y(0)&#93;+8)+1;<br />}<br /></div><br /><br />These are then used for collision detection. Since the whole maze is on a grid, and everything is bound to move along that grid, full bounding box collision detection is unnecessary for traversing the maze. (player to player/enemy detection will be another story)<br /><br />I will also change the move_monsters() code to utilize the same code (with the exception that directions will be picked randomly), so that monster movement isn't so pedestrian. (Right now, monster movement is very rank and file).<br /><br />It will also make computer AI easier, as all it needs to do is pick the closest monster, and attempt a straight line to it, while shooting when it's in the same lateral position on the grid.<br /><br />Yes, I KNOW this code is really weird. I've never written C code that uses this many globals or goto's (and I've written CODECs!)... but you can't really write clean C code for a 6502 and have it fit or be somewhat efficient.<br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p203999"></a>
				<b class="postauthor">Myask</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p203999">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=203999#p203999"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 11:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6603_1469162638.png" width="32" height="40" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 12, 2014 3:04 pm<br /><b>Posts:</b> 958
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">oh, so the WORRIOR *is* supposed to instantly pop out of the box into the middle of the adjacent map cell? I thought they were supposed to walk in.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6603"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p204000"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p204000">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=204000#p204000"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Sep 05, 2017 11:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Myask wrote:</div><div class="quotecontent">oh, so the WORRIOR *is* supposed to instantly pop out of the box into the middle of the adjacent map cell? I thought they were supposed to walk in.</div><br /><br />You can witness the behavior by watching the arcade longplays on YouTube.<br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p204039"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p204039">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=204039#p204039"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Sep 06, 2017 9:17 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 3110<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tschak909 wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">#define STAMP_NUM(x)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(x*STAMP_NUM_FIELDS) // Stamp Number<br /></div></div><br />Side note: It's a good idea to get into habit of adding extra parenthesis around macro variables:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">#define STAMP_NUM(x)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;((x)*STAMP_NUM_FIELDS) // Stamp Number<br /></div><br />Otherwise you can run into really nasty bugs with things like <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">STAMP_NUM&#40;1+2&#41;</tt> (expands to <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">1+2*STAMP_NUM_FIELDS</tt>).</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">fauxgame.com</a>! â€” Some other stuff I've done: <a href="https://fo.aspekt.fi/" class="postlink">fo.aspekt.fi</a></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p204044"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p204044">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=204044#p204044"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Sep 06, 2017 9:56 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ah yes, good idea. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p204214"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p204214">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=204214#p204214"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 08, 2017 10:40 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Still debugging the glitch that Kasumi found, this one is a quantum bug, as it hides when being explicitly observed! <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br /><br />It's definitely a problem, and I'm suspecting that my i variable is being reset intermittently (and I mean very infrequently, I have yet to find a consistently reproducible pattern that causes this behavior!)<br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p204277"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p204277">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=204277#p204277"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 09, 2017 9:23 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Narrowed it down to the following bit of conditions:<br /><br />* pressing up or down<br />* in a horizontal corridor (last state = left | right)<br />* state goes from not aligned to aligned<br /><br />this one is weiird. I wonder what i'm doing to cause this funkiness?<br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p204406"></a>
				<b class="postauthor">Myask</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p204406">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=204406#p204406"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Sep 11, 2017 2:18 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=6603_1469162638.png" width="32" height="40" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 12, 2014 3:04 pm<br /><b>Posts:</b> 958
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tschak909 wrote:</div><div class="quotecontent"><div class="quotetitle">Myask wrote:</div><div class="quotecontent">oh, so the WORRIOR *is* supposed to instantly pop out of the box into the middle of the adjacent map cell? I thought they were supposed to walk in.</div><br /><br />You can witness the behavior by watching the arcade longplays on YouTube.<br /><br />-Thom</div> Having looked at suchâ€¦<br />The arcade game slides the WORRIOR into the playfield over ~0.1s (at least, 3 @youtube's 30FPS*, each with a new interpolated Y-value, so 6 frames on NTSC NES). Your version does not; it waits three frames after an input and then instantly moves the WORRIOR from inside the bullpen to the adjacent maze square.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6603"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p204430"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p204430">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=204430#p204430"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Sep 11, 2017 11:08 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Noted. I will try to refine this once I figure out WTF is going on with player 2 affecting player 1 motion. <br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p204672"></a>
				<b class="postauthor">tschak909</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p204672">Re: WIP: Wizard of Wor</a></div><div style="float: right;"><a href="./viewtopic.php?p=204672#p204672"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 16, 2017 3:08 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jul 03, 2017 4:37 pm<br /><b>Posts:</b> 123
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">To anyone here, could use a second pair of eyes.<br /><br />Man, this is bonkers, have been trying to debug the errant motion, and while I can reproduce it, I can't narrow down the errant code...<br /><br />(for reference, code is here: <!-- m --><a class="postlink" href="http://github.com/tschak909/wow.git">http://github.com/tschak909/wow.git</a><!-- m -->)<br /><br />If I do a diagonal motion, then the moment that I enter alignment into a given box, the yellow player will turn and idle in the selected vertical direction. This is downright goofy, as I do not modify the current player index at any point inside the loop, and yet, somehow i becomes 0 even when i is 1, and suddenly snaps back to 1.<br /><br />I know this is because I am abusing globals, I'm trying to keep code generation down by not putting things in the stack frame...<br /><br />-Thom</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=8569"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=22&amp;t=16172&amp;start=105"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=22"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=22&amp;t=16172"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>8</strong> of <strong>12</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 166 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=22&amp;t=16172&amp;start=90">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=22&amp;t=16172">1</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=90">7</a><span class="page-sep">, </span><strong>8</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=120">9</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=135">10</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=150">11</a><span class="page-sep">, </span><a href="./viewtopic.php?f=22&amp;t=16172&amp;start=165">12</a> &nbsp;<a href="./viewtopic.php?f=22&amp;t=16172&amp;start=120">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=22">Homebrew Projects</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="16172" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22" selected="selected">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
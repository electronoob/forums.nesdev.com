<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - 8x16 and whatever else unreg wants to know</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">8x16 and whatever else unreg wants to know</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7451">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7451</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>7</strong> of <strong>83</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Mon May 30, 2011 4:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">unregistered wrote:</div><div class="quotecontent"><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">...So you don't have to replace anything, just read my example as if I had writen "vblank" instead of "NMI".</div><br />*Big sigh of relief*  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />  Thank you.</div>
<br />waaaaaaait.  Um, isn't "<span style="color: red">NMI</span>" more correct than "<span style="color: orange">vblank</span>"?   A <span style="color: orange">vblank</span> is an <span style="color: red">NMI</span>... but aren't there other <span style="color: red">NMI</span>??  So, if that is a yes, then it would make more sense for it to be called "<span style="color: red">NMI</span>"... i guess, right?  I'm almost to the point, because it is used in FamiTone, where I'm going to change it to <span style="color: red">NMI</span> from <span style="color: orange">vblank</span>.  Please help me. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />edit: --------------------
<br />a reply to you, qbradq, isnt wirtten <strong>yet</strong>.  Sorry.  <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon May 30, 2011 5:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />NMI is an interrupt signal that begins to be asserted at the start of vertical blanking. NMI ends when vblank ends, but NMI also ends on $2002 read. In fact, turning $2000 bit 7 off and on during a single vblank (without reading $2002) causes multiple NMIs. An NMI handler can end before or after NMI ends. The behavior of $2003-$2007 depends on vblank state, disirregardless of NMI state.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon May 30, 2011 5:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It doesn't matter what you call it, as long as you do it consistently. From a technical perspective "NMI" is not the same as "VBlank". VBlank is a period when we are allowed to make changes to VRAM, and the NMI is an interrupt that fires when this period starts, so that we can be sure to make use of it.
<br />
<br />VBlanks are the only source of NMIs on the NES, the IRQs are the ones that can be generated by different sources, such as the APU or mappers.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Mon May 30, 2011 11:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The behavior of $2003-$2007 depends on vblank state, disirregardless of NMI state.</div>Going to stick with vblank! Thanks tepples!  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> <br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">It doesn't matter what you call it, as long as you do it consistently. From a technical perspective "NMI" is not the same as "VBlank". VBlank is a period when we are allowed to make changes to VRAM, and the NMI is an interrupt that fires when this period starts, so that we can be sure to make use of it.<br /><br />VBlanks are the only source of NMIs on the NES, the IRQs are the ones that can be generated by different sources, such as the APU or mappers.</div> Great dialogue! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />  
<br />
<br />Thanks so much tokumaru and tepples!  <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  I'm not going to change it to NMI; I promise. : )

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Thu Jun 02, 2011 2:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm trying to build my .nes file, but I recieve errors that say <span style="color: brown">Unknown label.</span> and <span style="color: green">Can't determine address.</span>  All of the errors are listed being in my FamiTone music file that was created for me by FamiTone with the -asm6 flag.  All of the errors are found on lines that just have a @label (temporary label).     There is only one regular label at the top and i tried to add regular label at the bottom, but it listed thta line as an error too.  I'm so lost as to what to do now  <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /> ... could you help me?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Thu Jun 02, 2011 5:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Time to move to NESASM3? <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Sat Jun 04, 2011 3:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">Time to move to NESASM3? <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div> hehe asm6 continues to rock. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />So, God helped me make progress again!!! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> But, my question should go to Shiru...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Sat Jun 04, 2011 3:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Have you seen <a href="https://sites.google.com/site/qbradq/projects-1/qasm" class="postlink">QASM</a>? It's totally super awesome. It'll even clean your toilets!
<br />
<br />Actually it is still likely to have bugs <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> I wouldn't recommend it for a newer developer due to that. You might hit a bug in the assembler and think you're doing something wrong.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Sat Jun 04, 2011 3:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">Have you seen <a href="https://sites.google.com/site/qbradq/projects-1/qasm" class="postlink">QASM</a>? It's totally super awesome. It'll even clean your toilets!<br /><br />Actually it is still likely to have bugs <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> I wouldn't recommend it for a newer developer due to that. You might hit a bug in the assembler and think you're doing something wrong.</div>
<br />
<br />Haha  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> , that's pretty good <span style="color: olive">(edit: i'm sorry for my failure at being honest here)</span> : )  Thanks for sharing........ and a reply to you is still on its way. <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />
<br />
<br />edit: Spent some time learning about qasm from <a href="https://sites.google.com/site/qbradq/projects-1/qasm/qasm_dev.zip?attredirects=0&amp;d=1" class="postlink">qasm_dev.zip</a>.  It's exciting and fun!  <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  I'm looking forward to it. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Sat Jun 04, 2011 9:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />In asm6 when trying to understand <span style="color: orange">.enum</span> and <span style="color: orange">.ende</span> they use $200.  What do the 3 digits mean?
<br /><div class="quotetitle"><span style="color: orange">README.TXT</span> wrote:</div><div class="quotecontent">        Reassign PC and suppress assembly output.  Useful for defining<br />        variables in RAM.<br /><br />                ENUM $200<br />                foo:    db 0<br />                foo2:   db 0<br />                ENDE</div>
<br /> Does $200 = $0200 or $2000 or what else?  Is this three digit implementation only in asm6?  Is it only used with .enum?  Could you use 4 digits?  What important thing did I miss reading?  <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Jun 04, 2011 10:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">unregistered wrote:</div><div class="quotecontent">Does $200 = $0200 or $2000 or what else?</div><br />$0200<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Is this three digit implementation only in asm6?</div><br />No.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Is it only used with .enum?</div><br />No.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Could you use 4 digits?</div><br />Yes.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What important thing did I miss reading?  <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /></div>
<br />None, he was just skipping the leading zero. Sometimes people use only 3 digits when referencing RAM on the NES because the NES has only $800 bytes of it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Sat Jun 04, 2011 10:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You completely misunderstood what enum does.
<br />
<br />It temporarily changes the Current Address ($), and temporarily stops any bytes from being emitted in the output, but addresses continue to increase as bytes or instructions are defined.
<br />
<br />So you do ENUM $200.  You set the current address to $200, so your next label starts there.  You have a .db 0, so the address goes up by 1, and the next label uses that address.
<br />
<br />Later you do .ende, so it gets out of ENUM mode, and goes back to generating code as usual, at the previous address that was used before enum mode was turned on.
<br />
<br />You use enum mode to define a bunch of labels in a block using space-filling syntax, instead of adding 1 to previously defined addresses in chains.
<br />
<br />With enum mode:
<br />
<br />.enum $200
<br />label1: .db 0
<br />label2: .db 0
<br />label3: .dw 0
<br />label4: .dsb 32
<br />label5: .db 0
<br />.ende
<br />
<br />Without enum mode:
<br />
<br />label1 = $200
<br />label2 = label1 + 1
<br />label3 = label2 + 1
<br />label4 = label3 + 2
<br />label5 = label4 + 32

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Jun 04, 2011 10:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />BTW, .enum is great for declaring variables. You can have .enum blocks wherever you want, as they don't mess up the program counter. I use it, for example, to declare "local" variables, variables that are used only during parts of the program, so there's no need to waste RAM locations for them permanently.
<br />
<br />After the global variables of each page, I put a marker label:
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;.enum $0300 ;variables in page 3<br /><br />SomeArray .dsb 64<br />MyVariable .dsb 1<br />AnotherVariable .dsb 1<br />Pointer .dsb 2<br />LocalVariables3 ;this marks the starting point for local variables<br /><br />&nbsp; &nbsp;.ende</div><br />And then, at the top of each module's file I do something like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;.enum LocalVariables3 ;local variables in page 3<br /><br />LocalVariable .dsb 1<br />AnotherOne .dsb 2<br />SmallArray .dsb 12<br /><br />&nbsp; &nbsp;.ende</div>
<br />And I can continue to fill page 3 from where I left off. This is the safest and most organized way I found to reuse RAM in different parts of the program. You can safely rearrange/add/remove global variables and as long as the total doesn't extrapolate the memory you have free it will still work fine.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Sun Jun 05, 2011 6:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />qasm_dev.zip is actually older than the current release right now <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> Grab qasm_v0_05.zip for the latest. If you want to learn about how an assembler is coded in the classic style have a look at qasm_v0_01.zip. That is a traditional two-pass assembler without expressions and macros.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Mon Jun 06, 2011 1:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />tokumaru, thank you for answering all of my questions! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />   Makes sense.
<br />
<br />Dwedit, wow, thank you! Now I have an extensive understanding of enum mode; and even know what it would be like to not have enum mode! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  Which is really helpfull, to me!
<br />
<br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">I use it, for example, to declare "local" variables, variables that are used only during parts of the program, so there's no need to waste RAM locations for them permanently.</div><br /><br />!!So that means we could declare a variable... and then, later on, since the previous variable was local... and we are in a different area of code, we could declare another variable in the same spot!?   That would be incredible... like REALLY! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  Just like local variables in C++?  If I understood you correctly here, could you answer this next question?  If all of the files combine in to one single .asm file then how does this work when there is just one file?   The whole thing doesn't make sense to me... there's something I'm missing. <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /><br /><br /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">If you want to learn about how an assembler is coded in the classic style have a look at qasm_v0_01.zip.</div>Maybe this could help me understand what im missing above.  Cause the local variables in an asm program is what im missing AND your assembler probagbly deals with local variables. Thanks qbradq. : )

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>7</strong> of <strong>83</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - cart to disk conversen</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">cart to disk conversen</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7338">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7338</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yagababa</b> [ Thu Dec 30, 2010 5:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>cart to disk conversen</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi! im not new to progrmming and will get straight to biz. So wrote  littel hello world: can get all the useful data out of it, but now,
<br />
<br />can anyone help me out with specs on the game doctor file ?
<br />
<br />i only wanna see how cart to disk converting is done in a tiny example =)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Dec 30, 2010 6:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />"Game Doctor"? You mean the CD repair tool?
<br />
<br />Modern copiers such as PowerPak can take iNES ROM files directly.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Thu Dec 30, 2010 6:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Game Doctor is a brand of copier, it's been around longer than the CD repair tool.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yagababa</b> [ Fri Dec 31, 2010 4:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">"Game Doctor"? You mean the CD repair tool?<br /><br />Modern copiers such as PowerPak can take iNES ROM files directly.</div>
<br />
<br />I know about those units, this is more for the fun it really. as Dwedit say, GDs are old famicom copiers from late 80s HongKong =)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gilbert</b> [ Fri Dec 31, 2010 8:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />As I suppose a simple Hello World ROM could be just a small NROM, I think it's probably easier to make it into a real FDS game (there're a number of NROM games officially re-released as FDS this way) rather than a GD disk image of a cart. I've never tried, but I think it's just along the line of changing some of the addresses used and compile it to a PRG file and a CHR file that are supposed to be loaded as start-up (with other stuff such as the bootup nametable data, etc.).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Fri Dec 31, 2010 12:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You must have a NROM game disk with the same mirroring. Back it up, replace the PRG and CHR data, write it back... It's really easy. Then you don't need to mess with the Nintendo file system, GD layout, GD header nor the FwNES/Bung container.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Gilbert</b> [ Mon Jan 03, 2011 11:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hmmm. Actually it doesn't seem to be that simple (unless it is really a GD image, in which case the data are really just dumped ROM images). I've tried replacing the PRG and CHR files in a NROM conversion (Tennis) and it didn't really work, so unless I've done something wrong, I think the developers actually needed to apply minor modifications to their games for the conversions. 
<br />
<br />Eventually I got my small demo to work (I've uploaded it with source <a href="http://www.mediafire.com/?823q4gqk4r5cqe4" class="postlink">here</a>), but I've found several things that should be noted:
<br />1. As the FDS BIOS has already initialised the RAM, PPU, etc. stuff, so you need not do that in your start-up/reset code. In fact, you should NOT do that, because by clearing all the RAM you may have cleared some of the RAM addresses that are managed by the BIOS (like some of the reserved ZP locations). You should only clear locations of your game variables, etc. that are mandatory during a reset. (You may even need to relocate some of the game variables in case they coincide with BIOS reserved addresses, but this rarely happens I think.)
<br />2. As the FDS BIOS occupies $E000-$FFFF, so you cannot load your PRG data to $C000-$FFFF any more (for a NROM-128 game). What I've seen in NROM conversions was that they moved the PRG data 8kb back to the front, i.e. for a NROM-128 game the PRG was loaded to $A000-$DFFF instead, which required the codes to be reassembled (or you need to patch the addresses of the original PRG data). This also made the "user" reset/nmi vectors to be located at $DFF? instead of $FFF? .
<br />
<br />BTW: I think there is a mistake in the FDS article of the wiki (unless I misunderstood it). It mentions that we clear bit 3 of FDS Control ($4025) for horizontal mirroring and set it for vertical mirroring, but it seems to be the opposite. This gave me headaches in making my stuff to work.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jan 03, 2011 11:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />3. You need to locate all DPCM waves in the last 8 KiB of the program, not just the last 16 KiB.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>clueless</b> [ Mon Jan 03, 2011 12:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">3. You need to locate all DPCM waves in the last 8 KiB of the program, not just the last 16 KiB.</div>
<br />
<br />Is that true of any use of DPCM, even on a regular NES cart, or just for FDS?  I haven't used DCPM yet.  I suppose I could go read the docs / wiki.
<br />
<br />It makes sense that the DCPM buffer should not be bank switched switched while the APU is playing (unless one wanted to to raster^H^H^H^H^H^Haudio tricks).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jan 03, 2011 12:24 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Playback ordinarily works from $C000-$FFFF. But on FDS, half of this space is taken up by the FDS BIOS.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - RJDMC 1.4</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">RJDMC 1.4</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=6975">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=6975</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Oct 30, 2010 3:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />As long as you aren't looping, all you really need is a table of $4010 and $4012 values. (You can compute the $4013 value from this sample's $4012 value and that of the following sample.) See samples.s in <a href="http://lj65.org/" class="postlink">LJ65</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>RushJet1</b> [ Fri Nov 19, 2010 12:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><a href="http://4x86.com/RJDMCv0.6.zip" class="postlink">RJDMC v0.6</a>
<br />
<br />-Added a pop-up box when processing is being done
<br />-Added a reverse function
<br />-Data is read in almost 2x as fast
<br />-Quality of "rate" changes is much higher
<br />-Added extra error handling for non-pcm and non-wav files
<br />-Fixed several bugs
<br />-Added "play selection" feature
<br />-DPCM output is always (mod16 + 1) bytes, so looping is more accurate
<br />-Fixed a few of the keypresses not being read properly
<br />-Various improvements to code efficiency
<br />-Fixed all bugs with the trackbars (all scroll 1-per-tick)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>RushJet1</b> [ Fri Dec 10, 2010 8:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><a href="http://4x86.com/RJDMCv0.9.zip" class="postlink">RJDMC v0.9</a>
<br />
<br />-Zoom into any area is done
<br />-Operations on zoomed selections are possible
<br />-Modify volume for selection
<br />-Fade volume to x%
<br />-Fixed several bugs, made tons of optimizations (mostly to new functions)
<br />-Zooming on large files is faster
<br />-Fixed some bugs with opening files with additional info in their headers and files that were sampled at odd rates.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Tue Dec 14, 2010 7:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Why doesn't saving work on my PC?  This is very frustrating.  I can't even save a file without the program throwing an exception.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Wave</b> [ Wed Dec 15, 2010 2:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Great tool! I'm thikning how to add the dmc seamlessly into the rom.
<br />Let's see if I've got it right.
<br />Starting in $C000, you can address samples at 64 bytes increments via $4012.
<br />Samples size is set via $4013 and the number written is multiplied by 32 then added 1 to get the sample size.
<br />So, if you have to align samples to 64bytes, there is a trailing waste of 31 bytes after each sample.
<br />The first byte could be used to store the $4012 value of the sample, 
<br />(ADDR - $C000)/64, I think the assembler could do that but not sure.
<br />Then the remaining 30 bytes, and this is where RJDMC comes into play, could be data from the sample, pitch, freq, etc (if there's more) in nes format, so you can directly store the value or OR it, padded to 30 bytes (with anything you want, program signature, name, version, etc). 
<br />RJDMC could write this file along with the dmc file, so in the code you only have to include the dmc, autocalculate the $4012 address, include the trailer and you have always your samples aligned and it's easy to call them <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />Any toughts about this? :p

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>RushJet1</b> [ Wed Dec 15, 2010 6:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">Why doesn't saving work on my PC?  This is very frustrating.  I can't even save a file without the program throwing an exception.</div>
<br />
<br />What OS are you using?  Is the .net framework fully updated on your machine?  That'd be my first guess, as I'm pretty sure the open/save dialogs use 3.5 code while the main form uses more backward compatible stuff.
<br />
<br />Try <!-- m --><a class="postlink" href="http://4x86.com/RJDMCv0.9a.zip">http://4x86.com/RJDMCv0.9a.zip</a><!-- m --> as it has a couple fixes and uses a subset of the .NET framework instead of the whole thing now (apparently this can help with framework-related errors).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Wed Dec 15, 2010 7:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I get a lot of "Could not find file, or no file specified" after opening, saving, or even playing a temporary generated file.  Source code please?  Then I can find out what's making those errors.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Dec 15, 2010 9:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Wave wrote:</div><div class="quotecontent">Great tool! I'm thikning how to add the dmc seamlessly into the rom.<br />Let's see if I've got it right.<br />Starting in $C000, you can address samples at 64 bytes increments via $4012.<br />Samples size is set via $4013 and the number written is multiplied by 32 then added 1 to get the sample size.</div><br />Actually multiplied by 16, but you get the idea.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The first byte could be used to store the $4012 value of the sample, <br />(ADDR - $C000)/64, I think the assembler could do that but not sure.</div>
<br />If you're storing the $4012 value after the end of a compressed wave, then given a wave's ID number, how would you find the <em>end</em> of this wave to be able to find its $4012 value? Most games that I've seen use a table to translate wave ID numbers into $4010/$4012 values. You could call this the "inode table" if you wish. In fact, it can be done with 2 bytes per wave because it's possible to approximate the $4013 value from this wave's $4012 value and that of the next, with the other byte holding the default $4010 value.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Wave</b> [ Wed Dec 15, 2010 9:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Actually multiplied by 16, but you get the idea.<br /></div>
<br />Oh, right.
<br />Sooo, there's a space of 63-15bytes "free" aren't they?
<br />
<br />Assuming the trailer can be automaticaly created...
<br />$4012 is the starting address, calculated by the assembler
<br />$4010 is frecuency, given by the program in a trailer in this case
<br />$4013 is size, given by the program in a trailer in this case
<br />Am I wrong?
<br />
<br />EDIT: I understand what you were trying to say now.
<br />Given that scenario you could create a table pointer to the trailers easily.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Dec 15, 2010 9:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Wave wrote:</div><div class="quotecontent">Given that scenario you could create a table pointer to the trailers easily.</div>
<br />Which would take the same space as a table of $4010 and $4012 values. Do you want me to explain how $4013 values could be calculated from $4012 values for any sample that doesn't loop?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Wave</b> [ Wed Dec 15, 2010 9:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Wave wrote:</div><div class="quotecontent">Given that scenario you could create a table pointer to the trailers easily.</div><br />Which would take the same space as a table of $4010 and $4012 values. Do you want me to explain how $4013 values could be calculated from $4012 values for any sample that doesn't loop?</div>
<br />The idea is to have everything calculated and not to modify by hand any value. If you changed a dmc, it would work without code changes (if it fits on rom)
<br />Also, how do you align dmcs to 64 bytes?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>RushJet1</b> [ Wed Dec 15, 2010 10:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">I get a lot of "Could not find file, or no file specified" after opening, saving, or even playing a temporary generated file.  Source code please?  Then I can find out what's making those errors.</div>
<br />
<br />I'll get that to you within 1-2 days, whenever I turn in my code for the project here at school.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Dec 15, 2010 2:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Wave wrote:</div><div class="quotecontent">The idea is to have everything calculated and not to modify by hand any value. If you changed a dmc, it would work without code changes (if it fits on rom)</div><br />The solution I have calculates the $4012 value from the starting address of the wave in ROM, and then it calculates the $4013 value by subtracting this sample's $4012 value from that of the next and then doing some shifts.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also, how do you align dmcs to 64 bytes?</div>
<br />.align statements in ca65 do this.
<br />
<br />For an illustration, have a look at how I handle samples in the source code to <a href="http://www.pineight.com/lj65/" class="postlink">LJ65</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Dec 15, 2010 2:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The solution I have calculates the $4012 value from the starting address of the wave in ROM, and then it calculates the $4013 value by subtracting this sample's $4012 value from that of the next and then doing some shifts.</div>
<br />Unless you have more than about a dozen of samples, you'd actually waste bytes with this instead of saving them.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Wave</b> [ Wed Dec 15, 2010 3:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Wave wrote:</div><div class="quotecontent">The idea is to have everything calculated and not to modify by hand any value. If you changed a dmc, it would work without code changes (if it fits on rom)</div><br />The solution I have calculates the $4012 value from the starting address of the wave in ROM, and then it calculates the $4013 value by subtracting this sample's $4012 value from that of the next and then doing some shifts.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also, how do you align dmcs to 64 bytes?</div><br />.align statements in ca65 do this.<br /><br />For an illustration, have a look at how I handle samples in the source code to <a href="http://www.pineight.com/lj65/" class="postlink">LJ65</a>.</div>
<br />So you have to do it manually for each sample?
<br />Wouldn't it be better to have samples padded to 64 bytes and use the trail as I suggested?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
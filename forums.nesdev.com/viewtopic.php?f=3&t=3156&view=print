<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Extended sound mixing</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Extended sound mixing</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=3156">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=3156</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Josh</b> [ Thu Apr 05, 2007 2:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Extended sound mixing</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Blargg's algorithms are great for mixing the standard five sound channels. But it recently occurred to me that there is likely to be an inherent challenge in devising an actual mixing algorithm for extended sound.
<br />
<br />On the Famicom, extended sound is generated by passing the standard audio output throught the cart, where the extended channels are mixed in by the cartridge's hardware. This means that a separate mixing algorithm might be necessary for each type of extended hardware - one algorithm for MMC5 boards, one for the FDS, one for VRCVI, one for Mr. Gimmick, and so on. This could be highly problematic.
<br />
<br />How do existing emulators (especially accurate ones like Nintendulator) handle this? Have any of the sound circuits been traced out well enough to figure how the mixing should be done?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Apr 05, 2007 9:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Extended sound mixing</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Josh wrote:</div><div class="quotecontent">On the Famicom, extended sound is generated by passing the standard audio output throught the cart, where the extended channels are mixed in by the cartridge's hardware. This means that a separate mixing algorithm might be necessary for each type of extended hardware - one algorithm for MMC5 boards, one for the FDS, one for VRCVI, one for Mr. Gimmick, and so on. This could be highly problematic.</div>
<br />No more problematic in theory than the fact that each mapper needs its own IRQ logic.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Thu Apr 05, 2007 1:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />For my emu I just guessed the output levels of the expansion sound based on what sounded good.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Josh</b> [ Fri Apr 06, 2007 1:27 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Extended sound mixing</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Josh wrote:</div><div class="quotecontent">On the Famicom, extended sound is generated by passing the standard audio output throught the cart, where the extended channels are mixed in by the cartridge's hardware. This means that a separate mixing algorithm might be necessary for each type of extended hardware - one algorithm for MMC5 boards, one for the FDS, one for VRCVI, one for Mr. Gimmick, and so on. This could be highly problematic.</div><br />No more problematic in theory than the fact that each mapper needs its own IRQ logic.</div>
<br />
<br />True enough. The difference, however, is that we have a pretty clear idea (thanks to excellent REing by Kevin Horton and others) how most mapper IRQ subsystems work, but we don't have any idea how most mapper sound mixing systems work.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Fri Apr 06, 2007 7:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you own the NES and the cartridge, you might get the best results by listenning the sound output. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /> As example, I dunno about the emulated Sunsoft's Gimmick extra sound volume levels.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Fri Apr 06, 2007 8:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Extended sound mixing</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Josh wrote:</div><div class="quotecontent">True enough. The difference, however, is that we have a pretty clear idea (thanks to excellent REing by Kevin Horton and others) how most mapper IRQ subsystems work, but we don't have any idea how most mapper sound mixing systems work.</div>
<br />Just in case I've already traced the MMC5 sound mixing circuits <a href="http://nesdev.com/bbs/viewtopic.php?t=2990" class="postlink">here</a>. Of course, that doesn't show what circuit is inside the MMC5, but I suspect there is an internal operational amplifier with external feedback resistor, or something similar.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dvdmth</b> [ Fri Apr 06, 2007 1:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Fx3 wrote:</div><div class="quotecontent">If you own the NES and the cartridge, you might get the best results by listenning the sound output.</div>
<br />You would need a Famicom, not an NES, since the NES doesn't support external sound mixing (except through the expansion port, which was never used).
<br />
<br />Also, your suggestion won't give the "best results" because trying to determine the output levels "by ear" is purely subjective and will carry a large margin of error.  More precise measurements will be needed to determine the proper values to use.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Fri Apr 06, 2007 7:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I see. By the way, it's subjective to emulate those extra channels by guessing the volume levels too... ^_^;; So, a Famicom playing the game would help, really. Uh, that's why I used 'might', heh <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Apr 06, 2007 8:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />An AV Famicom would give a cleaner signal than the old Famicom. But do the games mix audio any differently when played on the AV Famicom?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>NewRisingSun</b> [ Mon Apr 09, 2007 4:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />On the AV famicom, extended sound channels are too loud (or the AV Famicom's own sound channels are too quiet), which is why I don't use it. The Sharp Twin Famicom, which also has composite output, gets it right though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dvdmth</b> [ Mon Apr 09, 2007 8:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So the AV Famicom has louder external channels?  I guess this is most likely the result of the internal channels having a lower output at the time they pass through the cartridge.  The fact that there's variation from one Famicom model to another leaves me to think there's no real right answer.  Still, I'd like to see some measurements taken to determine the output levels of external channels relative to the internal ones (I'd even be interested in seeing the AV Famicom's output levels just to get an idea of how much louder the sound channels are).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bohan</b> [ Sat Apr 14, 2007 7:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>FDSFILL and MCK</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello
<br />
<br />MCK making FDS need FDSFILL.
<br />Who using FDSFILL and MCK?
<br />I know 2A03 and 6502 and family computer disk sound and NAMCO106.
<br />Who like FDSFILL?
<br />You can download FDSFILL?
<br />Who download FDSFILL?
<br />How about you?
<br />I ask download FDSFILL, because need making FDS.
<br />Hey, you know FDSFILL?
<br />Not only me, has people need download FDSFILL and using FDSFILL and MCK.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Richter X</b> [ Tue Apr 17, 2007 8:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: FDSFILL and MCK</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bohan wrote:</div><div class="quotecontent">Hello<br /><br />MCK making FDS need FDSFILL.<br />Who using FDSFILL and MCK?<br />I know 2A03 and 6502 and family computer disk sound and NAMCO106.<br />Who like FDSFILL?<br />You can download FDSFILL?<br />Who download FDSFILL?<br />How about you?<br />I ask download FDSFILL, because need making FDS.<br />Hey, you know FDSFILL?<br />Not only me, has people need download FDSFILL and using FDSFILL and MCK.</div>
<br />
<br />Dude, can you please stop flooding the forums asking around? If anyone knows they'll tell you. Now git!

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - New Powerpak mappers</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">New Powerpak mappers</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3439">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=3439</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>9</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>bunnyboy</b> [ Sun Jun 24, 2007 10:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If the cloners do the work of setting up massive production and distribution at a lower cost, why stop them?</div>
<br />This is EXACTLY why I have not just released every file I have.  I have no problems with people making their own mappers and will even pay people to do it, but since there is the real threat of illegal clones and people willing to buy illegal clones I do not plan on releasing the full schematics or full source.  
<br />
<br />Its very easy for other people to say they want a cheap knock off, but much harder when it is your own thousand hours of work and thousands of dollars spent.  Don't drive away the developers just because you want to pay less to the illegal fabricators instead.  If you want a "cheap" cart for everyone, you can always design it yourself and give away free.  It could even be better than mine!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>drk421</b> [ Sun Jun 24, 2007 12:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I hope you plan to make more, because I've shown my PowerPak to at least 10 people, and they all want one!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccovell</b> [ Sun Jun 24, 2007 5:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">bunnyboy wrote:</div><div class="quotecontent">Its very easy for other people to say they want a cheap knock off, but much harder when it is your own thousand hours of work and thousands of dollars spent. </div>
<br />So by the way, have you recouped your investment yet?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>bunnyboy</b> [ Sun Jun 24, 2007 5:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So by the way, have you recouped your investment yet?</div>
<br />Right now I have made about $2/hr for the year and a half of work  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />I will absolutely be making more.  Will be ordering boards soon now that the graphics problems are solved.  Should have the first mapper update soon, stupid mmc3 irq...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Sun Jun 24, 2007 10:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's mapper 23 (VRC2B/4):
<br /><!-- m --><a class="postlink" href="http://www.mediafire.com/?fkhzmmcnil4">http://www.mediafire.com/?fkhzmmcnil4</a><!-- m -->
<br />
<br />Again, no IRQ support as it counts scanlines, despite it counting with Phi2. Perhaps the Taito mapper counts using Phi2--not A12 as well? I think I can get it right eventually but I figured some people would like to play Contra (J) now :) I can't get anything to start with the original mapper 23.
<br />
<br />Beware though, I can't figure out how to disable WRAM from the main schematic (and the WRAM disable logic/loader code doesn't seem to work) so without a simple crack Wai Wai World, Contra and Goemon 2 won't start.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>bunnyboy</b> [ Sun Jun 24, 2007 10:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />WRAM enabling in the boot rom is broken, I have always been just hardwire enabling it in the schematic.  That does break some games.
<br />
<br />What is the correct way to enable/disable it using the ines header?  There is a battery bit, but if there is just wram with no batt that wont be set.  The iNES 2.0 header adds wram banks, but a 0 is interpreted as 8KB enabled if it isn't an iNES 2.0?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Great Hierophant</b> [ Mon Jun 25, 2007 4:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">WRAM enabling in the boot rom is broken, I have always been just hardwire enabling it in the schematic. That does break some games. <br /><br />What is the correct way to enable/disable it using the ines header? There is a battery bit, but if there is just wram with no batt that wont be set. The iNES 2.0 header adds wram banks, but a 0 is interpreted as 8KB enabled if it isn't an iNES 2.0?</div>
<br />
<br />Apparently so, which is why Low G Man does not work properly in the regular iNES format.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Mon Jun 25, 2007 5:07 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Here's mapper 23 (VRC2B/4)</div>
<br />Gradius 2 uses mapper 25, right? Or does it work with 23?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Mon Jun 25, 2007 10:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">mic_ wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Here's mapper 23 (VRC2B/4)</div><br />Gradius 2 uses mapper 25, right? Or does it work with 23?</div><br />Right, I could put out a mapper for that immediately, but it won't have IRQ support which I bet Gradius relies on.<br /><br /><div class="quotetitle">bunnyboy wrote:</div><div class="quotecontent">What is the correct way to enable/disable it using the ines header? There is a battery bit, but if there is just wram with no batt that wont be set. The iNES 2.0 header adds wram banks, but a 0 is interpreted as 8KB enabled if it isn't an iNES 2.0?<br /></div>
<br />I don't know the correct way to disable WRAM, I don't think there is such a thing. I thought the "battery" bit was "WRAM enable" which was always assumed to be battery backed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jagasian</b> [ Mon Jun 25, 2007 10:50 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What is kevtris's take on the NES PowerPak?  I'd love to hear his critique on the hardware and its mapper support, especially considering that he did a similar thing with his FPGA NES.  Maybe he could even help give tips on adding support for some of the more difficult, obscure, and obtuse mappers.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>peppers</b> [ Mon Jun 25, 2007 11:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@kyuusaku 
<br />I would like to request you use a different file host rapidshare would be ok, the problem with media fire is its very difficult to get file off if it during peak hours. I hate to be complaining about things like this but trying again and again to download something is frustrating

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dvdmth</b> [ Mon Jun 25, 2007 3:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The only proper way to add support for WRAM disable is to support NES 2.0.  Bunnyboy, or anyone else who can get in contact with kevtris, can you see if you can convince him to actually FINISH that NES 2.0 spec (i.e. the submappers)?  It's been a long time now.
<br />
<br />Oh, and bunnyboy, in case you missed it, I posted in another thread a few findings of mine when examining the boot ROM code in a hex editor.  Those problems are as follows:
<br />
<br />1. The stack pointer is never initialized in the boot ROM code.  This can be fatal if the Reset button is pressed while a game has a large amount of data on the stack.  Final Fantasy is an example of a game that can use a lot of stack space (every floor transition is a recursive subroutine call, with several bytes of data pushed to the stack before each call).  To fix this problem, the instruction LDX #$FF, followed by TXS, should be present in the boot ROM code before the first JSR instruction.  The problem cannot be fixed without a boot ROM update.
<br />
<br />2. On the NES, frame IRQ's are enabled by default on power-up.  To disable frame IRQ's, write either #$40 or #$C0 to register $4017.  At least one game out there will fail to boot if a frame IRQ is pending at the time the code begins executing (this game caused emulator headaches a while back, until the power-up state was better understood).  The fix can occur any time before the game begins execution, so a boot ROM update is not necessary as long as the code on the CF card disables the frame IRQ at some point.
<br />
<br />3. Not a serious issue, but I noticed that there are no zero-page opcodes in the boot ROM (except for indirect addressing modes).  Certainly not worth an update (if it ain't broke, don't fix it).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Mon Jun 25, 2007 7:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />bunnyboy, how can I disable WRAM? I've tried tying everything to do with WRAM high and it's still there, what's going on?
<br />
<br /><div class="quotetitle">peppers wrote:</div><div class="quotecontent">@kyuusaku <br />I would like to request you use a different file host rapidshare would be ok, the problem with media fire is its very difficult to get file off if it during peak hours. I hate to be complaining about things like this but trying again and again to download something is frustrating</div>
<br />OK, don't bother getting these files yet though because they're not polished.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>bunnyboy</b> [ Mon Jun 25, 2007 10:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">how can I disable WRAM?</div>
<br />You can either set the wramen input low  on the addresses block, or set both WRAM_PRG pins high (tristate).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kyuusaku</b> [ Tue Jun 26, 2007 6:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've tried both of those and it still appears that WRAM is mapped (!!) Contra etc still fails it's protection.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>9</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
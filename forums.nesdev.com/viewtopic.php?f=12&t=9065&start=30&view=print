<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Nintendo Super System (NSS) (Arcade Cabinet)</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Nintendo Super System (NSS) (Arcade Cabinet)</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=9065">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=9065</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>DogP</b> [ Tue Oct 23, 2012 1:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">Many-many-many thanks for the PROM dumps and confirming CounterOut and Pin-outs!!!</div><br />No prob... glad you were able to get it figured out!<br /><br /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">Looking at the OSD SPI-bus might be good thing to start with. I've tried to program it same as in original BIOS, but maybe I missed the chipselect or something like that.</div><br />I didn't decode the bits, but all three SPI pins show activity on the logic probe at boot, so I think your code is running.  I can hook up the logic analyzer tomorrow and check the data you're sending, if you don't find the problem before then.<br /><br />DogP

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Tue Oct 23, 2012 12:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I didn't decode the bits, but all three SPI pins show activity on the logic probe at boot, so I think your code is running. I can hook up the logic analyzer tomorrow and check the data you're sending, if you don't find the problem before then.</div><br />Good to know that there is some activity. Logic analyzer test would be neat - maybe it's revealing some obvious bug like wrong chipselect.<br /><br />The OSD control register settings seem to match up with the OSD datasheet, and they are taken from the NSS BIOS anyways, so they should be working. Internal Clock is on, so it should work even if SNES PPU is disabled. The OSC1,OSC2 stuff is stopped - looks a bit suspect, but the NSS BIOS is always doing that, too.<br /><br />One possible problem might be that the program is accessing the OSD chip too soon after reset. The datasheet is mentioning 'something' about 1ms on last page (not quite clear what that means, and how it fits to reset signals that might be generated by the NSS mainboard). Anyways, the OSD chip is re-initialized in each test screen - if you push some of the four joypad direction keys then the program should redo the OSD init far away from the reset signal.<br /><br />There should be also some new activity visible on the OSD SPI bus when pushing joypad DPAD buttons, that might also help to see if the Z80 is running or crashed.<br /><br />---<br /><br />Here are working PROM dumps for all 12 games: <!-- m --><a class="postlink" href="http://nocash.emubase.de/nss-keys.zip">http://nocash.emubase.de/nss-keys.zip</a><!-- m --> - the 5 new keys (with zeroes in first bit) will be working in next no$sns update. Your two new dumps worked find, and for the remaining three games I already guessed the first 8 bytes from INST ROM, and the 9th is usually containing some checksum, so I could calculate the missing value, which worked, too - except for Contra 3, that's using a &quot;wrong&quot; checksum in 9th byte - but I got it deciphered with the brute-force program.<br /><br />NB. Contra 3 is somewhat less than an experimental pre-prototype game, the INST ROM is almost empty, and even the main menu title string just says &quot;New Game 1&quot;. There isn't anything contra-specific in INST ROM, and I think also nothing NSS-specific in the PRG ROM.<br /><br />With the dumped font &amp; the datasheet details about things like character sizes and the odd scrolling/wrapping feature, my OSD emulation is now looking much nicer. Many thanks there!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Tue Oct 23, 2012 5:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's the new no$sns version with improved NSS emulation <!-- m --><a class="postlink" href="http://nocash.emubase.de/sns.htm">http://nocash.emubase.de/sns.htm</a><!-- m --> (it's currently completely freeware, all versions available with and without donations; I am totally broke so it doesn't matter if I don't get money or not). It's now working with all NSS games via the 12 keys in <!-- m --><a class="postlink" href="http://nocash.emubase.de/nss-keys.zip">http://nocash.emubase.de/nss-keys.zip</a><!-- m -->. My homebrew NSS game is also updated, <!-- m --><a class="postlink" href="http://nocash.emubase.de/magicflr.htm">http://nocash.emubase.de/magicflr.htm</a><!-- m --> (with nicer BG graphics, more OSD colors, and lowercase text, and punctuation marks matched to the OSD font). And, my NSS specs in <!-- m --><a class="postlink" href="http://nocash.emubase.de/fullsnes.htm">http://nocash.emubase.de/fullsnes.htm</a><!-- m --> are also updated (with info from the OSD datasheet and some other new notes).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>DogP</b> [ Wed Oct 24, 2012 3:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">One possible problem might be that the program is accessing the OSD chip too soon after reset. The datasheet is mentioning 'something' about 1ms on last page (not quite clear what that means, and how it fits to reset signals that might be generated by the NSS mainboard). Anyways, the OSD chip is re-initialized in each test screen - if you push some of the four joypad direction keys then the program should redo the OSD init far away from the reset signal.<br /><br />There should be also some new activity visible on the OSD SPI bus when pushing joypad DPAD buttons, that might also help to see if the Z80 is running or crashed.</div><br />I didn't have time to hook up the logic analyzer... I'll do that tomorrow night.  But I did do the controller test, and it does cause activity on the SPI pins (Left/Right do a lot, Up/Down do just a short blip), but there's still nothing on the screen.  So, the code is running, but apparently something isn't quite right.  Hopefully the logic analyzer will give us a clue.<br /><br /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">With the dumped font &amp; the datasheet details about things like character sizes and the odd scrolling/wrapping feature, my OSD emulation is now looking much nicer. Many thanks there!</div><br />Cool... glad it helped!<br /><br />DogP

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Wed Oct 24, 2012 7:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">it does cause activity on the SPI pins (Left/Right do a lot, Up/Down do just a short blip)</div><br />Sounds good (up/down just redraws the cursor, and left/right leaves/enters new pages).<br />So overall Z80 code and joypad input seem to be okay.<br /><br />Then the SPI data/clk/select signals are probably wrong. Or there's some Z80 OUT port externally disabling the OSD layer (like externally masking off the RGB signals from P0..P2 pins, or holding the /AC pin in reset state).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Wed Oct 24, 2012 8:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's an updated version of the test program - <!-- m --><a class="postlink" href="http://nocash.emubase.de/nss-test.zip">http://nocash.emubase.de/nss-test.zip</a><!-- m --><br />It's inserting a new OUT [72h],59h prior to the old OUT [72h],C3h chip-selection.<br />The NSS BIOS is doing the same thing.<br />Most of the databits are just cryptic random-garbage, but I think that bit6 is CLK, that might be important to be switched high BEFORE setting chipselect to low (which is probably done via bit4).<br />If that is fixing the OSD output, then I am having a massive problem with initial CLK levels... it's a bit similar to my PROM problem with CLK occuring upon releasing RESET.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>DogP</b> [ Thu Oct 25, 2012 2:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">Here's an updated version of the test program - <!-- m --><a class="postlink" href="http://nocash.emubase.de/nss-test.zip">http://nocash.emubase.de/nss-test.zip</a><!-- m --></div><br />Success!  Were there any specific tests that you wanted run on hardware?<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=108&amp;mode=view"><img src="./download/file.php?id=108&amp;t=1" alt="DSCF3862.JPG" /></a><br />
			<span class="gensmall">DSCF3862.JPG [ 75.02 KiB | Viewed 1220 times ]</span>
		

		<br />
	</div><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=109&amp;mode=view"><img src="./download/file.php?id=109&amp;t=1" alt="DSCF3863.JPG" /></a><br />
			<span class="gensmall">DSCF3863.JPG [ 117.26 KiB | Viewed 1220 times ]</span>
		

		<br />
	</div><br /><br />DogP

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Fri Oct 26, 2012 3:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Cool. Which tests?<br /><br />The OSD REG 3/7 tests are rather outdated (since having the datasheet).<br />The OSD OFFSET tests might be still interesting (as how I do understand the datasheet, the hori/verti offsets should move the screen in 4pixel/4scanline units, but not absolutely sure if did understood that correct).<br /><br />The TEST SLOTS test was mainly for seeing PROM Data/CounterOut and Title as hexdumps (on the three screens accordingly). That's no longer needed, too. But the Titles in clean-text (not the hex values) would be interesting, to see which slot maps there. If you plug in three cartridges, their titles should appear, probably in same order as how the slots are numbered. Slot selection is done via a 2bit number (hence 4 slots displayed), the last slot might be empty, garbage, or a mirror to another slot.<br /><br />Then 3 register dump screens would be interesting, so see initial values, and mirrors, and what is stored in unused bits and so on. For the CURRent port values, bit6 of the first byte should be &quot;blinking&quot; - don't know if there are more such bits showing activity?<br /><br />SELFTEST is measuring some timings, probably 60Hz vsync or vblank from OSD chip or SNES or so. But,  if the values are different as expected (and emulated in no$sns), it might have other timings, not related to 60Hz at all. (Btw. The selftest part is very slow, takes some seconds, sorry).<br /><br />And finally, the JOYPAD/PANEL/COIN screens would be also interesting - but there you might need the whole cabinet, not just the plain mainboard.<br />JOYPADs are of course normally going to the SNES, but of the joypad 6 buttons are also wired to the Z80. The 4 direction keys, and Button A, and (maybe, totally guessed:) Button B. And I don't if it's joypad 1 or 2 (or both) wired to the Z80.<br />Front PANEL should be correctly shown in the test, except, quite possible that I've swapped PageUp and PageDown with each other.<br />COIN/SERVICE should be also as shown. Would be (mildly) interesting if Coin 1 is the Left or Right slot. And aside from the Service button, the official wiring diagram also mentions a Test button - did you ever see that thing? The BIOS doesn't seem to use it at all. If it does exist, then it might show up in the Unknown Bits hexvalue.<br /><br />Cu, Martin

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>DogP</b> [ Tue Oct 30, 2012 3:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">The OSD OFFSET tests might be still interesting (as how I do understand the datasheet, the hori/verti offsets should move the screen in 4pixel/4scanline units, but not absolutely sure if did understood that correct).</div><br />Here are the first 3:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=117&amp;mode=view"><img src="./download/file.php?id=117&amp;t=1" alt="DSCF3864.JPG" /></a><br />
			<span class="gensmall">DSCF3864.JPG [ 77.41 KiB | Viewed 1094 times ]</span>
		

		<br />
	</div><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=118&amp;mode=view"><img src="./download/file.php?id=118&amp;t=1" alt="DSCF3865.JPG" /></a><br />
			<span class="gensmall">DSCF3865.JPG [ 63.35 KiB | Viewed 1094 times ]</span>
		

		<br />
	</div><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=119&amp;mode=view"><img src="./download/file.php?id=119&amp;t=1" alt="DSCF3866.JPG" /></a><br />
			<span class="gensmall">DSCF3866.JPG [ 58.62 KiB | Viewed 1094 times ]</span>
		

		<br />
	</div><br /><br />DogP

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>DogP</b> [ Tue Oct 30, 2012 3:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">The OSD OFFSET tests might be still interesting (as how I do understand the datasheet, the hori/verti offsets should move the screen in 4pixel/4scanline units, but not absolutely sure if did understood that correct).</div><br />And the 4th:<br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=120&amp;mode=view"><img src="./download/file.php?id=120&amp;t=1" alt="DSCF3867.JPG" /></a><br />
			<span class="gensmall">DSCF3867.JPG [ 60.05 KiB | Viewed 1094 times ]</span>
		

		<br />
	</div><br /><br /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">SELFTEST is measuring some timings, probably 60Hz vsync or vblank from OSD chip or SNES or so. But,  if the values are different as expected (and emulated in no$sns), it might have other timings, not related to 60Hz at all. (Btw. The selftest part is very slow, takes some seconds, sorry).</div><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=121&amp;mode=view"><img src="./download/file.php?id=121&amp;t=1" alt="DSCF3874.JPG" /></a><br />
			<span class="gensmall">DSCF3874.JPG [ 72.24 KiB | Viewed 1094 times ]</span>
		

		<br />
	</div><br /><br /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">And finally, the JOYPAD/PANEL/COIN screens would be also interesting - but there you might need the whole cabinet, not just the plain mainboard.<br />JOYPADs are of course normally going to the SNES, but of the joypad 6 buttons are also wired to the Z80. The 4 direction keys, and Button A, and (maybe, totally guessed:) Button B. And I don't if it's joypad 1 or 2 (or both) wired to the Z80.<br />Front PANEL should be correctly shown in the test, except, quite possible that I've swapped PageUp and PageDown with each other.<br />COIN/SERVICE should be also as shown. Would be (mildly) interesting if Coin 1 is the Left or Right slot. And aside from the Service button, the official wiring diagram also mentions a Test button - did you ever see that thing? The BIOS doesn't seem to use it at all. If it does exist, then it might show up in the Unknown Bits hexvalue.</div><br />I'll try it in the actual cab when I can... but yes, I the cab has a test button, but I remember it (seemingly) not do anything.  I think it's just there because it's standard for a JAMMA cabinet to have, and these cabs were made by Dynamo (they build a lot of arcade cabinets... and air hockey tables).  The test switch doesn't seem to do anything in your test software (I have a test switch on my testbench, and the unknown bits didn't change).<br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=122&amp;mode=view"><img src="./download/file.php?id=122&amp;t=1" alt="DSCF3875.JPG" /></a><br />
			<span class="gensmall">DSCF3875.JPG [ 54.1 KiB | Viewed 1094 times ]</span>
		

		<br />
	</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>DogP</b> [ Tue Oct 30, 2012 3:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">The TEST SLOTS test was mainly for seeing PROM Data/CounterOut and Title as hexdumps (on the three screens accordingly). That's no longer needed, too. But the Titles in clean-text (not the hex values) would be interesting, to see which slot maps there. If you plug in three cartridges, their titles should appear, probably in same order as how the slots are numbered. Slot selection is done via a 2bit number (hence 4 slots displayed), the last slot might be empty, garbage, or a mirror to another slot.</div><br />Yep, they were in order of slot 1, 2, and 3 (Super Mario World was in slot 1).<br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=123&amp;mode=view"><img src="./download/file.php?id=123&amp;t=1" alt="DSCF3868.JPG" /></a><br />
			<span class="gensmall">DSCF3868.JPG [ 99.75 KiB | Viewed 1092 times ]</span>
		

		<br />
	</div><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=124&amp;mode=view"><img src="./download/file.php?id=124&amp;t=1" alt="DSCF3869.JPG" /></a><br />
			<span class="gensmall">DSCF3869.JPG [ 84.63 KiB | Viewed 1092 times ]</span>
		

		<br />
	</div><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=125&amp;mode=view"><img src="./download/file.php?id=125&amp;t=1" alt="DSCF3870.JPG" /></a><br />
			<span class="gensmall">DSCF3870.JPG [ 99.29 KiB | Viewed 1092 times ]</span>
		

		<br />
	</div><br /><br />DogP

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>DogP</b> [ Tue Oct 30, 2012 3:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">nocash wrote:</div><div class="quotecontent">Then 3 register dump screens would be interesting, so see initial values, and mirrors, and what is stored in unused bits and so on. For the CURRent port values, bit6 of the first byte should be &quot;blinking&quot; - don't know if there are more such bits showing activity?</div><br />The only activity was on bit 6 of the first byte of some of the rows (a couple of the rows would blink between C0 and 80).<br /><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=126&amp;mode=view"><img src="./download/file.php?id=126&amp;t=1" alt="DSCF3871.JPG" /></a><br />
			<span class="gensmall">DSCF3871.JPG [ 81.23 KiB | Viewed 1092 times ]</span>
		

		<br />
	</div><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=127&amp;mode=view"><img src="./download/file.php?id=127&amp;t=1" alt="DSCF3872.JPG" /></a><br />
			<span class="gensmall">DSCF3872.JPG [ 82.64 KiB | Viewed 1092 times ]</span>
		

		<br />
	</div><br /><div class="attachtitle">Attachment:</div><div class="attachcontent">
			<a href="./download/file.php?id=128&amp;mode=view"><img src="./download/file.php?id=128&amp;t=1" alt="DSCF3873.JPG" /></a><br />
			<span class="gensmall">DSCF3873.JPG [ 83.87 KiB | Viewed 1092 times ]</span>
		

		<br />
	</div><br /><br />DogP

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>DogP</b> [ Wed Oct 31, 2012 12:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just a misc update... I shortened the cables to my SNES cart adapter by about 4&quot;, and it's much better... but still not 100%.  Using my original Mario Kart cartridge, there's only a few lines across the screen.  On my flash cart, the screen looks perfect, but the game still glitches when you drive.<br /><br />So, I guess I should just finish laying out the PCB and get it made... then see where I'm at.<br /><br />DogP

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Sun Dec 02, 2012 10:20 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Cool, many thanks for running the tests! And sorry about the late reply!<br />Seeing the I/O ports &amp; mirrors is nice.<br />The VBL test does apparently show VSYNC timings (not VBLANK), and with the bit being inverse of what I had guessed.<br />The OFF test disables NMIs (and does show wait-for-NMI timeouts as expected).<br />The NMI test was meant to enable NMIs (but does also run into timeouts, damn)<br /><br />Now I am bit clueless how to enable NMIs... either it requires some strange combination of Port 00h Bit0 and Bit1... maybe enable AND acknowledge or so... or maybe the NMI source is missing... it might be Vblank or Vsync from OSD chip... or fromSNES PPU... or maybe NMIs are triggered by SNES controller reads or whatever.<br /><br />Btw. if somebody wants to modify the Z80 source code of the test proggy: You could assemble that Z80-dialect with the Utility/AssembleFile function from my no$zx emulator.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>nocash</b> [ Tue Dec 25, 2012 5:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Nintendo Super System (NSS) (Arcade Cabinet)</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />DogP has tested the Game/Demo-mode detection being used in the Magic Floor NSS version (<!-- m --><a class="postlink" href="http://nocash.emubase.de/magicflr.htm">http://nocash.emubase.de/magicflr.htm</a><!-- m -->). I have been afraid that it might fail on real hardware.... but, it worked perfectly!<br />The detection works by reading the 17th bit from the serial joypad data, ie. same as the &quot;joypad-connected&quot; detection on normal SNES consoles. On the NSS the bit means &quot;joypad enabled&quot;. For a nice arcade-feeling one can use that detection to &quot;autostart when money inserted&quot;. <br />A pity that the original NSS games didn't support that feature, but at least they didn't show &quot;no joypad connected error&quot; messages in demo mode - which would have looked really bad.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - My NES raycaster - ROM link inside!</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">My NES raycaster - ROM link inside!</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=22&amp;t=5596">http://forums.nesdev.com/viewtopic.php?f=22&amp;t=5596</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Tue Nov 17, 2009 1:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well thanks for uploading, it's really impressive to see that on the NES, and it runs at a smooth rate, altough it's true it looks a bit blocky and I can't imagine myself playing a game with such graphics for hours.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Banshaku</b> [ Tue Nov 17, 2009 1:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />From a technical point of view, it is impressive to see it could be done on the nes. Now how much extra can be added (music, game logic etc) will be interesting to see. 
<br />
<br />Like Bregalad, I don't have must interest about the possible game (like mentioned before I'm not a fan of 3d maze) but can't wait to see the outcome.
<br />
<br />Continue the good work <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Tue Nov 17, 2009 1:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Wow! Really impressive!
<br />
<br />Thanks for uploading this; I was very curious to see this actually running on the NES. Not that I didn't believe it could; I just wanted to see the real, undeniable proof <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />.
<br />
<br />I do agree to some extent that it's a bit blocky, but I would not go as far as saying I wouldn't be interested in a game release. I think it could be one of those games where you'd get used to the graphics after sitting through them a while. Though I guess it really depends on how the sprites look. If the sprites are pretty clear, then I stand by my statement. If the sprites are really blocky too, I might reconsider.
<br />
<br />What I would do if I were making a game is probably simplify some of the textures. Any real "headache" that comes from walking around is caused by scaling complicated textures that aren't accurately displayed from far away. If you had stuff like the bricks on the red walls, and maybe not the more complicated textures on the yellow and purple ones, I think it would look better for a game.
<br />
<br />But still, we are dealing with the NES. What you've done is very impressive. Look at Space Invaders, then look at your demo. Same system. Same capabilities. Even the same mapper, am I not mistaking (Well, absence of a mapper)? All around, great job. That would have taken me a million years to code, and I probably would have given up on it after a while.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>strat</b> [ Tue Nov 17, 2009 1:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You think it could have textures like 8-Bit Killer?  Or would that be too much chr?
<br />
<br /><!-- m --><a class="postlink" href="http://www.youtube.com/watch?v=Dwj_1Dngzio">http://www.youtube.com/watch?v=Dwj_1Dngzio</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Nov 17, 2009 1:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Celius wrote:</div><div class="quotecontent">I was very curious to see this actually running on the NES. Not that I didn't believe it could; I just wanted to see the real, undeniable proof <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />.</div><br />I get it. A video looks the same as a video made from the prototype, so it's not nearly as interesting as seeing it running on the real thing. Plus there are a lot of people who post fake things all around the web (remember Sonic 2 for the NES?), and before anyone thought I was one of them I decided to just release some proof.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If the sprites are pretty clear, then I stand by my statement. If the sprites are really blocky too, I might reconsider.</div><br />The sprites will either be very blocky bitmaps or composed of simple common polygons (circles, squares and triangles of different colors) that can be pre-scaled. I'm still not sure what will work better.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What I would do if I were making a game is probably simplify some of the textures. Any real "headache" that comes from walking around is caused by scaling complicated textures that aren't accurately displayed from far away. If you had stuff like the bricks on the red walls, and maybe not the more complicated textures on the yellow and purple ones, I think it would look better for a game.</div><br />I completely agree with you. The less horizontal detail the textures have, the better they look in the game. But I don't want them too look too dull either, because when you're really close to the wall you can see how blocky the textures themselves are.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Look at Space Invaders, then look at your demo. Same system. Same capabilities. Even the same mapper, am I not mistaking (Well, absence of a mapper)?</div>
<br />I used mapper 2 because I plan on extending it into a real game and because I use CHR-RAM, but currently it would work in an NROM board just fine (I'm not updating the CHR-RAM in game or doing any bankswitching).
<br />
<br />Thanks for the interest guys. Let's see how far I can go with this!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Nov 17, 2009 1:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">strat wrote:</div><div class="quotecontent">You think it could have textures like 8-Bit Killer?</div>
<br />No way! =)
<br />
<br />IMO, 8-Bit Killer was not meant to look like a low-tech 3D game, it's goal was to capture the overall look of 8-bit 2D games and apply that to a high resolution raycaster. Although the textures are very pixelated, the walls and objects are rendered with very good resolution.
<br />
<br />I have only 28 columns of vertical resolution, and even that is a lot to ask of the CPU. For each column, 2 rays have to be traced (one looking for vertical walls and one looking for horizontal walls), and tracing those rays until they hit walls demands a lot from the CPU. With my current design, I can't possibly increase the horizontal resolution without killing the frame rate, even if there is a way to represent the better resolution with the tiles (which I don't think can be done with just 256 tiles anyway).
<br />
<br />I'm sure something that looks better can be done, something that renders tiles in real-time and uses both pattern tables, one for the top and one for the bottom, with mapper IRQs to split the screen. I'm sure that would look much better than what I have, but I'm also pretty sure there would be a big performance hit.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bananmos</b> [ Tue Nov 17, 2009 3:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's an idea: ever since I saw mic's raycaster, I always thought it'd be cool to use smooth horizontal scrolling via $2005 to make the movement less jerky when rotating your view. 
<br />
<br />The idea is that you fake the rotation by simply scrolling the view horizontally, for say 4 pixels, and only then render the new view, and scroll negatively for -4 pixels at the same time. How to translate your rotation angle will require some experimentation rather than orthodox correctness, but I think it could look really good despite being a crude hack. 
<br />
<br />If it works well you could even add some inertia to the player's movement, so that the angular velocity grows for a few frames when you start pressing left/right, and shrinks back to zero for a few frames when you release it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Nov 17, 2009 3:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bananmos wrote:</div><div class="quotecontent">Here's an idea: ever since I saw mic's raycaster, I always thought it'd be cool to use smooth horizontal scrolling via $2005 to make the movement less jerky when rotating your view.</div><br />This is a very interesting idea. A bit hard to implement though, because the 3D window doesn't use the whole horizontal area, so there'd be some left overs tiles visible at the sides unless they were covered with sprites. Using sprites to cover glitches while this is just a demo is OK, but once objects are added, using sprites for that will be a terrible waste.<br /><br />Another problem is the status bar. Once it's added to the bottom of the screen, it can't be scrolled along with the 3D window, so an IRQ would be needed to create a split between the 3D window and the status bar. Not terribly difficult to do, but in order to be done without much waste of time a mapper with scanline IRQs would have to be used, and I'm avoiding them as much as I can.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If it works well you could even add some inertia to the player's movement</div>
<br />Some inertia might be added even without the fine scroll. You see, I'm adding 2 units to the angles when turning, because 1 unit at 15 fps was too damn slow and frustrating. With inertia, the player would turn slightly slower at the start and at the end of the rotation, so it would look a bit smoother.
<br />
<br />Thanks for the suggestions.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon May 24, 2010 3:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thought some of you would be interested to know that walls are now solid. The first post has been updated with the <a href="http://membler-industries.com/tokumaru/tokumaru_raycaster_01.nes" class="postlink">new link</a>.
<br />
<br />I wasn't planning on working on this anymore, but the other day I was really annoyed at the lack of collision detection, so I spent a couple of hours on it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>UncleSporky</b> [ Mon May 24, 2010 3:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Nice!  I like how it acts just like a PC first person game should, with different "wall sliding" speeds depending on your angle facing it.
<br />
<br />EDIT: I see all the texture and map info is in the first post.  How many 8x16 wall textures are you limited to using?  Could you write a huge message on the wall?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon May 24, 2010 4:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">I like how it acts just like a PC first person game should, with different "wall sliding" speeds depending on your angle facing it.</div><br />That's actually a side effect of just adding one of the displacement components (X or Y), since the wall prevents the other one from being used. So I'd say this is the natural behavior, we don't have to do anything in particular for it to work like this.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">How many 8x16 wall textures are you limited to using?  Could you write a huge message on the wall?</div>
<br />I think you can have 128 different types of walls (bit 7 is used to select between empty and solid, so only codes $80-$FF are solid blocks), each with its own texture. Enough for the whole alphabet, which means you can "type" whatever you want if each letter occupies a whole block. Also, textures can reside in RAM, which means they can be changed/animated (this is something I've been wanting to try).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>UncleSporky</b> [ Mon May 24, 2010 5:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">I like how it acts just like a PC first person game should, with different "wall sliding" speeds depending on your angle facing it.</div><br />That's actually a side effect of just adding one of the displacement components (X or Y), since the wall prevents the other one from being used. So I'd say this is the natural behavior, we don't have to do anything in particular for it to work like this.</div><br />That's what I figured, but it's still a nice effect. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I think you can have 128 different types of walls (bit 7 is used to select between empty and solid, so only codes $80-$FF are solid blocks), each with its own texture. Enough for the whole alphabet, which means you can "type" whatever you want if each letter occupies a whole block. Also, textures can reside in RAM, which means they can be changed/animated (this is something I've been wanting to try).</div>
<br />
<br />Cool.  I didn't think about animating at all when I made these:
<br />
<br /><img src="http://img686.imageshack.us/img686/3369/1bitwalls.png" alt="Image" />
<br />
<br />Found this font too:
<br />
<br /><img src="http://img714.imageshack.us/img714/6058/8x16.png" alt="Image" />
<br />
<br />You were talking on previous pages about wall colors.  I can tell from the way it's currently built that every wall must be comprised of one color which is dithered with black to show a darker shade.  Is there any way to use less than 3 unique wall colors, but instead use two different colors for one wall?  For example, A level with that has nothing but blue/green walls with no dithering?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Mon May 24, 2010 6:14 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />When I saw those graphics, the first thing on my mind was "Which TI83 game is this for?"

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>UncleSporky</b> [ Mon May 24, 2010 6:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I didn't really take into account how stretched things get, though.  They'll probably look more like this:
<br />
<br /><img src="http://img525.imageshack.us/img525/456/76206558.png" alt="Image" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon May 24, 2010 7:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">I didn't think about animating at all when I made these:</div><br />Very interesting textures! I should try some of them... would that be OK?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I can tell from the way it's currently built that every wall must be comprised of one color which is dithered with black to show a darker shade.</div><br />Yes, that's correct. There's also some extra dithering to differentiate perpendicular walls... without that it would be pretty hard to make things out at that small resolution.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Is there any way to use less than 3 unique wall colors, but instead use two different colors for one wall?  For example, A level with that has nothing but blue/green walls with no dithering?</div>
<br />That should be possible. As long as the resolution (4 "pixels" per tile) and the color depth (1 bit per "pixel") are the same, the same logic could be used. The dynamic palette management not be necessary, so it would probably have to be disabled.
<br />
<br />I'd rather keep the dithering that differentiates perpendicular walls though, because I really believe they help with the spacial perception a lot. But honestly, I think that a level where all walls use the same two colors would be pretty boring. I'd much rather have monochrome textures in more colorful levels.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=12&amp;t=3160" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2007-05-10T07:26:14-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=12&amp;t=3160</id>
<entry>
<author><name><![CDATA[creaothceann]]></name></author>
<updated>2007-04-11T14:31:40-07:00</updated>
<published>2007-04-11T14:31:40-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23115#p23115</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23115#p23115"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23115#p23115"><![CDATA[
I see. Thanks. <img src="http://forums.nesdev.com/images/smilies/icon_surprised.gif" alt=":o" title="Surprised" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=290">creaothceann</a> — Wed Apr 11, 2007 2:31 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2007-04-11T14:01:38-07:00</updated>
<published>2007-04-11T14:01:38-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23114#p23114</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23114#p23114"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23114#p23114"><![CDATA[
Disch has implemented the S-SMP (the CPU inside the APU) but not the S-DSP. Probably only a few games will hang without a DSP, as most don't read anything back from it, only write to it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Wed Apr 11, 2007 2:01 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2007-04-11T12:07:13-07:00</updated>
<published>2007-04-11T12:07:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23109#p23109</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23109#p23109"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23109#p23109"><![CDATA[
<div class="quotetitle">creaothceann wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Disch wrote:</div><div class="quotecontent">I'd like to get games running before I worry about audio<br /></div><br />Won't many games hang waiting for the APU to respond?</div><br /><br />A lot will hang if the SPC doesn't respond, yes.  However the SPC can still respond if you're not generating audio.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Wed Apr 11, 2007 12:07 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2007-04-11T11:45:33-07:00</updated>
<published>2007-04-11T11:45:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23107#p23107</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23107#p23107"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23107#p23107"><![CDATA[
<div class="quotetitle">creaothceann wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Disch wrote:</div><div class="quotecontent">I'd like to get games running before I worry about audio<br /></div><br />Won't many games hang waiting for the APU to respond?</div><br />A lot of games don't block on the APU; they block on the PPU.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Apr 11, 2007 11:45 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[creaothceann]]></name></author>
<updated>2007-04-11T10:47:36-07:00</updated>
<published>2007-04-11T10:47:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23105#p23105</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23105#p23105"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=23105#p23105"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br />I'd like to get games running before I worry about audio<br /></div><br />Won't many games hang waiting for the APU to respond?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=290">creaothceann</a> — Wed Apr 11, 2007 10:47 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2007-04-06T17:58:13-07:00</updated>
<published>2007-04-06T17:58:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22958#p22958</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22958#p22958"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22958#p22958"><![CDATA[
An SMC would be easiest for me since I wouldn't have to write a seperate loader.<br /><br />Emu source wouldn't be all that useful to me -- at least not right now.  I already have the SPC mostly done except for the DSP (which I don't have much interest in at this point -- I'd like to get games running before I worry about audio).<br /><br />Thanks blargg ^^<br /><br />I don't suppose you have or know of a main SNES CPU test ROM?  Something like nestest would be bliss.  Wishful thinking, I know, but no harm in asking  ;D<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Fri Apr 06, 2007 5:58 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2007-04-06T17:33:06-07:00</updated>
<published>2007-04-06T17:33:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22955#p22955</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22955#p22955"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22955#p22955"><![CDATA[
What form would work best for tests? I can generate any of these three easily: raw data that you put directly into the SPC memory space then execute, an SPC music file, or an SMC SNES ROM. The first two do text console I/O via the four I/O registers using a simple protocol. The SMC does this internally and provides a SNES-side driver that displays the text on screen and encodes it into serial data over one of the controller I/O lines, which you can decode using my handy Blargg_Serial emulator. You can run the SMC in a normal emulator.<br /><br />If it's any help I can also post my SPC emulator code, whose DSP is written in a clear style.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Fri Apr 06, 2007 5:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2007-04-06T17:18:13-07:00</updated>
<published>2007-04-06T17:18:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22954#p22954</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22954#p22954"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22954#p22954"><![CDATA[
<div class="quotetitle">blargg wrote:</div><div class="quotecontent"><br />Think of the order they're needed by the instruction,<br /></div><br /><br />Makes sense.  That explains CBNE -- can't branch unless you first compare the target address.  I switched DBNZ, BBC, and BBS around as well, and everything seems to be working now.  Now if I can only track down this elusive 65c816 bug!  &gt;=o<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Here's a URL to the most up-to-date spc700 doc that I know of (change the filename for the other docs):<br /></div><br /><br />Sweet -- thanks.  ^^<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />So, you're writing an SPC emulator. I better start posting my validation tests tomorrow; I've got tons. :)<br /></div><br /><br />I started a SNES emu as sort of an educational project.  I'm just having so much fun ^^.<br /><br />I am very interested in any test ROMs you might have.  Those are invaluable!  Especially anything involving the CPU -- as that's the hardest to track down bugs in.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Fri Apr 06, 2007 5:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2007-05-10T07:26:14-07:00</updated>
<published>2007-04-05T23:36:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22899#p22899</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22899#p22899"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22899#p22899"><![CDATA[
I'll chastise anomie in an e-mail for you, since that is blatantly wrong. I think you've covered the cases of two non-implied operands. Think of the order they're needed by the instruction, where the source is always fetched before the destination in a RMW instruction (so since dest is listed first, you get opposite order for the dp,ds addressing mode).<br /><br />I looked and the much updated DSP doc isn't up yet (apudsp.txt). I'll have to find out what the holdup is, as should have a ton more timing information.<br /><br />So, you're writing an SPC emulator. I better start posting my validation tests tomorrow; I've got tons. :)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Thu Apr 05, 2007 11:36 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2007-04-05T22:08:43-07:00</updated>
<published>2007-04-05T22:08:43-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22897#p22897</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22897#p22897"/>
<title type="html"><![CDATA[SPC:  binary storage of multiple operands]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3160&amp;p=22897#p22897"><![CDATA[
I've been using Anomie's spc700.txt that I got from romhacking.net (I would give a more direct link, but the site seems to be down now).  Inside the doc it says:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Operands are encoded little endian, with multiple operands stored last to first. For example, "OP A, B" is stored in memory as "OP B A". Mnemonics are represented as "OP dest, src" where applicable.<br /></div><br /><br />This is the only part in the doc which makes any mention of how multiple operands are stored.  And while this appears to be true for direct page-&gt;direct page instructions (MOV $xx, $xx  and similar)... I just spent the last hour debugging my SPC emu only to find that it's NOT true for CBNE (which has the direct page address stored first)<br /><br /><br />I began looking at other docs to see if they address the issue, only to find that none of them (at least none of the ones I have) even touch on this subject.<br /><br />So my question is... how are multiple operands REALLY stored?  If CBNE contradicted Anomie's doc.. I suspect other instructions do too (DBNZ is suspect, as are maybe BBC/BBS)... but I don't want to have to pick and guess.  Can anyone give me a definative answer?<br /><br />Thanks<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Thu Apr 05, 2007 10:08 pm</p><hr />
]]></content>
</entry>
</feed>
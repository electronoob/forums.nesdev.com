<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - young indiana jones new ppu discovery, nestopia help...</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">young indiana jones new ppu discovery, nestopia help...</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=6401">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=6401</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>12</strong> of <strong>14</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>James</b> [ Mon Jun 20, 2011 6:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">*Spitfire_NES* wrote:</div><div class="quotecontent">hey james, about the ninja gaiden thing, shouldnt i be looking in the mmc mapper?</div>
<br />just a guess, but that's where I'd look first.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Tue Jun 21, 2011 9:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />ok thanks james, guess the best thing to do is go back and find the last release to play it right, then go back and compare the 2 files and see what/if anything changed. 
<br />
<br />i wonder if the ninja gaiden bug would be the same as the medusa/cross bug in castlevania 1. ill keep an eye out for anything new or whatnot plasturion too. 
<br />
<br /><img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plasturion</b> [ Tue Jun 21, 2011 2:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I compared both versions v1.39 and 1.40, and see the changes are only in Cartridge, Apu, Cpu, and Ppu, but mappers seems to be unchanged, and I think it might something to be with added new dendy video mode, and probably we have to look in ppu, but i'm not sure. You can check setting Dendy in Options-&gt; Preferences -&gt; Favored system, and then open ninja gaiden. The big Moon looks as suppose to be.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Wed Jun 22, 2011 7:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />hmm interesting think maybe a change might be needed in dendy. also hey plasturion did you get my message on here by the way?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plasturion</b> [ Wed Jun 22, 2011 7:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I give up, there was many changes in main units... so i'm not interested to fix it. I think sometimes it runs even in Pal, but it hangs rather. 
<br />
<br />Check Famicom dedicated cart (NTSC) - Ninja Ryukenden (J), the moon looks normal with 60Hz, maybe Ninja Gaiden is indeed dump of Dendy or NES only (PAL) system (or maybe it has some dev-crap with translations), and maybe thats how it should looks like on real hardware as now you can see on 1.40.
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The graphical error shown in Ninja Gaiden looks like the attribute table isn't getting updated fully. Since the same ROM image works in other emulators, this is probably a timing-related bug (PPU code has a problem, or cycle counting isn't 100% accurate).</div>
<br />Maybe it might be the reason.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Thu Jun 23, 2011 11:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks plasturion. Its ok. I appreciate all you have done friend. Let
<br />Me know what other adjustments you make. Im workin on the
<br />list of ips patched games to add to the database.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mic_</b> [ Thu Jun 23, 2011 1:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">maybe Ninja Gaiden is indeed dump of Dendy or NES only (PAL) system </div>
<br />If it was a dump from a PAL cart it should be named "Shadow Warriors", or at least that's what it should say on the title screen. I don't know what the Dendy version was called, or if there was one.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>BMF54123</b> [ Fri Jun 24, 2011 2:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm not sure I understand this Castlevania "bug"...are Medusa heads not supposed to drop crosses? Or does some sort of bug occur after picking up a cross? If it's the former, wouldn't it be a CPU bug (which would certainly break many other games) or a bad/hacked ROM, and not a timing bug? And how could it possibly relate to the discolored moon in Ninja Gaiden?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plasturion</b> [ Mon Jun 27, 2011 5:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is about second boss - queen medusa, while beating her sometimes she drops crucifix, but maybe this item are granted from snakes which she drops too. =] I've played on FCEUX, and she drops blue flacon, and hearts. Probably there's any relation between Castlevania and Ninja Gaiden, but who knows.
<br />
<br />-------------------------------------------
<br />Here it is - another release with new videofilter, and some db entries:
<br /><a href="http://detach.republika.pl/Nestopia-1.40.1-IF5-unofficial.zip" class="postlink">IndyFix5</a>
<br />-------------------------------------------

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Mon Jun 27, 2011 7:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />hey plasturion, so you can confirm that there is a difference in what she drops from nestopia to fce ultra? possibly timing, but i find it hard to see too how those both could be related or maybe i'm wrong. 
<br />
<br />was out of town so didnt get to see many reponses but looks like you made some database entries. great work ill have to check it out. 
<br />
<br />the only game ive tried yet to work that is ips patched is contra with intro. i guess its the american contra with the japanese scenes added into it.  <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plasturion</b> [ Mon Jun 27, 2011 8:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, sometimes she drops crucifix in Nestopia1.40, I've played also with v1.39 and there she drops bag of money, and even cross to throw. But maybe there's some randomize item selecting for example at beginning of stage, or is somehow calculated. (I loaded few times to check if she drops other different items but drops the same, but maybe I should start from beginning to confirm this wired rule). Is this bad she's dropping something? 
<br />
<br />About db entries - i think there's too much with different versions and languages dedicated for one game, most common problem is mapper 23, and most often is using Konami Vrc2 type, I think the best choice is to set default type of mapper 23 to konami vrc2. Send me some titles if you found something new.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Mon Jun 27, 2011 10:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />hmm interesting. from what i remember you can still beat the level though, i think i used a savestate to make sure i could beat it. 
<br />
<br />hmmm, im gonna try a couple things and see what happens. im thinking something needs to be either tweaked or backported in to fix these problems, only thing is no one knows where or what the issue is yet. haha. 
<br />
<br />im still trying older versions of nestopia to see when the problems first arose and when they didnt. alot has already been done to make nestopia even better thanks to you plasturion. 
<br />
<br />im looking at games to send to you to add into the databse as well. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />thanks again for all your hard work!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Mon Jun 27, 2011 4:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />i poked around and see that free fall prototype is not working correctly. looks like its not because of the changes you made plasturion. seems like its been set to a diff mapper? WTH haha. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plasturion</b> [ Tue Jun 28, 2011 1:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I see that Secret Scout (prototype) is not working too. I dig up mapper 11 and removed one line added since 1.38 (mappers rewrite)
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;NES_POKE_AD&#40;Ic74x377,8000&#41;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;ppu.Update&#40;&#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;//data = GetBusData&#40;address,data&#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;prg.SwapBank&lt;SIZE_32K,0x0000&gt;&#40; data &#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;chr.SwapBank&lt;SIZE_8K,0x0000&gt;&#40; data &gt;&gt; 4 &#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br /></div><br /><br />I tested all Colordreams (mapper 11) games and everything is now ok.<br />Maybe this "data = GetBusData(address,data);" is unnecessary, or Martin put it by mistake, but i don't believe that. =]<br /><br />and here what is doing:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;uint Board::GetBusData&#40;uint address,uint data&#41; const<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;NST_VERIFY&#40; data == prg.Peek&#40;address &amp; 0x7FFF&#41; &#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return data &amp; prg.Peek&#40;address &amp; 0x7FFF&#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125;</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Jun 28, 2011 4:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The method GetBusData(address,data) appears to simulate the effect of bus conflicts. If this game uses bus-conflict-free ROMs like AOROM does (R/W connected to a positive chip enable) or like ANROM does (/CE = /PRGSEL OR !R/W), the line should not be used. Perhaps the prototype board uses one of these methods of bus conflict avoidance.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>12</strong> of <strong>14</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
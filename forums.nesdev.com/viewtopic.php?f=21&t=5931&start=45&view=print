<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Art showcase</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Art showcase</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=21&amp;t=5931">http://forums.nesdev.com/viewtopic.php?f=21&amp;t=5931</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Feb 11, 2010 12:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Gradualore wrote:</div><div class="quotecontent">Are we talking about different tasks here?</div><br />One task is allowing people who know how NES graphics work to edit NES graphics in a specialized MS Paint clone. Another task is dealing with complaints from people who don't understand how the program works because they don't understand how NES graphics work. A third task is dealing with a large library of images that can't be hand-pixeled in the first place, such as photos from a camera or CG renderings.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It seems like what you (tepples/tokumaru) are talking about is importing any arbitrary bitmap or photo and achieving reasonable results on the NES? That sounds like a big challenge!</div>
<br />It's been solved before, although on a much bigger color space (16 palettes of BG + 15 colors, 8x8 pixel attribute areas). See <a href="http://deku.rydia.net/program.html" class="postlink">Quither</a>. And in fact, the gbadev.org thread that led to the creation of Quither came from a similar suggestion of computing an attribute area's mean color.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu Feb 11, 2010 12:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Gradualore wrote:</div><div class="quotecontent">I forgot to mention, when importing, it asks the user to choose the background color, it does not bother trying to find it.</div><br />Although looking for the colors that appear in every palette that has 4 colors wouldn't be that hard (if there are more than one, you could just pick any of them to be color 0 or ask the user to select which one).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Are we talking about different tasks here?</div><br />I guess so.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It seems like what you (tepples/tokumaru) are talking about is importing any arbitrary bitmap or photo and achieving reasonable results on the NES? That sounds like a big challenge!</div>
<br />Yeah, and the result will never be as good as converting each image by hand. A human can always reshape things and change the brightness of certain areas so that it all fits better within the attribute boundaries.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu Feb 11, 2010 12:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Gradualore wrote:</div><div class="quotecontent">I felt it was a reasonable constraint to assume that the input graphics abide by NES graphics constraints, and report errors when those constraints are violated.</div>
<br />That's kinda how my level map converter works. You give it an image with all the metatiles and an image with the level, then it matches the blocks and encodes everything in the format the game uses. If a block isn't found, it aborts and reports the error.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>UncleSporky</b> [ Thu Feb 11, 2010 5:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Tokumaru, I would really like to see some examples of the output of your program, it sounds very interesting.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu Feb 11, 2010 6:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">Tokumaru, I would really like to see some examples of the output of your program, it sounds very interesting.</div>
<br />The resulting files probably wouldn't be of much use to other people because my level format is *very* specific.
<br />
<br />My level format uses various sizes of blocks based on the 16x16-pixel ones: 4 of them make 32x32-pixel blocks, 4 of these make 64x64-pixel blocks, which make 128x128-pixel blocks, which make 256x256-pixel blocks, which are placed in the level map. This would be impossible to make by hand, so I coded the converter that creates all these blocks for me (and reports back how many blocks were used).
<br />
<br />It's just a command line application that  takes a 256x256-pixel image containing images of the 256 16x16-pixel blocks that can be used, and one level map image (with dimensions multiples of 256) for each level that is supposed to share the same blocks. The program will then output a binary files with all the blocks (32x32, 64x64, 128x128 and 256x256) and a file for each level map (which are basically references to the 256x256 blocks). It can also do the opposite, and generate images of the levels based on the binary data (useful, because I don't have to keep the huge level images).
<br />
<br />It has it's limitations though. For example,  I didn't want to mess with any libraries or anything so it only works with PCX images, because they are easy to work with, and have RLE compression (level image can be pretty large, so a bit of compression helps). Also, it doesn't have very strong error handling, so it may crash if you do something wrong.
<br />
<br />Is there really a demand for such an application? I figured that something like this would be much easier to code than a full-featured level editor with an user interface, and I could use good image editors for drawing the levels (GIMP with grid snapping on works really well). I guess it could be easily changed to output other level formats, but everyone has their own format, there isn't something universal we can use.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Feb 12, 2010 3:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">Tokumaru, I would really like to see some examples of the output of your program, it sounds very interesting.</div><br />The resulting files probably wouldn't be of much use to other people because my level format is *very* specific.</div>
<br />I think he was talking about your "photo converter". And I second his request. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>UncleSporky</b> [ Fri Feb 12, 2010 5:33 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">It has it's limitations though. For example,  I didn't want to mess with any libraries or anything so it only works with PCX images, because they are easy to work with, and have RLE compression (level image can be pretty large, so a bit of compression helps).</div>
<br />Hm, none of the programs I commonly use other than Photoshop can do PCX.  Speaking for myself, TGA seems like a good choice, as it can do color-mapped images with RLE compression, and GraphicsGale supports it.
<br />
<br />Anyway I was initially talking about your photo-converting program but I think your level creator sounds great too.  To be able to assemble a level from a picture would be very useful, I could probably put it to use, quirks and all. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Feb 12, 2010 5:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">Speaking for myself, TGA seems like a good choice, as it can do color-mapped images with RLE compression, and GraphicsGale supports it.</div>
<br />Windows BMP also supports RLE compression in 4-bit and 8-bit modes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Feb 12, 2010 6:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">I think he was talking about your "photo converter". And I second his request. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br /><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">Anyway I was initially talking about your photo-converting program</div><br />Oh, sorry about that. The thing is that it isn't a program! I follow that "algorithm" manually, using Photoshop. =)<br /><br />Here's an example though, using that image from the Wikipedia article that talks about palettes:<br /><br /><img src="http://img96.imageshack.us/img96/3861/birdoriginal.png" alt="Image" /> <img src="http://img694.imageshack.us/img694/5286/birdnes.png" alt="Image" /><br />This didn't work out so well IMO. All the green is gone.<br /><br /><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">Hm, none of the programs I commonly use other than Photoshop can do PCX.</div><br />Yeah, not many programs work with PCX anymore. This was mainly for me though, and I found GIMP to be the perfect tool to edit the levels, so the fact that it supported the format was enough for me.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Speaking for myself, TGA seems like a good choice, as it can do color-mapped images with RLE compression</div><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Windows BMP also supports RLE compression in 4-bit and 8-bit modes.</div>
<br />Initially I was gonna use BMP, but found some complications (don't remember which), so I switched to PCX. But out of curiosity, I saved the same level map image using the 3 formats (PCX, BMP and TGA), and PCX seriously outperformed the other two. So it's not only simpler to code, but it also compresses better.
<br />
<br />The reason for this is that the RLE implementations of the other 2 formats encode the lengths of uncompressable runs too (and there are many of those in the tiny NES tiles), which causes expansion of the uncompressable data. PCX however uses the higher codes (192 and up) to indicate compressed runs, and since the images never have that many colors, uncompressable data does not expand, because they use codes &lt; 192.
<br />
<br />EDIT: I may have screwed up with that image, as some areas appear to have 5 colors. Whatever, it doesn't look good anyway.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Feb 12, 2010 10:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's an example of my "algorithm" that appears to have the correct amount of colors:
<br />
<br /><img src="http://img442.imageshack.us/img442/2963/houseoriginal.png" alt="Image" />  <img src="http://img690.imageshack.us/img690/5421/housenes.png" alt="Image" />
<br />This uses a lot of dithering, but the red still managed to disappear. Some of the green remained, but the only strong color is the blue of the sky.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Feb 12, 2010 10:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It did a good job recognizing the sky's border, but hand-tweaking of each image's palette is still likely to be necessary. What happens when you freeze the blue palette and add a palette including $26?
<br />
<br />
<br />At this point, I almost smell split.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Feb 12, 2010 10:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">What happens when you freeze the blue palette and add a palette including $26?</div>
<br />Photoshop didn't like me replacing a gray with red, several parts of the house became pink.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Feb 12, 2010 10:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><div class="quotetitle">thefox wrote:</div><div class="quotecontent">I think he was talking about your "photo converter". And I second his request. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br /><div class="quotetitle">UncleSporky wrote:</div><div class="quotecontent">Anyway I was initially talking about your photo-converting program</div><br />Oh, sorry about that. The thing is that it isn't a program! I follow that "algorithm" manually, using Photoshop. =)</div>
<br />Is it possible to tell Photoshop to reduce to 4 colors and to choose the colors from NES palette only? If I "force" the NES palette it doesn't let me specify the number of colors as 4. Or do you just reduce to any 4 and modify the palette by hand to match NES?
<br />
<br />EDIT: or do you manually select the 4 color palette beforehand and reduce to it?
<br />
<br />Anyways, I think the results are pretty good considering the limitations.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Fri Feb 12, 2010 11:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent">Or do you just reduce to any 4 and modify the palette by hand to match NES?</div><br />That is one option, but I found out that it works better to first convert to the complete NES palette (using dithering) and then convert back to 24-bit and reduce again using the selective algorithm without dithering, so that you end up with 4 colors that belong to the NES palette. The only color I force during this second color reduction is the background color (color 0).<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Anyways, I think the results are pretty good considering the limitations.</div>
<br />I guess we are used to some of the introduced artifacts. In video coding, color bleeding is not so uncommon. I believe that when seen on a TV these images could look like low-resolution digital video from the early 90's.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Fri Feb 12, 2010 4:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">I think a 4-screen VRAM mode would work well for a background image.  You would have the same nametable data in all screens, but you could set the attributes individually and have 16x4 pixel attribute size.  All you have to do then is write to $2000 every hblank, that's easy.  4-screen mode is a good option if you're using CHR-RAM.  That could work for some types of games, if the background updating is slow enough where the workload can be safely doubled to provide a 16x8 attribute size.  This would be like simulating H or V mirroring in software, but being allowed to use an extra attribute table, see what I mean?</div>
<br />I'm afraid $2000.1 writes wouldn't take effect mid-frame.
<br />Also, modifying a noramal CHR-RAM board to get 4-screen mirroring sounds like doable - you'd have to replace the 8k CHR-RAM by a 32k one, force it to be always enabled, and force the internal CIRAM to be always disabled. That's even less rewiring than on the PRG side.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - young indiana jones new ppu discovery, nestopia help...</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">young indiana jones new ppu discovery, nestopia help...</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=6401">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=6401</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>6</strong> of <strong>14</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Thu May 05, 2011 3:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />thanks tepples. so what exactly is that? LOL

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu May 05, 2011 4:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />AND with $FC1F clears out the Y tile position while preserving the rest of the VRAM address.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Thu May 05, 2011 5:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">I'll superimpose $FC1F on the bit definitions for the current VRAM pointer (loopy_V)</div>
<br />
<br />Well, I wouldn't say "super", but $7C1F sounds more accurate, even if isn't a major impact after all.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>James</b> [ Thu May 05, 2011 7:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />yeah, $7C1F is more accurate.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plasturion</b> [ Thu Jun 02, 2011 2:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi, guys. I just wanna say hi and thanks for discover a way to fix problem with this game. I've only wrote some kind of emu friendly patch, that helped me fceux and breakpoints, and also was amazed what the reading $2007 is really doing. This threat is interesting, so thanks a lot. Now nice be seeing Nestopia or FCEUX doing the same what nemulator does.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zelex</b> [ Thu Jun 02, 2011 10:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think that the odd behavior also happens when the big bombs goes off in the first level.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zelex</b> [ Thu Jun 02, 2011 8:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Put this fix into nezulator <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Thu Jun 02, 2011 9:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />im still trying to figure out what to put into nestopia to fix it. blahhh...maybe someone who knows what the heck they are actually doing can post some info haha. :p

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zelex</b> [ Thu Jun 02, 2011 9:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; <br />updateVramAddress: function&#40;&#41; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; if &#40;this.scanline &gt;= 21 &amp;&amp; this.scanline &lt;= 260 &amp;&amp; &#40;this.f_bgVisibility || this.f_spVisibility&#41; &#41; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40;this.f_addrInc == 1&#41; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40;&#40;this.vramAddress &amp; 0x7000&#41; == 0x7000&#41; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.vramAddress &amp;= 0x0FFF;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch&#40;this.vramAddress &amp; 0x03E0&#41; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 0x03A0: this.vramAddress ^= 0x0800; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 0x03E0: this.vramAddress &amp;= 0xFC1F; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default: this.vramAddress += 0x20; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125; else &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.vramAddress += 0x1000;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125; else &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.vramAddress += 1; // possibly wrong<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125; else &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Increment by either 1 or 32, depending on d2 of Control Register 1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.vramAddress += &#40;this.f_addrInc==1?32:1&#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.vramAddress &amp;= 0x7FFF;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &#125;,<br /></div>
<br />
<br />this gets called whenever you do a read or write to 2007

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zelex</b> [ Thu Jun 02, 2011 9:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Off-topic, any idea where I can get info on the .fm2 and .fcm formats, so I can play back TAS videos in my emu?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plasturion</b> [ Fri Jun 03, 2011 2:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I know these are FCEU formats... but I thinka you asking for description.
<br />You can find some info in docs of source code FCEUX. ... here what the first lines of these files contains.
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">FM2 is ascii plain text.<br />It consists of several key-value pairs followed by an inputlog section.<br />The inputlog section can be identified by its starting with a | (pipe).<br />The inputlog section terminates at eof.<br />Newlines may be \r\n or \n<br /></div><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">FCE Ultra Save State Format<br /> Updated:  Mar 9, 2003<br />---------------------------------------<br /><br />FCE Ultra's save state format is now designed to be as forward and backwards<br />compatible as possible.  This is achieved through the (over)use of chunks.<br />All multiple-byte variables are stored LSB(least significant byte)-first.<br />Data types:<br /><br />	(u)int8 - (un)signed 8 bit variable(also referred to as "byte")<br />	(u)int16 - (un)signed 16 bit variable<br />	(u)int32 - (un)signed 32 bit variable<br /><br />-- Main File Header:<br /><br />The main file header is 16-bytes in length.  The first three bytes contain<br />the string "FCS"...<br /></div>
<br />
<br />about Nestopia... source 1.40 just need VC++ 2005 Express, SP1, SDK, and DXSDK to compile, it works - yay. : &gt;
<br />now im trying find out where to put a rule. You thinka should be made maybe in NstCore.cpp, NstPpu.cpp, NstVideoReneder.cpp or somwhere else? Damn.. it looks preety difficult... and where's a docs...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Fri Jun 03, 2011 3:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />so is that code the fix to put into nestopia? i can compile it just fine. lol. :0
<br />let me know. and thanks!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Fri Jun 03, 2011 4:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Zelex wrote:</div><div class="quotecontent">Off-topic, any idea where I can get info on the .fm2 and .fcm formats, so I can play back TAS videos in my emu?</div>
<br />The docs are in the HTML Help file (.chm) that comes with FCEUX. FCEUX can also convert .fcm -&gt; .fm2.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>plasturion</b> [ Sat Jun 04, 2011 1:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">*Spitfire_NES* wrote:</div><div class="quotecontent">so is that code the fix to put into nestopia? i can compile it just fine. lol. :0<br />let me know. and thanks!</div>
<br />
<br />Not sure but thinka maybe this method in NstPpu.cpp we should change, but how i'm still wonder.
<br />
<br />***Original***
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;&nbsp; &nbsp;NES_PEEK_A&#40;Ppu,2007&#41;<br />&nbsp; &nbsp;&nbsp; &nbsp;&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Update&#40; cycles.one, address &#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;NST_VERIFY&#40; IsDead&#40;&#41; &#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;address = scroll.address &amp; 0x3FFF;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;scroll.address = &#40;scroll.address + &#40;&#40;regs.ctrl&#91;0&#93; &amp; Regs::CTRL0_INC32&#41; ? 32 : 1&#41;&#41; &amp; 0x7FFF;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;UpdateScrollAddressLine&#40;&#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;io.latch = &#40;address &amp; 0x3F00&#41; != 0x3F00 ? io.buffer : palette.ram&#91;address &amp; 0x1F&#93; &amp; Coloring&#40;&#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;io.buffer = &#40;address &gt;= 0x2000 ? nmt.FetchName&#40; address &#41; : chr.FetchPattern&#40; address &#41;&#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return io.latch;<br />&nbsp; &nbsp;&nbsp; &nbsp;&#125;</div><br /><br />Now I updated this metod to smth like this and it works fine. <br /><br />***Modified***<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp;&nbsp; &nbsp;NES_PEEK_A&#40;Ppu,2007&#41;<br />&nbsp; &nbsp;&nbsp; &nbsp;&#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;Update&#40; cycles.one, address &#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;// NST_VERIFY&#40; IsDead&#40;&#41; &#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;address = scroll.address &amp; 0x3FFF;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;//scroll.address = &#40;scroll.address + &#40;&#40;regs.ctrl&#91;0&#93; &amp; Regs::CTRL0_INC32&#41; ? 32 : 1&#41;&#41; &amp; 0x7FFF;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &#40;&#40;scanline &gt;= 21 &amp;&amp; scanline &lt;= 260&nbsp; &#41; &amp;&amp; &#40;regs.ctrl&#91;1&#93; &amp; Regs::CTRL1_BG_SP_ENABLED&#41;&#41; &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if &#40;regs.ctrl&#91;0&#93; &amp; Regs::CTRL0_INC32&#41; &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if&#40;&#40;scroll.address &amp; 0x7000&#41; == 0x7000&#41; &#123; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; scroll.address &amp;= 0x0FFF; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;switch&#40;scroll.address &amp; 0x03E0&#41; &#123; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;case 0x03A0: scroll.address ^= 0x0800; break; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;case 0x03E0: scroll.address &amp;= 0x7C1F; break; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;default: scroll.address += 0x20;&nbsp; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125; else &#123; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;scroll.address += 0x1000; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125; <br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125; else &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;scroll.address ++;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125; else &#123;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;scroll.address = &#40;scroll.address + &#40;&#40;regs.ctrl&#91;0&#93; &amp; Regs::CTRL0_INC32&#41; ? 32 : 1&#41;&#41; &amp; 0x7FFF;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;UpdateScrollAddressLine&#40;&#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;io.latch = &#40;address &amp; 0x3F00&#41; != 0x3F00 ? io.buffer : palette.ram&#91;address &amp; 0x1F&#93; &amp; Coloring&#40;&#41;;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;io.buffer = &#40;address &gt;= 0x2000 ? nmt.FetchName&#40; address &#41; : chr.FetchPattern&#40; address &#41;&#41;;<br /><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return io.latch;<br />&nbsp; &nbsp;&nbsp; &nbsp;&#125;<br /></div>
<br />
<br />I'm used part of assert IsDead() and think f_bgVisibility and f_spVisibility can be replaced by (regs.ctrl[1] &amp; Regs::CTRL1_BG_SP_ENABLED)) that gave me correct works Battle Toads airship intro. Address  increment  obvious is (regs.ctrl[0] &amp; Regs::CTRL0_INC32),  I think is enough for working Indiana Jones Chronicles and other games.
<br />
<br />Update:
<br />- Now Battle Toads it works.
<br />- Ice Climber works (i just needed to rebuild all project)
<br />- GI JOE, Batman Return of The joker works - condition (address increment check added)
<br />
<br />Check this out what nestopia now can <a href="http://www.youtube.com/watch?v=fXPGTNZ2EK4" class="postlink">http://www.youtube.com/watch?v=fXPGTNZ2EK4</a>
<br />
<br />...and here is the new release... 
<br />==============================================
<br />                             Nestopia 1.40.1 beta 1 - unofficial build  
<br /><a href="http://www.detach.republika.pl/Nestopia-1.40.1b-unofficial.zip" class="postlink">Nestopia-1.40.1b(IndyFix)</a>
<br />==============================================

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>*Spitfire_NES*</b> [ Tue Jun 07, 2011 4:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />does this affect or impact any other games at all negatively? thanks for posting that. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>6</strong> of <strong>14</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Fixing ROMs for EMS 64 GB Smart Card USB</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Fixing ROMs for EMS 64 GB Smart Card USB</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=20&amp;t=5804">http://forums.nesdev.com/viewtopic.php?f=20&amp;t=5804</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>20</strong> of <strong>22</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Mon Dec 29, 2014 11:04 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm not sure if that was ever fixed or not. I'll have to look into it when I get a chance.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Great Hierophant</b> [ Thu Jan 08, 2015 8:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I received an Everdrive GB last week, and since I have had a chance to play around with it and test some games, I feel that this thread is obsolete.  The Everdrive GB does not need fixes.  Instead of worrying about your game crashing because of some stray write to an MBC1 register or the memory map to foil old-style flash carts, you can enjoy the games as they were meant to be played (as well as a flash cart can).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Jan 08, 2015 8:44 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Then it comes down to whether $92 plus shipping and tax (<a href="http://store.kitsch-bent.com/product/everdrive-gb" class="postlink">source</a>) is worth it. I'll start a new topic about the merits of the EverDrive GB.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu Jan 08, 2015 12:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I did buy a EMS 64 GB Smart Card USB, but the difficulty of setting it up and the hacks in this thread really put me off, so I ended up never using it. Shortly after the EDGB came out and I got one, and from the little use I made of it (real life is kinda tough right now) it felt like a perfectly good flash cart.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Muessigb</b> [ Thu Jan 08, 2015 6:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hello,<br />I'm sorry to ask but I have a problem: Zelda Links Awakening DX is crashing (at rare conditions).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Muessigb</b> [ Thu Jan 08, 2015 6:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />And I found another problem:<br />If you have multiple files on one bank and one on another if you save on the one w/o the menu, savegame will corrupt when leaving it and starting one from the bank with the multiple saves.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Thu Jan 08, 2015 8:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">I did buy a EMS 64 GB Smart Card USB, but the difficulty of setting it up and the hacks in this thread really put me off, so I ended up never using it. Shortly after the EDGB came out and I got one, and from the little use I made of it (real life is kinda tough right now) it felt like a perfectly good flash cart.</div><br /><br />Yes it is a hassle these days because after Windows XP it's more trouble to install the drivers needed to program it. The hacks to fix certain games are good and bad. The good thing is they can get a game working and playable just fine. The bad thing is there are games that no one has &quot;fixed&quot; or a fix might actually not be complete, or could break something else possibly. The whole problem stems from the fact that there is no protection of the Flash Card's registers, and secondly that there is no pre-MBC5 emulation mode. The second one isn't so bad but the first problem is serious and also something that could have very easily been fixed. The worse thing about it is that I've read things that seem to suggest an older design of the flash cart actually did have protection for the flash card's registers to prevent games from writing to them.<br /><br />The EverDrive GB is quite a bit more expensive but definitely worth it. The Fixes and the replacement menu I made for the SmartCard I only made because at the time it was the best option available. With the EverDrive now available it is no longer worth the time. If anyone really wants to fix a game though this thread contains plenty of mentions about what problems come up and how to try to fix them.<br /><br />I haven't bought a EDGB yet but I plan to in the future. <br /><br /><div class="quotetitle">Muessigb wrote:</div><div class="quotecontent">And I found another problem:<br />If you have multiple files on one bank and one on another if you save on the one w/o the menu, savegame will corrupt when leaving it and starting one from the bank with the multiple saves.</div><br /><br />It is known and stated in the documentation that if you use the menu you need it on both banks. This is not a bug or problem, it is a limitation of the hardware.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Muessigb</b> [ Fri Jan 09, 2015 7:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Damn!  <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /> <br />I just paid 60$ for that card.<br />Well, is it possible to write just the/a savegame manager to the beginning of the card and just jump right into the game?<br />Maybe it could be done in just a fraction of the old size? Without any graphics or input at all, just the bare loader.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri Jan 09, 2015 9:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />All you need to do is add a small game with whatever larger game you put on the other side and the menu will be written. The software writes the menu if more than 1 game is in the list. <br /><br />I have no plans to make any new changes to the menu. Sorry. There really isn't anything worth adding.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tehgazza</b> [ Sat Jan 24, 2015 2:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@Mottzilla - Nice work on the menu dude! <br /><br />Did you make any inroads with the patching of the translated Pokemon Card GB2 game (i.e.Pokemon Card GB2 - GR Dan Sanjou!, patched with <!-- m --><a class="postlink" href="http://www.romhacking.net/translations/1736/">http://www.romhacking.net/translations/1736/</a><!-- m -->)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>einzelherz</b> [ Tue Mar 10, 2015 7:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Since this seems to be the most recent and active thread on this cart I figured I'd post a few questions here.<br /><br />The first is specifically about the USB 64M: Is there a way to 'Read SRAM' in a way that it doesn't pull the whole 128k file? I'm trying to backup saves from a Mega Memory card and they make it to the PC fine (even being able to be written back to the EMS card and still function) but they are unreadable by things like VBA. I've tried it both with single roms on the EMS cart as well as using the menu to try to clean up the SRAM.<br /><br />The other is actually about the Mega Memory card, which might not be applicable. Out of the group of games I'm trying to back up, two so far are acting strange. They run when the Mega Memory card's switch is set to bypass mode, so they're contacting ok, but they won't let me backup the save files. The two games are Final Fantasy Adventure and Final Fantasy Legend (1). 2 and 3 worked just fine.<br /><br />Any light shed on this will make me feel better about spending $70 on this kit that so far is only half working <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /><br /><br />Thanks in advance.<br /><br />Edit: I found another GBC emulator, BGB that can open the 128k files and correct them, so that's a long-way-around solution for now. Still don't know why a few games with saves act strangely in the Mega Memory Card.<br /><br />Edit 2: I discovered that the reason those two probably won't work is because they don't use a separate SRAM chip. Still wish I knew how to import the 64M's SRAM in blocks rather than as a full 128k lump.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Mon Mar 16, 2015 1:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If you are using my Multi SRAM menu, the SRAM is divided into 8 Kilobyte blocks. The first 4 blocks are used for whatever game is going to be run. The next 11 Blocks are the save file data in the order you see them listed in the Menu's SRAM Manager. The final block is the Menu System's save data block which stores data such as the title of each save game slot. <br /><br />To extract a single save game that is backed up into the 11 blocks of permanent storage you need to calculate where in the 128KB file that data is located. Each block is 8 Kilobytes which in hex is $2000. So the first block is at $0000 and then add $2000 for each following block.<br /><br />$0000 - Temporary Block<br />$2000 - Temporary Block<br />$4000 - Temporary Block<br />$6000 - Temporary Block<br />$8000 - 1st Save Block<br />$A000 - 2nd Save Block<br />$C000 - 3rd Save Block<br />$E000 - 4th Save Block<br />$10000 - 5th Save Block<br />$12000 - 6th Save Block<br />$14000 - 7th Save Block<br />$16000 - 8th Save Block<br />$18000 - 9th Save Block<br />$1A000 - 10th Save Block<br />$1C000 - 11th Save Block<br />$1E000 - Menu System Block<br /><br />So if you want to extract a certain game's save data, you must take the 128KB file and open it in a hex editor. Use the above information to figure out where in that save file the game you want has its data. Copy that data into a new file and your emulator will accept it. For games that use 32KB of SRAM you will need to copy 4 blocks, as you will notice in the Menu SRAM Manager those games take 4 blocks.<br /><br />Final Fantasy Adventure and Final Fantasy Legend use the MBC2 mapper which has built in SRAM. The Mega Memory Card probably wasn't designed for compatibility with this slightly different saving system. There may be nothing you can do there. The Mega Memory Card I think was designed with games like Pokemon in mind.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>einzelherz</b> [ Mon Mar 16, 2015 6:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thank you, sir!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Nitro</b> [ Fri May 08, 2015 6:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I tried to patch two ROM and has been impossible, both belong to the same company. Perhaps used some and especial protection system ?<br /><br />CGB Maus, Die (Europe) (En,Fr,De,Es)  -- the game does not start<br />CGB Spirou - La Panique Mecanique (Europe) (En,Fr,De,Es,Ne) -- the game crashes within minutes

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri May 08, 2015 6:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Fixing ROMs for EMS 64 GB Smart Card USB</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Did you run it in a debugger to check for writes to the range that the game select register is mapped to? If I recall, writes between $6000-$7FFF will crash the game on a SmartCard generally. Some games do it purposely (a form of protection) and others I think do it just from bad or careless programming.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>20</strong> of <strong>22</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
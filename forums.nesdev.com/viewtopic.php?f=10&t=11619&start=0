<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Need some help and advice with my collision detection</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Newbie Help Center" href="http://forums.nesdev.com/feed.php?f=10" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Need some help and advice with my collision detection" href="http://forums.nesdev.com/feed.php?f=10&amp;t=11619" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=10&amp;t=11619';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



	/**
	* Play quicktime file by determining it's width/height
	* from the displayed rectangle area
	*
	* Only defined if there is a file block present.
	*/
	function play_qt_file(obj)
	{
		var rectangle = obj.GetRectangle();

		if (rectangle)
		{
			rectangle = rectangle.split(',')
			var x1 = parseInt(rectangle[0]);
			var x2 = parseInt(rectangle[2]);
			var y1 = parseInt(rectangle[1]);
			var y2 = parseInt(rectangle[3]);

			var width = (x1 < 0) ? (x1 * -1) + x2 : x2 - x1;
			var height = (y1 < 0) ? (y1 * -1) + y2 : y2 - y1;
		}
		else
		{
			var width = 200;
			var height = 0;
		}

		obj.width = width;
		obj.height = height + 16;

		obj.SetControllerVisible(true);

		obj.Play();
	}


// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Sat Sep 20, 2014 3:40 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=10&amp;t=11619">Need some help and advice with my collision detection</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=11619"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 19 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=11619&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=10&amp;t=11619&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=10&amp;t=11619&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=10&amp;t=11619&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=10&amp;t=11619&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p133817"></a>
				<b class="postauthor">SNgamer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133817">Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133817#p133817"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 12, 2014 9:50 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Feb 11, 2014 7:12 am<br /><b>Posts:</b> 35
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I have programmed a bit on the NES and it seems to be a fun project to create a game from scratch, so i tried to program a little  platformer with my own collision detection scheme (i have not looked at how other games do the detection, it might totally differ from how it would normally be done).<br />I have created a file which holds my level data as a nametable, and it is also used in order to detect any collision. for the moment i have only programmed when a sprite hits ground, it should stop falling. it does work as intended, i can let the sprite fall from any position to any ground on any hight, it would stop the sprite as soon as it detects the ground (actually it checks if the sprite is in empty space and lets it fall down as long as empty space is detected).<br />My problem is that my sprite is 4 pixels deep in the ground in any situation, and i can not tell why that is.<br />i hope someone can look into my code and tell what the issue is. the file is for asm6<br /><br />thanks in advance<br /><br />a bit further explanation on my program:<br />every nmi the sprite is moved to the right and an animation routine is executed, so there is an actual animation. <br />i later will also implement controller button detection.<br />the main routine checks for the tile 8 pixels (1 tile) below the lower sprite tile(feet) and checks if it is air (empty tile #$07), if so, it will set a flag to tell another routine to execute (which is within NMI), which will then lower the sprites by one pixel.<br />this is executed until the tile below the lower sprite is something else than #$07. if this is the case, no flag will be set and therefore there is no fall routine executed in NMI.<br />if further explanation is needed, i can give more.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1974">chr.chr</a> [8 KiB]
			</span><br />
			<span class="gensmall">Downloaded 2 times</span>
		

		<br />
	</td>
							</tr>
						
							<tr>
								<td class="row1">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1973">level.asm</a> [2.22 KiB]
			</span><br />
			<span class="gensmall">Downloaded 5 times</span>
		

		<br />
	</td>
							</tr>
						
							<tr>
								<td class="row2">
			<span class="gensmall"><b>File comment:</b> main file to be assembled in asm6</span><br />
		
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1972">collision.asm</a> [4.68 KiB]
			</span><br />
			<span class="gensmall">Downloaded 8 times</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6392"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p133818"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133818">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133818#p133818"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 12, 2014 10:24 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 6693<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">SNgamer wrote:</div><div class="quotecontent">My problem is that my sprite is 4 pixels deep in the ground in any situation, and i can not tell why that is.</div><br />Without looking at the code (I'm at work now, so I don't have much time), I'd probably blame the speed at which your sprite falls. If it moves at more than 1 pixel per frame, the likelihood of it sinking into the ground is high, and unless you &quot;eject&quot; it back up to a valid position, it will remain that way.<br /><br />Collision detection doesn't usually work by checking if the movement is allowed and then moving the objects, instead it just moves the objects anyway, assuming every movement is possible, and then ejects the objects in case they ended up going into something solid. Ejecting is easy if you don't have slopes and your basic collision unit is a tile or metatile of constant dimensions, because it's all neatly aligned to a grid.<br /><br />Since we're talking about gravity specifically, objects often have a flag indicating whether they are on the ground or not. That stops you from constantly pushing objects down when you should be concentrating on horizontal movement (why push objects down and eject them back every single frame, wasting CPU time and possibly making horizontal movement harder?). So if you know your object is falling, you'll keep moving it down by an amount of pixels compatible with its vertical velocity (which might change dynamically depending on how elaborate your physics are) and checking its lowest point (by the feet) against the map (or name table) to see if it's inside a solid block. If it is, you use the block's coordinates to calculate the last allowed coordinate for the sprite's feet. After you find it, check the difference between that and the invalid position and move the whole sprite up by this many pixels.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p133819"></a>
				<b class="postauthor">SNgamer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133819">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133819#p133819"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 12, 2014 1:52 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Feb 11, 2014 7:12 am<br /><b>Posts:</b> 35
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">sadly, it is not the falling velocity, which causes the problem (it is 1pixel/frame).<br />i think i will probably rewrite the collision detection to what you described, because this sounds most convenient to implement.<br />nevertheless, i would like to know what was wrong with my way of handling detection out of interest.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6392"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p133822"></a>
				<b class="postauthor">3gengames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133822">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133822#p133822"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 12, 2014 2:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly 65024U</td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Mar 27, 2010 12:57 pm<br /><b>Posts:</b> 2132
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Post some of the code if you can, just try to comment it. We're not psychic, I haven't looked at code for a bit so I'd be interested in helping, but I don't have a dev setup ATM.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4311"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p133823"></a>
				<b class="postauthor">SNgamer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133823">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133823#p133823"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 12, 2014 2:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Feb 11, 2014 7:12 am<br /><b>Posts:</b> 35
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Here is the code for anyone whose device is not able to display asm files properly. Just tell me where explanation is needed and i will explain, as i did not really comment on all the code.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;--------------------------------------------<br />; constants<br />;--------------------------------------------<br /><br />PRG_COUNT = 1 ;1 = 16KB, 2 = 32KB<br />MIRRORING = %0001 ;%0000 = horizontal, %0001 = vertical, %1000 = four-screen<br /><br />;--------------------------------------------<br />; variables<br />;--------------------------------------------<br /><br />.enum $0000<br />count .dsb 1<br />xpos .dsb 1<br />ypos .dsb 1<br />yadd .dsb 1;this will be used to determine the exact position of the tile by adding #$20 to X register<br />fall_f .dsb 1;a flag to let the nmi know that the sprite is supposed to fall down<br /><br />.ende<br /><br />;--------------------------------------------<br />; iNES header<br />;--------------------------------------------<br /><br />.db &quot;NES&quot;, $1a ;identification of the iNES header<br />.db PRG_COUNT ;number of 16KB PRG-ROM pages<br />.db $01 ;number of 8KB CHR-ROM pages<br />.db $00|MIRRORING ;mapper 0 and mirroring<br />.dsb 9, $00 ;clear the remaining bytes<br /><br />;--------------------------------------------<br />; program bank(s)<br />;--------------------------------------------<br /><br />.base $10000-(PRG_COUNT*$4000)<br /><br />;------------------------------------------- <br />Reset:<br />sei&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; disable IRQs<br />cld&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; disable decimal mode<br />ldx&nbsp; &nbsp;#$40<br />stx&nbsp; &nbsp;$4017&nbsp; &nbsp;&nbsp; &nbsp;; disable APU frame IRQ<br />ldx&nbsp; &nbsp;#$ff&nbsp; &nbsp;&nbsp; &nbsp;; Set up stack<br />txs&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;&nbsp; .<br />inx&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;; now X = 0<br />stx&nbsp; &nbsp;$2000&nbsp; &nbsp;&nbsp; &nbsp;; disable NMI<br />stx&nbsp; &nbsp;$2001&nbsp; &nbsp;&nbsp; &nbsp;; disable rendering<br />stx&nbsp; &nbsp;$4010&nbsp; &nbsp;&nbsp; &nbsp;; disable DMC IRQs<br /><br />&nbsp; &nbsp;;; first wait for vblank to make sure PPU is ready<br />vblankwait1:<br />bit&nbsp; &nbsp;$2002<br />bpl&nbsp; &nbsp;vblankwait1<br /><br />clear_memory:<br />&nbsp; &nbsp;lda&nbsp; &nbsp;#$00<br />&nbsp; &nbsp;sta&nbsp; &nbsp;$0000, x<br />&nbsp; &nbsp;sta&nbsp; &nbsp;$0100, x<br />&nbsp; &nbsp;sta&nbsp; &nbsp;$0300, x<br />&nbsp; &nbsp;sta&nbsp; &nbsp;$0400, x<br />&nbsp; &nbsp;sta&nbsp; &nbsp;$0500, x<br />&nbsp; &nbsp;sta&nbsp; &nbsp;$0600, x<br />&nbsp; &nbsp;sta&nbsp; &nbsp;$0700, x<br />&nbsp; &nbsp;lda&nbsp; &nbsp;#$fe<br />&nbsp; &nbsp;sta&nbsp; &nbsp;$0200, x&nbsp; &nbsp;; move all sprites off screen<br />&nbsp; &nbsp;inx<br />&nbsp;bne&nbsp; &nbsp;clear_memory<br /><br />;; second wait for vblank, PPU is ready after this<br />vblankwait2:<br />bit&nbsp; &nbsp;$2002<br />bpl&nbsp; &nbsp;vblankwait2<br />;-------------------------------------------<br />initloadpal:<br />lda $2002<br />lda #$3F<br />sta $2006<br />lda #$00<br />sta $2006<br />ldx #$00<br /><br />loadpal:<br />lda pal,x<br />sta $2007<br />inx<br />cpx #$20<br />bne loadpal<br /><br />lda #$80<br />sta $2000;enable NMI<br />lda #$00;disable Sprites and BG<br />sta $2001;enable only when BG writes are done<br />lda #$00 ;disable scrolling<br />sta $2005;disable scrolling<br />sta $2005;disable scrolling<br />;-------------------------------------------<br />ldx #$00<br />ldsp:<br />lda sprite0,x<br />sta $0200,x<br />inx<br />cpx #$08<br />bne ldsp<br /><br />lda #$2002;reset PPU latch<br />lda #$20<br />sta $2006<br />lda #$00<br />sta $2006<br /><br />ldx #$00<br />ldy #$00<br />ldbg0:<br />lda level0,x<br />sta $2007<br />inx<br />bne ldbg0<br />ldbg1:<br />lda level1,x<br />sta $2007<br />inx<br />bne ldbg1<br />ldbg2:<br />lda level2,x<br />sta $2007<br />inx<br />bne ldbg2<br />ldbg3:<br />lda level3,x<br />sta $2007<br />inx<br />cpx #$C0<br />bne ldbg3<br /><br />ldx #$00<br />ldy #$00<br />lda #$1E<br />sta $2001<br />;-------------------------------------------<br />;-------------------------------------------<br />main:;checks for collision<br />lda $0204;vert pos of metasprite<br />clc<br />adc #$08<br />clc<br />ror A<br />clc<br />ror A<br />clc<br />ror A<br />clc; this will divide the y position in pixels by 8 to determine the tile position (so its like pixelposition-&gt;tileposition)<br />sta ypos<br />lda $0207;hor pos of metasprite<br />clc<br />ror A<br />clc<br />ror A<br />clc<br />ror A<br />clc;same for X<br />sta xpos<br />;-------------------------------------------<br />ldx #$00<br />lda ypos<br />clc<br />ror A<br />clc<br />ror A<br />clc<br />ror A<br />clc; this will determine which part of thee nametable has to be looked at by dividing by 8 again<br />cmp #$00<br />beq le0;until #$07 is reached<br />cmp #$01<br />beq le1;until #$0F is reached<br />cmp #$02<br />beq le2;until #$17 is reached<br />cmp #$03<br />beq le3;until #$1F is reached<br />;-------------------------------------------<br />le0:<br />lda ypos<br />sta yadd;could also be used to know which line of the nametable part has to be looked at, eg. if 1 then its the 2. line (zeroindexed)<br />jsr add32; this will add as many time #$20 to the x register as ypos has stored from a range within 0-7<br />ldx xpos<br />lda level0,x<br />cmp #$07;emptyness-&gt;falls through<br />beq fallf;if true, fall_f is set<br />jmp main<br />le1:<br />lda ypos<br />and #$07<br />sta yadd<br />jsr add32<br />ldx xpos<br />lda level1,x<br />cmp #$07;emptyness-&gt;falls through<br />beq fallf<br />jmp main<br />le2:<br />lda ypos<br />and #$07<br />sta yadd<br />jsr add32<br />ldx xpos<br />lda level2,x<br />cmp #$07;emptyness-&gt;falls through<br />beq fallf<br />jmp main<br />le3:<br />lda ypos<br />and #$07<br />sta yadd<br />jsr add32<br />ldx xpos<br />lda level3,x<br />cmp #$07;emptyness-&gt;falls through<br />beq fallf<br />jmp main<br />fallf:<br />lda #$01<br />sta fall_f<br />jmp main<br /><br />add32:<br />ldx #$00<br />lda yadd<br />cmp #$00<br />beq rts_le<br />add32_on:<br />lda xpos<br />clc<br />adc #$20<br />sta xpos<br />inx<br />cpx yadd<br />bne add32_on<br />rts_le:<br />rts<br />;-------------------------------------------<br /><br /><br />;-------------------------------------------<br />;-------------------------------------------<br />NMI:<br />pha<br />txa<br />pha<br />tya<br />pha<br /><br />inc $0203<br />inc $0207<br />inc $0203<br />inc $0207; this will always increase hor pos of sprite<br />inc count;used for animation routine<br />lda fall_f<br />cmp #$01;is flag for fall set?<br />beq fall<br />nmi_on:<br />jsr anim<br />lda #$00<br />sta $2003<br />lda #$02<br />sta $4014<br /><br />pla<br />tay<br />pla<br />tax<br />pla<br />rti<br />;-------------------------------------------<br />IRQ:<br /><br />;-------------------------------------------<br />anim:<br />lda count<br />cmp #$08<br />beq a2<br />cmp #$10<br />beq a3<br />rts<br />a1:<br />lda #$01<br />sta $0205<br />rts<br />a2:<br />lda #$02<br />sta $0205<br />rts<br />a3:<br />lda #$03<br />sta $0205<br />lda #$00<br />sta count<br />rts<br />;-------------------------------------------<br />fall:<br />inc $0200<br />inc $0204;add one pixel to y pos of both sprites<br />lda #$00;reset fall_f<br />sta fall_f<br />jmp nmi_on<br />;-------------------------------------------<br />pal:<br />;bg palette data<br />HEX 0F 30 10 00<br />HEX 0F 02 38 3C<br />HEX 0F 1C 15 14<br />HEX 22 36 05 14 <br />;sprite palette data<br />HEX 0F 10 30 00<br />HEX 3f 30 10 00<br />HEX 0f 00 30 10<br />HEX 22 36 05 14<br />sprite0:;Sprite in Stand position<br />;&nbsp; &nbsp;ve ti at ho<br />HEX 85 00 00 70<br />HEX 8D 01 00 70<br /><br />level:<br />.include &quot;level.asm&quot;<br />;-------------------------------------------<br />; interrupt vectors<br />;-------------------------------------------<br /><br />.org $fffa<br /><br />.dw NMI<br />.dw Reset<br />.dw IRQ<br /><br />;--------------------------------------------<br />; CHR-ROM bank<br />;--------------------------------------------<br /><br />.incbin &quot;chr.chr&quot;</div><br /><br />Here is also the level.asm file, which contains the nametable. this is only one screen, but i needed to split it into several parts as the nes can not count beyond #$FF with its X register:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;This will be used for level data and Collision detection<br />;One Screen is 32x30 tiles big<br />;$06=Top Block, $05=Middle Block, 04=Top Block<br />level0:<br />HEX 0505050505050505050505050505050505050505050505050505050505050505<br />HEX 0505050505050505050505050505050505050505050505050505050505050505<br />HEX 0505060606060606060606060606060606060606060606060606060606060505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />level1:<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />level2:<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0505070707070707070707070707070707070707070707070707070707070505<br />HEX 0707070707070707070707070707070707070707070707070707070707070707<br />level3:<br />HEX 0707070707070707070707070707070707070707070707070707070707070707<br />HEX 0707070707070707070707070707070707070707070707070707070707070707<br />HEX 0404040404040404040404040404040404040404040404040404040404040404<br />HEX 0505050505050505050505050505050505050505050505050505050505050505<br />HEX 0505050505050505050505050505050505050505050505050505050505050505<br />HEX 0505050505050505050505050505050505050505050505050505050505050505</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6392"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p133830"></a>
				<b class="postauthor">nostromo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133830">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133830#p133830"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 12, 2014 5:39 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Aug 12, 2014 11:25 pm<br /><b>Posts:</b> 1<br /><b>Location:</b> Sonora, Mexico
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I decided to check the ppu viewer and saw the tiles in wrong place<br />then I add this code just before the main rutine<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp;lda #0<br />&nbsp;sta $2005<br />&nbsp;sta $2005<br /></div><br />and It works.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6645"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p133832"></a>
				<b class="postauthor">3gengames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133832">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133832#p133832"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 12, 2014 6:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Formerly 65024U</td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Mar 27, 2010 12:57 pm<br /><b>Posts:</b> 2132
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Didn't get to it, but it's because at the end of NMI, you have to clear $2005, or $2006, or preferably both. What happens is $2006 (PPU Addr), and $2005 (Scroll) registers are the exact same register internally, so what you have to do is write the scroll registers last, because any tiles you update from $2006 changes the scroll if not reset. The scroll is reloaded every frame before rendering, so if you write $2006, it basically overwrites the $2005 scrolling. For the wiki on it:<br /><br /><!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/The_skinny_on_NES_scrolling">http://wiki.nesdev.com/w/index.php/The_ ... _scrolling</a><!-- m --></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4311"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p133834"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133834">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133834#p133834"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Sep 12, 2014 7:07 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 1869<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Scroll coordinates (X and Y) are 9 bits big, so you need to write both $2005 (twice) <em>and</em> $2000 to set them fully. You don't need to write $2006, unless you're doing midscreen scroll changes.</div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">www.fauxgame.com</a>!</span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p133846"></a>
				<b class="postauthor">SNgamer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133846">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133846#p133846"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 13, 2014 2:53 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Feb 11, 2014 7:12 am<br /><b>Posts:</b> 35
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">thanks for the suggestion, but changing scroll register right before main routine did not change anything (i actually turned off scrolling way before in the code).<br />here is a picture to show what i actually mean, maybe this was not really clear:</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<span class="gensmall"><b>File comment:</b> is stuck in ground but moves</span><br />
		
			<a href="./download/file.php?id=1978&amp;mode=view"><img src="./download/file.php?id=1978&amp;t=1" alt="issue.jpg" /></a><br />
			<span class="gensmall">issue.jpg [ 69.36 KiB | Viewed 39 times ]</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6392"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p133847"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133847">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133847#p133847"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 13, 2014 4:51 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 705
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">What you did doesn't &quot;disable&quot; scrolling. It does set scrolling to the top left of the first nametable as you might want, though.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #$80<br />sta $2000;enable NMI<br />lda #$00;disable Sprites and BG<br />sta $2001;enable only when BG writes are done<br />lda #$00 ;disable scrolling<br />sta $2005;disable scrolling<br />sta $2005;disable scrolling<br /></div><br />But... slightly after this, you write to $2006. <br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;-------------------------------------------<br />ldx #$00<br />ldsp:<br />lda sprite0,x<br />sta $0200,x<br />inx<br />cpx #$08<br />bne ldsp<br /><br />lda #$2002;reset PPU latch<br />lda #$20<br />sta $2006<br />lda #$00<br />sta $2006<br /></div><br />Writes to $2006 affect the scroll's position, so after those writes to $2006, the scroll is likely no longer at the top left of the first nametable where you want it.<br /><br />The fix mentioned absolutely does work: <br /><img src="http://i.imgur.com/VM8aXQG.png" alt="Image" /><br /><br />That is to say, add these writes to $2005 slightly before main<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">ldx #$00<br />ldy #$00<br />lda #$1E<br />sta $2001<br />;-------------------------------------------<br />;-------------------------------------------<br /><br />lda #$00 <br />sta $2005<br />sta $2005<br /><br />main:;checks for collision</div><br /><br /><div class="quotetitle">SNgamer wrote:</div><div class="quotecontent">but changing scroll register right before main routine did not change anything</div><br />May I ask what how you did it it that it didn't work?<br /><br />Edit: I'm wrong again, this doesn't work. But I'll find out why...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p133848"></a>
				<b class="postauthor">SNgamer</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133848">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133848#p133848"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 13, 2014 5:09 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Feb 11, 2014 7:12 am<br /><b>Posts:</b> 35
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Kasumi wrote:</div><div class="quotecontent">That is to say, add these writes to $2005 slightly before main<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">ldx #$00<br />ldy #$00<br />lda #$1E<br />sta $2001<br />;-------------------------------------------<br />;-------------------------------------------<br /><br />lda #$00 <br />sta $2005<br />sta $2005<br /><br />main:;checks for collision</div><br /><br /><div class="quotetitle">SNgamer wrote:</div><div class="quotecontent">but changing scroll register right before main routine did not change anything</div><br />May I ask what how you did it it that it didn't work?<br /><br />Edit: I'm wrong again, this doesn't work. But I'll find out why...</div><br />Just the same way you placed the $2005 writes: right before main routine, but as you yourself did notice, it does not fix the problem...<br />its no problem if this can not be solved, i will eventually stick with the suggested way of doing collision, but would be interestening why<br />the sprite is stuck in ground when collision detection stops letting the sprite fall.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6392"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p133850"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133850">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133850#p133850"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 13, 2014 5:34 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 705
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Whee... being wrong is fun. But I'm still quite confused by this. Putting this at the end of your NMI does work: <br /><br />Edit: No... it doesn't? I just had a rom... that did work. But apparently the change I suggested isn't what made it work, since I did other debugging stuff... I'll find out what works and avoid making more wrong posts again, sorry.<br /><br />Edit2: Okay, figured it out. Here's a ROM (Let me know if you want it removed, it's here to prove I'm not nuts), as well as the changes. If the changes I listed don't give you this result, tell me and I will find out what I forgot.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">main:;checks for collision<br />bit $2002<br />bpl main<br />lda $0204;vert pos of metasprite<br />clc<br />adc #$09<br />lsr a<br />lsr a<br />lsr a<br />sta ypos<br />lda $0207;hor pos of metasprite<br />lsr a<br />lsr a<br />lsr a<br />sta xpos<br /></div><br />I made your main loop actually wait for the vblank to start (bit $2002, bpl). There are better ways to do this which I hope I'll remember to list in another post, but I have something to do like right now.<br /><br />I changed your CLC, RORs to LSR A. LSR ignores the carry, so no need to CLC. LSR is identical to CLC, then ROR basically. (Both of these may not have had much to do with the problem, but when I didn't list everything and tried it, it didn't work.)<br /><br />I added this to the end of your NMI:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #$80<br />sta $2000<br /><br />lda #$00 <br />sta $2005<br />sta $2005</div><br />This sets the scroll every frame. It's good practice to do it every frame, even if it doesn't change. A bit $2002 before those $2005 writes would be the most safe, but you cannot do this because of it messes up the frame wait stuff I mentioned above. (Which is part of why there are other ways to do it that I can't cover right this minute)<br /><br />Finally, I did this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda $0204;vert pos of metasprite<br />clc<br />adc #$09<br />lsr a<br />lsr a<br />lsr a<br />sta ypos</div><br />The PPU draws sprites one pixel lower than the position you give it. (A y position of 0 will be drawn on scanline 1, etc.) So I added 1 here to compensate.<br /><br />I am sorry for the wrong post before, and I will try to give some other tips later. But I really gotta go now.</div>

					
						<br clear="all" /><br />

						<table class="tablebg" width="100%" cellspacing="1">
						<tr>
							<td class="row3"><b class="genmed">Attachments: </b></td>
						</tr>
						
							<tr>
								<td class="row2">
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=1979">col.nes</a> [24.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 2 times</span>
		

		<br />
	</td>
							</tr>
						
						</table>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=3504">Kasumi</a> on Sat Sep 13, 2014 6:03 am, edited 1 time in total.</span>
						

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p133851"></a>
				<b class="postauthor">Sik</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133851">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133851#p133851"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 13, 2014 5:58 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Aug 12, 2010 3:43 am<br /><b>Posts:</b> 361
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Basically setting the scroll position is the <em>very last thing</em> you need to do with the video hardware.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4526"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p133852"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133852">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133852#p133852"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 13, 2014 6:09 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 705
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'm curious now too. I feel like putting the writes to $2005 where I first said should have been enough. There were no writes to anything that I know about that would have changed it after that point. $2006 isn't touched, nor $2005 again, nor $2000 or $2001, unless I'm missing something. Does $2005/$2000 really have to be written every frame? I thought it could be expected to stay what it was, so long as no other writes were made to the mentioned registers.<br /><br />Regardless, I made an edit to my last post that does get the desired behavior. (Mentioning because the edit was made after another post was made.)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p133853"></a>
				<b class="postauthor">Sik</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p133853">Re: Need some help and advice with my collision detection</a></div><div style="float: right;"><a href="./viewtopic.php?p=133853#p133853"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Sep 13, 2014 6:29 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Aug 12, 2010 3:43 am<br /><b>Posts:</b> 361
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Kasumi wrote:</div><div class="quotecontent">Does $2005/$2000 really have to be written every frame?</div><br />Yes, because the address completely changes after it rendered the entire screen (the address keeps changing as it fetches the pixels for the background).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4526"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=10&amp;t=11619"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=11619"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 19 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=11619&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=10&amp;t=11619&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <a href="./memberlist.php?mode=viewprofile&amp;u=6694">AbSoLuTAL</a> and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="11619" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10" selected="selected">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
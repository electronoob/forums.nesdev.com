<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - SPC700 instruction cycle breakdown</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - SNESdev" href="http://forums.nesdev.com/feed.php?f=12" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - SPC700 instruction cycle breakdown" href="http://forums.nesdev.com/feed.php?f=12&amp;t=16140" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=12&amp;t=16140';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Jan 18, 2019 2:59 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />

	<div class="forumrules">
		
			<h3>Forum rules</h3><br />
			<ul><li>For making cartridges of your Super NES games, see <a href="http://forums.nesdev.com/viewforum.php?f=28" class="postlink">Reproduction</a>.</li></ul>
		
	</div>

	<br clear="all" />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=12&amp;t=16140">SPC700 instruction cycle breakdown</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=16140"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 86 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=16140&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=12&amp;t=16140&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=12&amp;t=16140&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=12&amp;t=16140&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198851"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198851">SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198851#p198851"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 24, 2017 5:30 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I just noticed this document on kindred's homepage:<br /><br /><!-- m --><a class="postlink" href="http://www.crazysmart.net.au/kindred/files/spc700_inst_op.pdf">http://www.crazysmart.net.au/kindred/fi ... nst_op.pdf</a><!-- m --><br /><br />Is this table based on some official Sony document or on logic analyzer traces? The total cycles taken by each instruction agree with bsnes/higan, but the order of operations for many instructions (particularly complex ones like the calls) is completely different.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p198857"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198857">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198857#p198857"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 24, 2017 6:42 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 7968<br /><b>Location:</b> Seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Seems likely, given the &quot;Kris Bleakley 2014&quot; in the corner, that he'd be the person to chase down to ask...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198861"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198861">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198861#p198861"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 24, 2017 6:51 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Is that Overload? Just want to make sure before I send a PM...</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p198862"></a>
				<b class="postauthor">lidnariq</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198862">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198862#p198862"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jun 24, 2017 6:54 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Apr 13, 2008 11:12 am<br /><b>Posts:</b> 7968<br /><b>Location:</b> Seattle
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Whois data for the domain implies yes.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3512"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198947"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198947">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198947#p198947"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 25, 2017 4:45 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1398
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yes, Kris Bleakley is Overload. He is the author of Kindred (formerly Super Sleuth.)<br /><br />The cycle timings in higan are from blargg. He wrote test ROMs that would test every possible instruction (obviously ones like SLEEP/STOP were not possible), and would report errors if your cycle orderings were wrong.<br /><br />I can't recall if he said he tested CALL instructions and the like, or just the ALU instructions. I do remember that INCW/DECW were the most surprising ones of all (to me, anyway. I get why it's nicer for the CPU design, but boy is DECW weird.)<br /><br />Unfortunately, I lost those test ROMs, and nobody else seems to have them.<br /><br />So, in absense of a test ROM to the contrary, I'd say we should stick with blargg's results that are in higan.<br /><br />(Aside: I'm still really disappointed there's no external pin for the S-SMP to trigger interrupts. I would really like to emulate SLEEP properly.)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p198953"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198953">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198953#p198953"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 25, 2017 6:34 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Okay, &quot;many instructions&quot; appears to have been an exaggeration. As far as I can see after a bit more comparison, there are two differences between bsnes behaviour and Overload's document:<br /><br />1) According to Overload, there's no such thing as an &quot;internal operation&quot; on the SPC700. Like the 6502, every cycle is either a read or a write; the ones which bsnes treats as &quot;internal&quot; are mostly re-reads from the previously read address. However, there's apparently something special about the <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">MOV &#40;X&#41;+,A</tt> opcode--I've PMed Overload to ask for clarification, but it looks like he's saying it <em>does</em> do a dummy read from (X) (just like all other store instructions do) but that read somehow bypasses the internal registers, thus it can't be detected using the reset-on-read timer registers.<br /><br />2) Call and return instructions; the timing of the stack accesses is totally different between bsnes and Overload's document. Verifying these via pure software testing would be stupendously difficult, because the stack is fixed to page $01 and there aren't any MMIO registers there. You'd have to point one of the DSP voices at stack memory, play a sample timed such that the DSP reads the stack just as the SMP is writing to it, and examine the echo buffer. Frankly the timing for these instructions in bsnes look like guesses to me (the &quot;internal&quot; operations in <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">RET</tt> come <em>after</em> the stack pops? Highly unlikely) and Overload's look a lot more realistic.<br /><br />On a tangent, I notice one of the fork maintainers that you <em>haven't</em> yet banned from your forum <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> called you out for something that I think I've also pointed out (and I've changed in bsnes-classic). higan treats the SMP &quot;output&quot; communication ports (the ones the S-CPU can read via $2140-2143) as if the S-CPU can directly read four bytes of APU RAM, which seems utterly impossible hardware-wise. If I understand the APU correctly (I've never done any SNES sound programming, or sound programming period) here's a fairly easy way to test whether higan is correct:<br /><br /> - On the SMP, write something distinctive to $F4-$F7, e.g. DE AD BE EF<br /> - Set the DSP echo buffer so that it wraps around and spills into zero page (e.g. start at $F900 with a size of $800)<br /> - Play a nice complex looping sample with echo enabled<br /> - Once the sample is playing, on the S-CPU side, read $2140-2143 in a loop and display the read values onscreen<br /><br />If higan's implementation is correct, the values read by the S-CPU will constantly change as the DSP writes into the echo buffer. If I'm correct, the S-CPU will only see the values written by the SMP in step 1.<br /><br />I can write a program to do this, but someone who's already got a bit of experience with APU programming (Revenant?) can probably do it a lot more easily and quickly.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198960"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198960">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198960#p198960"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 25, 2017 8:58 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1398
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; According to Overload, there's no such thing as an &quot;internal operation&quot; on the SPC700. Like the 6502, every cycle is either a read or a write; the ones which bsnes treats as &quot;internal&quot; are mostly re-reads from the previously read address.<br /><br />That's ... I really have trouble believing something that significant snuck by everyone for that long, especially with blargg's tests to determine individual cycle ordering for SPC700 opcodes. To be clear, I'm not saying Overload is wrong. I would just be stunned that blargg missed that detail when he tested this.<br /><br />&gt; and Overload's look a lot more realistic.<br /><br />I can't say whether mine are right or wrong, but I know better than to design things based on how they &quot;should&quot; work. That proves to actually be correct approximately 15% of the time.<br /><br />If Overload confirms he used a logic analyzer to trace these out, or if he made some test ROMs he can provide, then that's evidence enough to go with his design. <em>If</em> not, then both approaches are guessing, and we should add this to a list of things that need hardware verification.<br /><br />&gt; higan treats the SMP &quot;output&quot; communication ports (the ones the S-CPU can read via $2140-2143) as if the S-CPU can directly read four bytes of APU RAM, which seems utterly impossible hardware-wise.<br /><br />You may be right. Prove to me it's wrong and I'll make the change. Again, the guiding philosophy with the SNES core was, &quot;don't make changes because they <em>feel</em> right, make them after verifying on hardware.&quot; I'm not changing that methodology after hitting 100% compatibility with this approach.<br /><br />You're welcome to make changes you haven't verified are correct with your fork of v073 from 2010 if you like.<br /><br />&gt; I notice one of the fork maintainers that you haven't yet banned from your forum<br /><br />If you're gonna bring that up here, you should mention why I did that:<br /><br /><!-- m --><a class="postlink" href="https://board.byuu.org/viewtopic.php?p=12684#p12684">https://board.byuu.org/viewtopic.php?p=12684#p12684</a><!-- m --><br /><!-- m --><a class="postlink" href="https://board.byuu.org/viewtopic.php?p=8333#p8333">https://board.byuu.org/viewtopic.php?p=8333#p8333</a><!-- m --><br /><br />If I let you talk to me like that, then I'd have to let everyone on my forum talk to me like that, or admit that helpful people get special privileges.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p198962"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198962">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198962#p198962"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 25, 2017 10:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">That's ... I really have trouble believing something that significant snuck by everyone for that long, especially with blargg's tests to determine individual cycle ordering for SPC700 opcodes. To be clear, I'm not saying Overload is wrong. I would just be stunned that blargg missed that detail when he tested this.</div><br /><br />Almost all the &quot;internal operations&quot; indicated by Overload either read from PC or from the stack. The stack never has side effects on reads, and the PC only does if you're executing code out of the timer registers, which is fairly impossible to do in a controllable way.<br /><br />I spotted another group of instructions where higan differs from Overload's doc: the <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&#40;indirect&#41;,y</tt> addressing mode.<br /><br />higan does:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">read direct page address<br />idle<br />read indirect address LSB<br />read indirect address MSB<br />read data<br />(write data)</div><br />Overload has:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">read direct page address<br />read indirect address LSB<br />read indirect address MSB<br />idle (re-read indirect address MSB)<br />read data<br />(write data)</div><br />For what it's worth, Overload's version matches the 6502 and 65816 (though the idle cycle is conditional on those CPUs)  It also makes more sense--Y is added to the indirect address, not to the direct page address.<br /><br /><a href="http://www.romhacking.net/documents/198/" class="postlink">This document</a> dates to 2007-04-21. That date corresponds fairly closely with the release of bsnes 0.020, which has this in the changelog:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">- Corrected all S-SMP cycle timings to be hardware accurate. Thanks to blargg for creating an amazing test ROM that tested every possible opcode</div><br /><br />All of the cycle timings in higan except one match this document exactly, including the ones which are indicated in the document as &quot;guesses&quot; (i.e., you guessed it, the various stack instructions). The one place higan <em>doesn't</em> match the 2007 document is <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&#40;indirect&#41;,y</tt> (the document matches Overload's findings). I wonder if it's possible that you used the <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&#40;indirect,x&#41;</tt> timings for <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">&#40;indirect&#41;,y</tt> by mistake?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">If Overload confirms he used a logic analyzer to trace these out, or if he made some test ROMs he can provide, then that's evidence enough to go with his design. <em>If</em> not, then both approaches are guessing, and we should add this to a list of things that need hardware verification.</div><br /><br />I asked Overload via PM and he says he used a logic analyzer.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">You may be right. Prove to me it's wrong and I'll make the change. Again, the guiding philosophy with the SNES core was, &quot;don't make changes because they <em>feel</em> right, make them after verifying on hardware.&quot; I'm not changing that methodology after hitting 100% compatibility with this approach.</div><br /><br />That was meant to be a beg to anyone else reading this thread to write that test ROM for me, not to you to change higan.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198963"></a>
				<b class="postauthor">Revenant</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198963">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198963#p198963"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 25, 2017 10:36 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Apr 25, 2015 1:47 pm<br /><b>Posts:</b> 428<br /><b>Location:</b> FL
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I can write a test ROM for the I/O behavior tomorrow night if nobody else does.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=6992"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p198964"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198964">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198964#p198964"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Jun 25, 2017 10:55 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">Revenant wrote:</div><div class="quotecontent">I can write a test ROM for the I/O behavior tomorrow night if nobody else does.</div><br /><br />Thanks, that would be great. For testing purposes, if you revert <a href="https://github.com/awjackson/bsnes-classic/commit/df8312c3b4fc14d613e14d377309498423111d4e" class="postlink">this commit</a> in bsnes-classic then it should behave the same way as higan (i.e. CPU reads from $2140-2143 will access the actual APU RAM)</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p198990"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p198990">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=198990#p198990"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Jun 26, 2017 5:26 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1398
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Note that I reply in the order I read things. Later comments are after having read more.<br /><br />&gt; Almost all the &quot;internal operations&quot; indicated by Overload either read from PC or from the stack.<br /><br />I noticed that in his PDF. But until he chimes in here to tell us he's confirmed this on real hardware (and hopefully how), it's conjecture.<br /><br />&gt; The stack never has side effects on reads, and the PC only does if you're executing code out of the timer registers, which is fairly impossible to do in a controllable way.<br /><br />If it's completely impossible to observe then, <em>loathe</em> as I am to say this (I'll suppress my gag reflex for it) ... it's not really relevant to emulation then ... so we'll need a logic analyzer to prove things before I'll change them.<br /><br />If it is possible, then we can make a test ROM to prove the behavior.<br /><br />&gt; I wonder if it's possible that you used the (indirect,x) timings for (indirect),y by mistake?<br /><br />Probably. It's also possible that test ROM from blargg didn't test (indirect),y; or that incredulously, the SPC700 didn't match the 65xx (since, you know, it's not a 65xx. Just a cleanroom clone of one with disguised opcode mnemonics.) I sure wish someone had that test ROM from him still.<br /><br />&gt; I asked Overload via PM and he says he used a logic analyzer.<br /><br />Any chance he can chime in here himself?<br /><br />I believe you, but I'd like the official record to be more than &quot;a guy said another guy said he did that in a private message. Go find a random thread on an NES development forum to see for yourself.&quot;<br /><br />I'm sorry to be a pain about this. You need to understand that I tried the opposite approach of just adding things that felt right to my Game Boy core, because it's not a system I'm set up to run my own hardware tests on and well ... it's been a disaster. Compatibility is worse today than it was when I started.<br /><br />But ... again, I'll trust you and start working on this change. The way I usually do this is to change idle() so that it does a dummy read from PC without incrementing. For the weird ones where it reads from some other place instead of idling, we can replace idle() with the reads they are doing instead.<br /><br />&gt; That was meant to be a beg to anyone else reading this thread to write that test ROM for me, not to you to change higan.<br /><br />That's fair! It's good to raise issues about corner cases instead of just assuming we are right already.<br /><br />And just to reiterate the above again, I'm not saying I am right. If I am, I'm not going to gloat. If I'm not, I'll fix it and thank you and the tester for finding the issue. I just want proof before making changes.<br /><br />I know every bsnes/higan forker loves to put passive aggressive comments into their Git changelogs, but one of these days ... even if you guys are right most of the time ... eventually, you're gonna be wrong. And now you're gonna have a comment about how it's literally impossible my behavior was correct, and lo and behold.<br /><br />Notice how I never say in absolute terms that I'm right. That's because I don't know until I confirm it for myself. It's really better to be cautious about these things. No matter how unreasonable you think I am, everyone can see for themselves how SNES emulation <em>used</em> to be prior to my unorthodox approaches.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199054"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199054">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199054#p199054"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Jun 26, 2017 5:58 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1398
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">(sorry for double post, but the former was too long already.)<br /><br />Went through the document, tried to identify all discrepancies, noted concerns with Overload's document.<br /><br />Overall, I don't think idle() is going to cut it. Even in the cases where it's a direct idle, the address bus indicates it's re-reading the last fetched byte. So it sounds like having a memory address register to keep track of the last read-from address would do the job ... but then there's cases like CALL that seem to have an idle cycle that reads from the stack *before* actually reading from the stack.<br /><br />So right now, I'm not really sure the best way to handle these idle cycles correctly.<br /><br />My biggest technical concern right now is ... when there are multiple reads from the same address, how do we know -definitively- which one is the value actually used? Like say you fetch the direct page address from PC+1, then there's another read from PC+1 ... what if the value differs between the two reads? Which read matters? I know, not likely, but still ... I'm guessing the second case.<br /><br />Discrepancies found:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">AbsoluteBitModify:<br />&nbsp; idle() =&gt; read(absolute)<br /><br />AbsoluteIndexedWrite:<br />&nbsp; consistency cleanup: perform absolute+index in-place<br /><br />DirectWriteDirect:<br />&nbsp; idle() =&gt; load(target)<br /><br />DirectWriteImmediate:<br />&nbsp; idle() =&gt; load(direct)<br /><br />DirectReadWord:<br />&nbsp; idle() =&gt; load(direct+0)<br /><br />IndirectIndexed(Read,Write):<br />&nbsp; idle() =&gt; load(direct+1)<br /><br />IndirectXIncrement(Read,Write):<br />&nbsp; second idle() =&gt; ... load(X) again?<br />&nbsp; something about not affecting registers on the cycle before ...<br /><br />IndirectXWriteIndirectY:<br />&nbsp; second idle() =&gt; load(X)<br /><br />Pull,PLP:<br />&nbsp; second idle() =&gt; reads from SP without incrementing SP ...<br /><br />Push:<br />&nbsp; second idle() =&gt; unknown purpose<br /><br />BBC,BBS,BNEDirect,BNEDirectDecrement,BNEDirectX:<br />&nbsp; second fetch(), idle() =&gt; wrong ordering<br /><br />BRK:<br />&nbsp; move first idle() to top of function<br />&nbsp; push PC, P before reading VA<br /><br />JSPDirect:<br />&nbsp; second idle() =&gt; goes after push; reads from SP<br /><br />JSRAbsolute:<br />&nbsp; second and third idle() =&gt; goes after push; reads from SP<br /><br />JST:<br />&nbsp; two idle()s go to top, one after read(absolute)<br /><br />RTI,RTS:<br />&nbsp; two idle()s go to top; second is a stack read<br /><br />STW:<br />&nbsp; consistency cleanup: turn into StoreWord(A)</div><br /><br />Document concerns:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; when there is an operand fetch followed by an idle cycle (eg DO fetch) ...<br />&nbsp; Which fetch actually counts for DO? The first or the second?<br />&nbsp; Same question for 19b<br /><br />&nbsp; 17. Implied i: it's not made clear which instructions take how many cycles.<br />&nbsp; I know the answers, but they should be documented, yes?<br /><br />&nbsp; 19b. Relative rel: what does it mean for the data bus to have Offset on cycle 4?<br /><br />&nbsp; 20b. Stack s<br />&nbsp; Where is cycle 3 reading from?<br /><br />&nbsp; CLR, SET addr:bit do not appear to be documented?<br /><br />&nbsp; what the christ is with condition (5)? Madness &gt;_&gt;</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199064"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199064">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199064#p199064"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Jun 26, 2017 6:54 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">what the christ is with condition (5)? Madness &gt;_&gt;</div><br /><br />I wonder if <em>all</em> the redundant reads are actually artifacts of the memory controller that Sony bolted on (remember that most SPC700 chips are MCUs with completely internal RAM and ROM and no external bus at all) and don't affect the internal registers. I'm waiting for a PM from Overload confirming my speculation, but based on the number of pins connecting the SMP to the DSP, it looks like it's a 6502-style bus, which has no way to distinguish a &quot;read&quot; from an &quot;internal operation&quot;.<br /><br />i.e. the SPC700 core itself is doing an idle cycle, and its internal registers don't see it as a read, but the external bus has no way to indicate that, so from outside the chip it looks like a re-read of the last address that was read from (the address pins are effectively &quot;open bus&quot;).<br /><br />In that case it would be safe to emulate them as true idle cycles, because no addresses that <em>aren't</em> SMP-internal have any side effects on reads.<br /><br />Semi-offtopic: for the 6502, 65816 and SPC700, the opcode switch tables look a <em>lot</em> nicer and more logical if instead of putting the opcodes in numerical order you arrange them like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">case 0x00:<br />case 0x20:<br />case 0x40:<br />case 0x60:<br />case 0x80:<br />case 0xa0:<br />case 0xc0:<br />case 0xe0:<br />case 0x01:<br />case 0x21:<br />&#91;....&#93;<br />case 0x1f:<br />case 0x3f:<br />case 0x5f:<br />case 0x7f:<br />case 0x9f:<br />case 0xbf:<br />case 0xdf:<br />case 0xff:</div><br /><br />It shouldn't make any difference to code generation/performance, because the compiler should see that there are 256 contiguous cases (even if they're in jumbled order) and compile it as a single indexed indirect jump.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p199071"></a>
				<b class="postauthor">byuu</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199071">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199071#p199071"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Jun 26, 2017 7:40 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Mar 27, 2006 5:23 pm<br /><b>Posts:</b> 1398
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">&gt; i.e. the SPC700 core itself is doing an idle cycle, and its internal registers don't see it as a read, but the external bus has no way to indicate that, so from outside the chip it looks like a re-read of the last address that was read from (the address pins are effectively &quot;open bus&quot;).<br /><br />That's a good working theory. It would also answer my question that the first cycle to read the same address would be the value used, and not the second.<br /><br />What I'm wondering is if we can find a way to emulate this so that we can just say idle(); without having to say -where- it's reading every time. That would be really nice. Even better, if we can get the logic out of the SPC700 CPU core and into the bus handler of the SMP class. The main limitatin there are instructions like RETI where it's reading from the stack pointer -before- the first increment on its idle cycle ... a value that wouldn't be on the bus from a previous read.<br /><br />&gt; Semi-offtopic: for the 6502, 65816 and SPC700, the opcode switch tables look a lot nicer and more logical if instead of putting the opcodes in numerical order you arrange them like this:<br /><br />I agree completely. The reason I went numerically was to fill in the table initially, where it would be very easy to spot any missing instructions. I never really bothered to redesign the tables to a grouped ordering after finishing. Partly because there'd be bikeshedding about which groups should go before which other groups.<br /><br />For similar bikeshed-avoidance reasons, I've been ordering my actual instruction implementations alphabetically.<br /><br />Well in any case if you haven't seen it and were interested, I've been cleaning up my SPC700 core since the start of v102 or so. Still a work in progress, but you can see it here:<br /><br /><!-- m --><a class="postlink" href="https://gitlab.com/higan/higan/tree/master/higan/processor/spc700">https://gitlab.com/higan/higan/tree/mas ... sor/spc700</a><!-- m --><br /><br />You probably won't be happy to find that I've reverted the BitField stuff. It didn't actually affect performance, and I didn't like that I couldn't pass BitField parameters to functions, because typeof BitField&lt;0&gt; != BitField&lt;3&gt;.<br /><br />I did get rid of the &quot;global state&quot; aa, rd, dp, sp, bit, ya nonsense that was a hangover from when each cycle was a step inside of a state machine back in ... gods ... v020 or so.<br /><br />The worst of it is still the disassemblers. The WDC65816 core is actually using snprintf still &gt;_&gt;</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=375"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p199078"></a>
				<b class="postauthor">AWJ</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p199078">Re: SPC700 instruction cycle breakdown</a></div><div style="float: right;"><a href="./viewtopic.php?p=199078#p199078"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Jun 26, 2017 8:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Nov 10, 2008 3:09 pm<br /><b>Posts:</b> 433
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">byuu wrote:</div><div class="quotecontent">&gt; i.e. the SPC700 core itself is doing an idle cycle, and its internal registers don't see it as a read, but the external bus has no way to indicate that, so from outside the chip it looks like a re-read of the last address that was read from (the address pins are effectively &quot;open bus&quot;).<br /><br />That's a good working theory. It would also answer my question that the first cycle to read the same address would be the value used, and not the second.<br /><br />What I'm wondering is if we can find a way to emulate this so that we can just say idle(); without having to say -where- it's reading every time. That would be really nice. Even better, if we can get the logic out of the SPC700 CPU core and into the bus handler of the SMP class. The main limitatin there are instructions like RETI where it's reading from the stack pointer -before- the first increment on its idle cycle ... a value that wouldn't be on the bus from a previous read.<br /><br />&gt; Semi-offtopic: for the 6502, 65816 and SPC700, the opcode switch tables look a lot nicer and more logical if instead of putting the opcodes in numerical order you arrange them like this:<br /><br />I agree completely. The reason I went numerically was to fill in the table initially, where it would be very easy to spot any missing instructions. I never really bothered to redesign the tables to a grouped ordering after finishing. Partly because there'd be bikeshedding about which groups should go before which other groups.<br /><br />For similar bikeshed-avoidance reasons, I've been ordering my actual instruction implementations alphabetically.<br /><br />Well in any case if you haven't seen it and were interested, I've been cleaning up my SPC700 core since the start of v102 or so. Still a work in progress, but you can see it here:<br /><br /><!-- m --><a class="postlink" href="https://gitlab.com/higan/higan/tree/master/higan/processor/spc700">https://gitlab.com/higan/higan/tree/mas ... sor/spc700</a><!-- m --><br /><br />You probably won't be happy to find that I've reverted the BitField stuff. It didn't actually affect performance, and I didn't like that I couldn't pass BitField parameters to functions, because typeof BitField&lt;0&gt; != BitField&lt;3&gt;.<br /><br />I did get rid of the &quot;global state&quot; aa, rd, dp, sp, bit, ya nonsense that was a hangover from when each cycle was a step inside of a state machine back in ... gods ... v020 or so.<br /><br />The worst of it is still the disassemblers. The WDC65816 core is actually using snprintf still &gt;_&gt;</div><br /><br />I'm wondering whether it'd be better just to stick most of the instruction implementations directly inside the switch table, and only use functions for things that are actually reused across multiple instructions (the algorithms for adc/sbc/etc., and addressing modes that have the same timing across multiple instructions)<br /><br />You can still parameterize SetFlag etc. with bitfields, you just pass the mask or the bit index (which are public static members of the bitfield classes) instead of a reference to the bitfield object. I.e. you can't do this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void SetFlag(Flag &amp;flag, bool value)<br />{<br />&nbsp; flag = value;<br />}<br /><br />SetFlag(C, true)<br />SetFlag(V, false)</div><br />but you can do this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void SetFlag(uint8 mask, bool value)<br />{<br />&nbsp; psw = (value ? psw | mask : psw &amp; ~mask);<br />}<br /><br />SetFlag(C.mask, true)<br />SetFlag(V.mask, false)</div><br /><br />If you think the &quot;.mask&quot; is ugly you can hide it in a macro or something <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3737"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=12&amp;t=16140"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=12"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=12&amp;t=16140"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>6</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 86 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=30">3</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=45">4</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=12&amp;t=16140&amp;start=75">6</a> &nbsp;<a href="./viewtopic.php?f=12&amp;t=16140&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=25">Other</a> &#187; <a href="./viewforum.php?f=23">Other Retro Dev</a> &#187; <a href="./viewforum.php?f=12">SNESdev</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 3 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="16140" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12" selected="selected">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
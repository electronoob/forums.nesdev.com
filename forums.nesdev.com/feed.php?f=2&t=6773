<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=6773" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2015-02-28T11:14:03-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=6773</id>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2015-02-28T11:14:03-07:00</updated>
<published>2015-02-28T11:14:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142207#p142207</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142207#p142207"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions (NintendulatorDX)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142207#p142207"><![CDATA[
<div class="quotetitle">GradualGames wrote:</div><div class="quotecontent"><br />By expand macros, does this mean in the code view in the debugger you will see the macro expanded in place, so you can see the context of the surrounding code? I recall in previous versions it would &quot;jump&quot; to the macro in the code. If this is what you've improved, then awesome, thanks!<br /></div><br />Not quite like that, but maybe sort of similar if I understood you right. When the option is turned on, the behavior is same as in previous versions. When the option is off, NDX will stay at the highest possible level and not display macro contents (previously it'd go as deep into macros as possible).<br /><br />It probably should have an option to set the desired depth. At the moment it will reset the depth on every step. (Fortunately I think most people would be usually interested only in the highest <em>or</em> the lowest depth).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Sat Feb 28, 2015 11:14 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[GradualGames]]></name></author>
<updated>2015-02-28T09:52:20-07:00</updated>
<published>2015-02-28T09:52:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142204#p142204</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142204#p142204"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions (NintendulatorDX)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142204#p142204"><![CDATA[
By expand macros, does this mean in the code view in the debugger you will see the macro expanded in place, so you can see the context of the surrounding code? I recall in previous versions it would &quot;jump&quot; to the macro in the code. If this is what you've improved, then awesome, thanks!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3735">GradualGames</a> — Sat Feb 28, 2015 9:52 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2015-02-26T21:11:01-07:00</updated>
<published>2015-02-26T21:11:01-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142159#p142159</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142159#p142159"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions (NintendulatorDX)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=142159#p142159"><![CDATA[
Decided to put together v35. It has a bunch of old changes that I couldn't bother to merge to the public repository. From now on I'll probably be updating only the public repository.<br /><br />The changes:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">  * &quot;Expand macros&quot; option.<br />  * CA65 debug header no longer tramples over custom character mappings.<br />  * Absolute file paths can be used in debug files.<br />  * Bug fixed from dbginfo.c that caused some (rare) debug files not to<br />  be loaded.<br />  * readMemory() function added to the Lua interface.<br />  * Latest updates from the main Nintendulator repo integrated.<br />  * Warnings are given for uninitialized PRG-RAM accesses.<br />  * Memory can be randomized on power-on.<br />  * Lua, CD and IUP updated to the latest versions.<br />  * Updated project to Visual Studio 2013.<br />  * Added limited PowerPak hardware emulation (requires recompilation).<br />  * Diagnostic message is shown if PPU_DATA is written to during rendering.<br />  * NTSC NES borders are displayed.<br /></div><br />Download from the usual place: <!-- m --><a class="postlink" href="http://kkfos.aspekt.fi/projects/nes/tools/nintendulatordx/">http://kkfos.aspekt.fi/projects/nes/too ... dulatordx/</a><!-- m --><br />The git repository was moved to GitHub: <!-- m --><a class="postlink" href="https://github.com/fo-fo/nintendulatordx">https://github.com/fo-fo/nintendulatordx</a><!-- m --><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Thu Feb 26, 2015 9:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2012-11-08T07:09:43-07:00</updated>
<published>2012-11-08T07:09:43-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102553#p102553</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102553#p102553"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102553#p102553"><![CDATA[
Well, I decided to release v34. It's not perfect, but I'm done with tinkering. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Download from <span style="font-size: 150%; line-height: normal"><a href="http://kkfos.aspekt.fi/downloads/nintendulatordx-v34.zip" class="postlink">HERE</a></span>.<br /><br />New stuff:<br />- Lua scripting<br />- Banking support for profiling<br />- Debug breakpoints (write to a magic register or call ndxDebugBreak macro to stop the emulator)<br />- Better documentation<br />- Feature demo for CA65<br />- Mappers updated to the latest version from SVN<br />- Source moved to gitorious (<!-- m --><a class="postlink" href="https://gitorious.org/nintendulatordx">https://gitorious.org/nintendulatordx</a><!-- m -->)<br /><br />As usual, if you find anything wrong in the docs (wrote them in a hurry) or anywhere else, let me know. The Lua-emulator thread synchronization is still a bit iffy (should work, but the user has to know what he/she is doing).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Thu Nov 08, 2012 7:09 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qbradq]]></name></author>
<updated>2012-11-06T07:51:14-07:00</updated>
<published>2012-11-06T07:51:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102408#p102408</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102408#p102408"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102408#p102408"><![CDATA[
The MMC3 code appears to support 256 1K RAM banks now, although I only tested 32KB. Glad to hear it'll be in the next release <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3706">qbradq</a> — Tue Nov 06, 2012 7:51 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2012-11-07T07:07:37-07:00</updated>
<published>2012-11-06T07:33:05-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102406#p102406</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102406#p102406"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102406#p102406"><![CDATA[
<div class="quotetitle">qbradq wrote:</div><div class="quotecontent"><br />I've made a test ROM for TNROM boards configured with 32KB of VRAM (<a href="https://sites.google.com/site/qbradq/projects-1/tnrom32test" class="postlink">link</a>). I've found that I needed to build the mappers from SVN to get it to work. Have you considered updating your mappers to the latest SVN?<br /></div><br />Ah I didn't know about, in fact I remember requesting &gt;8KB CHR-RAM support for MMC3 from Quietust <s>but didn&#39;t get a reply &#40;but looks like he implemented it after all&#41;</s> (<em>correction: I misremembered, he did reply, and implemented the support not long after the reply, unknown to me</em>). But yeah, I'll add the updated mappers to the upcoming release.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Tue Nov 06, 2012 7:33 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qbradq]]></name></author>
<updated>2012-11-06T06:18:09-07:00</updated>
<published>2012-11-06T06:18:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102399#p102399</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102399#p102399"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102399#p102399"><![CDATA[
I've made a test ROM for TNROM boards configured with 32KB of VRAM (<a href="https://sites.google.com/site/qbradq/projects-1/tnrom32test" class="postlink">link</a>). I've found that I needed to build the mappers from SVN to get it to work. Have you considered updating your mappers to the latest SVN?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3706">qbradq</a> — Tue Nov 06, 2012 6:18 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2012-11-02T09:54:52-07:00</updated>
<published>2012-11-02T09:54:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102215#p102215</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102215#p102215"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102215#p102215"><![CDATA[
<div class="quotetitle">qbradq wrote:</div><div class="quotecontent"><br />You never cease to astound <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />What's inspiring all of the Lua work fox? Is there a project you're working on that's using it?<br /></div><br />Thanks! As to why, I was bored and decided it was a good time to learn some Lua. <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> But all of this will certainly come in handy in future projects. I wish I had had something like this when working on STREEMERZ.<br /><br /><div class="quotetitle">Movax12 wrote:</div><div class="quotecontent"><br />I assume you could define a breakpoint with something like:   luaExecStr &quot;print( 'Breakpoint encountered.'); NDX.stop() end&quot;<br /><br />With no code being output to your nes code/rom?<br /></div><br />Yes. The macro outputs the string to a special segment, which is redirected to another file (I use extension .ndx for these). There's one case when it's necessary to output one NOP though:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; Display a message when some condition happens:<br />lda foo<br />beq not_foo<br />  ; The emulator uses addresses (and banking information) to identify these, so<br />  ; if luaExecStr/luaExecFile is the very last thing before the condition label, it<br />  ; needs to output one NOP, so that its address is not the same as &quot;not_foo&quot;.<br />  luaExecStr &quot;print( 'foo happened' )&quot;, 1<br />not_foo:<br /></div><br /><br />Of course, at least in some cases it's possible to implement the above check like this too, avoiding the NOP:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; NOTE: In Lua, all numbers evaluate as true, so have to explicitly check for non-zero.<br />luaExecStr &quot;if RAM.foo &gt; 0 then print( 'foo happened' ) end&quot;<br /></div><br /><br />All of this stuff only works in CA65 of course, and only with debug file enabled. (I could make it work universally by using a special register write, like the debug output feature currently does, but that's low priority.)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Fri Nov 02, 2012 9:54 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Movax12]]></name></author>
<updated>2012-11-02T07:56:54-07:00</updated>
<published>2012-11-02T07:56:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102212#p102212</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102212#p102212"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102212#p102212"><![CDATA[
This is awesome and I'm excited to use these new debugging features.<br /><br />I assume you could define a breakpoint with something like:   luaExecStr &quot;print( 'Breakpoint encountered.'); NDX.stop() end&quot;<br /><br />With no code being output to your nes code/rom?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4680">Movax12</a> — Fri Nov 02, 2012 7:56 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qbradq]]></name></author>
<updated>2012-11-02T04:09:36-07:00</updated>
<published>2012-11-02T04:09:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102208#p102208</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102208#p102208"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102208#p102208"><![CDATA[
You never cease to astound <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />What's inspiring all of the Lua work fox? Is there a project you're working on that's using it?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3706">qbradq</a> — Fri Nov 02, 2012 4:09 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2012-11-01T20:22:36-07:00</updated>
<published>2012-11-01T20:22:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102199#p102199</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102199#p102199"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=102199#p102199"><![CDATA[
<div class="quotetitle">thefox wrote:</div><div class="quotecontent"><br />Eventually I hope to add support for &quot;stand alone&quot; Lua scripts (like in FCEUX), which don't need to be executed from within the code.<br /></div><br />Did that too. Also added support for CD (Canvas Draw) graphics library, as well as an ability to overlay graphics generated with it on top of the emulated view. Then I wrote a little FCEUX compatiblity module (incomplete) and ported over some of the Lua scripts from FCEUX, like SMB Snow and miau's Megaman 2 Laser Eyes. Cool, cool, should be done soon.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Thu Nov 01, 2012 8:22 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2012-11-08T07:16:21-07:00</updated>
<published>2012-10-28T11:01:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101886#p101886</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101886#p101886"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101886#p101886"><![CDATA[
<div class="quotetitle">thefox wrote:</div><div class="quotecontent"><br />I've started working on bolting Lua support to NintendulatorDX. My vision about it is a little bit different than the way FCEUX handles it. I want to embed Lua code in to the ROM, so that it can be used for 1) runtime asserts 2) prototype code 3) debug output, among other things.<br /></div><br />I've made good progress and I'm pretty happy with how it works now. Couple of examples:<br /><br />Debug output:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">.zeropage<br />  some_var: .byte 0<br /><br />.proc something<br />  lda #$69<br />  ; RAM table (for reading/writing bytes) is automatically defined.<br />  luaExecStr &quot;print( 'value from memory is ' .. RAM&#91; 0x234 &#93; )&quot;<br />  ; RAM table can also be indexed with symbols. Only works for global symbols right now (no scopes, but of course it's always possible to define aliases for scoped variables in CA65).<br />  luaExecStr &quot;print( 'value from memory is ' .. RAM.some_var )&quot;<br />  luaExecStr &quot;print( string.format( 'A = %X, X = %X, Y = %X', REG.A, REG.X, REG.Y ) )&quot;<br />  rts<br />.endproc<br /></div><br />luaExecStr doesn't embed any code/data in the ROM (but it will embed one NOP if requested, as is required in some cases), it works by defining debug symbols for the information it needs and outputting the data in a separate segment, which is then output to a separate file. All of Lua code is executed in 0 cycles, so it's nice for prototyping.<br /><br />Runtime asserts:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">  luaExecStr &quot;if RAM.some_var &gt; 50 and REG.A = 0x49 then iup.Message( 'Assert failed', 'Something went wrong' ); NDX.stop() end&quot;<br /></div><br />It's of course possible to define a simpler macro for runtime asserts, which will hide the iup.Message call etc.<br /><br />Prototyping:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; foo.s (6502 code)<br />.bss<br />ARRAY_SIZE = 100<br />array: .res ARRAY_SIZE<br /><br />.code<br />.proc gahh<br />  luaExecFile &quot;gahh-proto.lua&quot;<br />  rts<br />.endproc<br /><br />-- gahh-proto.lua (Lua code)<br />-- Fill &quot;array&quot; with something.<br />array_addr = SYM.array&#91; 1 &#93;<br />for i = 0, SYM.ARRAY_SIZE&#91; 1 &#93; - 1 do<br />  RAM&#91; array_addr + i &#93; = i + 123<br />end<br /></div><br />IUP GUI toolkit is also included by default. It can be used to implement custom debug dialogs:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">-- Lua code<br />ctl = iup.label { title=&quot;something&quot;, expand=&quot;YES&quot; }<br />dlg = iup.dialog { ctl, title=&quot;Debug Helper&quot;, size=&quot;200x200&quot; }<br />dlg:show()<br /><br />; 6502 code<br />luaExecStr &quot;ctl.title = string.format( 'some_var is %X', RAM.some_var )&quot;<br /></div><br />Functions currently exported from the emulator:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">NDX.getPPUCycles<br />NDX.setRegister<br />NDX.print -- For printing to the Nintendulator Debug Information window, normal print() prints to the Lua console<br />NDX.getRegister<br />NDX.writeRAM<br />NDX.getCPUCycles<br />NDX.stop<br />NDX.readRAM<br />NDX.getSymbols<br /></div><br />Eventually I hope to add support for &quot;stand alone&quot; Lua scripts (like in FCEUX), which don't need to be executed from within the code.<br /><br />Now I just need a new project which I can use all of these features on. <img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=";)" title="Wink" /> BTW, release will come some time later, my repo got corrupted so I need to set up the source control again to make it easy to merge stuff from the official Nintendulator SVN repo.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Sun Oct 28, 2012 11:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2012-10-17T07:01:49-07:00</updated>
<published>2012-10-17T07:01:49-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101352#p101352</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101352#p101352"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101352#p101352"><![CDATA[
<div class="quotetitle">qbradq wrote:</div><div class="quotecontent"><br />I'm trying to update my assembler to output version 2.0 debug info files. Can you point me to the documentation on this file format? I've looked at the dbginfo.c file but I can't make heads or tails of what it's doing.<br /></div><br />There's no documentation as far as I know. Easiest way to figure it out is probably just to play around with CA65 and see what kind of output it produces for different source inputs.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Wed Oct 17, 2012 7:01 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[qbradq]]></name></author>
<updated>2012-10-17T06:23:21-07:00</updated>
<published>2012-10-17T06:23:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101350#p101350</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101350#p101350"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=101350#p101350"><![CDATA[
I'm trying to update my assembler to output version 2.0 debug info files. Can you point me to the documentation on this file format? I've looked at the dbginfo.c file but I can't make heads or tails of what it's doing.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3706">qbradq</a> — Wed Oct 17, 2012 6:23 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[thefox]]></name></author>
<updated>2012-10-10T12:30:39-07:00</updated>
<published>2012-10-10T12:30:39-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=100926#p100926</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=100926#p100926"/>
<title type="html"><![CDATA[Re: Nintendulator Debug Extensions]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6773&amp;p=100926#p100926"><![CDATA[
I've started working on bolting Lua support to NintendulatorDX. My vision about it is a little bit different than the way FCEUX handles it. I want to embed Lua code in to the ROM, so that it can be used for 1) runtime asserts 2) prototype code 3) debug output, among other things.<br /><br />At the moment I have two macros that work like this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">luaExecStr &quot;NDX.print( 'foo' .. 12345 )&quot;<br />luaExecFile &quot;src/lua-test.lua&quot;<br /></div><br />Now the hardest part is coming up with a nice way for the Lua code to interface the emulator. I first thought about copying the interface from FCEUX (which I believe copied at least parts of it from Snes9x), but I think I'll come up with my own one instead. Or maybe both, so I can get compatibility with Lua scripts made for FCEUX.<br /><br />The main motivation for coming up with a new interface is that I believe the FCEUX way is too verbose for &quot;inline&quot; runtime asserts (FCEUX uses stuff like <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">memory.readbyte&#40;0x123&#41;==0x69</tt> when it could be <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">RAM[0x123]==0x69</tt>).<br /><br />If anybody has ideas about how the Lua-emulator interface should work, let me know!<br /><br />Also, note to self, I need to add a way of retrieving the debug symbols.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=80">thefox</a> — Wed Oct 10, 2012 12:30 pm</p><hr />
]]></content>
</entry>
</feed>
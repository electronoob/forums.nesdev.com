<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - FamiTone - audio library (release)</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">FamiTone - audio library (release)</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=7329">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=7329</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Mon May 30, 2011 1:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Shiru wrote:</div><div class="quotecontent">This question is not related to FamiTone, it is related to NESASM and answered in its docs. In short, .bank selects 8K bank in a ROM file, number of banks defined through .ines*** defines in the beginning of the source file.</div>
<br />
<br />ah ok i got it now, the FamiTone code is NESASM.  <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" />  Thank you. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Have another question and hope it is related to FamiTone.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />  How can I get FamiToneUpdate to run on every frame.................................. wait that's probably answered in demo.asm... yes it is!  <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" />  Thanks though. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Mon May 30, 2011 1:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It is related to NES programming in general, and actually it is not the simplest question. You need to call it after VRAM updates, so the most common way is to put sound update call in the NMI handler, after all the video related code.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Thu Jun 02, 2011 8:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Shiru, have you ever recieved a small bunch of <span style="color: brown">Unknown label.</span> errors followed by a lot of <span style="color: green">Can't determine address.</span> errors?  These errors have been reported by asm6 while trying to build my nes file to test with.  All of the errors have been reported from music32101.asm, the first music file created by famitone.  I did add the -asm6 before its creation.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Thu Jun 02, 2011 8:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />No, I haven't got any mails regarding FamiTone at all.
<br />
<br />I don't know anything about asm6.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>unregistered</b> [ Sat Jun 04, 2011 3:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>!!! :D</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Made progress... yes.  All of the errors dissappeared and the rom build successfully once I recieved some understanding and so we figured out that all of the <div class="codetitle"><b>Code:</b></div><div class="codecontent">.env_default</div> things needed to be changed to <div class="codetitle"><b>Code:</b></div><div class="codecontent">@env_default</div>.  I guess something needs to be changed in the text2data program?  Remember I'm using asm6.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> 
<br />
<br />The rom kind of works... there is a lot of wierd things... I think it's my code problem somewhere, but Shiru, do you think you could help me with some hints as to why the song doesn't play?  Have to look at the code now... help if you can. <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Sun Jun 05, 2011 4:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />text2data supports asm6 syntax, so you did something wrong. Old version of the tool, -asm6 in a wrong place, etc.
<br />
<br />Sorry, I don't like to figure out what is wrong with other's code, I always have megabytes of my own code to work with. If you have problems with NES programming in general, ask on NESdev section of this forum, other people could help. In this thread I only answer to questions related to FamiTone usage, issues, bugs, not obvious things (not mentioned in docs), etc.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Sun Jun 05, 2011 11:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I had thoughts about native multiple assemblers support in FamiTone for long time, similar to the idea tepples once suggested. Ports by ManicGenius and UncleSporky gave me idea how it should look, so here is my attempt to solve the problem: a tool that converts NESASM source code to CA65 and ASM6 source code (not arbitrary code, just FamiTone).
<br />
<br />As I'm not a user of these assemblers, try it and tell me if anything is wrong. CA65 output compiles without errors, at least.
<br />
<br />Edit: now included into the main archive
<br />
<br />Additionally, text2data and nsf2data tools were updated to produce correct ca65 output.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Sun Jun 05, 2011 6:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />FamiTone is updated. Many minor fixes, some optimizations, code to work correctly in situation when you call update in NMI and start sound effects from the main code.
<br />
<br />ca65 version converted with the tool is tested, it works correctly.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Sat Jul 16, 2011 2:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Fixed a bug in text2data with incorrect RLE compression in envelopes (encoded 3+ as 5+ frames).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Fri Jul 22, 2011 11:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Another update. Fixes some things in text2data, and also adds two switches -onlyins and -noins. Using these switches you can export instrument and music data separately, it is useful when you need to save some space by using the same instruments data with few songs.
<br />
<br />Warning: text2data don't like songs with patterns of different weird lengths (with effects D00 and Bxx), in some cases it can create wrong music data. Needs to be fixed.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun Jul 24, 2011 4:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I went to Shiru's website, It seems to be down, Maybe permanently.
<br />
<br />Just thought I'd let you know.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Sun Jul 24, 2011 4:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks to my hoster for my new signature. Just wait a day, it will work again. FTP links works always, though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Aug 18, 2011 6:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />FYI, I've added FamiTone text export option in <a href="http://kkfos.aspekt.fi/projects/nes/tools/pornotracker/" class="postlink">Pornotracker</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>sdwave</b> [ Mon Feb 13, 2012 1:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Awesome work!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I just wanted to say Famitone is a really nice library/package.  I've got my Famitracker music running (with DPCM drums) and multichannel tri/noise sound effects I made from .ftm-&gt;.nsf-&gt;famitone data.
<br />
<br />One small possible bug report, I'm using ca65, and I had to fix one small bug to get my sound effects working.  I needed to change
<br />
<br />.if(~FT_SFX_ENABLE)
<br />
<br />from using bitwise not "~" to logical not "!" 
<br />
<br />.if( !FT_SFX_ENABLE)
<br />
<br />Expected, or something else I should have done?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Mon Feb 13, 2012 3:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />In my version it is logical not, and it haven't change for long time, so maybe you got some older version (current is 1.24)?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
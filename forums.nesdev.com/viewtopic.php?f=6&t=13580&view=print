<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Benchmarking music players</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Benchmarking music players</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=13580">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=13580</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Thu Dec 03, 2015 12:38 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Benchmarking music players</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I know this isn't too useful, but for the fun of it, I ran <a href="http://forums.nesdev.com/viewtopic.php?p=160049#p160049" class="postlink">a random FamiTracker-generated NSF</a> through my NSF benchmark app, and got this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Individual Features<br />DJ Tepples<br />2015 Damian Yerrick<br /><br />NSF init finished.&nbsp; 719 instructions.&nbsp; CPU: 2490 cycles&nbsp; PPU: 21.9 lines<br />NSF playing... (ESC to quit)<br />NSF play stopped.<br /><br />Max CPU: 5561 cycles&nbsp; Max PPU: 48.92 lines<br />Average CPU: 1464 cycles&nbsp; Average PPU: 12.88 lines<br />1550043 frames played - 430 minute(s), 3 second(s)<br /></div><br /><br />Here another rendition of the same test song by tepples, in his Pently 0.05wip version.<br /><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=13589" class="postlink">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=13589</a><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Pently demo<br />DJ Tepples<br />2015 Damian Yerrick<br /><br />NSF init finished.&nbsp; 177 instructions.&nbsp; CPU: 639 cycles&nbsp; PPU: 5.6 lines<br />NSF playing... (ESC to quit)<br />NSF play stopped.<br /><br />Max CPU: 2649 cycles&nbsp; Max PPU: 23.31 lines<br />Average CPU: 825 cycles&nbsp; Average PPU: 7.26 lines<br />2072561 frames played - 575 minute(s), 41 second(s)<br /></div><br /><br /><br />GGSound by Gradual Games.  The song benchmarked is the 3rd track in the included demo, because it uses 4 channels.<br /><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=11655" class="postlink">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=11655</a><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">NSF init finished.&nbsp; 477 instructions.&nbsp; CPU: 1662 cycles&nbsp; PPU: 14.6 lines<br />NSF playing... (ESC to quit)<br />NSF play stopped.<br /><br />Max CPU: 5361 cycles&nbsp; Max PPU: 47.16 lines<br />Average CPU: 1577 cycles&nbsp; Average PPU: 13.87 lines<br />1236767 frames played - 343 minute(s), 47 second(s)<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Dec 03, 2015 9:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Relative importance of compositional techniques</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is your NSF benchmark app publicly available?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Dec 03, 2015 11:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Relative importance of compositional techniques</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />(OT: NDX can also be used for NSF benchmarking -- it will display cur/avg/max in the Debugger window (Timers) when an NSF is playing.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Dec 03, 2015 11:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Relative importance of compositional techniques</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's useful. Thanks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Dec 03, 2015 12:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Relative importance of compositional techniques</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />(Maybe this NSF benchmarking discussion should be split off?)<br /><br />Here's something I always found interesting: Solstice, with one of the more technically complex tunes you can find on NES, only averages around 500-600 cycles in its play routine. Same seems to be true for most other Follin tunes (Silver Surfer, ...).<br /><br />I find most other games to be in the 1000-2000 cycle range.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Thu Dec 03, 2015 9:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Relative importance of compositional techniques</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">Is your NSF benchmark app publicly available?</div><br /><br />Sort-of, it's put together sloppily but my post in this thread has it attached:<br /><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=13322" class="postlink">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=13322</a><br /><br />To use it, the NSF file has to be renamed to &quot;guardian.nsf&quot;.. yeah, I know how to use argc and argv since then.<br />(edit: also, it only plays the starting track #)<br /><br />I'm sure Nintendulator DX is a better option, but there it is anyways.<br /><br />Since this is a new thread now, one of the things I was wondering about, is if Famitracker's engine is anything like NT2, the big CPU usage spike is at the beginning of a new pattern.  If so, it makes me wondering if staggering the channel processing over a couple frames would help it much.  Like having pulse #2 and noise always lag by one frame.  Just a thought, maybe it'd be noticeable in some cases, but detrimental, I kinda doubt it.<br /><br />Long ago when I was writing my SNES NSF player, I was using the background color to see CPU usage of various NSFs, I seem to remember that Jeroen Tel stuff (Robocop 3 in particular) had very consistent CPU usage, like the color bar was barely moving.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Dec 03, 2015 10:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Relative importance of compositional techniques</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Since this is a new thread now, one of the things I was wondering about, is if Famitracker's engine is anything like NT2, the big CPU usage spike is at the beginning of a new pattern.</div><br />Changing a pattern isn't really that expensive by itself. I think Famitracker tends to peak on frames with a lot of active effects, and/or a new note on every row. A lot of patterns happen to begin with a set of new notes across all channels and a bunch of effects on the first row, which would tend to put a spike there (but not specifically because of the pattern change itself).<br /><br /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">If so, it makes me wondering if staggering the channel processing over a couple frames would help it much.  Like having pulse #2 and noise always lag by one frame.  Just a thought, maybe it'd be noticeable in some cases, but detrimental, I kinda doubt it.</div><br />There are a lot of cases where this would be very noticeable.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>OneCrudeDude</b> [ Fri Dec 04, 2015 10:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Benchmarking music players</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hmm, I always assumed that FT produced music was not very optimized for actual game use, guess this benchmarking tool sorta proves that.  I reckon the more advanced FT songs (Extends Levant/HertzDevil, anything by Chibi-Tech) would be impossible to work in an NES game scenario, right?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Fri Dec 04, 2015 11:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Benchmarking music players</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just because something sounds busy doesn't mean it's impossible or impractical in a game, or even that it's using too much CPU.<br /><br />Other than technical problems like nonstandard playback rates (e.g. 240Hz NSFs), or expansion audio, or PCM samples, for the most part the music people are making now <em>could</em> get into a game.<br /><br />There are a number of constraints that real games have (especially ROM space, RAM space) that commercial-era NES game composers had to make strong sacrifices to meet. People making music in Famitracker aren't trying to meet any of these constraints, which gives them a much wider palette of expression than most game composers had available to them.<br /><br />The CPU speed of Famitracker isn't really that big an issue. Its RAM usage is a little bit high, but with WRAM it'd be a non-issue. ROM usage of the kind of detailed music a lot of people write now is a concern if you're making a game, but this is a question of how much space you're willing to dedicate to music. There were 2 or 3 NES games with very large soundtracks (64k was about as big as they ever got), but people routinely write much larger single songs in Famitracker. They might actually be able to write something similar in smaller spaces if they were forced to deal with space constraints (they simply haven't had to deal with it via Famitracker), or it might even be sensible to just use larger ROM sizes now. Depends on the game and your project goals.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Dec 25, 2015 9:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Benchmarking music players</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Coming back the 'staggered channel update' idea, I thought of a variation that should be less noticeable by moving the audible delay to the end of a note.  So if the channels are updated in 2 phases, the first phase channels would have (beforehand) added a dummy entry to all the envelopes (at volume 0), and the second phase channels would be processed normally in the next frame.  So in the tracker when you have every channel hitting on the same line, the note/instrument/pattern initialization could happen on different frames, while the actual sound of both channels would start on the same frame.  You would just have a forced cut-off right before a new note, but only the first phase channels.  The more percussive the instrument used, the less noticeable the early cut-off would be.<br /><br />If anyone wondered why all this, it's to get a lower worst-case CPU usage.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
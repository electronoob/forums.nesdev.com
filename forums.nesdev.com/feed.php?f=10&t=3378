<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=3378" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2007-05-22T21:29:31-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=3378</id>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2007-05-22T21:29:31-07:00</updated>
<published>2007-05-22T21:29:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24381#p24381</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24381#p24381"/>
<title type="html"><![CDATA[Nullsleep's NSF playback code + displaying a sprite]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24381#p24381"><![CDATA[
doesn't the NTSC filter?  I guess I just assumed it did<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Tue May 22, 2007 9:29 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2007-05-22T20:43:52-07:00</updated>
<published>2007-05-22T20:43:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24378#p24378</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24378#p24378"/>
<title type="html"><![CDATA[Nullsleep's NSF playback code + displaying a sprite]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24378#p24378"><![CDATA[
I wonder if it's possible to emulate this $0D distortion.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Tue May 22, 2007 8:43 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2007-05-22T08:48:16-07:00</updated>
<published>2007-05-22T08:48:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24365#p24365</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24365#p24365"/>
<title type="html"><![CDATA[Nullsleep's NSF playback code + displaying a sprite]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24365#p24365"><![CDATA[
also:<br /><br />Use $0F for black.  $0D is the forbidden "blacker than black" and will distort the image on TV displays.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Tue May 22, 2007 8:48 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mcfiredrill]]></name></author>
<updated>2007-05-21T22:10:24-07:00</updated>
<published>2007-05-21T22:10:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24361#p24361</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24361#p24361"/>
<title type="html"><![CDATA[Nullsleep's NSF playback code + displaying a sprite]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24361#p24361"><![CDATA[
better read some more docs... <img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=";)" title="Wink" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3338">mcfiredrill</a> — Mon May 21, 2007 10:10 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mcfiredrill]]></name></author>
<updated>2007-05-21T22:10:02-07:00</updated>
<published>2007-05-21T22:10:02-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24360#p24360</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24360#p24360"/>
<title type="html"><![CDATA[Nullsleep's NSF playback code + displaying a sprite]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24360#p24360"><![CDATA[
Oh man...I understand even less than I thought <img src="http://forums.nesdev.com/images/smilies/icon_sad.gif" alt=":(" title="Sad" /><br />!!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3338">mcfiredrill</a> — Mon May 21, 2007 10:10 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[never-obsolete]]></name></author>
<updated>2007-05-21T21:54:13-07:00</updated>
<published>2007-05-21T21:54:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24359#p24359</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24359#p24359"/>
<title type="html"><![CDATA[Nullsleep's NSF playback code + displaying a sprite]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24359#p24359"><![CDATA[
does the sprite get refreshed every nmi? i'm not sure if that would matter on an emulator, but as said, $4014 is the way to go.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=187">never-obsolete</a> — Mon May 21, 2007 9:54 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2007-05-21T21:27:24-07:00</updated>
<published>2007-05-21T21:27:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24357#p24357</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24357#p24357"/>
<title type="html"><![CDATA[Nullsleep's NSF playback code + displaying a sprite]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24357#p24357"><![CDATA[
Don't worry, GBA Guy didn't really know what he was doing either, heheh.  Using the $2004 reg like that will probably fail on a real NES.  I can't see why it's not showing up on an emulator though, it looks OK at first glance.<br /><br />Really, noone ever uses the $2004 register at all.  It's better to use sprite-DMA, put all your sprites in a page of RAM (like $200-$2FF) then write $02 to the $4014 reg early in your NMI code to transfer that page.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Mon May 21, 2007 9:27 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[mcfiredrill]]></name></author>
<updated>2007-05-21T21:18:23-07:00</updated>
<published>2007-05-21T21:18:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24356#p24356</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24356#p24356"/>
<title type="html"><![CDATA[Nullsleep's NSF playback code + displaying a sprite]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3378&amp;p=24356#p24356"><![CDATA[
Well I got X816 to work with DOSBox, so I got the playback code working. But now I am trying to display a sprite, I took some code from GBA Guy's tutorial (I got the code from Day 5 to assemble with NESASM), and tried to combine it with the playback code. Obviously, I don't know what the hell I am doing, but if anyone is bored and feels like steering me in the right direction, what I should work on understanding, go ahead and help me out, I would really appreciate it. Here's da code:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent"><br />; *** X816 SETTINGS ***<br />   .mem 8         ; 8-bit memory mode<br />   .index 8      ; 8-bit index mode<br />   .opt on         ; address optimize<br />   <br />   .org $8000      ; replace dashes with load address MINUS $80<br />   .incbin &quot;nomryi.nsf&quot;   ; include NSF tune <br />   .incbin &quot;our.bkg&quot;  ; empty background first<br /><br />   .incbin &quot;our.spr&quot;  ; our sprite pic data<br /><br />   <br />Reset_Routine:<br />   cld         ; clear decimal flag<br />   sei         ; disable interrupts<br />   lda #%00000000      ; disable vblank interrupts by clearing<br />   sta $2000      ; the most significant bit of $2000<br />   <br />      :****graphix!****<br />   <br />   Start:  <br /><br />   lda #%00001000  ; do the setup of PPU<br /><br />   sta $2000       ; that we<br /><br />   lda #%00011110  ; talked about<br /><br />   sta $2001       ; on a previous day<br />   <br /><br />   <br />   ;supermario clouds code<br /><br /><br />    lda #$3F ; NES background palette location<br />   sta $2006<br />   lda #$00<br />   sta $2006<br /><br />   lda #$21 ;background &#91;powder blue&#93;<br />   sta $2007<br />   lda #$30 ;cloud inside &#91;white&#93;<br />   sta $2007<br />   lda #$11 ; highlight &#91;blue&#93;<br />   sta $2007<br />   lda #$0d ;outline &#91;black&#93;<br />   sta $2007<br /><br />   <br />   ;end supermario clouds code<br /><br /><br /><br />waitblank:         ; this is the wait for VBlank code from above<br /><br />   lda $2002  ; load A with value at location $2002<br /><br />   bpl waitblank  ; if bit 7 is not set &#40;not VBlank&#41; keep checking<br /><br /><br /><br />   lda #$00   ; these lines tell $2003<br /><br />   sta $2003  ; to tell<br /><br />   lda #$00   ; $2004 to start<br /><br />   sta $2003  ; at $0000.<br /><br /><br /><br />   lda #100  ; load Y value<br /><br />   sta $2004 ; store Y value<br /><br />   lda #$00  ; tile number 0<br /><br />   sta $2004 ; store tile number<br /><br />   lda #$00 ; no special junk<br /><br />   sta $2004 ; store special junk<br /><br />   lda #100  ; load X value<br /><br />   sta $2004 ; store X value<br /><br />   ; and yes, it MUST go in that order.<br />   <br />   ;****end graphix code****<br /><br /><br />   <br />; *** WAIT 2 VBLANKS ***<br />WaitV1:   <br />   lda $2002      ; give the PPU a little time to initialize<br />   bpl WaitV1      ; by waiting for a vblank<br />WaitV2:   <br />   lda $2002      ; wait for a second vblank to be safe<br />   bpl WaitV2      ; and now the PPU should be initialized<br />   <br />; *** CLEAR SOUND REGISTERS ***<br />   lda #$00      ; clear all the sound registers by setting<br />   ldx #$00      ; everything to 0 in the Clear_Sound loop<br />Clear_Sound:<br />   sta $4000,x      ; store accumulator at $4000 offset by x<br />   inx         ; increment x<br />   cpx #$0F      ; compare x to $0F<br />   bne Clear_Sound      ; branch back to Clear_Sound if x != $0F<br /><br />   lda #$10      ; load accumulator with $10<br />   sta $4010      ; store accumulator in $4010<br />   lda #$00      ; load accumulator with 0<br />   sta $4011      ; clear these 3 registers that are <br />   sta $4012      ; associated with the delta modulation<br />   sta $4013      ; channel of the NES<br />   <br />; *** ENABLE SOUND CHANNELS ***<br />   lda #%00001111      ; enable all sound channels except<br />   sta $4015      ; the delta modulation channel<br />   <br />; *** RESET FRAME COUNTER AND CLOCK DIVIDER ***<br />   lda #$C0      ; synchronize the sound playback routine <br />   sta $4017      ; to the internal timing of the NES<br />   <br />; *** SET SONG # &amp; PAL/NTSC SETTING ***<br />   lda #$00      ; replace dashes with song number<br />   ldx #$00      ; replace with $00 for NTSC or $01 for PAL<br />   jsr $8000      ; replace dashes with init address<br />   <br />; *** ENABLE VBLANK NMI ***<br />   lda #%10000000      ; enable vblank interrupts by setting the <br />   sta $2000      ; most significant bit of $2000<br />   <br /><br /><br />Loop:<br />   jmp Loop      ; loop loop loop loop ...<br />   <br />NMI_Routine:<br />   lda $2002      ; read $2002 to reset the vblank flag<br />   lda #%00000000      ; clear the first PPU control register  <br />   sta $2000      ; writing 0 to it<br />   lda #%10000000      ; reenable vblank interrupts by setting<br />   sta $2000      ; the most significant bit of $2000<br />   jsr $8003      ; replace dashes with play address<br />   rti         ; return from interrupt routine<br />   <br />IRQ_Routine:<br />   rti         ; return from interrupt routine<br /><br />.pad $FFFA<br />   .dw   NMI_Routine   ; setup the NMI vector at $FFFA<br />   .dw   Reset_Routine   ; setup the Reset vector at $FFFC<br />   .dw   IRQ_Routine   ; setup the IRQ vector at $FFFE<br /><br />   <br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3338">mcfiredrill</a> — Mon May 21, 2007 9:18 pm</p><hr />
]]></content>
</entry>
</feed>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=12222" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2015-01-17T08:12:45-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=12222</id>
<entry>
<author><name><![CDATA[x0000]]></name></author>
<updated>2015-01-17T08:12:45-07:00</updated>
<published>2015-01-17T08:12:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139447#p139447</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139447#p139447"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139447#p139447"><![CDATA[
<div class="quotetitle">WedNESday wrote:</div><div class="quotecontent"><br />And what does that have to do with CLI latency?<br />Regardless, that would cause it to freeze on real both emulators + real hardware let alone 1 person's emulator.<br /></div><br />It is not freezing on a real hardware because ppu status is read just before NMI being invoked. Therefore you need a correct logic to handle interrupt triggering flags for NMI and IRQ, cli latency tests would help with that. NMI rising timing can also be an issue here, but it is harder to get it wrong I think.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5897">x0000</a> — Sat Jan 17, 2015 8:12 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2015-01-17T04:56:54-07:00</updated>
<published>2015-01-17T04:56:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139440#p139440</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139440#p139440"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139440#p139440"><![CDATA[
<div class="quotetitle">x0000 wrote:</div><div class="quotecontent"><br />Not sure about that. If I recall correctly there is a typical problem that Bomberman has an active VBlank waiting via reading ppu status with NMI enabled at the same time, and it is clearing VBlank flag in NMI routine. So it could lead to infinte wait for VBlank flag if it was not read before NMI had vectorised.<br /></div><br />And what does that have to do with CLI latency?<br /><br />Regardless, that would cause it to freeze on real both emulators + real hardware let alone 1 person's emulator.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Sat Jan 17, 2015 4:56 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[x0000]]></name></author>
<updated>2015-01-16T18:20:59-07:00</updated>
<published>2015-01-16T18:20:59-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139398#p139398</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139398#p139398"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139398#p139398"><![CDATA[
<div class="quotetitle">WedNESday wrote:</div><div class="quotecontent"><br />That has nothing to do with his problem.<br /></div><br />Not sure about that. If I recall correctly there is a typical problem that Bomberman has an active VBlank waiting via reading ppu status with NMI enabled at the same time, and it is clearing VBlank flag in NMI routine. So it could lead to infinte wait for VBlank flag if it was not read before NMI had vectorised.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5897">x0000</a> — Fri Jan 16, 2015 6:20 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2015-01-16T12:34:01-07:00</updated>
<published>2015-01-16T12:34:01-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139361#p139361</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139361#p139361"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139361#p139361"><![CDATA[
<div class="quotetitle">x0000 wrote:</div><div class="quotecontent"><br />Make sure you pass CLI latency tests<br /></div><br />That has nothing to do with his problem. Old versions of WedNESday ran Bomberman no problem and that was before I emulated CLI/SEI/PLP latency.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Fri Jan 16, 2015 12:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[x0000]]></name></author>
<updated>2015-01-16T08:48:04-07:00</updated>
<published>2015-01-16T08:48:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139344#p139344</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139344#p139344"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139344#p139344"><![CDATA[
Make sure you pass CLI latency tests<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5897">x0000</a> — Fri Jan 16, 2015 8:48 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[austere]]></name></author>
<updated>2015-01-11T11:46:35-07:00</updated>
<published>2015-01-11T11:46:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139085#p139085</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139085#p139085"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139085#p139085"><![CDATA[
<div class="quotetitle">WedNESday wrote:</div><div class="quotecontent"><br />Any chance that you could post the CPU source? When we have had the chance previously to directly view others we've been able to help out so much quicker.<br /></div><br /><br />Sure thing!<br /><br /><!-- m --><a class="postlink" href="https://bitbucket.org/austere/finalnes/src/cda4f12d810c58aa831f47b26687124738a74582/6502_fa/nes.cpp?at=master">https://bitbucket.org/austere/finalnes/ ... ?at=master</a><!-- m --><br /><br />That's the latest committed version. In that directory you'll also find nes.h and cpu6502_info.cpp which contains the table it uses to decode the instructions/get the base timing, but most of what you'll be interested in is under the Cpu:: section. When I wrote the core (mostly over weekend 4 years ago) I planned to use templates for the addressing modes, but at least this way it makes it easier to follow and debug. When it's stable, performance can be improved.<br /><br />... And don't mind the apu/ppu code, it's quite a mess at the moment. <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6825">austere</a> — Sun Jan 11, 2015 11:46 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2015-01-11T09:49:09-07:00</updated>
<published>2015-01-11T09:49:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139079#p139079</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139079#p139079"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139079#p139079"><![CDATA[
<div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><br />Fixing random things is not the best way to solve a problem like this. The best thing to do would be to compare execution logs against an emulator where the game works, so you know exactly when things go to shit.<br /></div><br />How is he fixing random things? Its obviously the CPU and he is going the correct way about it.<br /><br />Any chance that you could post the CPU source? When we have had the chance previously to directly view others we've been able to help out so much quicker.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Sun Jan 11, 2015 9:49 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2015-01-11T08:44:16-07:00</updated>
<published>2015-01-11T08:44:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139077#p139077</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139077#p139077"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139077#p139077"><![CDATA[
Fixing random things is not the best way to solve a problem like this. The best thing to do would be to compare execution logs against an emulator where the game works, so you know exactly when things go to shit.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Sun Jan 11, 2015 8:44 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[austere]]></name></author>
<updated>2015-01-11T06:07:09-07:00</updated>
<published>2015-01-11T06:07:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139074#p139074</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139074#p139074"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139074#p139074"><![CDATA[
The core passes kevtris's test and the more thorough one for all official opcodes.<br /><br />I just upgraded the core so that it accounted for the extra cycle because of the carry calculation for page crossing. That got it passing blargg's VBL test and sprite hit bottom test. Still no dice on bomberman, will investigate it further tomorrow.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6825">austere</a> — Sun Jan 11, 2015 6:07 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2015-01-11T05:26:58-07:00</updated>
<published>2015-01-11T05:26:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139073#p139073</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139073#p139073"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139073#p139073"><![CDATA[
austere how good is your CPU emulation in terms of opcode accuracy? Have you run nestest.nes? If so, what are the results?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Sun Jan 11, 2015 5:26 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[austere]]></name></author>
<updated>2015-01-12T10:34:18-07:00</updated>
<published>2015-01-10T23:34:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139061#p139061</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139061#p139061"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139061#p139061"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Perhaps austere thought it was like DOSBox, where games don't care exactly how many cycles they're given so long as it's roughly comparable to the MIPS of the actual CPU.<br /></div><br /><br />I know what you mean but no, I'm *not being ignorant of the timing model of the NES. I'm currently finishing a PhD in electronic engineering (microelectronics) so I do appreciate the importance of timing which is I was quite surprised it worked fine for the most part as my prior post shows:<br /><br /><div class="quotetitle">austere wrote:</div><div class="quotecontent"><br />I never really expected many games to run given that I didn't account for page crossing and branch adjustment cycles<br /></div><br /><br />The current version uses scanline emulation of the PPU so it wouldn't make too big a difference if it was sprite 0 collision detection at fault. More likely something to do with the vertical blanking.<br /><br />I'll improve instruction timing and report if it made any difference. If it didn't, it's probably something else Bomberman is expected that the other games are not... might be a really silly bug I'm missing.<br /><br />* Oops typo.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6825">austere</a> — Sat Jan 10, 2015 11:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2015-01-10T16:59:27-07:00</updated>
<published>2015-01-10T16:59:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139031#p139031</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139031#p139031"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139031#p139031"><![CDATA[
<div class="quotetitle">WedNESday wrote:</div><div class="quotecontent"><br />it annoys me so much that people come to this forum with problems like this before they have even implemented even the most basic of CPU accuracy and then ask us why game A or B doesn't work properly.<br /></div><br />Perhaps austere thought it was like DOSBox, where games don't care exactly how many cycles they're given so long as it's roughly comparable to the MIPS of the actual CPU.<br /><br /><div class="quotetitle">austere wrote:</div><div class="quotecontent"><br />I was actually surprised that most things I've thrown at it worked fairly well, even Shatterhand which has faux parallax scrolling.<br /></div><br />MMC3 games tend to handle parallax scrolling acceptably even with inaccurate cycle counts because the PIT (programmable interrupt timer) frees the engine from having to count cycles or spin on sprite 0.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Jan 10, 2015 4:59 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[WedNESday]]></name></author>
<updated>2015-01-10T10:29:39-07:00</updated>
<published>2015-01-10T10:29:39-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139013#p139013</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139013#p139013"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139013#p139013"><![CDATA[
<div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />The thing is that you have reached as experienced developer emu author and/or .rom author.<br /></div><br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />And no offense to you, but everybody was a begginer at first and needed help (like you) to work around a problem.<br /></div><br />Yep, they are correct.<br /><br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />I remember when you were a beginner and made question such as &quot;is there not a technical doc othat NES 2C02 reference??&quot; Making note that it was too difficult to you. (i don't wan't to search the link for your old post, but you remember it don't you?)<br /></div><br />Sorry, but you'll have to find the original post.<br /><br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />So, if you think the question or issue somebody expose here is too &quot;noob&quot; remember your old days when you had the Signature &quot;Wednesday,  the best emulator in the net.... well according to the author&quot; and don't reply the noob question if you think so.<br /></div><br />For crying out loud. The signature was a joke. And I think people knew that. More importantly, I never called anyone a 'noob'. In fact, if you scroll back up you'll see that I made couple of posts that actually helped the guy.<br /><br />I make a fair point that people need to be more descriptive about what they have and haven't implemented part A of the CPU of part D of the PPU. That way we can help diagnose the problem sooner.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=191">WedNESday</a> — Sat Jan 10, 2015 10:29 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[austere]]></name></author>
<updated>2015-01-10T10:18:29-07:00</updated>
<published>2015-01-10T10:18:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139010#p139010</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139010#p139010"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139010#p139010"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Emulators that can run a wide variety of commercial NES games need to have accurate cycle counts for all instructions. Games' raster effect loops can and do depend on extra cycles inserted due to page crossing.<br /></div><br /><br />I did assume so, I never really expected many games to run given that I didn't account for page crossing and branch adjustment cycles. I've made accommodations for adjustment in the code but haven't bothered changing the cycle count until I had everything else working. I was actually surprised that most things I've thrown at it worked fairly well, even Shatterhand which has faux parallax scrolling.<br /><br /><div class="quotetitle">WedNESday wrote:</div><div class="quotecontent"><br />No offense, but it annoys me so much that people come to this forum with problems like this before they have even implemented even the most basic of CPU accuracy and then ask us why game A or B doesn't work properly.<br /></div><br />No offense taken but &quot;most basic of CPU accuracy&quot; is kind of vague, like I said, I assumed best case (i.e didn't account for zero page crossing or branch miss). It's not like I set the cycle count to 4 for all instructions, I used the correct base values. Anyway, I'm sure someone else who has this problem with bomberman in the future will find this post and not ask the question again thanks to Anes and Zepper's hints towards correct behaviour. I mean that's the point of a forum after all, WedNESday. <img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=";)" title="Wink" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6825">austere</a> — Sat Jan 10, 2015 10:18 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2015-01-10T09:59:00-07:00</updated>
<published>2015-01-10T09:59:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139008#p139008</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139008#p139008"/>
<title type="html"><![CDATA[Re: Bomberman hangs on opening title]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12222&amp;p=139008#p139008"><![CDATA[
<div class="quotetitle">WedNESday wrote:</div><div class="quotecontent"><br />No offense, but it annoys me so much that people come to this forum with problems like this before they have even implemented even the most basic of CPU accuracy and then ask us why game A or B doesn't work properly.<br /></div><br /><br />The thing is that you have reached as experienced developer emu author and/or .rom author. <br />I remember when you were a beginner and made question such as &quot;is there not a technical doc othat NES 2C02 reference??&quot; Making note that it was too difficult to you. (i don't wan't to search the link for your old post, but you remember it don't you?)<br /><br />And no offense to you, but everybody was a begginer at first and needed help (like you) to work around a problem.<br />So, if you think the question or issue somebody expose here is too &quot;noob&quot; remember your old days when you had the Signature &quot;Wednesday,  the best emulator in the net.... well according to the author&quot; and don't reply the noob question if you think so.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Sat Jan 10, 2015 9:59 am</p><hr />
]]></content>
</entry>
</feed>
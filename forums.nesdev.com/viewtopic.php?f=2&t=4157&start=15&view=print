<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Sprites Expansion? - Smurfs ROM related</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Sprites Expansion? - Smurfs ROM related</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4157">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4157</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Fri Jun 13, 2008 5:29 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Fx3 wrote:</div><div class="quotecontent">- An "interesting" test ROM would be one small ball bouncing across the screen, and +1 when some key is pressed.</div><br />That, or my old "Obey Your Thirst" (64 sprite cans) demo.</div>
<br />
<br />Yeah, I know that demo, but I meant more than 64 sprites being displayed. Of course, the cache won't be bigger than 64, but the effect would be. It's the same idea of displaying 256 colors in a screen...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Fri Jun 13, 2008 6:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What about really cheap stuff, like "sprites" which are actually background tiles, and move jerkily?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>egfelixdcg</b> [ Fri Jun 13, 2008 11:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I remember this game: Mappy Kids, for the famicom. Is a game in which you have a split screen for two players, like in Sonic 2.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Fri Jun 13, 2008 5:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The thing is: I am using the SMB1 source, and I wanted to make (and still doing) a new Status bar engine using sprites, Removing the original Status Bar and it's engine. I am rewriting part of it at the least.
<br />
<br />But I do not know how to wait about a certain number of scanlines, So I need some help.
<br />
<br />In other words: What registers do I need to set and disable to get an 8 scanline setup?
<br />
<br />Also: How do I stop the Flickering after removing the code that is used for enabling ''Sprite Zero''?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Fri Jun 13, 2008 7:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Hamtaro126 wrote:</div><div class="quotecontent">In other words: What registers do I need to set and disable to get an 8 scanline setup?<br /></div><br /><br />You need to turn the PPU off.  This is disabling both BG and Sprite rendering via $2001 (usually accomplished by just writing $00 to $2001).<br /><br />Once the PPU is off, you can perform the sprite DMA (writing to $4014).  Once that is complete you can turn the PPU back on by restoring $2001 to its original value.<br /><br />It's worth noting that turning on the PPU mid frame like this will bork the scroll.  So before you turn it on you'll probably want to write to the scroll regs:  $2005 twice, and possibly $2000.  But since this will probably muck up the fine V scroll you'll have to get really crafty with alternating $2005/$2006 writes which I don't feel like explaining because in all honestly I think an explanation would be somewhat wasted on you.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also: How do I stop the Flickering after removing the code that is used for enabling ''Sprite Zero''?</div>
<br />
<br />Depends what's causing it.  Did you just remove the wait loop?  I don't see how that'd cause flickering.. it'd just cause the screen to be split early (tearing the status bar so that some of it scrolls and some of it doesn't -- but I guess since the exactly scanline on which the tear happens changes it could look like flicker....)
<br />
<br />To fix that -- simply wait until the desired scanline before the split (this waiting is exactly what Sprite-0 hit was for).  An alternative way to wait is to have an IRQ fire on the desired scanline.
<br />
<br />But if you're replacing the status bar with sprites, then you don't need to split the BG at all and can just set the normal scroll values right away instead of waiting for the split.
<br />
<br />but I don't see how an all sprite status bar would work... since you only have 8 sprites per scanline -- you'd either have mad flicker, or a really small status bar, or most of the status bar just not being visible)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Fri Jun 13, 2008 7:36 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You could have information vertically displayed, and use 8x16 sprites for that. That's what I do in my game for the large vertical health bar. I suppose it would be a little difficult for SMB, and the information should be displayed horizontally. You COULD reduce the size of each word above each number to take up only a few tiles rather than one for each letter.
<br />
<br />You could also stack the information instead of having it laid out horizontally all the way across, and you could shrink the size of the letters and numbers so overall it wouldn't be a really tall status bar.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 14, 2008 7:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Disch wrote:</div><div class="quotecontent">but I don't see how an all sprite status bar would work... since you only have 8 sprites per scanline -- you'd either have mad flicker, or a really small status bar, or most of the status bar just not being visible)</div>
<br />Mega Man. Super Mario Bros. 2. Ikari Warriors. Contra.
<br />
<br />But you could still shrink the status bar to one row of tiles as was done in SMB1 for Game Boy Color. Compare the top screenshot of stock SMB1 to the bottom screenshot that has been shopped to have an 8-pixel status bar:
<br /><img src="http://pics.pineight.com/nes/smb1_smaller_hud.png" alt="Image" />
<br />
<br />In SMB1, the only things you really need to see during gameplay are the coins and time. Those can be shown with 7 sprites, in much the same way Ikari Warriors does it:
<br /><img src="http://pics.pineight.com/nes/smb1_ikari_hud.png" alt="Image" />
<br />But this means you'll have to go away from NROM so that you can have room in the sprite side of the pattern table for the digits and clock icon. And they might make Lakitu flicker.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Sat Jun 14, 2008 10:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Heh... okay I get it now.  For some reason I didn't think of that style as a "status bar".  I thought he was going to try and recreate the status bar in full with sprites for whatever reason.
<br />
<br />But yeah -- if minimalized like that it could totally work.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Jun 14, 2008 11:00 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But this means you'll have to go away from NROM so that you can have room in the sprite side of the pattern table for the digits and clock icon. And they might make Lakitu flicker.</div>
<br />What about changing $2000.3 midframe so that the "sprite side of the pattern table" changes ?
<br />
<br />Also, "MARIO" and "LUIGI" are both 5 letters, and the scrore is 7 digits : All of them can be put on the status bar. You could even place "MARIO" on the same line as the coin counter if you get rid of the "x" symbol.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jun 14, 2008 11:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But this means you'll have to go away from NROM so that you can have room in the sprite side of the pattern table for the digits and clock icon.</div><br />What about changing $2000.3 midframe so that the "sprite side of the pattern table" changes ?</div><br />SMB1 pulls sprite tiles from $0000-$0FFF and background tiles from $1000-$1FFF. If you switch sprites to $1000-$1FFF until the raster passes the lines containing the status bar, then <em>every</em> player or enemy sprite on the same scanline as the status window becomes corrupt. (Good-bye Lakitu.) And you'd still need to use sprite 0 to find when to perform this change, so it still wouldn't be much of an improvement over the existing status bar.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also, "MARIO" and "LUIGI" are both 5 letters, and the scrore is 7 digits : All of them can be put on the status bar. You could even place "MARIO" on the same line as the coin counter if you get rid of the "x" symbol.</div>
<br />But then you're back to the first post of the topic: you start running out of the 64 sprites. In addition, too many indicators clutter up the play area. There's a reason that Donkey Kong Country games keep indicators out of the way when they aren't changing.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sat Jun 14, 2008 1:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But this means you'll have to go away from NROM so that you can have room in the sprite side of the pattern table for the digits and clock icon.</div><br />What about changing $2000.3 midframe so that the "sprite side of the pattern table" changes ?</div><br />SMB1 pulls sprite tiles from $0000-$0FFF and background tiles from $1000-$1FFF. If you switch sprites to $1000-$1FFF until the raster passes the lines containing the status bar, then <em>every</em> player or enemy sprite on the same scanline as the status window becomes corrupt. (Good-bye Lakitu.) And you'd still need to use sprite 0 to find when to perform this change, so it still wouldn't be much of an improvement over the existing status bar.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also, "MARIO" and "LUIGI" are both 5 letters, and the scrore is 7 digits : All of them can be put on the status bar. You could even place "MARIO" on the same line as the coin counter if you get rid of the "x" symbol.</div><br />But then you're back to the first post of the topic: you start running out of the 64 sprites. In addition, too many indicators clutter up the play area. There's a reason that Donkey Kong Country games keep indicators out of the way when they aren't changing.</div>
<br />
<br />I can use 8x16. I am currently doing that. Also using it to use less sprites
<br />
<br />Here is a (Mental) Schematic for the new Status Bar:
<br />
<br />Mario's Status Bar:
<br />
<br /><span style="color: red">MARIO </span><span style="color: white">x03</span>      <span style="color: yellow">@</span><span style="color: white">x00     TIME: 000</span>
<br />
<br />Luigi's Status Bar:
<br />
<br /><span style="color: green">LUIGI </span><span style="color: white">x03</span>      <span style="color: yellow">@</span><span style="color: white">x00     TIME: 000</span>
<br />
<br />It may change, just so you know

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
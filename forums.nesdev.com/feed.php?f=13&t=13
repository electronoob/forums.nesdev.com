<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=13&amp;t=13" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2006-01-30T14:38:23-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=13&amp;t=13</id>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2006-01-30T14:38:23-07:00</updated>
<published>2006-01-30T14:38:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=8818#p8818</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=8818#p8818"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=8818#p8818"><![CDATA[
<div class="quotetitle">Quietust wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Quietust wrote:</div><div class="quotecontent">You may remove the "post-has-been-edited" message suppression at your own convenience.<br /></div><br /><br />Just reiterating, since you don't appear to have changed this back yet.</div><br /><br />I never changed it in the first place, which is why I was amazed your changes to all of the posts worked.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Mon Jan 30, 2006 2:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2006-01-30T14:18:58-07:00</updated>
<published>2006-01-30T14:18:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=8817#p8817</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=8817#p8817"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=8817#p8817"><![CDATA[
<div class="quotetitle">Quietust wrote:</div><div class="quotecontent"><br />You may remove the "post-has-been-edited" message suppression at your own convenience.<br /></div><br /><br />Just reiterating, since you don't appear to have changed this back yet.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Mon Jan 30, 2006 2:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-12-28T19:27:44-07:00</updated>
<published>2005-12-28T19:27:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7803#p7803</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7803#p7803"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7803#p7803"><![CDATA[
All of the posts in FCdev have been fixed (along with the one in NESemdev) - the only remaining 'broken' topic is the Russian one in the General Discussion forum (which I forgot to grab a copy of beforehand), though that may have just been a spam topic all along (considering the latest reply linked to a Russian forum post full of pictures of sex toys).<br /><br />You may remove the "post-has-been-edited" message suppression (and restore me to a standard user) at your own convenience - I'm done here.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Wed Dec 28, 2005 7:27 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2005-12-28T19:18:42-07:00</updated>
<published>2005-12-28T19:18:42-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7802#p7802</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7802#p7802"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7802#p7802"><![CDATA[
<div class="quotetitle">Quietust wrote:</div><div class="quotecontent"><br />That'll probably work better - since you said you don't have Japanese fonts installed, you might not be able to tell if they were fixed properly.<br /></div><br /><br />Done.<br /><br />I'll corollate with you on IRC (Freenode) in regards to the post editing stuff and the like.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed Dec 28, 2005 7:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-12-28T19:17:42-07:00</updated>
<published>2005-12-28T19:17:42-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7801#p7801</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7801#p7801"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7801#p7801"><![CDATA[
The biggest oxy-moron in the phpBB Language Pack system is that while each language specifies a <strong>different</strong> character set, the forum allows <strong>multiple</strong> language packs to be installed at once, which results in horrible conflicts when messages get posted.<br /><br />The obvious solutions would be to either restrict the forum to only allow one language pack at once (which is rather stupid) OR force them all to use the same character set (i.e. Unicode, preferably UTF-8). The phpBB Team is aware of this problem, and it looks like they <em>might</em> fix it in the next major release, but I'm not holding my breath.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Wed Dec 28, 2005 7:17 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2005-12-28T19:13:33-07:00</updated>
<published>2005-12-28T19:13:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7800#p7800</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7800#p7800"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7800#p7800"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />Though there isn't really much of a reason for "packages" for languages in which text is written, there is still a reason for "packages" for languages in which to display the interface (e.g. "Post a reply").<br /></div><br /><br />True.  I didn't think about that.<br /><br />Though, admittedly, maintaining a multi-language interface is something everyone's already done (by this I mean the code/framework + all the necessary files are there).  The problem is that all of the data is written in a non-Unicode character set, so it wouldn't end up displaying right under utf8 anyways.<br /><br />Apache has modules for handling stuff like this: mod_negotiation (and the Multiviews directive).  Based on browser preferences and some HTTP headers, you can determine what language someone prefers.  Compare this to, say, a forum which has a dropdown for what "language" they want the interface in.<br /><br />Not everyone uses Apache, but this would provide what people want for the most part.<br /><br />mod_negotiation: <a href="http://httpd.apache.org/docs/2.0/mod/mod_negotiation.html" class="postlink">http://httpd.apache.org/docs/2.0/mod/mod_negotiation.html</a><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed Dec 28, 2005 7:13 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-12-28T19:12:21-07:00</updated>
<published>2005-12-28T19:12:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7799#p7799</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7799#p7799"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7799#p7799"><![CDATA[
<div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br />I should add you as a forum moderator and let you take care of it<br /></div><br /><br />That'll probably work better - since you said you don't have Japanese fonts installed, you might not be able to tell if they were fixed properly.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Wed Dec 28, 2005 7:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2005-12-28T19:09:00-07:00</updated>
<published>2005-12-28T19:09:00-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7798#p7798</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7798#p7798"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7798#p7798"><![CDATA[
<div class="quotetitle">Quietust wrote:</div><div class="quotecontent"><br />I've grabbed the text for all of the Japanese posts in the FCdev forum (as well as one in nesemdev), so you can re-add the SET NAMES if you so desire.<br /></div><br /><br />Re-enabled.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Fixing the posts may be a bit troublesome, though, since they'll have to be done manually; fortunately, there are only a dozen topics that need to be fixed. Temporarily commenting out the "$edited_sql = ..." line in functions_post.php (should be line 267) will allow the posts to be edited (by a forum moderator) without inserting/updating the "Last edited [date], [N] edits total" at the bottom of each post.<br /></div><br /><br />Makes sense.  I should add you as a forum moderator and let you take care of it (otherwise I can get to it later tonight); let me know.  :-)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed Dec 28, 2005 7:09 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-12-28T19:02:22-07:00</updated>
<published>2005-12-28T19:02:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7795#p7795</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7795#p7795"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7795#p7795"><![CDATA[
I've grabbed the text for all of the Japanese posts in the FCdev forum (as well as one in nesemdev), so you can re-add the SET NAMES if you so desire. <br /><br />Fixing the posts may be a bit troublesome, though, since they'll have to be done manually; fortunately, there are only a dozen topics that need to be fixed. Temporarily commenting out the "$edited_sql = ..." line in functions_post.php (should be line 267) will allow the posts to be edited (by a forum moderator) without inserting/updating the "Last edited [date], [N] edits total" at the bottom of each post.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Wed Dec 28, 2005 7:02 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2005-12-28T19:01:07-07:00</updated>
<published>2005-12-28T19:01:07-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7793#p7793</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7793#p7793"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7793#p7793"><![CDATA[
<div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br />My personal view is that people (i.e. forum software authors) need to stop mucking around with "support for multiple languages" (by having absurd "packages" for different languages/character sets, etc.).  They need to just use utf8 and solve the problem in one swoop.<br /></div><br />Though there isn't really much of a reason for "packages" for languages in which text is written, there is still a reason for "packages" for languages in which to display the interface (e.g. "Post a reply").<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Dec 28, 2005 7:01 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2005-12-28T18:45:21-07:00</updated>
<published>2005-12-28T18:45:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7790#p7790</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7790#p7790"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7790#p7790"><![CDATA[
Ugh, and now I've just read we'll (possibly) be going through even more pain when I get around to upgrading to MySQL 5.0...<br /><br /><a href="http://dev.mysql.com/doc/refman/4.1/en/charset-upgrading.html" class="postlink">http://dev.mysql.com/doc/refman/4.1/en/charset-upgrading.html</a><br /><br />But there's hope in some way.  In regards to my idea of converting the presently-existing posts from the older format to what presently is correct/works, this might help:<br /><br /><a href="http://dev.mysql.com/doc/refman/4.1/en/charset-conversion.html" class="postlink">http://dev.mysql.com/doc/refman/4.1/en/charset-conversion.html</a><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed Dec 28, 2005 6:45 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2005-12-28T18:39:25-07:00</updated>
<published>2005-12-28T18:39:25-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7789#p7789</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7789#p7789"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7789#p7789"><![CDATA[
I've gone ahead and reverted the SET NAMES addition, but kept SET CHARACTER_SET.<br /><br />The posts on the FCdev forum look correct to me.  I don't have Japanese installed so someone will have to check to be sure<br /><br />I can see the encoding difference between SET NAMES vs. without SET NAMES, and without SET NAMES the characters look to be the same as they were when we lacked SET CHARACTER_SET.<br /><br />Might want to make some test posts in the Test forum to be 100% sure.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed Dec 28, 2005 6:39 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2005-12-28T18:33:39-07:00</updated>
<published>2005-12-28T18:33:39-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7788#p7788</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7788#p7788"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7788#p7788"><![CDATA[
<div class="quotetitle">Quietust wrote:</div><div class="quotecontent"><br />Unfortunately, this has wiped out nearly every single post in the (now reasonably active) FCDev forum. Do you think you could turn this off temporarily so the existing posts can be saved, and then turn it back on so the posts can be fixed?<br /></div><br /><br />Sure thing, I'll revert the SET NAMES entry in a moment.<br /><br />I wish I knew of a way to "convert" the existing data into what would work with SET NAMES, you know what I'm saying?  That way I could convert all of the older posts to what presently works, without breaking things.  Sadly I don't know of a way to do that.  Maybe ALTER can do it, but I'm still not sure how to accomplish that.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Personally, I think it's best to just leave the database with <em>no encoding</em> at all - just let it store the data as if it were binary. Let the software running on the site (phpBB, the wiki, etc.) and the users (namely, their browsers) decide how to interpret it.<br /></div><br /><br />It doesn't seem to work that way.  There's a lot of pieces to the puzzle:<br /><br />* Database character encoding<br />* Table character encoding<br />* Column character encoding (not used in this case though)<br />* Client-server character encoding<br />* Coallation for all of the above (i.e. utf8 converted to latin1, etc.)<br />* Browser character encoding<br />* The character encoding type specified in the HTTP header<br /><br />What a mess.<br /><br />At this point, anything that relies on MySQL requires that you set the character encoding.  All of this was introduced in 4.0, and now that 5.0 is the official stable release, I expect to see it even more prominently used.<br /><br />My personal view is that people (i.e. forum software authors) need to stop mucking around with "support for multiple languages" (by having absurd "packages" for different languages/character sets, etc.).  They need to just use utf8 and solve the problem in one swoop.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed Dec 28, 2005 6:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Quietust]]></name></author>
<updated>2005-12-28T18:24:57-07:00</updated>
<published>2005-12-28T18:24:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7787#p7787</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7787#p7787"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7787#p7787"><![CDATA[
Unfortunately, this has wiped out nearly every single post in the (now reasonably active) FCDev forum. Do you think you could turn this off temporarily so the existing posts can be saved, and then turn it back on so the posts can be fixed?<br /><br /><br />Personally, I think it's best to just leave the database with <em>no encoding</em> at all - just let it store the data as if it were binary. Let the software running on the site (phpBB, the wiki, etc.) and the users (namely, their browsers) decide how to interpret it.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=7">Quietust</a> — Wed Dec 28, 2005 6:24 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2005-12-28T18:19:34-07:00</updated>
<published>2005-12-28T18:19:34-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7784#p7784</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7784#p7784"/>
<title type="html"><![CDATA[Charset conflicts]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=13&amp;p=7784#p7784"><![CDATA[
Okay, so here's the diff (in the case that we go through this again in the future):<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">--- mysql4.php__not_utf8_do_not_use     Wed Nov 16 18:56:13 2005<br />+++ mysql4.php  Wed Dec 28 17:14:47 2005<br />@@ -61,6 +61,13 @@<br />                                &#125;<br />                        &#125;<br /><br />+                       /**<br />+                        * Custom hack for utf8 support; we need to tell the MySQL server, before<br />+                        * any data is sent/received, to do everything using utf8.<br />+                        */<br />+                       @mysql_query&#40;&quot;SET NAMES 'utf8'&quot;&#41;;<br />+                       @mysql_query&#40;&quot;SET CHARACTER_SET utf8&quot;&#41;;<br />+<br />                        return $this-&gt;db_connect_id;<br />                &#125;<br />                else<br /></div><br /><br />This has one major drawback in regards to the board right now though:<br /><br />Many posts between November and now were done using UTF-8 here on the forums, but were essentially submit into the MySQL database using latin1.<br /><br />The above change (made today) should fix this and revert things to how they should have been, but definitely breaks non-Latin character posts over the past 2 months.<br /><br />If I remove the SET NAMES clause, the posts between November and present appear to work correctly.  Sounds great, I know, but the problem is that if I remove that clause the client&lt;-&gt;server model communicates everything in latin1 (even though the actual encoding type of the content is utf8).  I believe there's translation that goes on (i.e. utf8 characters being coallated into latin1 for the MySQL connection then being coallated back into utf8 when the actual data is stored into the database).<br /><br />SET NAMES 'utf8' basically does this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">mysql&gt; SET character_set_client = utf8;<br />mysql&gt; SET character_set_results = utf8;<br />mysql&gt; SET character_set_connection = utf8;</div><br /><br />I'll leave this one up to Quietust to decide.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Wed Dec 28, 2005 6:19 pm</p><hr />
]]></content>
</entry>
</feed>
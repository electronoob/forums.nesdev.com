<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=6939" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2010-09-10T04:07:53-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=6939</id>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2010-09-10T04:07:53-07:00</updated>
<published>2010-09-10T04:07:53-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67428#p67428</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67428#p67428"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67428#p67428"><![CDATA[
Nestopia uses linear interpolation, so the more samples, the merrier.  But if you can do a good lowpass to remove what humans can't hear (like what Blargg's library does), that could be saved at any sampling rate above 44100 with no loss.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Fri Sep 10, 2010 4:07 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[ReaperSMS]]></name></author>
<updated>2010-09-10T00:47:50-07:00</updated>
<published>2010-09-10T00:47:50-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67423#p67423</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67423#p67423"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67423#p67423"><![CDATA[
Using a 96KHz sample rate isn't about getting more audible data in (you can't hear anything past 20KHz or so, 22KHz if you're a freak of nature) it's about getting more headroom for filtering.<br /><br />If the sampler is running at 96KHz, the transition band for the lowpass filter on the input gets to range from 20KHz to about 76KHz. Sampling at 44KHz means your transition band only goes from 20KHz to 24KHz.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=8">ReaperSMS</a> — Fri Sep 10, 2010 12:47 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-09-09T23:34:44-07:00</updated>
<published>2010-09-09T23:34:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67420#p67420</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67420#p67420"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67420#p67420"><![CDATA[
If your goal is settings that produce meaningful results, then put them to the test. See whether you can hear a difference between the two. If they're close, you might need a way to do a blind test, otherwise your knowledge of which rate is selected might affect your perception of quality. If you hear no difference, then you don't need to spend any time bothering with the rate.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Thu Sep 09, 2010 11:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[The End]]></name></author>
<updated>2010-09-09T17:37:18-07:00</updated>
<published>2010-09-09T17:37:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67414#p67414</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67414#p67414"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67414#p67414"><![CDATA[
<div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><br />most (if not all ?) soundcards use this as the output sample rate anyway, and trying anything else will be down-sampled. I might be wrong though.<br /></div><br /><br />X-Fi (real) sample rate is 96khz, and it's been around for several years now.<br /><br />Thanks for the feedback guys, I was a dolt for choosing 8-bit sound. Right now I'm waffling between 48khz and 96khz...I'm just not sure....damn I'm anal when it comes to emulation.....<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4557">The End</a> — Thu Sep 09, 2010 5:37 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-09-05T19:15:47-07:00</updated>
<published>2010-09-05T19:15:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67278#p67278</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67278#p67278"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67278#p67278"><![CDATA[
What you're doing appears to be equivalent to a low-pass box filter.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Sep 05, 2010 7:15 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[cpow]]></name></author>
<updated>2010-09-05T17:32:03-07:00</updated>
<published>2010-09-05T17:32:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67270#p67270</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67270#p67270"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67270#p67270"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />Nestopia uses linear interpolation.<br /></div><br />This statement confuses me.  Linear interpolation?  Maybe I'm just having a math-idiot moment, but...linear interpolation between what and what?<br /><br />If the APU in question is cycle-accurate, you will generate 1,789,772 DAC samples for each of the five channels per second.  Linear interpolation implies finding the value between, say, DAC sample 983,345 and 983,346...a meaningless value unless you want to *up*sample?<br /><br />To generate an output audio sample, the method I use I guess I would call downsample-averaging [just plain downsampling?].  I create 16 DAC bins for each of the four 4-bit DAC channels and 128 DAC bins for the DMC.  There are approximately 40.58... DAC samples per required output audio sample.  Each time the emulated APU runs a cycle [and thus generates a DAC sample] I increment the DAC sampling bin corresponding to the DAC value and channel.  When it comes time to generate the appropriate channel DAC values for generating an output audio sample, I do:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">avg = 0; tot = 0; dac = 0;<br />for &#40; i = 0; i &lt; 16 or 128; i++ &#41;<br />&#123; avg += dacbins&#91;i&#93;*i; tot += dacbins&#91;i&#93;; &#125;<br />dac = avg/tot;<br /></div><br /><br />for each channel.  Then I clear the bins.<br /><br />Am I being too picky or are there other interpretations of lerp?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3705">cpow</a> — Sun Sep 05, 2010 5:32 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2010-09-05T12:04:54-07:00</updated>
<published>2010-09-05T12:04:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67266#p67266</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67266#p67266"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67266#p67266"><![CDATA[
Haha, this remembers that back when I was a total noob, I trought it was better to put the output to "8-bit" because the NES was a 8-bit system. That was ridiculous at best.<br /><br />I don't think the ear can do much difference above 48 kHz in fact most (if not all ?) soundcards use this as the output sample rate anyway, and trying anything else will be down-sampled. I might be wrong though.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Sep 05, 2010 12:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2010-09-05T11:13:08-07:00</updated>
<published>2010-09-05T11:13:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67263#p67263</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67263#p67263"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67263#p67263"><![CDATA[
Nestopia uses linear interpolation.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Sun Sep 05, 2010 11:13 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2010-09-05T10:59:13-07:00</updated>
<published>2010-09-05T10:59:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67262#p67262</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67262#p67262"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67262#p67262"><![CDATA[
We must also pretend that the output rate even matters (as long as it's 44 kHz or higher), if one is using an emulator with a decent resampler. I don't know what Nestopia uses though. One thing's for sure, you don't want to set your sound card to 8-bit output.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Sun Sep 05, 2010 10:59 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2010-09-05T10:48:33-07:00</updated>
<published>2010-09-05T10:48:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67261#p67261</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67261#p67261"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67261#p67261"><![CDATA[
The exact sample rate of the NES audio DAC itself is 39375000/22 Hz = 1.7898 MHz. It goes through an analog band-pass filter to reject DC and ultrasonic frequencies, and the emulator has to simulate this filter. I doubt that even an X-Fi can bit-match 1.7898 MHz. So let's pretend an emulator uses blargg's <a href="http://code.google.com/p/blip-buf/" class="postlink">band-limited downsampler</a> to downsample the APU output by a factor of exactly 32 to 1. Then the output becomes 55930.4 Hz.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Sep 05, 2010 10:48 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[The End]]></name></author>
<updated>2010-09-05T10:16:03-07:00</updated>
<published>2010-09-05T10:16:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67259#p67259</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67259#p67259"/>
<title type="html"><![CDATA[Emulator settings for most accurate sound emulation?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=6939&amp;p=67259#p67259"><![CDATA[
Pardon my n00bishness...<br />I've searched google, emulator forums, read through tech docs and NESSOUND.txt, etc...but I'm still not 100% sure on this. You guys are ultimately THE council of wisemen when it comes to this stuff, so I figured that if anyone would have the answer it would be you.<br /><br />I'm trying to get as accurate sound as possible out of Nestopia, and I'm using an X-Fi sound card with "bit-matched playback". This playback mode supposedly matches the sample rate of the source without any upsampling or sketchy conversion; the idea is to output the most accurate sound. Unfortunately, I don't know what the sample rate or bit depth should be set to in the emulator in the first place.<br /><br />Like I said, I'm using Nestopia, and Nestopia's archived forums don't offer much in the way of a definitive answer on this AFAIK.<br /><br />The X-Fi's max sample rate is 96000 hz, 16-24 bit (would 8-bit sound simply be converted to 16 bit anyway?).<br /><br />Nestopia's default is 44100 and 16 bit, but considering my hardware is this really the most accurate solution? I've been trying 96000 and 8-bit, but I'm not sure it's the way to go... So what should the settings be for the most "accurate" emulation?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4557">The End</a> — Sun Sep 05, 2010 10:16 am</p><hr />
]]></content>
</entry>
</feed>
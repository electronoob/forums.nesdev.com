<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - can write nametable hard coded to $2007, but looping=problem</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Newbie Help Center" href="http://forums.nesdev.com/feed.php?f=10" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - can write nametable hard coded to $2007, but looping=problem" href="http://forums.nesdev.com/feed.php?f=10&amp;t=4807" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=register"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Thu Aug 30, 2012 5:17 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=10&amp;t=4807">can write nametable hard coded to $2007, but looping=problem</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=4807"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 10 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=10&amp;t=4807&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=10&amp;t=4807&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=10&amp;t=4807&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p42599"></a>
				<b class="postauthor">GradualGames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42599">can write nametable hard coded to $2007, but looping=problem</a></div><div style="float: right;"><a href="./viewtopic.php?p=42599#p42599"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jan 31, 2009 7:02 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3735.jpg" width="100" height="94" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Nov 09, 2008 9:18 pm<br /><b>Posts:</b> 424
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">For some reason I'm finding it a real struggle to write 1024 bytes to the PPU from my nametable data. I've verified that I indeed have 960 bytes of nametable tiles followed by 64 bytes of attributes. But for some reason they just won't load properly. Manually writing tile numbers to the PPU, with repeated writes to $2007, seems to work fine, on the other hand.
<br />
<br />I must be doing something wrong somewhere else in my code as well though, because Nestopia appears to be unable to load the background palette. Jnes loads it, FCEUXD loads it, but Nestopia does not. Thus, something bad must be happening somewhere in the bowels of my code.
<br />
<br />Anyone want to check out my code?
<br />
<br />BTW, My P65 version of this code works perfectly. I've attempted to translate it to NESASM, this is when I ran into these problems.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3735"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p42602"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42602"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42602#p42602"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jan 31, 2009 7:12 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 5251<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Are you doing those writes with rendering disabled or during VBlank? Data can only be written to the PPU during those times. You can post the code here, if it's not ridiculously large. If it is, omit what you think is irrelevant (although the problem could very well be in those parts, but let's just see what happens).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p42603"></a>
				<b class="postauthor">GradualGames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42603"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42603#p42603"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jan 31, 2009 7:18 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3735.jpg" width="100" height="94" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Nov 09, 2008 9:18 pm<br /><b>Posts:</b> 424
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I'm one step ahead of you. I've omitted everything that initialized sprites or input routines---all I'm doing is loading the background here.
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; .inesprg&nbsp; &nbsp; 1<br />&nbsp; &nbsp; &nbsp; &nbsp; .ineschr&nbsp; &nbsp; 1<br />&nbsp; &nbsp; &nbsp; &nbsp; .inesmir&nbsp; &nbsp; 1<br />&nbsp; &nbsp; &nbsp; &nbsp; .inesmap&nbsp; &nbsp; 0<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; .bank 0<br />&nbsp; &nbsp; &nbsp; &nbsp; .org $0000<br />buttonA:&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; .db 0<br />lobyte:<br />&nbsp; &nbsp; &nbsp; &nbsp; .db 0<br />hibyte:<br />&nbsp; &nbsp; &nbsp; &nbsp; .db 0<br />sprite:<br /><br />; Actual program code.&nbsp; We only have one PRG-ROM chip here, so the<br />; origin is $C000.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.org $C000<br /><br />reset:&nbsp; sei<br />&nbsp; &nbsp;cld<br />&nbsp; &nbsp;; Wait two VBLANKs.<br />wb1:&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;bpl wb1<br />wb2:&nbsp; &nbsp;lda $2002<br />&nbsp; &nbsp;bpl wb2<br /><br />&nbsp; &nbsp;; Clear out RAM.<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #$00<br />&nbsp; &nbsp; &nbsp; &nbsp; ldx #$00<br />clear:&nbsp; sta $000,x<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $100,x<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $200,x<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $300,x<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $400,x<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $500,x<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $600,x<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $700,x<br />&nbsp; &nbsp; &nbsp; &nbsp; inx<br />&nbsp; &nbsp; &nbsp; &nbsp; bne clear<br /><br />&nbsp; &nbsp;; Reset the stack pointer.<br />&nbsp; &nbsp; &nbsp; &nbsp; ldx #$FF<br />&nbsp; &nbsp; &nbsp; &nbsp; txs<br /><br />&nbsp; &nbsp;; Disable all graphics.<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #$00<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2000<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2001<br /><br /><br />&nbsp; &nbsp;jsr initgraphics<br /><br />&nbsp; &nbsp;; Set basic PPU registers.&nbsp; Load background from $0000,<br />&nbsp; &nbsp;; sprites from $1000, and the name table from $2000.<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #%10001000<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2000<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #%00011110<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2001<br /><br />&nbsp; &nbsp;cli<br /><br />&nbsp; &nbsp;; Transfer control to the VBLANK routines.<br />loop:&nbsp; &nbsp;jmp loop<br /><br />initgraphics:<br />&nbsp; &nbsp; &nbsp; &nbsp; jsr loadpalette<br />&nbsp; &nbsp; &nbsp; &nbsp; jsr loadnametables<br />&nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br /><br />; Load palette into $3F00<br />loadpalette:<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #$3F<br />&nbsp; &nbsp; &nbsp; &nbsp; ldx #$00<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2006<br />&nbsp; &nbsp; &nbsp; &nbsp; stx $2006<br />ldpal:&nbsp; lda palette,x<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2007<br />&nbsp; &nbsp; &nbsp; &nbsp; inx<br />&nbsp; &nbsp; &nbsp; &nbsp; cpx #$20<br />&nbsp; &nbsp; &nbsp; &nbsp; bne ldpal<br />&nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br />loadnametables:<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #low&#40;bg&#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; sta lobyte<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #high&#40;bg&#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; sta hibyte<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #$20<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2006<br />&nbsp; &nbsp; &nbsp; &nbsp; lda #$00<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2006<br />&nbsp; &nbsp; &nbsp; &nbsp; ldy #$00<br />&nbsp; &nbsp; &nbsp; &nbsp; ldx #$01<br />ldnam:&nbsp; lda &#91;lobyte&#93;,y<br />&nbsp; &nbsp; &nbsp; &nbsp; sta $2007<br />&nbsp; &nbsp; &nbsp; &nbsp; iny<br />&nbsp; &nbsp; &nbsp; &nbsp; bne ldnam<br />&nbsp; &nbsp; &nbsp; &nbsp; inc hibyte<br />&nbsp; &nbsp; &nbsp; &nbsp; dex<br />&nbsp; &nbsp; &nbsp; &nbsp; bne ldnam<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; rts<br /><br />vblank:<br />irq:&nbsp; &nbsp; rti<br /><br />; palette data<br />palette:<br /><br />;Image Palette<br />&nbsp; &nbsp; &nbsp; &nbsp;.db $21,$1a,$2a,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br /><br />;Sprite Palette<br />&nbsp; &nbsp; &nbsp; &nbsp;.db $21,$3f,$27,$2a,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br /><br />; Background data<br /><br />;Name Table<br /><br />bg:<br />;Name Table<br />&nbsp; &nbsp; &nbsp; .db $01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02,$01,$02<br />&nbsp; &nbsp; &nbsp; .db $03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04,$03,$04<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br /><br /><br /><br />;Attribute Table<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; .bank 1<br />&nbsp; &nbsp; &nbsp; &nbsp; .org $FFFA<br />&nbsp; &nbsp; &nbsp; &nbsp; .dw vblank<br />&nbsp; &nbsp; &nbsp; &nbsp; .dw reset<br />&nbsp; &nbsp; &nbsp; &nbsp; .dw irq<br /><br />&nbsp; &nbsp; &nbsp; .bank 2<br />&nbsp; &nbsp; &nbsp; .org $0000<br /><br />;Pattern Table<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $ff,$99,$b3,$e6,$cc,$99,$b3,$e6,$00,$66,$4c,$19,$33,$66,$4c,$19<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $ff,$99,$33,$67,$cd,$99,$33,$67,$00,$66,$cc,$98,$32,$66,$cc,$98<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $cc,$99,$b3,$e6,$cc,$99,$b3,$ff,$33,$66,$4c,$19,$33,$66,$4c,$00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $cd,$99,$33,$67,$cd,$99,$33,$ff,$32,$66,$cc,$98,$32,$66,$cc,$00<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;.org $1000<br /><br />;Pattern Table<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00,$01,$02,$04,$08,$10,$21,$60,$00,$00,$01,$03,$07,$0f,$1e,$1f<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $c0,$98,$b0,$d0,$90,$98,$3c,$3e,$00,$00,$00,$20,$60,$60,$d8,$d0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00,$00,$01,$02,$04,$08,$10,$21,$00,$00,$00,$01,$03,$07,$0f,$1e<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00,$80,$90,$b0,$d0,$90,$98,$3c,$00,$00,$00,$00,$20,$60,$60,$d8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $70,$40,$60,$70,$40,$20,$10,$0c,$0f,$3f,$1f,$0f,$3f,$1f,$0f,$03<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $1a,$06,$06,$02,$22,$24,$18,$10,$e4,$f8,$f8,$fc,$dc,$d8,$e0,$e0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $60,$70,$40,$60,$70,$40,$20,$10,$1f,$0f,$3f,$1f,$0f,$3f,$1f,$0f<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $3e,$1a,$06,$06,$02,$22,$24,$18,$d0,$e4,$f8,$f8,$fc,$dc,$d8,$e0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $07,$07,$08,$10,$32,$22,$32,$22,$00,$00,$07,$0f,$0d,$1d,$0d,$1d<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $e0,$e0,$10,$08,$44,$44,$44,$44,$00,$00,$e0,$f0,$b8,$b8,$b8,$b8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $0c,$07,$07,$08,$10,$30,$22,$31,$03,$00,$00,$07,$0f,$0f,$1d,$0e<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $10,$e0,$e0,$10,$88,$44,$24,$24,$e0,$00,$00,$e0,$70,$b8,$d8,$d8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $0c,$07,$07,$08,$10,$31,$22,$32,$03,$00,$00,$07,$0f,$0e,$1d,$0d<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $10,$e0,$e0,$10,$88,$04,$24,$44,$e0,$00,$00,$e0,$70,$f8,$d8,$b8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $31,$20,$10,$08,$07,$04,$08,$07,$0e,$1f,$0f,$07,$00,$03,$07,$00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $84,$04,$08,$10,$e0,$18,$04,$f8,$78,$f8,$f0,$e0,$00,$e0,$f8,$00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $20,$30,$20,$10,$28,$47,$32,$0f,$1f,$0f,$1f,$0f,$17,$38,$0c,$00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $c4,$04,$76,$09,$01,$e2,$24,$18,$38,$f8,$88,$f6,$fe,$1c,$18,$00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $21,$30,$20,$20,$20,$43,$31,$0f,$1e,$0f,$1f,$1f,$1f,$3c,$0e,$00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.db $84,$04,$06,$09,$11,$e2,$24,$18,$78,$f8,$f8,$f6,$ee,$1c,$18,$00<br /><br /><br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3735"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p42609"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42609"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42609#p42609"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jan 31, 2009 8:32 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 5251<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I can't see anything terribly wrong, but I also don't know what results you are seeing with this code. I noticed though that in the <strong>loadnametables</strong> routine, you load X with 1. For it to load the 1KB that makes up a full screen, it should be 4 (256 * 4 = 1024).
<br />
<br />Also, you never set the scroll after drawing the tiles. Before enabling rendering, be sure to reset the scroll by writing 0 twice to $2005.
<br />
<br />Oh, and what's the reason for that CLI instruction?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p42616"></a>
				<b class="postauthor">GradualGames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42616"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42616#p42616"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Jan 31, 2009 10:30 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3735.jpg" width="100" height="94" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Nov 09, 2008 9:18 pm<br /><b>Posts:</b> 424
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yes, I set X=1 because I wanted to see if I could even write just a single chunk of 256 tiles correctly. I originally had all my nontransparent tiles at the bottom of the nametable, to look like "the ground." I moved them to the top to see if I could properly write ANY tiles to the nametable. If however I load a tile # into a, and then manually write to 2007 (repeatedly), I have no problems whatsoever. It's so strange, because the exact same code (unless I made a mistake somewhere), produces a nice, neat, "ground" when assembled by P65. Maybe I should ditch NESASM and try dasm or another assembler.
<br />
<br />Setting the scroll seemed to have no effect in this case. FCEUXD shows the scroll lines set at 0.
<br />
<br />*edit* I just tried unrolling the loop. It turns out I can reproduce the odd behavior with the top row. I have 32 instances of tile 1 and tile 2 in the top of my nametable---yet after about 23 of them, it seems to "jump" into the next row (tiles 3 and 4 repeated). I'll keep looking into it but this is very strange to me, unless my cerebellum is lying to me when I've counted 32 tiles across in my name table.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3735"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p42630"></a>
				<b class="postauthor">blargg</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42630"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42630#p42630"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 01, 2009 1:53 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=17.gif" width="60" height="69" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 27, 2004 8:33 am<br /><b>Posts:</b> 2802
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Your code still isn't waiting for vblank before disabling the PPU, though that should only cause glitches for one frame. You wait for vblank after reset, but then clear memory, which takes over 9000 cycles, longer than vblank. After you load graphics, you then must set the scroll when you re-enable the PPU. And you should again wait for vblank before re-enabling, otherwise you'll get another one-frame glitch.
<br />
<br />BTW, for longer code pastes like this, you might try <a href="http://www.pastey.net/" class="postlink">pastey.net</a>. It even does syntax highlighting for 6502 code!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=17"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p42643"></a>
				<b class="postauthor">GradualGames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42643"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42643#p42643"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 01, 2009 9:23 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3735.jpg" width="100" height="94" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Nov 09, 2008 9:18 pm<br /><b>Posts:</b> 424
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks for all the advice. It turned out my main problem was that NESASM only reads a certain amount of characters per line. My nametable was encoded as .db statements, and it was 32x30, just like the actual nametable. NESASM ignored the db's after about the 24th one, so the nametable came out all wonky. I suppose most people use incbin on .chr files, so this problem hasn't been encountered often.
<br />
<br />I'll try pastey next time. Speaking of code highlighting, it'd be fun to find a highlighter for 6502 for use with ConTEXT.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3735"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p42646"></a>
				<b class="postauthor" style="color: #AA0000">Memblers</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42646"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42646#p42646"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 01, 2009 9:52 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Site Admin</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=10.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 20, 2004 6:04 am<br /><b>Posts:</b> 2711<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah NESASM is just full of surprises..  It has a way of not really telling you when there's an assembly error.
<br />
<br /><div class="quotetitle">ZomCoder wrote:</div><div class="quotecontent">I'll try pastey next time. Speaking of code highlighting, it'd be fun to find a highlighter for 6502 for use with ConTEXT.</div>
<br />
<br />I use ConTEXT also, here's the highlighter I use with it:
<br /><a href="http://www.parodius.com/~memblers/nes/6502_Assembly.chl" class="postlink">http://www.parodius.com/~memblers/nes/6502_Assembly.chl</a></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=10"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p42647"></a>
				<b class="postauthor">GradualGames</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42647"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42647#p42647"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 01, 2009 10:01 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3735.jpg" width="100" height="94" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Nov 09, 2008 9:18 pm<br /><b>Posts:</b> 424
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks for the link. What's your ConTEXT setup like? I have it set up to assemble .p65 and .asm files and then run the .nes in jnes, nestopia, and fceuxd with the f9, f10, and f11 keys, and capture the console output. It's really convenient!
<br />
<br />I notice some of the highlighting looks strange in my .db directives. Some hex numbers are highlighted red, others black.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3735"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p42649"></a>
				<b class="postauthor" style="color: #AA0000">Memblers</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p42649"></a></div><div style="float: right;"><a href="./viewtopic.php?p=42649#p42649"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Feb 01, 2009 10:11 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Site Admin</td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=10.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Sep 20, 2004 6:04 am<br /><b>Posts:</b> 2711<br /><b>Location:</b> Indianapolis
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">The only feature from Context I'm really missing because I never tried to make it work, is error highlighting.  But I get by just fine without that.
<br />
<br />The .db highlighting I think always turns out red if it's starts with a number, black if with a hex letter.  I'm not sure why, it never bothered me much.
<br />
<br />My set up I ended up just having it run "n.bat" from the current directory with the F9 key.  This is because all the steps involved with my ca65 setup, assemble, link, copy binary togther.  F10 then calls another batch file that will upload it to my EPROM emulator or run it in an emulator (unless I put that in n.bat).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=10"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=10&amp;t=4807"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=4807"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 10 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 1 guest</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="4807" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="10" selected="selected">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="11">&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;NESdev China</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="12">&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;GBDev</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>

</body>
</html>
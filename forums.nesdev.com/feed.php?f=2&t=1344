<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=1344" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2006-04-10T12:52:47-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=1344</id>
<entry>
<author><name><![CDATA[never-obsolete]]></name></author>
<updated>2006-04-10T12:52:47-07:00</updated>
<published>2006-04-10T12:52:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11778#p11778</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11778#p11778"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11778#p11778"><![CDATA[
the problem was i over-complicated the situation. after sleeping for awhile i now have a better idea as to handleing the labels.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=187">never-obsolete</a> — Mon Apr 10, 2006 12:52 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2006-04-10T09:59:41-07:00</updated>
<published>2006-04-10T09:59:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11772#p11772</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11772#p11772"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11772#p11772"><![CDATA[
<div class="quotetitle">Memblers wrote:</div><div class="quotecontent"><br />That's not true with the MMC1A, I'm certain.<br /></div><br />If you allege that the MMC1A doesn't power on in the fixed-$C000 state, then someone will need to make a test ROM and try it on a real cart.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Apr 10, 2006 9:59 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-04-10T01:21:08-07:00</updated>
<published>2006-04-10T01:21:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11767#p11767</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11767#p11767"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11767#p11767"><![CDATA[
The zero page is very simple.<br />If the high byte of the instruction's adress is zero, just replace the opcode with the zero page adressing and remove the $00.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Mon Apr 10, 2006 1:21 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[never-obsolete]]></name></author>
<updated>2006-04-10T00:32:29-07:00</updated>
<published>2006-04-10T00:32:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11766#p11766</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11766#p11766"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11766#p11766"><![CDATA[
i've got the bank system figured out and now i have to get the labels working correctly and i'll have a functioning assembler. the biggest problem is with zero page.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=187">never-obsolete</a> — Mon Apr 10, 2006 12:32 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2006-04-10T00:06:30-07:00</updated>
<published>2006-04-10T00:06:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11765#p11765</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11765#p11765"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11765#p11765"><![CDATA[
<div class="quotetitle">Celius wrote:</div><div class="quotecontent"><br />MMC1 loads the last bank into $C000-$FFFF, and puts a random bank into $8000-$BFFF.<br /></div><br /><br />That's not true with the MMC1A, I'm certain.  So you might want to reserve some space in the end of your banks for some boot code, depending on the cart you use.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Mon Apr 10, 2006 12:06 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-04-09T23:47:23-07:00</updated>
<published>2006-04-09T23:47:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11764#p11764</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11764#p11764"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11764#p11764"><![CDATA[
If there is only 16kb of PRG, it gets loaded to BOTH $8000-$bfff and $c000-$ffff. It's because the adress line A14 has no effect on the cartridge, so the ROM is mirrored. $bffa and $fffa will acess to the exact same data.<br />However, the CPU reads its vectors from $fffa anyway, regardless how is mapped the cartridge. So the more logical is to consider your 16kb mapped into $c000-$ffff, and ignore $8000-$bfff, wich actually is just a mirror of $c000-$ffff. But you could also "consider" that your vectors are at $bfffa, that wouldn't be really wrong since the same data is read from $fffa, so the CPU will have acess to your vercors normally. However, I prefer the other way arround because it will work with larger sizes too.<br />If a newbie belive that the vectors are at $bffa, and then decinde to expand his ROM to 32kb PRG, his rom will crash.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Apr 09, 2006 11:47 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Celius]]></name></author>
<updated>2006-04-09T17:52:58-07:00</updated>
<published>2006-04-09T17:52:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11762#p11762</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11762#p11762"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11762#p11762"><![CDATA[
<div class="quotetitle">never-obsolete wrote:</div><div class="quotecontent"><br />now what if there is only one 16k bank at $8000,  it would get loaded into $8000 and $C000...correct? therefore forcing to start at $FFFA wouldn't make much sense seing how the bank would stop at $BFFF. should i auto-detect that and switch the vector table to $BFFA, so when the rom is loaded the vector table would be at $BFFA and $FFFA?<br /></div><br />If there is 16k of PRG ROM, you want to put it in $C000-$FFFF. Just to be safe, and sure of what's going on. It depends on the mapper, actually. If you had 16k of PRG with MMC1, and you had vector adresses pointing to $8000-$BFFF, it would be a big problem. Or at least I'm pretty sure. It has to do with the hardwired bank. With MMC1, the hardwired bank is in $C000-$FFFF. $8000-$BFFF is used for bankswitching. It can be changed so you can switch $C000-$FFFF out and leave $8000-$BFFF as the same bank. I don't know why you'd do this, though.<br /><br />I don't think the vectors go to $BFFA. I haven't really ever thought about this before. I'd just avoid that all together, and put the bank in $C000-$FFFF.<br /><br /><div class="quotetitle">never-obsolete wrote:</div><div class="quotecontent"><br />also do the first 2 prg banks(assuming there is 2) get loaded in prg-rom on every mapper or is there some other logic as to what gets loaded at power-on/reset?<br /></div><br /><br />The last bank is a hardwired bank, which means the last bank of PRG will always be present. It's different for each mapper. MMC1 loads the last bank into $C000-$FFFF, and puts a random bank into $8000-$BFFF.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=138">Celius</a> — Sun Apr 09, 2006 5:52 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[never-obsolete]]></name></author>
<updated>2006-04-09T16:56:11-07:00</updated>
<published>2006-04-09T16:56:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11757#p11757</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11757#p11757"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11757#p11757"><![CDATA[
now what if there is only one 16k bank at $8000,  it would get loaded into $8000 and $C000...correct? therefore forcing to start at $FFFA wouldn't make much sense seing how the bank would stop at $BFFF. should i auto-detect that and switch the vector table to $BFFA, so when the rom is loaded the vector table would be at $BFFA and $FFFA?<br /><br />also do the first 2 prg banks(assuming there is 2) get loaded in prg-rom on every mapper or is there some other logic as to what gets loaded at power-on/reset?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=187">never-obsolete</a> — Sun Apr 09, 2006 4:56 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-04-09T02:41:33-07:00</updated>
<published>2006-04-09T02:41:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11733#p11733</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11733#p11733"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11733#p11733"><![CDATA[
In WLA-DX, you just have to make a section where you have all 3 vectors, and force it to start at $fffa (in the bank you should).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Apr 09, 2006 2:41 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[never-obsolete]]></name></author>
<updated>2006-04-09T01:50:54-07:00</updated>
<published>2006-04-09T01:50:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11732#p11732</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11732#p11732"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11732#p11732"><![CDATA[
how do those assemblers handle interrupt vectors<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=187">never-obsolete</a> — Sun Apr 09, 2006 1:50 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2006-04-08T01:59:47-07:00</updated>
<published>2006-04-08T01:59:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11691#p11691</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11691#p11691"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11691#p11691"><![CDATA[
WLA-DX allows you (err... forces you) to definite all emplacement of ROM and RAM bank in a separate file.<br />Then, your sections are located to the bank you want.<br />It is a pretty great system.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sat Apr 08, 2006 1:59 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2006-04-08T00:49:06-07:00</updated>
<published>2006-04-08T00:49:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11688#p11688</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11688#p11688"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11688#p11688"><![CDATA[
A quick scan of the ca65 user's guide reveals that ^ and .BANKBYTE both do what you want.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Sat Apr 08, 2006 12:49 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Memblers]]></name></author>
<updated>2006-04-07T21:19:45-07:00</updated>
<published>2006-04-07T21:19:45-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11683#p11683</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11683#p11683"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11683#p11683"><![CDATA[
I don't understand what it's for, what's the signficance of the order?  I'd just assume whatever is at the top of the source file would be the first bank and the bottom the end bank (for .includes and everything).<br /><br />Or in CA65 you can just make each bank a seperate segment and have it wherever in the source, then the linker puts it where you tell it to with the linker config.  This sounds exactly like your 2nd option.<br /><br />The part that I'm missing with banks, maybe it's in cc65 and I missed it, is a way to get a bank number to use in an equation.  So I could do something like LDA #^level_data_index / STA prgbank_select_register.  (I used ^ because IIRC that's what x816 used for getting 65816's address above 16-bits).  But I can just define that stuff manually, only bad thing is having to change definitions if banks got moved around later.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=10">Memblers</a> — Fri Apr 07, 2006 9:19 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[never-obsolete]]></name></author>
<updated>2006-04-07T20:19:03-07:00</updated>
<published>2006-04-07T20:19:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11680#p11680</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11680#p11680"/>
<title type="html"><![CDATA[banking system]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=1344&amp;p=11680#p11680"><![CDATA[
what would be the better option:<br />1. use a banking scheme similar to nesasm but more robust, where the assembler takes care of writing the prg and chr banks in the correct order<br />2. writing a seperate program that reads in a seperate text file which contains the header and the order of the banks. then writing the rom<br /><br />or if there's better ways, i'm all ears.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=187">never-obsolete</a> — Fri Apr 07, 2006 8:19 pm</p><hr />
]]></content>
</entry>
</feed>
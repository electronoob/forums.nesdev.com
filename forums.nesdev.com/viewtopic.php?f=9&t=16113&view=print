<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Glitching graphics with INL NES TLROM Boards</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Glitching graphics with INL NES TLROM Boards</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=16113">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=16113</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ramiq27</b> [ Mon Jun 19, 2017 7:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I purchased the Kazzo programmer with TLROM 256/256 boards.<br /><br />I tried flashing several games and it worked fine except with one. The one game I specifically purchased this for!<br /><br />Please see pictures below for the issue. <br /><br /><a href="http://imgur.com/a/Nt4mG" class="postlink">http://imgur.com/a/Nt4mG</a><br /><br />The game is Captain Tsubasa 2 Super Striker. I have made many repros of this game using donor carts in the past and it worked fine. However with Kazzo I am getting glitching graphics. I used the supplied INL Retro-prog software to flash the board. As mentioned, several games have flashed and worked completely fine so I am almost certain I flashed it correctly. <br /><br />Do these boards have compatibility issues? The rom runs fine on several different emulators. <br /><br />Any help is appreciated.<br /><br />Thank you

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jun 19, 2017 7:44 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><a href="http://bootgod.dyndns.org:7777/profile.php?id=2221" class="postlink">Tsubasa II is TLROM, 2+1 Mbit</a>. If you program a 2+1 Mbit <a href="https://pineight.com/nes/#hdbm" class="postlink">Holy Diver Batman</a> ROM, what error do you get if any?<br /><br />Based on the photo, the error looks like a wrong CHR bank. It also looks like a hack, as I doubt the original release was in a language using Arabic letters. The hack may have introduced banking problems. Have you tried the hack on another flash solution, such as the EverDrive or PowerPak? Or have you tried it on an obsessively accurate emulator?<br /><br />You did file a support ticket, right? Might <a href="https://forums.nesdev.com/viewtopic.php?p=158807#p158807" class="postlink">previous experiences at getting the INL team to respond</a> help?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ramiq27</b> [ Mon Jun 19, 2017 8:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><a href="http://bootgod.dyndns.org:7777/profile.php?id=2221" class="postlink">Tsubasa II is TLROM, 2+1 Mbit</a>. If you program a 2+1 Mbit <a href="https://pineight.com/nes/#hdbm" class="postlink">Holy Diver Batman</a> ROM, what error do you get if any?<br /><br />Based on the photo, the error looks like a wrong CHR bank. It also looks like a hack, as I doubt the original release was in a language using Arabic letters. The hack may have introduced banking problems. Have you tried the hack on another flash solution, such as the EverDrive or PowerPak? Or have you tried it on an obsessively accurate emulator?<br /><br />You did file a support ticket, right? Might <a href="https://forums.nesdev.com/viewtopic.php?p=158807#p158807" class="postlink">previous experiences at getting the INL team to respond</a> help?</div><br /><br /><br />I appreciate the response.<br /><br />Apologies. Should have mentioned the rom has a translation patch. However I thought of this and in order to rule that out I flashed the unpatched ROM and it had the same exact problem. So it's not a patch issue I guess.<br /><br />I flashed M4_P256K_C256K.nes from Holy Diver Batman. Please see picture below:<br /><br /><a href="http://imgur.com/a/Ms24q" class="postlink">http://imgur.com/a/Ms24q</a><br /><br />What emulators do you recommend I test the rom with?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jun 19, 2017 9:01 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thank you. In case the photo of your TV disappears, here's a transcription of the test result:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">004 TLROM (MMC3)<br />256K PRG ROM<br />PRG RAM MISSING<br />256K CHR ROM OK<br />DETAILED TEST RESULT: 0000<br />FLASH ID RESULT:<br />&nbsp; 00 00 00 00 00 00 00 00<br /></div><br />(The cartridge label being Sunsoft's <em>Batman</em> was a cute touch.)<br /><br />The <em>Tsubasa II</em> CHR ROM is 1 Mbit (128 KiB). Your board's CHR ROM appears to be twice that size. Have you tried doubling up the CHR ROM before flashing it?<br /><br />Along a similar line, what result do you get if you flash <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">M1_P128K_C128K.nes</tt>? Ignore the &quot;M1_&quot; prefix, as the only difference among ROMs of the same size is the header, not the ROM contents.<br /><br />I'd say try it in higan. I remember reading that it randomizes the machine's state at power-on as a means of catching incomplete machine initialization code, and I assume this to be true of the mapper as well.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Mon Jun 19, 2017 10:03 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I replied to you message a few mins ago.  Sorry for the delay, out of town right now and was busy last weekend with my sister's wedding.  I've been pretty good with response times lately, but life still gets in the way for a few days.  Tepples suggestion to double up the CHR to fill the chip might help, but I'd guess the tiles would be solid 0xFF data if that were the issue.  I'll have to test this out myself and see if I'm able to replicate the issue.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ramiq27</b> [ Mon Jun 19, 2017 4:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Thank you. In case the photo of your TV disappears, here's a transcription of the test result:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">004 TLROM (MMC3)<br />256K PRG ROM<br />PRG RAM MISSING<br />256K CHR ROM OK<br />DETAILED TEST RESULT: 0000<br />FLASH ID RESULT:<br />&nbsp; 00 00 00 00 00 00 00 00<br /></div><br />(The cartridge label being Sunsoft's <em>Batman</em> was a cute touch.)<br /><br />The <em>Tsubasa II</em> CHR ROM is 1 Mbit (128 KiB). Your board's CHR ROM appears to be twice that size. Have you tried doubling up the CHR ROM before flashing it?<br /><br />Along a similar line, what result do you get if you flash <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">M1_P128K_C128K.nes</tt>? Ignore the &quot;M1_&quot; prefix, as the only difference among ROMs of the same size is the header, not the ROM contents.<br /><br />I'd say try it in higan. I remember reading that it randomizes the machine's state at power-on as a means of catching incomplete machine initialization code, and I assume this to be true of the mapper as well.</div><br /><br />This Batman cartridge has volunteered as tribute in the past to create the same game I am trying to flash now  <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /> <br /><br />Please see below the results of M1_P128K_C128K.nes<br /><br /><a href="http://imgur.com/dpHEqf7" class="postlink">http://imgur.com/dpHEqf7</a><br /><br />I am aware of the 128 CHR and the need to double it up in order to match the boards I have. Tried flashing it without doubling and the problem got worse of course.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ramiq27</b> [ Mon Jun 19, 2017 4:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">I replied to you message a few mins ago.  Sorry for the delay, out of town right now and was busy last weekend with my sister's wedding.  I've been pretty good with response times lately, but life still gets in the way for a few days.  Tepples suggestion to double up the CHR to fill the chip might help, but I'd guess the tiles would be solid 0xFF data if that were the issue.  I'll have to test this out myself and see if I'm able to replicate the issue.</div><br /><br /><br />Thank you Paul. I have responded to your email.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jun 19, 2017 5:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="codetitle"><b>Code:</b></div><div class="codecontent">004 TLROM (MMC3)<br />128K PRG ROM<br />PRG RAM MISSING<br />128K CHR ROM OK<br />DETAILED TEST RESULT: 0010<br /></div><br />0010 means the MMC3's programmable interval timer may not be behaving as the test expects.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Wed Jun 21, 2017 10:28 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">004 TLROM (MMC3)<br />128K PRG ROM<br />PRG RAM MISSING<br />128K CHR ROM OK<br />DETAILED TEST RESULT: 0010<br /></div><br />0010 means the MMC3's programmable interval timer may not be behaving as the test expects.</div><br /><br />Is this console that you're getting &quot;Detailed test result 0010&quot; modified in anyway?  I see it's a frontloader, but perhaps it's HDMI/RGB moded, it is a NTSC console right?  I'm unable to replicate the game's issues with my board and always getting 0000 with the test rom.  So I'm not sure why the test rom is reporting 0010 for ramiq27, but it doesn't seem to be heavily related.<br /><br />I'm getting similar graphic glitching when I test the original rom.  However, in the opening boot screen the &quot;TECMO theater&quot; (background tiles) are missing and it's completely black.  The bunny (sprites) looks good, but he's no leaning on anything.  Looking in fceux, &quot;TECMO theater&quot; is on NT0, and NT1 is blank black.  So my gut says something is wrong with mirroring somehow.  I wonder if the game doesn't initialize the MMC3 mirroring bits, and is relying on their startup value, that seems a bit far fetched for a production game though..  As the opening scenes play there are some obvious scanline issues, but perhaps there are other uninitialized things causing issues..?  Have to dig into the rom and see what's going on, I don't think it's as simple as inadequate mapper initialization, but that's the only thing I can think of at the moment..

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>krzysiobal</b> [ Wed Jun 21, 2017 12:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Captain Tsubasa has 128 kB CHR-ROM but this game writes to mapper regs to switch CHR banks outside 128 kB. If your CHR memory is &gt; 128 kB and you haven't completely filled it with CHR-DATA, bugs will occur.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Wed Jun 21, 2017 1:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm testing with a 128KB CHR-ROM chip, and still having issues.  So I've got something else going on..

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ramiq27</b> [ Sat Jun 24, 2017 1:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Glitching graphics with INL NES TLROM Boards</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">004 TLROM (MMC3)<br />128K PRG ROM<br />PRG RAM MISSING<br />128K CHR ROM OK<br />DETAILED TEST RESULT: 0010<br /></div><br />0010 means the MMC3's programmable interval timer may not be behaving as the test expects.</div><br /><br />Is this console that you're getting &quot;Detailed test result 0010&quot; modified in anyway?  I see it's a frontloader, but perhaps it's HDMI/RGB moded, it is a NTSC console right?  I'm unable to replicate the game's issues with my board and always getting 0000 with the test rom.  So I'm not sure why the test rom is reporting 0010 for ramiq27, but it doesn't seem to be heavily related.<br /><br />I'm getting similar graphic glitching when I test the original rom.  However, in the opening boot screen the &quot;TECMO theater&quot; (background tiles) are missing and it's completely black.  The bunny (sprites) looks good, but he's no leaning on anything.  Looking in fceux, &quot;TECMO theater&quot; is on NT0, and NT1 is blank black.  So my gut says something is wrong with mirroring somehow.  I wonder if the game doesn't initialize the MMC3 mirroring bits, and is relying on their startup value, that seems a bit far fetched for a production game though..  As the opening scenes play there are some obvious scanline issues, but perhaps there are other uninitialized things causing issues..?  Have to dig into the rom and see what's going on, I don't think it's as simple as inadequate mapper initialization, but that's the only thing I can think of at the moment..</div><br /><br /><br />The NES I use for testing is NSTC. Unmodified.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - More NSF Requests</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">More NSF Requests</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=6&amp;t=115">http://forums.nesdev.com/viewtopic.php?f=6&amp;t=115</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>24</strong> of <strong>99</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Dec 22, 2005 11:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is <em>Lode Runner</em> ripped? It doesn't show up in Zophar's, nor does it show up in this thread. I haven't played very far, but I count six tunes: <ul><li>title screen </li><li>stage start </li><li>play </li><li>collect all gold </li><li>stage clear (climbing ladder slowly and panting) </li><li>EDIT: die </li><li>game over (collect all gold played slower) </li></ul>
<br />(PS: What the heck is a <a href="http://pics.pineight.com/nt2/bomblodev2.nsf" class="postlink">Lodeamari Bombacy</a>?)
<br />
<br />EDIT: Thanks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kingshriek</b> [ Fri Dec 23, 2005 1:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here's Lode Runner.
<br />
<br /><a href="http://h1.ripway.com/kingshriek/LodeRunner.zip" class="postlink">Lode Runner NSF</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ArnoldRimmer83</b> [ Fri Dec 23, 2005 2:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for ripping Ginga no Sannin kingshriek. That was an nsf I was thinking of requesting.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>kingshriek</b> [ Fri Dec 23, 2005 11:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here are some more rips.
<br />
<br /><a href="http://h1.ripway.com/kingshriek/BestKeiba-DerbyStallion.zip" class="postlink">Best Keiba Derby Stallion NSF</a> - same as Derby Stallion - Zen Koku Ban except for the title screen music
<br /><a href="http://h1.ripway.com/kingshriek/DeepDungeon4-KuronoYoujutsushi.zip" class="postlink">Deep Dungeon 4 - Kuro no Youjutsushi NSF</a>
<br /><a href="http://h1.ripway.com/kingshriek/MaisonIkkoku.zip" class="postlink">Maison Ikkoku NSF</a>
<br /><a href="http://h1.ripway.com/kingshriek/MeiTanteiHolmes-KirinoLondonSatsujinJiken.zip" class="postlink">Mei Tantei Holmes - Kiri no London Satsujin NSF</a>
<br /><a href="http://h1.ripway.com/kingshriek/MeiTanteiHolmes-MKaranoChousenjou.zip" class="postlink">Mei Tantei Holmes - M Kara no Chousenjou NSF</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Norrin_Radd</b> [ Sat Dec 24, 2005 7:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />YES! King, you picked all of the ones I really wanted from phase 3. Some of these games have amazing soundtracks, and to think that they were never available untill now is sad, but also exciting. It's so excellent to hear <em>NEW</em> tunes from the 2A03, 20  years later. So for that, I thank thee!
<br />
<br />I think I would like to officially request " Chitei Senkuu Vazorudaa (Sofel - 1991) "
<br />
<br />For some reason I marked it as ripped, but I don't think it ever was. Anyway, the music from the first level is phenomenally badass.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Knurek</b> [ Sat Dec 24, 2005 12:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Norrin_Radd wrote:</div><div class="quotecontent">I think I would like to officially request " Chitei Senkuu Vazorudaa (Sofel - 1991) "<br />For some reason I marked it as ripped, but I don't think it ever was. Anyway, the music from the first level is phenomenally badass.</div>
<br />
<br />Well, I have Chitei Senkuu Bazorudaa (1991)(Asmik, Sofel).nsf in my collection. And I do recall someone mentioning it on this thread when you requested it last time. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />
<br />
<br />Get it here: <a href="ftp://ftp.modland.com/pub/modules/nintendo%20nsf/-%20unknown/chitei%20senkuu%20bazorudaa.nsf" class="postlink">ftp://ftp.modland.com/pub/modules/nintendo%20nsf/-%20unknown/chitei%20senkuu%20bazorudaa.nsf</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ugetab</b> [ Sat Dec 24, 2005 12:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Norrin_Radd, edit your list so it has "Wurm: Journey to the Center of the Earth" in parentheses after "Chitei Senkuu Vazorudaa", so you'll know how to find it again.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Norrin_Radd</b> [ Sat Dec 24, 2005 3:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />ohhhhhh, you're right, it <em>IS</em> Wurm. I couldn't remember why it was marked ripped. That's why. That's also why I couldn't find it in this thread. Probably. <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> 
<br />
<br />Thanks for rippin it Knurek ^^

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Norrin_Radd</b> [ Sat Dec 24, 2005 3:43 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ooops.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Knurek</b> [ Sat Dec 24, 2005 6:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Norrin_Radd wrote:</div><div class="quotecontent">ohhhhhh, you're right, it <em>IS</em> Wurm. I couldn't remember why it was marked ripped. That's why. That's also why I couldn't find it in this thread. Probably. <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> <br /><br />Thanks for rippin it Knurek ^^</div>
<br />
<br />I didn't rip it, just have it in my NSF collection. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Norrin_Radd</b> [ Sat Dec 24, 2005 6:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is it a crime to love NES music so? It leads me to post <em>crazy</em> things that seem awfully <em>crazy</em>.
<br />
<br />Now lets all forget about this debacle and enjoy an enchanting holiday full of presents and eggnog.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Knurek</b> [ Sun Dec 25, 2005 1:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Also, I've been meaning to ask for some time... Does any of you guys know an automated NSF time detectors? Something akin to NSFMeasure, but one that actually umm... works?
<br />
<br />See, I don't have anything endless looping tracks, but I do prefer not having to manually change the tracks most of the time. And timing those ~3000 NSFs (games + 2A03.org collection) isn't something I'd prefer to do alone.
<br />
<br />SIDs have a tool that detects the time, which makes listening to HVSC with proper plugins oh-so-more pleasurable.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Dec 25, 2005 4:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />How would such a tool work?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Guest</b> [ Sun Dec 25, 2005 5:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">How would such a tool work?</div>
<br />
<br />Well, here's a explenation taken from the readme for SID detection tool by Michael Schwendt. It's obviously more SID related, but should give you an idea about what's necessary. Not sure if it's even feasible to do with NSF, someone with a better NES knowledge would have to look into that.
<br />
<br />A friend of mine whipped a time detector for his Amiga music emulator using similar principles (he added sound register state logging I think), which worked pretty good.
<br />
<br />Also, the sc68 Atari ST sound emulator has a time detector, which I think uses an similar algorithm.
<br />
<br />Article:
<br />
<br />I've promised I would either document my current song-length
<br />detection or release it as a module or library, respectively. After
<br />separating some parts of siddiag to get a better overview, I've
<br />decided I would rather document my method in order to suggest a
<br />concept instead of an clean implementation. Here's a small draft.
<br />See what you can get out of it.
<br />
<br />  [As a side note: if anyone has further ideas on finding a song-end
<br />  or loop position by analyzing sequences of normalized frequency
<br />  values, this might still be an option, too.]
<br />
<br />DETECTING SILENCE?
<br />
<br />On the SID emu side, I won't discuss the obvious things here. One
<br />can easily determine when a sidtune turns silent. For instance, when
<br />Master Volume turns zero, chosen waveforms turn inaudible (TEST=1 |
<br />WAVE=0 | FREQ=0), ADSR envelopes reach a near-zero level and digis
<br />are not active. One might even take into account invalid filter
<br />settings which turn off voices. But I doubt the latter is relevant
<br />for song-end detection.
<br />
<br />The only issue here is that this kind of "silent song-end detection"
<br />wouldn't help with sidtunes that restart playback after some silent
<br />period of time. Raises the question how many seconds of silence a
<br />song-end detector should allow for? 5 seconds? 10 s? 20 s? I would
<br />look for a period of 10-20 s of silence, so detected get only tunes
<br />that "seem" to have ended for some time at least, leaving undetected
<br />only those which restart or play a next part after a short pause.
<br />
<br />However, all this would still not be enough with sids that loop
<br />forever to some arbitrary song position. These never become silent
<br />and hence require a more powerful song-end detection.
<br />
<br />MEMORY USAGE PROFILING
<br />
<br />The "memory usage dump" feature of sid2crc has lead to the idea of
<br />observing a music player's activity in memory. My first assumption
<br />is, that a sidtune -- which consists of e.g. 2.5 KiB of machine code
<br />and 1.8 KiB of data -- towards its song-end would have accessed all
<br />or most of its data bytes at least once and would begin recycling
<br />previously accessed memory locations when it loops. So, why not
<br />modify the code emulator to observe how often memory locations are
<br />accessed?
<br />
<br />Of course, this makes some fundamental assumptions about how the
<br />sidtune is stored in memory. For instance, that a part of a song yet
<br />to be played requires the music player to read new memory locations
<br />that have not been read before. Fortunately, music players are built
<br />like this usually. Imagine a track/step table which lists the
<br />patterns to be played. Entries in that table and the corresponding
<br />patterns of music data have not been played until they have been
<br />accessed. And when they are accessed it means the music player is
<br />still playing something new and has not reached end of music.
<br />
<br />THE EXPERIMENTAL IMPLEMENTATION
<br />
<br />What I have currently implemented can be described as follows:
<br />
<br /> * A function that tells the current playtime (e.g. in seconds), so
<br />   when there is some kind of event (e.g. the music turning silent),
<br />   we know exactly at which place in time we are.
<br />
<br /> * A modified SID emulator which signals the different "silence"
<br />   events outlined above. A front-end measures when these events
<br />   start and how long they last. The song-end detector can stop
<br />   right away when silence has been detected for 10-20 seconds.
<br />
<br /> * A slightly modified interpreter in libsidplay tells whether each
<br />   accessed memory location is READ, WRITTEN, or EXECUTED,
<br />   respectively. While it executes the sidtune, it transfers this
<br />   information to the back-end for each address that it accesses.
<br />
<br />   [That back-end is part of siddiag/sid2crc and maintains a log
<br />   with additional information for each C64 memory address, whether
<br />   it is READ_FIRST, WRITTEN_FIRST, etc. This allows more detailed
<br />   analysis of whether a sidtune utilizes uninitialized memory, uses
<br />   self-modifying code, or relocates memory areas, and things like
<br />   that.]
<br />
<br />   Distinguishing between READ/WRITE/EXE memory access allows for
<br />   sids that relocate memory areas before they use them
<br />   (WRITE_FIRST, then READ and/or EXE), and future song-end
<br />   detection extensions regarding self-modifying code and random
<br />   values.
<br />
<br /> * A "memory activity analyzer" (class ActivityWatch) counts how
<br />   often each address has been READ/EXE. Outside the initial sidtune
<br />   loading range, it makes sure a byte has been WRITTEN FIRST before
<br />   it is counted as being read or executed. Additionally, it
<br />   maintains five separate counters on how many addresses have been
<br />   read so far the FIRST TIME, the SECOND TIME, the THIRD TIME, etc.
<br />   up to the FIFTH TIME. When these five counters stop increasing
<br />   for some period of time, it means all recently accessed addresses
<br />   have been accessed before at least five times, which is likely an
<br />   indication that the music player is looping. Sidtune emulation
<br />   can stop, and further code be run to determine the song-length.
<br />   One could use less than five such counters. But it might be that
<br />   a sidtune reads new addresses for the first time after it has
<br />   read other addresses many times, i.e. it plays a new part after
<br />   it has looped on previous parts for some time. Processing a
<br />   sidtune long enough helps here -- "long" being 15 minutes or so
<br />   unless the detector kicks out sooner. If none of the five
<br />   counters has changed for some long period, it seems safe to
<br />   assume that all recently accessed addresses have been read more
<br />   than five times, i.e. the machine code has been recycling old
<br />   data.
<br />
<br />I assume the song-length in seconds to be the last second in which
<br />an address was counted as being accessed for the FIRST TIME, keeping
<br />any eye on above silence events, of course (any objections,
<br />anyone?).
<br />
<br />BAD RIPS AND BUGS IN MUSIC PLAYERS
<br />
<br />What is left is the case of bad rips (which read unused new bytes
<br />sporadically) or sids that loop X times, reading a few new bytes
<br />each time, before they restart for good (e.g. /BOGG in HVSC).
<br />
<br />This is where additional code kicks in. It divides time into small
<br />UNITS -- e.g. 10 seconds -- and counts how many new bytes per unit
<br />are accessed the FIRST TIME. The threshold of how many new bytes per
<br />unit mark a sidtune as still playing new parts needs to be
<br />determined empirically. I'm using 8 bytes per 10 seconds, but have
<br />not examined this deeply (only with sids with suspiciously long
<br />playtimes). When such a low activity in memory has lasted for
<br />several minutes, I assume the sidtune does bad things in memory (the
<br />"B" attribute in the song-lengths database). In such as case, as
<br />song-end is taken the first second when such low activity started.
<br />
<br />
<br />When detection can fail:
<br />
<br /> - the sidtune loops, but player keeps reading many new bytes from
<br />   somewhere (bad rip or unused machine code)
<br />   
<br /> - machine code stays in a long loop, while modifying memory
<br />   addresses and reading them to feed the SID, it neither reads nor
<br />   executes any _new_ addresses, but creates new data

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Dec 25, 2005 5:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It might be easier to either 1. manually contribute timing values for NSFs using some sort of collaborative database or, more likely, 2. make a detector function for common music playback engines (e.g. NT2 or MCK or engines that pop up in numerous games by a given publisher).

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>24</strong> of <strong>99</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
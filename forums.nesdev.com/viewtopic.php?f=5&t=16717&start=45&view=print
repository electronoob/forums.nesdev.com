<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Best uses of the SNES's 64KB of audio ram</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Best uses of the SNES's 64KB of audio ram</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=5&amp;t=16717">http://forums.nesdev.com/viewtopic.php?f=5&amp;t=16717</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Dec 09, 2017 3:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent">I bet assembly was pretty much dead at this time though like it is now, so I don't really know. <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /><br /></div>GBA games used <em>lots</em> of ASM libraries for doing various things. Rasterizing triangles, audio mixing, video decoders...<br /><br />But the core logic was probably written in C, because there was no benefit in <em>not</em> doing so.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">why would you have only have 4 FM channels with 6 PCM channels lack any sort of pitch control?<br /></div>6 channels for percussion and sound effects seems like a perfectly reasonable choice to me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Sat Dec 09, 2017 3:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">But the core logic was probably written in C, because there was no benefit in not doing so.</div><br />Maybe saving enough CPU time for higher sample rate music? <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /><br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">6 channels for percussion and sound effects seems like a perfectly reasonable choice to me.</div><br />I can't tell if you're being sarcastic or not. <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> The Neo Geo does have an additional sound channel with pitch control though, so it's really 7 PCM channels. There's also 1 noise channel that can be used for percussion.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">Well, PSG was widely used in the GBA, for the better and the worse.</div><br />I personally think it clashes really bad with the visuals.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Sat Dec 09, 2017 4:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Can most people even tell the difference between drum samples and using a white noise channel anyway?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Dec 09, 2017 4:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent"><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">But the core logic was probably written in C, because there was no benefit in not doing so.<br /></div>Maybe saving enough CPU time for higher sample rate music? <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /><br /></div>Your central assumption (that it would save enough CPU time) is untrue. The core game logic is not what uses even a significant minority of processing time on the GBA.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">6 channels for percussion and sound effects seems like a perfectly reasonable choice to me.<br /></div>I can't tell if you're being sarcastic or not. <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> The Neo Geo does have an additional sound channel with pitch control though, so it's really 7 PCM channels. There's also 1 noise channel that can be used for percussion.<br /></div>Perfectly honest. The design assumption was probably 3ish percussion and 3ish sfx at any time, and it's important that you have enough overhead to not worry about note stealing.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Dec 09, 2017 4:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">I was surprised to learn how wasteful the Neo Geo's sound chip is with memory, because every note has to be individually sampled.</div><br />In other words, it behaves like the tape frame in a Mellotron, where each key has its own recording. This isn't a problem for drums, and Sunsoft bass on NES has the same problem to a smaller extent because of the small set of valid sample rates.<br /><br /><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">Can most people even tell the difference between drum samples and using a white noise channel anyway?</div><br />Yes, which is why Tim Follin paired two channels to make more realistic drums as early as the NES. But the pattern of drums interrupting the triangle channel doesn't work so well if the triangle channel is your lead, as it is in a couple <em>Super Mario Bros. 3</em> tunes, so Nintendo used drum samples starting around 1988. (By that time, most FDS games that were going to cross the Pacific already did, meaning Nintendo no longer need the DMC to emulate the missing FDS wavetable in games like <em>Zelda</em> and <em>Super Mario Bros. 2: Mario Madness</em>.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Dec 09, 2017 4:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent">I can't tell if you're being sarcastic or not. <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> The Neo Geo does have an additional sound channel with pitch control though, so it's really 7 PCM channels. There's also 1 noise channel that can be used for percussion.</div><br />I know squat about the Neo Geo, but wasn't it supposed to be the Rolls Roye of the video game consoles ? If so, I don't see how it makes any sense it features PCM channels without any kind of pitch controls. That is just completely useless. If they don't provide fine-grained pitch control, at least give the choice between a scale of pitches, such as what the NES's DPCM does.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Sat Dec 09, 2017 4:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Your central assumption (that it would save enough CPU time) is untrue. The core game logic is not what uses even a significant minority of processing time on the GBA.</div><br />Then what does? I don't see the reason for GBA games supposedly only using a quarter of the CPU time for sound then.<br /><br /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Perfectly honest</div><br />I guess I can kind of see it. The four FM channels, as well as the variable sample rate PCM channel, are for the &quot;main sounds&quot;, (I'm not a musician) the three PSG channels are for &quot;background noise&quot;, the noise channel is for &quot;light percussion&quot; or whatever, and the other six PCM channels are for percussion and sound effects. You can definitely make it work (unlike SNK at the end of the Neo Geo's life), but it's still pretty inflexible despite having so many channels.<br /><br />You just can't beat the YM2151 and a designated PCM chip. <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">I know squat about the Neo Geo, but wasn't it supposed to be the Rolls Roye of the video game consoles ?</div><br />Not quite; it was designed to be an arcade machine, but later ended up being converted and sold as a home system. (The arcade &quot;MVS&quot; and the home &quot;AES&quot; are identical in hardware.) According to Wikipedia:<br /><br /><div class="quotetitle">Wikipedia wrote:</div><div class="quotecontent">Initially, the AES home system was only available for rent to commercial establishments, such as hotel chains, bars and restaurants, and other venues. When customer response indicated that some gamers were willing to buy a US$650 console, SNK expanded sales and marketing into the home console market in 1991.</div><br />However, Wikipedia also says:<br /><br /><div class="quotetitle">Wikipedia wrote:</div><div class="quotecontent">Neo Geo's graphics and sound are largely superior to other contemporary home consoles, arcades, and even computers such as the Sharp X68000. The MVS was one of the most powerful arcade units at the time.</div><br />Either I have a pretty big misunderstanding of the Sharp X68000, or this is a bunch of bullshit. The last sentence is definitely not true; I'm fairly certain most all of Konami's designated arcade game boards are more powerful, the CPS1 is better in the majority of ways, the Irem M92 is better in any real world scenario, and Sega and Namco's arcade boards just obliterate everyone else's. The only thing the Neo Geo seems to beat are Data East's and some of Taito's lower end systems (but they also had plenty of more powerful ones from the time).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lazygecko</b> [ Sat Dec 09, 2017 6:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Isn't the Neo Geo built to push sprites and only sprites? Even the backgrounds are sprites. Makes it hard to just directly compare.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Drew Sebastino</b> [ Sat Dec 09, 2017 6:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />True, but you can still compare the overall video bandwidth of each system, and while the Neo Geo is still significantly better than both the SNES and the Genesis in this regard, it gets beaten by pretty much anything else. I have never seen &quot;cheese grater&quot; sprite per line dropout on any arcade machine from the time other than the Neo Geo. The Neo Geo is still powerful, no doubt, but more powerful than the majority of arcade machines from the time? I don't think so. Seems like they dumped a bunch of resources into having sprites also take the role of backgrounds, despite the fact that no game really takes advantage of this, instead just emulating a traditional tilemap system (I wouldn't even be surprised if they didn't try and save bandwidth for color 0 areas). Neo Geo games might even look better on a tilemap system, (assuming it uses 8x8 tiles) as they might benefit from an 8x8 palette area to actually make use of huge number of available onscreen palettes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Dec 09, 2017 6:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent"><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">The core game logic is not what uses even a significant minority of processing time on the GBA.</div><br />Then what does?</div><br />Software 3D rendering, for one. The ARM7TDMI has to do the job of all four of the S-CPU, S-SMP, S-DSP, and GSU. Also some games performed very detailed calculations for the coordinates of each line in affine mode.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>psycopathicteen</b> [ Sat Dec 09, 2017 9:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I could swear I remember reading that the GBA's PCM channel does have variable rates.  It could be just because everyone tried to juggle 4 to 8 channels into one channel, so the variable rate didn't become used.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>calima</b> [ Sun Dec 10, 2017 1:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Espozo wrote:</div><div class="quotecontent">Maybe saving enough CPU time for higher sample rate music? <img src="./images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /></div><br />The other points + economics. I've said before that coding in asm is about 10x slower vs coding in C. Having nicer sounds wouldn't make the game sell 10x as much.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Dec 10, 2017 10:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">psycopathicteen wrote:</div><div class="quotecontent">I could swear I remember reading that the GBA's PCM channel does have variable rates.  It could be just because everyone tried to juggle 4 to 8 channels into one channel, so the variable rate didn't become used.</div><br />GBA direct sound does have variable rate, it is fine-grained configurable using the system's timers. However the channels are really meant to replay software mixed sounds in a ring-buffer. I don't think anyone used those channels to play &quot;raw&quot; samples, because 1) 2 channels isn't enough and 2) you need to explicitely stop the playback, if you don't it continues to play whathever is in memory, so programming normal sample playback is almost as complicated as using a sound mixer. And of course 3) Nintendo provided the sound engine anyway so why bother <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The other points + economics. I've said before that coding in asm is about 10x slower vs coding in C. Having nicer sounds wouldn't make the game sell 10x as much.</div><br />Most GBA games could have had nicer sound just by using a nicer setting of Nintendo's sound engine, at the cost of CPU time (which is mostly unused anyway). Apparently developers were very keen on reducing CPU usage as much as possible and have shitty sound, even if there was no technical requirement of doing so in most games. Only Golden Sun games and a couple of others had good sound. Probably the fact the actual sound hardware in the machine is shitty didn't help. (Small speaker incapable of reproducing bass-y sounds, PWM at only 65kHz involving a lot of aliasing in the sound processing after it being mixed, only 8-bit DAC so lots of noise, audible 60Hz buzz).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Dec 10, 2017 11:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">I don't think anyone used those channels to play &quot;raw&quot; samples, because 1) 2 channels isn't enough and 2) you need to explicitely stop the playback, if you don't it continues to play whathever is in memory, so programming normal sample playback is almost as complicated as using a sound mixer.</div><br />Add 16 ms of blank space after each sample. Then start playback, wait <em>x</em> frames, and stop playback. <em>Doom</em> for Game Boy Advance uses this for sound effects. It runs all music through the GB-PSG so as to spend more cycles on texture mapping and fewer on the mixer.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Dec 10, 2017 11:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Best uses of the SNES's 64KB of audio ram</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Add 16 ms of blank space after each sample. Then start playback, wait <em>x</em> frames, and stop playback. <em>Doom</em> for Game Boy Advance uses this for sound effects. It runs all music through the GB-PSG so as to spend more cycles on texture mapping and fewer on the mixer.</div><br />In this particular case, it makes sense to limit the CPU expense on audio mixing. But the vast majority of purely 2D games, they barely use 20% of the CPU at all and limit the CPU usage on audio like crazy, even though most of it is completely free. The only explanation is that they wanted to save battery life, but in all cases the screen would drag more power than the CPU so it wouldn't make a large autonomy difference between overal 20% or 80% CPU usage.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
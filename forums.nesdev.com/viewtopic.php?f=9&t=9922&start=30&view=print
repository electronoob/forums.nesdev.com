<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NES effectively 480p w/ black every other line &amp; 2x bright</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NES effectively 480p w/ black every other line &amp; 2x bright</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9922">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9922</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jarhmander</b> [ Sun Mar 17, 2013 9:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />@HardwareMan: your diagrams cleared some of the misunderstandings of of the NTSC interlaced video. Maybe the literature I was referring to was oversimplified and never noticed that scanlines weren't exactly horizontal. Thanks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TmEE</b> [ Sun Mar 17, 2013 11:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The deflection coils are usually tilted a bit so the lines do appear horizontal to you on the screen...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>HardWareMan</b> [ Sun Mar 17, 2013 1:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">TmEE wrote:</div><div class="quotecontent">The deflection coils are usually tilted a bit so the lines do appear horizontal to you on the screen...</div><br />Indeed. Also, there is a special block in CRT TV (especially for big size) - geometric distortion correction unit. The most common: trapezoid, parallelogram, barrel and pillow:<br /><img src="http://www.pandia.ru/wp-content/uploads/2011/04/wpid-image002_027.gif" alt="Image" /><br />This happens for different reasons, for example different distance from beam source to the screen. So, to correct this visual geometric distortion, some nonlinearity inject to perfect linear signal (usually weak crosstalk between horizontal and vertical deflection signals). So, vertical signal looks like this:<br /><img src="http://www.pandia.ru/wp-content/uploads/2011/04/wpid-image02029.gif" alt="Image" /><br />And horizontal like this:<br /><img src="http://www.pandia.ru/wp-content/uploads/2011/04/wpid-image02129.gif" alt="Image" /><br />Of course, this needed only for CRT TVs, and especially with flat screen (they also need dynamic focus because distance difference is very big).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Sun Mar 17, 2013 3:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">HardWareMan wrote:</div><div class="quotecontent"><div class="quotetitle">blargg wrote:</div><div class="quotecontent">For the SNES, which can do progressive or interlaced based on software control, it is little more than a flag. &quot;If in interlaced mode, every other frame we need to output a special section in the video signal to tell the TV that it's the other field type.&quot;</div><br />There no &quot;special section&quot; in TV signal. Your flag is need only for control software to synchronize to video signal. It's generated by video processing device. TV doesn't require any flag. Analog TV get correct picture by natural method, digital TV - just by count scanlines between VSync signal (with additional postprocessing digital TV has output lag). Result of scanlines counting you can consider as your &quot;flag&quot;.</div><br />You're stuck in concrete thinking. I don't think you can understand what I'm saying.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>HardWareMan</b> [ Sun Mar 17, 2013 8:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">You're stuck in concrete thinking. I don't think you can understand what I'm saying.</div><br />I've re read all this thread again. Especially your posts. Your question is: why digital TVs draws NES picture with deinterlace instead of low res progressive at double framerate. I'm right? If so, TmEE already gave you <a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=9922&amp;start=15#p109514" class="postlink">answer</a>.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Mon Mar 18, 2013 9:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This thread wasn't to ask a question, it was to show that the NES picture isn't properly drawn as if it were a plain 240p signal, rather more like a 480p picture where ever other scanline was black. As I elaborated earlier, this is because it's using a single field that's meant to be interlaced with another whose scanlines are vertically offset by half.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TmEE</b> [ Mon Mar 18, 2013 3:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />But that offset is not happening, there is none of that in the video signal that leaves the NES...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Mar 18, 2013 3:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Again, to make sure I understand what is said so far:<br /><br />An Atari 2600, Odyssey 2, Intellivision, ColecoVision, Apple II, Commodore 64, NES, SMS, and the vast majority of Sega Genesis, Super NES, PlayStation, and N64 games all produce a picture that can be described as 240p. But a monitor focused for 480i displaying a 240p picture will have gaps between the scanlines that are as prominent as those of a monitor focused for 480p displaying a 480p picture where every second line is black. These scanline gaps are essential to the correct look of fifth-generation and older consoles.<br /><br />blargg: Please confirm or deny that I understand what you're saying.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Mon Mar 18, 2013 5:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yes, tepples, that summarizes it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>HardWareMan</b> [ Mon Mar 18, 2013 8:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">This thread wasn't to ask a question, it was to show that the NES picture isn't properly drawn as if it were a plain 240p signal, rather more like a 480p picture where ever other scanline was black. As I elaborated earlier, this is because it's using a single field that's meant to be interlaced with another whose scanlines are vertically offset by half.</div><br />The trick is the kinescope beam draws only 240 visible scanlines for NTSC (288 for PAL). And kinescope shadow mask (with phosphor screen) has own resolution, which much bigger to fit 480i/576i resolution. Yes, each scanline lights several phosphors in height, even with perfect focus. That's true for color TV, BW TV has no concept &quot;resolution&quot; at phosphor screen. Of course this all true for CRT TVs.<br /><br />Next, you say literally: &quot;more like a 480p picture where ever other scanline was black&quot;. Maybe its look like, but it is not. It is 240p picture with gaps between scanlines. This gaps formed because vertical deflection does not make shift between subframes. To force it do it - add one scanline to even or odd subframe. But NES PPU don't do it. So, true 240p picture at 60 FPS  (50 for PAL).<br /><br />According this information, why you consider my previous posts are almost offtopic? If you don't understand how it exactly works and want to discuss it, it's time to learn it up, right? If you're going to know the basics, the question does not arise.<br /><br />Nothing personal, only finding the truth.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Mon Mar 18, 2013 9:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />First off, my focus is on what a person sees on the TV; the technicalities of it are irrelevant regarding the point I was making.<br /><br />My main point is that an SD NTSC TV is basically a 480-scanline display, where half the scanlines are drawn in one field, and the other half the other field. So when the NES displays only half the scanlines every frame and never the other half, it's <em>effectively</em> displaying a 480-scanline image where every other one is black. Now remember, this is about what you see, not what the TV is doing behind the phosphors, or what the NES video signal looks like.<br /><br />Related to that main point is that the image is roughly double the brightness, since each of its scanlines is being refreshed twice as often as scanlines usually are in an image on that display.<br /><br />Both of these are central to emulating a NES. The first explains why you can't just treat it like any old 256x240 image, and the second why we have significant trouble with it coming out too dark when we put black between scanlines, and why the TV has little trouble.<br /><br />Regarding scanline spacing, I was conceding that an interlaced display probably has a slightly fatter beam vertically so that scanlines merge into each other more than they would on a progressive-only display. This weakens my point slightly, because the black space between scanlines is less than it would be on a 480p display with every other line black. The phosphors weren't my consideration, since phosphors can be partially lit anyway (especially on a Trinitron or even the rectangle triad arrangements, as opposed to dots).<br /><br />I re-read the first post in this thread and I see that it comes off as talking of the NES video signal. Sorry for the lack of clarity. I was taking the 240p to be largely the image that appeared, rather than what I take it to mean now and simply the unseen encoding, rather than how that's presented.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Mar 18, 2013 9:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />To simulate the scanline gaps without losing brightness, we have to simulate the beam spreading. Here's the title screen of SMB1 with a very simplistic model of beam spreading. Click the attached image below.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<a href="./download/file.php?id=485&amp;mode=view"><img src="./download/file.php?id=485&amp;t=1" alt="Smb1_title_scanline_spread.png" /></a><br />
			<span class="gensmall">Smb1_title_scanline_spread.png [ 72.24 KiB | Viewed 372 times ]</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>HardWareMan</b> [ Tue Mar 19, 2013 3:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">I was taking the 240p to be largely the image that appeared, rather than what I take it to mean now and simply the unseen encoding, rather than how that's presented.</div><br />OK. You want to get 480p @60 FPS (for PAL @50 FPS)? Because NES can update every subframe independently. I see. For scanline forming you can peep to Pete, who did ePSXe plugins. Hi's did ajustable brightness for gap scanline (in percent of picture scanlines: 100% mean copy scanline, 0% means black). At 50% it looks nice.<br /><br />*update*<br /><br />Actually, CRT beam haven't sharp edges. It has round shape (in ideal focusing), so it produce scanline with gradient vertical luminance. So, to copy this effect you must apply luminance mask (maximum at center an minimum at edges of scanline). And move scanlines a little bit closer to each other.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TmEE</b> [ Wed Mar 20, 2013 5:02 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You need quite large resolution to simulate this, and use variable line height to simulate different kinescope sizes... Beam is round as HardWareMan said and it lights a bigger area as the brightness increases. On a small screen (21&quot; or less) the whites fill up the blank gap entirely and also smudge into neighboring lines. On larger screens the biggest difference that you'll have mostly visible gap regardless of brightness and the gap is very big on lower brightness.<br /><br />When you have a white line that has grey to black gradient in its end it will look pointy not blunt. A grey line with white dots will look like it has bumps on it.<br /><br />I used my TVs vertical stretch/compress feature to &quot;simulate&quot; different screen sizes.<br /><!-- m --><a class="postlink" href="http://www.tmeeco.eu/BitShit/TopGun0.jpg">http://www.tmeeco.eu/BitShit/TopGun0.jpg</a><!-- m --><br /><!-- m --><a class="postlink" href="http://www.tmeeco.eu/BitShit/TopGun1.jpg">http://www.tmeeco.eu/BitShit/TopGun1.jpg</a><!-- m --><br /><!-- m --><a class="postlink" href="http://www.tmeeco.eu/BitShit/TopGun2.jpg">http://www.tmeeco.eu/BitShit/TopGun2.jpg</a><!-- m --><br /><br />Here is same stuff but at lot lower brightness/contrast. You can see how the lines are all more defined.<br /><!-- m --><a class="postlink" href="http://www.tmeeco.eu/BitShit/TopGun3.jpg">http://www.tmeeco.eu/BitShit/TopGun3.jpg</a><!-- m --><br /><!-- m --><a class="postlink" href="http://www.tmeeco.eu/BitShit/TopGun4.jpg">http://www.tmeeco.eu/BitShit/TopGun4.jpg</a><!-- m --><br /><!-- m --><a class="postlink" href="http://www.tmeeco.eu/BitShit/TopGun5.jpg">http://www.tmeeco.eu/BitShit/TopGun5.jpg</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>theclaw</b> [ Fri Mar 22, 2013 2:18 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES effectively 480p w/ black every other line &amp; 2x brig</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">Regarding scanline spacing, I was conceding that an interlaced display probably has a slightly fatter beam vertically so that scanlines merge into each other more than they would on a progressive-only display. This weakens my point slightly, because the black space between scanlines is less than it would be on a 480p display with every other line black. The phosphors weren't my consideration, since phosphors can be partially lit anyway (especially on a Trinitron or even the rectangle triad arrangements, as opposed to dots).</div><br /><br />Certainly it'd be intriguing to see old console video nearer to its native form drawn and output.<br />In that sense I'm somewhat disappointed about how we lack decent quality 240p progressive-only displays.<br /><br />By any stretch, far better is possible than Sega Nomad! (to be fair as a non-technical user I don't know what approach it uses for Sonic 2 in 2-player mode)

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
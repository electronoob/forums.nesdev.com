<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Locking System RAM to certain values DEMO!</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Locking System RAM to certain values DEMO!</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=1252">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=1252</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zack S</b> [ Tue Mar 21, 2006 8:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Locking System RAM to certain values DEMO!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi guys, I don't know if this has been done or not. I'm developing a cheat system that will allow you to control all of the WRAM in the NES. It will enable you to lock any bit or byte in ram to a value you set.
<br />
<br />I whipped up a quick demo board tonight and got it working. The finished product is going to be somewhat different but work the same way. I recorded a quick clip of punch out with it locking the health variables. you can see my health regenerate as Mike beats the living shit out of little mac. And no this is not some pc video. I have this working on the real deal. Would anyone be intrested in this kind of modification to thier NES?
<br />
<br /><!-- m --><a class="postlink" href="http://www.geocities.com/rndlogic/Movie.wmv">http://www.geocities.com/rndlogic/Movie.wmv</a><!-- m -->
<br /><!-- m --><a class="postlink" href="http://www.geocities.com/rndlogic/DSCF1153.JPG">http://www.geocities.com/rndlogic/DSCF1153.JPG</a><!-- m -->
<br /><!-- m --><a class="postlink" href="http://www.geocities.com/rndlogic/DSCF1155.JPG">http://www.geocities.com/rndlogic/DSCF1155.JPG</a><!-- m -->
<br /><!-- m --><a class="postlink" href="http://www.geocities.com/rndlogic/DSCF1158.JPG">http://www.geocities.com/rndlogic/DSCF1158.JPG</a><!-- m -->
<br /><!-- m --><a class="postlink" href="http://www.geocities.com/rndlogic/DSCF1166.JPG">http://www.geocities.com/rndlogic/DSCF1166.JPG</a><!-- m -->
<br />
<br />More pics to come when I have more time. For now Enjoy theese.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>pragma</b> [ Tue Mar 21, 2006 8:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Zack, it looks like your geocities site tanked.  Might I reccomend hosting those images on flickr or imageshack instead? <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccovell</b> [ Tue Mar 21, 2006 9:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's interesting, but something similar already exists in the form of the Action Replay, both for (European) NES and Japanese Famicom.  But, good luck on your project!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zack S</b> [ Wed Mar 22, 2006 5:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I reposted the photos here:
<br /><!-- m --><a class="postlink" href="http://img384.imageshack.us/img384/7492/dscf11539zi.jpg">http://img384.imageshack.us/img384/7492/dscf11539zi.jpg</a><!-- m -->
<br /><!-- m --><a class="postlink" href="http://img135.imageshack.us/img135/6146/dscf11557zz.jpg">http://img135.imageshack.us/img135/6146/dscf11557zz.jpg</a><!-- m -->
<br /><!-- m --><a class="postlink" href="http://img135.imageshack.us/img135/5416/dscf11584yi.jpg">http://img135.imageshack.us/img135/5416/dscf11584yi.jpg</a><!-- m -->
<br /><!-- m --><a class="postlink" href="http://img135.imageshack.us/img135/5825/dscf11669bm.jpg">http://img135.imageshack.us/img135/5825/dscf11669bm.jpg</a><!-- m -->
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It's interesting, but something similar already exists in the form of the Action Replay, both for (European) NES and Japanese Famicom. But, good luck on your project!</div>
<br />
<br />I couldn't find much info on what it actually does. I don't see how an attachment would be able to change RAM values though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>pragma</b> [ Wed Mar 22, 2006 6:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I couldn't find much info on what it actually does. I don't see how an attachment would be able to change RAM values though.</div>
<br />
<br />Well, I'm no EE, but there might be a hack-ish way to override what the WRAM outputs via the cartridge if you eavesdrop on the address bus - do the address lines to the PRG RAM also reflect what's happening inside the NES as well?  Say if I write a whole bunch of stuff to the zero-page, would those address bits show up on the A0-A15 lines?  Maybe that's what the "action replay" does. ::shrug::
<br />
<br />Anyway, I see what you're doing.  Its kind of like a ROMulator only for RAM, so it has some very serious dev-platform potential. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zack S</b> [ Thu Mar 23, 2006 2:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">pragma wrote:</div><div class="quotecontent">Well, I'm no EE, but there might be a hack-ish way to override what the WRAM outputs via the cartridge if you eavesdrop on the address bus - do the address lines to the PRG RAM also reflect what's happening inside the NES as well?  Say if I write a whole bunch of stuff to the zero-page, would those address bits show up on the A0-A15 lines?  Maybe that's what the "action replay" does. ::shrug::</div>
<br />
<br />I'm not an EE yet but I'm working on it. All the address lines are shared, however the cart has no way to access the Output Enable Pin on the RAM. So if tried to put it's own values on the data bus I would think it would cause bus contention and possibly damage some of the circut.
<br />
<br />I read somewhere that it would allow you to save the game anywhere. That could be done by running it's own code and using the 6502 to transfer data in and out of the RAM. I don't think this method would work in real time though because it would add extra CPU cycles.
<br />
<br />Glad to see you think it has Dev-platform potential. As soon as I get a programmable one that is universal I will start to add info on it to the Wiki. When I get back to the U.S. I might try to develop a PCB that will fit  inside the NES console.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dvdmth</b> [ Thu Mar 23, 2006 1:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The way Pro Action Replay works is by hijacking the NMI routine.  It has special RAM at $5000 in which a special NMI handler is placed.  The handler simply writes five values to different RAM addresses (set up by the codes inserted), then executes JMP ($FFFA).  Apparently the hardware is detecting an NMI interrupt and giving the NES the address $500C (that's where the code is placed) instead of the value in the attached ROM.
<br />
<br />Obviously, this won't work with all games, including MMC5 games that use $5xxx addresses for registers, as well as any game that performs cycle-timed operations from NMI or that need the entire VBlank time for VRAM updating.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zack S</b> [ Thu Mar 23, 2006 2:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's great to know dvdmth. I was wondering if my project was duplicating something that already existed, but with what you wrote I can see that's definitely not the case. My device will work with all games because it is invisible to the rest of the system. 
<br />
<br />Hijacking the NMI routine has some serious drawbacks. You can't control variables that are changed inside the NMI. When you consider that most of the game code is inside the NMI routine, it's very limiting. I don't see the PAR being much more useful than a game genie.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Mar 23, 2006 3:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Zack S wrote:</div><div class="quotecontent">I don't see the PAR being much more useful than a game genie.</div>
<br />It is if one method is patented and the other isn't.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>ccovell</b> [ Sat Mar 25, 2006 4:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Zack S wrote:</div><div class="quotecontent">Hijacking the NMI routine has some serious drawbacks. You can't control variables that are changed inside the NMI. When you consider that most of the game code is inside the NMI routine, it's very limiting. I don't see the PAR being much more useful than a game genie.</div>
<br />
<br />Considering most variables that we want to affect are things like lives left, money, life, etc., the PAR is very useful.  These variables are kept from NMI to NMI.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Space Race</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Space Race</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=32&amp;t=14683">http://forums.nesdev.com/viewtopic.php?f=32&amp;t=14683</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Tue Feb 21, 2017 2:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for the feedback!<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Rules are not explicitly stated: as I read the blurb I do not know if it is hard to figure out<br /></div><br /><br />Yeah, that's what one of my local playtesters said.  I haven't figured out the best solution yet (a wall of text won't help. Maybe an animated example at the beginning would have been better)<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It is not clear that 1-player mode exists: the title screen says 2-4 players and nothing blinks when adding the first to say that it can be started</div><br />You're right. The 1-player mode was a last-minute addition.  I should have made it more clear.<br /><br />I appreciate your thoughts!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Fri Feb 24, 2017 8:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I noticed in a hex editor that you used 18K of the 32K PRG ROM, and there's a whole bunch of repetitive stuff elsewhere in PRG ROM. Is there a way you could trim 2K off to fit in NROM-128?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Fri Feb 24, 2017 9:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'll see what I can do.<br /><br />Some quick spot checks and counting show me a few hundred bytes I can easily shave off by removing redundancy.  2k might be tricky though unless I cut a song, unless I'm missing an obvious chunk.  I'll look further.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Tue Mar 07, 2017 9:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Updated version that (I hope) properly clears nametables at the beginning.  I'm in the middle of a move to a new home, so I haven't had a chance to test this as well as I'd like....

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=8261">spaceyMcRacey.nes</a> [40.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 55 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JRoatch</b> [ Mon Apr 03, 2017 10:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So this is really bizarre and I can't even begin to imagine what the bug is.<br />When I play this on fceux, there's background music.<br />When I play this on console via Power Pak, there's no background music, but yet there is sound effects!<br /><br />Usually the only differences I ever see between emulator and console are scrolling jitters and corrupted palettes and tiles due to writing to an active PPU outside of vblank.<br />But in this case, an entire chunk of logic is somehow skipped over, and without affecting game play.<br /><br />The game uses &quot;Main thread only&quot; with NMI just incrementing a flag, this also uses a sprite zero hit scroll split.<br /><br />if I wanted to debug this, how I should begin?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Mon Apr 03, 2017 10:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JRoatch wrote:</div><div class="quotecontent">So this is really bizarre and I can't even begin to imagine what the bug is.<br />When I play this on fceux, there's background music.<br />When I play this on console via Power Pak, there's no background music, but yet there is sound effects!<br /><br />Usually the only differences I ever see between emulator and console are scrolling jitters and corrupted palettes and tiles due to writing to an active PPU outside of vblank.<br />But in this case, an entire chunk of logic is somehow skipped over, and without affecting game play.<br /><br />The game uses &quot;Main thread only&quot; with NMI just incrementing a flag, this also uses a sprite zero hit scroll split.<br /><br />if I wanted to debug this, how I should begin?</div><br />Using FCEUX's &quot;Config &gt; Ram Init&quot; option, I find if I initialize RAM to $00 the BGM plays, if I initialize to $FF it does not.<br /><br />I don't know if there's much to debug beyond that, but basically this ROM does not appear to initialize most of RAM, aside from wiping its OAM upload page at $0200, and also clearing ZP. Thus, many variables end up being used before having been set to any specific value.<br /><br />(I personally like to leave FCEUX's RAM Init option set to &quot;random&quot;, and <a href="https://forums.nesdev.com/viewtopic.php?p=187043#p187043" class="postlink">strongly recommend</a> initializing as much of RAM as is practical at startup.)<br /><br />Edit: I just realized the &quot;Ram init&quot; option is not in 2.2.3, it's only in more recent interim builds: <a href="http://www.fceux.com/web/download.html" class="postlink">download page</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Tue Apr 04, 2017 2:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">When I play this on console via Power Pak, there's no background music, but yet there is sound effects!</div><br />Ugh, I've spent the last few evenings trying to get my new PowerPak to work.  I've been through 2 different CF cards and 3 different computers, but it can never get past &quot;loading game&quot;....so I've never tested it on real hardware yet <img src="./images/smilies/icon_sad.gif" alt=":-(" title="Sad" /><br /><br /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent"> basically this ROM does not appear to initialize most of RAM, aside from wiping its OAM upload page at $0200, and also clearing ZP. Thus, many variables end up being used before having been set to any specific value.<br /></div><br /><br />Good catch, thanks Rainwarrior.  I tended to initialize variables in subsystem-specific init routines, but never did a full wipe of RAM, which I guess means I missed some memory needed by the music engine.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">(I personally like to leave FCEUX's RAM Init option set to &quot;random&quot;, and strongly recommend initializing as much of RAM as is practical at startup.)</div><br /><br />Yeah, I guess I need to do that. Thanks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Tue Apr 04, 2017 2:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Attached is a new version where I attempt to clear ram.   I'll try on my powerpak in 2 days when the new CF card I ordered shows up.   JRoatch, if you happen to try it before then, let me know.<br /><br />Thanks for catching that bug.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=8517">spaceyMcRacey.nes</a> [40.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 45 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JRoatch</b> [ Tue Apr 04, 2017 5:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">I find if I initialize RAM to $00 the BGM plays, if I initialize to $FF it does not.</div><br />It would be this, I'm embarrassed that I didn't try this. <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> Thank you.<br /><br /><div class="quotetitle">gauauu wrote:</div><div class="quotecontent">Attached is a new version where I attempt to clear ram.   I'll try on my powerpak in 2 days when the new CF card I ordered shows up.   JRoatch, if you happen to try it before then, let me know.<br /><br />Thanks for catching that bug.</div><br />I'm not sure if anything changed in this. It still does not initialize $0300-$07ff and behaves the same as before.<br /><br />I've made a simple IPS patch that will fix is by initializing RAM.<br /><br />patch source:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;; compile IPS patch with asm6<br />.byte &quot;PATCH&quot;<br /><br />.byte $00, $80-$80, $2a+$10<br />.byte $00, __802a_end-__802a<br /><br />.base $802a<br />__802a:<br />&nbsp; ;; originaly<br />&nbsp; ; sta $00,x<br />&nbsp; ; inx<br />&nbsp; ; bne __802a<br />&nbsp; jmp __c750<br />&nbsp; nop<br />&nbsp; nop<br />__802a_end:<br /><br />.byte $00, $c7-$80, $50+$10<br />.byte $00, __c750_end-__c750<br /><br />.base $c750<br />__c750:<br />&nbsp; &nbsp; sta $00,x<br />&nbsp; &nbsp; sta $0100,x<br />&nbsp; &nbsp; ;sta $0200,x ; no OAM clear<br />&nbsp; &nbsp; sta $0300,x<br />&nbsp; &nbsp; sta $0400,x<br />&nbsp; &nbsp; sta $0500,x<br />&nbsp; &nbsp; sta $0600,x<br />&nbsp; &nbsp; sta $0700,x<br />&nbsp; &nbsp; inx<br />&nbsp; bne __c750<br />&nbsp; jmp __802a_end<br />__c750_end:<br /><br />.byte &quot;EOF&quot;</div>

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=8519">2017-04-04_RAM-init-patch.ips</a> [49 Bytes]
			</span><br />
			<span class="gensmall">Downloaded 41 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Tue Apr 04, 2017 7:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Now that I'm off work, I can take a look tonight.  I added code to do just what your patch did. Maybe somehow I uploaded an old version. Thanks for your help and I'll take a look further here.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Tue Apr 04, 2017 8:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Derp, I'm a moron.  I had a stupid off-by-one bug in my clear loop that made it exit after the first time through.  New version attached.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=8525">spaceyMcRacey.nes</a> [40.02 KiB]
			</span><br />
			<span class="gensmall">Downloaded 45 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Wed Apr 05, 2017 8:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">gauauu wrote:</div><div class="quotecontent">Ugh, I've spent the last few evenings trying to get my new PowerPak to work.  I've been through 2 different CF cards and 3 different computers, but it can never get past &quot;loading game&quot;....so I've never tested it on real hardware yet <img src="./images/smilies/icon_sad.gif" alt=":-(" title="Sad" /></div><br />If the file menu shows up, I'd expect the CF card to work as well. Make sure some other problem is not causing the loading to fail (like missing mapper files).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Wed Apr 05, 2017 9:15 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">thefox wrote:</div><div class="quotecontent"><div class="quotetitle">gauauu wrote:</div><div class="quotecontent">Ugh, I've spent the last few evenings trying to get my new PowerPak to work.  I've been through 2 different CF cards and 3 different computers, but it can never get past &quot;loading game&quot;....so I've never tested it on real hardware yet <img src="./images/smilies/icon_sad.gif" alt=":-(" title="Sad" /></div><br />If the file menu shows up, I'd expect the CF card to work as well. Make sure some other problem is not causing the loading to fail (like missing mapper files).</div><br /><br />Yeah, I tried a few times to reformat the card, re-download and extract the POWERPAK directory (tried both 1.34 and 1.20), and then launch the demo nes rom included in that directory (as well as other rom images). Same issue.  Both CF cards were ancient tiny cards, so I've ordered a new one which should arrive tomorrow. We'll see if that makes a difference.... <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Apr 05, 2017 9:16 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />How tiny were they? If at least 120 MB, you could try reformatting them as FAT16 instead of FAT12.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Wed Apr 05, 2017 2:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Space Race</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />32MB  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
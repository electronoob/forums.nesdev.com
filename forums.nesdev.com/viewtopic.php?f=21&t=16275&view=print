<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NES emulator with 480i 30fps support?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NES emulator with 480i 30fps support?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=21&amp;t=16275">http://forums.nesdev.com/viewtopic.php?f=21&amp;t=16275</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sat Jul 29, 2017 9:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Maybe this will seem like a weird thing to want, because it's such a terrible way to represent the signal that should be 240p 60fps, but since it's such a common mode for modern TVs with an NES hooked up, it might actually be really useful for testing purposes, just to see what it's going to look like on a lot of TVs! (Should have NTSC filter in addition to the interlacing and framerate decimation... maybe even with a stupid 16:9 stretch option ha ha.)<br /><br />So... my question is: does this exist in any current emulators? Would anyone else want to have it emulated for testing? (Or for other reasons?)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Jul 29, 2017 10:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'd be interested in such a feature too, since, like you said, a lot of people will be playing NES games this way. That being said, I can't help feeling sad because of how bad of a job most of today's TVs do when displaying 240p content.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sat Jul 29, 2017 10:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just to be briefly pedantic ... A deinterlacer will still generate 60fps output.<br /><br />Obviously, it's no good for trying it out in real time, but one should be able to take a rendered video and use one of mplayer's deinterlacers to try it out. I don't know if there's a plain &quot;weave&quot; deinterlacer trivially available, though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Jul 30, 2017 12:23 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Just to be briefly pedantic ... A deinterlacer will still generate 60fps output.<br /><br />Obviously, it's no good for trying it out in real time, but one should be able to take a rendered video and use one of mplayer's deinterlacers to try it out. I don't know if there's a plain &quot;weave&quot; deinterlacer trivially available, though.</div><br />I'm confused by this... aren't we trying to <em>interlace</em> here, not <em>de-interlace</em>?<br /><br />I'm not familiar with mplayer, but the idea to capture video and interlace it is one that's pretty do-able with existing tools, at least, so I think that's a good suggestion.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Jul 30, 2017 12:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You're trying to take the 240p signal from the emulated NES, pretend it's 480i, and display that as though it went through the deinterlacer in the television... right?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Jul 30, 2017 12:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What do you mean by de-interlacer in the television?<br /><br />The result I get/want is an 30fps image of 480 lines, which is a line-alternating combination of the last two frames from the NES. Is this not called &quot;interlacing&quot;?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Jul 30, 2017 1:02 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Uh...<br /><br />Ok, NES produces video: call scanlines 0,1,2,3,4,5 &amp;c.<br /><br />Pretend they're interlaced:<br />On one vsync, renumber those scanlines 0,2,4,6,8,10 &amp;c. This is now the &quot;even&quot; field.<br />On the other vsync, renumber those scanlines 1,3,5,7,9,11 &amp;c. This is now the &quot;odd&quot; field.<br />Alternate between the two thereafter.<br /><br />The video is now interlaced (by just playing funny games with naming, not even any math yet), but not displayable. A modern LCD TV has to convert interlaced video into a progressive format to show it.<br /><br />TV includes a deinterlacer to produce a progressive image out of these two fields. This can be the &quot;stereotypical interlaced view&quot; which is the result of a <a href="https://guru.multimedia.cx/deinterlacing-filters/" class="postlink">&quot;weave&quot; deinterlacer.</a> (A &quot;weave&quot; deinterlacer produces 60fps progressive video from 60fps interlaced video by taking the scanlines from every adjacent pair of fields, and splicing the two fields together. 0a 1b 2a 3b ... then 0c 1b 2c 3b ... then 0c 1d 2c 4d &amp;c)<br /><br />... does that help?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>NewRisingSun</b> [ Sun Jul 30, 2017 1:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The only accurate way of displaying 60i on 60p that does not require guessing picture data out of thin air is the 'Bob' method. It means displaying each field's line twice, but shifted by one target-resolution line:<br /><br />Displaying the first field's lines on target display:<br />Output line 0: Source line 0<br />Output line 1: Source line 0<br />Output line 2: Source line 1<br />Output line 3: Source line 1<br />Output line 4: Source line 2<br />Output line 5: Source line 2<br /><br />Displaying the second field's lines on target display:<br />Output line 0: Empty line<br />Output line 1: Source line 0<br />Output line 2: Source line 0<br />Output line 3: Source line 1<br />Output line 4: Source line 1<br />Output line 5: Source line 2<br />Output line 6: Source line 2<br /><br />This displays a 60i image as a CRT TV would: Stable large areas and flickering single-line detail and smooth motion. (Forget BS descriptions about Bob &quot;losing you half the picture detail&quot;, because the loss of half the picture detail occurred when the interlaced image was created, not by the deinterlacing algorithm.)<br /><br />Pretending that a 240p source like the NES is a 480i source would basically mean displaying each of the 240 lines twice (yielding 480 lines), but shifting each second field by one target line.<br /><br />Consider these example videos:<br /><a href="http://symphoniae.com/nrs/nesdev/NES-240p.avi" class="postlink">Original 240p video</a><br /><a href="http://symphoniae.com/nrs/nesdev/NES-480i.avi" class="postlink">Pretending that the 240p video is a 480i video</a><br /><a href="http://symphoniae.com/nrs/nesdev/NES-480p-Bob.avi" class="postlink">Deinterleaving that 480i video using the Bob algorithm</a><br /><br />For illustration, consider the following three videos of a true 480i source:<br /><a href="http://symphoniae.com/nrs/nesdev/CD32-480i.avi" class="postlink">Original 480i video</a><br /><a href="http://symphoniae.com/nrs/nesdev/CD32-240p.avi" class="postlink">Prentending that the 480i video is a 240p video</a><br /><a href="http://symphoniae.com/nrs/nesdev/CD32-480p.avi" class="postlink">Deinterleaving that 480i video using the Bob algorithm</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun Jul 30, 2017 3:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />My $2<br /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">maybe even with a stupid 16:9 stretch option ha ha.</div><br />Unfortunately, many emus already have this in option and sometimes it not even an option if you hook up a 16:9 monitor to your PC. I'm fairly sure SNES9x stretches the image full screen no matter the aspect ratio when told to use &quot;full-screen mode&quot;, and for ePSXe, I had to try up hundreds of options to FINALLY have it not stretching the picture to 16:9, and the fact you should change the setting, save the setting, close the emu, re-open the emu and load a game every time doesn't help to make it user-friendly.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Jul 30, 2017 11:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">... does that help?</div><br />My question was why &quot;a deinterlacer will still generate 60fps output&quot; was a pedantic clarification you had to make, because I thought I had described interlacing and not de-interlacing.<br /><br />So... most of that description wasn't necessary, but what I will gather is that in the TV processing domain my concept of &quot;interlace&quot; and &quot;deinterlace&quot; are inverted or conflated, and that's fine I guess but it made me very confused about why you brought up deinterlacing.<br /><br /><br />Take two 240-line images (60fps), and weave them together into one 480-line image (30fps). This is the target image that I created this thread for. I hope that much was clear.<br /><br /><br />In virtualdub this image process is accomplished by an &quot;interlace&quot; filter. The reverse is accomplished by a &quot;deinterlace&quot; filter. In VLC player there is similarly a set of &quot;deinterlace&quot; filters, but no &quot;interlace&quot; filter that can weave two frames into one (which nobody would want, normally, same with what I'm asking for in an emulator). That's the terminology I'm used to, an image combination operation and its inverse.<br /><br />Importantly VLC does not have a &quot;weave&quot; option in its deinterlace menu, because that's just the automatic first step in building the image. Its deinterlace menu is options for <em>undoing</em> the weave in a more visually appropriate/appealing way, and this how I'm used to these words.<br /><br /><br />I understand that the video signal going to the TV is two progressive frames, and that the TV's 480i input reinterprets this but doesn't change the source signal (obviously it can't change the source). So okay, I can accept that how the TV weaves those two fields is called &quot;deinterlacing&quot; in that domain, but what it ends up <em>displaying</em> is a 30fps picture that is visually an <s>interlacing</s>weaving of pairs of frames.<br /><br />So, sure I get it, with TV signals it's all &quot;deinterlacing&quot;? The application of &quot;interlaced&quot; to the input signal is only a description of how to interpret it, and &quot;deinterlacing&quot; is the process of decoding it into an image, and they're not two opposite directions of a reversible process. (And &quot;deinterlace&quot; here could additionally use any of those fancier methods like what VLC has in its deinterlace menu.) Have I got this right?<br /><br /><br />Anyhow, that's how I was using those terms, and how I think you're using them, if that clarifies why I was confused.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Jul 30, 2017 11:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">NewRisingSun wrote:</div><div class="quotecontent">Pretending that a 240p source like the NES is a 480i source would basically mean displaying each of the 240 lines twice (yielding 480 lines), but shifting each second field by one target line.</div><br />Yes that's exactly what I'd want to be able to simulate in an emulator.<br /><br />I suppose we could even do it with an option to select a deinterlace filter... but I'm used to commonly seeing just a simple &quot;weave&quot; on LCD TVs I've connected 240p composite to. Ha ha I feel like this concept is almost approaching &quot;CRT curavture filter&quot; levels of weird textural simulation.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Jul 30, 2017 11:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Overexplaining things I think you already know:<br />* The process of interlacing video is taking a source image and drawing only even or odd scanlines each vsync and alternating which each vsync. Hence PAL 576i, NTSC 480i, CRT 1024x768-85i, all of these only transmit half the data each vblank.<br />* When a capture card is used on an SDTV source, there's two different ways of storing it. They could just store the literal fields, effectively 240p/288p, and add a separate bit to specify whether each field is even or odd. (MPEG1 does mention this). Or, they can halve the frame rate, use a cheap &quot;weave&quot; deinterlacer to combine each subsequent pair of fields into a frame and halve the framerate.<br /><br /><em>But that's not what the TV does when it's fed an interlaced source.</em><br /><br />The TV <em>has</em> to redraw at 60fps regardless. The process of deinterlacing does not intrinsically halve the resulting frame rate.<br /><br />One <em>could</em> take the 480i60 source; deinterlace it (which produces 480p60); throw away (really, fail to calculate) half the resulting frames producing a 480p30 source; and then use a 1:2 pulldown to create 480p60 from that...<br /><br />I'm really pretty certain that the TV recalculates the &quot;weave&quot; for every 60hz redraw, not just every other.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Sun Jul 30, 2017 11:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">I'm really pretty certain that the TV recalculates the &quot;weave&quot; for every 60hz redraw, not just every other.</div><br />Well, it very well could be, but the result is still a 30fps display, and whether the TV is doing redundant work doesn't really affect that? What about 120hz TVs?<br /><br />Or... are you talking about a TV that does output a picture that changes at 60fps by alternatingly updating the even and odd lines? (I don't believe I've ever encountered that in an LCD TV.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sun Jul 30, 2017 12:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I get the impression that what my TV shows with 240p sources is just 30fps. I see one source frame occupying even scanlines, and another source frame occupying odd scanlines. If a sprite flickers, I get alternating scanlines with and without the sprite, with no visible changes from one target frame to the next.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Jul 30, 2017 12:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: NES emulator with 480i 30fps support?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What Brad wants is to take the 240p60 output of the emulated PPU, pretend it's field-based 480i60, and apply any of various deinterlacing filter chains to that. <a href="https://avisynth.org.ru/yadif/yadif.html" class="postlink">Yadif</a>, for example, may approximate the processing that an HDTV applies to interpolate the contents of a field from the previous, current, and next fields, while a plain old bob simulates running the video through a DVD recorder to a CRT SDTV.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=12315" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2015-02-22T15:48:41-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=12315</id>
<entry>
<author><name><![CDATA[jonyzz]]></name></author>
<updated>2015-02-22T15:48:41-07:00</updated>
<published>2015-02-22T15:48:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=141773#p141773</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=141773#p141773"/>
<title type="html"><![CDATA[Re: cfxnes (another browser-based emulator)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=141773#p141773"><![CDATA[
Another update:<br />- fixed PPU scrolling implementation (games like Slalom or F-1 Race are now properly rendered)<br />- fixed VBlank/NMI timing (emulator passes ppu_vbl_nmi test)<br />- popping sounds should be now reduced (the cause was audio buffer overflow)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6873">jonyzz</a> — Sun Feb 22, 2015 3:48 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jonyzz]]></name></author>
<updated>2015-02-15T16:40:37-07:00</updated>
<published>2015-02-15T16:40:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=141276#p141276</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=141276#p141276"/>
<title type="html"><![CDATA[Re: cfxnes (another browser-based emulator)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=141276#p141276"><![CDATA[
Minor update:<br />- all CPU opcodes are implemented (emulator passes Blargg's instr_test and instr_timing tests)<br />- better PPU timing - the first level of Battletoads is now playable (the game freezes in the second level, though)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6873">jonyzz</a> — Sun Feb 15, 2015 4:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jonyzz]]></name></author>
<updated>2015-01-31T18:20:22-07:00</updated>
<published>2015-01-31T18:20:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140295#p140295</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140295#p140295"/>
<title type="html"><![CDATA[Re: cfxnes (another browser-based emulator)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140295#p140295"><![CDATA[
<div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Grapeshot wrote:</div><div class="quotecontent">-Driar (homebrew game) doesn't work probably due to lack of support for undocumented CPU opcodes<br /></div>Driar (both original SGROM and my NROM) use $8F (SAX), $B3 (LAX), and $CB (AXS). The NROM build additionally requires that RAM exist from $800-$895 (although it doesn't require that RAM be mirrored)</div><br /><br />I've implemented AXS and Driar is now finally working. Thanks.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6873">jonyzz</a> — Sat Jan 31, 2015 6:20 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2015-01-31T14:24:48-07:00</updated>
<published>2015-01-31T14:24:48-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140259#p140259</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140259#p140259"/>
<title type="html"><![CDATA[Re: cfxnes (another browser-based emulator)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140259#p140259"><![CDATA[
<div class="quotetitle">Grapeshot wrote:</div><div class="quotecontent"><br />-Driar (homebrew game) doesn't work probably due to lack of support for undocumented CPU opcodes<br /></div>Driar (both original SGROM and my NROM) use $8F (SAX), $B3 (LAX), and $CB (AXS). The NROM build additionally requires that RAM exist from $800-$895 (although it doesn't require that RAM be mirrored)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Sat Jan 31, 2015 2:24 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jonyzz]]></name></author>
<updated>2015-01-31T08:19:52-07:00</updated>
<published>2015-01-31T08:19:52-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140229#p140229</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140229#p140229"/>
<title type="html"><![CDATA[Re: cfxnes (another browser-based emulator)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140229#p140229"><![CDATA[
<div class="quotetitle">Grapeshot wrote:</div><div class="quotecontent"><br />-Driar (homebrew game) doesn't work probably due to lack of support for undocumented CPU opcodes<br /></div><br />I implemented some of them, but not all.<br /><br /><div class="quotetitle">Grapeshot wrote:</div><div class="quotecontent"><br />-Slalom has lines that are displaced suggesting that you're using a PPU design that draws a whole line at a time. Sadly there's no way to deal with all the raster effects that the NES can do using a line at a time renderer.<br /></div><br />I'm actually using per-pixel rendering. I suspect there's a bug in my PPU scrolling implementation.<br /><br /><div class="quotetitle">Grapeshot wrote:</div><div class="quotecontent"><br />Turning off the triangle wave should leave it outputting its current value instead of resetting it to zero (this is the cause of a lot of popping sounds)<br /></div><br />You're right, that reduced the popping. However, I can still hear it. There must be something else I'm missing.<br /><br /><div class="quotetitle">Grapeshot wrote:</div><div class="quotecontent"><br />Similarly, changing the fine period or duty cycle on the square waves should not reset them. Changing the coarse period should reset the counters though.<br /></div><br />I'm only reseting the duty cycle and envelope during write to $4003/$4007.<br /><br /><div class="quotetitle">Grapeshot wrote:</div><div class="quotecontent"><br />Higher pitches are increasingly flat. Is there an off by one error on the counters for the square waves?<br /></div><br />I checked it and it seems to me it's right:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if --timerCycle &lt;= 0<br />    # Duty period is 2 * 8 * (timerPeriod + 1) APU cycles<br />    timerCycle = (timerPeriod + 1) &lt;&lt; 1<br />    dutyPosition = (dutyPosition + 1) &amp; 0x7<br /></div><br /><br /><div class="quotetitle">Grapeshot wrote:</div><div class="quotecontent"><br />Resizing the window causes the audio pitch to change too. I know you're probably trying to compensate for framerate drops but it sounds terrible and takes a while to recover. You should run the APU for more cycles to fill the buffer instead.<br /></div><br />You're right. I'm adjusting sampling rate to prevent audio buffer underflow/overflow and it's causing these transitions when framerate changes.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6873">jonyzz</a> — Sat Jan 31, 2015 8:19 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Grapeshot]]></name></author>
<updated>2015-01-30T19:25:43-07:00</updated>
<published>2015-01-30T19:25:43-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140192#p140192</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140192#p140192"/>
<title type="html"><![CDATA[Re: cfxnes (another browser-based emulator)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140192#p140192"><![CDATA[
Running my usual list of test games:<br />-Battletoads freezes after the intro. (That game is extremely timing sensitive.)<br />-Break Time doesn't work at all (probably this is due to a mistimed APU Frame IRQ or not waiting a frame before starting to set the PPU VBlank interrupt)<br />-Driar (homebrew game) doesn't work probably due to lack of support for undocumented CPU opcodes<br />-Slalom has lines that are displaced suggesting that you're using a PPU design that draws a whole line at a time. Sadly there's no way to deal with all the raster effects that the NES can do using a line at a time renderer.<br />-Shadow of the Ninja doesn't work<br /><br />Turning off the triangle wave should leave it outputting its current value instead of resetting it to zero (this is the cause of a lot of popping sounds)<br />Similarly, changing the fine period or duty cycle on the square waves should not reset them. Changing the coarse period should reset the counters though.  <br />Higher pitches are increasingly flat. Is there an off by one error on the counters for the square waves?<br />Resizing the window causes the audio pitch to change too. I know you're probably trying to compensate for framerate drops but it sounds terrible and takes a while to recover. You should run the APU for more cycles to fill the buffer instead.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4844">Grapeshot</a> — Fri Jan 30, 2015 7:25 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jonyzz]]></name></author>
<updated>2015-01-30T13:43:06-07:00</updated>
<published>2015-01-30T13:43:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140169#p140169</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140169#p140169"/>
<title type="html"><![CDATA[cfxnes (another browser-based emulator)]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=12315&amp;p=140169#p140169"><![CDATA[
Hi, cfxnes is an emulator I've been working on for some time. It's written in CoffeeScript and it currently supports the following:<br /><ul><li> nrom, unrom, cnrom, aorom, mmc1, mmc3 mappers (though there are some games that are still not working, like Super Mario Bros. 3).</li><li> Rendering using WebGL (with fallback to HTML canvas rendering).</li><li> Sound emulation using Web Audio.</li><li> Configurable controls.</li><li> Zapper.</li></ul><br />Known issues:<br /><ul><li> Low performance. I guess you'll need at least 2 GHz CPU. Using Chrome is strongly recommended, but Firefox should be also working.</li><li> Graphical glitches in some games (F-1 Race, Flintstones and some others). I'm currently trying fix this using PPU test ROMs.</li><li> Sound is a little bit rough.</li></ul><br />The emulator is running at <a href="http://cfxnes.herokuapp.com" class="postlink">http://cfxnes.herokuapp.com</a>, source code can be found here <a href="https://github.com/jpikl/cfxnes" class="postlink">https://github.com/jpikl/cfxnes</a>.<br /><br />Any comments are welcome. Thanks.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6873">jonyzz</a> — Fri Jan 30, 2015 1:43 pm</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-ROM</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-ROM</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=8808">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=8808</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>11</strong> of <strong>14</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Feb 17, 2014 3:33 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The thing is, once you start adding novel hardware—and yes, the YM2143 counts as novel hardware, even though it's similar to the VRC7—there's no reason to constrain what you add at all. Maybe it's a VRC7 clone ... that only outputs 50% duty square waves. Or maybe it's a VRC7 clone ... that actually is an OPL3. Or maybe it's a TV tuner that does its best to convert its input to the NES's constrained palette.<br /><br />Once enough people have a hardware &quot;just kidding, it's not actually a VRC7&quot; you'd have to add support for it in emulators. (There was a fuss made when FamiTracker updated its VRC7 patchset to newer, more accurate values.) And once you've added support for an arbitrarily new peripheral that was never used before, you may as well have aimed for something a bit more sophisticated. It's not like any of the sound synthesizer ICs ever manufactured are available as anything but Working Pull and New Old Stock anymore.<br /><br /><br />Anyway, asking the internet, a person who goes by fadis_ on twitter wrote an <a href="https://github.com/Fadis/TinyFM" class="postlink">FM library for the mbed</a> (<a href="http://www.youtube.com/watch?v=rx5Tqw0EYBM" class="postlink">youtube</a>). Looks like it's only fast enough for 16 operators ... but the VRC7 should only need 12.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yogi</b> [ Mon Feb 17, 2014 5:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">The thing is, once you start adding novel hardware—and yes, the YM2143 counts as novel hardware, even though it's similar to the VRC7—there's no reason to constrain what you add at all. Maybe it's a VRC7 clone ... that only outputs 50% duty square waves. Or maybe it's a VRC7 clone ... that actually is an OPL3. Or maybe it's a TV tuner that does its best to convert its input to the NES's constrained palette. </div><br /> Point taken. I do enjoy the 'retro' HW but I also embrace a modding POV. These are the same currents within the Atari 8bit community, so I can appreciate the resistance to innovation. But I truly feel that the OPLL isn't too strange from a HW point. If no one else ever does this hack that is fine with me. <br />  But most people will never have access to a Lagrange Point cart and the best we can hoped for is a clone or PowerPak emu. Of my options this seems like a good compromise.<br /> <div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> Once enough people have a hardware &quot;just kidding, it's not actually a VRC7&quot; you'd have to add support for it in emulators. (There was a fuss made when FamiTracker updated its VRC7 patchset to newer, more accurate values.) And once you've added support for an arbitrarily new peripheral that was never used before, you may as well have aimed for something a bit more sophisticated. It's not like any of the sound synthesizer ICs ever manufactured are available as anything but Working Pull and New Old Stock anymore. </div><br /> Well, just seems to me that many of the commercially produced mappers fell into the &quot;arbitrarily new peripheral that was never used before&quot; catagory, back in the day.<br />  True that a better, more advanced chip could be used, but where is the NES support for them (never mind that there are no 'new' synth/tone chips, just DACs and DSP). Would be starting from scratch; may be worth it in the long run. But with a YM hack there is already a lot of common ground. 'Similar' is fine for me ATM; I've plenty of long term projects (my MidiBoxFM needs some love).<br />  Again if INL's V3 board can support a VRC7 mapper that can provide the necessary bus interface I would 'wire it up'. Sounds like a weekend project. But Hey if you know of a repo VRC7 board, point me to it <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> Anyway, asking the internet, a person who goes by fadis_ on twitter wrote an <a href="https://github.com/Fadis/TinyFM" class="postlink">FM library for the mbed</a> (<a href="http://www.youtube.com/watch?v=rx5Tqw0EYBM" class="postlink">youtube</a>). Looks like it's only fast enough for 16 operators ... but the VRC7 should only need 12.</div><br /> That interesting, will have to look closer at it. I've been eyeing this for awhile:<br /><!-- m --><a class="postlink" href="https://sites.google.com/site/preenfm/home">https://sites.google.com/site/preenfm/home</a><!-- m --><br /><!-- m --><a class="postlink" href="http://xhosxe.free.fr/PreenFM/PreenFMXavDemo.mp3">http://xhosxe.free.fr/PreenFM/PreenFMXavDemo.mp3</a><!-- m --><br />Looks/sounds tasty!<br />Yogi

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Feb 17, 2014 5:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">never mind that there are no 'new' synth/tone chips, just DACs and DSP</div><br />With DSP synths, there's still a problem of how wide to make the interface. A pure sampler like the Super NES DSP produces static, muffled sounds compared to an actual synth that provides variable-controlled filters, but if a synth is too flexible, the 6502 might find it hard to keep the synth fed with commands while running game logic and animating the graphics.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yogi</b> [ Mon Feb 17, 2014 7:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">never mind that there are no 'new' synth/tone chips, just DACs and DSP</div><br />With DSP synths, there's still a problem of how wide to make the interface. A pure sampler like the Super NES DSP produces static, muffled sounds compared to an actual synth that provides variable-controlled filters, but if a synth is too flexible, the 6502 might find it hard to keep the synth fed with commands while running game logic and animating the graphics.</div><br />  Good point but I really didn't want to suggest such a mod. I feel that sample/wavetable based synths are only viable on 16bit and above platforms that have far greater resources. You really need a very high clock rate and/or wide data path to get a clean sound or else a dedicated co-processor to handle the bandwidth; so one would end up with a ARM synth that masquerades as a NES. For 8b systems, you really only have a choice of outdated PSG/FM chips; all of which are discontinued/obsolete. <br />  As you point out with the SNES, using the SPC700 (which is at heart a 8bit platform) is prone to issues. The Amiga was ground breaking due to it's Paula and eclipsed Atari's ST which still used the AY-3-8910 (a holdover from the 8bit era). <br />  The Adlib card (OPL 2 8bit ISA) was a low cost competitor to the Roland MT-35 tone hardware that was sample based. The only reason the Adlib/Sound Blaster cards survived into the 16b ISA gen, was an established user base. Chip based FM faded quickly as DSPs improved.<br />  WOW, just had my dinner and debated flushing all the above, it's so off topic. But what the hey <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />I wants me some FM<br />Yogi

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Mon Feb 17, 2014 7:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">yogi wrote:</div><div class="quotecontent">These are the same currents within the Atari 8bit community, so I can appreciate the resistance to innovation. But I truly feel that the OPLL isn't too strange from a HW point. If no one else ever does this hack that is fine with me. <br /></div>It's not even resistance to innovation. It's that ideas are cheap: if every idea anyone ever thought of had been implemented in an emulator somewhere we'd have long since run out of space in the entire NES2.0 16-bit space.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Well, just seems to me that many of the commercially produced mappers fell into the &quot;arbitrarily new peripheral that was never used before&quot; catagory, back in the day.<br /></div>So if you make a new game that uses it, go for it!<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">But most people will never have access to a Lagrange Point cart and the best we can hoped for is a clone or PowerPak emu. Of my options this seems like a good compromise.<br /></div> Millions of people got famiclones that have a bug where the 1/4 and 1/2 duty cycles were swapped. It's definitively wrong, yet that's what they grew up with and expect. It'd be nice to not further exacerbate that.<br /><br />I'm not even saying &quot;don't add a YM2413 to a NES&quot;; I'm just saying &quot;don't take steps to allow people to self-delude into thinking the VRC7 is sufficiently similar to a YM2413&quot;. About half of the instruments are similar; the rest only sound similar in the sense that they both sound like FM synthesizers. (<a href="http://code.google.com/p/bizhawk/source/browse/trunk/BizHawk.Emulation/Sound/YM2413.cs?r=4255" class="postlink">Bizhawk's source</a> provides the current best guess (reverse engineered) lookup tables for both the YM2413 and VRC7. There are significant differences: immediately obvious to me are instruments 6, 13, and 15 with significant differences in their ADSR curves.)<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Would be starting from scratch; may be worth it in the long run. But with a YM hack there is already a lot of common ground. 'Similar' is fine for me ATM; I've plenty of long term projects (my MidiBoxFM needs some love).<br /></div>The other really huge advantage of using the YM3812 (or a clone) is we know exactly how it works. There's no mystery parameters that have to be reverse-engineered laboriously by switching back and forth between two things with hidden parameters.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yogi</b> [ Mon Feb 17, 2014 9:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><div class="quotetitle">yogi wrote:</div><div class="quotecontent">These are the same currents within the Atari 8bit community, so I can appreciate the resistance to innovation. But I truly feel that the OPLL isn't too strange from a HW point. If no one else ever does this hack that is fine with me. <br /></div>It's not even resistance to innovation. It's that ideas are cheap: if every idea anyone ever thought of had been implemented in an emulator somewhere we'd have long since run out of space in the entire NES2.0 16-bit space. </div> <br />Well, where is a VRC7 repo ; I'd buy one ASAP. Waiting for a 100% recreation to be created, seems more pie in the sky then a hack to add a simular FM chip. I really don't want to make waves but every repo board takes liberties with the original designs. I understand your concerns but I dislike the idea that we need to suppress hacks and mods to preserve an emu standard. The authors of the emus will decide if they want to support an extension based on how popular it is; so if I'm the only one interested then I wouldn't expect anyone to support it, no sweat. I'm not demanding anything of anyone.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> <div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Well, just seems to me that many of the commercially produced mappers fell into the &quot;arbitrarily new peripheral that was never used before&quot; catagory, back in the day.<br /></div>So if you make a new game that uses it, go for it! </div><br />Hum I guess I really touched a nerve, I apologize if this is the case. Was just trying to point out everything is new once. <br />  More then once INL had posted that he is open to unique mappers and changes. If he has or will have a VRC7 mem mapper VHDL IP but lacks the on board/CPLD resources to include the FM, this could be a one off option that I would be interest in. Doesn't seem to need any change to the boards layout, but I could be wrong.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> <div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> But most people will never have access to a Lagrange Point cart and the best we can hoped for is a clone or PowerPak emu. Of my options this seems like a good compromise.<br /></div> Millions of people got famiclones that have a bug where the 1/4 and 1/2 duty cycles were swapped. It's definitively wrong, yet that's what they grew up with and expect. It'd be nice to not further exacerbate that.<br /><br />I'm not even saying &quot;don't add a YM2413 to a NES&quot;; I'm just saying &quot;don't take steps to allow people to self-delude into thinking the VRC7 is sufficiently similar to a YM2413&quot;. About half of the instruments are similar; the rest only sound similar in the sense that they both sound like FM synthesizers. (<a href="http://code.google.com/p/bizhawk/source/browse/trunk/BizHawk.Emulation/Sound/YM2413.cs?r=4255" class="postlink">Bizhawk's source</a> provides the current best guess (reverse engineered) lookup tables for both the YM2413 and VRC7. There are significant differences: immediately obvious to me are instruments 6, 13, and 15 with significant differences in their ADSR curves.) </div> <br />  Never said it's a direct replacement, only that it shares the same structure on a HW level so it would work to some degree with the existing tools and mapper. Even though there is support within FamiTracker for VRC7, few will be able to hear their compos on true HW. Nothing would change with that, but if they wanted to compose for a similar chip there could be an HW option. <br />  This chip is well documented and the Yamaha pubs are on the net, so it's better known than the VRC7 FM. You must know this chip was used in the Sega Master Sys (JP release),  the MSX computer as well as quite a few Yamaha keyboards. Maybe not the best there ever was but not a total unknown.  <br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> <div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> Would be starting from scratch; may be worth it in the long run. But with a YM hack there is already a lot of common ground. 'Similar' is fine for me ATM; I've plenty of long term projects (my MidiBoxFM needs some love).<br /></div>The other really huge advantage of using the YM3812 (or a clone) is we know exactly how it works. There's no mystery parameters that have to be reverse-engineered laboriously by switching back and forth between two things with hidden parameters.</div> <br />  Well, the OPL2 is much harder to source, requires the specialized DAC (bi-polar power) and is far more complex to control. We are talking about a 6502, so I have doubts.<br />  With the OPL2, you have just added the need for instrument patch storage in your rom along with the overhead of running the chip; it's far more complex than a PSG. It would be forever before we would see FamiTracker support the OPL2 and it's multiple settings, might as well come up with a Adlib Tracker fork that outputs NSFs.<br />  The whole reason the OPLL was limited by design was to accommodate these simpler systems that have fewer resources.<br />  But look, if someone has a better option I'm open to it. I know there are better chips but with them one needs a better system.<br />Yogi

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Feb 17, 2014 10:41 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />ROMs using just the 2A03 PSG already have to store duty, volume, and pitch envelope data for instruments. A table of FM parameters for a 2-op FM chip wouldn't be that much bigger.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Mon Feb 17, 2014 11:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Don't forget that besides the different patches, VRC7 is also only a subset of YM2413. If you really wanted Famitracker to support the YM2413 you should also add 3 more channels and the option to use the percussion mode. I still think if you're going to do this you should go with something better, like at least an OPL2.<br /><br />Also, for what it's worth, there's a second reason you won't see a Lagrange Point repro besides the difficulty of reproducing the audio. The original cartridge is neither rare, nor particularly expensive. They sell regularly on eBay for less than US$40.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Tue Feb 18, 2014 12:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I appreciate the discussion on this subject everyone.  I don't consider it off topic in the slightest since I had actually already had thoughts of incorporating a FM synth on this board.  I can't say it's the highest priority on my project list, but it is indeed something I'd like to do with this design.<br /><br />I'm really not that well versed in the history and variety of these chips, so I appreciate the mini history/tech lesson today. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />  By all means keep the discussion going!<br /><br />My thoughts prior to today:<br />&quot;hey I wonder if I can rig up a YM2413 on this board to operate similarly to the VRC7 with the <a href="http://wiki.nesdev.com/w/index.php/VRC7_audio#Differences_from_OPLL" class="postlink">known differences</a>.&quot;  Speaking of, is there a typo on the wiki? &quot;YM2413 OPLL, which is itself a cost-reduced version of the <span style="text-decoration: underline">YM3182</span> OPL2&quot;<br /><br />My goal of putting a FM synth on the board wouldn't be to make repros of a Japanese only game that was only partially translated, but never released.  The japanese version is plenty available IMO.  I'd guess I've got about a 70% chance of fitting all the logic required for a makeshift VRC-7 hack that'd play LP anyway.  So it'd be directed for new material specifically composed to run on my board if there were ever to be such a person.<br /><br />I actually went out and bought a copy of LP for any RE/testing needs for the interface and a couple YM2413 chips off ebay for a couple bucks.  I haven't gotten much further than popping open the damn no screw famicom case to take a gander at the board and listen to the FM goodness on my FC.<br /><br />Fast forward today, something like a year later:<br />We appear to have found at least one guy who'd like to compose something for such a board config.<br /><br />I like the idea of not restricting a FM synth on the board to being similar to the VRC7.  I had never actually considered the YM3812 (OPL2), the idea of being free to design the interface myself in which ever way makes it simplest in hardware requirements.  The VRC7 method of interfacing with a YM2413 (OPLL) does seem a little cumbersome.  But perhaps putting a DAC on a OPL2 is more of a pain.<br /><br />While there are differences, they are very compatible in the operational sense.  I'd imagine tracker/emu maintainers would rather get requests to add support for a variant of something that's already supported.  Seems better than asking to support something completely homebrewed and lacks anything similar except a few boards I put together.  But I'd guess there are more non-NES trackers that support the OPL2 compared to the OPLL.  So if one had already decided to go with a non-NES tracker expecting to convert their tracks to the NES, perhaps there is more OPL2 tracker support.<br /><br />The question is really boils down to in my position is what are people more likely to actually use.  I'm not concerned with sheltering people from being deluded.  That said, I think there's room for both options on this board.  I'd love to offer both options, the more restrictive item for me at this point is development time.  I had planned to start with the VRC I, and work my way up.  I coded up the VRC I over a lunch break, the first test was a fail, and I haven't picked it up since.  At this point I'm more motivated to put something together that has a planned user such as Yogi.  I'll put the OPL2 down on the list as a fun project though.  Perhaps it could be a good fit for the parallel-MMC1 design I have in mind which would fit on a 36Mcell CPLD.  Having a good homebrew mapper to go hand-in-hand with the OPL2 would help motivate tracker/emu authors to support the mapper as a whole, and the sound extension could be optional.<br /><br />The best sound option I see is utilizing a mcu as a synth, mainly for cost and availability reasons.  That and the mcu could serve other non-sound purposes.  But that requires even more development, but it is on the TODO list. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />  Creating an interface for an OPL vice the entire OPL is more reasonable for the nearer future and a good starting point.<br /><br /><br /><div class="quotetitle">yogi wrote:</div><div class="quotecontent">  Well, the OPL2 is much harder to source, requires the specialized DAC (bi-polar power) and is far more complex to control.</div><br />How is the OPL2 harder to source?  I'm just going by ebay, the seem equally available and equally priced.<br /><br />Does it really require a specialized DAC and bi-polar power?  While it does need a DAC, does it really need to be a special bi-polar one?  I'm guessing you're saying the YM3014 is the most reasonable DAC for the OPL2?<br /><br />Is the OPL2 really that much harder to control?  Sure it has more registers and waveforms.  But if you want to restrict your use of the OPL2 within the capabilities of the OPLL wouldn't the control be comparable?  I guess the instruments can be utilized more so to keep things simpler to control.<br /><br />IMO, a DAC of any sort not being needed with the YM2413 is pretty decent incentive alone.  Admittedly, I'm not looking much past the end of my nose with that statement. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />In conclusion, my primary goal of all that perf area was for synth experimentation.  I'm more than willing to provide bare boards to anyone who doesn't want to wait around for me to devote development time to this.  So everyone is welcome to pick up their favorite synth choice and get to work!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yogi</b> [ Tue Feb 18, 2014 12:37 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">ROMs using just the 2A03 PSG already have to store duty, volume, and pitch envelope data for instruments. A table of FM parameters for a 2-op FM chip wouldn't be that much bigger.</div><br />Well from:<br /> &quot;Programming the AdLib/Sound Blaster&quot;<br /> <!-- m --><a class="postlink" href="http://bochs.sourceforge.net/techspec/adlib_sb.txt">http://bochs.sourceforge.net/techspec/adlib_sb.txt</a><!-- m --><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The sound card possesses an array of two hundred forty-four registers....<br />   Address      Function<br />   -------      ----------------------------------------------------<br />     01         Test LSI / Enable waveform control<br />     02         Timer 1 data<br />     03         Timer 2 data<br />     04         Timer control flags<br />     08         Speech synthesis mode / Keyboard split note select<br />   20..35       Amp Mod / Vibrato / EG type / Key Scaling / Multiple<br />   40..55       Key scaling level / Operator output level<br />   60..75       Attack Rate / Decay Rate<br />   80..95       Sustain Level / Release Rate<br />   A0..A8       Frequency (low 8 bits)<br />   B0..B8       Key On / Octave / Frequency (high 2 bits)<br />     BD         AM depth / Vibrato depth / Rhythm control<br />   C0..C8       Feedback strength / Connection type<br />   E0..F5       Wave Select </div><br /> I think it's safe to say there is substantial overhead compared to a OPLL, in addition to the 2A03 apu. <br /><br />@ rainwarrior<br /> Yes kind of thinking the added channels are a plus but my main point is the fact that the YM shares the same register design with the VRC7 (or rather vise a versa) so some support already exists now.  <br /> Fitting any other chip would necessitate a far larger project IMO, not that it's impossible. For myself, a long term goal would be a Midi interface akin to Membler's boards (which I've already convo-ed with INL about not long ago). <br />  Thanks for the heads up on LP carts, I'll look into them. Being a FC JP release only, discouraged me and like I had said earlier I have some YM2413s en-route for another project (really hoping they aren't junk/fake). <br />Yogi

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Tue Feb 18, 2014 12:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">yogi wrote:</div><div class="quotecontent">Hum I guess I really touched a nerve, I apologize if this is the case. Was just trying to point out everything is new once. <br /></div>Sorry! One can't convey tone on the internet... That was supposed to have been enthusiasm. I would love to see more completed original projects! I would be tickled pink to see more completed original projects that used new mappers. I would be quite amused by a ROM hack of Somari to the VRC7 that reintroduced the Megadrive's music (although necessarily lightly remixed to accommodate the instrument changes and reduction in number of voices ).<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">This chip is well documented and the Yamaha pubs are on the net, so it's better known than the VRC7 FM. You must know this chip was used in the Sega Master Sys (JP release),  the MSX computer as well as quite a few Yamaha keyboards. Maybe not the best there ever was but not a total unknown.<br /></div>Sure, and if people want to write music that targets the YM2413, they can write VGMs that target the Mark 3. But if they're using MML or FamiTracker or whatnot, and they then go to play it back on a YM2413-containing cartridge instead of a VRC7, they'll be disappointed when the sounds are wrong.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">With the OPL2, you have just added the need for instrument patch storage in your rom along with the overhead of running the chip; it's far more complex than a PSG.<br /></div>The original Ad Lib card came out in 1987, for the IBM AT and clones. While the 286 had more memory and was faster than the 2A03, hard drives were still moderately uncommon, so a game that fit on a 360K floppy is still comparable to a 256 KiB NES game. Anyway, loading eight bytes per instrument instead of one isn't really appreciably harder. (It's really the exact same as programming instrument 0 on the OPLL, just once for every channel)<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">It would be forever before we would see FamiTracker support the OPL2 and it's multiple settings, might as well come up with a Adlib Tracker fork that outputs NSFs.<br /></div>And why should FamiTracker support the OPLL instead? It's not like either was ever used during the FC's commercial life. If you want a general purpose retro softsynth, Deflemask and many other retro trackers are out there.<br /><br /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">Does it really require a specialized DAC and bi-polar power? While it does need a DAC, does it really need to be a special bi-polar one? I'm guessing you're saying the YM3014 is the most reasonable DAC for the OPL2?</div>The native bitstream out of the OPL2 is a funny 16 bit word made of 3 bits of padding, 10 bits of mantissa, and 3 bits (actually 2.8, &quot;0&quot; is forbidden) of exponent. Converting this to a 16 bit I²S, S/PDIF, or even AC'97 encoding should be rather straightforward.<br /><br />Anyway, the YM3014 is unipolar, Vsupply and ground. Its output is centered around Vsupply/2, so either a highpass or an opamp to center things is desirable.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Tue Feb 18, 2014 12:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Anyway, the YM3014 is unipolar, Vsupply and ground. Its output is centered around Vsupply/2, so either a highpass or an opamp to center things is desirable.</div>And costs nearly twice as much as the OPL2 itself based on the current ebay rates... <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>yogi</b> [ Tue Feb 18, 2014 5:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">I appreciate the discussion on this subject everyone.  I don't consider it off topic in the slightest since I had actually already had thoughts of incorporating a FM synth on this board.  I can't say it's the highest priority on my project list, but it is indeed something I'd like to do with this design.<br /><br />I'm really not that well versed in the history and variety of these chips, so I appreciate the mini history/tech lesson today. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />  By all means keep the discussion going!<br /><br />My thoughts prior to today:<br />&quot;hey I wonder if I can rig up a YM2413 on this board to operate similarly to the VRC7 with the <a href="http://wiki.nesdev.com/w/index.php/VRC7_audio#Differences_from_OPLL" class="postlink">known differences</a>.&quot;  Speaking of, is there a typo on the wiki? &quot;YM2413 OPLL, which is itself a cost-reduced version of the <span style="text-decoration: underline">YM3182</span> OPL2&quot; </div><br />Yes the OPLL is derived from the OPL2 but is reduced in scope. the VRC7 is a slightly reduced OPLL. I think the interface/register design are the same between the OPLL and the VRC7. At least from my read of the wiki.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> My goal of putting a FM synth on the board wouldn't be to make repros of a Japanese only game that was only partially translated, but never released.  The japanese version is plenty available IMO.  I'd guess I've got about a 70% chance of fitting all the logic required for a makeshift VRC-7 hack that'd play LP anyway.  So it'd be directed for new material specifically composed to run on my board if there were ever to be such a person. </div><br />I would be interested very much. Like I've said earlier, provided that there are data and control traces (I assume so for AY 3-8910 support) to the proto area it should be very workable with the YM2413, the need of the VRC 7 mapper is only to keep a slight compatibility with the tools that are in place. <br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> I actually went out and bought a copy of LP for any RE/testing needs for the interface and a couple YM2413 chips off ebay for a couple bucks.  I haven't gotten much further than popping open the damn no screw famicom case to take a gander at the board and listen to the FM goodness on my FC.<br /><br />Fast forward today, something like a year later:<br />We appear to have found at least one guy who'd like to compose something for such a board config. </div><br /><img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> I like the idea of not restricting a FM synth on the board to being similar to the VRC7.  I had never actually considered the YM3812 (OPL2), the idea of being free to design the interface myself in which ever way makes it simplest in hardware requirements.  The VRC7 method of interfacing with a YM2413 (OPLL) does seem a little cumbersome.  But perhaps putting a DAC on a OPL2 is more of a pain.</div><br />An alternate chip could be the YM2612 as used in the Sega Gen/Megadrive. It has a similar bus interface to the OPL2 but has an integrated DAC. <br /><!-- m --><a class="postlink" href="http://en.wikipedia.org/wiki/Yamaha_YM2612">http://en.wikipedia.org/wiki/Yamaha_YM2612</a><!-- m --><br /> 6 channels and like the OPL2 would need an increased amount of PRG rom for patches. The Sega/VGM homebrew community has some info on developing for it also.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> While there are differences, they are very compatible in the operational sense.  I'd imagine tracker/emu maintainers would rather get requests to add support for a variant of something that's already supported.  Seems better than asking to support something completely homebrewed and lacks anything similar except a few boards I put together.  But I'd guess there are more non-NES trackers that support the OPL2 compared to the OPLL.  So if one had already decided to go with a non-NES tracker expecting to convert their tracks to the NES, perhaps there is more OPL2 tracker support.<br /><br />The question is really boils down to in my position is what are people more likely to actually use.  I'm not concerned with sheltering people from being deluded.  That said, I think there's room for both options on this board.  I'd love to offer both options, the more restrictive item for me at this point is development time.  I had planned to start with the VRC I, and work my way up.  I coded up the VRC I over a lunch break, the first test was a fail, and I haven't picked it up since.  At this point I'm more motivated to put something together that has a planned user such as Yogi.  I'll put the OPL2 down on the list as a fun project though.  Perhaps it could be a good fit for the parallel-MMC1 design I have in mind which would fit on a 36Mcell CPLD.  Having a good homebrew mapper to go hand-in-hand with the OPL2 would help motivate tracker/emu authors to support the mapper as a whole, and the sound extension could be optional. </div><br />Well I'm up for any and all. The advantage with the YM2413 is the relative NSF support in place for VRC7 that translate well. Both the OPL2 and the YM2612 (OPN2) offer emus that would aid with tool support. The OPL2 is the more complicated of these and the community is SoundBlaster centric, tool wise. So the transition to the reduced specs of the 6502 would restrict the effects that are common on dos trackers. This also applies to a lesser extent with the YM2612, but the Sega 16b platform is a bit closer to our goal so it may be a better fit. <br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> The best sound option I see is utilizing a mcu as a synth, mainly for cost and availability reasons.  That and the mcu could serve other non-sound purposes.  But that requires even more development, but it is on the TODO list. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />  Creating an interface for an OPL vice the entire OPL is more reasonable for the nearer future and a good starting point.<br /><br /><br /><div class="quotetitle">yogi wrote:</div><div class="quotecontent">  Well, the OPL2 is much harder to source, requires the specialized DAC (bi-polar power) and is far more complex to control.</div><br />How is the OPL2 harder to source?  I'm just going by ebay, the seem equally available and equally priced.<br /><br />Does it really require a specialized DAC and bi-polar power?  While it does need a DAC, does it really need to be a special bi-polar one?  I'm guessing you're saying the YM3014 is the most reasonable DAC for the OPL2?<br /><br />Is the OPL2 really that much harder to control?  Sure it has more registers and waveforms.  But if you want to restrict your use of the OPL2 within the capabilities of the OPLL wouldn't the control be comparable?  I guess the instruments can be utilized more so to keep things simpler to control.</div><br />  As to Ebay, just took a quick look and you are correct. But the associated DAC, YM3014, may or may not be replaceable with a modern chip, just don't know. Seems to me the  DAC for the OPL3 was a must have when I was sourcing parts for a MBFM.<br /> Drawing from the MidiBoxFM OPL3 design, a bipolar opamp is used following the DAC. Can this be changed to unipolar, I'm sure, but at the expense of the audio likely. Just going by a proven design for the OPL3. R&amp;D required here.<br />  The complexity lies in the 244 registers compared to the far reduced set on the YM2413. The OPLL has a defined patch set as opposed to the OPL2 where every instrument needs to be loaded at runtime. <br />  The YM2612 is also a complicated beast, but not as bad and offers more sonic options then the OPLL. Here is a example circuit from Wikipedia;<br /><!-- m --><a class="postlink" href="http://sue.niko.to/ps98/ym2612_sch.png">http://sue.niko.to/ps98/ym2612_sch.png</a><!-- m --><br />  Plus there is at least one member 'here' that has a lot of first hand programming experience with the YM2612/VGMM (cough*Shuri*cough).<br />  I could be underestimating the capabilities of the 6502 but the MidiBox runs the PIC18F at 10mips and it is at it's limit with servicing the OPL3, UI and Midi coms. <br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> IMO, a DAC of any sort not being needed with the YM2413 is pretty decent incentive alone.  Admittedly, I'm not looking much past the end of my nose with that statement. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />In conclusion, my primary goal of all that perf area was for synth experimentation.  I'm more than willing to provide bare boards to anyone who doesn't want to wait around for me to devote development time to this.  So everyone is welcome to pick up their favorite synth choice and get to work!</div><br />Well I'm on board. I know I have a OPL2 SB board in my bone yard as well as the YM2413s coming so will start off with some testing.<br />Yogi

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Tue Feb 18, 2014 8:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Instrument patches aren't really a significant burden on data size compared to pattern data. OPL2 wouldn't even create significantly more patch data, there's only about 1 more byte of data (extra waveform selection, and an output level control for the carrier). The 14 patches you get &quot;for free&quot; with the VRC7 are worth 112 bytes, if you're using all of them.<br /><br />2A03 macros are much larger than VRC7 patches.<br /><br />The cost difference between these chips isn't very significant when you're talking about a one-off. If you're going to make 50 of them it might start to matter, but we're not there yet. As lidnariq said, ideas are cheap. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br /><br />Anyhow, you clearly like the YM2413. If you wanna get started with this, NSFPlay has an option in the .ini file to use YM2413 patches instead of the VRC7's, no hacking required (the extra channels or percussion mode would require some minor modifications though). Famitracker is easy to modify if you have a version of Visual Studio with MFC (Express versions don't come with this).<br /><br />However, it's a lot less extra work than you might think to modify Famitracker to do OPL2 instead of VRC7, and I think you could get a lot out of that freedom from the one-patch restriction. The reason I keep suggesting it is that this is already a custom job, why not squeeze some more power in there while you're at it? (This is just my friendly opinion, though; obviously I don't have a stake in this if I'm not doing any of the work.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Feb 18, 2014 8:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: MMC1,2,3,4/Sunsoft-5B reproduction circuit boards. INL-R</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That and a lot of those registers will be loaded with the same values. For example, three voices playing a piano sound will all use the piano parameters.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>11</strong> of <strong>14</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Sup NesDev, iNES is dead, how do you feel?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Sup NesDev, iNES is dead, how do you feel?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=3940">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=3940</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>dvdmth</b> [ Sat Mar 01, 2008 10:59 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">bunnyboy wrote:</div><div class="quotecontent">A database is useless for homebrew, translations, and hacks where the checksum will be changed.  There must be a way for the end user to set the hardware instantly.  No reason a prg/chr checksum database couldn't be used to FIX the bad headers of existing files tho.</div>
<br />Amen!  I've been waiting forever for SOMEONE to write a database-driven ROM header fixer.  The Mac version of Nestopia doesn't support soft IPS patching, and I HATE it when I apply a translation/hack to a ROM and watch it blow up because it has a bad header and Nestopia can no longer resolve it.  A couple of years ago I wrote a small, hackish program that output to a text file the NstDatabase contents for a given .nes file, so that I could fix the header with a hex editor based on Nestopia's treatment of the ROM.  All well and good, until Nestopia was updated and some fields in the database file were changed, causing my little program to fail (ugh!!).
<br />
<br />The next version of Nestopia will have its database converted to the new XML format.  I love this aspect of the XML proposal, because the format is more standardized and more easily used by other software, such as a ROM fixer.  I don't care much for the zipfile container approach, but the XML database feature is very appealing to me.  If my programming skills weren't so bad (it takes me forever to do a hackish job at something), I'd write a ROM fixing utility as soon as the new Nestopia version was out.  I sincerely hope that someone - ANYONE - out there will FINALLY get a decent ROM tool developed for the NES!
<br />
<br />[/rant]

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>BootGod</b> [ Sat Mar 01, 2008 7:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Just FYI, my dumping client does have the ability to fix ROM images, but it will only work with images known by the DB. Although, because it's doing everything online, it's not very practical to do batch operations.
<br />
<br />I am planning on making a standalone utility that can load up the XML either from Nestopia or one generated by the cart database in order to easily and efficiently repair and convert between formats.
<br />
<br />I'm not sure where this talk of replacing iNES came from, I can't speak for Marty, but I don't know that this format is aimed at replacing anything. My client and upcoming utility will be able to convert images into whatever format you want, your not going to be forced to convert to the XML based one.
<br />
<br />Just a few comments on some points brought up:
<br />
<br />Writing an XML parser is a pain. It certainly is, but luckily there are dozens of free libs out there that you can drop right in. I found a nice lightweight one, incorporated into a single class that allows to to easily read,create,modify,etc XML files.
<br />
<br />I also thought INES2 was (and still is) a great idea. If anyone is ever up to completing and documenting it (mainly the sub mapper stuff), I'll be happy to add support for that as well. It's not as flexible as the XML format, but simply the fact that it is backwards compatible makes it a huge advantage.
<br />
<br />Viewing ROMs in a hex editor is much easier to follow with this XML format since the ROMs are stored separately and individually, so the offsets don't get messed up.
<br />
<br />As far as IPS patching goes, one would think soft-patching would usually be the preferred way to go about it and Nestopia will still be able to use patches in this manner. However, there certainly are cases where you'd want to do hard patching as well. I could add this ability to the ROM utility.
<br />
<br />The flexibility of the XML format is quite an advantage and you can really define a lot of detail about the hardware if you want too, even though it's not always necessary.
<br />
<br />It already does define some pin information in cases where it is necessary. For instance to distinguish between CNROM types (m3 &amp; m185) and X1-005 (m80 &amp; m207). It also defines things like sound samples for games that have a built-in chip like the D7756C. I plan on doing this for some other boards as well, especially to deal with all the Konami VRC variants.
<br />
<br />Another thing I like about the new format is the ability to have ROM "sets", as in one zip can contain all the data for a game and any revisions or regional versions. Besides being more organized, it also has the bonus of being able to share ROMs, as quite often it is only the PRG ROM that changes.
<br />
<br />This is also the main reason my client doesn't yet build images in this format though as my db doesn't currently have any link information between regions. A lot of this data will be able to be generated automatically based on catalog ID's and shared ROMs, but there is still plenty that will have to be done by hand.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>bunnyboy</b> [ Sat Mar 01, 2008 8:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">BootGod wrote:</div><div class="quotecontent">I'm not sure where this talk of replacing iNES came from, I can't speak for Marty, but I don't know that this format is aimed at replacing anything. My client and upcoming utility will be able to convert images into whatever format you want, your not going to be forced to convert to the XML based one.</div><br />Looks like it mostly came from X-or, and some of the people on the bannister board.  I bet there would be a lot less controversy if it had just been presented as a way to add additional files to the current ines, instead of a complete replacement.  Even Marty in <a href="http://www.bannister.org/forums/ubbthreads.php?ubb=showflat&amp;Number=30909#Post30909" class="postlink">one post</a> said the .nes file should be left alone for backwards compatibility.  Then there are people like R Belmont that say nesdev doesn't care about hardware, when the hardware info found here is more accurate than Nestopia...<br /><br /><div class="quotetitle">BootGod wrote:</div><div class="quotecontent">Writing an XML parser is a pain. It certainly is, but luckily there are dozens of free libs out there that you can drop right in. I found a nice lightweight one, incorporated into a single class that allows to to easily read,create,modify,etc XML files.</div><br />Feel like writing one in 6502 for a device like the PowerPak?  <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />  Handling all the different versions of zip compression wouldn't be fun either...<br /><br /><div class="quotetitle">BootGod wrote:</div><div class="quotecontent">Viewing ROMs in a hex editor is much easier to follow with this XML format since the ROMs are stored separately and individually, so the offsets don't get messed up.</div><br />Viewing is easier (assuming you have already replaced ines, which may or may not be the goal) but editing is certainly not.  Once you make a change, your CRC/MD5/SHA/etc based database is broken.  Of course that may be the idea, to make sure edited roms aren't treated as the real ones.  What would a checksum do if its not for determining hardware?<br /><br /><div class="quotetitle">BootGod wrote:</div><div class="quotecontent">Another thing I like about the new format is the ability to have ROM "sets", as in one zip can contain all the data for a game and any revisions or regional versions. Besides being more organized, it also has the bonus of being able to share ROMs, as quite often it is only the PRG ROM that changes.</div>
<br />Other than the sharing of duplicate data, making sets can already be done.  Would the duplicates be removed by zip anyways?  Its just a normal zip file so you can toss in whatever you want, including manuals and boxes for preservation.  ines in no way restricts what other files you bundle with it in a zip.  This new format should in no way restrict the use of ines files instead of separate prg/chr files, since that would just be a simple entry in the xml file.  With the tiny size of nes roms you could even have the nes and prg/chr files in the zip.  Artwork will be FAR larger than many copies of the rom anyways.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>BootGod</b> [ Sat Mar 01, 2008 9:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">bunnyboy wrote:</div><div class="quotecontent"><div class="quotetitle">BootGod wrote:</div><div class="quotecontent">Writing an XML parser is a pain. It certainly is, but luckily there are dozens of free libs out there that you can drop right in. I found a nice lightweight one, incorporated into a single class that allows to to easily read,create,modify,etc XML files.</div><br />Feel like writing one in 6502 for a device like the PowerPak?  <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" />  Handling all the different versions of zip compression wouldn't be fun either...</div><br />Yeah you've got a point there, the PowerPak is definitely one situation where the XML format is not suitable at all. One could always use the conversion utility to write INES/INES2 files right to the memory card though. <br /><br /><div class="quotetitle">bunnyoy wrote:</div><div class="quotecontent"><div class="quotetitle">BootGod wrote:</div><div class="quotecontent">Viewing ROMs in a hex editor is much easier to follow with this XML format since the ROMs are stored separately and individually, so the offsets don't get messed up.</div><br />Viewing is easier (assuming you have already replaced ines, which may or may not be the goal) but editing is certainly not.  Once you make a change, your CRC/MD5/SHA/etc based database is broken.  Of course that may be the idea, to make sure edited roms aren't treated as the real ones.  What would a checksum do if its not for determining hardware?</div><br />In the ROM format aspect, the checksum doesn't really matter at all. Files inside the zip are defined in the XML by the ROM filenames, not by the checksum. So any patched ROMs will still load just fine in the format.<br /><br /><div class="quotetitle">bunnyboy wrote:</div><div class="quotecontent"><div class="quotetitle">BootGod wrote:</div><div class="quotecontent">Another thing I like about the new format is the ability to have ROM "sets", as in one zip can contain all the data for a game and any revisions or regional versions. Besides being more organized, it also has the bonus of being able to share ROMs, as quite often it is only the PRG ROM that changes.</div><br />Other than the sharing of duplicate data, making sets can already be done.  Would the duplicates be removed by zip anyways?  Its just a normal zip file so you can toss in whatever you want, including manuals and boxes for preservation.  ines in no way restricts what other files you bundle with it in a zip.  This new format should in no way restrict the use of ines files instead of separate prg/chr files, since that would just be a simple entry in the xml file.  With the tiny size of nes roms you could even have the nes and prg/chr files in the zip.  Artwork will be FAR larger than many copies of the rom anyways.</div>
<br />The zip format doesn't do solid compression (each file is compressed individually) so no, zipping would not have the same effect as removing the duplicate files.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Mar 02, 2008 7:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">bunnyboy wrote:</div><div class="quotecontent"><div class="quotetitle">BootGod wrote:</div><div class="quotecontent">Writing an XML parser is a pain. It certainly is, but luckily there are dozens of free libs out there that you can drop right in.</div><br />Feel like writing one in 6502 for a device like the PowerPak?  <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div><br />Remember the Contiki web browser? It handles HTML, which is related to XML. So I know the NES is powerful enough to handle at least a useful subset of XML, even if not a full-blown DOM or SAX implementation. But I don't know how much RAM needs to be made writable for it to work.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Handling all the different versions of zip compression wouldn't be fun either...</div><br />Do popular PKZIP-compatible archivers ever use any of the PKZIP 1.x codecs? But the typical 32 KiB ring buffer size of Deflate might be the biggest pain on a machine with a small address space.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Would the duplicates be removed by zip anyways?</div>
<br />No. The PKZIP format, unlike some other archive formats, does not use solid archiving. A non-solid archive makes it easier for the client to decompress individual files, as the files don't depend on files earlier in the archive, but it doesn't exploit file-to-file redundancies. The tar.gz format uses solid archiving, but it still has Deflate's 32 KiB window, which is smaller than everything but the earliest NROM games. The only widely-used Free archive format I know of that has solid archiving and a window size on the same order of magnitude as an NES ROM is .7z used by 7-Zip.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Sun Mar 02, 2008 10:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Zip Store, then Zip maximum compression to get solid archiving with zip.
<br />How is interpreting XML any different than a basic interpreter, like the one from the Apple ][?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Mar 02, 2008 12:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">Zip Store, then Zip maximum compression to get solid archiving with zip.</div><br />That would have the same drawbacks as tar.gz: the 32 KiB window limit. <br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">How is interpreting XML any different than a basic interpreter, like the one from the Apple ][?</div>
<br />Differences include the following:
<br /><ol style="list-style-type: decimal"><li>Applesoft BASIC used a 1-byte character encoding based on ASCII, while XML uses UTF-8 or UTF-16 that can address over a million unique code points. </li><li>Applesoft BASIC's parser doesn't need to load and interpret custom DTDs that define custom entities (&amp;stuff;). </li><li>A program in Applesoft BASIC is a linked list of lines, each of which is a nul-terminated string of tokens and characters. An XML document can be an arbitrary tree. Processing trees directly in assembly language on an 8-bit CPU can get hairy. </li></ol>
<br />We would need to define a custom subset of XML that includes what we need and excludes what we don't. At that point, we might as well just use INI format.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hyde</b> [ Tue Mar 04, 2008 3:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Minor letdown. When I saw the subject, I thought it was supposed to mean Marat has quit.</div>
<br /> <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />  <img src="./images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Tue Mar 04, 2008 8:30 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />String comparisons in UTF-8 are identical to string comparisons in 8-bit ASCII.  No piece of a high character can ever appear in ASCII, and there is no way to find one extended character inside another.  For everything except counting characters, you can ignore the fact that it's not ASCII.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Mar 05, 2008 5:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">String comparisons in UTF-8 are identical to string comparisons in 8-bit ASCII.</div><br />True, but XML files can be in UTF-16 too. And is "Mario's Time Machine" the same as "Mario&amp;#x27;s Time Machine" and "Mario&amp;#39;s Time Machine" and "Mario&amp;apos;s Time Machine"?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">For everything except counting characters, you can ignore the fact that it's not ASCII.</div>
<br />Everything except counting and printing. Do we ignore the mainland Europe and French Canadian markets by printing any character in the title that's above U+007F as a '?' character?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
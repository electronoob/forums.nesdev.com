<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=5271" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2009-06-03T22:15:10-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=5271</id>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2009-06-03T22:15:10-07:00</updated>
<published>2009-06-03T22:15:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47638#p47638</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47638#p47638"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47638#p47638"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />I noticed that when I pause Nestopia emulation, it recenters the DC killer. That caused problems when I tried to record <a href="http://nesdev.com/bbs/viewtopic.php?t=4906" class="postlink">my volume test program</a>.<br /></div><br /><br />Ah, that would explain the waveform I saw when I recorded the output of Nestopia. You see a short positive DC offset that normalises itself over a few frames.<br /><br />Thanks everyone for your input -  I can put that one to bed now <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Jun 03, 2009 10:15 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[ccovell]]></name></author>
<updated>2009-06-03T18:54:22-07:00</updated>
<published>2009-06-03T18:54:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47629#p47629</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47629#p47629"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47629#p47629"><![CDATA[
I don't know if it is related to this, but the game Blaster Master / Meta Fight exhibits a similar problem with "popping" occurring every several seconds.  Throughout every (?) music track, even when music tracks have stopped, there is a popping that you can hear (on a real system, of course.)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=355">ccovell</a> — Wed Jun 03, 2009 6:54 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-06-03T17:28:03-07:00</updated>
<published>2009-06-03T17:28:03-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47626#p47626</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47626#p47626"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47626#p47626"><![CDATA[
I noticed that when I pause Nestopia emulation, it recenters the DC killer. That caused problems when I tried to record <a href="http://nesdev.com/bbs/viewtopic.php?t=4906" class="postlink">my volume test program</a>.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Jun 03, 2009 5:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[jsr]]></name></author>
<updated>2009-06-03T16:02:23-07:00</updated>
<published>2009-06-03T16:02:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47620#p47620</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47620#p47620"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47620#p47620"><![CDATA[
It is a bug with Nestopias sound code. Try to pause emulation to stop the sound and then start it again, it causes the same pop for me after the same amount of time.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=28">jsr</a> — Wed Jun 03, 2009 4:02 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2009-06-03T15:11:36-07:00</updated>
<published>2009-06-03T15:11:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47617#p47617</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47617#p47617"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47617#p47617"><![CDATA[
Err, well, I <em>could</em> test in other emus, but I didn't mean to make it sound like I <em>would</em>.  Honestly I switched to Ubuntu semi-recently and haven't gotten around to getting any NES emus yet.  Assembling a ROM and then testing it on a myriad of emulators that I'd have to find and download is more work than I'm willing to do (especially since this is nothing you couldn't try out on your own)<br /> <img src="http://forums.nesdev.com/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" />  <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Wed Jun 03, 2009 3:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-06-03T15:01:09-07:00</updated>
<published>2009-06-03T15:01:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47616#p47616</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47616#p47616"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47616#p47616"><![CDATA[
I'd try it on an NES, but all I have is a PowerPak, and PowerPak has its own menu that would screw with the timing.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Jun 03, 2009 3:01 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2009-06-03T14:47:26-07:00</updated>
<published>2009-06-03T14:47:26-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47615#p47615</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47615#p47615"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47615#p47615"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br />Sadly, no.  Sorry.  All I could do is test it on other emulators, which doesn't help any for a definitive response.<br /></div><br /><br />No worries, man. Thanks for trying the other emulators. So can you report that you had it happen in Nestopia but not in any other?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Jun 03, 2009 2:47 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2009-06-03T14:27:53-07:00</updated>
<published>2009-06-03T14:27:53-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47614#p47614</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47614#p47614"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47614#p47614"><![CDATA[
Sadly, no.  Sorry.  All I could do is test it on other emulators, which doesn't help any for a definitive response.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Wed Jun 03, 2009 2:27 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2009-06-03T13:17:11-07:00</updated>
<published>2009-06-03T13:17:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47611#p47611</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47611#p47611"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47611#p47611"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">sta #$400a   ;  &lt;-- I'm assuming that '#' is a typo</div><br /><br />This sounds like a problem with NEStopia.  Nothing in the code you posted would cause a pop/click/whatever.<br /></div><br /><br />Oops, yeah, typo. Strangely it compiled OK <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />I'm hoping it's a Nestopia issue. It doesn't happening in Audio Overload, as I said, but it's a matter of deciding which one to trust <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Are you in a position to test it yourself? Or on a a cart?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Jun 03, 2009 1:17 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2009-06-03T11:32:32-07:00</updated>
<published>2009-06-03T11:32:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47607#p47607</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47607#p47607"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47607#p47607"><![CDATA[
<div class="codetitle"><b>Code:</b></div><div class="codecontent">sta #$400a   ;  &lt;-- I'm assuming that '#' is a typo</div><br /><br />This sounds like a problem with NEStopia.  Nothing in the code you posted would cause a pop/click/whatever.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Wed Jun 03, 2009 11:32 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2009-06-03T09:27:08-07:00</updated>
<published>2009-06-03T09:27:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47604#p47604</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47604#p47604"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47604#p47604"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br />Are you sure this is coming from the Triangle and not another channel?  Try silencing all other channels and see if it goes away.  Square/DMC are much more likely to be causing pops than the triangle.<br /><br />Can you provide a recording of the audio?<br /><br />The only way I know of that you can make a pop with the triangle is if you zero it's F-value (0 to $400A, $400B) -- or set the F-value to something else crazy low.  All other ways of silencing the tri do so "cleanly" in that they don't cause a pop.<br /></div><br /><br />Sorry I missed this reply.<br /><br />Its definitely the triangle - see example code. It also seems to be nothing to do with my audio engine (see code again).<br /><br /> <img src="http://forums.nesdev.com/images/smilies/icon_confused.gif" alt=":?" title="Confused" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Jun 03, 2009 9:27 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2009-06-03T09:20:08-07:00</updated>
<published>2009-06-03T09:20:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47603#p47603</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47603#p47603"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47603#p47603"><![CDATA[
In a bid to eliminate a possible Nijuu bug, I removed the calls to Nijuu and in the reset code just did this;<br /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   lda #$88<br />   sta $4008<br />   lda #$ff<br />   sta $4009<br />   lda #$00<br />   sta #$400a<br />   lda #%00000010<br />   sta $400b</div><br /><br />And at approximate $2d0 frames in, you get a click.<br /><br />Can some people try it and see if you get the same? Also can someone try it on a cart?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Jun 03, 2009 9:20 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2009-06-03T09:06:58-07:00</updated>
<published>2009-06-03T09:06:58-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47602#p47602</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47602#p47602"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47602#p47602"><![CDATA[
Tried using $88/$00 as on/off and it's the same.<br /><br />I even tried just writing $88 and instead of writing a $00 to turn the voice off, I disabled it in $4015.<br /><br />No different.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Jun 03, 2009 9:06 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[neilbaldwin]]></name></author>
<updated>2009-06-03T08:54:22-07:00</updated>
<published>2009-06-03T08:54:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47601#p47601</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47601#p47601"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47601#p47601"><![CDATA[
Quick typo correction : it should've been $2d0 not $240.<br /><br />Sorry <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3896">neilbaldwin</a> — Wed Jun 03, 2009 8:54 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-06-03T08:42:53-07:00</updated>
<published>2009-06-03T08:42:53-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47599#p47599</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47599#p47599"/>
<title type="html"><![CDATA[Weird Audio Bug on Triangle Voice]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5271&amp;p=47599#p47599"><![CDATA[
At 60 frames per second, $240 frames = 576 frames = 9.58 seconds.<br /><br />The <a href="http://nesdevwiki.org/wiki/APU_Frame_Counter" class="postlink">240 Hz frame counter</a> clocks the hardware envelopes (e.g. the linear counter) once every 7457.5 cycles, and it clocks the length counter and sweep units every other time (once every 14915 cycles). It completes one "frame" every 29830 cycles. But most music engines are triggered by vertical blank, and this happens once every (341*261.5+340*0.5)/3 = 29780.5 cycles on an NTSC or RGB[1] PPU. How long will it take for this 49.5 cycle discrepancy to add up? 29830/49.5 = 603 frames.<br /><br />What happens if you use $4008 = $88 on and $00 off, or other combinations?<br /><br /><br />[1] I think. Does the RGB PPU really have the same behavior of skipping a dot on the pre-render scanline every other frame that the NTSC PPU has?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Jun 03, 2009 8:42 am</p><hr />
]]></content>
</entry>
</feed>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Dealing with a large array and lookup</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Newbie Help Center" href="http://forums.nesdev.com/feed.php?f=10" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Dealing with a large array and lookup" href="http://forums.nesdev.com/feed.php?f=10&amp;t=14995" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en&amp;sid=62813703ec4e915b57695e862d8dd5e8" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '';
	var base_url = '';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php?sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php?sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php?sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Wed Mar 22, 2017 10:17 pm<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered&amp;sid=62813703ec4e915b57695e862d8dd5e8">View unanswered posts</a> | <a href="./search.php?search_id=active_topics&amp;sid=62813703ec4e915b57695e862d8dd5e8">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=62813703ec4e915b57695e862d8dd5e8">Board index</a> &#187; <a href="./viewforum.php?f=24&amp;sid=62813703ec4e915b57695e862d8dd5e8">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10&amp;sid=62813703ec4e915b57695e862d8dd5e8">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=10&amp;t=14995&amp;sid=62813703ec4e915b57695e862d8dd5e8">Dealing with a large array and lookup</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320&amp;sid=62813703ec4e915b57695e862d8dd5e8">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=14995&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 15 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=10&amp;t=14995&amp;sid=62813703ec4e915b57695e862d8dd5e8&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=10&amp;t=14995&amp;view=previous&amp;sid=62813703ec4e915b57695e862d8dd5e8">Previous topic</a> | <a href="./viewtopic.php?f=10&amp;t=14995&amp;view=next&amp;sid=62813703ec4e915b57695e862d8dd5e8">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p181459"></a>
				<b class="postauthor">casprog</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181459">Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181459&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181459"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Oct 28, 2016 1:05 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 28, 2016 12:37 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hello all, first post here and very new to 6502 and NES development, however I am very familiar with C, C++, and game development in general (also very excited about working with the NES).<br /><br />I have background tiles filling my screen, and I want to do a lookup during player movement to determine if my character sprite will be running into my &quot;wall&quot; tiles (controls are working fine). This is from a top-down perspective.<br /><br />Using C/C++ (and with more memory resources of course : )  I would just have a matrix or long single dimensional array, divide my player x/y, and use that as my lookup to check a value.<br /><br />e.g, <br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">myMatrix&#91;y * MAP_WIDTH + x&#93; // for single dimension.<br /></div><br /><br />However I'm struggling with 8-bit limits.<br /><br />Problem 1. <br />I'm loading my background in using 256 byte chunks, and have a loop for each chunk. The last chunk is of course less than 256 bytes. This works, but seems like it will make lookups very confusing, because I would need to know which chunk to start reading from.  If I am able to somehow load all my background data in one chunk with some loop magic, this would possibly make the lookup easier (and background loading logic), but then I'm faced with problem number 2..<br /><br />Problem 2. <br />How can I do a lookup when my matrix/array can be up to 960 bytes? (32 x 30 tiles) If my character is at screen location 200 152, my lookup index would be:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">pseudocode:<br />mapX = 200 / 8 (or 25)<br />mapY = 152 / 8 (or 19)<br />; here MAP_WIDTH is 32 (for each tile going across)<br />mapIndex = mapY * MAP_WIDTH + mapX (or 633)<br /></div><br /><br />That value is beyond what I can fit into one byte.<br /><br />In 6502 are there tricks to keep things as simple as possible or would I need to somehow work with &quot;chunks&quot; of data at a time? I'm curious how others solve this problem when working with datasets larger than 256 bytes.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=7897&amp;sid=62813703ec4e915b57695e862d8dd5e8">casprog</a> on Fri Oct 28, 2016 3:52 pm, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7897&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p181460"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181460">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181460&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181460"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Oct 28, 2016 1:21 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 2778<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Check out the indirect indexed addressing mode (<tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda &#40;foo&#41;,y</tt>): <!-- m --><a class="postlink" href="http://www.obelisk.me.uk/6502/addressing.html">http://www.obelisk.me.uk/6502/addressing.html</a><!-- m --><br /><br />Basically the idea is that you're going to construct a 16-bit pointer on the zero page, and then use the indirect addressing to dereference the pointer. You can also add an extra 8-bit offset with the Y register, which is sometimes useful for optimization (in some cases you're forced to construct the entire pointer on zero page, though, and set Y to 0).<br /><br />It's equivalent to doing something like this in C:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">uint8_t y = 123;<br />uint8 *ptr = map + mapY*MAP_WIDTH + mapX;<br />uint8_t value = *(ptr + y); // &quot;lda (ptr),y&quot;<br /></div></div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">fauxgame.com</a>! — Some other stuff I've done: <a href="https://kkfos.aspekt.fi/" class="postlink">kkfos.aspekt.fi</a></span></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p181466"></a>
				<b class="postauthor">casprog</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181466">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181466&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181466"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Oct 28, 2016 3:52 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 28, 2016 12:37 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks, so I'm trying to wrap my head around this being new to asm (and lower level concepts).<br /><br />So if I understand this right, Indirect Indexing is like using pointers. I would need to store the starting address to my map data using two bytes in Zero Page. <br /><br />When I declare data such as:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">myData:<br />&nbsp; &nbsp; &nbsp;.db $06, $07 <br /></div><br />etc, I assume this does not live in Zero Page but is at a higher address?<br /><br />So if I run the following..<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">LDA ($00), y<br /></div><br /><br />Assuming $00 contains the low byte of my pointer this would automatically look up the address parts in $00 and $01, then take those two byte chunks and concat them in reverse order to form the address where my map data lives. The Y register would hold the offset from that starting 16-bit memory address. So if Y was 0, the data value would be $06 from 'myData'. If Y was 1, $07 would be the value.<br /><br /><strong>Edit:</strong> If my data is larger than 256 bytes, would I just change the pointer to +256 to get to the next set and then offset from there? So I would have one long array of data (larger than 256 bytes), then figure out the starting address (from the base address), then offset?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7897&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p181478"></a>
				<b class="postauthor">thefox</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181478">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181478&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181478"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Oct 29, 2016 12:19 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=80.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Mon Jan 03, 2005 10:36 am<br /><b>Posts:</b> 2778<br /><b>Location:</b> Tampere, Finland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">casprog wrote:</div><div class="quotecontent"><strong>Edit:</strong> If my data is larger than 256 bytes, would I just change the pointer to +256 to get to the next set and then offset from there? So I would have one long array of data (larger than 256 bytes), then figure out the starting address (from the base address), then offset?</div><br />It really depends on what you're doing. If you're, say, accessing a 1024 byte array sequentially, then yes, you would do the +256 on the pointer every 256 bytes (note that +256 is simply <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">INC ptr+1</tt>).<br /><br />Example (not tested):<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda #&lt;data<br />sta ptr+0<br />lda #&gt;data<br />sta ptr+1<br />ldy #0<br />ldx #4<br />; transfer 1024 bytes to $2007<br />loop:<br />&nbsp; &nbsp; lda (ptr),y<br />&nbsp; &nbsp; sta $2007<br />&nbsp; &nbsp; iny<br />&nbsp; bne loop ; loop until y=0 (256 times)<br />&nbsp; inc ptr+1 ; +256<br />&nbsp; dex<br />bne loop ; loop until x=0 (4 times)<br /></div></div>

					
						<div class="postbody"><br />_________________<br /><span style="font-size: 85%; line-height: normal">Download STREEMERZ for NES from <a href="http://www.fauxgame.com" class="postlink">fauxgame.com</a>! — Some other stuff I've done: <a href="https://kkfos.aspekt.fi/" class="postlink">kkfos.aspekt.fi</a></span></div>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=80&amp;sid=62813703ec4e915b57695e862d8dd5e8">thefox</a> on Sat Oct 29, 2016 3:23 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=80&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p181479"></a>
				<b class="postauthor">calima</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181479">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181479&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181479"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Oct 29, 2016 1:46 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Tue Oct 06, 2015 10:16 am<br /><b>Posts:</b> 352
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Why aren't you using C? A single lookup per frame will not kill your framerate. cc65 will generate the appropriate code for big arrays.<br /><br />It's fully allowed to cheat with it too, write the code in C, have cc65 translate it into asm, and only then optimize the asm if it's too slow.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7237&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p181480"></a>
				<b class="postauthor">Sumez</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181480">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181480&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181480"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Oct 29, 2016 2:54 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7819_1476188045.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Thu Sep 15, 2016 6:29 am<br /><b>Posts:</b> 47<br /><b>Location:</b> Denmark
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">casprog wrote:</div><div class="quotecontent"><strong>Edit:</strong> If my data is larger than 256 bytes, would I just change the pointer to +256 to get to the next set and then offset from there? So I would have one long array of data (larger than 256 bytes), then figure out the starting address (from the base address), then offset?</div><br /><br />I think it's very rare you'll have more than 256 entries in your data array. If you do, it's bound to be an issue in more ways than one, and you preferably need a smart way of indexing your data into multiple arrays of 256 (like, for level/background data you'd use metatiles).<br />However, if your issue just is that each entry takes up multiple bytes, the smart (and common) way of dealing with it is having multiple arrays representing each byte in your &quot;object&quot; data, that also allows you to smoothly increment or decrement your Y register to access different array entries.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7819&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p181482"></a>
				<b class="postauthor">casprog</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181482">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181482&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181482"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Oct 29, 2016 3:23 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 28, 2016 12:37 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Why aren't you using C?</div><br />Well I'm really enjoying learning 6502 for one. As a learning process it would help me to try doing it all in asm (not writing anything fancy).<br /><br />So what I ended up doing was similar to what thefox posted, only during the final loop I only write the straggler bytes to the nametable just to fill the screen (I will not have scrolling or other screens). It worked well using a pointer and have all my nametable data stored under a single label. Thanks fox for bringing up Indirect Indexing! <br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I think it's very rare you'll have more than 256 entries in your data array. If you do, it's bound to be an issue in more ways than one, and you preferably need a smart way of indexing your data into multiple arrays of 256</div><br /><br />And I believe I just hit that wall : )<br />So I wrote a subroutine that given an xy coordinate traverses the nametable to locate the tile value. It worked, but so slow the larger the xy pair since it had to keep looping and moving the pointer every 256 bytes. So I will either change how I store the data or do as you suggested and create some indexing lookups when I'm trying to quickly check a nametable coordinate. For the program I'm writing my nametable will only have a few tiles I need to check so I won't have anything too crazy, just need to do a lookup when the player moves.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7897&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p181484"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181484">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181484&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181484"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Oct 29, 2016 5:56 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 9396<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">casprog wrote:</div><div class="quotecontent">I wrote a subroutine that given an xy coordinate traverses the nametable to locate the tile value. It worked, but so slow the larger the xy pair since it had to keep looping and moving the pointer every 256 bytes.</div><br />In this situation you'd normally not need to traverse the table, but instead directly calculate the pointer to the piece of information you need from the coordinates. If you keep everything aligned to powers of 2, this can normally be done with bit shifting and a couple of basic operations.<br /><br />For example, if you have a 960-byte array containing the tile indices of a name table, you can create a pointer to any (X, Y) coordinate in it using the following formula: pointer = base + Y * 32 + X, where X is 0..31 and Y is 0..29. In assembly, it could look like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda ycoord<br />sta pointer+1<br />lda #0<br />lsr pointer+1<br />ror<br />lsr pointer+1<br />ror<br />lsr pointer+1<br />ror<br />adc #&lt;base<br />sta pointer+0<br />lda pointer+1<br />adc #&gt;base<br />sta pointer+1<br />ldy xcoord<br />lda (pointer), y</div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p181532"></a>
				<b class="postauthor">casprog</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181532">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181532&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181532"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Oct 29, 2016 9:17 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 28, 2016 12:37 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks tokumaru<br /><br />I'm familiar with that formula but doing it in asm looks a bit interesting. So I'm going through your code example but don't see how this is working. Mind taking a look at my notes?<br /><br />Original sample:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda ycoord<br />sta pointer+1<br />lda #0<br />lsr pointer+1<br />ror<br />lsr pointer+1<br />ror<br />lsr pointer+1<br />ror<br />adc #&lt;base<br />sta pointer+0<br />lda pointer+1<br />adc #&gt;base<br />sta pointer+1<br />ldy xcoord<br />lda (pointer), y<br /></div><br /><br />You start out with the Y coordinate and store that in pointer + 1, which is the base of where pointer lives with an offset of 256 bytes? or 1 byte? So here pointer does not point to the name table else it would overwrite the name table, so here pointer is just a variable that points to a memory location and supports 16 bits so you have a low and high byte.<br /><br />You zero out the accumulator to perform some operations based on the Y coordinate. LSR is a divide by 2 on the Y coordinate and the result is stored in A.<br /><br />The RORs and shifts divide by 2 and move bits back to the right. Does lsr pointer+1 affect the value in the memory address directly while ror by itself affect A? If so, wouldn't A still be 0 due to the lda above it? Something tells me the ror is for the carry flag which takes the last bit from the shift?<br /><br />You add the low byte of base and store that in memory pointed to by the pointer. <br /><br />After loading pointer + 1 (256 byte offset) which holds the initial Y value, you add the high byte and store it back into this address.<br /><br />Finally you load up the X coordinate and use that as an offset from pointer.<br /><br />Sorry if all this sounds basic  <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /> I don't see how this translates to tile = y * MAP_WIDTH + x. I will keep looking this over until it starts to make more sense and will research ROR a bit more when used in conjunction with LSR.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7897&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p181537"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181537">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181537&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181537"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Oct 29, 2016 11:49 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 9396<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Admittedly, I did something not so straightforward with the multiplication... You probably know that shifting left is the same as multiplying by 2, so in order to multiply by 32 you'd normally shift left 5 times. But since we're talking about a 16-bit result here, you can instead multiply by 256 (by putting the original value in the high byte, and clearing the low byte) and then divide by 8 (shifting RIGHT 3 times). It just saves a little CPU time (3 shifts vs 5 shifts).<br /><br /><div class="quotetitle">casprog wrote:</div><div class="quotecontent">You start out with the Y coordinate and store that in pointer + 1, which is the base of where pointer lives with an offset of 256 bytes? or 1 byte?</div><br />&quot;pointer+1&quot; is the high byte of the pointer. By storing a value there, I'm automatically multiplying it by 256.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So here pointer does not point to the name table else it would overwrite the name table</div><br />I'm not sure I understand what you mean. So far, &quot;pointer&quot; doesn't point to anything yet, since we're still calculating its value. When we're finished, it'll point to the start of one of 30 rows of 32 bytes, which are part of a block of raw name table data.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">You zero out the accumulator to perform some operations based on the Y coordinate.</div><br />Yes. I'm temporally using the accumulator to hold the low byte of the pointer. I could have used &quot;pointer&quot; instead, but operations on the accumulator are faster, and since I'm not using it for anything else...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">LSR is a divide by 2 on the Y coordinate and the result is stored in A.</div><br />Not really. &quot;pointer&quot; is a 16-bit value, so when it needs to be shifted, both bytes have to be shifted, and the bit that comes off one byte has to be inserted into the next. I'm shifting &quot;pointer+1&quot; right (LSR), and then I insert the bit that came off of that into the accumulator as I rotate it, using a single instruction (ROR). This is done 3 times, to divide the 16-bit value by 8.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">You add the low byte of base and store that in memory pointed to by the pointer.</div><br />You will only access the memory pointed to by the pointer if you use indirect addressing (<tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda &#40;pointer&#41;, y</tt> or <tt style="margin-left: 2px; margin-right: 2px; padding:3px; background-color: #3355aa; color: white;">lda [pointer], y</tt> if you use NESASM), otherwise you're just manipulating the pointer itself. At this point, I already have the offset of the byte I'm looking for, low byte in A, high byte in &quot;pointer+1&quot;. But since I need a pointer, I have to add the base address to that offset. I have used a constant address here (#&lt;base and #&gt;base), but you could just as well get it from a 16-bit variable that holds the address of the current screen, if your game has multiple screens.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">After loading pointer + 1 (256 byte offset) which holds the initial Y value, you add the high byte and store it back into this address.</div><br />16-bit additions (as well as 24-bit, 32-bit, and so on) must be performed from the lower byte to the higher byte, so that overflows are properly carried over to the next byte.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Finally you load up the X coordinate and use that as an offset from pointer.</div><br />Correct. I could just as well have added the X coordinate to the pointer (as the formula suggests), but since the 6502 doesn't have an indirect addressing mode that isn't indexed (you always have to use Y as an index), it's faster to just load the coordinate in Y and let the CPU calculate the final address for me, rather than do another 16-bit addition and load Y with 0.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Sorry if all this sounds basic</div><br />Not at all! I did take a few shortcuts that deserved an explanation. I think it's great that people are still interested in learning 6502 assembly. Some will say it's frustrating, but I think that coming up with things like these little optimizations is really fun.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p181631"></a>
				<b class="postauthor">casprog</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181631">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181631&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181631"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Oct 30, 2016 10:44 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 28, 2016 12:37 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ahh, think I got it!<br /><br />So the math there is very clever. So say my <strong>x is 0</strong> and my <strong>y is 2</strong> (keeping it simple).<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lda yCoord<br />sta p+1 ; start out with 2 (or y)<br />lda #0 ; zero out the accumulator<br />lsr p+1 ; divide by 2 and get 00000001 or 1<br /><br />; at this point the carry bit is 0<br />ror ; accumulator still 00000000<br /><br />lsr p+1 ; the 1 drops off into carry and p+1 is now 0<br />ror ; accumulator is now 10000000<br /><br />lsr p+1 ; carry is 0 and p+1 is still 0<br />ror ; accumulator is now 01000000 or 64 (y * map width)<br /><br />; A = 64<br />; p+1 = 0<br /><br />; add base to pointer then use x coord<br /></div> <br /><br />So in my example, there is nothing to add for x and my lookup is 64 + base.<br /><br />So starting out using the high byte just ensures the overflow will end up in the low byte where it belongs? (for 2 byte data).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7897&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p181633"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181633">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181633&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181633"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Oct 30, 2016 12:00 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 9396<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">That's correct.<br /><br /><div class="quotetitle">casprog wrote:</div><div class="quotecontent">So starting out using the high byte just ensures the overflow will end up in the low byte where it belongs? (for 2 byte data).</div><br />Regardless of the direction in which you're shifting, the bit that comes off one byte needs to be shifted into the next byte. When shifting left, you first ASL the low byte, then ROL the high byte. If shifting right, first LSR the high byte, then ROL the low byte.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p181640"></a>
				<b class="postauthor">casprog</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181640">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181640&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181640"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Oct 30, 2016 3:07 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 28, 2016 12:37 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks Tokumaru, I was able to get this working.<br /><br />I wrote a subroutine to get map x/y based on player's screen x/y first.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; calculate map x and y based on screen position x and y<br />; store position x in X register before calling<br />; store position y in Y register before calling<br />; this will overwrite X and Y with map position<br />; divide by 8 (tile size) which is 2 to the 3rd power - three right shifts each<br />getMapXY:<br />&nbsp; &nbsp; TXA<br />&nbsp; &nbsp; LSR A<br />&nbsp; &nbsp; LSR A<br />&nbsp; &nbsp; LSR A<br />&nbsp; &nbsp; TAX&nbsp; &nbsp; &nbsp;; got map x<br />&nbsp; &nbsp; TYA<br />&nbsp; &nbsp; LSR A<br />&nbsp; &nbsp; LSR A<br />&nbsp; &nbsp; LSR A<br />&nbsp; &nbsp; TAY&nbsp; &nbsp; &nbsp;; got map y<br />&nbsp; &nbsp; RTS<br /></div><br /><br />Then the tile getter based off your original example:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; get tile at map xy<br />; x and y registers must have map x and map y values before calling<br />; formula is base pointer + y * map_width + x (map width is 32)<br />getMapTile:<br />&nbsp; &nbsp; ; first operation is y * 32<br />&nbsp; &nbsp; TYA<br />&nbsp; &nbsp; STA tempPtr2 + 1&nbsp; &nbsp; ; store y in high byte<br />&nbsp; &nbsp; LDA #$00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this will hold bits that shift off<br />&nbsp; &nbsp; LSR tempPtr2 + 1<br />&nbsp; &nbsp; ROR A<br />&nbsp; &nbsp; LSR tempPtr2 + 1<br />&nbsp; &nbsp; ROR A<br />&nbsp; &nbsp; LSR tempPtr2 + 1<br />&nbsp; &nbsp; ROR A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; three divides by 2 and rotation to mimic * 32<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; A will hold the low byte and p + 1 holds the high<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; next we add the base pointer and x<br />&nbsp; &nbsp; ADC #LOW(bg)<br />&nbsp; &nbsp; STA tempPtr2 + 0&nbsp; &nbsp; ; byte 1 of 16 bit pointer<br />&nbsp; &nbsp; LDA tempPtr2 + 1<br />&nbsp; &nbsp; ADC #HIGH(bg)<br />&nbsp; &nbsp; STA tempPtr2 + 1<br /><br />&nbsp; &nbsp; TXA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; now get x for offset<br />&nbsp; &nbsp; TAY<br /><br />&nbsp; &nbsp; LDA &#91;tempPtr2&#93;, y&nbsp; &nbsp; ; get tile<br />&nbsp; &nbsp; RTS<br /></div><br /><br />I've only tested this while moving up so far but it works, I'm able to determine when a &quot;solid&quot; is in the map. Thanks for all the help.<br /><br />Curious, but how come we don't clear the carry flag when adding the background low and high bytes? Would it be safe to always CLC before doing that?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7897&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p181641"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181641">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181641&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181641"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Oct 30, 2016 3:24 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 9396<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">casprog wrote:</div><div class="quotecontent">Curious, but how come we don't clear the carry flag when adding the background low and high bytes? Would it be safe to always CLC before doing that?</div><br />Since A was 0 when you started shifting bits into it, the last bit to come out of it is guaranteed to be 0, meaning the carry will already be clear every time before the addition, so there's no need for an explicit CLC. In cases like this, I often write the unneeded instructions anyway, but I comment them out. This helps me see when certain tasks would normally be performed at those times, but that specific context allowed for a little optimization to take place.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p181646"></a>
				<b class="postauthor">casprog</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p181646">Re: Dealing with a large array and lookup</a></div><div style="float: right;"><a href="./viewtopic.php?p=181646&amp;sid=62813703ec4e915b57695e862d8dd5e8#p181646"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sun Oct 30, 2016 5:40 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Oct 28, 2016 12:37 pm<br /><b>Posts:</b> 10
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Gotcha, thanks!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7897&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=10&amp;t=14995&amp;sid=62813703ec4e915b57695e862d8dd5e8"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=14995&amp;sid=62813703ec4e915b57695e862d8dd5e8"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>1</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 15 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=62813703ec4e915b57695e862d8dd5e8">Board index</a> &#187; <a href="./viewforum.php?f=24&amp;sid=62813703ec4e915b57695e862d8dd5e8">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10&amp;sid=62813703ec4e915b57695e862d8dd5e8">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <a href="./memberlist.php?mode=viewprofile&amp;u=6595&amp;sid=62813703ec4e915b57695e862d8dd5e8">93143</a> and 4 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php?sid=62813703ec4e915b57695e862d8dd5e8"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="14995" />
<input type="hidden" name="sf" value="msgonly" />
<input type="hidden" name="sid" value="62813703ec4e915b57695e862d8dd5e8" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php?sid=62813703ec4e915b57695e862d8dd5e8" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10" selected="selected">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
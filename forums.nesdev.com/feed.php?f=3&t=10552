<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=3&amp;t=10552" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2013-10-04T14:01:41-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=3&amp;t=10552</id>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2013-10-04T14:01:41-07:00</updated>
<published>2013-10-04T14:01:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118951#p118951</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118951#p118951"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118951#p118951"><![CDATA[
That's really helpfull i won't hesitate to ask. thxs Koitsu!!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Fri Oct 04, 2013 2:01 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2013-10-04T13:16:32-07:00</updated>
<published>2013-10-04T13:16:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118949#p118949</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118949#p118949"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118949#p118949"><![CDATA[
I understand.  And what I'm telling you is: if there is something on the Wiki (written in English) which you don't understand, post here on the forum with a link or quote of the part you do not understand, and someone here can explain it to you in Spanish / translate it into Spanish for you.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Fri Oct 04, 2013 1:16 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2013-10-04T11:56:29-07:00</updated>
<published>2013-10-04T11:56:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118944#p118944</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118944#p118944"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118944#p118944"><![CDATA[
<div class="quotetitle">koitsu wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">That's what i did before to Battletoads run, but i decided to do it the &quot;hard way&quot;, there are still some blargg's test that my emu doesn't pass them well and since my mother tongue is not english, sometimes it's difficult to me to understand things. The same happens to me with the Wiki.  <img src="http://forums.nesdev.com/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br /></div><br />Slightly off-topic but not entirely: we have lots of people here who speak fluent Spanish (I can think of 4 off the top of my head), although I don't think any of them speak Argentinian dialect (if that matters).  So if you're confused by something here, or from the Wiki, it's perfectly OK to ask if someone who speaks Spanish could translate something for you.</div><br /><br />Maybe i sould said &quot;my english is not good enough&quot; for the docs. That's a different thing  <img src="http://forums.nesdev.com/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br />But i try, i really try.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Fri Oct 04, 2013 11:56 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[koitsu]]></name></author>
<updated>2013-10-04T11:30:56-07:00</updated>
<published>2013-10-04T11:30:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118943#p118943</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118943#p118943"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118943#p118943"><![CDATA[
<div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />That's what i did before to Battletoads run, but i decided to do it the &quot;hard way&quot;, there are still some blargg's test that my emu doesn't pass them well and since my mother tongue is not english, sometimes it's difficult to me to understand things. The same happens to me with the Wiki.  :lol:<br /></div><br />Slightly off-topic but not entirely: we have lots of people here who speak fluent Spanish (I can think of 4 off the top of my head), although I don't think any of them speak Argentinian dialect (if that matters).  So if you're confused by something here, or from the Wiki, it's perfectly OK to ask if someone who speaks Spanish could translate something for you.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3">koitsu</a> — Fri Oct 04, 2013 11:30 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2013-10-04T04:27:31-07:00</updated>
<published>2013-10-04T04:27:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118937#p118937</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118937#p118937"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118937#p118937"><![CDATA[
<div class="quotetitle">MottZilla wrote:</div><div class="quotecontent"><br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">Any advice? thxs.<br /></div><br /><br />You can cheat and decide if Mapper == 7, have Sprite Zero set whenever the first visible pixel of the sprite is drawn, rather than when one is drawn along with a background pixel. It will prevent the game from hanging.<br /><br />Otherwise it's about your CPU, PPU, and NMI timing being just right.</div><br /><br />That's what i did before to Battletoads run, but i decided to do it the &quot;hard way&quot;, there are still some blargg's test that my emu doesn't pass them well and since my mother tongue is not english, sometimes it's difficult to me to understand things. The same happens to me with the Wiki.  <img src="http://forums.nesdev.com/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Fri Oct 04, 2013 4:27 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[MottZilla]]></name></author>
<updated>2013-10-04T01:30:31-07:00</updated>
<published>2013-10-04T01:30:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118936#p118936</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118936#p118936"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118936#p118936"><![CDATA[
<div class="quotetitle">Anes wrote:</div><div class="quotecontent"><br />Any advice? thxs.<br /></div><br /><br />You can cheat and decide if Mapper == 7, have Sprite Zero set whenever the first visible pixel of the sprite is drawn, rather than when one is drawn along with a background pixel. It will prevent the game from hanging.<br /><br />Otherwise it's about your CPU, PPU, and NMI timing being just right.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1726">MottZilla</a> — Fri Oct 04, 2013 1:30 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2013-10-01T22:45:46-07:00</updated>
<published>2013-10-01T22:45:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118868#p118868</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118868#p118868"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118868#p118868"><![CDATA[
<div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Be sure you pass the CPU timing test<br /></div><br /><br />Official passed well. i Fixed Abs(x) NOP's and EB -&gt; nop or sbc?.<br /><br />Should i implement unofficial instructions?? I mean i know i should, but Battletoads doesn't use them or does it?<br /><br />Edit: no, it doesn't use unofficial. The problem is elsewhere.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Tue Oct 01, 2013 10:45 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[blargg]]></name></author>
<updated>2013-10-01T22:12:54-07:00</updated>
<published>2013-10-01T22:12:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118866#p118866</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118866#p118866"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118866#p118866"><![CDATA[
Be sure you pass the <a href="http://wiki.nesdev.com/w/index.php/Emulator_tests#CPU" class="postlink">CPU timing test</a>.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=17">blargg</a> — Tue Oct 01, 2013 10:12 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2013-10-01T20:50:11-07:00</updated>
<published>2013-10-01T20:50:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118863#p118863</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118863#p118863"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118863#p118863"><![CDATA[
<div class="quotetitle">ulfalizer wrote:</div><div class="quotecontent"><br />Second level in Battletoads is a bitch. If it's any help, a hang means your CPU is too fast relative your PPU and enables rendering too early (before the vertical bump on that scanline, meaning the vertical bump occurs). Battletoads is only really sensitive in one direction, and having the CPU be relatively too slow makes it perfectly happy, even if it's some way off. I guess that's why some emulators add a fudge factor to the NMI and the like.<br /></div><br /><br />Yeah, you are right is a f***n bitch. But i'll try to make what you are telling me.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Tue Oct 01, 2013 8:50 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[ulfalizer]]></name></author>
<updated>2013-10-01T20:40:56-07:00</updated>
<published>2013-10-01T20:40:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118862#p118862</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118862#p118862"/>
<title type="html"><![CDATA[Re: PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118862#p118862"><![CDATA[
Second level in Battletoads is a bitch. If it's any help, a hang means your CPU is too fast relative your PPU and enables rendering too early (before the vertical bump on that scanline, meaning the vertical bump occurs). Battletoads is only really sensitive in one direction, and having the CPU be relatively too slow makes it perfectly happy, even if it's some way off. I guess that's why some emulators add a fudge factor to the NMI and the like.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5911">ulfalizer</a> — Tue Oct 01, 2013 8:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anes]]></name></author>
<updated>2013-10-01T20:32:31-07:00</updated>
<published>2013-10-01T20:32:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118860#p118860</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118860#p118860"/>
<title type="html"><![CDATA[PPU accuracy and Battletoads]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=10552&amp;p=118860#p118860"><![CDATA[
The nesdev wiki says:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Battletoads requires fairly precise CPU and PPU timing and a fairly robust sprite zero implementation. It leaves rendering disabled for a number of scanlines into the visible frame to gain extra VRAM manipulation time and then enables it. If the timing is off so that the background image appears too high or too low at this point, a sprite zero hit will fail to trigger, hanging the game. This usually occurs immediately upon entering the first stage if the timing is off by enough, and might cause random hangs at other points otherwise.<br /></div><br /><br />Well, my emu is suffering that, the image appears too high and in &quot;Battletoads and Double Dragon&quot; too.<br /><br />I have been Reading the wiki and according to the &quot;render&quot; diagram/picture:<br /><br />- Vblank is set on scanline 241 cycle 1? (counting from 0-340) <br />- Is NMI pulled low (triggered) in that moment?<br /><br />According to blargg's ppu tests nmi timing throws me error &quot;3) NMI occurred 2 PPU clocks too early&quot;. <br />For that reason i do a hack:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if (scanline == 241 &amp;&amp; cycle == 1)<br />{    <br />    on_vblank = 1;<br />    if (nmi_onvblank)<br />        nmi_pending = 1;<br />}<br /><br />if (scanline == 241 &amp;&amp; cycle == 15)<br />{    <br />    if (nmi_pending)<br />    {<br />        SetCpuNMIPending();<br />        nmi_pending = 0;<br />    }<br />}<br /></div><br /><br />That way the NMI timming test throw me error #8, but this this time &quot;BattleToads and Double Dragon&quot; is playable and &quot;Battletoads&quot; hangs ramdomly in the second level.<br /><br />Any advice? thxs.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=72">Anes</a> — Tue Oct 01, 2013 8:32 pm</p><hr />
]]></content>
</entry>
</feed>
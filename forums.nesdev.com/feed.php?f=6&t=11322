<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=6&amp;t=11322" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2014-08-14T12:55:41-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=6&amp;t=11322</id>
<entry>
<author><name><![CDATA[l_oliveira]]></name></author>
<updated>2014-08-14T12:55:41-07:00</updated>
<published>2014-08-14T12:55:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132562#p132562</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132562#p132562"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132562#p132562"><![CDATA[
<div class="quotetitle">lidnariq wrote:</div><div class="quotecontent"><br />Crashes after I change the track number twice ?<br /></div><br /><br />There's only one song on that .nes file. Famitracker driver still tries to find &quot;song 2&quot; even if there's none, hence the crash...<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4943">l_oliveira</a> — Thu Aug 14, 2014 12:55 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2014-08-14T11:02:11-07:00</updated>
<published>2014-08-14T11:02:11-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132561#p132561</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132561#p132561"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132561#p132561"><![CDATA[
Crashes after I change the track number twice ?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Thu Aug 14, 2014 11:02 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[l_oliveira]]></name></author>
<updated>2014-08-14T08:44:36-07:00</updated>
<published>2014-08-14T08:44:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132559#p132559</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132559#p132559"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=132559#p132559"><![CDATA[
Just letting you know I didn't give up yet on this yet ... Just hella busy with other things ...<br /><br />This is a very large banked song for you to listen to.<br /><br />The VRC7 rocks, man !<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4943">l_oliveira</a> — Thu Aug 14, 2014 8:44 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[l_oliveira]]></name></author>
<updated>2014-07-27T18:40:06-07:00</updated>
<published>2014-07-27T18:40:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131648#p131648</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131648#p131648"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131648#p131648"><![CDATA[
<div class="quotetitle">l_oliveira wrote:</div><div class="quotecontent"><br />I'll do more testing to try to figure out why it only work on emulators but apparently seems to be a issue with the driver itself because when I tried a non banked song which used the same driver it failed with the same exact behavior.<br /></div><br /><br /><span style="color: #FF0000">I spent the WHOLE WEEKEND tinkering with this and in the end THERE WERE NOTHING WRONG WITH THE CODE.</span><br /><br />  -_______-;<br /><br /><br />The problem was fuxxoring crappy unreliable flash memories. <br /><br />Several types of flash memory seem to be unreliable when used in a configuration where the /OE pin is to be tied to GND.<br />Even &quot;high quality&quot; Intel chips gave me this headache.<br />I suppose I'll stick to Atmel flash chips when working with 6502 based stuff ... <img src="http://forums.nesdev.com/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br /><br />Once I burnt &quot;Dancing Mad&quot; on a Atmel flash chip the thing booted properly and played the song.<br /><br />edit: Disassembler ? I'm loading the NSF file on FCEUX and debugging it there (debugger with conditional watchpoints and breakpoints, hexa editor/viewer and instruction logging, not to mention a very decent real time disassembler).  The point of doing it this way is that you can watch things happening in real time. Also helps with learning the processor.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4943">l_oliveira</a> — Sun Jul 27, 2014 6:40 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[freem]]></name></author>
<updated>2014-07-26T15:30:09-07:00</updated>
<published>2014-07-26T15:30:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131588#p131588</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131588#p131588"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131588#p131588"><![CDATA[
<a href="http://bisqwit.iki.fi/source/nescom.html" class="postlink">The nescom part of site</a> seems to be work for me... The git server looks like it's down, though.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=5692">freem</a> — Sat Jul 26, 2014 3:30 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[lidnariq]]></name></author>
<updated>2014-07-26T15:19:10-07:00</updated>
<published>2014-07-26T15:19:10-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131587#p131587</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131587#p131587"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131587#p131587"><![CDATA[
I have been astoundingly pleased with bisqwit's clever-disasm (part of nescom). ... but his site seems to be down at the moment.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3512">lidnariq</a> — Sat Jul 26, 2014 3:19 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[yogi]]></name></author>
<updated>2014-07-26T14:46:32-07:00</updated>
<published>2014-07-26T14:46:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131586#p131586</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131586#p131586"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131586#p131586"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br /><div class="quotetitle">yogi wrote:</div><div class="quotecontent">Looking for a stand alone disassembler.<br /></div><br />I used <a href="https://cc65.github.io/cc65/doc/da65.html" class="postlink">da65</a> (from the makers of cc65) to recover my DPCM Split demo after a laptop died and all I had was the .nes binary.</div><br />OK will give that a try, Thanks.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6258">yogi</a> — Sat Jul 26, 2014 2:46 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-07-26T14:24:41-07:00</updated>
<published>2014-07-26T14:24:41-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131585#p131585</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131585#p131585"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131585#p131585"><![CDATA[
<div class="quotetitle">yogi wrote:</div><div class="quotecontent"><br />Looking for a stand alone disassembler.<br /></div><br />I used <a href="https://cc65.github.io/cc65/doc/da65.html" class="postlink">da65</a> (from the makers of cc65) to recover my DPCM Split demo after a laptop died and all I had was the .nes binary.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sat Jul 26, 2014 2:24 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[yogi]]></name></author>
<updated>2014-07-26T14:11:36-07:00</updated>
<published>2014-07-26T14:11:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131584#p131584</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131584#p131584"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131584#p131584"><![CDATA[
Hi Ya,<br /><div class="quotetitle">l_oliveira wrote:</div><div class="quotecontent"><br />Yogi, while your goal (at the moment) seems to be pack a lot of songs on a cartridge, I wanted mostly to get the &quot;in driver&quot; banking working so I could play the longer, bigger songs.<br /></div><br /><br />   Your efforts are greatly appreciated; I have barely scratched the surface of the NSF format and am trying to learn more. This project (the VRC7 and SNROM) is my first with the NES and it was something I thought I could:<br />A. Learn NES/Famicom development<br />B. Build something that feeds my personal interest and the Chiptune crowd.<br />So Please I hope you don't think I'm not interested in your project, just the opposite! <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />Yesterday I did a experiment with a banked N163 song which at the moment only work on emulators. I'll do more testing to try to figure out why it only work on emulators but apparently seems to be a issue with the driver itself because when I tried a non banked song which used the same driver it failed with the same exact behavior.<br /><br />This MCK driver is interesting because it seems to only bank $A000-$BFFF and $C000-$DFFF which matches perfectly the required behavior for operating on the real hardware.  <br /><br />Even then, I had to do some changes on the banking code:<br /><br />- Modify mapper init on VegaPlay to init mapper for low bank numbers as I started to put the NSF at the start of the ROM file.<br />- Modify the NSF native init code to not touch memory regions used by VegaPlay.<br />- Modify the NSF banking code to not touch registers it's not supposed to and modify the actual banking code to use one 8KB bank instead of two 4KB banks:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Original:<br /> 00:816E:C9 0E      CMP #$0E<br /> 00:8170:B0 0D      BCS $817F<br /> 00:8172:8D FA 5F  STA $5FFA<br /> 00:8175:18          CLC<br /> 00:8176:69 01      ADC #$01<br /> 00:8178:C9 0E      CMP #$0E<br /> 00:817A:B0 03      BCS $817F<br /> 00:817C:8D FB 5F  STA $5FFB<br /> 00:817F:60           RTS<br /><br />Edited:<br /> 00:816E:C9 0E      CMP #$0E<br /> 00:8170:B0 0D      BCS $817F<br /> 00:8172:EA          NOP<br /> 00:8173:EA          NOP<br /> 00:8174:EA          NOP<br /> 00:8175:EA          NOP<br /> 00:8176:EA          NOP<br /> 00:8177:EA          NOP<br /> 00:8178:EA          NOP<br /> 00:8179:EA          NOP<br /> 00:817A:EA          NOP<br /> 00:817B:6A          ROR           &lt;- Rotate 1 bit right because we're banking with 8KB banks, so we have 1 address line less to deal with.<br /> 00:817C:8D 00 E8  STA $E800 &lt;- This write originally went to $5FFA. We discard $5FFB write completely hence the NOPs.<br /> 00:817F:60           RTS<br /><br /></div><br /><br />- Relocate the stuff which used to get mapped at $E000-$FFFF to the end of the ROM image and fix some data the NSF had on the vectors position to stay at $FFE8 instead ...<br /><br />(this is a work in progress)<br /></div><br />  Quite interesting; which disassembler do you use? I've tried FCEUltra but it's timing is not setup right or this XP box just doesn't like it; it runs very badly and stutters horribly. Looking for a stand alone disassembler.<br />   I implemented the ControllerTest code you posted with mixed results. It runs fine and I think is faster on average, than the original routine I had; but the troubled NSFs have the same errors as when using the original code. So I'm thinking there is a subtle bug somewhere else. Or it is due to the frequency I read the controllers in the Main Loop and the timing of the DMA activity. In which case I will have to live with it and use the workaround of not reading the 'Right' button, which is not the worst thing (it speeds up the Main Loop). At the very least, the good news is I have a definite cycle count for each pass of the routine.<br />   Also changed the handling of the Sprite ram, to allow easy reassignment of it's ram location. WRAM should be the safest place; if the NSF clears WRAM, it will destroy the runtime code as well, so this software will not support it anyway. But it's flexible enough if I needed to use system ram at some point or in another project.<br />   I just ordered one of INL's Sunsoft 5B carts so next on the agenda is to try out your 5B code! Looking forward to it,<br />Yogi<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6258">yogi</a> — Sat Jul 26, 2014 2:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[l_oliveira]]></name></author>
<updated>2014-07-25T06:04:22-07:00</updated>
<published>2014-07-25T06:04:22-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131520#p131520</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131520#p131520"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131520#p131520"><![CDATA[
Yogi, while your goal (at the moment) seems to be pack a lot of songs on a cartridge, I wanted mostly to get the &quot;in driver&quot; banking working so I could play the longer, bigger songs.<br /><br />Yesterday I did a experiment with a banked N163 song which at the moment only work on emulators. I'll do more testing to try to figure out why it only work on emulators but apparently seems to be a issue with the driver itself because when I tried a non banked song which used the same driver it failed with the same exact behavior.<br /><br />This MCK driver is interesting because it seems to only bank $A000-$BFFF and $C000-$DFFF which matches perfectly the required behavior for operating on the real hardware.  <br /><br />Even then, I had to do some changes on the banking code:<br /><br />- Modify mapper init on VegaPlay to init mapper for low bank numbers as I started to put the NSF at the start of the ROM file.<br />- Modify the NSF native init code to not touch memory regions used by VegaPlay.<br />- Modify the NSF banking code to not touch registers it's not supposed to and modify the actual banking code to use one 8KB bank instead of two 4KB banks:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Original:<br /> 00:816E:C9 0E      CMP #$0E<br /> 00:8170:B0 0D      BCS $817F<br /> 00:8172:8D FA 5F  STA $5FFA<br /> 00:8175:18          CLC<br /> 00:8176:69 01      ADC #$01<br /> 00:8178:C9 0E      CMP #$0E<br /> 00:817A:B0 03      BCS $817F<br /> 00:817C:8D FB 5F  STA $5FFB<br /> 00:817F:60           RTS<br /><br />Edited:<br /> 00:816E:C9 0E      CMP #$0E<br /> 00:8170:B0 0D      BCS $817F<br /> 00:8172:EA          NOP<br /> 00:8173:EA          NOP<br /> 00:8174:EA          NOP<br /> 00:8175:EA          NOP<br /> 00:8176:EA          NOP<br /> 00:8177:EA          NOP<br /> 00:8178:EA          NOP<br /> 00:8179:EA          NOP<br /> 00:817A:EA          NOP<br /> 00:817B:6A          ROR           &lt;- Rotate 1 bit right because we're banking with 8KB banks, so we have 1 address line less to deal with.<br /> 00:817C:8D 00 E8  STA $E800 &lt;- This write originally went to $5FFA. We discard $5FFB write completely hence the NOPs.<br /> 00:817F:60           RTS<br /><br /></div><br /><br />- Relocate the stuff which used to get mapped at $E000-$FFFF to the end of the ROM image and fix some data the NSF had on the vectors position to stay at $FFE8 instead ...<br /><br />(this is a work in progress)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4943">l_oliveira</a> — Fri Jul 25, 2014 6:04 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[l_oliveira]]></name></author>
<updated>2014-07-24T18:50:13-07:00</updated>
<published>2014-07-24T18:50:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131509#p131509</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131509#p131509"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131509#p131509"><![CDATA[
The code which tampers with the sprites buffer on the Gonzales song is like this:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent"> 06:8080:20 93 80  JSR $8093<br /> 06:8083:60          RTS<br />....<br /> 06:8093:A9 00      LDA #$00<br /> 06:8095:A2 00      LDX #$00<br /> 06:8097:9D 00 00  STA $0000,X @ $0000 = #$03<br /> 06:809A:9D 00 02  STA $0200,X @ $0200 = #$8E<br /> 06:809D:9D 00 03  STA $0300,X @ $0300 = #$00<br /> 06:80A0:9D 00 04  STA $0400,X @ $0400 = #$00<br /> 06:80A3:9D 00 05  STA $0500,X @ $0500 = #$37<br /> 06:80A6:9D 00 06  STA $0600,X @ $0600 = #$00<br /> 06:80A9:9D 00 07  STA $0700,X @ $0700 = #$00<br /> 06:80AC:E8          INX<br /> 06:80AD:D0 E8      BNE $8097<br /> 06:80AF:A9 00      LDA #$00<br /></div><br /><br />It's quite obviously an ram clear routine which also happens to be similar to the existing one on VegaPlay. <br />At least it leaves the stack alone ...<br />(hehehe)<br /><br />To fix this I just changed the JSR routine at the init address ($8080) to call $80AF instead of $8093.<br /><br />Still I don't understand why someone would put a ram clear routine on a NSF.<br /><br />Clearing the RAM supposedly is meant to be done by the NFS player firmware.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4943">l_oliveira</a> — Thu Jul 24, 2014 6:50 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[yogi]]></name></author>
<updated>2014-07-24T18:34:14-07:00</updated>
<published>2014-07-24T18:34:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131506#p131506</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131506#p131506"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131506#p131506"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />If you put the display list at $6000, some playback engine will probably end up trashing it there too. You might need to make it configurable per NSF.<br /></div><br />   That is a good point, is there any ram that is un-molested by NSF play routines? <br />   As l_oliveira noted there is a vast gray area as to what a NSF can do. Am I wrong in thinking the vast majority of NSF Play routines don't touch WRAM? I know WRAM addresses are part of the NSF definition but in practice how many Trackers/Composition tool's player code use it? Only a very small number of NSF I have tried had a issue with ram at $0500 let alone WRAM (none) but my sample size is very small and I haven't messed at all with game rips (which may be more probable to use WRAM).<br />   But this brings up another point I've been wondering about. As this code switches between NSF, should I be clearing the low ram as I do in the reset routine? (haven't see any problem so far, but...) All my VARs and Sprites are in WRAM now, so clearing the lo ram is only a benefit to the loaded NSF. It's really not clear to me if the NSF handles the initialization of the ram it uses. <br />   Then again the NSF format was never assumed to be running on a console, right?<br />Yogi<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6258">yogi</a> — Thu Jul 24, 2014 6:34 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[l_oliveira]]></name></author>
<updated>2014-07-24T16:21:05-07:00</updated>
<published>2014-07-24T16:21:05-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131503#p131503</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131503#p131503"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131503#p131503"><![CDATA[
The issue with $500 is that some NSFs do clear the RAM when you call their init routine.<br /><br />First time I saw that was on the 5B driver from mmlshare.com, on this  Gato/Gonzales music I just posted.<br /><br />In my humble opinion, the NSF standard is just as bad as the whole INES problem with only 256 mapper slots ... A big mess. XD<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=4943">l_oliveira</a> — Thu Jul 24, 2014 4:21 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2014-07-24T16:06:12-07:00</updated>
<published>2014-07-24T16:06:12-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131502#p131502</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131502#p131502"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131502#p131502"><![CDATA[
If you put the display list at $6000, some playback engine will probably end up trashing it there too. You might need to make it configurable per NSF.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Thu Jul 24, 2014 4:06 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[yogi]]></name></author>
<updated>2014-07-24T15:40:21-07:00</updated>
<published>2014-07-24T15:40:21-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131498#p131498</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131498#p131498"/>
<title type="html"><![CDATA[Re: Preview of my modded VegaPlay]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=11322&amp;p=131498#p131498"><![CDATA[
Hey Guys,<br />You've been busy l_oliveira. ++ on the Sunsoft 5B <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> With INL's flash cart this would be killer!<br /> The N163 sounds so good, may have to go hunting on Ebay for a donor cart. Looked over the code but will need a closer look for an indepth understanding. Lik'en It<br /><br />Been working on another preview. This time moved the Sprite Ram into WRAM @ $6000, had a few NSF that trashed it @ $0500.<br /><br />  As to the DMA bug, I took the coward's way out; now the code only checks the 'Start' button during playback. You can select Song/NSF only when NO song is playing. This avoids the random false 'Right' trigger, but it's not a great solution. So there is extra button pressing, Start Button to stop the playing song and then select a new song/NSF.<br />   I tried your ControllerTest routine, l_oliveira, but ran into issues that broke the main code so I set it aside for the moment. <br />   As things are I had planned to use Right/Left buttons on Controller 2 for  Midi controlled Frame FF and Rewind. Wouldn't be the end of the world if I have to re-assign these functions to other buttons, just have to adjust my PIC code. Hummm<br /><br />   When I included this 'pre check' just after my Controller1Test<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   LDA NewButtons      ; Check for a New Active buttons<br />   BEQ BreakOut      ; NewButtons=$FF, No buttons pressed<br />   CMP OldButtons      ; Pressed buttons same as last MainLoop Pass?<br />   BNE Update         ; No , so test Controller 1 buttons<br />   <br />BreakOut:<br />   JMP MainLoop</div><br />This improved playback in the last Preview code, but didn't eliminate the DMA bug.<br /><br />   The odd effect was, the NSF that would trip a bankswitch would never do it at the same Frame, some NSFs did it after 3-6 loops. This leads me to think it's a side effect of my MainLoop's controller read frequency and the DPCM useage lining up at random (or very long cycle) points where I have two false reads in a row that are affected by the DMA. Bears more thought.<br /><br />   Anyway, here is the latest build preview. A new group of songs from the Famicomp Mini 10. NSF #3 is very experimental and 'beepy'; when I first listened to it in my build, I freaked out. The song REALLY does some weird tempo breaks and sounds like the NES is broken at some points <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />  NSF #5 is the same song from last preview, Without random banking.<br />Main_vpMMC16.nes<br />Yogi<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=6258">yogi</a> — Thu Jul 24, 2014 3:40 pm</p><hr />
]]></content>
</entry>
</feed>
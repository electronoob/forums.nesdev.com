<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - question about which cc PPU updates things</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">question about which cc PPU updates things</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=4628">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=4628</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Anes</b> [ Fri Dec 05, 2008 9:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>question about which cc PPU updates things</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />hi, for over a year i discontinnued my work with my emulator and stopped posting (and reading). 
<br />
<br />I see new people have registered and are posting. Wich i think is good.
<br />
<br />Well i retook the work again and i was looking the old posts. I can't find a post that says in wich cc the ppu updates things. You know, when the ppu updates/clocks its counters.
<br />
<br />Nice to see you again!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Sat Dec 06, 2008 1:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If all else fails you can try to read Nestopia or Nintendulator's source code. I imagine they are pretty accurate in which cycle does what.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Anes</b> [ Sat Dec 06, 2008 1:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sorry i meant that people here knows the cc and there is a post that i can't find that tell them. I don't have any problem looking at a source, but if someone points me to the right thread i will appreciate it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Sat Dec 06, 2008 5:10 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: question about which cc PPU updates things</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">I can't find a post that says in wich cc the ppu updates things. You know, when the ppu updates/clocks its counters.</div>
<br />
<br />Hello, welcome back. ^_^
<br />
<br />Well, third part sources are a solid reference, but most of them have empirical things, or <em>spaghetti</em>. <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /> Anyway, as far as I know, the PPU has no internal counters. You take the 341 PPU clocks as reference, plus the scanline "counting".
<br />
<br />Bah, try reading <a href="http://nesdev.com/bbs/viewtopic.php?p=1541#1541" class="postlink">here</a> and <a href="http://nesdev.com/bbs/viewtopic.php?p=887#887" class="postlink">here</a>. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Anes</b> [ Sat Dec 06, 2008 7:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hi again fx3. Maybe i didn't use the correct words. To say it in other ones: 
<br />
<br />In wich scanline cc does the ppu:
<br />
<br />1) Copy "temp" to "addr" in the prerender scanline ...
<br />2) Gets TileX and NT low bit (H) from "temp" to "addr" ...
<br />3) Clocks (FineY + TileY)  ...
<br />
<br />... ?
<br />
<br />According the docs (assuming 1-341 range):
<br />
<br />1) cc -&gt; 1
<br />2) cc -&gt; 256
<br />3) cc -&gt; 256
<br />
<br />is that correct?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Sat Dec 06, 2008 8:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />- Please, read the linked topics again. ^_^
<br />
<br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">1) Copy "temp" to "addr" in the prerender scanline ...</div><br />304, as far as I know of.<br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">2) Gets TileX and NT low bit (H) from "temp" to "addr" ...</div><br />256, again, for my best.<br /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">3) Clocks (FineY + TileY)  ...</div>
<br />I'm unsure, but looks like at 252.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Anes</b> [ Sat Dec 06, 2008 8:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ok, sorry to bother you: those cc assumming 0-340 range or 1-341 range? I think its 1-341, but i ask to be sure.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Sun Dec 07, 2008 2:55 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Also make sure you apply PPU writes at the end of the write cycle of an instruction, instead of just at the beginning of the instruction.
<br />For example, STA XXXX takes 4 CPU cycles, first 3 cycles are reading the instruction and address, 4th cycle is the write.  Apply the write at the end of the 4th CPU cycle, not the start of the instruction.
<br />
<br />4 CPU cycles is an entire 12 PPU pixels in NTSC mode, and that's enough of a difference between a shaky status bar and clean graphics.
<br />
<br />See 64doc.txt to see which cycles the writes happen on for each type of instruction.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Sun Dec 07, 2008 4:46 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Anes wrote:</div><div class="quotecontent">Ok, sorry to bother you: those cc assumming 0-340 range or 1-341 range? I think its 1-341, but i ask to be sure.</div>
<br />
<br />There's the NTSC color burst: 341 cycles on odd frames and 340 on even frames *if* background is enabled... with a twist.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - SMB 2-player Hack?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">SMB 2-player Hack?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4020">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=4020</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Mon Apr 07, 2008 2:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Battletoads &amp; Double Dragon... plus a few others.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Apr 07, 2008 3:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sure, many games have 2-player scrolling, but this is not a matter of copying those games' systems, it's a matter of modifying the existing SMB code (as little as possible) to do it.
<br />
<br />Maybe the camera could be pushed as usual, by either player, but if the other player is far too much to the left, he'd prevent the camera from moving. Something like that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Mon Apr 07, 2008 5:04 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />- Can the palette be virtualized into RAM?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Apr 07, 2008 5:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Fx3 wrote:</div><div class="quotecontent">- Can the palette be virtualized into RAM?</div>
<br />It already is, to an extent. Notice that the game never throws more than two different colors of enemies at the player at once, and if you can run SMB1 in Nintendulator, watch how the palette RAM changes right before the red turtle in 1-2. If you want to put more than four palettes on the screen at the same time, you get even more flicker than what SMB1 already does to fit one 16-pixel-wide player, five 16-pixel-wide enemies, one powerup, two fireballs, and several hammers on the screen at once.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>atari2600a</b> [ Mon Apr 07, 2008 5:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm too lazy to read to see if this is already mentioned, but don't forget that you'd have to rewrite the collision subroutine to check if you've hit the other player or not, otherwise you'll die from touching your brother (either appropriately or inappropriately).
<br />
<br />Furthermore, how exactly would real-time co-op appeal to someone?  It will only slow things down on a game programmed for one player.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>strangenesfreak</b> [ Mon Apr 07, 2008 5:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">It already is, to an extent. Notice that the game never throws more than two different colors of enemies at the player at once, and if you can run SMB1 in Nintendulator, watch how the palette RAM changes right before the red turtle in 1-2.</div>
<br />When I tried doing this (with FCEUxD, which also has palette and hex viewers), this doesn't happen at all.  However, it <em>does</em> happen whenever an ax rendered to change one of the palettes to the green palette, used in-game for Bowser.  Also, just a little nitpick, but the game can render at most three different palettes for enemies - an actual occuring example in-game would be a Blooper, a Grey Cheep-Cheep, and a Red Cheep-Cheep. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Apr 07, 2008 6:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">strangenesfreak wrote:</div><div class="quotecontent">Also, just a little nitpick, but the game can render at most three different palettes for enemies - an actual occuring example in-game would be a Blooper, a Grey Cheep-Cheep, and a Red Cheep-Cheep. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div>
<br />Are there any examples in levels that contain bumpable blocks (that is, not water levels)?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>strangenesfreak</b> [ Mon Apr 07, 2008 6:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">Are there any examples in levels that contain bumpable blocks (that is, not water levels)?</div>
<br />Well, you might also need to consider the mushrooms.  Specific colors are necessary for them to be differentiated and identifiable - otherwise, it could be confusing to identify what's a Super Mushroom (red) and what's a 1UP mushroom (green or cyan+brown).  I wouldn't be surprised if you can encounter a Goomba, Green Koopa, and Red Koopa all at once.  Other palette conflicting stuff (jump springs, hammers, fireballs, platforms, beanstalks, coin block hits, flagpoles, and brick animations) could change their palettes during different level/level types, but I think mushrooms (at least 1 kind, the Super Mushroom in this case) need to have specific palettes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>strat</b> [ Mon Apr 07, 2008 6:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">BMF54123 wrote:</div><div class="quotecontent">You'd have to patch every single routine that handles player/object collisions--including potentially complex things like the flagpole and end-of-world sequences--to handle two different sets of player variables. </div><br /><br />It would probably work if there's a double set of player variables and every routine handling the player's collision or physics ran twice with the player id passed as a parameter.<br /><br /><div class="quotetitle">atari2600a wrote:</div><div class="quotecontent">you'd have to rewrite the collision subroutine to check if you've hit the other player or not, otherwise you'll die from touching your brother (either appropriately or inappropriately). </div>
<br />
<br />From going over the collision code in Doppleganger's commented disassembly, it doesn't look like that's an issue as long as both players have their own data separate from the enemy object data.  As is, both players and their fireballs should just pass through each other much as the hammers ignore the breakable blocks.  And they have to, or a few jumps in the game will be impossible.
<br />
<br />Of course, there's some other issues that haven't been mentioned yet:
<br />
<br />-what happens when one player cuts the bridge with the other guy far behind?  If the hacker lets the poor sap fall in the lava that would be pretty funny.
<br />-what if one player takes the lower path in 4-4 and the other takes the middle path which turns out to be a deadend?
<br />-who gets the power-ups?  Maybe a player who already has a fire flower shouldn't be able to get another one.
<br />-will a dead player respawn in the same place ala Contra?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jedi QuestMaster</b> [ Mon Apr 07, 2008 11:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">-will a dead player respawn in the same place ala Contra?</div>
<br />You could use the same technique they use in Battletoads. <img src="./images/smilies/icon_twisted.gif" alt=":twisted:" title="Twisted Evil" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Apr 08, 2008 10:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Super Smash Bros. Brawl's co-op adventure mode handles it in the fairest way I've seen: the player can respawn only at certain relatively safe X coordinates, and it seems to wait for one of those to scroll onto the screen before respawning.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Roric23</b> [ Thu Jul 10, 2008 2:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This thread is a few months old, but oh well...
<br />
<br />I don't want to kill the authenticity of the project, but perhaps we are looking at this all wrong. Maybe the best(and possibly the least daunting) way to achieve 2p Co-op SMB is to make an engine for the PC that closely, if not precisely, recreates the physics and graphics of the original, with the addition of a 2 player mode. I would imagine that it should look something like this:
<br />
<br /><img src="http://img502.imageshack.us/img502/7717/titlere1.png" alt="Image" />
<br />
<br /><img src="http://img149.imageshack.us/img149/2027/world23yq1.png" alt="Image" />
<br />
<br /><img src="http://img142.imageshack.us/img142/632/world93kv4.png" alt="Image" />
<br />
<br />
<br />On a PC, it's 320x240 resolution also is better, because it gives more room for 2 players to move around in, compared to the 256x225 of the NES. Also, the reserve item would have the option of being disabled, for those who are looking for more authentic gameplay. 
<br />
<br />Someday, I will make this... when I finally get around to becoming a programmer. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Thu Jul 10, 2008 3:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />PC recreations are just so... uninteresting! Personally, I get a real kick out of the challenge that is making things possible on the NES. With current PC's, almost everything is possible, and, in my opinion, that makes the development of retro games for it pretty dull.
<br />
<br />The casual gamer probably doesn't care, as long as he's got a playable game. A lot of people around here, including NES programmers, apparently feel like that too.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>strat</b> [ Thu Jul 10, 2008 4:27 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Would it even be possible to add code to the SMB ROM without bank switching?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Jul 10, 2008 7:01 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">PC recreations are just so... uninteresting!</div><br />But a lot more people have a PC capable of running Allegro games than an NES and a PowerPak or other copier. Heck, there are probably more PCs connected to an SDTV or HDTV than NES systems with an NES copier. As Bananmos might put it, if you are writing a program to be run in RockNES, an emulator written in C with the Allegro library, why not just code for Allegro itself?<br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Personally, I get a real kick out of the challenge that is making things possible on the NES.</div><br />The first problem with 2-player SMB style game would be palettes: <ul><li>$3F11: colors for Mario and red Koopas (peach, red, brown) </li><li>$3F15: colors for Luigi and green Koopas (peach, green, brown) </li><li>$3F19: colors for power-up </li><li>$3F1D: colors for only ONE more type of enemy </li></ul>It's also part of why there weren't a lot of four-player games for the NES, as everything needed to use one of the players' palettes. There wasn't as much of a problem on the Super NES, which had eight palettes that were commonly divided into 2 sub-palettes each.<br /><br />The second problem would be horrible sprite flicker when Mario, Luigi, and several Goombas are on platforms of equal height.<br /><br /><div class="quotetitle">strat wrote:</div><div class="quotecontent">Would it even be possible to add code to the SMB ROM without bank switching?</div>
<br />Probably not. But if I were expanding SMB1, I'd rearrange it into UNROM based on the published disassembly. The problem with expanding an NES rom, of course, is that no commonly used patcher (e.g. IPS, NINJA, UPS) supports the kind of rearranging that would result from disassembling and reassembling a rom.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
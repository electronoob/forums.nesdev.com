<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=4643" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2008-12-11T09:18:55-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=4643</id>
<entry>
<author><name><![CDATA[Banshaku]]></name></author>
<updated>2008-12-11T09:18:55-07:00</updated>
<published>2008-12-11T09:18:55-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40703#p40703</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40703#p40703"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40703#p40703"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br />I guess what I'm getting at is they should make one up that's less friendly.<br /></div><br /><br />Yes. At least I would have found my bug more easily if it was done that way.<br /><br />On another note, I tested on the real hardware and now it's working properly. Problem solved.  <br /><br />But we shouldn't take for granted that what I found about "all banks where zero" on hardware is the real behavior yet. Who knows, maybe on different revision of the MMC3 (A, B or C) it could react differently. Nobody seems to know the difference between them. That could be one of the small unnoticeable difference.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3559">Banshaku</a> — Thu Dec 11, 2008 9:18 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2008-12-11T05:23:54-07:00</updated>
<published>2008-12-11T05:23:54-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40694#p40694</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40694#p40694"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40694#p40694"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />I think it's more like emulator writers don't know the initial state, so they make one up.  Is the initial state always consistent?  In this case, it looks like every switchable bank is at zero.<br /></div><br /><br />I guess what I'm getting at is they should make one up that's less friendly.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Thu Dec 11, 2008 5:23 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Banshaku]]></name></author>
<updated>2008-12-11T03:36:20-07:00</updated>
<published>2008-12-11T03:36:20-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40693#p40693</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40693#p40693"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40693#p40693"><![CDATA[
<div class="quotetitle">Dwedit wrote:</div><div class="quotecontent"><br />I think it's more like emulator writers don't know the initial state, so they make one up.  Is the initial state always consistent?  In this case, it looks like every switchable bank is at zero.<br /></div><br /><br />It seems to be that way.  Every time I started my famicom, I always had the same results.  I cannot confirm for PRG-ROM since the banks where set properly. But that could be tested someday. <br /><br />If it's always the same, this should be implemented in the current emulators, making them more accurate.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3559">Banshaku</a> — Thu Dec 11, 2008 3:36 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Dwedit]]></name></author>
<updated>2008-12-11T03:23:09-07:00</updated>
<published>2008-12-11T03:23:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40691#p40691</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40691#p40691"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40691#p40691"><![CDATA[
I think it's more like emulator writers don't know the initial state, so they make one up.  Is the initial state always consistent?  In this case, it looks like every switchable bank is at zero.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=53">Dwedit</a> — Thu Dec 11, 2008 3:23 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Banshaku]]></name></author>
<updated>2008-12-10T21:43:23-07:00</updated>
<published>2008-12-10T21:43:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40690#p40690</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40690#p40690"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40690#p40690"><![CDATA[
<div class="quotetitle">Disch wrote:</div><div class="quotecontent"><br />Just goes to show you -- can't always trust emulators.<br /></div><br /><br />Yeah. But they became quite accurate recently so we tend to forget that fact <img src="http://forums.nesdev.com/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />I modified the code and set on purpose all CHR-RAM banks to 0 and here's the result:<br /><img src="http://i389.photobucket.com/albums/oo335/banshaku/all_chrbank_to_0_in_emu.jpg" alt="Image" /><br /><br />Quite familiar isn't it. Problem solved. Proper init of the CHR-RAM banks will solve my issue.<br /><br />Thanks guys!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3559">Banshaku</a> — Wed Dec 10, 2008 9:43 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2008-12-10T19:41:26-07:00</updated>
<published>2008-12-10T19:41:26-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40686#p40686</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40686#p40686"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40686#p40686"><![CDATA[
<div class="quotetitle">Banshaku wrote:</div><div class="quotecontent"><br />Emulators don't reproduce that unknown state for CHR-RAM so I never saw that behavior.<br /></div><br /><br />Most emulators I've looked at default to setting mapper regs to swap in the first 8K of CHR like you expected.  I never understood why they did that -- as it just seems to encourage bad behavior for homebrewers/rom hackers.<br /><br />I defaulted to zeroing regs in my emu (which would have produced a glitch similar to what you posted) and ran into no problems with any commercial games I tried.  So yeah... who knows what the deal with that is.<br /><br />Just goes to show you -- can't always trust emulators.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />By the way, I'm not sure what kind of advantage you could have to switch banks in ram thought. Any commercial games use it for some specific effects?<br /></div><br /><br />Lagrange Point comes to mind.  I don't think it does any actual effects with it (like you, I fail to see the point), but I know it relies on that behavior.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Wed Dec 10, 2008 7:41 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Banshaku]]></name></author>
<updated>2008-12-10T18:56:34-07:00</updated>
<published>2008-12-10T18:56:34-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40683#p40683</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40683#p40683"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40683#p40683"><![CDATA[
Oh...  I see. I was sure that the CHR-RAM was hardwired directly since 2 Pattern tables is 8k and so is CHR-RAM. It seems I guessed wrong. <br /><br />I moved the test project to CHR-RAM and didn't touch the code for a few months, I didn't see this issue.  Emulators don't reproduce that unknown state for CHR-RAM so I never saw that behavior.  I remember having this issue with PRG-ROM inside the emulator thought.<br /><br />I will test it tonight. Thanks everyone.<br /><br />By the way, I'm not sure what kind of advantage you could have to switch banks in ram thought. Any commercial games use it for some specific effects?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3559">Banshaku</a> — Wed Dec 10, 2008 6:56 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[MottZilla]]></name></author>
<updated>2008-12-10T11:11:34-07:00</updated>
<published>2008-12-10T11:11:34-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40673#p40673</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40673#p40673"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40673#p40673"><![CDATA[
Mega Man 2 actually uses the MMC1 CHR bankswitching to use a non-existant 8K of CHRRAM that would follow the first 8K, but ofcourse because of mirroring it's perfectly vaild. But I found this out when I developed my emulator.<br /><br />So that is my guess too, that the CHR settings on the MMC3 were not initialized properly.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=1726">MottZilla</a> — Wed Dec 10, 2008 11:11 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2008-12-10T10:12:23-07:00</updated>
<published>2008-12-10T10:12:23-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40671#p40671</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40671#p40671"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40671#p40671"><![CDATA[
Don't forget that the CHRRAM is banked just like CHRROM would, even if all commercial games just switch banks 0-2-4-5-6-7 in (that allow you to fully use the 8k of CHRRAM).<br />You should bankswitch correct bank of CHRRAM into the MMC3.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Wed Dec 10, 2008 10:12 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Banshaku]]></name></author>
<updated>2008-12-10T08:58:05-07:00</updated>
<published>2008-12-10T08:58:05-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40668#p40668</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40668#p40668"/>
<title type="html"><![CDATA[Pattern table artifact on real hardware]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=4643&amp;p=40668#p40668"><![CDATA[
I was able to make my dev-cart (mentioned in a previous post).  The first thing I did was to try my test files.  <br /><br />This is what I see in any emulator:<br /><img src="http://i389.photobucket.com/albums/oo335/banshaku/emu_shot.png" alt="Image" /><br /><br />This is the result on the real hadrware:<br /><img src="http://i389.photobucket.com/albums/oo335/banshaku/on_hardware.jpg" alt="Image" /><br /><br />To make sure that my devcart (MMC3 CHR-RAM) is fine I tested the original game (FF3J) and another one that use VRAM (Megaman 6) and both works fine.<br /><br />I tried to wait more vblank thinking that could be the cause (the PPU could have not been ready before writing to the pattern table) but without success.<br /><br />My question is: what should I check next? What are the probable cause of graphic artifacts on the real hardware but not on emulators?<br /><br />As a side note, I saw the impact of the DMC on the joystick data without Blarg's fortified method: once in a while, the character was moving without any input.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3559">Banshaku</a> — Wed Dec 10, 2008 8:58 am</p><hr />
]]></content>
</entry>
</feed>
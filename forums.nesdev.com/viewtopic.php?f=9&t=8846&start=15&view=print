<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - MMC1A(B) on &quot;power on&quot;</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">MMC1A(B) on &quot;power on&quot;</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=8846">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=8846</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Fri Apr 27, 2012 9:27 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">80sFREAK wrote:</div><div class="quotecontent">So, i powered cart separately with specified inputs, can confirm about last bank PRG, but not about WRAM   <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />  plus looks like i damaged mapper <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /></div>
<br />
<br />Grab each MMC1 revision and test them with my MMC1 Test ROM that will tell you all you want to know about MMC1 WRAM info? If you want it I'll give you the source, too.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Fri Apr 27, 2012 10:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">3gengames wrote:</div><div class="quotecontent"><div class="quotetitle">80sFREAK wrote:</div><div class="quotecontent">So, i powered cart separately with specified inputs, can confirm about last bank PRG, but not about WRAM   <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />  plus looks like i damaged mapper <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /></div><br /><br />Grab each MMC1 revision and test them with my MMC1 Test ROM that will tell you all you want to know about MMC1 WRAM info? If you want it I'll give you the source, too.</div>
<br />
<br />That's a lot of carts to hack up to find out what seems to be close to useless info when you can just assume it starts up disabled in most cases.
<br />
<br />80sFREAK:  What exactly are you looking to do with this info?  Is there some reason you can't just assume WRAM starts up disabled?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Fri Apr 27, 2012 12:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Transplant MMC1's? And even then, if you want to experiment on carts, you're going to use parts somehow, get over that too.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Fri Apr 27, 2012 4:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">Transplant MMC1's? And even then, if you want to experiment on carts, you're going to use parts somehow, get over that too.</div>
<br />
<br />It's not about getting over anything...  It's just silly re-test all this by means of EEPROM tests.  It's VERY simple to check this info without doing any solder work.     
<br />
<br />It's already been verified that only the MMC1C starts up with WRAM starts up as disabled.  ALL others are unknown, and early versions can't even have WRAM disabled without making use of unused CHR ROM lines.
<br />
<br />I just don't understand what he's trying to figure out that could be valuable information to have.  So either I'm missing the point (why I'm asking the question) or he's looking to do a lot of needless work to re-verify things that have already been determined...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>80sFREAK</b> [ Fri Apr 27, 2012 5:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />"Unknown" is not an answer for me.
<br />It have to be "undefined" or "enabled" or "disabled".
<br />
<br />Unfortunately i don't have MMC1C, but MMC1B2, MMC1B3 and MMC1A on cheap donors.
<br />
<br />Ok, i will ask little bit different way -
<br />1) can MMC1Bx based cart work as UNROM on power-up with WRAM enabled?
<br />2)is 2 banks of CHR-ROM in MMC1Bx based cart is on by default on power-up?
<br />
<br />Just want to figure out, can i use MMC1Bx cheap donors(i have quite a lot of them) for my project?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Fri Apr 27, 2012 11:05 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">80sFREAK wrote:</div><div class="quotecontent">"Unknown" is not an answer for me.<br />It have to be "undefined" or "enabled" or "disabled".<br /></div>
<br />
<br />By unknown I mean undefined in your words...  (semantically "undefined" means between logic 1 and 0 in my book.   When the mapper is powered up you don't know it's state but it's defined as a 1 or 0, aka "unknown" which stems from HDLs.)
<br />
<br />Since your still having issues I'll spell it out, Kevtris is accurate on this to my knowledge:
<br />
<br />MMC1A: This is the original version. WRAM cannot be disabled on this version.  
<br />MMC1B: On this and the MMC1C versions of the chip, WRAM can be disabled.
<br />MMC1C: Like the 1B, the WRAM can be disabled, however it defaults to disabled on powerup. The MMC1B can default to either state.
<br />
<br />The only thing he doesn't consider is SNROM boards like I've previously mentioned.  But that's also unknown/undefined because CHR registers are undefined/unknown at start up.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sat Apr 28, 2012 2:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I wonder if CHR registers are really unknown at startup.
<br />
<br />I am not completely sure, but maybe the reason Nintendo did this thing (wire WRAM /CE to CHRA17) in the first place is because the register defaults at '1'.
<br />
<br />I mean - as far I know no game ever purposely set this bit to disable WRAM.
<br />And all SNROM games I've ever checked write 0 to the CHR registers at startup - enabling the WRAM (probably without really knowing it).
<br />
<br />If the registers defaults at '0' then this change nothing, if the cartridge makes bad contact when you turn the console on, the CPU will not fetch the correct instructions (or even the correct reset adress), and will jam, possibly doing writes to WRAM, which can corrupt the saves on the cart.
<br />
<br />However, if the registers defaults at '1', then if the same case happens, the CPU is unlikely to write to the CHR-regs to enable VRAM, and therefore if the CPU does dummy writes to WRAM it won't corrupt the data as it is disabled.
<br />
<br />Yet this protection is far from perfect - it doesn't prevent write corruption at power down, and the CPU could still accidentally enable WRAM when it goes crazy. Also it only works on SNROM carts where the CHR regs default to '1', which is quite limiting.
<br />
<br />This is probably why they implemented a better protection when they decided to release new generations of MMC1s using the highest bit of reg3.
<br />Remember that SNROM was the first PCBs with battery backup ever made, and that they used the earlier MMC1s with no other kind of VRAM security.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>80sFREAK</b> [ Sat Apr 28, 2012 4:48 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent">MMC1A: This is the original version. WRAM cannot be disabled on this version.  </div> check. Good news actually.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">MMC1B: On this and the MMC1C versions of the chip, WRAM can be disabled.</div> but on start-up it's 50/50. Ok, let's specify further - B2 and B3???<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">MMC1C:.... it defaults to disabled on powerup. </div> check<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I am not completely sure, but maybe the reason Nintendo did this thing (wire WRAM /CE to CHRA17) in the first place is because the register defaults at '1'. </div> Good news<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> CPU will not fetch the correct instructions <span style="text-decoration: underline">(or even the correct reset adress)</span></div> in the ROM image you'd say

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
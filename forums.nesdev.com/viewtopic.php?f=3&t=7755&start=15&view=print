<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Current Mapper List?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Current Mapper List?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=7755">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=7755</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Raiden the Quick</b> [ Tue Aug 09, 2011 2:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If it helps, I went into FCEUX and printed the contents of the "bmap" array to a file. This array contains all mappers with numbers and, if included, names. Many of them have no names, but I assume they're included for some reason? Oh well...disclaimer: this is just data within FCEUX, no idea how valid or official or correct it is!
<br />
<br /># Name
<br />0 NROM
<br />1 MMC1
<br />2 UNROM
<br />3 CNROM
<br />4 MMC3
<br />5 MMC5
<br />7 ANROM
<br />11 Color Dreams
<br />12 
<br />13 CPROM
<br />15 100-in1
<br />16 Bandai
<br />19 Namcot 106
<br />23 Konami VRC2 type B
<br />35 Wario Land 2
<br />36 TXC Policeman
<br />37 
<br />38 Bit Corp. Crime Busters
<br />43 
<br />44 
<br />45 
<br />47 
<br />49 
<br />52 
<br />57 
<br />58 
<br />60 
<br />66 MHROM
<br />68 Sunsoft Mapper #4
<br />70 
<br />74 
<br />78 Irem 74HC161/32
<br />87 
<br />88 
<br />90 
<br />93 Sunsoft UNROM
<br />94 
<br />95 
<br />101 
<br />103 
<br />105 
<br />106 
<br />107 
<br />108 
<br />112 
<br />113 
<br />114 
<br />115 
<br />116 
<br />117 
<br />118 TSKROM
<br />119 
<br />120 
<br />121 
<br />123 UNLH2288
<br />132 UNL22211
<br />133 SA72008
<br />134 
<br />136 TCU02
<br />137 S8259D
<br />138 S8259B
<br />139 S8259C
<br />140 
<br />141 S8259A
<br />142 UNLKS7032
<br />143 TCA01
<br />144 
<br />145 SA72007
<br />146 SA0161M
<br />147 TCU01
<br />148 SA0037
<br />149 SA0036
<br />150 S74LS374N
<br />152 
<br />153 
<br />154 
<br />155 
<br />160 SA009
<br />163 
<br />164 
<br />165 
<br />171 
<br />172 
<br />173 
<br />175 
<br />176 BMCFK23C
<br />177 
<br />178 
<br />180 
<br />181 
<br />182 
<br />183 
<br />184 
<br />185 
<br />186 
<br />187 
<br />188 
<br />189 
<br />191 
<br />192 
<br />194 
<br />195 
<br />196 
<br />197 
<br />198 
<br />199 
<br />200 
<br />205 
<br />206 DEIROM
<br />208 
<br />209 
<br />210 
<br />211 
<br />215 
<br />216 
<br />217 
<br />219 UNLA9746
<br />220 OneBus
<br />221 UNLN625092
<br />222 
<br />226 
<br />235 
<br />238 UNL6035052
<br />240 
<br />243 S74LS374NA
<br />245 
<br />249 
<br />250 
<br />253 
<br />254

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>6T4</b> [ Tue Aug 09, 2011 7:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Raiden the Quick wrote:</div><div class="quotecontent">disclaimer: this is just data within FCEUX, no idea how valid or official or correct it is!</div>
<br />This is another problem I have with the current mapper/board system. Some emulators read what mapper a game is directly from the iNES header, others look at the game code, others check hashes of roms and compare to a precompiled list, and others use some combination of these methods.
<br />
<br />Each of these methods has advantages and disadvantages. The first makes it easy in many cases to tell if a rom is misnumbered in the header, but doesn't do much to put the correct value there and also doesn't specify the board in all cases which both of the other methods can do.
<br />
<br />The second method is usually used in combination with the first, and checks for the amount of prg and chr rom to verify it matches the mapper number in the header and also that the actual amount of rom contained in the game is correct in the header. While this method can correct rom values in the header and narrow down the list of possible boards, it can't always verify the correct board.
<br />
<br />The last method uses a list of hashes of all known roms and their corresponding boards and compares the hash of the rom being emulated with the list. If there's a match, great; the settings can be applied to the header if it's incorrect, and the emulator knows exactly which board to use. However, if there is no match, there is nothing else to do to determine the correct board. This system obviously doesn't allow the emulation of newly developed games until they are added to the list.
<br />
<br />I believe the best way to handle this while we are still using the iNES format for roms is to use a combination of all three of these. Only the last one can determine exactly which board to use, only the first can determine if the mapper number in the header is labeled correctly, and only the other can determine whether the amount of rom labeled in the header is correct.
<br />
<br />I can also give some info about what a few emulators do currently. I believe Jnes and UberNES use the first method of reading from the header, while VirtuaNES uses the last method of comparing hashes. Nestopia seems to sometimes not match what the header says about the mapper when you view info about a loaded rom, but it has a rom header editor which can read directly from the header. I am unfamiliar with what other emulators such as FCEUX and Nintendulator do regarding this, but those two and many others are open source so you should be able to find out. I hope all of this is of some use.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Tue Aug 09, 2011 8:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />FCEUX and Nintendulator do not use any databases, and simply go by the NES header.
<br />This used to be <strong>The Way</strong> to do things.
<br />
<br />Since FCEUX was intended to be a NES hacker's emulator, rom databases seem very out of place.
<br />
<br />VirtuaNES doesn't seem to correct mapper numbers.  I think it's just Nestopia that does this.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Wed Aug 10, 2011 7:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />And there were three reasons why it became no longer <strong>The Way</strong>.
<br />
<br />First, once the number of mappers expanded past 16, new space was needed to hold the rest of the mapper number. The space was reserved in the iNES header for expansion, but some ROM management tools and pirate ROM sites were already using that space to advertise themselves. (This is referred to as the "DiskDude! problem".) Emulators conforming to the new standard would see wrong mapper numbers because they would misinterpret part of the signature as part of the mapper number.
<br />
<br />Second, sometimes one mapper is broken into two due to new discoveries about its function. Games published by Camerica were thought to be compatible with mapper 2 (UNROM) until new information was discovered about the registers used by their lockout defeat. So a new mapper was forked off.
<br />
<br />Third, a few mappers have variants that never resulted in a new mapper number. There are two main types of Camerica mapper: single-game and multiple-game. And there are two types of MMC1 mapper: those with up to 8 KiB PRG ROM. There are four types of MMC3/MMC6 mapper commonly called mapper 4: ordinary PRG RAM, MMC6 style PRG RAM (StarTropics and StarTropics 2), open bus on PRG RAM (required for Low G Man), no IRQ or mirroring control (MIMIC-1, the predecessor to MMC3). This situation is what led Kevin Horton to specify an extension to iNES called NES 2.0 that defines how these shall be distinguished.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>zzo38</b> [ Wed Aug 10, 2011 1:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I propose two new mapper numbers: "internal extension", and "external extension".  For "internal extension" there are a few extra bytes to program rules of the mapper in a simple code. For "external extension" it is assumed that whoever is using that .NES file already has some program/file for dealing with that particular game. If new mappers are needed, you can extend the codes used for the "internal extension" mapper.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Wed Aug 10, 2011 5:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sorry, but a million people have a million different ideas. You can't get away from the iNES standard. iNES 2.0 introduced sub-mapper number which is more than enough. Just pick your method.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zepper</b> [ Wed Aug 10, 2011 6:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">MottZilla wrote:</div><div class="quotecontent">Sorry, but a million people have a million different ideas. You can't get away from the iNES standard. iNES 2.0 introduced sub-mapper number which is more than enough. Just pick your method.</div>
<br />
<br />Indeed.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
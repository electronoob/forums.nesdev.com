<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - NES -&gt; SNES ROM convertor?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">NES -&gt; SNES ROM convertor?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=5826">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=5826</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Thu Dec 10, 2009 12:56 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>NES -&gt; SNES ROM convertor?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Ok  I'm slowly learning C++, and teaching myself how to make a NES emulator at the same time. 
<br />But I also have an idea for a little side/project.
<br />
<br />What I want to try is to make a program that can convert NES games to SNES games.
<br />
<br />Why do you ask?  
<br />Especially when there are already plenty of both NES and SNES emalutors around?
<br />
<br />Just for the challenge...
<br />
<br />I had thought about just trying to write a program that converts the ROMS to exe files instead. 
<br />But, well, thats kind of boring tbh.
<br />And obviously wouldn't work so well unless the end user had the same or a very similar system to my own.
<br />
<br />So anyway, has anyone ever done something similar? 
<br />Where the program takes the input of a NES ROM and outputs a functional and compliant SNES ROM?
<br />
<br />I looked, but I couldn't find anything that does this. But maybe I was just using the wrong search terms.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>oRBIT2002</b> [ Thu Dec 10, 2009 2:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />If I am not mistaken, people have already done this a few years back. I'm pretty sure I've seen NES games that runs in SNES format, atleast some mapper 0 games like "Mario Bros" and similar..
<br />I am not sure how it was done. Perhaps using the 8-bit mode on the SNES.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Thu Dec 10, 2009 3:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well so far I've seen that people have done this by hand, but I've yet to come across any apps written that automate the process.
<br />
<br />Not saying that they don't exist though...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Coldberg</b> [ Thu Dec 10, 2009 4:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />wasn't the snes built to be compatible with nes games ? so that's probably a possible thing
<br />tho i don't see how you'd trivially convert nes roms into a native windows executable unless you just append a rom to an emulator
<br />since translating the rom into something x86 can would be anything but trivial

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Thu Dec 10, 2009 4:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Coldberg wrote:</div><div class="quotecontent">wasn't the snes built to be compatible with nes games ? so that's probably a possible thing<br /></div><br /><br />The SNES <em>was</em> originally supposed to be compatible with NES ROMS, but apparently Nintendo had a lot of prob at the time getting it working, and so it never happened.<br /><br />Both the NES and SNES CPU are the similar architecture + endian-wise, so that is in my favour too.<br /><br /><div class="quotetitle">Coldberg wrote:</div><div class="quotecontent">tho i don't see how you'd trivially convert nes roms into a native windows executable unless you just append a rom to an emulator<br />since translating the rom into something x86 can would be anything but trivial</div>
<br />
<br />That's not entirely what I had in mind.
<br />Perhaps a better example would be to think of it as a "ROM mapper" of sorts.
<br />
<br />I imagine the breakdown would go something like this:
<br />
<br />* map sprites
<br />* map backgrounds
<br />* map animation/char movement
<br />* map sound
<br />* pad rom as appropriate
<br />
<br />So there would be no actual executing req'd as the new emulator/console would simply play the new rom as if it was created for it.
<br />
<br />Converting the sprites/backgrounds would be fairly straight fwd. Re-assembling the levels AND maps would be a bit more tricky, I'd imagine. But the actual character movement/reponses... That's where I imagine it would start to get problematic.
<br />
<br />I'm not even considering the sound at this stage. That would be something that I would prob leave off for a very long time...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Disch</b> [ Thu Dec 10, 2009 11:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">emu_enthusiast wrote:</div><div class="quotecontent">Well so far I've seen that people have done this by hand, but I've yet to come across any apps written that automate the process.<br /><br />Not saying that they don't exist though...</div>
<br />
<br />You haven't seen one because they don't exist.
<br />
<br />They don't exist because it's not possible to fully automate the process.
<br />
<br />NES and SNES share a similar processor architecture, but from a standpoint of a conversion program, that is the end of their similarities.  
<br />
<br />The register map is totally different, the timing is different, the PPU is different, and APU uses an entirely different processor with its own instruction set and memory map, etc, etc.
<br />
<br />
<br />
<br />At best you'll be able to hack together a program to automatically convert 1 NES game to a functional SNES game.  But in all likelyhood that program will only work for that one game.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>LocalH</b> [ Thu Dec 10, 2009 1:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It's possible to be semi-automated for a certain subclass of NES games - for example, CNROM games only.  One could make build the necessary SNES-side code and build a tool that would convert everything necessary - it would probably either require ROM detection (to know where data and code are in the ROM) or include a built-in emulator that logged every address that was code. This would require the user to play the game under such emulation and thorooughly exhaust every branch of game code that they could possibly do. Still wouldn't be 100%, so the user would have to manually ensure that all code was marked as code, graphic tiles marked as graphics, and sound driver marked as sound. Then an automated tool could take that external information and build an SNES ROM.
<br />
<br />Not easy, but not impossible either. Wouldn't work for later games that used mappers, one would have to basically "unroll" the mapper and generate a flat memory map that the tool could use to convert the game.
<br />
<br />Much easier to just port the game yourself, as has been done with the few NES-to-SNES ROMs that are floating around.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Dec 10, 2009 1:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">LocalH wrote:</div><div class="quotecontent">t would probably either require ROM detection (to know where data and code are in the ROM) or include a built-in emulator that logged every address that was code. This would require the user to play the game under such emulation and thorooughly exhaust every branch of game code that they could possibly do.</div>
<br />Some of the FCE Ultra derivatives can save such an access log.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>LocalH</b> [ Thu Dec 10, 2009 1:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's good, as such a log could be used. It would still require the user to manually attempt to access every possible valid code path in the original ROM. This was how the first Sonic disassemblies were worked on.
<br />
<br />As a side effect, such a project could also make working towards a disassembly easier for a given ROM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Thu Dec 10, 2009 1:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'd be happy to contribute my NES sound emulator to such a project.  I released the source under a license that is pretty close to public domain (if it isn't that exactly).  But I'd be interested in updating a few things in it, if there was any point to doing so.
<br />
<br />I wanted to write an emulator/auto-converter like you're talking about.  But the sound was the most different part, and the most interesting to me, so that's as far as I ever took it.
<br />
<br />I agree with Disch that it won't be possible to fully automate the process.  I think there would be a pretty good success-rate though for auto-patching the NES register writes.  The odds that it would get a false-positive and patch a 3-byte string of data instead of code are low, but significant (I can think of some stupid tricks that would reduce it, but it's surely easier to just manually hack the odd ones).
<br />
<br />A while back I was considering the timing differences.  On the SNES you could increment a counter every scanline, and use that to time-stamp the NES PPU writes (i.e., create an HDMA table, which also means the video will be one frame behind).  The confusing thing is that the SNES CPU doesn't run at a constant speed, so I don't know if that can be worked out.  Also, all this extra processing could would mean you could very, very easily run out of CPU time to finish the frame.
<br />
<br />Overall, I believe that it's a lot easier than it looks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Thu Dec 10, 2009 3:16 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hehe. I didn't expect this sort of a response.  <img src="./images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> 
<br />
<br />It was more of a "would this be possible," rather than anything concrete.
<br />tbh I am nowhere near skilled enough coding-wise to be able to pull something like this off yet, or even any time soon.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Thu Dec 10, 2009 3:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You're better off doing it by hand. For PC-Engine someone has actually made a NES emulation wrapper that allows NES games to run with relatively minor changes. I know Mega Man, Contra, and Castlevania were working on it. All UNROM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Thu Dec 10, 2009 5:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There's also Super Sleuth, which is really novel.
<br />
<br />It's an SNES emulator, but it redirects NES registers to their SNES "roughly" equivalents, and uses the SNES CPU. With only a little bit of code, it runs Super Mario Bros.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>emu_enthusiast</b> [ Thu Dec 10, 2009 6:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">There's also Super Sleuth, which is really novel.<br /><br />It's an SNES emulator, but it redirects NES registers to their SNES "roughly" equivalents, and uses the SNES CPU. With only a little bit of code, it runs Super Mario Bros.</div>
<br />
<br />That's pretty cool. Thanks for the link.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sat Dec 12, 2009 10:22 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">byuu wrote:</div><div class="quotecontent">There's also Super Sleuth, which is really novel.<br /><br />It's an SNES emulator, but it redirects NES registers to their SNES "roughly" equivalents, and uses the SNES CPU. With only a little bit of code, it runs Super Mario Bros.</div>
<br />
<br />What do you mean by ''A little bit of code''? 
<br />
<br />Do you mean Graphics, Palette, **IRQ and ***Mapper Registers? 
<br />
<br />If so, Prove that SuperSleuth will run a modded SMB1 rom via SMBDIS with these modifications. Screenshots will tell the results
<br />
<br />** It uses Sprite 0, You may need to replace it with an IRQ for it to work properly
<br />
<br />*** Mappers do not apply to an unmodified NROM version of SMB1

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - A new and improved Donkey Kong port</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">A new and improved Donkey Kong port</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=22&amp;t=16688">http://forums.nesdev.com/viewtopic.php?f=22&amp;t=16688</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>6</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sumez</b> [ Thu Nov 09, 2017 6:02 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Put this video up yesterday, and completely forgot about sharing it here. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />It's a little hobby thing I've been working on recently. Not too creative, since I've just been translating an existing game to the NES, but I started this after a drunken conversation with my friend about how much the original NES version of Donkey Kong sucks, and whether it would be possible to actually run an accurate version of the game on the NES hardware, playing exactly like the arcade original.<br />My claim was of course, that if you rotate the monitor like a lot of shmup ports tend to do, you could replicate the gameplay with 100% accuracy, but it would be a ton of work and there's no way I'd ever want to bother with it.<br /><br />...Less than a month later I have a fully working release as shown here &gt;_&gt;<br /><br /><a href="https://www.youtube.com/watch?v=dhRoe44Dg54" class="postlink"><img src="https://i.ytimg.com/vi/dhRoe44Dg54/hqdefault.jpg" alt="Image" /></a><br /><!-- m --><a class="postlink" href="https://www.youtube.com/watch?v=dhRoe44Dg54">https://www.youtube.com/watch?v=dhRoe44Dg54</a><!-- m --><br /><br />Not sure if it's &quot;safe&quot; for me to share the ROM file, since it's messing with Nintendo's property, but I just wanted to share the result with you guys.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FrankenGraphics</b> [ Thu Nov 09, 2017 6:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's pretty cool!<br /><br />For one thing, portrait/upright screens means quite a big change to how the 8 sprites per scanline rule works in practice, and the looks would be different of any game due to the pixel assymetry being the other way around.<br /><br />One word of warning, though - screens may overheat if they don't have venting holes facing up. For a permanent installation, i'd drill some holes or make a new chassi.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sumez</b> [ Thu Nov 09, 2017 6:44 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />CRTs usually have venting in the back, so that's rarely an issue. In this case, all I was blocking off was a speaker.<br />If you're into shooters, rotating your screen like this isn't a foreign concept, commonly referred to as &quot;tate mode&quot; (I'm actually surprised I haven't seen any other NES or SNES homebrews with a tate mode), but it's a good idea to unplug it for 10-15 minutes before turning it on, just to avoid the magnetism causing weird colors. I've done it a billion times in the past with the same TV.<br /><br />The original DK arcade game was created for this orientation, with roughly the same resolution (as you can see the graphics go all the way to the sides of the screen - arcade games didn't have to think about overscan), which is why this version looks like it should, while Nintendo's original NES/Famicom port looks horribly stretched. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />You're obviously right about the sprites per scanline limit, which was actually my biggest issue, since the game likes to have stuff above eachother, such as the rivet screen where Pauline is right above Donkey Kong, and a hammer spawns below him. There can easily be a few firefoxes and a Mario down there, too, turning the game into flicker central <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /> I don't think it looks that bad on a CRT though, and if you've played stuff like Batman Return of the Joker, you're used to it <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br />On the elevator screen I had to turn to some pretty creative solutions to avoid the flickering being too bad on the left column of elevators though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Nov 09, 2017 7:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Sumez wrote:</div><div class="quotecontent">the game likes to have stuff above eachother, such as the rivet screen where Pauline is right above Donkey Kong, and a hammer spawns below him. There can easily be a few firefoxes and a Mario down there, too, turning the game into flicker central <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div><br />Firefox is flicker central when Discordapp.com makes changes to its web app and doesn't test them thoroughly in anything but Google Chrome. (Source: <a href="https://www.reddit.com/r/discordapp/comments/79rxie/ever_since_the_update_if_i_mouse_over_any_channel/" class="postlink">reddit</a>)<br /><br />Where did you get that name for the fireball enemies in <a href="http://mario.wikia.com/wiki/100m" class="postlink">100m</a>? As far as I can tell from <a href="https://www.mariowiki.com/Fire" class="postlink">MarioWiki</a>, only Atari came up with that name. The different-looking fires in 25m seem to be called Trouble Bugs.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sumez</b> [ Thu Nov 09, 2017 7:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />&quot;Firefox&quot; is the common word used by most Donkey Kong players. Probably taken from the atari version, I guess?<br />&quot;Pie factory&quot; obviously isn't the official name for the screen with the <em>cement trays</em> either, but it's what everyone calls it. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />They are technically exactly the same as the flame enemies on the other stages, just with a different sprite.<br />EDIT: Oh yeah, the game also sets the hitbox a pixel larger when initializing the stage, making them harder to jump over, I guess? The other thing mentioned on the page you're linking to is dead wrong, though. They never multiply, they just spawn on a random platform opposite to the one Mario is standing on. The common strategy is to save the bottom hammer until you're done with the left side, so that any enemies you kill while going right will respawn on ther other side where they can't get to you.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FrankenGraphics</b> [ Thu Nov 09, 2017 8:01 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I didn't react to &quot;firefox&quot; because it has a very familiar ring to it, idk from exactly where but it's definitely mario universe. Something from the childhood.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>JRoatch</b> [ Thu Nov 09, 2017 9:04 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Tate mode in NES</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Sumez wrote:</div><div class="quotecontent">CRTs usually have venting in the back, so that's rarely an issue. In this case, all I was blocking off was a speaker.<br />If you're into shooters, rotating your screen like this isn't a foreign concept, commonly referred to as &quot;tate mode&quot; (I'm actually surprised I haven't seen any other NES or SNES homebrews with a tate mode), but it's a good idea to unplug it for 10-15 minutes before turning it on, just to avoid the magnetism causing weird colors. I've done it a billion times in the past with the same TV.</div><br /><br />So for the NES shmup I've been trying to design calls for a 3:4 ratio in vertical orientation (Mainly for gameplay structural reasons). I've considered tate mode as the scanline limit would nicely align with the bullet stream, but I worry that there would be no motivation for the common person to physically rotate their TV set. It's barely possible with emulators by having the OS rotate the entire screen.<br />I'm currently considering pillarboxing the already low resolution of the NES, That would somewhat help with the bandwidth of the background animations.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FrankenGraphics</b> [ Thu Nov 09, 2017 9:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I guess you could hook up an NES to a flat screen and orient it however you like if placed on a table.<br /><br />One of the most interesting screen configurations i've ever seen was at the soviet arcade museum filial in st:petersburg. It was mounted flat down like a board game, and a wheel and a foot pedal (and maybe a brakes pedal iirc... there was some means for braking anyway) was mounted in each corner on the broad sides. The wheels were stepless and infinite (i think they must've measured the delta-velocity). <br /><br />It was basically a free-range obstacle course racer with a capture the flag element. The cars would wrap around the screen. 100% addictive with a full party of 4 players competing for the flags. (Hm... maybe i'll attempt a simple port-from-memory one far-away day when i have fewer project involvements...)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Thu Nov 09, 2017 10:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Sumez wrote:</div><div class="quotecontent">...Less than a month later I have a fully working release as shown here</div><br />Holy cow, that's fast. I'm impressed.  Well done, it looks really great.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>gauauu</b> [ Thu Nov 09, 2017 10:18 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Tate mode in NES</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">JRoatch wrote:</div><div class="quotecontent">So for the NES shmup I've been trying to design calls for a 3:4 ratio in vertical orientation (Mainly for gameplay structural reasons). I've considered tate mode as the scanline limit would nicely align with the bullet stream, but I worry that there would be no motivation for the common person to physically rotate their TV set. It's barely possible with emulators by having the OS rotate the entire screen.<br />I'm currently considering pillarboxing the already low resolution of the NES, That would somewhat help with the bandwidth of the background animations.</div><br /><br />The dreamcast version of Ikaruga had a menu option to play in tate mode or normal mode (pillarboxed)<br /><br />Iterating on that idea, you could possibly design the game primarily for tate mode, but with a menu option that rotates just the controls and any text, so that the game can be played horizontally as well?  That way you don't have to sacrifice your design goals, but you can still make it accessible for the common folk?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Thu Nov 09, 2017 11:38 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Sumez wrote:</div><div class="quotecontent">It's a little hobby thing I've been working on recently. Not too creative, since I've just been translating an existing game to the NES, but I started this after a drunken conversation with my friend about how much the original NES version of Donkey Kong sucks, and whether it would be possible to actually run an accurate version of the game on the NES hardware, playing exactly like the arcade original.<br />My claim was of course, that if you rotate the monitor like a lot of shmup ports tend to do, you could replicate the gameplay with 100% accuracy, but it would be a ton of work and there's no way I'd ever want to bother with it.</div><br />But does your port use more than 16KB of PRH-ROM ? Remember that for Nintendo it might have been unacceptably costly to use 32KB at the time.<br /><br />Also you couldn't expect people to rotate their TV by 90Â° at home, obviously ^^<br /><br />I seemed to recall that the original had 4 levels and the NES port only 3 levels (which is way worse than graphics resolution changing as a change), however I only see 3 levels in your youtube video.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Thu Nov 09, 2017 12:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This is awesome, Sumez!<br /><br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">I seemed to recall that the original had 4 levels and the NES port only 3 levels (which is way worse than graphics resolution changing as a change), however I only see 3 levels in your youtube video.</div><br />The pie factory is in there. Skip to ~8mins. It doesn't appear in the first few loops, but that's how it was in the arcade too.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sumez</b> [ Thu Nov 09, 2017 1:17 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">gauauu wrote:</div><div class="quotecontent">Holy cow, that's fast. I'm impressed.</div><br />Having a completely developed game working already helped immensely. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br />The bulk of the work was just translating Z80 instructions over to 6502. Pretty boring work, but I enjoyed seeing the entire insides of the original game as I did it, and some times I had to get a bit creative with the 6502's advantages (X/Y indexing mostly) over the features it lacks (16 bit registers). But the most original work came from dealing with the hardware limitations of the NES, and balancing compromises against what I felt was essential to retaining a completely accurate arcade experience.<br /><br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">But does your port use more than 16KB of PRH-ROM ? Remember that for Nintendo it might have been unacceptably costly to use 32KB at the time.<br /></div><br />It's 32KB, though a large part of it is used by two samples, the DK grin and the boom sound, which I felt needed to be DPCM samples to respect the arcade version.<br />The idea was never to build a &quot;better version&quot; using the same hardware limitations, and I also ended up using ekstra work RAM from the cartridge, though this is mainly because of #1. I wanted the game to remember high scores, and #2. The arcade game does collision detection by reading from the &quot;nametable&quot; in video memory, something the NES obviously can't while drawing a screen, so I opted to use work ram to buffer the entire video memory of the arcade game. I could probably change a lot of things to work around it, but it was more important for me to have the game logic work as close to the original game as possible.<br /><br />However, I'm pretty happy, and relieved, that I was able to fit the game's graphics (which has a lot more potential space in the arcade game) into a single 8KB CHR-ROM without using any bank switching. It's extremely tightly packed. <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I seemed to recall that the original had 4 levels and the NES port only 3 levels (which is way worse than graphics resolution changing as a change), however I only see 3 levels in your youtube video.</div><br /><div class="quotetitle">rainwarrior wrote:</div><div class="quotecontent">The pie factory is in there. Skip to ~8mins. It doesn't appear in the first few loops, but that's how it was in the arcade too.</div><br />Exactly, rainwarrior <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> The original stage sequence is &quot;barrels&quot;-&gt;&quot;pies&quot;-&gt;&quot;elevators&quot;-&gt;&quot;rivet&quot;, but the US arcade release changed it around so the pie/cement factory and elevator stage were both skipped on the first level, and only added on the third and second levels respectively. As you'd get further into the game, barrel stages would also appear every second screen, as they are the hardest.<br />While working on the game, I got to try the level 1 versions of both the pie factory and elevator stage, and those are extremely easy compared to the other screens, so I can honestly understand why they changed it, even though the new stage order makes very little sense.<br />In general, the US final revision of the game is considered the true competitive version of the game, and with good reason.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Nov 09, 2017 1:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Very cool!<br /><br />I'd throw the ROM up somewhere. The worst thing that can happen is you might get a C&amp;D (but even that seems unlikely).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Sumez</b> [ Thu Nov 09, 2017 1:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: A new and improved Donkey Kong port</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The ROM is available <a href="http://eternal.dk/pr/dk.nes" class="postlink">here</a><br /><br />When I make future changes (provided I dodge a C&amp;D as I'm going) I'll update the file in that URL.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>6</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=10&amp;t=3454" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2007-07-13T13:36:46-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=10&amp;t=3454</id>
<entry>
<author><name><![CDATA[atari2600a]]></name></author>
<updated>2007-07-13T13:36:46-07:00</updated>
<published>2007-07-13T13:36:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25846#p25846</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25846#p25846"/>
<title type="html"><![CDATA[NESASM Nsf play code and Name Table load - NOOB problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25846#p25846"><![CDATA[
Same problems I mentioned before still existent, although you can just keep NMI on vblank off for code like this...which you're not doing.  The program is looping back to $0000 every 30th of a second, which is probably causing the CPU jam error message.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3367">atari2600a</a> — Fri Jul 13, 2007 1:36 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[sdm]]></name></author>
<updated>2007-07-13T00:49:09-07:00</updated>
<published>2007-07-13T00:49:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25837#p25837</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25837#p25837"/>
<title type="html"><![CDATA[NESASM Nsf play code and Name Table load - NOOB problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25837#p25837"><![CDATA[
Forget that first code...<img src="http://forums.nesdev.com/images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />I need know how fix second code and load nametable... <img src="http://forums.nesdev.com/images/smilies/icon_confused.gif" alt=":?" title="Confused" /> <br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   .inesprg 1<br />   .inesmap 0<br />   .inesmir 1<br />   .ineschr 1<br /><br />   .bank 1     <br />   .org $FFFA<br />   .dw 0<br />   .dw Start<br />   .dw 0<br /><br />   .bank 0<br />   .org $0000<br /><br />   .org $8000<br />Start:<br /><br />   lda #%10001000<br />   sta $2000<br />   lda #%00011110<br />   sta $2001<br /><br />   lda #$3F<br />   sta $2006<br />   lda #$00<br />   sta $2006<br />   ldx #$00<br /><br />loadpal:<br />   lda titlepal,x<br />   sta $2007<br />   inx<br />   cpx #$20<br />   bne loadpal<br /><br />vwait:<br />   lda $2002   ;wait...<br />   bpl vwait<br /><br />   lda #$20   ;set ppu to start vram<br />   sta $2006<br />   lda #$20<br />   sta $2006<br /><br />nametable:<br /><br />   lda names,x<br />   inx<br />   sta $2007<br />   cpx #64<br />   bne nametable<br /><br />Loop:<br />   jmp Loop<br /><br />titlepal:<br />   .incbin &quot;demo.pal&quot;<br /><br />   .bank 2<br />   .org $0000<br />   .incbin &quot;demo.bkg&quot;<br />   .incbin &quot;demo.spr&quot;<br /><br />names:<br />   .incbin &quot;demo.map&quot;<br /></div><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=411">sdm</a> — Fri Jul 13, 2007 12:49 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Hamtaro126]]></name></author>
<updated>2007-07-12T17:32:36-07:00</updated>
<published>2007-07-12T17:32:36-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25834#p25834</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25834#p25834"/>
<title type="html"><![CDATA[Re: NESASM Nsf play code and Name Table load - NOOB problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25834#p25834"><![CDATA[
<div class="quotetitle">sdm wrote:</div><div class="quotecontent"><br />I'm super mega noob with nes asm programming....<br /><br />I need help with Nullslepp NSF play code:<br /><!-- m --><a class="postlink" href="http://www.nullsleep.com/treasure/nsf_cart_guide/">http://www.nullsleep.com/treasure/nsf_cart_guide/</a><!-- m --><br /><br />I try load SMB1 nsf file.... But without success <img src="http://forums.nesdev.com/images/smilies/icon_mad.gif" alt=":x" title="Mad" /> <br /><br />SMB NSF:<br />load address: C48D (-80 C40D)<br />init address: 34BE<br />play address: D0F2<br /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;-----------------------demo-------<br /><br />   .inesprg 1<br />   .ineschr 1<br />   .inesmir 1<br />   .inesmap 0<br /><br />   .org $8000<br />   .bank 0<br /><br />   .org $c40d      ; replace dashes with load address MINUS $80<br />   .incbin &quot;demo.nsf&quot;   ; include NSF tune<br /><br />Reset_Routine:<br />   cld         ; clear decimal flag<br />   sei         ; disable interrupts<br />   lda #%00000000      ; disable vblank interrupts by clearing<br />   sta $2000      ; the most significant bit of $2000<br /><br />Start:<br /><br />   lda #%00001000<br />   sta $2000<br />   lda #%00011110<br />   sta $2001<br /><br />   lda #$3F   ;set ppu to start of palette<br />   sta $2006<br />   lda #$00<br />   sta $2006<br />   ldx #$00<br /><br />loadpal:<br />   lda titlepal, x   ;loads a 32 byte palette<br />   sta $2007<br />   inx<br />   cpx #$20   ;gotta be one extra b/c of inx<br />   bne loadpal<br /><br />vwait:<br />   lda $2002   ;wait...<br />   bpl vwait<br /><br />   lda #$20   ;set ppu to start vram<br />   sta $2006<br />   lda #$20<br />   sta $2006<br /><br />   lda #$01   ;write pattern table tile numbers to the name table<br />   sta $2007<br />   lda #$02<br />   sta $2007<br />   lda #$03<br />   sta $2007<br />   lda #$01<br />   sta $2007<br />   lda #$02<br />   sta $2007<br />   lda #$03<br />   sta $2007<br />   lda #$01<br />   sta $2007<br />   lda #$03<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00   ;write pattern table tile numbers to the name table<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$02<br />   sta $2007<br />   lda #$02<br />   sta $2007<br />   lda #$01<br />   sta $2007<br />   lda #$01<br />   sta $2007<br />   lda #$01<br />   sta $2007<br /><br /><br /><br />   ldx #$00   ;set 2004 to the start SPRRAM<br />   stx $2003<br />   stx $2003<br /><br />   lda #$00   ;Y &#40;w pionie&#41;<br />   sta $2004<br />   lda #$00   ;sprite pattern number &#40;numer tilesa w pliku .SPR&#41;<br />   sta $2004<br />   lda #%00000001<br />   sta $2004<br />   lda #$00   ;X &#40;w poziomie&#41;<br />   sta $2004<br /><br />   lda #$10<br />   sta $2004<br />   lda #$01<br />   sta $2004<br />   lda #%00000001<br />   sta $2004<br />   lda #$10<br />   sta $2004<br /><br />; *** WAIT 2 VBLANKS ***<br />WaitV1:   <br />   lda $2002      ; give the PPU a little time to initialize<br />   bpl WaitV1      ; by waiting for a vblank<br />WaitV2:   <br />   lda $2002      ; wait for a second vblank to be safe<br />   bpl WaitV2      ; and now the PPU should be initialized<br /><br /><br />; *** CLEAR SOUND REGISTERS ***<br />   lda #$00      ; clear all the sound registers by setting<br />   ldx #$00      ; everything to 0 in the Clear_Sound loop<br />Clear_Sound:<br />   sta $4000,x      ; store accumulator at $4000 offset by x<br />   inx         ; increment x<br />   cpx #$0F      ; compare x to $0F<br />   bne Clear_Sound      ; branch back to Clear_Sound if x != $0F<br /><br />   lda #$10      ; load accumulator with $10<br />   sta $4010      ; store accumulator in $4010<br />   lda #$00      ; load accumulator with 0<br />   sta $4011      ; clear these 3 registers that are <br />   sta $4012      ; associated with the delta modulation<br />   sta $4013      ; channel of the NES<br /><br />; *** ENABLE SOUND CHANNELS ***<br />   lda #%00001111      ; enable all sound channels except<br />   sta $4015      ; the delta modulation channel<br /><br />; *** RESET FRAME COUNTER AND CLOCK DIVIDER ***<br />   lda #$C0      ; synchronize the sound playback routine <br />   sta $4017      ; to the internal timing of the NES<br /><br />; *** SET SONG # &amp; PAL/NTSC SETTING ***<br />   lda #$00      ; replace dashes with song number<br />   ldx #$00      ; replace with $00 for NTSC or $01 for PAL<br />   jsr $be34      ; replace dashes with init address<br /><br />; *** ENABLE VBLANK NMI ***<br />   lda #%10000000      ; enable vblank interrupts by setting the <br />   sta $2000      ; most significant bit of $2000<br />Loop:<br />   jmp Loop<br /><br />titlepal:<br />   .incbin &quot;demo.pal&quot;   ;palette data<br /><br />NMI_Routine:<br />   lda $2002      ; read $2002 to reset the vblank flag<br />   lda #%00000000      ; clear the first PPU control register  <br />   sta $2000      ; writing 0 to it<br />   lda #%10000000      ; reenable vblank interrupts by setting<br />   sta $2000      ; the most significant bit of $2000<br />   jsr $f2d0      ; replace dashes with play address<br />   rti         ; return from interrupt routine<br /><br />IRQ_Routine:<br />   rti         ; return from interrupt routine<br /><br />   .bank 1<br />   .org   $FFFA<br />   .dw      0 ; NMI_Rutine<br />   .dw      Start ; Reset_Rutine<br />   .dw      0 ; IRQ_Rutine<br /><br />   .bank 2<br />   .org $0000<br />   .incbin &quot;demo.bkg&quot;<br />   .incbin &quot;demo.spr&quot;<br /><br />;-----------------------end----</div><br /><br />Next: <br /><br />How to load Name table from file (.map) ???<br /><br />I try load name table using Gba Gay tutorial, lesson 13 "Making Background:<br /><!-- m --><a class="postlink" href="http://www.patatersoft.info/gbaguy/day13n.htm">http://www.patatersoft.info/gbaguy/day13n.htm</a><!-- m --><br /><br />But dont work...:/ I dont see any bkg tiles...:/<br /></div><br /><br />The problem is all of the above!<br /><br />1: NSF code is too big for the ASM stuff to work (NESASM and X816 Programs have memory boundarys)<br /><br />2: Do not use GBAguy's stuff! His ASM was terrible, outdated and obsolete and it is better to get a diffrent tutorial.<br /><br />3: NESASM crashes and it SUCKS!<br /><br />4: The code for the NSF is for X816 and is diffrent from NESASM code!<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=287">Hamtaro126</a> — Thu Jul 12, 2007 5:32 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[atari2600a]]></name></author>
<updated>2007-07-12T16:23:56-07:00</updated>
<published>2007-07-12T16:23:56-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25833#p25833</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25833#p25833"/>
<title type="html"><![CDATA[NESASM Nsf play code and Name Table load - NOOB problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25833#p25833"><![CDATA[
disable NMI on vblank on $2000 D7 &amp; re-enable it after init.<br /><br />EDIT:  I also don't see any 2 vblank waiting before init<br /><br />More EDIT:  PLUS it doesn't look like you have your interrupts set.  I don't know, maybe you did but I overlooked them, I'm too used to how  I have my stuff set up.  (seperate ASM file for ines, prg, chr in ACME syntax)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=3367">atari2600a</a> — Thu Jul 12, 2007 4:23 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[sdm]]></name></author>
<updated>2007-07-12T15:54:33-07:00</updated>
<published>2007-07-12T15:54:33-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25832#p25832</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25832#p25832"/>
<title type="html"><![CDATA[NESASM Nsf play code and Name Table load - NOOB problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25832#p25832"><![CDATA[
aghh... I cannot load nametable from file... <img src="http://forums.nesdev.com/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> What the...<br /><br />I make simple code:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   .inesprg 1<br />   .inesmap 0<br />   .inesmir 1<br />   .ineschr 1<br /><br />   .bank 1     <br />   .org $FFFA<br />   .dw 0<br />   .dw Start<br />   .dw 0<br /><br />   .bank 0<br />   .org $0000<br /><br />   .org $8000<br />Start:<br /><br />   lda #%10001000<br />   sta $2000<br />   lda #%00011110<br />   sta $2001<br /><br />   lda #$3F<br />   sta $2006<br />   lda #$00<br />   sta $2006<br />   ldx #$00<br /><br />loadpal:<br />   lda titlepal,x<br />   sta $2007<br />   inx<br />   cpx #$20<br />   bne loadpal<br /><br />vwait:<br />   lda $2002   ;wait...<br />   bpl vwait<br /><br />   lda #$20   ;set ppu to start vram<br />   sta $2006<br />   lda #$20<br />   sta $2006<br /><br />nametable:<br /><br />   lda names,x<br />   inx<br />   sta $2007<br />   cpx #64<br />   bne nametable<br /><br />Loop:<br />   jmp Loop<br /><br />titlepal:<br />   .incbin &quot;demo.pal&quot;<br /><br />   .bank 2<br />   .org $0000<br />   .incbin &quot;demo.bkg&quot;<br />   .incbin &quot;demo.spr&quot;<br /><br />names:<br />   .incbin &quot;demo.map&quot;<br /></div><br /><br /><!-- m --><a class="postlink" href="http://siudymus.w.interia.pl/demo.pal">http://siudymus.w.interia.pl/demo.pal</a><!-- m --><br /><!-- m --><a class="postlink" href="http://siudymus.w.interia.pl/demo.spr">http://siudymus.w.interia.pl/demo.spr</a><!-- m --><br /><!-- m --><a class="postlink" href="http://siudymus.w.interia.pl/demo.bkg">http://siudymus.w.interia.pl/demo.bkg</a><!-- m --><br /><!-- m --><a class="postlink" href="http://siudymus.w.interia.pl/demo.map">http://siudymus.w.interia.pl/demo.map</a><!-- m --><br /><br /><br />Nestopia says "CPU JAM!"... Please. let someone fix me that code.. <img src="http://forums.nesdev.com/images/smilies/icon_confused.gif" alt=":?" title="Confused" /><br /><br /><img src="http://img67.imageshack.us/img67/7007/nesdemoec7.jpg" alt="Image" /><p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=411">sdm</a> — Thu Jul 12, 2007 3:54 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2007-06-27T12:02:14-07:00</updated>
<published>2007-06-27T12:02:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25552#p25552</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25552#p25552"/>
<title type="html"><![CDATA[Re: NESASM Nsf play code and Name Table load - NOOB problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25552#p25552"><![CDATA[
<div class="quotetitle">sdm wrote:</div><div class="quotecontent"><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;-----------------------demo-------<br /><br />   .inesprg 1<br />   .ineschr 1<br />   .inesmir 1<br />   .inesmap 0<br /><br />   .org $8000<br />   .bank 0<br /><br />   .org $c40d      ; replace dashes with load address MINUS $80<br />   .incbin &quot;demo.nsf&quot;   ; include NSF tune<br /><br />Reset_Routine:<br />   cld         ; clear decimal flag<br />   sei         ; disable interrupts<br />   lda #%00000000      ; disable vblank interrupts by clearing<br />   sta $2000      ; the most significant bit of $2000<br /><br />Start:<br /><br />   lda #%00001000<br />   sta $2000<br />   lda #%00011110<br />   sta $2001<br /><br />   lda #$3F   ;set ppu to start of palette<br />   sta $2006<br />   lda #$00<br />   sta $2006<br />   ldx #$00<br /></div><br /></div><br />You need to do the 2 vblank waits <em>before</em> you access $2003-$2007 for the first time.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />How to load Name table from file (.map) ???<br /></div><br />Have you heard of the "indirect indexed" addressing mode, which uses instructions of the following form?<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">  lda &#40;0&#41;,y</div><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><br />I try load name table using Gba Gay tutorial, lesson 13 "Making Background:<br /></div><br />Freudian slip? This tutorial is generally considered deprecated in favor of "NES 101".<br /><br />The reason you're not seeing any background could be that you aren't turning on the background:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">  lda #%00001010<br />  sta $2001</div><br />But make sure you do this <em>after</em> you have set up $2000 and $2005 for this frame.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Wed Jun 27, 2007 12:02 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[sdm]]></name></author>
<updated>2007-07-12T15:48:09-07:00</updated>
<published>2007-06-27T10:51:13-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25549#p25549</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25549#p25549"/>
<title type="html"><![CDATA[NESASM Nsf play code and Name Table load - NOOB problem]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=3454&amp;p=25549#p25549"><![CDATA[
I'm super mega noob with nes asm programming....<br /><br />I need help with Nullslepp NSF play code:<br /><!-- m --><a class="postlink" href="http://www.nullsleep.com/treasure/nsf_cart_guide/">http://www.nullsleep.com/treasure/nsf_cart_guide/</a><!-- m --><br /><br />I try load SMB1 nsf file.... But without success <img src="http://forums.nesdev.com/images/smilies/icon_mad.gif" alt=":x" title="Mad" /> <br /><br />SMB NSF:<br />load address: C48D (-80 C40D)<br />init address: 34BE<br />play address: D0F2<br /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">;-----------------------demo-------<br /><br />   .inesprg 1<br />   .ineschr 1<br />   .inesmir 1<br />   .inesmap 0<br /><br />   .org $8000<br />   .bank 0<br /><br />   .org $c40d      ; replace dashes with load address MINUS $80<br />   .incbin &quot;demo.nsf&quot;   ; include NSF tune<br /><br />Reset_Routine:<br />   cld         ; clear decimal flag<br />   sei         ; disable interrupts<br />   lda #%00000000      ; disable vblank interrupts by clearing<br />   sta $2000      ; the most significant bit of $2000<br /><br />Start:<br /><br />   lda #%00001000<br />   sta $2000<br />   lda #%00011110<br />   sta $2001<br /><br />   lda #$3F   ;set ppu to start of palette<br />   sta $2006<br />   lda #$00<br />   sta $2006<br />   ldx #$00<br /><br />loadpal:<br />   lda titlepal, x   ;loads a 32 byte palette<br />   sta $2007<br />   inx<br />   cpx #$20   ;gotta be one extra b/c of inx<br />   bne loadpal<br /><br />vwait:<br />   lda $2002   ;wait...<br />   bpl vwait<br /><br />   lda #$20   ;set ppu to start vram<br />   sta $2006<br />   lda #$20<br />   sta $2006<br /><br />   lda #$01   ;write pattern table tile numbers to the name table<br />   sta $2007<br />   lda #$02<br />   sta $2007<br />   lda #$03<br />   sta $2007<br />   lda #$01<br />   sta $2007<br />   lda #$02<br />   sta $2007<br />   lda #$03<br />   sta $2007<br />   lda #$01<br />   sta $2007<br />   lda #$03<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00   ;write pattern table tile numbers to the name table<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$00<br />   sta $2007<br />   lda #$02<br />   sta $2007<br />   lda #$02<br />   sta $2007<br />   lda #$01<br />   sta $2007<br />   lda #$01<br />   sta $2007<br />   lda #$01<br />   sta $2007<br /><br /><br /><br />   ldx #$00   ;set 2004 to the start SPRRAM<br />   stx $2003<br />   stx $2003<br /><br />   lda #$00   ;Y &#40;w pionie&#41;<br />   sta $2004<br />   lda #$00   ;sprite pattern number &#40;numer tilesa w pliku .SPR&#41;<br />   sta $2004<br />   lda #%00000001<br />   sta $2004<br />   lda #$00   ;X &#40;w poziomie&#41;<br />   sta $2004<br /><br />   lda #$10<br />   sta $2004<br />   lda #$01<br />   sta $2004<br />   lda #%00000001<br />   sta $2004<br />   lda #$10<br />   sta $2004<br /><br />; *** WAIT 2 VBLANKS ***<br />WaitV1:   <br />   lda $2002      ; give the PPU a little time to initialize<br />   bpl WaitV1      ; by waiting for a vblank<br />WaitV2:   <br />   lda $2002      ; wait for a second vblank to be safe<br />   bpl WaitV2      ; and now the PPU should be initialized<br /><br /><br />; *** CLEAR SOUND REGISTERS ***<br />   lda #$00      ; clear all the sound registers by setting<br />   ldx #$00      ; everything to 0 in the Clear_Sound loop<br />Clear_Sound:<br />   sta $4000,x      ; store accumulator at $4000 offset by x<br />   inx         ; increment x<br />   cpx #$0F      ; compare x to $0F<br />   bne Clear_Sound      ; branch back to Clear_Sound if x != $0F<br /><br />   lda #$10      ; load accumulator with $10<br />   sta $4010      ; store accumulator in $4010<br />   lda #$00      ; load accumulator with 0<br />   sta $4011      ; clear these 3 registers that are <br />   sta $4012      ; associated with the delta modulation<br />   sta $4013      ; channel of the NES<br /><br />; *** ENABLE SOUND CHANNELS ***<br />   lda #%00001111      ; enable all sound channels except<br />   sta $4015      ; the delta modulation channel<br /><br />; *** RESET FRAME COUNTER AND CLOCK DIVIDER ***<br />   lda #$C0      ; synchronize the sound playback routine <br />   sta $4017      ; to the internal timing of the NES<br /><br />; *** SET SONG # &amp; PAL/NTSC SETTING ***<br />   lda #$00      ; replace dashes with song number<br />   ldx #$00      ; replace with $00 for NTSC or $01 for PAL<br />   jsr $be34      ; replace dashes with init address<br /><br />; *** ENABLE VBLANK NMI ***<br />   lda #%10000000      ; enable vblank interrupts by setting the <br />   sta $2000      ; most significant bit of $2000<br />Loop:<br />   jmp Loop<br /><br />titlepal:<br />   .incbin &quot;demo.pal&quot;   ;palette data<br /><br />NMI_Routine:<br />   lda $2002      ; read $2002 to reset the vblank flag<br />   lda #%00000000      ; clear the first PPU control register  <br />   sta $2000      ; writing 0 to it<br />   lda #%10000000      ; reenable vblank interrupts by setting<br />   sta $2000      ; the most significant bit of $2000<br />   jsr $f2d0      ; replace dashes with play address<br />   rti         ; return from interrupt routine<br /><br />IRQ_Routine:<br />   rti         ; return from interrupt routine<br /><br />   .bank 1<br />   .org   $FFFA<br />   .dw      0 ; NMI_Rutine<br />   .dw      Start ; Reset_Rutine<br />   .dw      0 ; IRQ_Rutine<br /><br />   .bank 2<br />   .org $0000<br />   .incbin &quot;demo.bkg&quot;<br />   .incbin &quot;demo.spr&quot;<br /><br />;-----------------------end----</div><br /><br />Next: <br /><br />How to load Name table from file (.map) ???<br /><br />I try load name table using Gba Gay tutorial, lesson 13 "Making Background:<br /><!-- m --><a class="postlink" href="http://www.patatersoft.info/gbaguy/day13n.htm">http://www.patatersoft.info/gbaguy/day13n.htm</a><!-- m --><br /><br />But dont work...:/ I dont see any bkg tiles...:/<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=411">sdm</a> — Wed Jun 27, 2007 10:51 am</p><hr />
]]></content>
</entry>
</feed>
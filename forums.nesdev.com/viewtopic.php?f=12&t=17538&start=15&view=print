<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - SDD1 FGPA implementation</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">SDD1 FGPA implementation</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=17538">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=17538</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>4</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>creaothceann</b> [ Sat Jul 21, 2018 3:47 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">The graphics seem to be smaller than they need to be, the screen is letterboxed, and the animations are missing frames. [...] The game also has some slowdown, and I don't really see why it should.</div><br />AI?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Se√±or Ventura</b> [ Sat Jul 21, 2018 2:19 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">93143 wrote:</div><div class="quotecontent"><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">So the game has issues already.... humph, wasn't aware of that.</div><br />It's a port of a CPS2 game, so it was never going to be perfect.<br /><br />It's just that I and others feel that it was probably possible to do better.  Maybe it would have been unreasonable to expect better under reasonable time and budget constraints, or for an affordable price.  Maybe it was a corporate afterthought or a contractual obligation and didn't get a reasonable schedule or budget.  Maybe the RAM-limited nature of the next-gen consoles made devs wary of pushing the SNES too hard for fear of making the PlayStation look bad.  Maybe the programmers were just lazy or incompetent.  Or maybe it really is as good as it can get on the hardware - but I doubt it.<br /><br />The graphics seem to be smaller than they need to be, the screen is letterboxed, and the animations are missing frames.  Preliminary calculations suggest that it may be possible to remedy all of these things with a sufficiently advanced animation engine and more ROM.<br /><br />The vocals are muddy, the music is terrible, and the game has loading pauses where everything freezes.  These things are intimately related, and I think it's possible to fix all of them at once with a high-bandwidth HDMA streaming scheme.  Even if I'm wrong, there are multiple examples of games that handle on-the-fly ARAM loading better than this one.<br /><br />The game also has some slowdown, and I don't really see why it should.</div><br /><br />May be one day it can be fixed, just how today is going on with the final fight.<br /><br />Take a look on this, its author has much merit:<br /><!-- m --><a class="postlink" href="http://www.baddesthacks.net/forums/viewtopic.php?f=4&amp;t=37&amp;start=260">http://www.baddesthacks.net/forums/view ... &amp;start=260</a><!-- m --><br /><br /><br />I'm sorry for the intromission, magno ^^u

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>93143</b> [ Sat Jul 21, 2018 11:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">creaothceann wrote:</div><div class="quotecontent">AI?</div><br />Is that typically a large chunk of the frame in a Super NES fighting game?  I imagine it uses a bytecode scripting system, and it may be possible to substantially optimize it (maybe even hardcode it if all else fails), but I'm not an expert...<br /><br /><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">But wouldn't that require a few options --- either A, someone would need to buy the FPGA SDD1 pcb (presumably a dev board), or B, wouldn't this lead to more cart destruction because some potential future game/hacks that needs the SDD1.</div><br />You can get what looks like an original copy of Star Ocean for less than $20, although it varies a fair bit.  SFA2 seems to be in the $40 range.  (Weird, considering it's nowhere near as highly regarded and was sold outside Japan.  I'm guessing it's because Star Ocean has been extracted and can be cloned without an S-DD1, while SFA2 hasn't.)<br /><br />Can an FPGA beat those prices?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Can the SD2Snes can run the SDD1 games?</div><br />They're still on the incompatibility list.  The Super FX games aren't, which means the list was updated very recently.  But if this project works properly on real hardware, it should be possible to implement it, right?  That should reduce demand for repros.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Fisher</b> [ Wed Jul 25, 2018 1:07 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A thing that I've found interesting is that there's an early <a href="https://eludevisibility.org/2018/street-fighter-zero-2-japan-prototype" class="postlink">prototype</a> that didn't use the SDD1.<br />Seems to be an early version, but maybe the chip can be just left out by using a larger ROM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>magno</b> [ Mon Jul 30, 2018 2:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Fisher wrote:</div><div class="quotecontent">A thing that I've found interesting is that there's an early <a href="https://eludevisibility.org/2018/street-fighter-zero-2-japan-prototype" class="postlink">prototype</a> that didn't use the SDD1.<br />Seems to be an early version, but maybe the chip can be just left out by using a larger ROM.</div><br /><br />Yes, that can be done; Nevitski did for Star Ocean and I myself did it for Star Ocean too, resulting in a 65.5 Megabit ROM. My way of doing it was dumping all and any S-DD1 compressed chunk and then, re-inserting each one as decompressed data. That is tedious, but you get the minimum ROM size.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>93143</b> [ Mon Jul 30, 2018 3:18 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">magno wrote:</div><div class="quotecontent">I myself did it for Star Ocean too, resulting in a 65.5 Megabit ROM.</div><br />...wait, what?<br /><br />That substantially alters my estimate of the potential compression ratio available.  Both SFA2 and Metal Slug should still fit without cuts, but it's a lot closer than it was.  On the other hand, Star Ocean isn't really very much like either of those games...<br /><br />What kind of average compression ratio do you see with graphics?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>srg320</b> [ Mon Jul 30, 2018 3:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">magno wrote:</div><div class="quotecontent"> I myself did it for Star Ocean too</div><br />Star Ocean has 8bpp modes data?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>magno</b> [ Mon Jul 30, 2018 6:52 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">93143 wrote:</div><div class="quotecontent"><div class="quotetitle">magno wrote:</div><div class="quotecontent">I myself did it for Star Ocean too, resulting in a 65.5 Megabit ROM.</div><br />...wait, what?<br /></div><br /><br />Is 65.5 Megabit bigger or smaller than you expected?<br /><br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">What kind of average compression ratio do you see with graphics?</div><br /><br />I could make calculations about it if you are interested.<br /><br />Most of the SDD-1 chunks are 8x16 4BPP sprite tiles, ie, 64 bytes per chunk, which are compressed down to 40~50 bytes per chunk.<br /><br /><div class="quotetitle">srg320 wrote:</div><div class="quotecontent">Star Ocean has 8bpp modes data?</div><br /><br />I can't remember any 8BPP modes.<br /><br />Please, let my check when I have some free time and I will be able to provide reliable information about it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jul 30, 2018 8:42 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">magno wrote:</div><div class="quotecontent"><div class="quotetitle">93143 wrote:</div><div class="quotecontent"><div class="quotetitle">magno wrote:</div><div class="quotecontent">I myself did it for Star Ocean too, resulting in a 65.5 Megabit ROM.</div><br />...wait, what?</div><br />Is 65.5 Megabit bigger or smaller than you expected?</div><br />To me, the most unexpected part was that it's so close to a power of 2 bits: 67.1 megabits, which is 64 mebibits or 64 of what the game industry called &quot;megabits&quot; in the mask ROM era. 65.5 megabits sounds close to 64*1000*1024 bits, which has the same mixed-up logic as the old &quot;1.44 MB&quot; floppy disk, which held 1.44*1000*1024 bytes using the most common MFM sector format (80 tracks, 18 sectors per track, 512 bytes per sector).<br /><br />And I too am curious about typical compression rates over the S-DD1 corpus. If you have time, it'd be interesting to read what causes a particular kind of graphic to be compressed more or less than average, or comparison with the rate performance of the SPC7110 (another context-adaptive arithmetic decoder). At least this might help inform design of pure-software tile codecs for Game Boy and Super NES.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>magno</b> [ Mon Jul 30, 2018 10:44 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">65.5 megabits sounds close to 64*1000*1024 bits</div><br /><br />In fact, my Star Ocean version is 65.5 * 1024 * 1024 bits. It spans 132 LoROM banks (32768 bytes each) and 64 HiROM banks (65536 bytes each).<br /><br /><br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">And I too am curious about typical compression rates over the S-DD1 corpus. If you have time, it'd be interesting to read what causes a particular kind of graphic to be compressed more or less than average, or comparison with the rate performance of the SPC7110 (another context-adaptive arithmetic decoder). At least this might help inform design of pure-software tile codecs for Game Boy and Super NES.</div><br /><br />That sounds interesting, although I still don't know SPC7110 inners <img src="./images/smilies/icon_sad.gif" alt=":(" title="Sad" /><br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent"><div class="quotetitle">magno wrote:</div><div class="quotecontent">I myself did it for Star Ocean too, resulting in a 65.5 Megabit ROM.</div><br />...wait, what?<br /><br />That substantially alters my estimate of the potential compression ratio available.  Both SFA2 and Metal Slug should still fit without cuts, but it's a lot closer than it was.  On the other hand, Star Ocean isn't really very much like either of those games...<br /><br />What kind of average compression ratio do you see with graphics?</div><br /><br />I checked; Star Ocean japanese version has 4395668 uncompressed bytes and they are compressed down to 2180646 bytes, pretty near to 50%. That includes all graphic chunks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>93143</b> [ Mon Jul 30, 2018 2:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">magno wrote:</div><div class="quotecontent">Is 65.5 Megabit bigger or smaller than you expected?</div><br />Smaller.  The neviksti hack is 12 MB, so I assumed that was the uncompressed size of the game.<br /><br /><div class="quotetitle">magno wrote:</div><div class="quotecontent">I checked; Star Ocean japanese version has 4395668 uncompressed bytes and they are compressed down to 2180646 bytes, pretty near to 50%. That includes all graphic chunks.</div><br />Okay, that sounds better.  Scared me for a moment.<br /><br />Metal Slug seems to have 16 MB of C-ROM, based on the MAME manifest (though the MAME ROMs add up to more than 193 Mbit, so some of them are probably partly empty).  Could be 14-15 MB rescaled to SNES resolution, since the graphics probably won't reduce by the full 256/304 ratio because of tiling.  If that compresses down to about 7-8 MB, and audio can be squeezed down quite a bit because the SNES can re-pitch samples, it may be possible to do the game in about 9-10 MB, maybe with 8 MB behind the S-DD1 and 2 MB in parallel.  At worst I imagine 12 MB would be more than adequate, and by the time the S-DD1 came out the N64 was on the cusp of hosting games that big.<br /><br />SFA2 has 20 MB of graphics and 4 MB of audio data.  The former could easily be well below 16 MB when rescaled to SNES resolution, and since a lot of it is cartoony with a bunch of flat colour it might compress better than Star Ocean or Metal Slug.  Even if it doesn't, 7-8 MB is still a plausible estimate.  The audio should compress to about 2 MB with BRR, and we're left with a very similar scenario as with Metal Slug.<br /><br />So they should both work about as well as I had thought.  Thanks for the estimate.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>magno</b> [ Mon Jul 30, 2018 10:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">Smaller.  The neviksti hack is 12 MB, so I assumed that was the uncompressed size of the game.</div><br /><br />Neviksti's version is 12MByte but must of the ROM space is not filled with data. He left untouched the first 48Mbit (the original ROM) then used 3 bank to make a big lookup table for pairing each compressed address with new uncompressed location in expanded ROM. Then added all of Dejap's GFX packs in the rest of the ROM.<br />The fact is the original 48Mbit can be exploited because part of it is S-DD1 compressed data (about 18 MBit aprox), and hundreds of Dejap's GFX chunks are not valid, so they shouldn't be included in the expanded ROM.<br />If you make the calculations, the original game has about 35 megabits of uncompressed data; 18 Megabits of that uncompressed data can be allocated in the original ROM, and the rest of if, in the expanded space: 48Mbit (original) + 17 (expanded) = 65 Mbit.<br />You can check this in the ROM layout document I uploaded to RHDN.<br /><br /><br /><div class="quotetitle">93143 wrote:</div><div class="quotecontent">Metal Slug seems to have 16 MB of C-ROM, based on the MAME manifest (though the MAME ROMs add up to more than 193 Mbit, so some of them are probably partly empty).  Could be 14-15 MB rescaled to SNES resolution, since the graphics probably won't reduce by the full 256/304 ratio because of tiling.  If that compresses down to about 7-8 MB, and audio can be squeezed down quite a bit because the SNES can re-pitch samples, it may be possible to do the game in about 9-10 MB, maybe with 8 MB behind the S-DD1 and 2 MB in parallel.  At worst I imagine 12 MB would be more than adequate, and by the time the S-DD1 came out the N64 was on the cusp of hosting games that big.<br /><br />SFA2 has 20 MB of graphics and 4 MB of audio data.  The former could easily be well below 16 MB when rescaled to SNES resolution, and since a lot of it is cartoony with a bunch of flat colour it might compress better than Star Ocean or Metal Slug.  Even if it doesn't, 7-8 MB is still a plausible estimate.  The audio should compress to about 2 MB with BRR, and we're left with a very similar scenario as with Metal Slug.<br /><br />So they should both work about as well as I had thought.  Thanks for the estimate.</div><br /><br />That MEtal Slug sounds exciting!!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>93143</b> [ Tue Jul 31, 2018 10:27 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">magno wrote:</div><div class="quotecontent">That MEtal Slug sounds exciting!!</div><br />It would be more exciting if there was any realistic prospect of it happening any time soon.  Everybody who might contribute, including me, is busy doing other stuff.<br /><br />But it's certainly fun to think about and talk about.  And there is one member here who arrived harbouring the intention to port Metal Slug to the SNES, and has given it a lot of thought, even if he now feels it would be too big a task for him alone.  A few other members are known to have been working on stuff that could be applicable to such a port, such as predictive animation, dynamic sprite VRAM allocation, and HDMA audio data streaming.  Not to mention an FPGA implementation of the S-DD1...  I can't rule out the possibility that this project may get off the ground someday.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>srg320</b> [ Tue Jul 31, 2018 11:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So, with magno‚Äôs  help I finally launched SDD1 on FPGA SNES.  Not sure what will work on real hardware. Also not tested in 8BPP modes. So far I have achieved 3 master cycles for ROM access. Also I don't know how SDD1 should work if more than one DMA channel is selected for it (header is common or different).<br /><br />sorry for the quality<br /><a href="https://youtu.be/FWvs6r8bg44" class="postlink">https://youtu.be/FWvs6r8bg44</a><br /><a href="https://youtu.be/muA43DjAKS4" class="postlink">https://youtu.be/muA43DjAKS4</a>

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=13207">SDD1.rar</a> [6.86 KiB]
			</span><br />
			<span class="gensmall">Downloaded 13 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>magno</b> [ Wed Aug 01, 2018 12:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SDD1 FGPA implementation</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">srg320 wrote:</div><div class="quotecontent">So, with magno‚Äôs  help I finally launched SDD1 on FPGA SNES.  Not sure what will work on real hardware. Also not tested in 8BPP modes. So far I have achieved 3 master cycles for ROM access. Also I don't know how SDD1 should work if more than one DMA channel is selected for it (header is common or different).<br /><br />sorry for the quality<br /><a href="https://youtu.be/FWvs6r8bg44" class="postlink">https://youtu.be/FWvs6r8bg44</a><br /><a href="https://youtu.be/muA43DjAKS4" class="postlink">https://youtu.be/muA43DjAKS4</a></div><br /><br />How did you record those videos? You say you don't know if your implementation will work on hardware, so... which hardware did you run SFA2 and SO?<br />As for ROM access, 3 master cycles is the miminum for FastROM, since that means 139ns time access. FastROM is slower than 120ns, so 3 master cycles is the proper time access for SDD1 core.<br /><br />EDIT:<br />Ok, taking a look to the source code you provided, that implementation <strong>CAN'T work</strong> neither in real hardware nor in any other platform. The design lacks of 3 signals needed to manage the ROM output, and what's more, there is no SRAM_CS at all, so Star Ocean wouldn't work: if there is no SRAM present in the cartridge, audio engine stalls and the game freezes.<br />Still wondering how those videos were recorded...

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>4</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - High level SMB Disassembly on RHDN</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">High level SMB Disassembly on RHDN</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=9780">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=9780</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun Feb 03, 2013 7:47 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>High level SMB Disassembly on RHDN</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The RHDN release seems to not have a good upload...<br /><br />As in: It is corrupt.<br /><br />Movax12, Can you please solve it?<br /><br />EDIT: The person actually posted a corrupted link posing as a ZIP file using the WikiSend File Shareing site, He should find a better place to upload things like this!

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Movax12</b> [ Sun Feb 03, 2013 9:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly - Corrupted Released</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm sure it will be resolved soon.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Movax12</b> [ Mon Feb 04, 2013 9:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly - Corrupted Released</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This is fixed, Hamtaro126. Please see <!-- m --><a class="postlink" href="http://www.romhacking.net/documents/635/">http://www.romhacking.net/documents/635/</a><!-- m --><br /><br /><br />Edit: Maybe we could change the title of this thread? Maybe: High level SMB Disassembly - Released

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>rainwarrior</b> [ Wed Feb 06, 2013 12:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly - Corrupted Released</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Here, I made some FCEUX debugging symbols with this, for people who would like to inspect it with FCEUX.<br /><br />(It also works on a regular SMB ROM, you don't need to go compiling Movax12's.)

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=365">smbdisHL_fceux_symbols.zip</a> [27.31 KiB]
			</span><br />
			<span class="gensmall">Downloaded 67 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>teremochek</b> [ Thu Mar 07, 2013 6:57 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly - Corrupted Released</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hey. The really interesting code!<br />I want to ask questions.<br />When I change the source code (make mistakes), then build, wait, and nothing happens.<br />In the folder &quot;obj&quot; appears Fail &quot;smbdishl.o&quot;. No more files do not. <br />What a way to debug?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Movax12</b> [ Thu Mar 07, 2013 8:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly - Corrupted Released</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't think I understand the problem. Could you try to explain more?<br /><br />If you are getting an assembly error, please check the line referenced in the error output. <br />Example: There is something wrong at line 188:<br /><br />src\smbdishl.s(188): Error: Unexpected trailing garbage characters

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Thu Mar 07, 2013 8:40 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly - Corrupted Released</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The problem with ca65's error messages for programs that use lots of macros is that &quot;Unexpected trailing garbage characters&quot; shows up on the line where the macro is called even if the error is inside the macro.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Thu Mar 07, 2013 9:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly - Corrupted Released</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The problem with ca65's error messages for programs that use lots of macros is that &quot;Unexpected trailing garbage characters&quot; shows up on the line where the macro is called even if the error is inside the macro.</div><br />This was fixed (kind of) a long time ago, but I'm not sure if the change has made it in to the release version yet. In some situations what you described will still occur, but it's pretty rare.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Movax12</b> [ Thu Mar 07, 2013 9:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly - Corrupted Released</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The problem with ca65's error messages for programs that use lots of macros is that &quot;Unexpected trailing garbage characters&quot; shows up on the line where the macro is called even if the error is inside the macro.</div><br /><br />There was the opposite problem for some time with the snapshot releases: It would only show the error line inside the macro and not where it was called from at all. This was fixed: The error messages are pretty verbose/helpful now.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>teremochek</b> [ Fri Mar 08, 2013 12:44 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly on RHDN</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Now I'm running CMD and see a error message.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">ld65.exe: Warning: src\nes.cfg(9): Memory area overflow in 'ROM', segment 'CODE' (1 bytes)<br />ld65.exe: Error: src\nes.cfg(9): Start adress too low in 'ROM', segment 'VECTORS'</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Movax12</b> [ Fri Mar 08, 2013 8:05 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly on RHDN</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Unfortunately there is no room left in the ROM. If you want to add code you're going to have to figure out what you can remove or a way to add banks.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>teremochek</b> [ Fri Mar 08, 2013 9:26 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly on RHDN</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Movax12 wrote:</div><div class="quotecontent">Unfortunately there is no room left in the ROM. If you want to add code you're going to have to figure out what you can remove or a way to add banks.</div><br /><br />If I add a bank, then the new code will work with your code?<br /><br />What is better to remove the code inside?<br /><br />Another question. Which program is better to edit the code?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>teremochek</b> [ Fri Nov 08, 2013 5:32 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly on RHDN</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Can anyone explain how to add a bank?<br /><br />(Good idea to port Mario for easy programming language. I do not understand how the assembler, too many unclear statements.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Fri Nov 08, 2013 7:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly on RHDN</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There's been a lot of discussion about this in the past, but I'll give you the 10,000-foot view as a starting point. Also, I'd like to mention that this is an excellent first hack to get your feet wet with NES development! Don't dismiss it as too complex!<br /><br />First, understand what a memory mapper is and what it does. The wiki doesn't really have a high-level overview, so I'll start with that.<br /><br />The NES's memory goes something like this:<br />$0000 - $07FF RAM<br />$0800 - $7FFF Registers and etc.<br />$8000 - $FFFF Game code and data<br /><br />That gives you 2KB of RAM and 32KB of game code and data to work with, of which SMB uses just about all of it. Using only the NES, there is no way to access more game code or data.<br /><br />A memory mapper allows a game to access game code and data beyond the 32KB limit by means of &quot;bank switching&quot;. For instance, if we have a game with 128KB of code and data, we could think of it as 4 separate 32KB &quot;banks&quot;, and we could call them banks 0 through 3. By means of bank switching, we can select which of the four banks are visible to the NES in the address space $8000 - $FFFF at any given time.<br /><br />One way to approach extending SMB into multiple banks is to use the fairly simple <a href="http://wiki.nesdev.com/w/index.php/BNROM" class="postlink">BNROM mapper</a>, which provides 4 separate 32KB banks for code and data, but uses RAM for the character patterns.<br /><br />The strategy is to embed all character data (8KB) into the first bank, along with the code to load that data into character RAM, and the rest of the code to initialize the system. The other three banks will contain copies of the original 32KB SMB code and data bank with your code modifications, consuming level data to make up the extra room. Finally you split the level data into separate banks and change the level load routine to bank switch prior to passing the data pointer back.<br /><br />There are other approaches that have been used in the past, and many more to come I'm sure.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Fri Nov 08, 2013 8:36 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: High level SMB Disassembly on RHDN</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I wonder if I'd face any repercussions making a NESICIDE project out of this?  Source code is OK but CHR is not?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
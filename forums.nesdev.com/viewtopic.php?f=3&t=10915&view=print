<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - SNES emulator speed vs NES emulator speed</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">SNES emulator speed vs NES emulator speed</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=3&amp;t=10915">http://forums.nesdev.com/viewtopic.php?f=3&amp;t=10915</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zelex</b> [ Mon Jan 20, 2014 7:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Is it odd if a NES emulator is on average 2x slower than snes9x? My NES emulator is cycle accurate (rendering 3 pixels for each CPU cycle, even mid instruction, but I'm not sure thats the issue here.)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alegend45</b> [ Mon Jan 20, 2014 7:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's because Snes9x isn't cycle-accurate. Try bsnes, or higan as it's called now. bsnes is going to be FAR slower than your NES emulator.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Zelex</b> [ Mon Jan 20, 2014 7:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Even being cycle accurate though, that alone is enough to make it twice as slow?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alegend45</b> [ Mon Jan 20, 2014 7:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />More than that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Jan 20, 2014 8:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />From what I've heard, Snes9x is way far from accurate, so I bet it takes all kinds of shortcuts in order to improve performance.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Mon Jan 20, 2014 8:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Does Higan even emulate the NES?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Mon Jan 20, 2014 9:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Are SNES emulators even as equivalently accurate as NES ones regarding the PPU? I don't think there's a decap of the SNES PPUs, and even before that I don't think there was(/is?) anything at the detail level of that about the NES PPU. That is, all the things that happen on each dot, all the internal shift registers, buffers, etc. This is partly because SNES games aren't as varied in how they access the PPU mid-frame, so the detailed information isn't needed to emulate those games correctly. For example, I believe that it was only in the past few years that mid-scanline timing was handled properly in bsnes/higan, to fix a game that did the shadow with mid-scanline timed writes.<br /><br />I think that given emulation at the same accuracy level, a SNES emulator should be slower. It has two CPUs, two PPUs, a DSP, and multi-channel DMA with table-based mid-frame writes.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jan 20, 2014 10:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Dwedit wrote:</div><div class="quotecontent">Does Higan even emulate the NES?</div><br />The old version of bsnes I found in my Linux distribution's repository emulates the NES.<br /><br /><div class="quotetitle">blargg wrote:</div><div class="quotecontent">I think that given emulation at the same accuracy level, a SNES emulator should be slower. It has two CPUs, two PPUs, a DSP, and multi-channel DMA with table-based mid-frame writes.</div><br />Worse yet, Game Paks have coprocessors that can sense cycle-level sync with the main CPU. It's not like the NES, where a mapper was pretty much just an <a href="https://en.wikipedia.org/wiki/Memory_management_unit" class="postlink">MMU</a> possibly with a <a href="https://en.wikipedia.org/wiki/Programmable_interval_timer" class="postlink">PIT</a>. Good luck <em>really</em> emulating the Super FX.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>byuu</b> [ Thu Jan 23, 2014 6:46 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />&gt; Does Higan even emulate the NES?<br /><br />Yep, fairly well, too. Also does SNES, GB, GBC and GBA.<br /><br />&gt; Are SNES emulators even as equivalently accurate as NES ones regarding the PPU?<br /><br />We don't know the exact points that everything happens. I was able to log some of it with some fancy test ROMs. In one instance, I read from the OAM data port on every possible cycle with a special sequence of bytes in OAM. It allowed me to see at which cycles the PPU fetched from it, and I copied that pattern. CGRAM seems to be just the raw color fetch for each pixel, easy stuff there. VRAM is completely disabled to CPU code, which is just lovely.<br /><br />The overhead is from the synchronization level (the PPU cannot ever run ahead of the CPU no matter what), determining the exact positions of each fetch won't slow the emulation down, but will improve the accuracy. I would certainly welcome any help on this front. What's really needed is a logic analyzer.<br /><br />&gt; Worse yet, Game Paks have coprocessors that can sense cycle-level sync with the main CPU. It's not like the NES, where a mapper was pretty much just an MMU possibly with a PIT. Good luck really emulating the Super FX.<br /><br />I emulate the SuperFX instruction cache (and it's 16x16 block fetching pattern), prefetch, ROM buffer cache, RAM buffer cache, primary pixel cache, secondary pixel cache, etc. Only issue I can't figure out is what to do when the secondary pixel cache fills up while the CPU is pegging the RAM non-stop: does it interleave draining the cache and executing cycles, does it stall out the pixel cache entirely, or does it stall out the CPU entirely?<br /><br />The SA-1 is by far the worst. It runs at 10.7MHz, and has a special bus master chip. Both the SNES CPU and the SA-1 CPU can access the ROM and RAM on the cartridge. But if the SA-1 tries to access, or is already accessing, the same physical chip that the SNES accesses, the SA-1 CPU will stall/abort the current instruction, allow the SNES instruction to complete, and then try and read the data in again. To emulate that, I would have to -force- the SA-1 to step one cycle at a time, and watch what the SNES CPU is accessing each cycle.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>pops</b> [ Sun Jan 26, 2014 8:24 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: SNES emulator speed vs NES emulator speed</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Byuu wrote an article on this subject for arstechnica back in 2011. Definitely worth a read.<br /><br /><a href="http://arstechnica.com/gaming/2011/08/accuracy-takes-power-one-mans-3ghz-quest-to-build-a-perfect-snes-emulator/" class="postlink">Accuracy takes power: one man's 3ghz quest to build a perfect snes emulator</a>.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>1</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - First Sprite Designs - Opinions?</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - NES Graphics" href="http://forums.nesdev.com/feed.php?f=21" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - First Sprite Designs - Opinions?" href="http://forums.nesdev.com/feed.php?f=21&amp;t=13049" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '4');
	var per_page = '15';
	var base_url = './viewtopic.php?f=21&amp;t=13049';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 1:26 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=21">NES Graphics</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=21&amp;t=13049&amp;start=45">First Sprite Designs - Opinions?</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=21"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=21&amp;t=13049"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>4</strong> of <strong>9</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 132 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=21&amp;t=13049&amp;start=30">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=21&amp;t=13049">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=30">3</a><span class="page-sep">, </span><strong>4</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=90">7</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=120">9</a> &nbsp;<a href="./viewtopic.php?f=21&amp;t=13049&amp;start=60">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=21&amp;t=13049&amp;start=45&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=21&amp;t=13049&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=21&amp;t=13049&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p152345"></a>
				<b class="postauthor">rainwarrior</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152345">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152345#p152345"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Aug 03, 2015 7:07 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=5165_1471663472.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Jan 22, 2012 12:03 pm<br /><b>Posts:</b> 6592<br /><b>Location:</b> Canada
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">dougeff wrote:</div><div class="quotecontent">I've noticed that Mike Tyson's Punch out switches banks every few frames for the opponent (rendered as background) and I believe also switches banks mid-frame because the top of the screen uses a different tile set than the opponent. It uses MMC2, which is also an option.</div><br />The MMC2 lets you create an automatic mid-screen bankswitch by placing a special tile at the point on the screen you want to switch (there are two swiching units, one for sprites and one for background), allowing up to double the onscreen tile count without requiring any use of the CPU or timing during the frame.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=5165"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p152525"></a>
				<b class="postauthor">darryl.revok</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152525">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152525#p152525"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Aug 06, 2015 3:04 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7129_1443779090.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 25, 2015 1:22 pm<br /><b>Posts:</b> 501
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Is there a good reference around for coding for the MMC3?<br /><br />I found a simple tutorial for the MMC1 on the wiki and I'm trying to gain an understanding of it.<br /><br />So, I see the instructions to perform these commands, but I don't get why:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">lda #$0E   ; vertical mirroring, fixed $C000, 8 KB CHR pages<br />  sta $8000  ; (use $0F instead for horizontal mirroring)<br />  lsr a<br />  sta $8000<br />  lsr a<br />  sta $8000<br />  lsr a<br />  sta $8000<br />  lsr a<br />  sta $8000</div><br /><br />So, I get that you change the mirroring on the system by addressing the PPU, but this one is addressing the very start of program ROM, so I'm guessing $8000 is a special location for addressing the mapper. Is that correct?<br /><br />So, in decimal format, the bytes sent to $8000 are:<br /><br />%00001110<br />%00000111<br />%00000011 (carry set)<br />%00000001 (carry set)<br />%00000000 (carry set)<br /><br />What does any of this do, and why does it have to be LSRed and written five times?<br /><br />Then to switch banks, you have to do this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">mmc1_load_prg_bank:<br />&nbsp; sta $E000<br />&nbsp; lsr a<br />&nbsp; sta $E000<br />&nbsp; lsr a<br />&nbsp; sta $E000<br />&nbsp; lsr a<br />&nbsp; sta $E000<br />&nbsp; lsr a<br />&nbsp; sta $E000<br />&nbsp; rts</div><br /><br />So this time we're addressing $E000 which I imagine is a special address for telling the mapper to switch banks. I get how the accumulator is a value from $00-$0F, except for the fact that it LSRs and writes 5 times. Seems like a common theme for addressing this mapper, but can anyone tell me why?<br /><br />Then there's this bit that I'm trying to wrap my head around:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">reset_stub:<br />&nbsp; sei<br />&nbsp; ldx #$FF<br />&nbsp; txs&nbsp; &nbsp; &nbsp; &nbsp; ; set the stack pointer<br />&nbsp; stx $8000&nbsp; ; reset the mapper<br />&nbsp; jmp reset&nbsp; ; must be in $C000-$FFED<br />&nbsp; .addr nmiHandler, reset_stub, irqHandler</div><br /><br />So, let me see if I understand what's happening here.<br /><br />First off, it says that with some versions of this mapper, the end of the program is switchable. That makes me think that any bank which could be at the end of the program needs to include addresses for NMI, RESET, and IRQ starting at $FFFA. Is that correct?<br /><br />Then, if your program changes, the instructions for your vectors need to be located at the same addresses, right?<br /><br />So it's saying to put the above code at the last 16 bytes of a bank. So that would be like, $BFF0, right? Why does it only tell you to put the reset vector at the end of each switchable bank? Why not NMI and IRQ as well? Wouldn't those addresses need to stay the same as the banks switch?<br /><br />Also it says that writing %11111111 to $8000 will reset the mapper but I don't understand why. Is there a document on the mapper instructions, particularly for MMC3?<br /><br />I see now that the above code isn't a reset, but a reset stub, and I'm even more confused.<br /><br />First off, wouldn't NMI, RESET, and IRQ have to be .org-ed to the same addresses in each bank?<br /><br />Second, I don't really get the purpose for the above code now that I realize it's not actually the reset vector. When is this reset_stub supposed to be called? Why does it disable interrupts and set the stack to $FF when this is going to happen again anyway when it JMPs to reset?<br /><br />I hope that's not too much to ask. I thought I was ready to understand this and start integrating mapper features but I need a little help. I don't even think I'm going to need to switch program banks but I'd like to understand the concepts.<br /><br />Thanks for all of your help getting started!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7129"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p152527"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152527">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152527#p152527"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Aug 06, 2015 3:26 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">darryl.revok wrote:</div><div class="quotecontent">Is there a good reference around for coding for the MMC3?</div><br />There's a <a href="http://wiki.nesdev.com/w/index.php/MMC3" class="postlink">reference page in the wiki</a>, but I don't think there are any examples.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So, I get that you change the mirroring on the system by addressing the PPU, but this one is addressing the very start of program ROM, so I'm guessing $8000 is a special location for addressing the mapper. Is that correct?</div><br />The way the program communicates with the mappers is kind of a trick: since PRG-ROM is not writable, most mappers intercept attempts to write to PRG-ROM, and use the value being written for purposes related to the mapper function. Which addresses are used for what purposes depends on the mapper.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What does any of this do, and why does it have to be LSRed and written five times?</div><br />Because in an attempt to make the MMC1 chip cheaper, it only has 1 input bit, so you need multiple writes to send all the bits.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p152531"></a>
				<b class="postauthor">dougeff</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152531">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152531#p152531"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Aug 06, 2015 4:34 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7008_1483937093.png" width="86" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri May 08, 2015 7:17 pm<br /><b>Posts:</b> 2200<br /><b>Location:</b> DIGDUG
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Each mapper switches banks completely differently, so learning how MMC1 works teaches you nothing about how MMC3 works. I wrote up some test programs for the basics of MMC3 bankswapping. I'll post it or PM it to you later, when I get back to my computer.</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://nesdoug.com" class="postlink">nesdoug.com</a> -- blog/tutorial on programming for the NES</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7008"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p152532"></a>
				<b class="postauthor">dougeff</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152532">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152532#p152532"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Aug 06, 2015 5:10 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7008_1483937093.png" width="86" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri May 08, 2015 7:17 pm<br /><b>Posts:</b> 2200<br /><b>Location:</b> DIGDUG
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">MMC3 - bankswapping basics.<br /><br /><s>At startup, the first 2 PRG banks are loaded to $8000-bfff, and the last 2 PRG banks are loaded at $c000-ffff.<br /><br />$8000-9fff and $c000-dfff are swappable. The other 2 are fixed. I would prefer to keep c000 fixed, unless you have a lot of dmc sound files &#40;as they need to go above $c000.&#41;</s><br /><br />To swap PRG bank 1 (the second one) into $8000-9fff<br />lda #$06<br />sta $8000<br />lda #$01<br />sta $8001<br /><br />To swap PRG bank 2 (the third one) into $8000-9fff<br />lda #$06<br />sta $8000<br />lda #$02<br />sta $8001<br /><br />Etc.<br /><br />MMC3 divides CHR-ROM banks into chunks of $400 bytes.<br />Thus 1 full set of tiles ($2000 bytes) = banks 0-7. The next set would be 8-f.<br /><br />To swap a second set (8-f) into the PPU...<br /><br />lda #$00  ;destination $000-7ff<br />sta $8000<br />lda #$08  ;banks 8-9<br />sta $8001<br /><br />lda #$01  ;destination $800-fff<br />sta $8000<br />lda #$0a  ;banks a-b<br />sta $8001<br /><br />lda #$02  ;destination $1000-13ff<br />sta $8000<br />lda #$0c  ;bank c<br />sta $8001<br /><br />lda #$03  ;destination $1400-17ff<br />sta $8000<br />lda #$0d  ;bank d<br />sta $8001<br /><br />lda #$04  ;destination $1800-1bff<br />sta $8000<br />lda #$0e  ;bank e<br />sta $8001<br /><br />lda #$05  ;destination $1c00-1fff<br />sta $8000<br />lda #$0f  ;bank f<br />sta $8001<br /><br />If you want to know how the scanline IRQ works, see this tutorial...<br /><!-- m --><a class="postlink" href="http://bobrost.com/nes/files/mmc3irqs.txt">http://bobrost.com/nes/files/mmc3irqs.txt</a><!-- m --><br /><br />Hope this helps. BTW, these swaps happen instantaneously, and can be done anytime.</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://nesdoug.com" class="postlink">nesdoug.com</a> -- blog/tutorial on programming for the NES</div>
					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=7008">dougeff</a> on Thu Aug 06, 2015 8:36 pm, edited 3 times in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7008"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p152533"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152533">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152533#p152533"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Aug 06, 2015 5:15 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">dougeff wrote:</div><div class="quotecontent">At startup, the first 2 PRG banks are loaded to $8000-bfff</div><br />Says who? I was under the impression that bank registers 6 and 7 had unspecified values at power-on, as did the bit in $8000 for swapping windows $C000 and $8000. This means your code in $E000-$FFFF must initialize these.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">BTW, these swaps happen instantaneously, and can be done anytime.</div><br />However, trying to swap in both the main program and the NMI handler takes a bit of planning, as the main program and NMI handler have to share port $8000.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p152534"></a>
				<b class="postauthor">dougeff</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152534">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152534#p152534"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Aug 06, 2015 5:34 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7008_1483937093.png" width="86" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri May 08, 2015 7:17 pm<br /><b>Posts:</b> 2200<br /><b>Location:</b> DIGDUG
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">How do you initialize that? (Source code please) or is it the same as I wrote, but with the banks different?</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://nesdoug.com" class="postlink">nesdoug.com</a> -- blog/tutorial on programming for the NES</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7008"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p152537"></a>
				<b class="postauthor">Kasumi</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152537">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152537#p152537"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Aug 06, 2015 5:52 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=3504.gif" width="48" height="48" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Apr 02, 2008 2:09 pm<br /><b>Posts:</b> 1174
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">darryl.revok wrote:</div><div class="quotecontent">Then there's this bit that I'm trying to wrap my head around:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">reset_stub:<br />&nbsp; sei<br />&nbsp; ldx #$FF<br />&nbsp; txs&nbsp; &nbsp; &nbsp; &nbsp; ; set the stack pointer<br />&nbsp; stx $8000&nbsp; ; reset the mapper<br />&nbsp; jmp reset&nbsp; ; must be in $C000-$FFED<br />&nbsp; .addr nmiHandler, reset_stub, irqHandler</div><br /><br />So, let me see if I understand what's happening here.<br /><br />First off, it says that with some versions of this mapper, the end of the program is switchable. That makes me think that any bank which could be at the end of the program needs to include addresses for NMI, RESET, and IRQ starting at $FFFA. Is that correct?<br /></div><br />That is correct.<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Then, if your program changes, the instructions for your vectors need to be located at the same addresses, right?</div><br />At reset, the CPU begins executing from the address stored at $FFFC. This is all that matters to the CPU. The reset vector is whatever two bytes happen to be stored $FFFC at reset/poweron. The NMI vector is whatever two bytes happen to be stored at $FFFA when the NMI fires. The IRQ vector is whatever two bytes happen to be stored at $FFFE when an IRQ fires.<br /><br />There<em> could</em> be a different two bytes stored at $FFFC in every bank. It's better for consistency that it's always the same, but it doesn't <em>need</em> to be that way. The CPU just reads the two bytes and starts executing from that address.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So it's saying to put the above code at the last 16 bytes of a bank. So that would be like, $BFF0, right?</div> <br />Well... no and yes. Consider a bank that you .org to $8000-$BFFF. That bank can still be swapped to occupy $C000-$FFFF instead. So... yes, while code mapped to $BFF0 could end up there, you really want it in $FFF0. <br /><br />The idea is to have that setup code in a part of the ROM that can't possibly be swapped &quot;out of sync&quot; with the vector the CPU starts executing from which will always be whatever address is at $FFFC. Using the knowledge that the reset_stub will be with a vector in the same bank, regardless of which bank that is, allows you to safely initialize the mapper to a known state using the reset_stub. Then your program can run normally. <br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Why does it only tell you to put the reset vector at the end of each switchable bank? Why not NMI and IRQ as well? Wouldn't those addresses need to stay the same as the banks switch?</div><br />I don't see where you're seeing to only put the reset vector. Yes, you should have a valid IRQ and NMI vector as well. The jmp reset in <a href="http://wiki.nesdev.com/w/index.php/Programming_MMC1" class="postlink">the example code</a> is not a vector at all. The reset vector is reset_stub, and the CPU has already begun executing from there by the time jmp reset is executed. reset is just a label name. It could be jmp initialize or jmp anywhereelse you wanted to go after you knew the mapper was in a known state.<br /><br />I think you're getting confused by the labels. The CPU has no knowledge of what you called reset_stub or reset or anything. It only knows what address is at $FFFC. you could call &quot;reset_stub&quot; &quot;homersimpson&quot; instead, and &quot;reset&quot; &quot;supermario&quot; and the code could still work the same. It's not like C where execution starts at a given named thing. (main.)<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also it says that writing %11111111 to $8000 will reset the mapper but I don't understand why. Is there a document on the mapper instructions, particularly for MMC3?</div><br />You can read about MMC1 <a href="http://wiki.nesdev.com/w/index.php/MMC1" class="postlink">here</a> and you can read about MMC3 <a href="http://wiki.nesdev.com/w/index.php/MMC3" class="postlink">here</a>.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I see now that the above code isn't a reset, but a reset stub, and I'm even more confused.</div><br />All the CPU does when it starts is go to the address stored at $FFFC. In the example code, that address is reset_stub. The code below reset_stub just runs normally after reset.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">First off, wouldn't NMI, RESET, and IRQ have to be .org-ed to the same addresses in each bank?</div><br />Yes. As stated above, all the CPU does is read from the address at $FFFC at reset. It will treat whatever two bytes are there as the address to start executing from, so no other kind of thing should occupy that space.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Second, I don't really get the purpose for the above code now that I realize it's not actually the reset vector. When is this reset_stub supposed to be called? Why does it disable interrupts and set the stack to $FF when this is going to happen again anyway when it JMPs to reset?</div><br />The vector is just the address at $FFFC. The CPU starts executing from whatever address is at $FFFC, always. After that, the program runs normally. So it wouldn't disable interrupts or set the stack to $FF again unless you also put those things under the reset label in the example. (And you shouldn't, because as you said it was already done.)<br /><br />So in the example case, reset_stub is the very first thing executed, always. <br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I thought I was ready to understand this and start integrating mapper features but I need a little help. I don't even think I'm going to need to switch program banks but I'd like to understand the concepts.</div><br />I don't think it's too worth thinking about mappers until your game is about to be larger than 24 KB. At that point you can still make it larger without a mapper, but if you plan to use a mapper that's when you have to being to plan how you'll lay out your banks so you don't end up relying on too much of it being in a fixed bank.<br /><br />Edit: I should note that some mappers start with a known state, in which case you have to worry less about this stuff. But it is very worth understanding even if you use those mappers.</div>

					
						<div class="postbody"><br />_________________<br /><!-- m --><a class="postlink" href="https://kasumi.itch.io/indivisible">https://kasumi.itch.io/indivisible</a><!-- m --></div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=3504"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p152543"></a>
				<b class="postauthor">dougeff</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152543">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152543#p152543"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Aug 06, 2015 7:42 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7008_1483937093.png" width="86" height="90" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri May 08, 2015 7:17 pm<br /><b>Posts:</b> 2200<br /><b>Location:</b> DIGDUG
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">OK, revision...after reviewing the init code for a MMC3 game (Batman)...<br /><br />Although the emulator I've been testing MMC3 automatically loads the ROMs at startup as I described. The game does this near start-up...<br />07:EF66:A2 06     LDX #$06<br />07:EF68:8E 00 80  STX $8000<br />07:EF6B:A0 1C     LDY #$1C<br />07:EF6D:8C 01 80  STY $8001<br />07:EF70:E8        INX<br />07:EF71:8E 00 80  STX $8000<br />07:EF74:C8        INY<br />07:EF75:8C 01 80  STY $8001<br /><br />which has the effect of defining which bank goes at 8000-9fff, which bank goes at a000-bfff, and making c000-ffff fixed, and that the last 2 banks will be at c000-ffff.<br /><br />I have to assume that actual hardware only has e000-ffff set for certain at start-up, to the last bank on the ROM.<br />I can't test this, because I don't have burnable/flashable cartridges, and my NES is at my dad's house.<br /><br />Edit: alternatively, you could set 8000 and e000 as the fixed banks - and a000 and c000 as the swapped banks.</div>

					
						<div class="postbody"><br />_________________<br /><a href="http://nesdoug.com" class="postlink">nesdoug.com</a> -- blog/tutorial on programming for the NES</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7008"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p152554"></a>
				<b class="postauthor">darryl.revok</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152554">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152554#p152554"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 07, 2015 5:13 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7129_1443779090.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 25, 2015 1:22 pm<br /><b>Posts:</b> 501
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I don't think it's too worth thinking about mappers until your game is about to be larger than 24 KB. At that point you can still make it larger without a mapper, but if you plan to use a mapper that's when you have to being to plan how you'll lay out your banks so you don't end up relying on too much of it being in a fixed bank.</div><br /><br />I don't want to get ahead of myself. I'm still sticking to my animation engine until I get that perfected. I suppose I don't need to understand everything about the mapper functionality just yet, but I need to know enough to integrate it into my animation engine or I'm going to have to rewrite major portions of that down the line. I think I'm about to do a rewrite of the animation engine anyway so it seems like it would be a good time add bank support now and hopefully not have to make any big structural changes to that routine again. Plus, I already have enough animations for my main character to justify a bank swap.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I don't see where you're seeing to only put the reset vector. Yes, you should have a valid IRQ and NMI vector as well. The jmp reset in the example code is not a vector at all. The reset vector is reset_stub, and the CPU has already begun executing from there by the time jmp reset is executed. reset is just a label name. It could be jmp initialize or jmp anywhereelse you wanted to go after you knew the mapper was in a known state.<br /><br />I think you're getting confused by the labels. The CPU has no knowledge of what you called reset_stub or reset or anything. It only knows what address is at $FFFC. you could call &quot;reset_stub&quot; &quot;homersimpson&quot; instead, and &quot;reset&quot; &quot;supermario&quot; and the code could still work the same. It's not like C where execution starts at a given named thing. (main.)</div><br /><br />Alright, I feel like I've almost got this. ALMOST. I don't plan to use MMC1 so it doesn't matter TOO much, but I would like to understand it.<br /><br />Okay, the reason why I'm saying that it says to only put the reset vector is this:<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Some revisions of the MMC1 IC might power up in a mode other than fixed-$C000, requiring that the vectors and the start of the init code be placed in all banks, much as in BxROM or AxROM or GxROM. Other revisions guarantee that the fixed bank is loaded at power on. To make sure your code works on all MMC1 revisions, put the following code in the last 16 bytes of each 16384 byte bank. (Barbie uses almost identical code.)<br />reset_stub:<br />  sei<br />  ldx #$FF<br />  txs        ; set the stack pointer<br />  stx $8000  ; reset the mapper<br />  jmp reset  ; must be in $C000-$FFED<br />  .addr nmiHandler, reset_stub, irqHandler</div><br /><br />It tells you to put that code at the end of each 16384 bank. That's the only code it tells you to put there. It doesn't say to put the NMI handler or anything like that there.<br /><br />1. Now, what I have learned is to put a .org statement at the end of your code so you can put the vectors at the right location in the PRG ROM. This, if I understand correctly, tells you to put those addresses for the vector at the end of each bank. So i imagine you couldn't .org $FFFA, because it might be in the first bank. So how would you make sure that what you're writing actually occupies the last 16 bytes without a .org? And when you're writing with extra program banks, how are you supposed to write code in memory spaces that are identical addresses to ones you've already written in the same program? Wouldn't the assembler throw up a flag? It's not like it understands that you're using a mapper. Do you write it in a different file and include it as a bin?<br /><br />2. So if you have that at the last 16 bytes of your first bank, it won't address the vectors because they're not at the actual vector address. You will, however, have an identical label for a memory location called reset_stub as the one that lies in your second bank. Now, I know that name is only for coding and is interpreted by the assembler and doesn't make it to the actual program. but won't the assembler say, &quot;You have two labels for reset_stub and I can't put both of them at $FFFC.&quot;?<br /><br />3. I'm going to guess that when you write a bank, even if you can't know for sure if it will be booted on startup, then you'll know for sure that if it will be loaded into the top or bottom. That's gotta be true, right? Well, you said that this could actually happen.<br /><br />4. It says that reset (the rest of the reset instruction not in the stub) must be located in $C000-$FFED. What about the nmi instructions and the irq instructions? Won't those have to be at the same point in all four banks in case any of those banks landed to where the vector addresses are pointing? If you could put a bank in the top that goes in the bottom, it seems like you're going to have to put copies of all of your interrupt instructions in every single bank. Why would you ever want to switch a bank between the top and bottom of your code? I can't imagine a situation in which a program would benefit from flipping the top and bottom halves in a way that couldn't be better achieved through branching and subroutines.<br /><br />While writing that last paragraph I also got so frustrated that I canceled this whole post until I realized that I had spent way too long writing it and trying to understand it to just give up now. If I could hear that there is no way a person could ever want to switch a bank between the top and the bottom and it's just a glitch in the mapper that you have to account for then I'd feel decent at least about getting it. I can't imagine why it would be done on purpose.<br /><br />I'm going to make another reply for a more productive and hopefully less aggravating topic, getting my game to function with MMC3 CHR switching.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=7129">darryl.revok</a> on Fri Aug 07, 2015 5:43 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7129"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p152556"></a>
				<b class="postauthor">darryl.revok</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152556">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152556#p152556"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 07, 2015 5:42 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7129_1443779090.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 25, 2015 1:22 pm<br /><b>Posts:</b> 501
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thank you for the instructions on bank switching. The MMC3 doesn't seem near as confusing at least when it comes to that.<br /><br />So, the CHR-ROM part seems pretty simple. You write the number of the bank you're switching out, 0-8, to $8000, then write the bank you're switching in, 0-FF, to $8001. When I see that, it's simple, but when I look at the reference page in the wiki it's almost too much information to process at once. I'll try to break this down a little at a time.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The MMC3 has 4 pairs of registers at $8000-$9FFF, $A000-$BFFF, $C000-$DFFF, and $E000-$FFFF - even addresses ($8000, $8002, etc.) select the low register and odd addresses ($8001, $8003, etc.) select the high register in each pair.</div><br /><br />Okay, I don't get any of this. I thought a register was like the x register and the y register and the accumulator.<br /><br />So when you say to STA $00 to $8000 you are addressing the low register, and when you STA $08 to $8001 you are addressing the high register. What does that mean?<br /><br />Also, the MMC3 doesn't have an option for a save battery, does it? That's unfortunate, I was really hoping my game could let you save. It looks like it does have support for 4-screen nametables though. Could they put RAM in the reproduction MMC3s for 4-screen nametables? Just curious. It would make bi-directional scrolling a lot less hassle.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7129"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p152559"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152559">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152559#p152559"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 07, 2015 5:57 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">darryl.revok wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The MMC3 has 4 pairs of registers at $8000-$9FFF, $A000-$BFFF, $C000-$DFFF, and $E000-$FFFF - even addresses ($8000, $8002, etc.) select the low register and odd addresses ($8001, $8003, etc.) select the high register in each pair.</div><br /><br />Okay, I don't get any of this. I thought a register was like the x register and the y register and the accumulator.</div><br />They're <a href="https://en.wikipedia.org/wiki/Memory-mapped_I/O" class="postlink">memory-mapped I/O ports</a>. Lately, in my own work, I have tried to use &quot;port&quot; for addresses that refer to something other than byte-addressed memory. What it's trying to say is that $8000, $8001, $A000, $A001, $C000, $C001, $E000, and $E001 are the actually unique ports, and all other addresses in $8002-$FFFF are mirrors of those ports.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">So when you say to STA $00 to $8000 you are addressing the low register, and when you STA $08 to $8001 you are addressing the high register. What does that mean?</div><br />The extent to which we must explain this depends on the extent to which you understand memory-mapped I/O.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also, the MMC3 doesn't have an option for a save battery, does it?</div><br /><em>Kirby's Adventure</em> saves to battery RAM, as do some hacks of <em>Super Mario Bros. 3</em> that are intended to run on <em>Kirby's Adventure</em> circuit boards.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Could they put RAM in the reproduction MMC3s for 4-screen nametables?</div><br />Yes, but it'd cost more.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p152564"></a>
				<b class="postauthor">darryl.revok</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152564">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152564#p152564"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 07, 2015 6:36 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=7129_1443779090.png" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Jul 25, 2015 1:22 pm<br /><b>Posts:</b> 501
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The extent to which we must explain this depends on the extent to which you understand memory-mapped I/O.</div><br />Well I understand that things like the CPU and PPU have two-byte addresses that are exposed for the program to send instructions to the hardware. I don't know if I need to understand it too much more than that right now other than how the processors respond to the bits they're sent.<br /><br />So $8000 and $8001 are two different ports and you write to them to perform different functions?<br /><br />I will say that there are almost no pages online about NES development that are not intimidating to a beginner. There are definitely helpful people in the forums and helpful posts if you dig for them, but I would bet 9 out of 10 people who might be interested in this hobby are deterred from even starting when they look online and can't understand anything they read.<br /><br />I'm not saying the information should be dumbed down. I'm a n00b and I'm not to the point where I read something like that and understand it right off. A week ago I couldn't have read 6502 assembly and understood the instructions. I'm just saying there's a huge gap in the area of information on the topic of NES programming which isn't directed to someone with a background in assembly programming. There's like one tutorial for beginners and you have to dig through forums and find people talking about it to even find that.<br /><br />Is there anything I need to put at the start of my file other than changing the iNES header?<br /><br />At least the $E000-$FFFF PRG-ROM bank is fixed. Whew. So I don't have to worry about sticking the interrupt vectors everywhere. Should I just put the instructions for NMI, RESET, and IRQ in here as well so I don't have to worry about them moving?</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=7129"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p152575"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152575">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152575#p152575"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 07, 2015 7:53 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">darryl.revok wrote:</div><div class="quotecontent">So, the CHR-ROM part seems pretty simple. You write the number of the bank you're switching out, 0-8, to $8000, then write the bank you're switching in, 0-FF, to $8001.</div><br />Instead of &quot;the number of the bank you're switching out&quot; it would be more accurate to say &quot;the slot where the bank will be switched in&quot;. That's how the MMC3 works: you first tell it what slot to use, and then what bank to put in that slot.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The MMC3 has 4 pairs of registers at $8000-$9FFF, $A000-$BFFF, $C000-$DFFF, and $E000-$FFFF - even addresses ($8000, $8002, etc.) select the low register and odd addresses ($8001, $8003, etc.) select the high register in each pair.</div><br /><br />Okay, I don't get any of this. I thought a register was like the x register and the y register and the accumulator.</div><br />X, Y and A (and also the stack pointer, the program counter and the status flags) are CPU registers, this is talking about mapper registers. A register is simply a small unit of memory inside a chip. The same way the CPU uses its registers to perform tasks, the mapper has to keep track of things like which banks are loaded where and the current value of the scanline counter, and this information is stored in its registers.<br /><br />In order to have the mapper do what we want, we have to send it data to populate these registers, and this is done through memory mapped IO. This means that memory addresses are used for communication with different parts of the system, rather than for actual memory. There are chips inside the NES and inside the cartridges that are constantly watching the addresses that are accessed by the CPU and PPU, and they can redirect these accesses to different parts of the hardware depending on what the addresses are. For example, when you do &quot;STA $0405&quot;, how does the CPU know that the value is supposed to go to the internal 2KB of RAM, and not to the PPU or to the cartridge? It looks at the address. Any address between $0000 and $1FFF will activate the internal RAM. Anything between $2000-$3FFF will activate the PPU ports. Anything between $8000-$FFFF will activate the PRG-ROM in the cartridge. This process of selecting a device or a register based on a memory address is called address decoding.<br /><br />As far as the NES is concerned, $8000-$FFFF is just a flat memory space, but mappers have the capacity to take different actions depending on which address is accessed. Each mapper will divide the memory range differently depending on its needs and implementation limitations. The MMC3 breaks the space up in 4 parts, since it has 4 pairs of registers, and alternates even and odd addresses to select a registers within the pair.<br /><br />The way the registers are arranged in memory is just a side effect of using the address bits that the MMC3 designers decided to use. The MMC3 has 8 accessible registers. To address 8 positions, we need 3 bits (enough to count from 0 to 7). The guys who designed the MMC3 could have picked any 3 bits out of the 16 that form an address, but they picked bits 0, which selects between even and odd, and bits 13 and 14, which select between $8000-$9FFF, $A000-$BFFF, $C000-$DFFF or $E000-$FFFF. They could have picked other bits, but they picked these, resulting in the register layout you see in the wiki.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Also, the MMC3 doesn't have an option for a save battery, does it? That's unfortunate, I was really hoping my game could let you save.</div><br />Several MMC3 games have battery-backed SRAM.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p152578"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p152578">Re: First Sprite Designs - Opinions?</a></div><div style="float: right;"><a href="./viewtopic.php?p=152578#p152578"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Aug 07, 2015 8:26 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">darryl.revok wrote:</div><div class="quotecontent">I will say that there are almost no pages online about NES development that are not intimidating to a beginner. There are definitely helpful people in the forums and helpful posts if you dig for them, but I would bet 9 out of 10 people who might be interested in this hobby are deterred from even starting when they look online and can't understand anything they read.</div><br />Can you just imagine how things were before the internet? These days it seems like people want everything to be handed to them in a silver platter. Well, back in the 80's and 90's people didn't have video tutorials on YouTube detailing every little thing they had to do and somehow people still managed to learn assembly and make games.<br /><br />Retro software development is a niche thing, it's not profitable, so there's obviously not gonna be as much material about it as there is for current technologies. Whatever is out there is the work of hobbyists, who don't always have a lot of free time.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I'm a n00b and I'm not to the point where I read something like that and understand it right off.</div><br />That's because this is not a simple subject. To understand memory mapping and mirroring you have to understand the binary system, computer architecture, and a bit of electronics, things that most new programmers don't care about. There's too much knowledge involved and there's no amount of dumbing down that will make anyone understand these concepts right off the bat... it takes years to master all of that! The good news is that you don't have to master everything in order to make games... so don't feel bad if you don't understand every single word in a wiki page. As long as you start small (e.g. don't expect to code SMB3 as your first NES project) and do things according to the book, with help from people in this forum, things will slowly fall into place as you go. There's no rushing that process.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Is there anything I need to put at the start of my file other than changing the iNES header?</div><br />It's not so much &quot;changing&quot; as it is &quot;creating&quot; the iNES header. Anyway, I don't remember you mentioning which assembler you're using, so I can't say much about how to set things up.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Should I just put the instructions for NMI, RESET, and IRQ in here as well so I don't have to worry about them moving?</div><br />Definitely. If you need to access other banks from the NMI or IRQ handlers (such as the NMI needing music code and data), they can switch in whatever they need (just be careful to restore whatever banks you change, so as to not break things after you return from the interrupts).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=21&amp;t=13049&amp;start=45"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=21"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=21&amp;t=13049"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>4</strong> of <strong>9</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 132 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <a href="./viewtopic.php?f=21&amp;t=13049&amp;start=30">Previous</a>&nbsp;&nbsp;<a href="./viewtopic.php?f=21&amp;t=13049">1</a><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=30">3</a><span class="page-sep">, </span><strong>4</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=60">5</a><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=75">6</a><span class="page-sep">, </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=90">7</a><span class="page-dots"> ... </span><a href="./viewtopic.php?f=21&amp;t=13049&amp;start=120">9</a> &nbsp;<a href="./viewtopic.php?f=21&amp;t=13049&amp;start=60">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=21">NES Graphics</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 2 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="13049" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21" selected="selected">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
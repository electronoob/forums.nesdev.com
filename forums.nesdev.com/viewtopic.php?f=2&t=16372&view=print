<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Scroll glitches after binding it with button</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Scroll glitches after binding it with button</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=16372">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=16372</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TeMaToS</b> [ Thu Aug 17, 2017 2:21 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />After i use binding the increment of scroll wen character on some position right and right button pressed for all time i see normal scrolling like on screenshot1. But when i release button and press it again i see that some glitches with columns happens. Please help me to solve this problem.

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<img src="./download/file.php?id=9887" alt="2scroll.png" /><br />
			<span class="gensmall">2scroll.png [ 3.16 KiB | Viewed 1829 times ]</span>
		

		<br />
	</td>
				</tr>
			
				<tr>
					<td>
			<img src="./download/file.php?id=9886" alt="1scroll.png" /><br />
			<span class="gensmall">1scroll.png [ 2.7 KiB | Viewed 1829 times ]</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Quietust</b> [ Thu Aug 17, 2017 4:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Without seeing the actual code, we can only <em>pretend</em> to speculate what's really going on...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TeMaToS</b> [ Thu Aug 17, 2017 8:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Quietust wrote:</div><div class="quotecontent">Without seeing the actual code, we can only <em>pretend</em> to speculate what's really going on...</div><br /><br />oh yeh, ok)<br />here)

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=9888">controller.asm</a> [54.7 KiB]
			</span><br />
			<span class="gensmall">Downloaded 46 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TeMaToS</b> [ Thu Aug 17, 2017 8:12 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I could to take some parts of code but it's most of it. Don't think that i am so lazy pig:)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikejmoffitt</b> [ Thu Aug 17, 2017 2:39 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I don't have time to have a look at your whole program and understand it at the moment, but I'm not liking how busy your NMI routine is. One better approach would be to use NMI to set a flag, and in your Forever loop, have it repeatedly check for this flag. If that flag is set, clear it, run a frame of logic, and then go back to waiting for the NMI flag.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">NMI:<br />&nbsp; &nbsp; php<br />&nbsp; &nbsp; pha<br /><br />&nbsp; &nbsp; lda #1<br />&nbsp; &nbsp; sta vbl_flag<br />&nbsp; &nbsp;<br />&nbsp; &nbsp; pla<br />&nbsp; &nbsp; plp<br />&nbsp; &nbsp; rti<br /></div><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Forever:<br />&nbsp; &nbsp; jsr main_logic<br />wait_nmi:<br />&nbsp; &nbsp; lda vbl_flag<br />&nbsp; &nbsp; beq wait_nmi<br />&nbsp; &nbsp; lda #0<br />&nbsp; &nbsp; sta vbl_flag<br />&nbsp; &nbsp; jsr ppu_updates<br />&nbsp; &nbsp; jmp Forever<br /></div><br /><br />This is just a suggestion for structure, not a singular way to do it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TeMaToS</b> [ Thu Aug 17, 2017 2:50 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">mikejmoffitt wrote:</div><div class="quotecontent">I don't have time to have a look at your whole program and understand it at the moment, but I'm not liking how busy your NMI routine is. One better approach would be to use NMI to set a flag, and in your Forever loop, have it repeatedly check for this flag. If that flag is set, clear it, run a frame of logic, and then go back to waiting for the NMI flag.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">NMI:<br />&nbsp; &nbsp; php<br />&nbsp; &nbsp; pha<br /><br />&nbsp; &nbsp; lda #1<br />&nbsp; &nbsp; sta vbl_flag<br />&nbsp; &nbsp;<br />&nbsp; &nbsp; pla<br />&nbsp; &nbsp; plp<br />&nbsp; &nbsp; rti<br /></div><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Forever:<br />&nbsp; &nbsp; jsr main_logic<br />wait_nmi:<br />&nbsp; &nbsp; lda vbl_flag<br />&nbsp; &nbsp; beq wait_nmi<br />&nbsp; &nbsp; lda #0<br />&nbsp; &nbsp; sta vbl_flag<br />&nbsp; &nbsp; jsr ppu_updates<br />&nbsp; &nbsp; jmp Forever<br /></div><br /><br />This is just a suggestion for structure, not a singular way to do it.</div><br /><br />Thank you so much man, I realy think that it could be much of work for NMI. Ofcource I don't wanna to waste your time at my begining and I just wanna to have some resourses where i can lern NESASM better. Can you please tell me some of this resourses where you lern NESASM? And other grate resourses like books may be?<br />   My studing was only from lessons by bunnyboy and some web pages of 6502 ASM and they don't cover every needetble information.  <br />  I want to know more details of NESASM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>FrankenGraphics</b> [ Thu Aug 17, 2017 3:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There isn't a wealth of NESASM examples and tutorials relatively to other/the total amount of aterial, but the machine language is  the same regardless if you use NESASM, nesicide, asm6, ophis, ca65 and so on, so any nes-specific resource will do. you just need to convert the syntax to NESASM style when trying out and modifying example snippets.<br /><br /><!-- m --><a class="postlink" href="http://wiki.nesdev.com/w/index.php/Programming_guide">http://wiki.nesdev.com/w/index.php/Programming_guide</a><!-- m -->

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Thu Aug 17, 2017 11:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">mikejmoffitt wrote:</div><div class="quotecontent">I don't have time to have a look at your whole program and understand it at the moment, but I'm not liking how busy your NMI routine is. One better approach would be to use NMI to set a flag, and in your Forever loop, have it repeatedly check for this flag. If that flag is set, clear it, run a frame of logic, and then go back to waiting for the NMI flag.<br /><br />[...]<br /><br />This is just a suggestion for structure, not a singular way to do it.</div><br />There is absolutely no requitement NOT having a busy NMI (if you know what you're doing) and your example is poor because you don't have to use php/plp in interrupts, the 6502 does it automatically. It could also do a &quot;inc vbl_flag&quot; so you wouldn't need to have a lda/sta pair here, nor a pha/pla pair.<br /><br />The 3 approach exists - everything in NMI (as early Nintendo and Konami liked to do it), everything in main (what you're advocating and what Squaresoft liked to do it) and work split between main and NMI threads (what most NES games does, for example Capcom games does that but also later Nintendo games). I do not think any approach is inherently supperior to eachother. So this guy have a problem and you're telling him &quot;you should go with everything in main&quot;. However you're not pointing to his problem at all - and invent an entierely new &quot;problem&quot; which isn't even one.<br /><br />As for the original question, it looks like you are uploading a column of tiles at the wrong place. Be sure to log your VRAM updates.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>mikejmoffitt</b> [ Fri Aug 18, 2017 12:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">So this guy have a problem and you're telling him &quot;you should go with everything in main&quot;. However you're not pointing to his problem at all - and invent an entierely new &quot;problem&quot; which isn't even one.</div><br /><br /><div class="quotetitle">mikejmoffitt wrote:</div><div class="quotecontent">This is just a suggestion for structure, not a singular way to do it.</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Alp</b> [ Sat Aug 19, 2017 6:25 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">FrankenGraphics wrote:</div><div class="quotecontent">There isn't a wealth of NESASM examples and tutorials relatively to other/the total amount of material.</div><br />Actually, there's more than enough NESASM examples. The real problem is that none of it's particularly well-known, <em>or</em> even in English!<br /><br />...and when it *is* in English-- Pong. Huh. <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Aug 19, 2017 7:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Logic and algorithms shouldn't change much from assembler to assembler, what varies greatly is the ROM organization, the way multiple banks are setup, variable declarations... but even in code written for the same assembler, a lot of that structural stuff can change depending on the coder's style.<br /><br />One thing that can have a big impact on how assembly code looks is the heavy use of macros. I don't normally use macros for logic and algorithms, just for structuring things (e.g. variable management) and for hardware interactions (e.g. bankswitching), so except for the occasional syntax difference (label scopes, indirection, etc.), the logic I write should be easy to follow.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TeMaToS</b> [ Sun Aug 20, 2017 3:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Alp wrote:</div><div class="quotecontent"><div class="quotetitle">FrankenGraphics wrote:</div><div class="quotecontent">There isn't a wealth of NESASM examples and tutorials relatively to other/the total amount of material.</div><br />Actually, there's more than enough NESASM examples. The real problem is that none of it's particularly well-known, <em>or</em> even in English!<br /><br />...and when it *is* in English-- Pong. Huh. <img src="./images/smilies/icon_confused.gif" alt=":?" title="Confused" /></div><br />You know, Pong is not side scroller and it don't descripted well enough. For example, i think i perfectly read nerdy nights, but nowere i see how to turn of screen when you must to switch the game state from title screen to game screen. And in the sample of code bannyboy write that you must to do that. May be i am so stuped but i don't see any logical way/poionter in his lessons how to do that. I don't think that it's bad lessons, i thanks him so mutch, but this part realy missed((

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TeMaToS</b> [ Sun Aug 20, 2017 3:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Logic and algorithms shouldn't change much from assembler to assembler, what varies greatly is the ROM organization, the way multiple banks are setup, variable declarations... but even in code written for the same assembler, a lot of that structural stuff can change depending on the coder's style.<br /><br />One thing that can have a big impact on how assembly code looks is the heavy use of macros. I don't normally use macros for logic and algorithms, just for structuring things (e.g. variable management) and for hardware interactions (e.g. bankswitching), so except for the occasional syntax difference (label scopes, indirection, etc.), the logic I write should be easy to follow.</div><br />You mean that my code hard to read?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sun Aug 20, 2017 3:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />No, I'm saying that you can still learn from code written for assemblers other than the one you use, as long as you're looking for actual game logic ideas and not ROM organization tips.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>TeMaToS</b> [ Sun Aug 20, 2017 4:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Scroll glitches after binding it with button</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">No, I'm saying that you can still learn from code written for assemblers other than the one you use, as long as you're looking for actual game logic ideas and not ROM organization tips.</div><br />Yeah, it's grate) I just must to discover forum. But may be someone of you have a .asm file with opensource with full NES sidescrolling game?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
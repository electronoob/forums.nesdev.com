<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Final Chance, to solve SMBDIS Sprite 0 Removal Problems!</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Final Chance, to solve SMBDIS Sprite 0 Removal Problems!</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=5182">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=5182</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun May 17, 2009 1:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Final Chance, to solve SMBDIS Sprite 0 Removal Problems!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There must be a way to permenantly removing sprite 0, no alternitaves 
<br />
<br />the removal of it without glitches (of which I am strict of) or using up IRQs while using one RAM place ($B8 = 40) is what should be rejected.
<br />
<br />I am really serious about removing sprite 0 for freedom of the screen, Replacing the status bar and make my own pause screen with statistics (SMBDX style).
<br />
<br />Is it now clear? If so, can anyone Please give me an anwser since Sprite 0 sucks a lot when I remove it my own way. I tried so hard, I can't do it.
<br />
<br />I am sorry if I repeated it, The answers I get were not very good. Neither were my posts, I am still working on stuff myself. But this is hopefully the last request anyways

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Sun May 17, 2009 1:44 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm sorry if my memory is failing, but if I'm not mistaking, it's at last the 15th time you post something like that, and if that is the case people may get really mad at you.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun May 17, 2009 1:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Fine, If it's too complicated, Then everybody, Including me, fails
<br />
<br />But that is OK, It's Nintendo's fault of using Sprite 0 like this (Anti-Piracy comes to mind)
<br />
<br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent">I'm sorry if my memory is failing, but if I'm not mistaking, it's at last the 15th time you post something like that, and if that is the case people may get really mad at you.</div>
<br />
<br />Actually, Take away Ten to see the approximate number (5)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tomaitheous</b> [ Sun May 17, 2009 2:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />What's SMB DX style?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun May 17, 2009 2:25 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tomaitheous wrote:</div><div class="quotecontent">What's SMB DX style?</div>
<br />
<br />If you ever played it (It's the Gameboy Color Version). Pausing will scroll up/down instead of freezing on and off, While disabling sprites, then reenabling them)
<br />
<br />But my plan will be to not scroll it, But to use four-screen mirroring for switching it from current position to $2800 or $2C00 and back

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tomaitheous</b> [ Sun May 17, 2009 2:31 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So, you want to remove the status bar up top completely and add a 'status' screen when paused?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun May 17, 2009 2:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Either that or use MMC5 for sprites in 8x16 mode while adding graphics and remove leftover sprites and modding it's space usage, making space for status bar
<br />
<br />Either way, it's doable
<br />
<br />Think of the first one like in Trolls in Crazyland (Doki Doki Yuuenchi or something like that) Only Without Sprites.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tomaitheous</b> [ Sun May 17, 2009 2:45 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've having trouble understanding what your end goal is and why you don't want to use a sprite 0 system. Well, if you wanted to do away with any status bar then I could see why you'd want to remove the sprite 0 system, but you posted otherwise.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun May 17, 2009 2:49 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tomaitheous wrote:</div><div class="quotecontent">I've having trouble understanding what your end goal is and why you don't want to use a sprite 0 system. Well, if you wanted to do away with any status bar then I could see why you'd want to remove the sprite 0 system, but you posted otherwise.</div>
<br />
<br />I do not want sprite 0 and I want to remove it permanently, Simple as that

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sun May 17, 2009 3:08 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />There was a hack/port of SMB1 to the TG16/PCE system (among other games that I'm sure used sprite #0).  If they can pull that off, I'm sure it's just as doable on the NES with an IRQ hack.  If it's worthwhile, maybe you could disassemble that (I think that .PCE file was called 5-in-1 something).  But for all I know that system could also have a sprite #0 detection thing going on, I wouldn't be surprised.
<br />
<br />Seems like the quick hack would be to write an IRQ routine, and change the spr#0 polling to poll some RAM that the IRQ routine sets.  Then you'd also have to hack in where it initializes the IRQ, and every frame where it sets the scanline for it to happen on (or I guess you could do that in the IRQ routine).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun May 17, 2009 3:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">There was a hack/port of SMB1 to the TG16/PCE system (among other games that I'm sure used sprite #0).  If they can pull that off, I'm sure it's just as doable on the NES with an IRQ hack.  If it's worthwhile, maybe you could disassemble that (I think that .PCE file was called 5-in-1 something).  But for all I know that system could also have a sprite #0 detection thing going on, I wouldn't be surprised.<br /><br />Seems like the quick hack would be to write an IRQ routine, and change the spr#0 polling to poll some RAM that the IRQ routine sets.  Then you'd also have to hack in where it initializes the IRQ, and every frame where it sets the scanline for it to happen on (or I guess you could do that in the IRQ routine).</div>
<br />
<br />See 1st post. Not what I really want at all
<br />
<br />Just so you know, Last time when I tried it with MMC5 when modding the proper routines, It never works. MMC5 IRQS sucks
<br />
<br />Yes, PCE has Sprite0, I was originally going to Re-do a port of SMB with enhanced graphics, but there is no luck having sprites without a PCE sprite graphics editor for windows. That is my problem with PCE dev.
<br />
<br />PCE has 2 graphics formats, BG (Same format as SNES) and SPR (Totally weird and currently unsupported on current editors on windows)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sun May 17, 2009 3:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hm, I don't see how IRQ wouldn't work as a replacement.  It can take some care to set up, much like writing timed code.
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I do not want sprite 0 and I want to remove it permanently, Simple as that</div>
<br />
<br />Wouldn't one solution then be to make the tile it uses to be all transparent pixels, and replace the sprite #0 polling with NOPs?  That would be the easiest way to go I'd think.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Sun May 17, 2009 3:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Wouldn't one solution then be to make the tile it uses to be all transparent pixels, and replace the sprite #0 polling with NOPs?  That would be the easiest way to go I'd think.</div>
<br />
<br />The Status bar shakes up and down when I do that
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">Sprite0Clr:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;lda PPU_STATUS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;wait for sprite 0 flag to clear, which<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;and #%01000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;will not happen until vblank has<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;bne Sprite0Clr&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;ended<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda GamePauseStatus&nbsp; &nbsp; &nbsp; &nbsp;;if in pause mode, do not bother <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lsr&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;with sprites at all<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bcs Sprite0Hit<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jsr MoveSpritesOffscreen<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jsr SpriteShuffler<br />Sprite0Hit:&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;lda PPU_STATUS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;do sprite #0 hit detection<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;and #%01000000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;beq Sprite0Hit<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ldy #$14 ;small delay, to wait until we hit horizontal blank time<br />HBlankDelay:&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dey<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bne HBlankDelay<br />SkipSprite0:&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda HorizontalScroll&nbsp; &nbsp; &nbsp; ;set scroll registers from variables<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PPU_SCROLL_REG<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda VerticalScroll<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PPU_SCROLL_REG<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda Mirror_PPU_CTRL_REG1&nbsp; ;load saved mirror of $2000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pha<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PPU_CTRL_REG1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda GamePauseStatus&nbsp; &nbsp; &nbsp; &nbsp;;if in pause mode, do not perform <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lsr&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;operation mode stuff<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bcs SkipMainOper<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jsr OperModeExecutionTree ;otherwise do one of many, many possible subroutines<br />SkipMainOper:&nbsp; lda PPU_STATUS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;reset flip-flop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pla<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ora #%10000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;reactivate NMIs<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PPU_CTRL_REG1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rti&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;we are done until the next frame!<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tomaitheous</b> [ Sun May 17, 2009 4:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Seems like the quick hack would be to write an IRQ routine, and change the spr#0 polling to poll some RAM that the IRQ routine sets.  Then you'd also have to hack in where it initializes the IRQ, and every frame where it sets the scanline for it to happen on (or I guess you could do that in the IRQ routine).</div><br /><br />See 1st post. Not what I really want at all </div>
<br />
<br /> So you don't want sprite #0 method and you don't want a scanline interrupt counter method? There really isn't any other way, if you want to execute a PPU reg change at a specific point during the frame.
<br />
<br /> I haven't played SMB DX in ages or at all for those other games mentioned. Can you post some pics or at least a crude ascii drawing. If you do want to section off part of the screen for a status (be it in a different place or not), what are the requirements this "window" needs that you can't do currectly? 
<br />
<br /> FYI- PCE doesn't have a sprite #0 system like NES. It has "collision for sprite #0 with another other sprite" system, but it's almost never used. For the Castlevania NES ROM hack I did on PCE;  I cached the writes to the PPU X/Y reg and had a system that checked sprite #0's position, if on screen I generated a scanline IRQ relative to its position onscreen, applied the X/Y cache to video processor.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sun May 17, 2009 4:29 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Hamtaro126 wrote:</div><div class="quotecontent"><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">Wouldn't one solution then be to make the tile it uses to be all transparent pixels, and replace the sprite #0 polling with NOPs?  That would be the easiest way to go I'd think.</div><br /><br />The Status bar shakes up and down when I do that<br /></div>
<br />
<br />The relevant part of the code, quoted below relies on the sprite #0 hit happening consistently and waiting for hblank.  Since that's ripped out you'll need to move that code so it will run during vblank, before the PPU is active otherwise it will jump around.
<br />
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ldy #$14 ;small delay, to wait until we hit horizontal blank time<br />HBlankDelay:&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dey<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bne HBlankDelay<br />SkipSprite0:&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda HorizontalScroll&nbsp; &nbsp; &nbsp; ;set scroll registers from variables<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PPU_SCROLL_REG<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda VerticalScroll<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PPU_SCROLL_REG<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda Mirror_PPU_CTRL_REG1&nbsp; ;load saved mirror of $2000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pha<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PPU_CTRL_REG1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lda GamePauseStatus&nbsp; &nbsp; &nbsp; &nbsp;;if in pause mode, do not perform <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lsr&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;operation mode stuff<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bcs SkipMainOper<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jsr OperModeExecutionTree ;otherwise do one of many, many possible subroutines<br />SkipMainOper:&nbsp; lda PPU_STATUS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;reset flip-flop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pla<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ora #%10000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;reactivate NMIs<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sta PPU_CTRL_REG1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rti&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;we are done until the next frame!<br /></div>

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
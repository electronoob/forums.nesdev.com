<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - uc65, a Mid-Level Language Compiler READY FOR USE!</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">uc65, a Mid-Level Language Compiler READY FOR USE!</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=10242">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=10242</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>9</strong> of <strong>11</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Tue Dec 03, 2013 1:23 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah I'll hold of on the bash stuff.  My main goal was to help someone take the step from compiling roms as done by nerdy nights (asm6?)  To using uc65.  I think using .bat files as provided in shiru's example is the simplest minimalist approach.<br /><br />That said I'd love to see support for uc65 in NESICIDE.  I'll give NESICIDE another try and give you the user freindly feedback you're asking  for.  To be honest, this 'getting things started' step is where I gave up on NESICIDE when I initially gave it a try.  I don't remember the details of what my issue was as it was well over a year ago now.  I only remember being new and confused not being able to find that 'go button' to build a program so I was quickly frustrated and tried elsewhere.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Tue Dec 03, 2013 1:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">That'd be awesome cpow! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> But yea, if you have an existing makefile for cc65, you can define another rule that builds .s files from .uc files and that's that. There's even a make-style dependency generation flag for uc65.</div><br />Ok I'm almost there...but I seem to have hit a snag.<br /><img src="http://i.imgur.com/cJpjzrJ.png" alt="Image" /><br />That error is coming from the main.s that is generated by uc65.jar.  Here's what I did:<br />1. Created a new NROM &quot;Hello World&quot; template project.<br />2. Gutted it [I really should create a &quot;completely empty&quot; template project].<br />3. Copied the following files into the project folder:<br />    lib/nes/nrom/memory.cfg -&gt; ./<br />    lib/nes/nrom/crt0.s -&gt; ./src/<br />    lib/nes/nes.uc -&gt; ./src/<br />    examples/nes/simple/main.uc -&gt; ./src/<br />4. Set the project's linker-config file to the memory.cfg file.<br />5. Added custom build rules to support building a .s from a .uc file.<br />6. Tried to build...<br /><br />You can see the uc65.jar being used in the output window.<br /><br />I verified I get the same error when trying to do ./build.sh nes simple in your examples folder [after fixing the path to CC65 for my setup]:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$ ./build.sh nes simple<br />ld65.exe: Error: Missing memory area assignment for segment `ROM31'</div><br /><br />Seems like the JAR file is expecting something similar to what is set up in the MMC3 example?  That's the only place I see ROM31 segment defined.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Tue Dec 03, 2013 3:06 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I switched to trying to build the life example.<br /><br />What's this about?<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">java -jar C:/Users/Christopher/Projects/NES/nesicide/deps/cc65-master/bin/uc65.jar -i src -o obj/nes/main.s src/main.uc<br />src\nes.uc:18 Error - Expected a number or constant reference<br />src\nes.uc:19 Error - Expected a number or constant reference<br /></div><br /><br />Also, when I try ./build.sh nes life in Cygwin:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$ ./build.sh nes life<br />Error - Unable to determine parent directory of source file<br />Compilation failed<br /></div><br /><br />Also, if you could make the warning/error message format match CC65's, the snap-to-line functionality already in NESICIDE would work without me having to special case the output parser for uc65.   <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> <br /><br />An example of the CC65 message format:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">$ cc65 main.uc<br />main.uc(1): Warning: Implicit `int' is an obsolete feature<br />main.uc(1): Error: `;' expected<br />main.uc(1): Error: Identifier expected<br />main.uc(1): Warning: Implicit `int' is an obsolete feature</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Wed Dec 04, 2013 3:41 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Can you please confirm which release you are using? 0.5-rc3 (attached to the first post) is the most recent release and has these issues corrected.<br /><br />As for build.sh, I'm not sure it's going to work well under msys / cygwin. Again, this is why I'm not wanting to roll my own build system <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Also, can you try the attached jar and see if the message output works with your snap-to-line feature?

		
			<br clear="all" /><br />

			<table class="tablebg" width="100%" cellspacing="1">
			<tr>
				<td><b class="genmed">Attachments: </b></td>
			</tr>
			
				<tr>
					<td>
			<span class="genmed">
				<img src="./styles/subsilver2/imageset/icon_topic_attach.gif" width="14" height="18" alt="" title="" /> 
				<a href="./download/file.php?id=986">patchbuild.zip</a> [57.24 KiB]
			</span><br />
			<span class="gensmall">Downloaded 24 times</span>
		

		<br />
	</td>
				</tr>
			
			</table>
		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Wed Dec 04, 2013 5:34 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">Can you please confirm which release you are using? 0.5-rc3 (attached to the first post) is the most recent release and has these issues corrected.<br /><br />As for build.sh, I'm not sure it's going to work well under msys / cygwin. Again, this is why I'm not wanting to roll my own build system <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Also, can you try the attached jar and see if the message output works with your snap-to-line feature?</div><br /><br />I downloaded 0.5-rc3, yes.  Your patch works but I've got a little bit of work to do to get the error annunciation markers in the margins working for .uc files.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Wed Dec 04, 2013 8:08 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">cpow wrote:</div><div class="quotecontent"><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">Can you please confirm which release you are using? 0.5-rc3 (attached to the first post) is the most recent release and has these issues corrected.<br /><br />As for build.sh, I'm not sure it's going to work well under msys / cygwin. Again, this is why I'm not wanting to roll my own build system <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Also, can you try the attached jar and see if the message output works with your snap-to-line feature?</div><br /><br />I downloaded 0.5-rc3, yes.  Your patch works but I've got a little bit of work to do to get the error annunciation markers in the margins working for .uc files.</div><br />Couple other small things:<br /><br /><ul>Output error/warning messages to stderr instead of stdio.  That way NESICIDE will colorize the error messages red in contrast to the non-error messages in the build output.<br />It seems uc65.jar might be returning a &quot;success&quot; process exit code which causes make to continue on even when there's indicated Error messages in the last invocation?</ul><br />EDIT: The error/warning thing seems to be a 3-character 'fix':  System.out &lt;&gt; System.err - but I don't have your latest code since you sent me just the JAR with the error string format patched.  So I will wait for your update.<br /><br />I might take a look at your code and offer a patch but I am rusty with Java.  I bought a book on it in '96, spent a weekend holed up in a UMich computer lab programming a peg solitaire puzzle game, and promptly forgot about the experience.   <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Wed Dec 04, 2013 11:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Line 31 of main.uc in examples\nes\simple:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; Put all of this into the high page of ROM and system RAM<br />rom 31<br />ram 1<br /></div><br />Pretty sure that's not supposed to be rom 31 as I'm getting a compilation error about segment ROM31 not defined...<br /><br />I changed it to rom 0, but my .nes file still isn't getting built properly as the reset vector is missing/mis-placed.<br /><br />Ahh nvm, think I figured it out, this simple example is supposed to be mmc3...  With setting that to rom 0, and using the nrom config files I was able to compile and looks like it's booting as everything goes black now vice grey screen.  There isn't any chr data included and I'm not sure if there was meant to be anyways...  Try something else?<br /><br />I'd like to just get something up and running on NROM.  Looks like life is NROM and has chr data provided, so let's give that a try!<br /><br />Well I was able to compile and create a .nes file, but I had to comment out lines 18 &amp; 19 in nes.uc:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">; NES System Library<br />rom librom<br />ram libram</div><br /><br />Because I was getting this error:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">C:\Users\Paul\Dropbox\nesdev\uc65-release-0.5-rc3&gt;java -jar uc65.jar lib\nes\nes.uc<br />lib\nes\nes.uc:18 Error - Expected a number or constant reference<br />lib\nes\nes.uc:19 Error - Expected a number or constant reference<br />Compilation failed</div><br /><br />Commenting those out allowed me to get a successful build.  And I'm getting something as it's booting with a bunch of zeros on the screen.  Not sure if whatever I'm missing without those librom/ram lines is causing an issue or if I'm building something improperly.<br /><br />Here's my hodgepodge .bat file that allowed me to compile things in their locations as downloaded.  Only issue was I needed to make a second copy of nes.uc and put it in the src directory so it could be included in the other .uc files.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">java -jar uc65.jar lib\nes\nes.uc<br />java -jar uc65.jar examples\nes\life\src\blinktext.uc<br />java -jar uc65.jar examples\nes\life\src\data.uc<br />java -jar uc65.jar examples\nes\life\src\title.uc<br />java -jar uc65.jar examples\nes\life\src\main.uc<br />path=path;cc65\<br />set CC65_HOME=.<br />ca65 lib\nes\nrom\crt0.s<br />ca65 lib\nes\nes.s<br />ca65 examples\nes\life\src\blinktext.s<br />ca65 examples\nes\life\src\data.s<br />ca65 examples\nes\life\src\title.s<br />ca65 examples\nes\life\src\main.s<br />ld65 -o life.nes lib\nes\nrom\crt0.o lib\nes\nes.o examples\nes\life\src\blinktext.o examples\nes\life\src\data.o examples\nes\life\src\title.o examples\nes\life\src\main.o -C lib\nes\nrom\memory.cfg <br />pause<br />life.nes</div><br /><br />Any suggestions on how to fix me up so I can make a successful build of life?  After that I'll post my 'getting started' doc to help newbies out and get started on my own project! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Thu Dec 05, 2013 5:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I also get what I think infininteneslives is describing once i comment out the <br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">rom librom<br />ram libram</div><br />in nes.uc.<br /><img src="http://i.imgur.com/rOZFZ9k.png" alt="Image" /><br />But it looks like something isn't quite formatted right in the generated debug info file [error in output pane].  I'll take a look.  But I too am wondering what we should expect from the &quot;life&quot; example?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Thu Dec 05, 2013 7:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Wow folks, I'm floored by the amount of interest! Thank you so much! I wish I weren't so swamped with work at the moment and could whip all this up into shape. Hopefully this weekend I'll be able to make another release that reduces all the confusion.<br /><br />The &quot;simple&quot; example uses MMC3 with character RAM. I'll change this to use NROM so it's a lot more simple <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />The &quot;life&quot; example is not anywhere near complete. Honestly I'd never compiled the thing. A screen of zeros is actually what should happen with the code that's present now. I am going to move work-in-progress examples into their own branch in the repo and only merge them into the main trunk when they are complete so as to avoid this confusion. Sorry folks.<br /><br />The librom and libram bits were part of the build management conventions I was tinkering with before I had to disengage due to the Thanksgiving holiday prep. The thought was the standard libraries would use constants librom and libram to determine what rom and ram banks to use, and then when evoking the compiler you would use the -c argument (twice) to define both. That way you can control at build-time where these things are placed.<br /><br />Finally, that was a bone-head miss to send the errors to stdout <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> I'll get that fixed as soon as I can.<br /><br />Also, as for the debug info, I have no idea what's going on there. This stuff isn't documented anywhere and honestly I've never tested it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Thu Dec 05, 2013 8:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I'm still looking into the debug info issue, but...  <br />I removed the offending line and  <img src="./images/smilies/Mfr_icon_homebrew.png" alt=":beer:" title="Beer" />  <img src="./images/smilies/Mfr_icon_homebrew.png" alt=":beer:" title="Beer" /> :<br /><img src="http://i.imgur.com/6zcz61v.png" alt="Image" /><br />Not only is source following working, I can set breakpoints.   <img src="./images/smilies/Mfr_icon_homebrew.png" alt=":beer:" title="Beer" />  <img src="./images/smilies/Mfr_icon_homebrew.png" alt=":beer:" title="Beer" /><br />Almost to that &quot;go button&quot;, eh?   <img src="./images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Thu Dec 05, 2013 9:06 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />That's awesome! Can you paste in the offending line so I can track it down?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>cpow</b> [ Thu Dec 05, 2013 9:23 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">That's awesome! Can you paste in the offending line so I can track it down?</div><br />Line 2187 in the debug info is:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">type&nbsp; &nbsp;id=4,val=&quot;90&quot;</div><br />But I'm not sure how to figure out what source module that comes from.<br />For reference, the debug info parser doesn't complain about these lines:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">type&nbsp; &nbsp;id=0,val=&quot;800420&quot;<br />type&nbsp; &nbsp;id=1,val=&quot;800120&quot;<br />type&nbsp; &nbsp;id=2,val=&quot;800220&quot;<br />type&nbsp; &nbsp;id=3,val=&quot;800321&quot;<br />type&nbsp; &nbsp;id=5,val=&quot;800C20&quot;<br />type&nbsp; &nbsp;id=6,val=&quot;800320&quot;<br />type&nbsp; &nbsp;id=7,val=&quot;800820&quot;</div><br />Just to be clear, it is the debug info parser provided in the CC65 source that is complaining.  This is not a compilation issue.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Thu Dec 05, 2013 11:26 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">qbradq wrote:</div><div class="quotecontent">The &quot;life&quot; example is not anywhere near complete. Honestly I'd never compiled the thing. A screen of zeros is actually what should happen with the code that's present now. I am going to move work-in-progress examples into their own branch in the repo and only merge them into the main trunk when they are complete so as to avoid this confusion. Sorry folks.</div> No worries, I'm glad that I'm getting what I should be, I'm not too concerned about getting life to work if it's not yet complete.  I'm thinking about working on converting some of shiru's simple examples or at least a hello world to start.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The librom and libram bits were part of the build management conventions I was tinkering with before I had to disengage due to the Thanksgiving holiday prep. The thought was the standard libraries would use constants librom and libram to determine what rom and ram banks to use, and then when evoking the compiler you would use the -c argument (twice) to define both. That way you can control at build-time where these things are placed.</div>I like that idea! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />I re-read over the documentation today and took some notes for my own learning purposes.  Pretty refreshing that I was able to read the entirety of the language's definition in an hour or so.  I'm pretty excited to get going with this, especially not that it's ready for use!  It really feels like uc65 has the simple elegance of only giving you what's needed to overcome the inefficiencies of assembly.  All the extra fat that's not needed just simply isn't there.  The fact that it's not highly abstracted away from the hardware is great and really opens the door for mapper use.  I also love the easy integration of inline assembly.  Time to jump in and see if it's everything I'm cracking it up to be! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Sat Dec 07, 2013 5:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Sorry, double post, have things to share, and questions to ask.<br /><br />I finished a hello world demo in uc65! <img src="./images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />Here's my <a href="https://dl.dropboxusercontent.com/u/18341918/Getting%20started%20with%20uc65%20for%20dummies.txt" class="postlink">Getting Started with uc65 for Dummies</a> guide.  There is a <a href="https://dl.dropboxusercontent.com/u/18341918/uc65-0.5-rc3_helloworld.zip" class="postlink">.zip download</a> to go along with it for the hello world build.  Feel free to do whatever you'd like with it.  It's more than welcome to be included in the first post or project page for others to find more easily.<br /><br />I had some confusion about something on the doc:<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Loop Statement<br /><br />The loop statement executes a block of statements indefinitely, or until a conditional expression evaluates as true. The block of statements will execute at least once as the optional conditional expression is evaluated at the end of the loop.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">loop<br />&nbsp; &#91;statement block&#93;<br />end loop &#91;when (conditional expression)&#93;</div></div><br /><br />So it loops until the conditional expression evaluates to true?  Or till it's false?  If it's the former, I guess i makes more sense now that I read it at &quot;*END* loop when (cond expr)&quot;.  I originally thought of the &quot;end&quot; as syntactical only, I was reading it without the end, just &quot;loop when (cond expr)&quot; which doesn't make sense.<br /><br />I have should probably answer my own question here by looking at my compiled assembly files.  But I'll ask here anyways.  I'm a little curious about RAM management.  I understand the 'ram' segment identifier can be used to define where ram will be allocated.  Does this apply to ALL allocated ram for the code that follows? (with the obvious exception of zero/fast variables).  How are passed in variables handled specifically?  Is the stack used for transfer, and then the sub routine allocates ram in it's defined segment?  Or is it that the stack isn't used, but the copy which the sub routine receives is allocated it's segment?  Or is it still in the calling routines' segment?  If one wanted to allocate specific locations of variables/arrays would the best way to do this be define a new segment?  If one wanted OAM ram to be in it's typical location is the type of thing I'm thinking here.  Additionally down the road I'd like to swap ram and &quot;pseudo-ROM&quot; in $6000-7FFF so with bankswitching RAM around I'd like to ensure my attack is inline with the abilities and methods of uc65 variable allocation.<br /><br />Couple typos:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">test\subroutines.uc:41 Warning - Possible loss of percision</div><br /><br />documentation under address dereferencing:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">address prt<br />ptr = $0200</div><br /><br />All in all, it was pretty fun to play around with and get my hands dirty with the language.  Kudos on the great work thus far qbradq!  There were a couple times where I knew exactly what I wanted in assembly, and wasn't sure how to get the language to give it to me.  So having the ease of inserting assembly without trouble is pretty awesome and allows you to stay close to the hardware. <br /><br />I'll be working on building my nes.uc library file and share it here from time to time for anyone who's interested.  Ping me if you'd like my latest version, not sure how it'll compare to qbradq's but no need to duplicate efforts further.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>qbradq</b> [ Sun Dec 08, 2013 6:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: uc65, a Mid-Level Language Compiler READY FOR USE!</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I am super excited about this INL! I have the flu right now, but when I'm better I'll fix the typos and put up the links.<br /><br />Also, there is no end clause for loop. That was dropped from the language spec but apparently forgot to take it out of the docs.<br /><br />Subroutine parameters are copy-on-call. If you want them in zero-page, use the fast modifier for the subroutine. If you want the subroutine's variables in zero page, use the fast modifier on the variables. uc65 only uses the stack to store register values during interrupt handlers.<br /><br />rom and ram apply to everything that emits code or variables following those statements until the next such statement.<br /><br />Again when I am feeling better I will try to make the documentation more clear.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>9</strong> of <strong>11</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
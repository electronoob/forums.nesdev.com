<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Common problems when running on an actual NES?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Common problems when running on an actual NES?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7849">http://forums.nesdev.com/viewtopic.php?f=10&amp;t=7849</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Mon Jun 13, 2011 2:07 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">One thing everyone has to understand is that FCEU(XYZαβγ) is extremely forgiving with badly written code. It's far from accurate, and is probably much closer to Nesticle than to a real NES. Don't ever rely on it as your only emulator.</div>
<br />
<br />I do. It's not forgiving with PPU stuff at startup, just found some glitches in the beginning or my games program. It's the best emulator for development though with all the tools, sadly. If another emulator came up with a hex editor and name table viewer and maybe a debugger, and didn't start with error messages or multiple boxes of crap I don't want, I'll gladly switch.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Jun 13, 2011 2:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I use FCEUX all the time too, because of its great debug capabilities, but it will not catch a large number of PPU problems your code might have. So even if FCEU(X) is your main development emulator, you should still give your programs a spin in Nintendulator and Nestopia at least, because those are much less forgiving.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Shiru</b> [ Mon Jun 13, 2011 2:51 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Would be really cool if someone made a dev emulator that not forgives any known problems. Even if it slow, with just few mappers popular for homebrew, and without nice UI.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>3gengames</b> [ Mon Jun 13, 2011 2:52 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I do, but neither meet the criteria of not erroring or having random boxes on startup. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Jun 13, 2011 2:57 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">3gengames wrote:</div><div class="quotecontent">neither meet the criteria of not erroring or having random boxes on startup.</div>
<br />Then there's probably something wrong with your setup, because that doesn't happen to me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Mon Jun 13, 2011 3:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I took "random boxes on startup" to refer to the Nintendulator window whose title is Debug Information.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>koitsu</b> [ Mon Jun 13, 2011 11:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Common problems when running on an actual NES?</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">shawnleblanc wrote:</div><div class="quotecontent">What are the common problems encountered when running homebrew code on actual NES hardware?</div>
<br />In my case, my intro code used for the Neo Demiforce FF2e (FF2j in English) translation didn't properly reset the necessary PPU addressing bits when I did certain VRAM writes.  The result was <a href="http://jdc.parodius.com/lj/ff2e_intro_bug.png" class="postlink">corrupted graphics</a> while fading text (palette adjustments).  You can see videos of the <a href="http://www.youtube.com/watch?v=kGuGP7h6hv4" class="postlink">incorrect</a> and <a href="http://www.youtube.com/watch?v=Z9cQ4v6mtds" class="postlink">correct</a> behaviours.  Folks like Bregalad and others provided details (and had actually patched the ROM to fix the problem).
<br />
<br />The reason I didn't notice the problem was because 1) at the time there was no PowerPak and no easy way to make a dev cart, and 2) all the emulators available at the time didn't show the bug.  What the nesdev community knew of the PPU back then (circa 1997) differs from what's known today.
<br />
<br />You can <a href="http://wiki.nesdev.com/w/index.php/Program_compatibility" class="postlink">read about the technical stuff</a> if you want, or the <a href="http://nesdev.com/bbs/viewtopic.php?p=53111#53111" class="postlink">convo I had with Bregalad</a> discussing the details and the history.  Be sure to read the full thread from that point forward, as the details get worked out from that point onward.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>thefox</b> [ Tue Jun 14, 2011 2:10 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Shiru wrote:</div><div class="quotecontent">Would be really cool if someone made a dev emulator that not forgives any known problems. Even if it slow, with just few mappers popular for homebrew, and without nice UI.</div>
<br />I agree, I started to add diagnostic features like this into my modified version of Nintendulator couple of weeks ago. Messages about 1) using uninitialized memory 2) writing to/reading from 2007 during rendering 3) writing to certain PPU regs when PPU hasn't warmed up etc. I'll gladly take any suggestions if somebody can think of more helpful diagnostics like that.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Celius</b> [ Sun Jun 19, 2011 7:22 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I've noticed some odd behavior on the console that emulators didn't catch. This thread contains a bug that I actually noticed on the console:
<br />
<br /><!-- m --><a class="postlink" href="http://nesdev.com/bbs/viewtopic.php?t=4647&amp;postdays=0&amp;postorder=asc&amp;start=0">http://nesdev.com/bbs/viewtopi ... sc&amp;start=0</a><!-- m -->
<br />
<br />In my game when the screen gets turned off between switching rooms or levels, I would disable rendering mid-frame, and sometimes it would get disabled when the player or an enemy was on that scanline. This would cause sprite glitches the next time sprites are re-enabled, which would often screw up sprite #0, which means my game would get caught in an infinite loop waiting for sprite #0 to change the scroll at the bottom of the status bar.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sun Jun 19, 2011 8:28 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, that's a very nasty thing that no emulator appears to emulate. disabling sprites mid-frame is pure evil. I still don't know when it's safe to do this. Enabling rendering late however appears to have no side effects, and I've been doing this in my game with no problems.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Dwedit</b> [ Sun Jun 19, 2011 9:12 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">One thing everyone has to understand is that FCEU(XYZαβγ) is extremely forgiving with badly written code. It's far from accurate, and is probably much closer to Nesticle than to a real NES.</div>
<br />
<br />Comparing something to Nesticle is not the kind of claim you throw around lightly.  Nesticle doesn't even understand that there are 262 scanlines, and that there are 341 PPU cycles per scanline.  Open the NES Timing window and see how horrible the numbers look there.  Nesticle can't even scroll correctly.
<br />
<br />(I know, 6-day late reply...)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sun Jun 19, 2011 9:34 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Heh, I didn't mean to offend FCEU. It's just that I've personally seen it ignore some pretty serious mistakes. Anyway, I didn't say it was as bad as Nesticle, just that it's probably closer to it than to a real NES, which doesn't necessarily mean it's close in absolute terms.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Free Fall reproduction cart problems</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Free Fall reproduction cart problems</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=4846">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=4846</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>marvelus10</b> [ Sun Feb 08, 2009 3:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Free Fall reproduction cart problems</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I tried to make a repro cart of Free Fall unfortunately when I try to play the game in my NES its scrambled. So I tried changing the solder pad for the mirroring and no luck. I checked the rom with FCEu and it runs fine however when I run it in NEStopia its scrambled. So I found a new rom and tried that still I have the same problem. I'm using a Bible Adventures board the same as this one here <!-- m --><a class="postlink" href="http://bootgod.dyndns.org:7777/image.php?ImageID=2308">http://bootgod.dyndns.org:7777/image.php?ImageID=2308</a><!-- m -->
<br />
<br />Any help would be great.
<br />
<br />thanx eh

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jeroen</b> [ Sun Feb 08, 2009 4:01 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />edited for being stupid.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>marvelus10</b> [ Sun Feb 08, 2009 4:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />This was the info for Free Fall:
<br />File:         free.nes
<br />Directory:    C:\Documents and Settings\Emperor\My Documents\CajoNES\
<br />Soft-patched: No
<br />CRC:          A781FFAA
<br />SHA-1:        87C929090C3B04739BAAED90B9A8F40B29327FC2
<br />System:       NES-NTSC
<br />Board:        COLORDREAMS 74*377, Mapper 11
<br />PRG-ROM:      64k
<br />CHR-ROM:      64k
<br />Solder Pad:   H:1 V:0
<br />Battery:      No
<br />Dump:         Unknown
<br />
<br />and this was the info for Bible Adventures:
<br />File:         Bible Adventures (Wisdom Tree) (V1.1) [!].nes
<br />Directory:    C:\Documents and Settings\Emperor\My Documents\My NES\
<br />Soft-patched: No
<br />CRC:          73C246D4
<br />SHA-1:        6444C22F65686E48DEDF85BD7D86F11CAE13ED6A
<br />System:       NES-NTSC
<br />Board:        COLORDREAMS-74*377, Mapper 11
<br />PRG-ROM:      64k
<br />CHR-ROM:      64k
<br />Solder Pad:   H:1 V:0
<br />Battery:      No
<br />Dump:         OK
<br />I can only assume it will work, I have also read about other people making reproductions of this.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jeroen</b> [ Sun Feb 08, 2009 4:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Weird.....guess sivak did make it for an unlicensed mapper.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sun Feb 08, 2009 4:56 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />These Color Dreams carts had various type of CIC-disabling tricks going on, the control for which was programmed into the game's boot code.  Could that cause a problem?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Jeroen</b> [ Sun Feb 08, 2009 4:59 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />edited for stupidity. (though you were doing that sivak homebrew game but its a prototype)

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>B00daW</b> [ Sun Feb 08, 2009 7:58 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I got this from Roget DeForest back in the day.  <a href="http://average.truechiptilldeath.com/filedump/cd_progenv.rar" class="postlink">Here is a dirty snapshot of the development directory</a> he gave me.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sun Feb 08, 2009 8:09 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It should be pretty easy to fake a Color Dreams board using a CNROM board. With 64KB of CHR and 64KB of PRG, the 4 latched bits are enough, you just have to do some rewiring.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>B00daW</b> [ Sun Feb 08, 2009 9:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />A reproduction has been tried some 6 years ago.  There's something with that particular binary that doesn't jive well with standard Color Dreams boards.  It needs to be hacked or re-assembled.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Mon Feb 09, 2009 12:48 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />any idea on how this would be wired?
<br />
<br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">It should be pretty easy to fake a Color Dreams board using a CNROM board. With 64KB of CHR and 64KB of PRG, the 4 latched bits are enough, you just have to do some rewiring.</div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Mon Feb 09, 2009 4:35 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">coinheaven wrote:</div><div class="quotecontent">any idea on how this would be wired?</div>
<br />CNROM boards use a 74HC161 chip to control the 2 highest address lines of the CHR-ROM chip. The 74HC161 can in fact store 4 bits, so 2 aren't used on this board.
<br />
<br />The game you want to make a repro of has 64KB of CHR and 64KB of PRG. You can use 3 bits from the 74HC161 to control the CHR and 1 to control the PRG. So, the first modification you have to make is connect all the outputs of the 74HC161. Look at it's <a href="http://nesdevwiki.org/wiki/74161" class="postlink">pinout</a> and locate the "Q" pins in your cart. Connect 3 of them to A13, A14 and A15 of your new CHR chip, and the last one to A15 of your new PRG chip.
<br />
<br />Once the outputs of the 74HC161 are connected, you have to set up the inputs. The CNROM board expects bankswitching commands in the xxxxxxCC format, but the Color Dreams expects them in the CCCCxxPP format (C is CHR and P is PRG). So you have to use lines D4, D5 and D6 to feed the lines connected to the CHR chip and line D0 to feed the line connected to the PRG chip.
<br />
<br />The easiest way to do this is probably to cut the traces of all input and output pins of the 74HC161 and reconnect everything with wires as explained above.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Tue Feb 10, 2009 5:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />ok maybe ill try this, but i have a few questions.  as for the "Q" pins,  which 3 go to the CHR and which one goes to the PRG?  This part i didnt understand:
<br />
<br />So you have to use lines D4, D5 and D6 to feed the lines connected to the CHR chip and line D0 to feed the line connected to the PRG chip. 
<br />
<br />did you mean D0-D3 lines on the 74161 chip?  if so, which pins would they connect to?  i assume that if an input or output wire that connects to the PRG and CHR must be bent up, is that correct?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Tue Feb 10, 2009 9:43 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">coinheaven wrote:</div><div class="quotecontent">ok maybe ill try this, but i have a few questions.  as for the "Q" pins,  which 3 go to the CHR and which one goes to the PRG?</div><br />It doesn't really matter, as long as you are consistent in your choices.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">did you mean D0-D3 lines on the 74161 chip?</div>
<br />No, I meant the D4, D5 and D6 that are connected to the PRG chip. You see, a program switches banks by attempting to write the number of the banks it wants to switch to PRG-ROM. Since it's ROM, it's obviously impossible to write to, but at this moment, D0 through D7 contain that value that was supposed to be written. What happens is that this value is written to the 74161 instead.
<br />
<br />If you look at an unmodified CNROM board, you'll see that D0 and D1 of the PRG chip are already connected to 2 of the "D" pins of the 74161 (it doesn't matter wich ones, as long as the corresponding "Q" pins are connected to the highest address lines of the CHR chip). The board is wired like this because the 2 lowest bits of the value control what CHR bank is selected. The Color Dreams board has the CHR bits in D4, D5, D6 and D7, but you only need D4, 5 and 6. You need to rewire because the bits of the written value are interpreted differently in each board, plus you have more CHR and also want to switch PRG, something an unmodified CNROM can't do.
<br />
<br />The easiest way to do this (without having to bend any pins) is to cut the traces of all "D" and "Q" pins of the 74161. Then connect D0 of the PRG chip to a "D" pin (any of them) in the 74161. Then connect the corresponding "Q" pin to A15 of the PRG chip. Next, connect D4, D5 and D6 of the PRG chip to the remaining 3 "D" pins in the 74161, and the corresponding "Q" pins to A13, A14 and A15 of the CHR chip.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Tue Feb 10, 2009 10:14 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />thanks, that makes more sense

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>coinheaven</b> [ Sat Feb 14, 2009 7:45 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />hey, i gave this a shot and it didnt work.  do any of the prg or chr pins have to be lifted?

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>1</strong> of <strong>2</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
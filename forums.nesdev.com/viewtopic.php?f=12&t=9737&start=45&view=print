<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Mad-1 discrete logic replacement-new thread</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Mad-1 discrete logic replacement-new thread</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=12&amp;t=9737">http://forums.nesdev.com/viewtopic.php?f=12&amp;t=9737</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>4</strong> of <strong>7</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sat Mar 30, 2013 8:31 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />So are you saying that the mad1 is nothing more than a 139 and SRAM back up .... That's it?  <br /><br />I thought there was more to it than that.....<br /><br /><br />Mark

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Mar 30, 2013 8:58 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">So are you saying that the mad1 is nothing more than a 139 and SRAM back up .... That's it?</div><br />The first couple Sunsoft mappers were just a couple 7400 series parts in one package. Perhaps the secret sauce is in the SRAM protection circuit.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>getafixx</b> [ Sat Mar 30, 2013 8:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">So are you saying that the mad1 is nothing more than a 139 and SRAM back up .... That's it?  <br /><br />I thought there was more to it than that.....</div><br /><br />Honestly, it doesn't appear to be anything special, just look at its pinout. When you look at the early carts, with the LS139 and the D2145U chip (or other variant), they could technically handle most of the games out there that used standard boards. It just made sense for Nintendo to combine the 2 chips together into one, cutting down on costs and space required in the cart. <br /><br />So far all the HiROM games that I've tested have worked perfectly (up to 48Mbit), and I anticipate no problems when trying this with a LoROM cart, as it should be basically the same setup (aside from slight rewiring on the '139...yet to be tinkered with).<br /><br />Now the only thing is to find a more feasible battery controller, as the BA6162 is another one of those obsolete parts. Mark had mentioned the MAX795T chip to me before, which would work perfectly, but it is a little expensive at almost $6 each (sometimes they can be found cheaper on eBay). If I find anything super cheap, and easy to come by, I will necro this post to share it.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Sat Mar 30, 2013 8:20 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">getafixx wrote:</div><div class="quotecontent">Now the only thing is to find a more feasible battery controller, as the BA6162 is another one of those obsolete parts. </div><br /><br />They aren't obsolete, but do apparently have large minimum qty.  <a href="http://www.digikey.com/product-detail/en/BA6162/BA6162-ND/658350" class="postlink">Digikey PN BA6162-ND</a> (use the PN if the link doesn't work...)  There are quite a few other battery backup chips available though if one knew exactly how to deem a chip worthy.  Those MAX795T are pretty spendy given the simple function...

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>getafixx</b> [ Sat Mar 30, 2013 8:42 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">They aren't obsolete, but do apparently have large minimum qty</div><br /><br />Well thats kind of it. How many people would be willing to buy 2000 of those chips at once? I know I wouldn't  <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /><br /><br />I will try and experiment with a few different kinds, and see what i find. Now that I know the proof-of-concept works, its just a matter of finding something compatible.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sat Mar 30, 2013 8:55 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The STM795 (equiv of max 795) is a lot cheaper.   I think mouser sells them for $2.38 or close to it...<br /><br />My question about the mad1's is:  all the older carts that are 16m (2x8mbit roms) or smaller, they used the 139.<br />Anything bigger than 16mbit, the mad1 is used.  Mario all stars is a good example.  While I question if a 139 + max795 = a mad1, I hope this is true. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>getafixx</b> [ Sat Mar 30, 2013 9:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">Anything bigger than 16mbit, the mad1 is used.  Mario all stars is a good example.</div><br /><br />Au contraire. I have a copy of Mario Allstars here, board SHVC-2A3B-01, which uses 2 rom chips, an LS139 chip.<br /><br />Pic of board here, using no MAD-1 chip:<br /><br /><a href="http://www.snescentral.com/0/8/8/0881/SHVC-H5-0.jpg" class="postlink">http://www.snescentral.com/0/8/8/0881/SHVC-H5-0.jpg</a>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sat Mar 30, 2013 9:40 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">getafixx wrote:</div><div class="quotecontent"><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">Anything bigger than 16mbit, the mad1 is used.  Mario all stars is a good example.</div><br /><br />Au contraire. I have a copy of Mario Allstars here, board SHVC-2A3B-01, which uses 2 rom chips, an LS139 chip.<br /><br />Pic of board here, using no MAD-1 chip:<br /><br /><a href="http://www.snescentral.com/0/8/8/0881/SHVC-H5-0.jpg" class="postlink">http://www.snescentral.com/0/8/8/0881/SHVC-H5-0.jpg</a></div><br /><br /><br />That is my point.... All stars is 16m (2x8) and is not using mad1.<br />Show me a board that is bigger than 16m using a 139 with SRAM......

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>lidnariq</b> [ Sun Mar 31, 2013 1:54 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Depending on relative costs, something like this simple PNP BJT circuit:<div class="attachtitle">Attachment:</div><div class="attachcontent">
			<span class="gensmall"><b>File comment:</b> exact resistors depend on bjt</span><br />
		
			<img src="./download/file.php?id=527" alt="power-fail-detection.png" /><br />
			<span class="gensmall">power-fail-detection.png [ 788 Bytes | Viewed 1967 times ]</span>
		

		<br />
	</div>might well be cheaper than a &quot;real&quot; battery detection circuit. It could be directly connected to a 6264's +CE input, or an extra 74HC138/9 could be used to convert it for a RAM with only one select.<br /><br />Power switchover is something I'd need to think about more, but the ba6162 appears fairly simple.<br /><br />The big difference in behaviors seems to be that the ba6162 provides hysteresis.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>getafixx</b> [ Sun Mar 31, 2013 8:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">That is my point.... All stars is 16m (2x8) and is not using mad1.<br />Show me a board that is bigger than 16m using a 139 with SRAM......</div><br /><br />Oh I see, I figured you were saying it uses the MAD-1. Later revisions of that board did use it, once Nintendo started using that decoder in all their boards. Also, in all fairness, the SNES didn't really start releasing games larger than 16M until 93-94 (AFAIK), and by then had already come out with the MAD-1.<br /><br />The functions of the MAD-1, as it looks, is an Address Decoder, SRAM controller, and a (2x) ROM Decoder all built into one. So, if you split the functions between 1 or 2 LS139 decoders and an SRAM controller, all you're doing is using 2-3 chips instead of one...still looks like it was just a space and cost saving measure to me.<br /><br />Mark, what other functions do you figure the MAD-1 had? Do you see a reason why this setup with the '139 couldn't work?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Mar 31, 2013 9:30 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">getafixx wrote:</div><div class="quotecontent">How many people would be willing to buy 2000 of those chips at once? I know I wouldn't  <img src="./images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div><br />Perhaps if people would develop high-quality NES games that are long enough to need battery save, bunnyboy might be willing to keep them in stock on retrousb.com.<br /><br />Perhaps the bigger (over 16 Mbit) games were also later games, manufactured after the MAD-1 was designed. And perhaps it had to do with the fact that PRG RAM had to be decoded specially so as not to overlap PRG ROM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>infiniteneslives</b> [ Sun Mar 31, 2013 9:35 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Power switchover is something I'd need to think about more, but the ba6162 appears fairly simple.</div><br /><br />I know the ba6162 gets more fancy, but shouldn't  a pair of Schottky diode should be sufficient?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>whicker</b> [ Sun Mar 31, 2013 11:17 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">infiniteneslives wrote:</div><div class="quotecontent"><div class="quotetitle">lidnariq wrote:</div><div class="quotecontent">Power switchover is something I'd need to think about more, but the ba6162 appears fairly simple.</div><br /><br />I know the ba6162 gets more fancy, but shouldn't  a pair of Schottky diode should be sufficient?</div><br /><br />No, because of the chip select blocking to avoid data corruption. You want to avoid writes during Reset/powerup and powerdown.<br /><br />Yes anybody can come up with a pullup and pulldown resistor and diode solution, but it would drain the battery much, much faster.<br /><br />Nintendo learned first-hand of save data corruption on the NES, and I'm sure their management wanted to progress from some boilderplate statement of &quot;hold reset while powering off the unit&quot; to avoid save data corruption. I wonder how many children got into slapping fights because their friend &quot;stupidly&quot; didn't hold reset while powering off  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Markfrizb</b> [ Sun Mar 31, 2013 11:19 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">getafixx wrote:</div><div class="quotecontent"><div class="quotetitle">Markfrizb wrote:</div><div class="quotecontent">That is my point.... All stars is 16m (2x8) and is not using mad1.<br />Show me a board that is bigger than 16m using a 139 with SRAM......</div><br /><br />Oh I see, I figured you were saying it uses the MAD-1. Later revisions of that board did use it, once Nintendo started using that decoder in all their boards. Also, in all fairness, the SNES didn't really start releasing games larger than 16M until 93-94 (AFAIK), and by then had already come out with the MAD-1.<br /><br />The functions of the MAD-1, as it looks, is an Address Decoder, SRAM controller, and a (2x) ROM Decoder all built into one. So, if you split the functions between 1 or 2 LS139 decoders and an SRAM controller, all you're doing is using 2-3 chips instead of one...still looks like it was just a space and cost saving measure to me.<br /><br />Mark, what other functions do you figure the MAD-1 had? Do you see a reason why this setup with the '139 couldn't work?</div><br /><br /><br />I honestly don't know but I did look at the MAD1 Truth table from NOCASH's site and it didn't look like the 139's truth table.....

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sun Mar 31, 2013 12:00 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b>Re: Mad-1 discrete logic replacement-new thread</b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">whicker wrote:</div><div class="quotecontent">Nintendo learned first-hand of save data corruption on the NES, and I'm sure their management wanted to progress from some boilderplate statement of &quot;hold reset while powering off the unit&quot; to avoid save data corruption.</div><br />Then perhaps the permanent solution is to find some unused area of flash twice as big as the SRAM, copy that area to SRAM on power-on, and copy SRAM to flash whenever the game saves. I say &quot;twice as big&quot; to work around the possibility of power loss while copying.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>4</strong> of <strong>7</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
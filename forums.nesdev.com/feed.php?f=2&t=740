<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=740" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2005-11-10T12:04:08-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=740</id>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2005-11-10T12:04:08-07:00</updated>
<published>2005-11-10T12:04:08-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6431#p6431</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6431#p6431"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6431#p6431"><![CDATA[
I edited my post above. Try DOSBox.<br /><br />EDIT:<br /><br />Just tried it here with win2k and got the same error as you. Then I tried DOSBox and it worked fine. Just install DOSBox, run it and type:<br /><br />mount c: c:\nsa&lt;ENTER&gt;<br /><br />to mount a virtual disc C, wich access the files from your real disc, in the c:\nsa folder. Change it to wherever your copy of NSA is.<br /><br />Then, just go to the virtual c: drive you mounted (type: c:&lt;ENTER&gt;) and run NSA as specified (NSA XXX.CHR).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Thu Nov 10, 2005 12:04 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[g-fighter]]></name></author>
<updated>2005-11-10T12:00:18-07:00</updated>
<published>2005-11-10T12:00:18-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6430#p6430</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6430#p6430"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6430#p6430"><![CDATA[
<div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><br />g-fighter, what OS are you using?<br /></div><br /><br />i have both mac os x and windows xp machines, i was trying it on the xp machine<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=192">g-fighter</a> — Thu Nov 10, 2005 12:00 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2005-11-10T12:02:36-07:00</updated>
<published>2005-11-10T11:55:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6429#p6429</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6429#p6429"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6429#p6429"><![CDATA[
g-fighter, what OS are you using?<br /><br />DOS32.EXE seems to be some kind of 32-bit extender for DOS, I don't think you're supposed to use it.<br /><br />I never tried to run it on newer systems like win2000 or XP. Maybe that is the problem. Try using a DOS emulator such as DOSBox (<!-- m --><a class="postlink" href="http://dosbox.sourceforge.net/">http://dosbox.sourceforge.net/</a><!-- m -->) wich is free and very good.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Thu Nov 10, 2005 11:55 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2005-11-10T11:52:16-07:00</updated>
<published>2005-11-10T11:52:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6428#p6428</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6428#p6428"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6428#p6428"><![CDATA[
I find images with palettes made only of gradients somewhat dull. And they'll never blend with each other unless through color 0 (most likely to be black, in this case). Sprites most of the time won't be enough to add a real sense of color to the images, there are so few of them!<br /><br />It surelly is much easier to detect the overall color of a block, and then build up a gradient based on the smallest and the biggest luminance values. But I don't think an image made only of gradients will look any nice.<br /><br />There has to be a way to classify every block individually, quantize it's colors to 4 (resulting in 1 palette per block) then reduce the number of palettes to what we want (up to 4), by adapting blocks wich use similar palettes to share the same one.<br /><br />But for this there has to be a way to classify the colors, so that they can be ordered, compared, averaged, etc.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Thu Nov 10, 2005 11:52 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[g-fighter]]></name></author>
<updated>2005-11-10T11:48:44-07:00</updated>
<published>2005-11-10T11:48:44-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6427#p6427</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6427#p6427"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6427#p6427"><![CDATA[
o, and running DOS32.EXE gives me a bad DOS32 executable error...what's that about???<br /><br />thanks again<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=192">g-fighter</a> — Thu Nov 10, 2005 11:48 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[g-fighter]]></name></author>
<updated>2005-11-10T11:44:27-07:00</updated>
<published>2005-11-10T11:44:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6426#p6426</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6426#p6426"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6426#p6426"><![CDATA[
<div class="quotetitle">tokumaru wrote:</div><div class="quotecontent"><br />a long long time ago I used the NES Screen Arranger software and I believe it had some code to display you picture included in the package. However it was a long time ago for me so I can't say how accurate the code is. I knew nothing about NES programming back then, but managed to get a few pics on the screen anyway. Maybe that's what you're looking for.<br /></div><br /><br />this app seems to be exactly what i need...but i cant seem to get it to work?? from the command prompt i move to the app directory and then type<br />NSA background.CHR<br /><br />but i get an  error:<br /><br />16-bit MS-DOS Subsystem<br />Command Prompt - NSA background.CHR<br />X#=0D, CS=01B7 IP=000000245. The NTVDM CPU has encountered an unhandled exception. Choose 'Close' to terminate the application.<br /><br />what gives????<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=192">g-fighter</a> — Thu Nov 10, 2005 11:44 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2005-11-10T10:17:09-07:00</updated>
<published>2005-11-10T10:17:09-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6418#p6418</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6418#p6418"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6418#p6418"><![CDATA[
I always trough basing all stuff on luminance was good, while color would just enhance the picture.... See all NES games with detailed graphics, they pretty much all bases their graphics on luminance. However, Color effects could be provided by sprites where needed. But I'm rather interesting to small to medium pictures myself, for Character's faces or maybe cutscenes.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Thu Nov 10, 2005 10:17 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2005-11-10T08:54:47-07:00</updated>
<published>2005-11-10T08:54:47-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6416#p6416</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6416#p6416"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6416#p6416"><![CDATA[
Hey Bregalad<br /><br />You're right, this kind of program should support palettes applied to 8x8 pixel areas.<br /><br />The really hard part of doing it all automatically is to have pallets that will blend with each other, or the resulting image looks pretty blocky.<br /><br />I'm basing my work on this on an old graphics compression technique called "block truncation coding". It divides the image in blocks and assigns a few colors to each block. When I saw this I thought it really resembled the way NES graphics work. However, it is intended to work with blocks smaller than 16x16, and the colors used in each block have no correlation to any other block, differently from the NES. And it also makes all of it's decisons based on luminance, wich won't look good for the NES.<br /><br />Yesterday I did a test using photoshop, and realized a pretty ugly problem. When I converted each of the areas to their own 3 colors + color 0, the colors almost never blended with the other areas, resulting in a very blocky look sometimes. Sometimes the colors were close enough.<br /><br />I can't think of a way to make the palletes blend smothly with each other... and even if there is a way, we would need to pick the correct colors to blend or it'd look ugly anyway.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Thu Nov 10, 2005 8:54 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2005-11-10T08:19:27-07:00</updated>
<published>2005-11-10T08:19:27-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6415#p6415</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6415#p6415"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6415#p6415"><![CDATA[
hum... I don't know anything about nbasic... I'm assuming it is a basic-type language for the NES?<br /><br />But no matter what language you're using, you'll have to perform the following tasks:<br />1. turn off the PPU and wait for it to warm up (2 frames, I guess);<br />2. write the palettes your image uses to palette RAM;<br />3. write the tile arrangement data to the nametable;<br />4. write the attribute bytes to the attribute table;<br />5. set the PPU to display the nametable you wrote the stuff to;<br />6. turn the screen on (background rendering on);<br /><br />I don't know if there is any ready-to-use code avaliable... a long long time ago I used the NES Screen Arranger software and I believe it had some code to display you picture included in the package. However it was a long time ago for me so I can't say how accurate the code is. I knew nothing about NES programming back then, but managed to get a few pics on the screen anyway. Maybe that's what you're looking for.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Thu Nov 10, 2005 8:19 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Anonymous]]></name></author>
<updated>2005-11-10T08:08:35-07:00</updated>
<published>2005-11-10T08:08:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6413#p6413</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6413#p6413"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6413#p6413"><![CDATA[
If you're talking about creating NES graphics, not convert to it, then use TileMolester or TileLayerPro, downloadable at <a href="http://www.zophar.net" class="postlink">http://www.zophar.net</a><br /><br />Tokumaru : Splitting attribute into 16x16 aeas would be needed, but you should let the user change the fine scrolling to optimise it, or reduce the size to 8x8 so a MMC5's exgrafix image could also be encoded.<br />I ask myself how good would be to enter with a BMP file, and automatically convert it. I ask myself if a programm could do that job fine, instad of an actual person.<p>Statistics: Posted by Guest — Thu Nov 10, 2005 8:08 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[g-fighter]]></name></author>
<updated>2005-11-09T18:14:30-07:00</updated>
<published>2005-11-09T18:14:30-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6404#p6404</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6404#p6404"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6404#p6404"><![CDATA[
haha...ok, i should have been more clear about this to begin with...im seriously inept at this stuff, i was hoping someone could give me some nbasic code that i could use, assuming i could get the .CHR myself.<br /><br />something that basically specifies a starting address of the tiles, x and y position on the screen and a width of the thing to draw...does that make sense?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=192">g-fighter</a> — Wed Nov 09, 2005 6:14 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2005-11-09T15:13:29-07:00</updated>
<published>2005-11-09T15:13:29-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6396#p6396</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6396#p6396"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6396#p6396"><![CDATA[
Hey Bregalad<br /><br />I've been using the following approach:<br /><br />First I shrink the image to 1/16th of it's size, so that each pixel is the average color of 16x16 pixel block from the original image. Then I quantize this image to 4 colors (or 3, or 2, depending on the number of palettes the user wants to use). The pixels with the same color represent blocks that will use the same palette.<br /><br />Then we have to calculate color 0, wich should be be the most present color in the whole image. Then each group of blocks is quantized to 4 colors, one of wich is fixed, color 0.<br /><br />About the sprite details, I haven't put much though on it yet. Maybe I could calculate the difference of the original image to the converted image, and assign sprites to represent the points where the difference was too large. The number of sprites to use would be supplied by the user, so, areas with larger differences would be favored in case there are not enough sprites.<br /><br />I'm not sure if this is the best method. You presented some good ideas in your post too. I perform my tests using photoshop, çause I'm not in the mood to program a full algorithm and see that in the end the image sucks.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Wed Nov 09, 2005 3:13 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2005-11-09T13:55:37-07:00</updated>
<published>2005-11-09T13:55:37-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6392#p6392</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6392#p6392"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6392#p6392"><![CDATA[
This can also apply to use small image, especially faces in a game.<br />I don't know if a full-feathured software would do the job fine... actually get the algoritm for a such thing would be pretty hard.<br />Here you are what I think :<br />- Put the image's satuaration to it's maximum, so all colors would be maxed out, scince the NES is unable to display mid-gray colors. Full gray color would stay gray, trough.<br />- Check for "sectors" where a color tone would be used. Those sectory would apply to the highest nybble of the NES palette color, so it would say if the image is gray, blue, pink, red, orange, yellow, green or cyan (with more or less precision). The user would be able to modify a bit the color intensity to fit his own palette<br />- Brithters colors should be tied to white, while darker colors should be tied to black (prepare for the luminosity calculation below)<br />- Check the most used color(s) and put it (them) as backgound color(s). The image will then be converted to use only 4 levels of luminosity, black and white inclued (or white may also be not include, but be used only in sprite if the picture is rather bright, but with few white on it)<br />- Check for all colors pixels that wasn't settup with the background color, and check how many different sprite palette it would fit (normally, using fade-pallettes only would be easier)<br />- Convert all pixels in 8x8 sprites blocks with each one it's own color, but keeping in mind that they can be aligned overmixed as you wish<br />- Make sure there is no too much sprites (not more than 8 per line)<br />- Test the final image<br /><br />I think that this would be pretty hard to do. If anyone has a better algoritm, it would be welcome. However, it seems to not be that complicated to do it by hand, just a lot of thinking/optimizing is involved.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Wed Nov 09, 2005 1:55 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2005-11-09T13:28:07-07:00</updated>
<published>2005-11-09T13:28:07-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6391#p6391</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6391#p6391"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6391#p6391"><![CDATA[
Yeah, you guys are too fast when replying!<br /><br />Hey Bregalad, the program I mentioned above is kinda like you described. The program would perform the steps I listed above automatically, based on some user input. It would let you chose the number of palettes to use, if you want to provide the palettes or let the program calculate them, how many tiles you want to use, etc.<br /><br />If tiles weren't exactly equal, but close enough, the program would merge them into one (good for photos, suchs for drawings), if the result had more tiles than requested, of course. It's a sort of graphics compression scheme, in the end.<br /><br />The hardest thing would be to set up the sprite layer, wich is very limited but could be used on extreme cases (few colors don't mach any avaliable color).<br /><br />If people think such a software would be welcome, I may get back to it. What do you think? I decided to stop working on it when I realized that it was very rare for people to use large images on games... but if the program provides enough options it may be used for much more than just big images.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Wed Nov 09, 2005 1:28 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2005-11-09T13:14:57-07:00</updated>
<published>2005-11-09T13:14:57-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6390#p6390</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6390#p6390"/>
<title type="html"><![CDATA[image as background]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=740&amp;p=6390#p6390"><![CDATA[
I was going to say exactly what tepples just did. This way you could use up to 512 tiles. If you don't want to use a mapper, you can still do this. Only instead of actual bankswitching, you change bit 4 of $2000, so you use the other half of the pattern table. If you use all 512 tiles for the background you'll have none left for the sprites, though.<br /><br />Also keep in mind the other limitations:<br />-4 palettes of 4 colors each (index 0 is the same color in all of them);<br />-palettes applied to blocks of 16x16 pixels;<br /><br />I don't know what part of the process you're having trouble with, but I think this is a good way of preparing the pictures:<br />1. open your pic in photoshop os some similar tool;<br />2. resize it to the final size - this will be 256x240 if you want to use the whole screen, but remember you have limited tiles, so if it is a complex image, you might consider a smaller final size so you have enough tiles to represent the image;<br />3. place a new layer on top of your image, and draw a checkerboard-like pattern, made of 16x16 pixel squares;<br />4. apply a transparency to this new layer, so you can spot what areas of your image could share the same palette;<br />5. paint with the same color the squares that are over parts that could share the same palettes. you should have no more than 4 areas defined;<br />6. select each area, copy and paste to a new document and convert that image to indexed color (4 colors), forcing the colors you want your palettes to have. remember to repeat color 0 for all of the areas;<br />7. now you have all the areas, with their respective colors. take note on how your attribute table should be set (wich areas use wich palettes). put everything (all the areas) back together.<br /><br />This was the image preparation process, now you have to convert it to the NES format, eliminate redundant tiles, and write the code to put the stuff on the screen. There are programs to help you in this part, it's up to you what to use.<br /><br />I wrote the steps above because there is no software to do it automatically. I thought about writing one but never got the time to. I have a lot of ideas, though.<br /><br />If this wasn't the part you needed help with at all, ignore this and we'll get to the part of convertion, arranging and displaying.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Wed Nov 09, 2005 1:14 pm</p><hr />
]]></content>
</entry>
</feed>
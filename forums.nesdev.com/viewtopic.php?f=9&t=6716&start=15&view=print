<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - Refining design for really low-cost devcart</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">Refining design for really low-cost devcart</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=9&amp;t=6716">http://forums.nesdev.com/viewtopic.php?f=9&amp;t=6716</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Fri Jul 30, 2010 11:49 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Right, DPCM samples probably wouldn't work with another cartridge.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>MottZilla</b> [ Fri Jul 30, 2010 12:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I think $40 isn't bad since the goal is not a device like the PowerPAK. The stop-n-swap idea is interesting. What's the life time on these Flash chips?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>arfink</b> [ Fri Jul 30, 2010 1:54 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The life time on the flash chips is variable based on what manufacturer they come from. I'll have to check on exactly how many cycles it is. 
<br />
<br />Of course, a DIY-er who makes his own can just socket the Flash and when it dies you can drop a new one in.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>blargg</b> [ Fri Jul 30, 2010 2:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The Atmel one says 10K erase-program cycles. It uses 256-byte sectors, so I doubt it means merely erasing 10K sectors and reprogramming them, because given 512K device size, that would only mean only 4 total reprograms of the chip. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />The AMD one guarantees 1M erase-program cycles per sector, with the chip heated to 90 C. Clearly AMD had superior technology at the time.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Jul 30, 2010 4:11 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, I think this would be a great thing to build.  And $40 is about right, too for a whole kit that is a great deal.  Making the cables is a lot of labor, I built 6 RS232 to NES/SNES* adapters.  I shipped 4 of them I think.  I think I sold them for $15, not sure
<br />
<br />My biggest advise is this - it's time for RS232 to go to bed.  The newer FT232 chips are much better than the older ones, but for the same price you can get a PIC18F or PIC32 that has all USB hardware on-board.  Then you need I guess an 8mhz crystal, and that's it.
<br />
<br />From there it would be simple to translate 5V synchronous from the NES, through USB, and then a required USB driver which gives you the data on a COM port so it still works with RS232 software (as long as it lets you select COM19 and stupidly high port numbers like that).  The synchronous NES part is important, because then the NES can read buffered data at it's convenience.  You could get a highest-specc'ed PIC with 128kB of RAM for maybe $7, which is just an absurd amount of RAM.  There are much cheaper ones though since this wouldn't need much RAM/ROM.
<br />
<br />There's also a lot of other stuff you can do with an MCU.. like letting the games use it's program flash (or some of them have dedicated EEPROMs) as a non-volatile save memory.  You can get 10,000 writes out of that minimum (maybe 100k or 1 million with it's smaller EEPROM), at least, but it'll have a longer life since the wear can be spread around easily).
<br />
<br />As for MMC1 I don't know if it would work or not.  I guess the flash chip won't have any problems, but the mapper might.  If the banked address lines have any chance to do weird stuff while it's programming, that can't be good (since the entire address is the programming address, of course).  It would smart to do a custom board.  I've been really interested in making a lower-cost dev board board design (cheap enough to be used for game distribution as well since maybe it can be done in quantity), but I didn't want to get too much in the business of building cables (but now I do that sometimes at my workplace, heheh).
<br />
<br />For the board I would go with PLCC memory.  PLCC flash is available enough for development, and OTP EPROM can be used for production if needed.  PLCC can be socketed (and fit in the cart shell) in case the cable fails or ROM needs updated.  I believe I may be able to make the board compatible with both PLCC and DIP, I have a layout for that type of thing that only needs the close tolerances to be cleaned up.
<br />
<br />*it was interchangeable but writing the code for the SNES was a nightmare since I wasn't aware of the SNES CPU timing being variable and also HDMA stealing cycles (initially tested on the SNES clone I have, where it actually worked fine).  synchronous comms would solve all those problems.
<br />
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The AMD one guarantees 1M erase-program cycles per sector, with the chip heated to 90 C. Clearly AMD had superior technology at the time.</div>
<br />
<br />Yeah, that's why I wanted those for Squeedo.  So if play your NES once a day and save the game when you're done, you'll be good for about 2,700 years.  With wear-leveling and say a 256-byte save, I'm sure the metals making up the components will be transmuting themselves (or whatever they do) before you wear out the chip, heheh.
<br />
<br />
<br />So would be an NES board be interesting to you guys if I made one up?
<br />
<br />edit: BTW I can help out with the PIC programming if you need.. I've done PIC18 asm and now that I've been using C I can use that just as well (since the USB libraries probably will require it).  If you're not real familiar with PICs I could help pick one out too maybe (there are hundreds of different types, but amazingly, availability is never an issue).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>arfink</b> [ Fri Jul 30, 2010 9:03 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />As far as I'm concerned, the board is interesting, but not right away. I want these so that they can be provided to people at cost, but people can also still build them for themselves. A design which uses existing carts can do that more easily, I think, than a custom PCB. But if you can build it, I'm sure people would be interested in such a thing.
<br />
<br />As far as using serial, I understand how ideal it would be to use a PIC, but right now we don't want to deal with writing drivers, and RS232 has the advantage of being very robust and universal across OSes. I have commented to Blargg that I'd like to use this with my Apple IIgs, even if just for kicks. Blargg mentioned this is his other thread here:
<br />
<br />[quote=blargg]A big benefit of using serial (even if just a USB-serial adaptor) is that the host-side drivers use a well-worn protocol. You don't have to mess with special drivers or communication models when using serial, so it's easy to port to different operating systems. That's not to say you couldn't have a microcontroller with a USB interface to the PC acting like a serial device, but giving the NES a clocked interface (maybe that was your point). If someone wants to release such a cable for the NES, please do![/quote]
<br />
<br />Lastly, while this cartridge is a cool idea for NES development and could have alot of potential, I think that our primary goal has not been to make a cheap cartridge with lots of cool development features, but a cheap cartridge for non-devs to use homebrew.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Fri Jul 30, 2010 10:13 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Yeah, it adds I guess $5 or so to the cost of parts.  I don't think RS232 is as robust and universal when bit-banged, half-duplex mode is fine but the NES can't do anything else (not easily) while it's waiting for input.  Kinda harder to use from the NES side.  But oh well, either way the NES and PC software is pretty much compatible with both hardware types.  Also, I'm sure there would be a USB PIC18 in DIP package if that helps for people building it themselves.
<br />
<br />Would be cool to use it with older hardware too.  I think I looked it up for the Atari 8-bit and C64 and (IIRC) it was 0V-5V RS232, so no adapter is even needed for those, just connectors.
<br />
<br />I might make a cartridge like that, sounds kinda fun, I have a feeling it may be useful once more communication adapters are around.  These type of carts can work with CopyNES, too.  I could use DIP parts, but it's more expensive for the RAM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>arfink</b> [ Sat Jul 31, 2010 12:38 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Well, you could just go find a copy of Ultima Exodus (which nobody really wants to put themselves through the torture of playing these days) and it has everything you'd need. 8k battery ram, 8k CHR RAM, PRG ROM. Dirt cheap game if you look on evilBay.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jul 31, 2010 1:18 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Make sure to grab <strong>Ultima</strong> Exodus and not regular Exodus. Regular Exodus runs on Color Dreams' nibble-swapped GNROM clone.
<br />
<br />In which regions was <a href="http://en.wikipedia.org/wiki/Ultima_III:_Exodus" class="postlink">Ultima Exodus</a> released? And how many copies are probably out there? Would they need a new battery soldered in?
<br />
<br />On eBay, I see listings for the US version of Ultima Exodus for anywhere from $1 to $12. But is <a href="http://cgi.ebay.com/ws/eBayISAPI.dll?ViewItem&amp;item=110564975572" class="postlink">this</a> Ultima Exodus, or is it Yoshit?

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>arfink</b> [ Sat Jul 31, 2010 5:15 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I dunno what regions ultima exodus got released in. I believe most, if not all the Ultima games have an appropriate mapper and configuration for this. I have also used Bard's Tale.
<br />
<br />I guess to find out, one could hit up Bootgod and check SUROM.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Jul 31, 2010 5:32 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />It would be cool if you made different designs for different mappers (with instructions on how to modify different donor carts), so people wouldn't have to stick to the MMC1. They could have a whole set devcarts using different mappers.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Sat Jul 31, 2010 7:02 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">They could have a whole set devcarts using different mappers.</div>
<br />But once you have three such carts, you might as well buy a PowerPak, unless you're developing for an unsupported mapper (such as one involving flash memory writable by the program itself). But this project is good not only for learning how to make devcarts but also for learning how to make repros of one's finished product to sell (that is, if anyone ever gets around to finishing a product).

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tokumaru</b> [ Sat Jul 31, 2010 7:37 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />You can buy a lot of cheap donor carts for the price of a PowerPak... Of course you still have to consider the Flash memory, but at least the PC connection would be shared between all carts.
<br />
<br />I'm saying this because I'm not the biggest fan of the MMC1, and I think that a development solution that's limited to a single mapper (and its few subsets) is not that useful.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Sat Jul 31, 2010 8:10 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Hm, here's an idea maybe, for modding mappers to work with flash.  If the mapper covers a $8000-$FFFF normally, maybe a 74hc139 or 138 could be used on the enable to move it to $0800-$7800.  So a latch at $8001 would show up at $0801.  It would also end up overwriting zero-page RAM and breaking compatibility, so it's kind of debatable if it's even worth it at that point (though I guess further mods could avoid that, but it's getting to be quite a lot of rewiring by now).
<br />
<br />Also BTW Ultima Exodus was the cart that I had modified to take an EPROM a long time ago (and haven't used it much, really since my development tests had typically been pretty small).  Before I had a ROM programmer and emulator, I had put some stuff together and had it burned but it didn't work right because of it being MMC1A and starting in a different bank than all the emulators (at that time).  Later then, on my Squeedo cart (so I can just use the highest bank for the loading code) I had put a resistor network as pullups on the address lines so it could start up properly.  I didn't think of that until now, this MMC1A random bank startup is another potential problem for a flash cartridge.  You need vectors in every bank.  The loader code could just reserve $FFF0+ in every 32kB and be OK I think, then point the NMI and IRQ vectors into RAM so user programs can put JMPs there (or rather, the load code copies the vectors there).
<br />
<br /><div class="quotetitle">tepples wrote:</div><div class="quotecontent"><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">They could have a whole set devcarts using different mappers.</div><br />But once you have three such carts, you might as well buy a PowerPak, unless you're developing for an unsupported mapper</div>
<br />
<br />And then you might as well buy a <a href="http://www.moates.net/product_info.php?cPath=68&amp;products_id=169" class="postlink">ROM emulator</a>, heheh.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>arfink</b> [ Tue Aug 03, 2010 9:13 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Thanks for pointing that out Memblers. As it turns out, we haven't used Ultima Exodus, it was just the first that came to mind. Bards Tale and NES Open Tournament Golf have been ones that I have actually used, and they have the MMC1B2 and MMC1B3 inside. That should save us some trouble.
<br />
<br />EDIT: I just checked the bootgod database, and Ultima Exodus does, in fact, have an MMC1B chip inside, not the MMC1A. If you have a strange version with a different revision MMC1 inside, you should post that information to the bootgod database.

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>2</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html dir="ltr" lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Language" content="en-gb">
<title>nesdev.com :: View topic - FDS homebrew ?</title>

<style type="text/css">
<!--

body {
	font-family: Verdana,serif;
	font-size: 10pt;
}

img {
	border: 0;
}

td {
	font-family: Verdana,serif;
	font-size: 10pt;
	line-height: 150%;
}

.code, .codecontent, 
.quote, .quotecontent {
	margin: 0 5px 0 5px;
	padding: 5px;
	font-size: smaller;
	border: black solid 1px;
}

.quotetitle {
	color: black;
	display : block;
	font-weight: bold;
}

.forum {
	font-family: Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 18pt;
}

.topic {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 14pt;
	font-weight: bold;
}

.gensmall {
	font-size: 8pt;
}

hr {
	color: #888;
	height: 3px;
	border-style: solid;
}

hr.sep {
	color: #aaa;
	height: 1px;
	border-style: dashed;
}
//-->
</style>

</head>
<body>

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td colspan="2" align="center"><span class="Forum">nesdev.com</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/">http://forums.nesdev.com/</a></span></td>
</tr>
<tr>
	<td colspan="2"><br /></td>
</tr>
<tr>
	<td><span class="topic">FDS homebrew ?</span><br /><span class="gensmall"><a href="http://forums.nesdev.com/viewtopic.php?f=2&amp;t=5974">http://forums.nesdev.com/viewtopic.php?f=2&amp;t=5974</a></span></td>
	<td align="right" valign="bottom"><span class="gensmall">Page <strong>3</strong> of <strong>3</strong></span></td>
</tr>
</table>



	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Xious</b> [ Mon Mar 15, 2010 3:11 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I meant save, then continue later...
<br />
<br />FYI, if you hit Death with the holy water, it both stuns and does heavy damage to him and you'll beat him in a hurry.
<br />
<br />
<br /><div class="quotetitle">Bregalad wrote:</div><div class="quotecontent"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> <br /><br />For example, I would love to see an FDS version of Castlevania: Chorus of Mysteries (on top of the Akumajo Dracula FDS diskette) so that you can save three files and have continues.</div><br />I just wanted to point that there IS infinite continues in Castlevania - they just whiped the save out, which wasn't really necessary since you can finish the game in ~45 minutes (for those who are good enough to kill Death, unlike me). No matter if I have saves or not I'll always be stuck at Death, the only way to pass it for me is to have savestates.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> <br /><br />The FDS also has its own sound chip, so it would be neat to see new games that make use of it, but if you want to run them on real HW, you'll have to figure out how to write to a disk from an image, which is something I brought up on the hardware forums a while back.</div><br />You are right that if I use the sound hardware, it may act differently on the PowerPak that on a real FDS... so I'd have to buy a twin famicom or a working FDS + ask my 60-&gt;72 adaptater back from my bro in law + find a way to make the cart fit in my NES, and in all cases buy at least 1 disc and find a way to rewrite it, which sounds tedious, although I'd love to be able to do that.<br /><br />Also how common are 72-&gt;60 adapters ? If I ever go trough the trouble to import a rare twin famicom, I'd be able to at least play games from my Power Pak in NTSC mode !</div>
<br />
<br />The other consideration for FDS homebrews is file size: If you want your game to exceed 128K, you have to span multiple disks, and the PowerPak, as of the time of this post, does not support multiple-disk games. 
<br />
<br />-Xious

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Mon Mar 15, 2010 8:51 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Earlier in the thread I said I'd be cool to do an FDS release, but the more I considered it the more it sounds like a horrible idea.  Just imagine all the "fun" it would be to send copies of your game out only to have some drives not read them because of drives going out of alignment after 15 years, or any other very common disk failure modes.  Even after calibrating your own drive somehow you'd have to deal with everyone else's bum disks and bum drives.  Sounds like big fun, not.
<br />
<br />Not to mention the loading times.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>tepples</b> [ Tue Mar 23, 2010 7:39 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />The wiki article about FDS states that the BIOS verifies 224 bytes in VRAM against corresponding bytes in the BIOS before executing anything, and the KYODAKU- file is supposed to populate them with a trademark notice. This has been ruled ineffective in <em>Sega v. Accolade</em>, 977 F.2d 1510, 24 USPQ2d (BNA) 1561 (9th Cir. 1992). But does the BIOS clear out or verify anything else in the VRAM between loading the initial files and displaying the screen? Specifically does the BIOS do anything to thwart these workarounds?
<br />
<br />Workaround #1: Use a nametable file loaded into $3F00 to blank the text.
<br />Workaround #2: Use a CHR file to scramble the text.
<br />Workaround #3: Make the KYODAKU- file 160 bytes longer, much like the opening screen of Bleemcast:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; CORRECTION: THIS PRODUCT IS<br />&nbsp; NOT LICENSED BY NINTENDO OR<br />&nbsp; ANYONE ELSE FOR THAT MATTER.<br />&nbsp; IGNORE WHAT IT SAYS ABOVE.<br /></div>

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Tue Mar 23, 2010 10:53 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />Nintendo were careful, and all these workarounds won't work. After loading the boot files, the first nametable is cleared and the second part of the second nametable uses palette #2 which is entirely black (the attribute table is written after the boot files load of course). The palette is rewritten, and from ROM directly. The tiles $00-$23 of second pattern table are backed up in system RAM, and overwritten by the FDS BIOS font for the approval screen, and are restored after the approval screen is shown.
<br />
<br />The only "workaround" that might work would be to load a 1-byte file at $101 to give IRQ control to your program (assumed you loaded it BEFORE of course). I have no idea how well it'll work tough and I have no idea how the powerpak would react to this.
<br />
<br />EDIT: The FDS BIOS refuses to load any data from disk to $000-$1ff so no way to transfer IRQ control to the main program nor to modify the return adress on stack, like some C64 games did to skip the "ready" prompt. It will ALSO refuse to load data into $800-$9ff, $1000-$11ff and $1800-$19ff. Nintendo REALLY thought of everything.
<br />
<br />I guess this is a non-issue, there is probably no way this screen can be skipped or even somehow effected.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Memblers</b> [ Tue Mar 23, 2010 1:21 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" />I thought I remembered running some strange FDS images on emulators a long time ago that had changed the boot screen to show something else.  It might have been Hacker International.  I may be remembering something else though.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Hamtaro126</b> [ Tue Mar 23, 2010 2:53 pm ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">tepples wrote:</div><div class="quotecontent">The wiki article about FDS states that the BIOS verifies 224 bytes in VRAM against corresponding bytes in the BIOS before executing anything, and the KYODAKU- file is supposed to populate them with a trademark notice. This has been ruled ineffective in <em>Sega v. Accolade</em>, 977 F.2d 1510, 24 USPQ2d (BNA) 1561 (9th Cir. 1992). But does the BIOS clear out or verify anything else in the VRAM between loading the initial files and displaying the screen? Specifically does the BIOS do anything to thwart these workarounds?<br /><br />Workaround #1: Use a nametable file loaded into $3F00 to blank the text.<br />Workaround #2: Use a CHR file to scramble the text.<br />Workaround #3: Make the KYODAKU- file 160 bytes longer, much like the opening screen of Bleemcast:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">&nbsp; CORRECTION: THIS PRODUCT IS<br />&nbsp; NOT LICENSED BY NINTENDO OR<br />&nbsp; ANYONE ELSE FOR THAT MATTER.<br />&nbsp; IGNORE WHAT IT SAYS ABOVE.<br /></div></div>
<br />
<br />According to Lost Levels, Sunsoft had Hacker International's Hex editor, it's a relationship that nintendo did not know of even of now.
<br />
<br />In Sunsoft's Nazoraa Land (Puzzler Land) Series, The FDS BIOS was rearranged after the BIOS shoed, Scattering and Rebuilding the word ''SUNSOFT'', Then boots up. 
<br />
<br />This also had something in common in Hacker International's FDS games.

		

		</td>
	</tr>
	</table>


	<hr width="85%" />

	<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
	<tr>
		<td width="10%" nowrap="nowrap">Author:&nbsp;</td>
		<td><b>Bregalad</b> [ Wed Mar 24, 2010 1:09 am ]</td>
	</tr>
	<tr>
		<td width="10%" nowrap="nowrap">Post subject:&nbsp;</td>
		<td><b></b></td>
	</tr>
	<tr>
		<td colspan="2"><hr class="sep" /><div class="quotetitle">Memblers wrote:</div><div class="quotecontent">I thought I remembered running some strange FDS images on emulators a long time ago that had changed the boot screen to show something else.  It might have been Hacker International.  I may be remembering something else though.</div>
<br />Oh my god you are right.
<br />The trick is surprisingly simple : The trick is that FDS BIOS write $c0 to $100 giving NMI control to vector #3 ($dffa-$dffb) by default, and just change it when it exept a VBlank to fire, and restore it again. They load something into the PPU registers, and enable NMIs (which are supposed to be disabled) that way. Eventually an NMI fires and the main program can boot from here - without displaying Nintendo's screen.
<br />
<br />EDIT :
<br />Here is a hack of Chris' demo so that it skip Nintendo's screen : <a href="http://jonathan.microclub.ch/dummy/DiskTest.FDS" class="postlink">http://jonathan.microclub.ch/dummy/DiskTest.FDS</a>

		

		</td>
	</tr>
	</table>


<hr width="85%" />

<table width="85%" cellspacing="3" cellpadding="0" border="0" align="center">
<tr>
	<td><span class="gensmall">Page <strong>3</strong> of <strong>3</strong></span></td>
	<td align="right"><span class="gensmall">All times are UTC - 7 hours </span></td>
</tr>
<tr>
	<td colspan="2" align="center"><span class="gensmall">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</span></td>
</tr>
</table>

</body>
</html>
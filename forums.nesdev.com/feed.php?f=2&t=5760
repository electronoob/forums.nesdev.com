<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://forums.nesdev.com/feed.php?f=2&amp;t=5760" />

<title>nesdev.com</title>
<subtitle>NES Development and Strangulation Records message boards</subtitle>
<link href="http://forums.nesdev.com/index.php" />
<updated>2009-11-27T21:42:14-07:00</updated>

<author><name><![CDATA[nesdev.com]]></name></author>
<id>http://forums.nesdev.com/feed.php?f=2&amp;t=5760</id>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2009-11-27T21:42:14-07:00</updated>
<published>2009-11-27T21:42:14-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=53163#p53163</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=53163#p53163"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=53163#p53163"><![CDATA[
<div class="quotetitle">tepples wrote:</div><div class="quotecontent"><br />I figured it out. I was using the wrong branch in my PPU warm-up wait loops.<br /></div><br />As it usually turns out, something seemingly unrelated... =)<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Fri Nov 27, 2009 9:42 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-11-27T21:33:46-07:00</updated>
<published>2009-11-27T21:33:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=53162#p53162</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=53162#p53162"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=53162#p53162"><![CDATA[
I figured it out. I was using the wrong branch in my PPU warm-up wait loops.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Fri Nov 27, 2009 9:33 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-11-23T21:43:35-07:00</updated>
<published>2009-11-23T21:43:35-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52951#p52951</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52951#p52951"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52951#p52951"><![CDATA[
<a href="http://pics.pineight.com/nes/dpcm_split.zip" class="postlink">This ROM (with source code for ca65)</a> displays a message and flashes the backdrop color to let one know that the NMI handler is running, and its IRQ handler makes clicks through $4011 once every few iterations to let one know that it is running. But after a reset, it doesn't start clicking again, nor does it display the message. I'm sure I made some silly mistake near the top of the program. Worse yet, the environments that hang (PowerPak and Nestopia) don't have a debugger, while the environments with a debugger (FCEU series and Nintendulator) don't hang.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Nov 23, 2009 9:43 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2009-11-23T09:19:46-07:00</updated>
<published>2009-11-23T09:19:46-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52910#p52910</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52910#p52910"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52910#p52910"><![CDATA[
I don't know but I'd double check the initialisation of IRQs at reset. At reset you'd probably want to set the interrupt flag (at least until you actually expect IRQs), write #$00 to $4015 to disable all channels (especially DMC), and read $4015 after that (so it would acknownledge any possible interrupt to be safe).<br />I know the NES is supposed to disable all sound channels and IRQs when it's soft-resetted, but just to be sure...<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Mon Nov 23, 2009 9:19 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-11-23T09:09:51-07:00</updated>
<published>2009-11-23T09:09:51-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52904#p52904</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52904#p52904"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52904#p52904"><![CDATA[
Tonight when I get home from work, I will upload a copy of my project. It works when I launch it from the PowerPak menu, but when I press reset, it freezes.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Mon Nov 23, 2009 9:09 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2009-11-23T00:24:24-07:00</updated>
<published>2009-11-23T00:24:24-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52887#p52887</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52887#p52887"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52887#p52887"><![CDATA[
I guess to proprely enable it you should write a value &gt;$80 to $4010, and to proprely acknownledge it you should read $4015.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Mon Nov 23, 2009 12:24 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-11-22T14:47:31-07:00</updated>
<published>2009-11-22T14:47:31-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52873#p52873</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52873#p52873"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52873#p52873"><![CDATA[
My post is from an NES programmer's point of view, not an emulator programmer's point of view. I am aware of these closed-source test cases. But I'm looking for something with available source code so that I can see the right sequence of reads and writes to get the IRQ 1. properly enabled and then 2. properly acknowledged. What I have so far fails differently in FCE Ultra (the emulator on an Ubuntu PC with CA65 installed), Nintendulator (the emulator on the other PC that runs Windows), and my PowerPak, making it an absolute pain to debug. Should I post my non-working source code and then have the rest of you pick it apart to see why it doesn't work?<br /><br />Right now, I'm puzzling through <a href="http://www.slack.net/~ant/misc/nes-saw/" class="postlink">the sawtooth demo</a>.<br /><br />I guess my questions are as follows: How do I know my IRQ handler is getting called? And after that, how do I know that the main thread of execution is resuming, as opposed to the IRQ handler just getting called again immediately after the RTI instruction at its end?<br /><br />EDIT: I got it to work, mostly. It still fails when I press the NES's reset button, but it works when I hold the NES's reset button to go back to the PowerPak main menu.<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Nov 22, 2009 2:47 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Disch]]></name></author>
<updated>2009-11-22T14:46:06-07:00</updated>
<published>2009-11-22T14:46:06-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52872#p52872</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52872#p52872"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52872#p52872"><![CDATA[
Bee52<br />Firehawk<br />Mig29 Soviet Fighter  &lt;--- ruthless about DMC IRQ timing<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=33">Disch</a> — Sun Nov 22, 2009 2:46 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tokumaru]]></name></author>
<updated>2009-11-22T14:41:04-07:00</updated>
<published>2009-11-22T14:41:04-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52871#p52871</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52871#p52871"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52871#p52871"><![CDATA[
Guardian Legend uses it for the status bar, right?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=95">tokumaru</a> — Sun Nov 22, 2009 2:41 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Bregalad]]></name></author>
<updated>2009-11-22T14:36:32-07:00</updated>
<published>2009-11-22T14:36:32-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52869#p52869</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52869#p52869"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52869#p52869"><![CDATA[
Guardian Legend, Ian Bell's "Tank" demo (not sure if elite uses it too).<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=38">Bregalad</a> — Sun Nov 22, 2009 2:36 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[tepples]]></name></author>
<updated>2009-11-22T14:21:16-07:00</updated>
<published>2009-11-22T14:21:16-07:00</published>
<id>http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52867#p52867</id>
<link href="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52867#p52867"/>
<title type="html"><![CDATA[DMCIRQ examples?]]></title>

<content type="html" xml:base="http://forums.nesdev.com/viewtopic.php?t=5760&amp;p=52867#p52867"><![CDATA[
Are there examples of programs that run on an NES and use the DMC IRQ, other than the sawtooth demo?<p>Statistics: Posted by <a href="http://forums.nesdev.com/memberlist.php?mode=viewprofile&amp;u=9">tepples</a> — Sun Nov 22, 2009 2:21 pm</p><hr />
]]></content>
</entry>
</feed>
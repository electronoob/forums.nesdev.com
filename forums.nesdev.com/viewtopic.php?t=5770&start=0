<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>nesdev.com &bull; View topic - Questions about scrolling and sprites on (S)NES</title>

<link rel="alternate" type="application/atom+xml" title="Feed - nesdev.com" href="http://forums.nesdev.com/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forums.nesdev.com/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forums.nesdev.com/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forums.nesdev.com/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forums.nesdev.com/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Newbie Help Center" href="http://forums.nesdev.com/feed.php?f=10" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Questions about scrolling and sprites on (S)NES" href="http://forums.nesdev.com/feed.php?f=10&amp;t=5770" />

<link rel="stylesheet" href="./style.php?id=1&amp;lang=en" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=10&amp;t=5770';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
	</div>

	<div id="menubar">

		<table width="100%" cellspacing="0">
		<tr>
			<td rowspan="2"><a href="./index.php"><img src="./styles/subsilver2/imageset/site_logo.gif" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>nesdev.com</h1><span class="gen">NES Development and Strangulation Records message boards</span></td>
		</tr>
		<tr>
			<td align="center">
				<!--<div style="float: right;">
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="X2HM4WNR5YT8S">
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
					</form>
				</div>-->
				<a href="./faq.php"><img src="./styles/prosilver/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php"><img src="./styles/prosilver/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
				<br />	
				 &nbsp;<a href="./ucp.php?mode=minion"><img src="./styles/prosilver/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					&nbsp; &nbsp;<a href="./ucp.php?mode=login"><img src="./styles/prosilver/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp;
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Fri Aug 17, 2018 12:43 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered">View unanswered posts</a> | <a href="./search.php?search_id=active_topics">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>

	<br />
	

					<center>
					<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- NesDev Forums -->
					<ins class="adsbygoogle"
						 style="display:block"
						 data-ad-client="ca-pub-7801010229099644"
						 data-ad-slot="7979066809"
						 data-ad-format="auto"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>
					</center>
	<br />


<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=10&amp;t=5770">Questions about scrolling and sprites on (S)NES</a></h2>


	<p class="moderators">Moderator: <a href="./memberlist.php?mode=group&amp;g=320">Moderators</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=5770"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>3</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 40 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=5770&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=5770&amp;start=30">3</a> &nbsp;<a href="./viewtopic.php?f=10&amp;t=5770&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=10&amp;t=5770&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=10&amp;t=5770&amp;view=previous">Previous topic</a> | <a href="./viewtopic.php?f=10&amp;t=5770&amp;view=next">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p52993"></a>
				<b class="postauthor">AndiNo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p52993">Questions about scrolling and sprites on (S)NES</a></div><div style="float: right;"><a href="./viewtopic.php?p=52993#p52993"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Nov 25, 2009 6:21 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4121.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 25, 2009 5:06 am<br /><b>Posts:</b> 37
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Hi! Obviously I'm new here and I'm completely new to programming for any console. Although I'm currently programming for the SNES I hope I can ask questions here, too, as this was the only newbie subforum I saw.
<br />I have two questions regarding scrolling and sprites on these old systems (NES and SNES) - I guess they are quite similar in this regard.
<br />
<br />1. There are many games using sprites which are much bigger than 8x8 pixels, Super Metroid for example. I read I can use sizes up to 64x64, but still the Samus sprite is still bigger (bosses even more). Do I have to "render" multiple sprites to get one big image on the screen? That's what I currently do, but it's somewhat strange.
<br />
<br />2. I want to implement scrolling in my game, however from what I saw/read this can't be done like it's done on modern computers (for example) where the whole screen is constantly re-drawn. I should say that I implemented a tile-based engine (something like in Mario games).
<br />What I've read up to now is still a bit unclear to me, however it sounded like I have to substitute rows of tiles on the screen while moving/scrolling the map. I managed to get the background scrolling, but of course it always wrapped at the end of the screen. What is the proper way to do this? I'm aiming for something like in Mario3 on the NES.
<br />
<br />I hope I wasn't too unclear, if so please ask anything that isn't clear.
<br />Thanks in advance!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4121"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p52994"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p52994"></a></div><div style="float: right;"><a href="./viewtopic.php?p=52994#p52994"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Nov 25, 2009 9:56 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38_1485425698.png" width="100" height="94" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 7470<br /><b>Location:</b> Chexbres, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">About sprites you shouldn't confuse sprites with meta-sprites.
<br />
<br />Sprites (on the hardware viewpoint) is a piece of graphic the PPU place over BG by hardware.
<br />
<br />A meta sprite (commonly called Sprite in Gamer's communauty) is one or more sprites that joined together to form a character, enemy, weapon, etc...
<br />
<br />About BG scrolling you can't redraw the whole screen at once, but all you have to know is that you have memory for something larger than the screen which is shown, so basically you redraw tiles in the parts that aren't visiable when scrolling. On the NES it's a bit more complicated if you want to do multi-directionnal scrolling because you don't always have the margin I just talked about, and this leads into glitches on the sides of the screen (you have probably already seen them in NES games).</div>

					
						<div class="postbody"><br />_________________<br />Life is complex: it has both real and imaginary components.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p52999"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p52999">Re: Questions about scrolling and sprites on (S)NES</a></div><div style="float: right;"><a href="./viewtopic.php?p=52999#p52999"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Nov 25, 2009 10:51 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AndiNo wrote:</div><div class="quotecontent">Do I have to "render" multiple sprites to get one big image on the screen? That's what I currently do, but it's somewhat strange.</div><br />This is how it happens. It may seem strange if you are doing it in a hardcoded way (manually setting up all the sprites of a particular object), but usually programmers implement a sprite system. For each possible frame of a character there is a list of the necessary sprites to draw it. It's just a series of .db or .dw statements that represent things like "this frame needs 4 sprites; the first one is at coordinates (4, 5) and uses tile $78; the second is at coordinates (12, <img src="./images/smilies/icon_cool.gif" alt="8)" title="Cool" /> and uses tile $79 (...)". The coordinates are usually relative to the position of the object/character being drawn. This means that the sprite system can draw any frame of any character if you point it to the correct list.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What I've read up to now is still a bit unclear to me, however it sounded like I have to substitute rows of tiles on the screen while moving/scrolling the map. I managed to get the background scrolling, but of course it always wrapped at the end of the screen. What is the proper way to do this?</div>
<br />So you noticed it wraps around, right? All you have to do is redraw that part that wraps, before it wraps. What you have to do is constantly overwrite the parts that are off screen with new data before they are back on screen (due to wrapping). Players won't notice the background is wrapping, because you drew new tiles over the old ones.
<br />
<br />When scrolling horizontally you have to draw columns of tiles, and when scrolling vertically you have to draw rows of tiles. The size of the drawing area that is off screen makes a difference. The NES has only 2 built in Name Tables, which you can arrange as a 512x240 (vertical mirroring) or 256x480 (horizontal mirroring) area, so it's hard to scroll vertically and horizontally without some visible glitches (like Bregalad said), because you always lack an off screen area either vertically or horizontally.
<br />
<br />There are ways to avoid these glitches, even though many games just make them appear at the top and/or bottom 8 scanlines in hopes that TVs will not display those scanlines (which is not always the case). some very famous games like SMB3 or Kirby have the glitches very visible at the sides. The SNES has a drawing area big enough for this not to be a problem there.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p53007"></a>
				<b class="postauthor">AndiNo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53007"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53007#p53007"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Nov 25, 2009 2:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4121.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 25, 2009 5:06 am<br /><b>Posts:</b> 37
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks, that were some really helpful answers!
<br />I will try to implement these metasprites. From there animations shouldn't be too hard to do.
<br />I will have to take a more detailed look at scrolling though when I have the time. Your posts were good hints as to what I have to look at.
<br />If I have any questions I will come back... I didn't expect the "homebrew" scene to be so active <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4121"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p53016"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53016"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53016#p53016"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Nov 25, 2009 4:22 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AndiNo wrote:</div><div class="quotecontent">I will try to implement these metasprites. From there animations shouldn't be too hard to do.</div><br />You can think of animations as collections of metasprites, much like metasprites are collections of sprites. For animations, you have to specify the duration of each frame, and some other details such as if the animation loops or stays in the last frame when it finishes, things like that, but depending on the needs of your game of course.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I will have to take a more detailed look at scrolling though when I have the time.</div>
<br />It helps if you create a "camera" object that is not much different from other game objects. It has a position within the level and dimensions, like any regular object. By keeping track of how much it moves, you can tell when you need a new column or row of tiles. Using the direction of that movement and the dimensions of the camera you can tell where to read the tiles from (in the level map) and where to write them to (in VRAM).</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p53065"></a>
				<b class="postauthor">AndiNo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53065"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53065#p53065"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Nov 26, 2009 12:22 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4121.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 25, 2009 5:06 am<br /><b>Posts:</b> 37
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Thanks for your reply! However I have to say I already have some experience with "2D side scrollers". I have already implemented such a game engine in C++ with SDL on the computer, so I just have to get used to this stuff again, and of course I have to understand how the SNES works (in those parts).
<br />I will do some research and come back here if there is something I don't understand. Thanks for your help so far!</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4121"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p53147"></a>
				<b class="postauthor">AndiNo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53147"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53147#p53147"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Nov 27, 2009 5:34 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4121.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 25, 2009 5:06 am<br /><b>Posts:</b> 37
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Back again! I also have some questions at hand and hope you don't mind giving me advice again <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />1. My game is coming along nicely, however I've run into some hardware-specific problems. After expanding my code I now experience quite some lagging and flickering of my sprites. I assume this is due too much code being executed (execution is taking too long). Is there anything I can do about this (except reducing running code of course) ?
<br />
<br />2. From what I understood the system runs constantly at 60 FPS, so I have a set amount of time per frame. Is that the time between the vertical blanks? Concerning the code being executed, if it takes longer than the given time I have per frame, does the SNES just draw the current status of the game while the code is still performing in the background?
<br />
<br />3. Whenever a gameobject is destroyed, its sprite remains at the last given position on the screen. Thus I reset all SNES-sprites at the beginning of each frame so they are not visible anymore. Is there any other way to do that? And what can I do to make a specific sprite really invisible (not just giving them position 0,0)?
<br />
<br />Thanks in advance again! I'm looking forward to getting a small game done! <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4121"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p53152"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53152"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53152#p53152"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Fri Nov 27, 2009 6:08 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I understand that you are familiar with how games work, and your biggest problem is implementing what you already know in an old gaming console. Having made that transition myself I do believe I can help you out a bit.
<br />
<br />I'll try to answer what I can, but since I don't know much about the SNES itself (it's not among the consoles I have programmed for), I'll leave anything too specific for other people to answer.
<br />
<br /><div class="quotetitle">AndiNo wrote:</div><div class="quotecontent">After expanding my code I now experience quite some lagging and flickering of my sprites. I assume this is due too much code being executed (execution is taking too long).</div><br />Hard to know without knowing more about how you coded it.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Is that the time between the vertical blanks?</div><br />Yeah, usually you use the time between vertical blanks to calculate all the game logic and generate the data you need to update the video, and vertical blank is the time when you do all the video updates, using the data you calculated earlier.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Concerning the code being executed, if it takes longer than the given time I have per frame, does the SNES just draw the current status of the game while the code is still performing in the background?</div><br />It depends on how you code the game. Your program should be able to tell when a frame wasn't enough time to calculate everything, in which case you don't perform video updates, or else you'd get a corrupt frame (this might be what's causing the problem you described before).<br /><br />When playing games you can often see that when there are too many objects on screen at once the games lag. Usually, you don't do any video updates when a lag frame is detected, because you don't want to use partially processed data or anything like that, so you just keep calculating the game logic until it's done, and hopefully by the next VBlank everything will be ready. Because of this players get the impression that the things are in "slow motion".<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Whenever a gameobject is destroyed, its sprite remains at the last given position on the screen. Thus I reset all SNES-sprites at the beginning of each frame so they are not visible anymore. Is there any other way to do that?</div><br />Why don't you make the object's destructor place the sprites it was using off screen? In most NES games, the sprites are usually all reset (put off screen) to be reused by the objects as necessary every frame, but this is partially done because of sprite cycling as well, so I'm not sure if this is common on SNES games. Genesis/MD games seem to do it like in the NES though.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">And what can I do to make a specific sprite really invisible (not just giving them position 0,0)?</div>
<br />What's so bad about placing the sprites off screen? I don't know if the SNES has any means of making individual sprites invisible, but none of the other consoles I know do. The closest thing to actually disabling sprites I've already seen is in the video chip used by the MSX (and a shitload of other machines): if you put one sprite at a certain Y coordinate, all the sprites after that are ignored. This is useful, but doesn't allow you disable individual sprites.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p53171"></a>
				<b class="postauthor">Bregalad</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53171"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53171#p53171"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Nov 28, 2009 3:20 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=38_1485425698.png" width="100" height="94" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Fri Nov 12, 2004 2:49 pm<br /><b>Posts:</b> 7470<br /><b>Location:</b> Chexbres, VD, Switzerland
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">You should probably separate software sprites from hardware sprites (I don't know if you arlready do).
<br />OAM memory ($200-$2ff) should be cleared at the start of every frame so all sprites are below the screen (Y position $f0).
<br />Then whenever you need to show a metasprite, call a routine that mazes it into memory for you, by adding relative H/V positions to the main sprite position and coping other attributes to OAM. Having a system that allows to switch the palette and flip the sprite at least horizontally is a nice plus. I could share my OAM engine if you want.
<br />
<br />For the SNES I'm pretty sure it's almost exactly the same, exept you have 2 OAM buffers, and that X/Y pos have more than 8 bits (so you can scroll them correctly at last). You'd still want to place a sprite below the screen to hide it.
<br />
<br />And BTW the C64 has a way to actually disable sprites, and you usually have to play tricks with it to do OAM cycling to be able to show more than 8 sprites on the screen.</div>

					
						<div class="postbody"><br />_________________<br />Life is complex: it has both real and imaginary components.</div>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=38"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p53174"></a>
				<b class="postauthor">AndiNo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53174"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53174#p53174"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Nov 28, 2009 4:35 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4121.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 25, 2009 5:06 am<br /><b>Posts:</b> 37
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I can write down what things I do in every frame, maybe that would make things a bit clearer. Besides that I have to say I'm not programming in assembler but in C (using the SNES SDK). I've read many posts which state that C is subordinate to assembler on the SNES, do you think that could be the (main) reason for my game running slowly?
<br />btw: Is there a way to measure the time left before the vblank happens? And I read you can set the SNES clock from 2.68 to 3.xx MHz. I tried that as I guessed it could possibly make the CPU faster, but the flickering was worse - maybe I did something wrong or am assuming wrong things.
<br />
<br />What can I do if ALL frames take more than one vblank to be completed? I changed my program so that it waits for vblank before drawing stuff and the flickering was gone, however it runs slow now (as you said).
<br />
<br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">Why don't you make the object's destructor place the sprites it was using off screen?</div>I don't because I currently only save HOW MANY sprites are in use, not where. I would have to implement some intelligence that assigns sprite numbers to objects, however that seems to be a bit complicated. I will look into that.<br /><br /><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">What's so bad about placing the sprites off screen?</div>Nothing, but I should have asked slightly different, as Bregalad wrote what I wanted to know <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> So putting sprites at a given position makes the SNES not render them is what I understand.
<br />
<br />@Bregalad
<br />Thanks for your proposal but I think that won't be helpful to me as I'm using C, not assembler. However I implemented metasprites and wanted to test them when the flickering problem got in my way <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4121"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p53187"></a>
				<b class="postauthor" style="color: #FF3300">tepples</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53187"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53187#p53187"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Nov 28, 2009 10:48 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sun Sep 19, 2004 11:12 pm<br /><b>Posts:</b> 20409<br /><b>Location:</b> NE Indiana, USA (NTSC)
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AndiNo wrote:</div><div class="quotecontent">I can write down what things I do in every frame, maybe that would make things a bit clearer. Besides that I have to say I'm not programming in assembler but in C (using the SNES SDK). I've read many posts which state that C is subordinate to assembler on the SNES, do you think that could be the (main) reason for my game running slowly?</div><br />C isn't necessarily slow. Compilers are slow because there isn't much of a market for compilers targeting 6502 family ISA because microcontrollers are either PIC or ARM nowadays. Also, use of data types too big for the CPU and operations that the CPU doesn't support natively is slow, such as multiplication, division, data-dependent rotation, or array-of-structure memory organization. C just hides that for you by making everything look like a PDP-11 from the programmer's perspective.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">btw: Is there a way to measure the time left before the vblank happens?</div><br />The Super NES has a scanline counter, doesn't it?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">And I read you can set the SNES clock from 2.68 to 3.xx MHz. I tried that as I guessed it could possibly make the CPU faster, but the flickering was worse</div><br />A lot of games OC the Super NES CPU to 3.6 MHz. This became more common as the faster ROMs needed for 3.6 MHz operation dropped in price.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What can I do if ALL frames take more than one vblank to be completed?</div><br />You could always go the Micronics route of reducing the frame rate to 30 or 20 fps. A lot of Game Boy monochrome games like Pokemon ran at 30 fps to compensate for the original model's slow LCD, and it still doesn't look <em>that</em> bad on a Super Game Boy.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I don't because I currently only save HOW MANY sprites are in use, not where.</div><br />If the first 16 sprites are in use, and this number drops to 13, kill 13 through 15. It should be simpler on the Super NES than on the NES because you don't have to worry as much about cycling, sprite 0 hit detection, or huge metasprites.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"><div class="quotetitle">tokumaru wrote:</div><div class="quotecontent">What's so bad about placing the sprites off screen?</div>Nothing, but I should have asked slightly different, as Bregalad wrote what I wanted to know <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /> So putting sprites at a given position makes the SNES not render them is what I understand.</div>
<br />As long as they're <em>vertically</em> offscreen. Otherwise, they might contribute to the 100% overdraw limit per scanline.</div>

					
							<br /><br />
							<span class="gensmall">Last edited by <a href="./memberlist.php?mode=viewprofile&amp;u=9" style="color: #FF3300;" class="username-coloured">tepples</a> on Sat Nov 28, 2009 10:51 am, edited 1 time in total.</span>
						<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=9"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p53189"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53189"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53189#p53189"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Nov 28, 2009 10:51 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AndiNo wrote:</div><div class="quotecontent">I'm not programming in assembler but in C</div><br />This makes a big difference I guess. C programs are never as fast as hand-coded assembly on these old processors. I wouldn't be surprised if a complex game with scrolling, many sprites and so on couldn't handle all its logic in a single frame.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">btw: Is there a way to measure the time left before the vblank happens?</div><br />In the NES we usually change something on the display, such as the monochrome bit, at the exact moment the frame calculations are over. I'm sure the SNES has something you can change mid-frame for a visual indication of how much time you have left. Of course that if your logic takes over one full frame, you'll see one frame without the visual indication and the next one will have it, because the first frame doesn't have any free time at all.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">What can I do if ALL frames take more than one vblank to be completed?</div><br />If you don't want to code it in assembly or optimize the hell out of it, embrace your new frame rate of 30 frames per second. It will not look as smooth, but if you move your objects twice as much they will appear to be moving at the same speed as before.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I don't because I currently only save HOW MANY sprites are in use, not where.</div><br />Well, then I don't know how your sprite system works. You have to know which sprites you used if you want to move them, animate them and so on, don't you?<br /><br />If the sprite remains after an object is destroyed this means the sprite was somehow hardwired to that particular object, and to me this means there must be some variable responsible for this link. Personally I prefer to not hardcode sprites, like I explain below.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">I would have to implement some intelligence that assigns sprite numbers to objects, however that seems to be a bit complicated. I will look into that.</div>
<br />Most games I studied (on the NES and Genesis/MD) completely reassign the sprites every frame. AFAIK, this is the most "professional" way to handle sprites.
<br />
<br />In my (NES) game, every frame I loop through all the active objects so that each on can do their thing (move, shoot, whatever). When they are done, they draw themselves by calling the sprite rendering routine. This routine gets a pointer to the meta-sprite to use from the object's RAM (which could be anything the object put there, but usually the character animation routine maintains this value so that it points to the current animation frame) and uses the object's position to process the meta-sprite information and generate all the individual sprites necessary.
<br />
<br />After all hardware sprites have been written, I put the remaining ones (the ones I didn't use) off screen, so that they are not displayed.
<br />
<br />With this technique the objects don't know which hardware sprites were used, but they don't have to, because they are completely redrawn every frame. Also, once they are destroyed, they simply won't call the drawing routine anymore and will be 100% gone.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p53190"></a>
				<b class="postauthor">MottZilla</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53190"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53190#p53190"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Nov 28, 2009 11:10 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=1726.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Dec 06, 2006 8:18 pm<br /><b>Posts:</b> 2827
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">About CPU Speed and SNES. The SNES CPU generally runs at 3.58mhz on Internal Operation Cycles like Register access. On cycles that access external memory like ROM, RAM, or SNES registers the speed of the bus changes. There is no way to make RAM access faster but if you use FastROM and enable it with the appropriate register, Banks above $80 will be accessed at FastROM speed giving some speed boost.
<br />
<br />But it sounds to me like you need to figure out what all you have going on and see where you are spending too much time. FastROM can give you a small boost but you can't depend on that. Also contrary to what people may think or tell you, the SNES is pretty much never going to run 3.58mhz because your game will have to access memory that takes more cycles so your CPU reguardless of FastROM will be running between 2.68mhz and 3.58mhz and with usage of FastROM the average speed just gets to be a bit higher which is nice.
<br />
<br />About sprites, I would agree that you should keep a counter of how many sprites you are using and when the number from the last frame to the new frame goes down you should set the range of previously used but now unused sprites to have a Y position below the screen. It's fast and to the point making the sprites out of the way. Don't set sprites to 0, it's better practice to set them below the screen. NTSC SNES normally runs for 224 lines of active video though to be safe you could always just set all the sprites to Y = 240.
<br />
<br />If you want to always run at 30FPS you will need your NMI handler to count how many Vertical Blanks have happened since the previous video frame update. When two have happened it would be time to reset the counter and quickly update the video in the VBLANK time remaining. This would ensure you maintain 30FPS at maximum and reduce the slowdown effect of too much processing. 
<br />
<br />About flickering, this could happen if you are out of time in VBLANK. If you run out the remaining transfers will be ignored or corrupted. You need to be very efficient with your VBLANK time. Flickering normally will only happen if you have too many sprites on the same scanline and you are cycling the sprite order. If you are not then sprites over 34 (total 8x8 units) simply aren't drawn. SNES has registers that let you change sprite priority without changing the software order you put sprites together with. But if you layer sprites for a reason you will need to do it in software or check things atleast.
<br />
<br />As far as what code you are executing you should make sure that VBLANK time is first spent doing any video updates. Nothing should come before this. It's the only time you get to change the video frame. If your processing isn't complete yet you just simply don't update the video at all and resume processing and hopefully you will be ready next time around. Other than that you just need to make choices about how you process each game frame. You only have whatever VBLANK time remains plus all active scanlines' time (minus WRAM refresh and HDMA if using it) to process all your game logic and prepare the video update for the next VBLANK. Perhaps something in your design just eats up way too much time.
<br />
<br />tokumaru, I'm not so sure that C is the problem for his speed. It may be partly responsible but even C code can be wasteful of cpu time due to how it is written not just because it is C and not ASM. Going 30FPS certainly is an easy way to gain alot more processing time though.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=1726"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p53202"></a>
				<b class="postauthor">AndiNo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53202"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53202#p53202"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Nov 28, 2009 12:55 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=4121.jpg" width="100" height="100" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Wed Nov 25, 2009 5:06 am<br /><b>Posts:</b> 37
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Big thanks guys, your posts make for a VERY interesting read! I already gained some new insight in the whole SNES-tech. I will revise my code to find the slowdowns, I guess I assumed too much power when writing the code (coding for todays PCs has its impact on me <img src="./images/smilies/icon_wink.gif" alt=";)" title="Wink" /> ).
<br />Then only one thing remains: Could you (like tepples partially did) write a short summary of which operations are costly CPU-time-wise? i.e. is comparing two numbers more expensive than adding etc... I think this would prove to be a help when revising the code - of course only if it makes a difference and not only my code is written badly <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=4121"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p53204"></a>
				<b class="postauthor">tokumaru</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> <a href="#p53204"></a></div><div style="float: right;"><a href="./viewtopic.php?p=53204#p53204"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Sat Nov 28, 2009 1:20 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=95.png" width="80" height="80" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Feb 12, 2005 9:43 pm<br /><b>Posts:</b> 10714<br /><b>Location:</b> Rio de Janeiro - Brazil
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">AndiNo wrote:</div><div class="quotecontent">Could you (like tepples partially did) write a short summary of which operations are costly CPU-time-wise?</div>
<br />The only individual thing I can think of that tepples didn't mention is floating-point numbers. Don't use them, stick to integers and use fixed-point if you really need fractional values.
<br />
<br />I guess it's obvious that most of the time is spent in loops, so you should try to optimize/avoid those as much as possible. If you are modifying only a few elements of an array, modify each one explicitly instead of using a loop.
<br />
<br />Also, don't bother clearing values that will be overwritten (like I mentioned I do in my sprite system, I just place off screen the sprites that weren't used, instead of clearing them all before rendering any sprites).
<br />
<br />I'll let you know if I think of anything else.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=95"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=10&amp;t=5770"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=10"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=10&amp;t=5770"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>3</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 40 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to pageâ€¦">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=5770&amp;start=15">2</a><span class="page-sep">, </span><a href="./viewtopic.php?f=10&amp;t=5770&amp;start=30">3</a> &nbsp;<a href="./viewtopic.php?f=10&amp;t=5770&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php">Board index</a> &#187; <a href="./viewforum.php?f=24">NES / Famicom</a> &#187; <a href="./viewforum.php?f=10">Newbie Help Center</a></p>
			<p class="datetime">All times are UTC - 7 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: No registered users and 6 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="get" name="search" action="./search.php"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /><input type="hidden" name="t" value="5770" />
<input type="hidden" name="sf" value="msgonly" />
</form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="24">NES / Famicom</option>
		
			<option value="2">&nbsp; &nbsp;NESdev</option>
		
			<option value="3">&nbsp; &nbsp;NESemdev</option>
		
			<option value="21">&nbsp; &nbsp;NES Graphics</option>
		
			<option value="6">&nbsp; &nbsp;NES Music</option>
		
			<option value="22">&nbsp; &nbsp;Homebrew Projects</option>
		
			<option value="34">&nbsp; &nbsp;&nbsp; &nbsp;2018 NESdev Competition</option>
		
			<option value="33">&nbsp; &nbsp;&nbsp; &nbsp;2017 NESdev Competition</option>
		
			<option value="32">&nbsp; &nbsp;&nbsp; &nbsp;2016 NESdev Competition</option>
		
			<option value="31">&nbsp; &nbsp;&nbsp; &nbsp;2014 NESdev Competition</option>
		
			<option value="30">&nbsp; &nbsp;&nbsp; &nbsp;2011 NESdev Competition</option>
		
			<option value="10" selected="selected">&nbsp; &nbsp;Newbie Help Center</option>
		
			<option value="9">&nbsp; &nbsp;NES Hardware and Flash Equipment</option>
		
			<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Reproduction</option>
		
			<option value="19">&nbsp; &nbsp;NESdev International</option>
		
			<option value="11">&nbsp; &nbsp;&nbsp; &nbsp;FCdev</option>
		
			<option value="18">&nbsp; &nbsp;&nbsp; &nbsp;NESdev China</option>
		
			<option value="27">&nbsp; &nbsp;&nbsp; &nbsp;NESdev Middle East</option>
		
			<option value="25">Other</option>
		
			<option value="5">&nbsp; &nbsp;General Stuff</option>
		
			<option value="4">&nbsp; &nbsp;Membler Industries</option>
		
			<option value="23">&nbsp; &nbsp;Other Retro Dev</option>
		
			<option value="12">&nbsp; &nbsp;&nbsp; &nbsp;SNESdev</option>
		
			<option value="20">&nbsp; &nbsp;&nbsp; &nbsp;GBDev</option>
		
			<option value="15">&nbsp; &nbsp;Test Forum</option>
		
			<option value="26">Site Issues</option>
		
			<option value="13">&nbsp; &nbsp;phpBB Issues</option>
		
			<option value="14">&nbsp; &nbsp;Web Issues</option>
		
			<option value="16">&nbsp; &nbsp;nesdevWiki</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>


<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
	</span>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61452025-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>